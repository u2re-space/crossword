<!DOCTYPE html>
<html lang="en" data-crx-page="popup">
<head>
    <meta charset="UTF-8">
    <meta name="text-scale" content="scale">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CrossWord</title>
    <link rel="stylesheet" href="../fix.scss" data-owner="critical-init">
    <link rel="stylesheet" href="./index.scss" data-owner="critical-init">
</head>
<body data-crx-page="popup">
    <div id="app">

        <!-- Feature 2: Snip & Process -->
        <section class="popup-section">
            <h2>Snip &amp; Process</h2>
            <div class="snip-controls">
                <select id="snip-action-select">
                    <option value="START_SNIP">üìù Recognize (OCR/AI)</option>
                    <option value="SOLVE_AND_ANSWER">üßÆ Solve / Answer</option>
                    <option value="WRITE_CODE">üíª Generate Code</option>
                    <option value="EXTRACT_CSS">üé® Extract CSS</option>
                    <option value="CRX_SNIP_SCREEN">üì∏ Rectangle Capture</option>
                </select>
                <button type="button" id="snip-do" title="Execute selected action">‚ö° Go</button>
            </div>
        </section>

        <!-- Feature 3: Copy / Convert -->
        <section id="copy-section" class="popup-section" hidden>
            <h2>Process &amp; Copy</h2>
            <p id="selection-empty" class="selection-empty">Select text in the page to use this action.</p>
            <div class="selection-copy-row selection-copy-row--wrap">
                <button type="button" id="selection-process" title="Process selected text with CRX-Snip">üìã Process Selected Text</button>
                <div class="copy-grid">
                    <button type="button" data-copy="copy-as-latex" title="Copy as LaTeX">LaTeX</button>
                    <button type="button" data-copy="copy-as-mathml" title="Copy as MathML">MathML</button>
                    <button type="button" data-copy="copy-as-markdown" title="Copy as Markdown">Markdown</button>
                    <button type="button" data-copy="copy-as-html" title="Copy as HTML">HTML</button>
                </div>
            </div>
        </section>

        <!-- Feature 1: Markdown Viewer -->
        <section class="popup-section">
            <h2>Markdown Viewer</h2>
            <div class="md-controls">
                <input type="url" id="md-url" placeholder="Paste .md URL or GitHub link‚Ä¶" >
                <button type="button" id="md-open" title="Open in viewer">Open</button>
            </div>
        </section>

        <!-- Settings (collapsible) -->
        <details>
            <summary><h2 class="settings-summary-title">Settings</h2></summary>
            <section class="popup-section">
                <form id="settings-form"><ul>
                    <li>
                        <label for="response-language">Response Language</label>
                        <select id="response-language">
                            <option value="auto">Auto-detect</option>
                            <option value="follow">Follow source/context</option>
                            <option value="en">English</option>
                            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                        </select>
                    </li>
                    <li>
                        <label for="translate-results">Translate Results</label>
                        <input type="checkbox" id="translate-results" class="settings-grid-input" >
                    </li>
                    <li>
                        <label for="generate-svg" title="Generate inline SVG graphics for graphs, diagrams, and visualizations">Generate SVG</label>
                        <input type="checkbox" id="generate-svg" class="settings-grid-input" >
                    </li>
                    <li>
                        <label for="api-url">API URL</label>
                        <input keyboard-type="url" type="url" id="api-url" >
                    </li>
                    <li>
                        <label for="api-key">API Key</label>
                        <input keyboard-type="password" type="password" id="api-key" autocomplete="off">
                        <input type="checkbox" id="show-api-key" class="show-api-key-toggle" >
                    </li>
                    <li class="settings-grid-full">
                        <label>MCP Servers</label>
                        <p id="mcp-validation-error" class="mcp-error" aria-live="polite"></p>
                        <div id="mcp-config-list" class="mcp-list" aria-live="polite"></div>
                        <div class="mcp-actions">
                            <button type="button" id="mcp-add">Add MCP server</button>
                            <button type="button" id="mcp-import">Import MCP</button>
                            <button type="button" id="mcp-export">Export MCP</button>
                            <input type="file" id="mcp-import-file" accept="application/json" >
                        </div>
                    </li>
                    <li class="settings-save-row">
                        <button type="submit" id="save-settings">Save Settings</button>
                    </li>
                </ul></form>
            </section>
        </details>
    </div>
    <script src="./index.ts" type="module" async defer></script>
</body>
</html>
