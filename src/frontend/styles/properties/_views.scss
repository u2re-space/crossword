/**
 * View Custom Properties
 *
 * CSS custom properties specific to view components.
 * Uses :has() selectors for context-aware theming.
 *
 * Layer: properties.views
 *
 * @module properties/views
 */

@use "../lib" as lib;

// ============================================================================
// LAYER: properties.views
// ============================================================================

@layer properties.views {

    // ==========================================================================
    // VIEW BASE PROPERTIES
    // ==========================================================================

    :root {
        // View layout tokens
        --view-padding: var(--space-4);
        --view-padding-x: var(--space-6);
        --view-padding-y: var(--space-4);
        --view-max-width: 100%;
        --view-content-max-width: 960px;
    }

    // ==========================================================================
    // CONTEXT: VIEWER VIEW (Markdown/Document Viewer)
    // ==========================================================================

    :root:has([data-view="viewer"]),
    html:has([data-view="viewer"]) {
        // Viewer-specific layout
        --view-padding: var(--space-6);
        --view-content-max-width: 800px;

        // Markdown content styling tokens
        --view-prose-font-size: var(--text-base);
        --view-prose-line-height: 1.75;
        --view-prose-heading-margin: var(--space-6);

        // Code blocks
        --view-code-bg: var(--color-gray-100);
        --view-code-fg: var(--color-text);
        --view-code-border: var(--color-border);
        --view-code-font-size: 0.9em;

        // Blockquotes
        --view-blockquote-border: var(--color-primary);
        --view-blockquote-bg: var(--color-surface-hover);

        // Links
        --view-link-color: var(--color-link);
        --view-link-hover: var(--color-link-hover);
    }

    // Viewer dark theme
    :root:has([data-view="viewer"][data-theme="dark"]),
    html:has([data-view="viewer"] [data-theme="dark"]),
    :root:has([data-theme="dark"] [data-view="viewer"]) {
        --view-code-bg: #2d2d2d;
        --view-code-fg: #e0e0e0;
        --view-blockquote-bg: #252525;
    }

    // ==========================================================================
    // CONTEXT: SETTINGS VIEW
    // ==========================================================================

    :root:has([data-view="settings"]),
    html:has([data-view="settings"]) {
        --view-padding: var(--space-6);
        --view-content-max-width: 640px;

        // Settings-specific tokens
        --view-section-gap: var(--space-8);
        --view-field-gap: var(--space-4);
        --view-label-color: var(--color-text-secondary);
    }

    // ==========================================================================
    // CONTEXT: HOME VIEW
    // ==========================================================================

    :root:has([data-view="home"]),
    html:has([data-view="home"]) {
        --view-padding: var(--space-8);
        --view-content-max-width: 1200px;

        // Home-specific tokens
        --view-hero-padding: var(--space-16);
        --view-card-gap: var(--space-6);
    }

    // ==========================================================================
    // CONTEXT: BOOT VIEW (Loading/Selection Screen)
    // ==========================================================================

    :root:has([data-view="boot"]),
    html:has([data-view="boot"]) {
        --view-padding: var(--space-8);
        --view-content-max-width: 480px;

        // Boot screen tokens
        --view-boot-bg: var(--color-background);
        --view-boot-card-bg: var(--color-surface-elevated);
        --view-boot-card-shadow: var(--shadow-lg);
    }

    // ==========================================================================
    // CONTEXT: DEBUG VIEW
    // ==========================================================================

    :root:has([data-view="debug"]),
    html:has([data-view="debug"]) {
        --view-padding: var(--space-4);
        --view-content-max-width: none;

        // Debug-specific tokens
        --view-debug-font: var(--font-mono);
        --view-debug-font-size: var(--text-sm);
        --view-debug-bg: #1a1a2e;
        --view-debug-fg: #00ff00;
        --view-debug-border: #333366;
    }

    // ==========================================================================
    // VIEW + SHELL COMBINATIONS
    // Context-aware styling for specific view/shell pairs
    // ==========================================================================

    // Viewer in Faint shell: adjust for sidebar
    :root:has([data-shell="faint"] [data-view="viewer"]),
    html:has([data-shell="faint"] [data-view="viewer"]) {
        --view-content-max-width: 720px;
        --view-padding-x: var(--space-8);
    }

    // Viewer in Basic shell: center content
    :root:has([data-shell="basic"] [data-view="viewer"]),
    html:has([data-shell="basic"] [data-view="viewer"]) {
        --view-content-max-width: 800px;
        --view-padding-x: var(--space-6);
    }

    // Home in Raw shell: maximize space
    :root:has([data-shell="raw"] [data-view="home"]),
    html:has([data-shell="raw"] [data-view="home"]) {
        --view-padding: var(--space-4);
        --view-content-max-width: 100%;
    }

    // ==========================================================================
    // RESPONSIVE ADJUSTMENTS
    // ==========================================================================

    @media (max-width: 768px) {
        :root {
            --view-padding: var(--space-3);
            --view-padding-x: var(--space-4);
            --view-padding-y: var(--space-3);
        }

        :root:has([data-view="viewer"]),
        html:has([data-view="viewer"]) {
            --view-padding: var(--space-4);
            --view-prose-font-size: var(--text-sm);
        }

        :root:has([data-view="home"]),
        html:has([data-view="home"]) {
            --view-hero-padding: var(--space-8);
            --view-card-gap: var(--space-4);
        }
    }

    @media (max-width: 480px) {
        :root {
            --view-padding: var(--space-2);
            --view-padding-x: var(--space-3);
        }
    }

}
