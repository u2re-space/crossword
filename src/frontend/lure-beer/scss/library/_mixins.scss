// Mixins for BeerCSS - Simple replacements for VeelaCSS mixins
// These are minimal implementations that provide the same functionality

// Flexbox utilities
@mixin flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
}

@mixin flex-between {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

// Surface/background styling
@mixin surface($opacity: 0.08) {
    background-color: rgba(0, 0, 0, $opacity);

    @media (prefers-color-scheme: dark) {
        background-color: rgba(255, 255, 255, $opacity);
    }
}

// Backdrop blur
@mixin backdrop-blur($intensity: "subtle") {
    $blur: 4px;

    @if $intensity =="subtle" {
        $blur: 4px;
    }

    @else if $intensity =="medium" {
        $blur: 8px;
    }

    @else if $intensity =="strong" {
        $blur: 12px;
    }

    backdrop-filter: blur($blur);
    -webkit-backdrop-filter: blur($blur);
}

// Button variants
@mixin button-variant($opacity: 0.12) {
    background-color: rgba(0, 0, 0, $opacity);
    border: 1px solid rgba(0, 0, 0, $opacity * 2);
    transition:
        background-color 0.2s,
        border-color 0.2s;

    @media (prefers-color-scheme: dark) {
        background-color: rgba(255, 255, 255, $opacity);
        border-color: rgba(255, 255, 255, $opacity * 2);
    }

    &:hover {
        background-color: rgba(0, 0, 0, $opacity * 1.5);

        @media (prefers-color-scheme: dark) {
            background-color: rgba(255, 255, 255, $opacity * 1.5);
        }
    }

    &:active {
        background-color: rgba(0, 0, 0, $opacity * 2);

        @media (prefers-color-scheme: dark) {
            background-color: rgba(255, 255, 255, $opacity * 2);
        }
    }
}

@mixin toolbar-button {
    cursor: pointer;
    border: none;
    outline: none;

    &:hover {
        opacity: 0.8;
    }

    &:active {
        opacity: 0.6;
    }

    &:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }
}

// Navigation item styling
@mixin nav-item {
    display: flex;
    align-items: center;
    gap: var(--gap-xs, 0.5rem);
    padding: var(--padding-sm, 0.5rem);
    border-radius: var(--radius-sm, 0.25rem);
    text-decoration: none;
    color: rgba(0, 0, 0, 0.87);
    transition:
        background-color 0.2s,
        color 0.2s;

    @media (prefers-color-scheme: dark) {
        color: rgba(255, 255, 255, 0.87);
    }

    &:hover {
        background-color: rgba(0, 0, 0, 0.04);

        @media (prefers-color-scheme: dark) {
            background-color: rgba(255, 255, 255, 0.04);
        }
    }

    &.active,
    &[aria-current="page"] {
        background-color: rgba(0, 0, 0, 0.08);
        font-weight: 600;

        @media (prefers-color-scheme: dark) {
            background-color: rgba(255, 255, 255, 0.08);
        }
    }
}

// Scrollable container
@mixin scrollable {
    overflow-y: auto;
    overflow-x: hidden;
    scrollbar-width: thin;
    scrollbar-color: rgba(0, 0, 0, 0.2) transparent;

    &::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    &::-webkit-scrollbar-track {
        background: transparent;
    }

    &::-webkit-scrollbar-thumb {
        background-color: rgba(0, 0, 0, 0.2);
        border-radius: 4px;

        &:hover {
            background-color: rgba(0, 0, 0, 0.3);
        }
    }

    @media (prefers-color-scheme: dark) {
        scrollbar-color: rgba(255, 255, 255, 0.2) transparent;

        &::-webkit-scrollbar-thumb {
            background-color: rgba(255, 255, 255, 0.2);

            &:hover {
                background-color: rgba(255, 255, 255, 0.3);
            }
        }
    }
}

// Select dropdown styling
@mixin select-dropdown() {
    background-color: rgba(0, 0, 0, $shade);
    border: 1px solid rgba(0, 0, 0, $shade * 2);
    border-radius: var(--radius-sm, 0.25rem);
    padding: var(--padding-sm, 0.5rem);
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23000' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right var(--space-sm, 0.5rem) center;
    background-size: 12px;
    padding-inline-end: calc(var(--padding-md, 1rem) * 2 + 12px);
    padding-inline-start: var(--padding-md, 0.5rem);

    @media (prefers-color-scheme: dark) {
        background-color: rgba(255, 255, 255, $shade);
        border-color: rgba(255, 255, 255, $shade * 2);
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23fff' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    }
}

// Font styling
@mixin font-style($selector, $options: ()) {
    $size: map-get($options, "size") or "base";
    $weight: map-get($options, "weight") or 400;

    $font-sizes: ("xs": 0.75rem,
            "sm": 0.875rem,
            "base": 1rem,
            "md": 1.125rem,
            "lg": 1.25rem,
            "xl": 1.5rem,
            "2xl": 2rem);

    $font-size: map-get($font-sizes, $size) or 1rem;

    #{$selector} {
        font-size: $font-size;
        font-weight: $weight;
    }
}

// Solid colorize (simple color replacement)
@mixin solid-colorize($selector, $options: ()) {
    $tint: map-get($options, "tint") or 0.6;
    $color: rgba(0, 0, 0, $tint);

    @media (prefers-color-scheme: dark) {
        $color: rgba(255, 255, 255, $tint);
    }

    #{$selector} {
        color: $color;
    }
}

// Breakpoint mixin (media queries)
@mixin breakpoint($size) {
    $breakpoints: ("xs": 480px,
            "sm": 640px,
            "md": 768px,
            "lg": 1024px,
            "xl": 1280px,
            "2xl": 1536px);

    $breakpoint: map-get($breakpoints, $size);

    @if $breakpoint {
        @media (min-width: $breakpoint) {
            @content;
        }
    }
}

// Container query mixin (simplified)
@mixin container($size) {
    @if $size =="lg" {
        @media (min-width: 1024px) {
            @content;
        }
    }

    @else if $size =="md" {
        @media (min-width: 768px) {
            @content;
        }
    }

    @else if $size =="sm" {
        @media (min-width: 640px) {
            @content;
        }
    }
}

// ============================================================================
// Mixins for BeerCSS - Material Design 3 Compliant
// ============================================================================
// Comprehensive mixin library aligned with Material Design 3 guidelines
// Compatible with BeerCSS component patterns
// Based on: https://m3.material.io/ and https://www.beercss.com/
// ============================================================================

// ----------------------------------------------------------------------------
// Layout Mixins
// ----------------------------------------------------------------------------

// Flexbox center
@mixin flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
}

// Flexbox space-between
@mixin flex-between {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

// Flexbox start
@mixin flex-start {
    display: flex;
    align-items: center;
    justify-content: flex-start;
}

// Flexbox end
@mixin flex-end {
    display: flex;
    align-items: center;
    justify-content: flex-end;
}

// Grid center
@mixin grid-center {
    display: grid;
    place-items: center;
    place-content: center;
}

// ----------------------------------------------------------------------------
// Surface/Background Mixins - Material Design 3
// ----------------------------------------------------------------------------

@mixin surface($level: "container") {
    @if $level == "container" {
        background-color: var(--md-sys-color-surface-container);
    } @else if $level == "container-high" {
        background-color: var(--md-sys-color-surface-container-high);
    } @else if $level == "container-highest" {
        background-color: var(--md-sys-color-surface-container-highest);
    } @else if $level == "variant" {
        background-color: var(--md-sys-color-surface-variant);
    } @else if $level == "dim" {
        background-color: var(--md-sys-color-surface-dim);
    } @else if $level == "bright" {
        background-color: var(--md-sys-color-surface-bright);
    } @else if $level ==0 or $level == "transparent" {
        background-color: transparent;
    } @else if type-of($level) ==number {
        // Backward compatibility: convert opacity to M3 surface level
        @if $level <=0 {
            background-color: transparent;
        } @else if $level <=0.05 {
            background-color: var(--md-sys-color-surface-container);
        } @else if $level <=0.1 {
            background-color: var(--md-sys-color-surface-container-high);
        } @else {
            background-color: var(--md-sys-color-surface-container-highest);
        }
    } @else {
        background-color: var(--md-sys-color-surface);
    }
}

// Backdrop blur
@mixin backdrop-blur($intensity: "subtle") {
    $blur: 4px;

    @if $intensity == "subtle" {
        $blur: 4px;
    } @else if $intensity == "medium" {
        $blur: 8px;
    } @else if $intensity == "strong" {
        $blur: 12px;
    }

    backdrop-filter: blur($blur);
    -webkit-backdrop-filter: blur($blur);
}

// ----------------------------------------------------------------------------
// Button Mixins - Material Design 3
// ----------------------------------------------------------------------------

@mixin button-variant($variant: "primary") {
    @if $variant == "primary" {
        background-color: var(--md-sys-color-primary);
        color: var(--md-sys-color-on-primary);

        &:hover:not(:disabled) {
            box-shadow: var(--md-sys-elevation-level1);
        }

        &:active:not(:disabled) {
            box-shadow: var(--md-sys-elevation-level0);
        }

        &:disabled {
            opacity: 0.38;
            cursor: not-allowed;
        }
    } @else if $variant == "secondary" {
        background-color: var(--md-sys-color-secondary-container);
        color: var(--md-sys-color-on-secondary-container);

        &:hover:not(:disabled) {
            background-color: var(--md-sys-color-surface-container-high);
        }
    } @else if $variant == "outline" {
        background-color: transparent;
        border: 1px solid var(--md-sys-color-outline);
        color: var(--md-sys-color-primary);

        &:hover:not(:disabled) {
            background-color: var(--md-sys-color-primary-container);
        }
    } @else if $variant == "text" {
        background-color: transparent;
        color: var(--md-sys-color-primary);

        &:hover:not(:disabled) {
            background-color: var(--md-sys-color-primary-container);
        }
    } @else if type-of($variant) ==number {
        // Legacy support for opacity-based variants
        background-color: rgba(var(--md-sys-color-primary-rgb, 103, 80, 164), $variant);
        color: var(--md-sys-color-on-primary);
    } @else {
        background-color: var(--md-sys-color-surface-container);
        color: var(--md-sys-color-on-surface);

        &:hover:not(:disabled) {
            background-color: var(--md-sys-color-surface-container-high);
        }
    }

    border-radius: var(--md-sys-shape-corner-large);
    transition:
        background-color var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard),
        box-shadow var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard),
        color var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard);
    font: var(--md-sys-typescale-label-large);
    padding: var(--md-sys-spacing-2) var(--md-sys-spacing-4);
    border: none;
    cursor: pointer;
    outline: none;
}

@mixin toolbar-button {
    cursor: pointer;
    border: none;
    outline: none;
    transition: opacity var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard);

    &:hover:not(:disabled) {
        opacity: 0.8;
    }

    &:active:not(:disabled) {
        opacity: 0.6;
    }

    &:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }
}

// ----------------------------------------------------------------------------
// Navigation Mixins - Material Design 3
// ----------------------------------------------------------------------------

@mixin nav-item {
    display: flex;
    align-items: center;
    gap: var(--md-sys-spacing-2);
    padding: var(--md-sys-spacing-3) var(--md-sys-spacing-4);
    border-radius: var(--md-sys-shape-corner-medium);
    text-decoration: none;
    color: var(--md-sys-color-on-surface);
    transition:
        background-color var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard),
        color var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard);
    font: var(--md-sys-typescale-label-large);

    &:hover {
        background-color: var(--md-sys-color-surface-container-high);
    }

    &:active {
        background-color: var(--md-sys-color-surface-container-highest);
    }

    &.active,
    &[aria-current="page"] {
        background-color: var(--md-sys-color-secondary-container);
        color: var(--md-sys-color-on-secondary-container);
        font-weight: 500;
    }
}

// ----------------------------------------------------------------------------
// Scrollable Container Mixin
// ----------------------------------------------------------------------------

@mixin scrollable {
    overflow-y: auto;
    overflow-x: hidden;
    scrollbar-width: thin;
    scrollbar-color: var(--md-sys-color-outline-variant) transparent;

    &::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    &::-webkit-scrollbar-track {
        background: transparent;
    }

    &::-webkit-scrollbar-thumb {
        background-color: var(--md-sys-color-outline-variant);
        border-radius: var(--md-sys-shape-corner-extra-small);

        &:hover {
            background-color: var(--md-sys-color-outline);
        }
    }

    @media (prefers-color-scheme: dark) {
        scrollbar-color: var(--md-sys-color-outline-variant) transparent;
    }
}

// ----------------------------------------------------------------------------
// Form Element Mixins - Material Design 3
// ----------------------------------------------------------------------------

@mixin select-dropdown($options: ()) {
    background-color: var(--md-sys-color-surface-container);
    border: 1px solid var(--md-sys-color-outline);
    border-radius: var(--md-sys-shape-corner-small);
    padding: var(--md-sys-spacing-3) var(--md-sys-spacing-4);
    padding-right: calc(var(--md-sys-spacing-4) * 2 + 12px);
    appearance: none;
    color: var(--md-sys-color-on-surface);
    font: var(--md-sys-typescale-body-medium);
    transition:
        border-color var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard),
        background-color var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard);

    // Dropdown arrow icon
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2349454f' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right var(--md-sys-spacing-4) center;
    background-size: 12px;

    &:hover {
        border-color: var(--md-sys-color-on-surface);
    }

    &:focus {
        border-color: var(--md-sys-color-primary);
        outline: 2px solid var(--md-sys-color-primary);
        outline-offset: 2px;
    }

    &:disabled {
        opacity: 0.38;
        cursor: not-allowed;
    }

    @media (prefers-color-scheme: dark) {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23cac4d0' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    }
}

@mixin input-field {
    background-color: var(--md-sys-color-surface-container);
    border: 1px solid var(--md-sys-color-outline);
    border-radius: var(--md-sys-shape-corner-small);
    padding: var(--md-sys-spacing-3) var(--md-sys-spacing-4);
    color: var(--md-sys-color-on-surface);
    font: var(--md-sys-typescale-body-medium);
    transition:
        border-color var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard),
        background-color var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard);

    &:hover {
        border-color: var(--md-sys-color-on-surface);
    }

    &:focus {
        border-color: var(--md-sys-color-primary);
        outline: 2px solid var(--md-sys-color-primary);
        outline-offset: 2px;
    }

    &:disabled {
        opacity: 0.38;
        cursor: not-allowed;
    }

    &::placeholder {
        color: var(--md-sys-color-on-surface-variant);
    }
}

// ----------------------------------------------------------------------------
// Typography Mixins - Material Design 3
// ----------------------------------------------------------------------------

@mixin font-style($selector, $options: ()) {
    $type: map-get($options, "type");

    @if not $type {
        $type: "body-medium";
    }

    $typescale-map: (
        "display-large": var(--md-sys-typescale-display-large),
        "display-medium": var(--md-sys-typescale-display-medium),
        "display-small": var(--md-sys-typescale-display-small),
        "headline-large": var(--md-sys-typescale-headline-large),
        "headline-medium": var(--md-sys-typescale-headline-medium),
        "headline-small": var(--md-sys-typescale-headline-small),
        "title-large": var(--md-sys-typescale-title-large),
        "title-medium": var(--md-sys-typescale-title-medium),
        "title-small": var(--md-sys-typescale-title-small),
        "label-large": var(--md-sys-typescale-label-large),
        "label-medium": var(--md-sys-typescale-label-medium),
        "label-small": var(--md-sys-typescale-label-small),
        "body-large": var(--md-sys-typescale-body-large),
        "body-medium": var(--md-sys-typescale-body-medium),
        "body-small": var(--md-sys-typescale-body-small)
    );

    $font-value: map-get($typescale-map, $type);

    @if not $font-value {
        $font-value: var(--md-sys-typescale-body-medium);
    }

    #{$selector} {
        font: $font-value;
    }
}

// Solid colorize (simple color replacement)
@mixin solid-colorize($selector, $options: ()) {
    $tint: map-get($options, "tint");

    @if not $tint {
        $tint: 0.6;
    }

    $color: rgba(0, 0, 0, $tint);

    @media (prefers-color-scheme: dark) {
        $color: rgba(255, 255, 255, $tint);
    }

    #{$selector} {
        color: $color;
    }
}

// Text color - Material Design 3
@mixin text-color($variant: "on-surface") {
    @if $variant == "on-surface" {
        color: var(--md-sys-color-on-surface);
    } @else if $variant == "on-surface-variant" {
        color: var(--md-sys-color-on-surface-variant);
    } @else if $variant == "primary" {
        color: var(--md-sys-color-primary);
    } @else if $variant == "on-primary" {
        color: var(--md-sys-color-on-primary);
    } @else if $variant == "secondary" {
        color: var(--md-sys-color-secondary);
    } @else if $variant == "on-secondary" {
        color: var(--md-sys-color-on-secondary);
    } @else if $variant == "error" {
        color: var(--md-sys-color-error);
    } @else if $variant == "on-error" {
        color: var(--md-sys-color-on-error);
    } @else if $variant == "success" {
        color: var(--md-sys-color-success);
    } @else if $variant == "on-success" {
        color: var(--md-sys-color-on-success);
    } @else if $variant == "warning" {
        color: var(--md-sys-color-warning);
    } @else if $variant == "on-warning" {
        color: var(--md-sys-color-on-warning);
    } @else if $variant ==0 {
        // Legacy support for opacity-based text color
        color: var(--md-sys-color-on-surface);
        opacity: 0.87;
    } @else {
        color: var(--md-sys-color-on-surface);
    }
}

// ----------------------------------------------------------------------------
// Elevation Mixin - Material Design 3
// ----------------------------------------------------------------------------

@mixin elevation($level: 1) {
    @if $level ==0 {
        box-shadow: var(--md-sys-elevation-level0);
    } @else if $level ==1 {
        box-shadow: var(--md-sys-elevation-level1);
    } @else if $level ==2 {
        box-shadow: var(--md-sys-elevation-level2);
    } @else if $level ==3 {
        box-shadow: var(--md-sys-elevation-level3);
    } @else if $level ==4 {
        box-shadow: var(--md-sys-elevation-level4);
    } @else if $level ==5 {
        box-shadow: var(--md-sys-elevation-level5);
    } @else {
        box-shadow: var(--md-sys-elevation-level1);
    }
}

// ----------------------------------------------------------------------------
// Responsive Design Mixins
// ----------------------------------------------------------------------------

@mixin breakpoint($size) {
    $breakpoints: (
        "xs": 480px,
        "sm": 640px,
        "md": 768px,
        "lg": 1024px,
        "xl": 1280px,
        "2xl": 1536px
    );

    $breakpoint: map-get($breakpoints, $size);

    @if $breakpoint {
        @media (min-width: $breakpoint) {
            @content;
        }
    }
}

@mixin container($size) {
    @if $size == "lg" {
        @media (min-width: 1024px) {
            @content;
        }
    } @else if $size == "md" {
        @media (min-width: 768px) {
            @content;
        }
    } @else if $size == "sm" {
        @media (min-width: 640px) {
            @content;
        }
    }
}

// ----------------------------------------------------------------------------
// Text Utilities
// ----------------------------------------------------------------------------

@mixin text-wrap {
    overflow-wrap: break-word;
    word-wrap: break-word;
    word-break: break-word;
}

@mixin text-truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

// ----------------------------------------------------------------------------
// Grid Utilities
// ----------------------------------------------------------------------------

@mixin grid-auto-fill($min-size: 220px) {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax($min-size, 1fr));
    gap: var(--md-sys-spacing-4);
}

@mixin grid-auto-fit($min-size: 220px) {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax($min-size, 1fr));
    gap: var(--md-sys-spacing-4);
}

// ----------------------------------------------------------------------------
// Card Mixins - Material Design 3
// ----------------------------------------------------------------------------

@mixin card-base {
    @include surface("container");
    @include elevation(1);
    border-radius: var(--md-sys-shape-corner-medium);
    padding: var(--md-sys-spacing-4);
    transition:
        box-shadow var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard),
        background-color var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard);

    &:hover {
        @include elevation(2);
    }
}

// ----------------------------------------------------------------------------
// Animation Utilities
// ----------------------------------------------------------------------------

@mixin transition($properties...) {
    $transitions: ();

    @each $prop in $properties {
        $transitions: append(
            $transitions,
            #{$prop} var(--md-sys-motion-duration-medium2) var(--md-sys-motion-easing-standard),
            comma
        );
    }

    transition: $transitions;
}

// ----------------------------------------------------------------------------
// Accessibility Mixins
// ----------------------------------------------------------------------------

@mixin reduced-motion {
    @media (prefers-reduced-motion: reduce) {
        transition-duration: 0ms !important;
        animation-duration: 0ms !important;
    }
}

@mixin high-contrast {
    @media (prefers-contrast: high) {
        border-width: 2px;
    }
}
