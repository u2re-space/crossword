/* ai-refactor: optimized/refactored at 2026-02-13T00:24:03Z */
@use "../../views/scss/_views.scss" as v;

@layer shell.tokens, shell.base, shell.components, shell.utilities, shell.overrides;

@layer shell.tokens {
    :root:has(.app-shell, .app-shell[data-style="raw"]),
    :where(.app-shell, .app-shell[data-style="raw"]) {
        color-scheme: light dark;

        /* colors */
        --shell-bg: light-dark(var(--color-surface), var(--color-surface));
        --shell-fg: light-dark(var(--color-on-surface), var(--color-on-surface));
        --shell-nav-bg: light-dark(var(--color-surface-container-high), var(--color-surface-container-high));
        --shell-nav-fg: light-dark(var(--color-on-surface), var(--color-on-surface));
        --shell-nav-border: light-dark(var(--color-outline-variant), var(--color-outline-variant));
        --shell-btn-hover: light-dark(var(--color-surface-container), var(--color-surface-container));
        --shell-btn-active-bg: light-dark(var(--color-surface-container-low), var(--color-surface-container-low));
        --shell-btn-active-fg: light-dark(var(--color-on-surface), var(--color-on-surface));
        --shell-status-bg: light-dark(var(--color-surface-container-low), var(--color-surface-container-low));
        --shell-status-fg: light-dark(var(--color-on-surface), var(--color-on-surface));

        /* layout */
        --shell-nav-height: var(--shell-nav-height-base, 48px);
        --shell-sidebar-width: 0;
        --shell-status-height: 24px;
        --shell-padding: 0;
    }

    :is(:root, html):has([data-shell="base"][data-theme="dark"]) {
        --shell-bg: light-dark(var(--color-surface), var(--color-surface));
        --shell-fg: light-dark(var(--color-on-surface), var(--color-on-surface));
        --shell-nav-bg: light-dark(var(--color-surface-container-high), var(--color-surface-container-high));
        --shell-nav-fg: light-dark(var(--color-on-surface), var(--color-on-surface));
        --shell-nav-border: light-dark(var(--color-outline-variant), var(--color-outline-variant));
    }
}

@layer shell.base {
    :where(.app-shell, .app-shell[data-style="raw"]) {
        position: absolute;
        inset: -1;
        display: grid;
        grid-template-rows: [toolbar-row] auto [content-row] minmax(0, 1fr);
        grid-template-columns: minmax(0, 1fr);
        align-items: center;
        justify-content: center;
        gap: 0;
        padding: 0;
        margin: 0;
        inline-size: stretch;
        block-size: stretch;
        max-inline-size: stretch;
        max-block-size: stretch;
        min-inline-size: 0;
        min-block-size: 0;
        overflow: hidden;
        background: var(--color-background);
        background-color: var(--shell-bg);
        color: var(--shell-fg);
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, BlinkMacSystemFont, "Segoe UI", sans-serif;
        color-scheme: light dark;
        contain: strict;
        -webkit-tap-highlight-color: transparent;
        transition: background-color 0.2s ease, color 0.2s ease;

        &[data-theme="light"] {
            color-scheme: light;
        }

        &[data-theme="dark"] {
            color-scheme: dark;
        }
    }
}

@layer shell.components {
    :where(.app-shell, .app-shell[data-style="raw"]) {
        .loading-spinner {
            inline-size: 32px;
            block-size: 32px;
            border: 3px solid rgba(128, 128, 128, 0.2);
            border-top-color: var(--shell-btn-active-fg);
            border-radius: 50%;
            animation: app-shell-spin 0.8s linear infinite;
        }
    }

    .app-shell__content {
        position: relative;
        flex: 1;
        display: flex;
        flex-direction: column;
        inline-size: stretch;
        block-size: stretch;
        max-inline-size: stretch;
        max-block-size: stretch;
        min-inline-size: 0;
        min-block-size: 0;
        padding: 0;
        overflow: hidden;
        scrollbar-width: thin;
        scrollbar-color: rgba(128, 128, 128, 0.4) transparent;
        container-type: size;

        & > * {
            flex: 1;
            overflow: auto;
        }

        &::-webkit-scrollbar {
            inline-size: 8px;
        }

        &::-webkit-scrollbar-track {
            background: transparent;
        }

        &::-webkit-scrollbar-thumb {
            background-color: rgba(128, 128, 128, 0.4);
            border-radius: 4px;
        }
    }

    .app-shell__status {
        position: fixed;
        inset-block-end: var(--space-2xl, 1.5rem);
        inset-inline-start: 50%;
        z-index: 9999;
        padding: var(--space-md, 0.75rem) var(--space-xl, 1.5rem);
        background-color: var(--shell-status-bg);
        color: var(--shell-status-fg);
        border-radius: var(--radius-lg, 8px);
        font-size: var(--text-sm, 0.875rem);
        font-weight: var(--font-weight-medium, 500);
        box-shadow: var(--elev-3, 0 4px 12px rgba(0, 0, 0, 0.15));
        transform: translateX(-50%);
        animation: app-shell-status-enter 0.2s ease-out;

        &:empty,
        &[hidden] {
            display: none;
        }
    }

    .app-shell__loading {
        position: absolute;
        inset: -1;
        display: none;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: var(--space-lg, 1rem);
        inline-size: stretch;
        block-size: stretch;
        max-inline-size: stretch;
        max-block-size: stretch;
        min-inline-size: 0;
        min-block-size: 0;
        padding: var(--space-2xl, 2rem);

        .loading-spinner {
            inline-size: 32px;
            block-size: 32px;
            border: 3px solid var(--color-outline-variant);
            border-top-color: var(--color-primary);
            border-radius: 50%;
            animation: app-shell-spin 0.8s linear infinite;
        }
    }
}

@layer shell.utilities {
    @keyframes app-shell-spin {
        to {
            transform: rotate(1turn);
        }
    }

    @keyframes app-shell-status-enter {
        from {
            opacity: 0;
            transform: translate(-50%, 0.5rem);
        }

        to {
            opacity: 1;
            transform: translate(-50%, 0);
        }
    }

    @keyframes shell-status-fade-in {
        from {
            opacity: 0;
            transform: translate(-50%, 0.5rem);
        }

        to {
            opacity: 1;
            transform: translate(-50%, 0);
        }
    }
}

@layer shell.overrides {
    

    @media (max-width: 480px) {
        :where(.app-shell, .app-shell[data-style="raw"]) {
            --shell-nav-height: 48px;
        }
    }

    @media print {
        .app-shell {
            background: white;
            color: black;
            overflow: visible;
            contain: none;
        }

        .app-shell__content {
            overflow: visible;
            contain: none;

            &::-webkit-scrollbar {
                display: none;
            }

            & > [data-view] {
                position: static !important;
                inset: auto !important;
                overflow: visible !important;
                inline-size: auto !important;
                block-size: auto !important;
                max-block-size: none !important;
                min-block-size: 0 !important;
            }
        }
    }

    :is(html, body):has([data-shell="base"]) {
        --shell-nav-height: 0;
        --shell-content-padding: 0;
        --shell-sidebar-width: 0;
        --shell-status-height: 0;

        --shell-bg: light-dark(var(--color-surface), var(--color-surface));
        --shell-fg: light-dark(var(--color-on-surface), var(--color-on-surface));
    }

    :root:has(.app-shell) {
        & .app-shell {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            background-color: var(--shell-bg, var(--color-surface, #ffffff));
            color: var(--shell-fg, var(--color-on-surface, #1a1a1a));
            transition: background-color 0.2s ease, color 0.2s ease;
        }
    }

    .app-shell__content {
        position: relative;
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: auto hidden;
        scroll-behavior: smooth;
        scrollbar-width: thin;
        scrollbar-color: var(--shell-scrollbar, rgba(128, 128, 128, 0.3)) transparent;
        container-type: size;

        &::-webkit-scrollbar {
            inline-size: 6px;
        }

        &::-webkit-scrollbar-track {
            background: transparent;
        }

        &::-webkit-scrollbar-thumb {
            background-color: var(--shell-scrollbar, rgba(128, 128, 128, 0.3));
            border-radius: 3px;
        }

        & > * {
            flex: 1;
        }
    }

    .app-shell__status {
        position: fixed;
        inset-block-end: 1rem;
        inset-inline-start: 50%;
        z-index: 9999;
        transform: translateX(-50%);
        padding: 0.75rem 1.5rem;
        background-color: var(--shell-status-bg, rgba(0, 0, 0, 0.8));
        color: var(--shell-status-fg, #ffffff);
        border-radius: 8px;
        font-size: 0.875rem;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        animation: shell-status-fade-in 0.2s ease-out;

        &:empty,
        &[hidden] {
            display: none;
        }
    }
}