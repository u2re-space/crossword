@layer print-view {
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

    :root {
        --print-font-family: 'Times New Roman', 'Times', 'Liberation Serif', 'Noto Serif', serif;
        --print-font-family-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        --print-font-mono: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Liberation Mono', 'Noto Mono', monospace;
        --print-text-color: #1a1a1a;
        --print-bg: #ffffff;
        --print-border-color: #d1d5db;
        --print-link-color: #2563eb;
    }

    * {
        box-sizing: border-box;
    }

    html, body {
        margin: 0;
        padding: 0;
        background: var(--print-bg);
        color: var(--print-text-color);
        font-family: var(--print-font-family);
        line-height: 1.6;
        font-size: 14px;
        min-height: 100vh;
    }

    .print-view {
        max-width: none;
        min-height: 100vh;
        padding: 0;
        margin: 0;
        inline-size: 100vw;
        /* Always fit to full viewport width */
        block-size: 100vh;
        overflow-x: hidden;
        /* Prevent horizontal overflow */
    }

    .print-content {
        padding: 2rem;
        margin: 0;
        min-height: 100vh;
        font-size: 14px;
        line-height: 1.6;
        inline-size: 100%;
        /* Always fit to container width */
        box-sizing: border-box;
        text-align: justify;
        /* Justified text for better balance */
        hyphens: auto;
        /* Allow hyphenation for better wrapping */
        word-wrap: break-word;
        /* Ensure long words wrap */
        overflow-wrap: break-word;
        /* Modern overflow wrapping */
    }

    /* Markdown styling for print - always fit to container width */
    .markdown-body {
        inline-size: 100%;
        /* Always fit to container width */
        box-sizing: border-box;

        h1, h2, h3, h4, h5, h6 {
            color: var(--print-text-color);
            margin-top: 1.5em;
            margin-bottom: 0.5em;
            line-height: 1.2;
            page-break-after: avoid;
            inline-size: 100%;
            /* Fit headings to full width */
            box-sizing: border-box;
        }

        h1 {
            font-size: 2rem;
            border-bottom: 2px solid var(--print-border-color);
            padding-bottom: 0.5rem;
        }

        h2 {
            font-size: 1.5rem;
            border-bottom: 1px solid var(--print-border-color);
            padding-bottom: 0.25rem;
        }

        h3 {
            font-size: 1.25rem;
        }

        h4 {
            font-size: 1.125rem;
        }

        h5 {
            font-size: 1rem;
        }

        h6 {
            font-size: 0.875rem;
        }

        p, ul, ol, blockquote {
            margin-bottom: 1rem;
            orphans: 3;
            widows: 3;
            inline-size: 100%;
            /* Fit paragraphs to full width */
            box-sizing: border-box;
            text-align: justify;
            /* Justified text for balanced layout */
            hyphens: auto;
            /* Allow hyphenation */
        }

        ul, ol {
            padding-left: 1.5rem;
            inline-size: 100%;
            box-sizing: border-box;
        }

        li {
            margin-bottom: 0.25rem;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        code {
            background: #f3f4f6;
            padding: 0.125rem 0.25rem;
            border-radius: 0.25rem;
            font-family: var(--print-font-mono);
            font-size: 0.875em;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-inline-size: 100%;
            box-sizing: border-box;
        }

        pre {
            background: #f3f4f6;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            /* Allow horizontal scroll for code if needed */
            margin: 1rem 0;
            page-break-inside: avoid;
            inline-size: 100%;
            box-sizing: border-box;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        pre code {
            background: none;
            padding: 0;
            border-radius: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-wrap: break-word;
            inline-size: 100%;
            box-sizing: border-box;
        }

        blockquote {
            border-left: 4px solid var(--print-border-color);
            padding-left: 1rem;
            color: #6b7280;
            font-style: italic;
            margin: 1rem 0;
            inline-size: 100%;
            box-sizing: border-box;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        table {
            width: 100%;
            /* Always fit to full container width */
            max-width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            page-break-inside: avoid;
            inline-size: 100%;
            box-sizing: border-box;
            table-layout: fixed;
            /* Prevent table overflow */
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        th, td {
            border: 1px solid var(--print-border-color);
            padding: 0.5rem;
            text-align: left;
            vertical-align: top;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-inline-size: none;
            /* Allow cells to size naturally but wrap content */
        }

        th {
            background: #f9fafb;
            font-weight: 600;
        }

        hr {
            border: none;
            border-top: 1px solid var(--print-border-color);
            margin: 2rem 0;
            page-break-after: avoid;
            inline-size: 100%;
            box-sizing: border-box;
        }

        img {
            max-width: 100%;
            /* Always fit to container width */
            max-inline-size: 100%;
            height: auto;
            page-break-inside: avoid;
            display: block;
            /* Prevent inline spacing issues */
            box-sizing: border-box;
        }

        a {
            color: var(--print-link-color);
            text-decoration: underline;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-inline-size: 100%;
            box-sizing: border-box;
        }

        strong, b {
            font-weight: 600;
        }

        em, i {
            font-style: italic;
        }

        /* Ensure all block elements fit to container width */
        div, section, article, aside, header, footer, main, nav {
            inline-size: 100%;
            box-sizing: border-box;
        }

        /* Handle wide content that might overflow */
        * {
            max-inline-size: 100%;
            box-sizing: border-box;
        }
    }

    /* Print-specific media queries */
    @media print {
        html, body {
            font-family: var(--print-font-family);
            /* Prefer serif fonts for printing */
            font-size: 12px;
            line-height: 1.4;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
            font-variant-emoji: text;
            /* Render emoji as text glyphs for printing */
            /* Hide scrollbars in print but keep content scrollable */
            scrollbar-width: none;
            /* Firefox */
            -ms-overflow-style: none;
            /* IE/Edge */
            inline-size: 100%;
            /* Fit to print area */
            margin: 0;
            padding: 0;
        }

        /* Hide scrollbars in WebKit browsers */
        html::-webkit-scrollbar,
        body::-webkit-scrollbar {
            display: none;
        }

        .print-view {
            padding: 0;
            margin: 0;
            inline-size: 100%;
            /* Always fit to full print width */
            box-sizing: border-box;
        }

        .print-content {
            padding: 0;
            margin: 0;
            inline-size: 100%;
            /* Always fit to print width */
            box-sizing: border-box;
        }

        .markdown-body {
            inline-size: 100%;
            /* Ensure markdown fits print width */
            box-sizing: border-box;
            font-family: var(--print-font-family);
            /* Serif fonts for print readability */
            font-variant-emoji: text;
            /* Ensure emoji are rendered as text */

            /* All content elements fit to print width */
            *, *::before, *::after {
                max-inline-size: 100%;
                box-sizing: border-box;
            }

            /* Ensure code still uses monospace in print */
            code, pre, pre code {
                font-family: var(--print-font-mono);
            }

            table {
                width: 100% !important;
                /* Force tables to fit print width */
                table-layout: fixed;
                /* Prevent overflow */
            }

            img {
                max-width: 100% !important;
                /* Force images to fit */
                height: auto !important;
            }

            pre {
                overflow-x: auto;
                /* Allow scroll in code blocks if needed */
                white-space: pre-wrap;
                word-wrap: break-word;
            }
        }

        /* Enhanced page setup - comprehensive print configuration */
        /* Default A4 portrait with generous margins for optimal readability */
        @page {
            size: A4 portrait;
            /* Standard A4 paper, portrait orientation */
            margin: 2.5cm 2cm 2.5cm 2cm;
            /* Generous margins: top/bottom 2.5cm, sides 2cm */

            /* Professional printing controls */
            marks: none;
            /* No crop/registration marks for standard documents */
            bleed: 0;
            /* No bleed area needed for digital documents */

            /* Typography flow control */
            orphans: 3;
            /* Minimum 3 lines at bottom of page */
            widows: 3;
            /* Minimum 3 lines at top of page */
        }

        /* Named pages for different content types and positions */
        /* First page gets larger top margin for title pages */
        @page :first {
            margin-top: 4cm;
            /* Extra top margin for first page */
            margin-bottom: 2.5cm;
            margin-left: 2cm;
            margin-right: 2cm;
        }

        /* Left pages (typically even-numbered in double-sided printing) */
        @page :left {
            margin-right: 3cm;
            /* Wider right margin for binding */
            margin-left: 2cm;
        }

        /* Right pages (typically odd-numbered in double-sided printing) */
        @page :right {
            margin-left: 3cm;
            /* Wider left margin for binding */
            margin-right: 2cm;
        }

        /* Alternative page sizes for different use cases */
        /* Compact A5 format - smaller paper, tighter margins */
        @page narrow {
            size: A5 portrait;
            /* Half A4 size for compact documents */
            margin: 1.5cm 1.5cm 1.5cm 1.5cm;
            /* Reduced margins */
        }

        /* Landscape orientation for wide content like tables */
        @page wide {
            size: A4 landscape;
            /* A4 rotated for horizontal layout */
            margin: 2cm 2cm 2cm 2cm;
        }

        /* US Letter size (8.5" x 11") - North American standard */
        @page letter {
            size: letter portrait;
            /* 8.5" x 11" portrait */
            margin: 2.5cm 2cm 2.5cm 2cm;
        }

        /* US Legal size (8.5" x 14") - Legal documents */
        @page legal {
            size: legal portrait;
            /* 8.5" x 14" portrait */
            margin: 2.5cm 2cm 2.5cm 2cm;
        }

        /* Professional printing configurations */
        /* Full professional setup with crop marks and bleed */
        @page professional {
            size: A4 portrait;
            margin: 2.5cm 2cm 2.5cm 2cm;
            marks: crop cross;
            /* Crop marks and registration crosses */
            bleed: 0.25cm;
            /* 2.5mm bleed area for professional printing */
        }

        /* Booklet format - A5 with minimal margins */
        @page booklet {
            size: A5 portrait;
            /* Standard booklet size */
            margin: 1.5cm 1.5cm 1.5cm 1.5cm;
            marks: none;
            /* No marks for simple booklets */
            bleed: 0;
            /* No bleed needed */
        }

        /* Draft format - A4 with narrow margins for quick printing */
        @page draft {
            size: A4 portrait;
            margin: 2cm 1.5cm 2cm 1.5cm;
            /* Narrower side margins */
            marks: none;
            /* Clean draft appearance */
            bleed: 0;
        }

        /* Page format classes for different print configurations */
        .print-narrow {
            page: narrow;
        }

        .print-wide {
            page: wide;
        }

        .print-letter {
            page: letter;
        }

        .print-legal {
            page: legal;
        }

        .print-professional {
            page: professional;
        }

        .print-booklet {
            page: booklet;
        }

        .print-draft {
            page: draft;
        }

        /* Content sections with specific page formatting */
        .print-chapter {
            page-break-before: always;
            break-before: page;
        }

        .print-section {
            page-break-before: avoid;
            break-before: avoid;
        }

        /* Toner/dye consumption optimizations for printing */

        /* Convert colored elements to grayscale to save ink */
        .markdown-body h1, .markdown-body h2, .markdown-body h3,
        .markdown-body h4, .markdown-body h5, .markdown-body h6 {
            color: black !important;
            /* Force black text for headings */
            -webkit-font-smoothing: antialiased;
            /* Better text rendering */
            -moz-osx-font-smoothing: grayscale;
            /* Firefox font smoothing */
        }

        /* Convert colored text to grayscale */
        .markdown-body p, .markdown-body li, .markdown-body blockquote {
            color: black !important;
            /* Force black for body text */
            filter: grayscale(100%);
            /* Convert any remaining colors to grayscale */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Links - optimize for printing */
        .markdown-body a {
            color: #333 !important;
            /* Dark gray instead of blue to save color ink */
            text-decoration: underline !important;
            filter: grayscale(100%);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Code blocks - keep syntax highlighting minimal for printing */
        .markdown-body code, .markdown-body pre {
            background: #f5f5f5 !important;
            /* Light gray background saves ink */
            color: #333 !important;
            /* Dark gray text */
            filter: grayscale(100%);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Tables - optimize for black and white printing */
        .markdown-body table {
            border-color: #666 !important;
            /* Medium gray borders */
            filter: grayscale(100%);
        }

        .markdown-body th, .markdown-body td {
            border-color: #999 !important;
            /* Light gray cell borders */
            filter: grayscale(100%);
        }

        .markdown-body th {
            background: #e5e5e5 !important;
            /* Very light gray header background */
            color: #333 !important;
            /* Dark text */
            filter: grayscale(100%);
        }

        /* Blockquotes - subtle background to save ink */
        .markdown-body blockquote {
            background: #fafafa !important;
            /* Very light gray background */
            border-left-color: #666 !important;
            /* Medium gray border */
            filter: grayscale(100%);
        }

        /* Horizontal rules - thin and subtle */
        .markdown-body hr {
            border-color: #999 !important;
            /* Light gray */
            filter: grayscale(100%);
        }

        /* Images - convert to grayscale for printing */
        .markdown-body img {
            filter: grayscale(100%) contrast(1.1);
            /* Grayscale with slight contrast boost */
            image-rendering: -webkit-optimize-contrast;
            /* Better image rendering for printing */
            image-rendering: optimize-contrast;
        }

        /* General toner-saving optimizations */

        /* Reduce background colors and use minimal contrast */
        .markdown-body * {
            background-color: transparent !important;
            /* Remove any colored backgrounds */
            box-shadow: none !important;
            /* Remove shadows that use ink */
        }

        /* Optimize borders for minimal ink use */
        .markdown-body * {
            border-color: #666 !important;
            /* Medium gray for all borders */
        }

        /* Ensure all text is optimized for printing */
        .markdown-body *, .markdown-body *::before, .markdown-body *::after {
            color: inherit !important;
            /* Inherit text color */
            -webkit-font-smoothing: antialiased !important;
            -moz-osx-font-smoothing: grayscale !important;
            text-shadow: none !important;
            /* Remove text shadows */
            font-variant-emoji: text !important;
            /* Render emoji as text glyphs */
        }

        /* Strong and emphasis - subtle differentiation without color */
        .markdown-body strong, .markdown-body b {
            font-weight: bold !important;
            color: black !important;
            filter: none;
            /* Keep bold text black without grayscale */
        }

        .markdown-body em, .markdown-body i {
            font-style: italic !important;
            color: black !important;
            filter: none;
            /* Keep italic text black without grayscale */
        }

        /* Lists - optimize markers and indentation */
        .markdown-body ul, .markdown-body ol {
            list-style-position: outside;
            /* Standard list positioning */
        }

        .markdown-body li::marker {
            color: #666 !important;
            /* Gray list markers */
        }

        /* Specific content optimizations */

        /* Syntax highlighting in code blocks - minimize colors */
        .markdown-body pre[class*="language-"] {
            background: #f8f8f8 !important;
            /* Very light gray */
            filter: grayscale(100%) brightness(0.95);
            /* Slight brightness reduction */
        }

        .markdown-body pre[class*="language-"] * {
            filter: grayscale(100%);
            /* Convert all syntax colors to grayscale */
        }

        /* Math expressions - optimize rendering */
        .markdown-body .katex {
            filter: grayscale(100%);
            /* Convert math colors to grayscale */
            color: black !important;
        }

        /* Mermaid diagrams or other SVG content */
        .markdown-body svg {
            filter: grayscale(100%) contrast(1.2);
            /* Grayscale with contrast boost */
        }

        .markdown-body svg * {
            fill: currentColor !important;
            /* Use text color for SVG fills */
            stroke: currentColor !important;
            /* Use text color for SVG strokes */
        }

        /* Form elements that might appear in documentation */
        .markdown-body input, .markdown-body textarea, .markdown-body select {
            border: 1px solid #999 !important;
            /* Light gray borders */
            background: white !important;
            /* White background */
            color: black !important;
            /* Black text */
            filter: grayscale(100%);
        }

        /* Remove any decorative elements that consume ink */
        .markdown-body .highlight, .markdown-body .mark {
            background: #e6e6e6 !important;
            /* Very light gray */
            filter: grayscale(100%);
        }

        /* Footnotes or references - subtle styling */
        .markdown-body .footnote, .markdown-body .reference {
            border-top: 1px solid #ccc !important;
            /* Thin gray border */
            background: transparent !important;
            filter: grayscale(100%);
        }

        /* Ensure links don't show URLs */
        a[href]:after {
            content: none !important;
        }

        /* Enhanced page breaking and content flow optimization */
        /* Headings - avoid breaking and control spacing */
        h1, h2, h3, h4, h5, h6 {
            page-break-after: avoid;
            break-after: avoid;
            page-break-before: avoid;
            break-before: avoid;
            orphans: 2;
            widows: 2;
            margin-top: 1.5em;
            margin-bottom: 0.8em;
        }

        /* Special handling for major headings */
        h1 {
            page-break-before: always;
            /* Major sections start new page */
            break-before: page;
            margin-top: 0;
            margin-bottom: 1.2em;
        }

        h2 {
            page-break-before: avoid;
            /* Subsections avoid page breaks */
            break-before: avoid;
            margin-top: 1.8em;
            margin-bottom: 1em;
        }

        /* Paragraphs - optimal flow and readability */
        p {
            orphans: 3;
            /* Minimum 3 lines at page bottom */
            widows: 3;
            /* Minimum 3 lines at page top */
            margin-bottom: 1em;
            text-align: justify;
            hyphens: auto;
            page-break-inside: auto;
            /* Allow paragraph breaks if needed */
            break-inside: auto;
        }

        /* Lists - keep together when possible */
        ul, ol {
            orphans: 2;
            widows: 2;
            margin-bottom: 1em;
            page-break-inside: auto;
            /* Allow breaking within lists */
            break-inside: auto;
        }

        li {
            orphans: 1;
            widows: 1;
            margin-bottom: 0.3em;
            page-break-inside: avoid;
            /* Avoid breaking list items */
            break-inside: avoid;
        }

        /* Blockquotes - treat as cohesive units */
        blockquote {
            orphans: 2;
            widows: 2;
            margin: 1.2em 0;
            padding: 0.8em 1.2em;
            page-break-inside: avoid;
            /* Try to keep quotes together */
            break-inside: avoid;
            border-left: 4px solid #ccc;
        }

        /* Code blocks - high priority to keep together */
        pre {
            orphans: 1;
            widows: 1;
            margin: 1.2em 0;
            page-break-inside: avoid;
            /* Strong preference to keep code together */
            break-inside: avoid;
            page-break-before: avoid;
            break-before: avoid;
            page-break-after: avoid;
            break-after: avoid;
        }

        /* Inline code - avoid breaking */
        code {
            word-break: break-word;
            overflow-wrap: break-word;
            hyphens: none;
            /* Don't hyphenate code */
        }

        /* Tables - complex layout, try to keep together */
        table {
            orphans: 1;
            widows: 1;
            margin: 1.2em 0;
            page-break-inside: avoid;
            /* Prefer to keep tables together */
            break-inside: avoid;
            page-break-before: avoid;
            break-before: avoid;
            page-break-after: avoid;
            break-after: avoid;
        }

        /* Table rows - allow breaking within table if table itself breaks */
        tr {
            page-break-inside: avoid;
            break-inside: avoid;
        }

        /* Images - keep with nearby content */
        img {
            page-break-inside: avoid;
            break-inside: avoid;
            page-break-before: avoid;
            break-before: avoid;
            page-break-after: avoid;
            break-after: avoid;
            margin: 1em auto;
            display: block;
        }

        /* Horizontal rules - page break hints */
        hr {
            page-break-after: avoid;
            break-after: avoid;
            page-break-before: avoid;
            break-before: avoid;
            margin: 2em auto;
            border: none;
            border-top: 1px solid #ccc;
            height: 0;
        }

        /* Links - avoid breaking URLs */
        a {
            word-break: break-word;
            overflow-wrap: break-word;
            hyphens: none;
        }

        /* Strong emphasis - avoid breaking */
        strong, b {
            word-break: break-word;
            overflow-wrap: break-word;
        }

        /* Emphasis - avoid breaking */
        em, i {
            word-break: break-word;
            overflow-wrap: break-word;
        }

        /* Generic content flow optimization */
        .markdown-body > * {
            page-break-inside: auto;
            break-inside: auto;
        }

        /* Avoid breaking after short content */
        .markdown-body > *:not(h1):not(h2):not(pre):not(table):not(img) {
            page-break-after: auto;
            break-after: auto;
        }

        /* Force page breaks before major sections if content is long */
        .markdown-body > h1:not(:first-child) {
            page-break-before: always;
            break-before: page;
            margin-top: 0;
        }

        /* Optimize spacing for page fitting */
        .markdown-body > *:first-child {
            margin-top: 0;
        }

        .markdown-body > *:last-child {
            margin-bottom: 0;
        }
    }

    /* Print preview styles (screen only) - pure scrollable content that fits width */
    @media screen {
        html, body {
            height: 100vh;
            overflow: auto;
            inline-size: 100vw;
            margin: 0;
            padding: 0;
        }

        .print-view {
            min-height: 100vh;
            margin: 0;
            padding: 0;
            inline-size: 100vw;
            /* Always fit to full viewport width */
            box-sizing: border-box;
        }

        .print-content {
            padding: 2rem;
            margin: 0;
            inline-size: 100%;
            /* Fit to full container width */
            max-inline-size: none;
            /* No width restrictions */
            box-sizing: border-box;
            /* Better content flow for screen reading */
            line-height: 1.7;
            text-rendering: optimizeLegibility;
        }

        .markdown-body {
            inline-size: 100%;
            /* Always use full available width */
            box-sizing: border-box;
            font-family: var(--print-font-family-sans);
            /* Sans-serif for screen readability */

            /* Screen-specific content flow optimization */
            h1, h2, h3, h4, h5, h6 {
                line-height: 1.2;
                margin-top: 2em;
                margin-bottom: 1em;
                break-inside: avoid;
                break-after: avoid;
            }

            h1 {
                margin-top: 0;
                font-size: 2.5em;
            }

            h2 {
                font-size: 2em;
            }

            h3 {
                font-size: 1.6em;
            }

            p {
                margin-bottom: 1.2em;
                line-height: 1.7;
                text-align: justify;
                hyphens: auto;
            }

            /* Lists with better spacing */
            ul, ol {
                margin-bottom: 1.2em;
                padding-left: 2em;
            }

            li {
                margin-bottom: 0.5em;
                line-height: 1.6;
            }

            /* Blockquotes with better visual separation */
            blockquote {
                margin: 1.5em 0;
                padding: 1em 1.5em;
                border-left: 4px solid #007acc;
                background: #f8f9fa;
                font-style: italic;
                font-family: var(--print-font-family-sans);
                /* Keep sans-serif for blockquotes on screen */
                break-inside: avoid;
            }

            /* Code blocks with better readability */
            pre {
                margin: 1.5em 0;
                padding: 1.2em;
                background: #f6f8fa;
                border-radius: 6px;
                overflow-x: auto;
                line-height: 1.4;
                break-inside: avoid;
            }

            code {
                background: #f1f3f4;
                padding: 0.2em 0.4em;
                border-radius: 3px;
                font-family: var(--print-font-mono);
                font-size: 0.9em;
            }

            pre code {
                font-family: var(--print-font-mono);
            }

            /* Responsive table handling for screen */
            table {
                width: 100%;
                table-layout: auto;
                /* Allow natural table sizing but prevent overflow */
                overflow-x: auto;
                /* Allow horizontal scroll if absolutely necessary */
                display: block;
                max-inline-size: 100%;
                box-sizing: border-box;
                margin: 1.5em 0;
                border-collapse: collapse;
                break-inside: avoid;
            }

            th, td {
                padding: 0.75em;
                border: 1px solid #ddd;
                text-align: left;
            }

            th {
                background: #f8f9fa;
                font-weight: 600;
            }

            /* Ensure images fit screen width */
            img {
                max-width: 100%;
                width: auto;
                height: auto;
                margin: 1.5em auto;
                display: block;
                break-inside: avoid;
            }

            /* Links with better hover states */
            a {
                color: #007acc;
                text-decoration: none;
                transition: color 0.2s ease;
            }

            a:hover {
                color: #0056b3;
                text-decoration: underline;
            }

            /* Horizontal rules */
            hr {
                margin: 2.5em auto;
                border: none;
                border-top: 1px solid #eee;
                break-before: avoid;
                break-after: avoid;
            }

            /* Better spacing for content flow */
            > *:first-child {
                margin-top: 0;
            }

            > *:last-child {
                margin-bottom: 0;
            }
        }
    }

    /* Dark mode support for print preview */
    @media (prefers-color-scheme: dark) {
        :root {
            --print-text-color: #f3f4f6;
            --print-bg: #111827;
            --print-border-color: #374151;
            --print-link-color: #60a5fa;
        }

        .markdown-body {
            code, pre {
                background: #1f2937;
                color: #f3f4f6;
            }

            th {
                background: #374151;
            }
        }
    }
}