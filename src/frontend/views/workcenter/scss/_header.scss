@layer view.workcenter.components {
    .workcenter-header {
        display: grid;
        gap: var(--space-sm);
        padding: var(--space-xs) var(--space-md);
        background: var(--color-surface-container-low);
        border: 1px solid var(--color-outline-variant);
        border-radius: var(--radius-lg);
        position: sticky;
        inset-block-start: 0;
        z-index: 2;
        grid-template-columns: [logo] minmax(0, max-content) [controls] minmax(0, 1fr);
        place-content: center;
        place-items: center;

        justify-content: space-between;

        h2 {
            margin: 0;
            font-size: var(--text-base);
            font-weight: var(--font-weight-bold);
            color: var(--color-on-surface);
            letter-spacing: -0.01em;
            white-space: nowrap;
            grid-column: logo;
        }

        @container (max-inline-size: 768px) {
            gap: var(--space-sm);
            padding: var(--space-sm);
            grid-template-columns: [controls] minmax(0, 1fr);

            h2 {
                display: none;
            }
        }

        @container (max-inline-size: 480px) {
            gap: var(--space-xs);
            padding: var(--space-xs);
        }
    }

    .header-controls-disclosure {
        display: block;
        margin: 0;
        padding: 0;
        border: 0;
        inline-size: stretch;
        max-inline-size: stretch;
        grid-column: controls;
    }

    .header-controls-summary {
        display: none;
        align-items: center;
        justify-content: space-between;
        gap: var(--space-sm);
        padding: var(--space-xs) var(--space-sm);
        border-radius: var(--radius-sm);
        background-color: transparent;
        border: none 0px transparent;
        /*border: 0px solid var(--color-outline-variant);*/
        /*background: var(--color-surface-container);*/
        color: var(--color-on-surface);
        font-size: var(--text-sm);
        font-weight: var(--font-weight-medium);
        cursor: pointer;
        user-select: none;
        inline-size: stretch;

        &::-webkit-details-marker {
            display: none;
        }

        &::marker {
            content: "";
        }

        &::after {
            content: "â–¾";
            font-size: var(--text-xs);
            opacity: .8;
            transition: transform 180ms ease;
        }

        @container (max-inline-size: 768px) {
            display: inline-flex;
        }
    }

    @container (max-inline-size: 768px) {
        .header-controls-disclosure {
            position: relative;
            inline-size: 100%;
            justify-self: stretch;
        }
    }

    .header-controls-disclosure[open] > .header-controls-summary::after {
        transform: rotate(180deg);
    }

    @container (min-inline-size: 769px) {
        .header-controls-disclosure {
            display: contents;

            &::details-content {
                inline-size: stretch;
                display: contents;
            }
        }

        .header-controls-summary {
            display: none;
        }

        .header-controls-disclosure > .control-selectors {
            display: grid;
            position: static;
            inset: auto;
            min-inline-size: 0;
            max-inline-size: min(min(100%, 64rem), round(up, 100%, 32rem));
            max-block-size: none;
            overflow: visible;
            padding: 0;
            border: 0;
            box-shadow: none;
            background: var(--color-surface-container-low);
            border-radius: var(--radius-sm);
            inline-size: stretch;
            justify-self: end;
        }
    }

    .header-controls-disclosure:not([open]) > .control-selectors {
        @container (max-inline-size: 768px) {
            display: none;
        }
    }

    /* Fallback for environments where container queries are unavailable. */
    @media (max-width: 768px) {
        .header-controls-disclosure {
            inline-size: 100%;
            position: relative;
            justify-self: stretch;
        }

        .header-controls-summary {
            display: inline-flex;
        }

        .header-controls-disclosure:not([open]) > .control-selectors {
            display: none;
        }
    }

    .control-selectors {
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: var(--space-md);
        align-items: start;
        max-inline-size: min(min(100%, 64rem), round(up, 100%, 32rem));
        padding: 0px;
        background: var(--color-surface-container-low);
        border-radius: var(--radius-sm);
        inline-size: stretch;
        justify-self: end;

        @container (max-inline-size: 1024px) {
            gap: var(--space-sm);
            padding: var(--space-sm);
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        @container (max-inline-size: 900px) {
            gap: var(--space-sm);
            grid-template-columns: repeat(2, minmax(0, 1fr));
            inline-size: stretch;
        }

        @container (max-inline-size: 768px) {
            gap: var(--space-xs);
            grid-template-columns: minmax(0, 1fr);
            min-inline-size: min(32rem, calc(100vw - 1rem));
            max-inline-size: min(32rem, calc(100vw - 1rem));
            max-block-size: min(70vh, 42rem);
            overflow: auto;
            padding: var(--space-md);
            background: var(--color-surface-container-high);
            border: 1px solid var(--color-outline-variant);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg, 0 10px 30px rgb(0 0 0 / 0.18));
            position: absolute;
            inset-inline-end: 0;
            inset-block-start: calc(100% + var(--space-xs));
            z-index: 25;
        }

        @container (max-inline-size: 480px) {
            gap: var(--space-xs);
            padding: var(--space-xs);
            grid-template-columns: minmax(0, 1fr);
            inset-inline-end: calc(var(--space-xs) * -1);
        }
    }

    .format-selector,
    .language-selector,
    .recognition-selector,
    .processing-selector {
        display: grid;
        grid-template-columns: minmax(0, 1fr) minmax(0, 8rem);
        gap: var(--space-sm);
        inline-size: stretch;
        min-inline-size: fit-content;
        max-inline-size: stretch;
        padding: var(--space-xs) var(--space-sm);
        border-radius: var(--radius-sm);
        background: var(--color-surface);
        color: var(--color-on-surface);
        font-size: var(--text-sm);
        font-weight: var(--font-weight-medium);
        font-family: var(--font-family);
        place-content: center;
        place-items: center;
        overflow: hidden;

        select {
            inline-size: 100%;
            min-block-size: 2.25rem;
            padding: var(--space-sm);
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
            place-content: center;
            place-items: center;
            text-align: start;
        }

        label {
            font-size: var(--text-xs);
            color: var(--color-on-surface-variant);
            white-space: nowrap;
            flex-wrap: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-inline-size: stretch;
            place-content: center;
            place-items: center;
            text-align: end;
            justify-self: end;
            padding-inline: var(--space-md);

            @container (max-inline-size: 768px) {
                text-align: start;
                justify-self: start;
            }
        }

        @container (max-inline-size: 900px) {
            font-size: var(--text-xs);
            padding: var(--space-xs);
            gap: var(--space-xs);
        }

        @container (max-inline-size: 768px) {
            gap: var(--space-sm);
        }

        @container (max-inline-size: 640px) {
            gap: var(--space-xs);
        }
    }
}