@layer rs-fields-input-list {
    .field-list-edit[data-type="phone"],
    .field-list-edit[data-type="email"],
    .field-list-edit[data-type="url"] {
        display: grid;
        gap: clamp(0.5rem, 1cqi + 0.3rem, 0.75rem);
        container-type: inline-size;
        min-inline-size: 0;
    }

    .field-list-edit-part {
        display: grid;
        grid-template-columns: 1fr;
        grid-template-areas:
            "input"
            "preview";
        gap: 0.5rem;
        align-items: start;
        position: relative;
        padding: 0.75rem;
        border-radius: 0.75rem;
        background: color-mix(in oklab, var(--current, currentColor) 3%, transparent);
        border: 1px solid color-mix(in oklab, currentColor 10%, transparent);
        container-type: inline-size;
        transition: background 180ms ease, border-color 180ms ease;

        &:hover {
            background: color-mix(in oklab, var(--current, currentColor) 5%, transparent);
            border-color: color-mix(in oklab, currentColor 16%, transparent);
        }

        // Input field
        input[type="text"],
        input[type="tel"],
        input[type="email"],
        input[type="url"] {
            grid-area: input;
            inline-size: 100%;
            min-inline-size: 0;
            padding: 0.6rem 2.5rem 0.6rem 0.75rem;
            border-radius: 0.6rem;
            border: 1px solid color-mix(in oklab, currentColor 14%, transparent);
            background: color-mix(in oklab, var(--current, currentColor) 2%, white);
            color: color-mix(in oklab, currentColor 85%, rgba(17, 24, 39, 0.95));
            font-size: clamp(0.875rem, 0.6cqi + 0.75rem, 1rem);
            outline: none;
            transition: border-color 180ms ease, background 180ms ease, box-shadow 180ms ease;

            &:focus {
                border-color: color-mix(in oklab, currentColor 32%, transparent);
                background: color-mix(in oklab, var(--current, currentColor) 6%, white);
                box-shadow: 0 0 0 3px color-mix(in oklab, currentColor 10%, transparent);
            }

            &:hover:not(:focus) {
                border-color: color-mix(in oklab, currentColor 22%, transparent);
            }

            &::placeholder {
                color: color-mix(in oklab, currentColor 36%, rgba(17, 24, 39, 0.5));
            }
        }

        // Field label
        label[aria-hidden="true"] {
            position: absolute;
            inset-inline-start: 1.25rem;
            inset-block-start: -0.7rem;
            padding-inline: 0.45rem;
            padding-block: 0.15rem;
            background: color-mix(in oklab, var(--current, currentColor) 1%, white);
            color: color-mix(in oklab, currentColor 52%, rgba(17, 24, 39, 0.65));
            font-size: clamp(0.7rem, 0.4cqi + 0.6rem, 0.82rem);
            font-weight: 600;
            letter-spacing: 0.01em;
            pointer-events: none;
            border-radius: 0.35rem;
            backdrop-filter: blur(6px);
            z-index: 1;
        }

        // Toggle checkbox (show/hide) - positioned inside input field
        input[type="checkbox"][data-type="show-password-or-url"] {
            position: absolute;
            inset-inline-end: 0.85rem;
            inset-block-start: 1.35rem;
            appearance: none;
            inline-size: 1.75rem;
            block-size: 1rem;
            border-radius: 9999px;
            background: color-mix(in oklab, currentColor 14%, transparent);
            border: 1px solid color-mix(in oklab, currentColor 18%, transparent);
            cursor: pointer;
            transition: background 200ms ease, border-color 200ms ease, box-shadow 200ms ease;
            z-index: 2;

            &::before {
                content: "👁️";
                position: absolute;
                inset-inline-start: 0.1rem;
                inset-block-start: 50%;
                translate: 0 -50%;
                inline-size: 0.75rem;
                block-size: 0.75rem;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 0.5rem;
                border-radius: 50%;
                background: white;
                box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
                transition: translate 200ms cubic-bezier(0.4, 0, 0.2, 1);
            }

            &:hover {
                background: color-mix(in oklab, currentColor 18%, transparent);
                border-color: color-mix(in oklab, currentColor 24%, transparent);
            }

            &:checked {
                background: color-mix(in oklab, currentColor 22%, transparent);
                border-color: color-mix(in oklab, currentColor 28%, transparent);

                &::before {
                    translate: 0.7rem -50%;
                }
            }

            &:focus-visible {
                outline: 2px solid color-mix(in oklab, currentColor 40%, transparent);
                outline-offset: 2px;
            }
        }

        // Preview link
        a[data-type="preview"] {
            grid-area: preview;
            display: none;
            align-items: center;
            gap: 0.35rem;
            padding: 0.4rem 0.6rem;
            border-radius: 0.5rem;
            background: color-mix(in oklab, currentColor 5%, transparent);
            color: color-mix(in oklab, currentColor 64%, rgba(17, 24, 39, 0.75));
            font-size: clamp(0.8rem, 0.5cqi + 0.7rem, 0.9rem);
            text-decoration: none;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            border: 1px solid color-mix(in oklab, currentColor 8%, transparent);
            transition: background 160ms ease, color 160ms ease, border-color 160ms ease, transform 160ms cubic-bezier(0.4, 0, 0.2, 1);

            &:hover {
                background: color-mix(in oklab, currentColor 10%, transparent);
                color: color-mix(in oklab, currentColor 76%, rgba(17, 24, 39, 0.88));
                border-color: color-mix(in oklab, currentColor 16%, transparent);
                transform: translateY(-2px);
            }

            &:active {
                transform: translateY(0);
            }

            &::before {
                content: "🔗";
                font-size: 0.95em;
                filter: grayscale(0.3);
            }
        }

        // Show preview when checkbox is checked
        &[data-show-preview] a[data-type="preview"] {
            display: inline-flex;
        }
    }

    // Add button
    .field-list-edit[data-type] > button {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.45rem;
        padding: 0.65rem 0.85rem;
        border-radius: 0.7rem;
        border: 2px dashed color-mix(in oklab, currentColor 22%, transparent);
        background: color-mix(in oklab, var(--current, currentColor) 2%, transparent);
        color: color-mix(in oklab, currentColor 60%, rgba(17, 24, 39, 0.8));
        font-size: clamp(0.85rem, 0.6cqi + 0.75rem, 0.95rem);
        font-weight: 600;
        cursor: pointer;
        transition: all 180ms cubic-bezier(0.4, 0, 0.2, 1);

        &:hover {
            border-style: solid;
            border-color: color-mix(in oklab, currentColor 32%, transparent);
            background: color-mix(in oklab, var(--current, currentColor) 6%, transparent);
            color: color-mix(in oklab, currentColor 75%, rgba(17, 24, 39, 0.9));
            transform: translateY(-2px);
            box-shadow: 0 2px 8px color-mix(in oklab, currentColor 8%, transparent);
        }

        &:active {
            transform: translateY(0);
            box-shadow: 0 1px 3px color-mix(in oklab, currentColor 6%, transparent);
        }

        &::before {
            content: "+";
            font-size: 1.3em;
            font-weight: 700;
            line-height: 1;
        }
    }

    // Type-specific styling
    .field-list-edit[data-type="phone"] {
        .field-list-edit-part input {
            font-variant-numeric: tabular-nums;
            letter-spacing: 0.02em;
        }
    }

    .field-list-edit[data-type="email"] {
        .field-list-edit-part input {
            text-transform: lowercase;
            font-variant-caps: all-small-caps;
        }
    }

    .field-list-edit[data-type="url"] {
        .field-list-edit-part input {
            font-family: ui-monospace, "Cascadia Code", "Source Code Pro", "SF Mono", Monaco, Menlo, monospace;
            font-size: 0.92em;
            word-break: break-all;
        }
    }

    // Responsive adjustments
    @container (max-inline-size: 500px) {
        .field-list-edit-part {
            a[data-type="preview"] {
                font-size: 0.75rem;
            }
        }
    }

    @container (max-inline-size: 350px) {
        .field-list-edit-part {
            padding: 0.6rem;

            a[data-type="preview"] {
                font-size: 0.7rem;
            }
        }
    }

    // Accessibility
    @media (prefers-reduced-motion: reduce) {
        .field-list-edit-part,
        .field-list-edit-part input,
        .field-list-edit-part a,
        .field-list-edit-part input[type="checkbox"],
        .field-list-edit > button {
            transition-duration: 0ms;
        }

        .field-list-edit-part input[type="checkbox"]::before {
            transition-duration: 0ms;
        }
    }

    // High contrast mode
    @media (prefers-contrast: high) {
        .field-list-edit-part {
            border-width: 2px;
        }

        .field-list-edit-part input[type="text"],
        .field-list-edit-part input[type="tel"],
        .field-list-edit-part input[type="email"],
        .field-list-edit-part input[type="url"] {
            border-width: 2px;
        }

        .field-list-edit > button {
            border-width: 3px;
        }

        .field-list-edit-part input[type="checkbox"][data-type="show-password-or-url"] {
            border-width: 2px;
        }
    }

    // Dark mode support
    @media (prefers-color-scheme: dark) {
        .field-list-edit-part {
            background: color-mix(in oklab, var(--current, currentColor) 6%, rgba(0, 0, 0, 0.3));

            input[type="text"],
            input[type="tel"],
            input[type="email"],
            input[type="url"] {
                background: color-mix(in oklab, var(--current, currentColor) 4%, rgba(0, 0, 0, 0.4));
                color: color-mix(in oklab, currentColor 90%, rgba(255, 255, 255, 0.95));
            }

            label[aria-hidden="true"] {
                background: color-mix(in oklab, var(--current, currentColor) 3%, rgba(0, 0, 0, 0.5));
            }

            input[type="checkbox"][data-type="show-password-or-url"]::before {
                background: color-mix(in oklab, var(--current, currentColor) 8%, rgba(255, 255, 255, 0.95));
            }
        }
    }
}