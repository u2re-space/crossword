@use "../mixins/Colorize" as *;

@layer rs-fields-input-list {

    .field-list-edit {
        grid-template-columns: [button] minmax(0, 1fr) [checkbox] minmax(0, auto);
        display: grid;
        gap: clamp(0.5rem, 1cqi + 0.3rem, 0.75rem);
        row-gap: 0.5rem;
        container-type: inline-size;
        min-inline-size: 0;
    }

    .field-list-edit-part {
        grid-column: 1 / -1;

        //
        place-content: center;
        place-items: center;

        //
        display: grid;
        grid-template-columns: [input] minmax(0, 1fr) [checkbox-btn] minmax(0, auto) [remove-btn] minmax(0, auto);
        grid-template-rows: minmax(0, auto);
        gap: 0.5rem;

        //
        position: relative;
        padding: 0px;

        //
        border-radius: 0.75rem;
        container-type: inline-size;

        //
        transition: background 180ms ease, border-color 180ms ease;
        background: transparent;


        @include font-style("&");

        & > * {
            grid-row: 1 / 1 span;
        }

        & > label {
            grid-column: input;
        }

        & > input {
            grid-column: input;
        }

        & > button {
            margin: 0px;
            grid-column: remove-btn;

            //
            display: flex;
            place-content: center;
            place-items: center;
            line-height: 0;
            border-radius: min(50%, 50cqmin);

            //
            inline-size: 2rem;
            block-size: 2rem;
            aspect-ratio: 1 / 1;

            //
            @include solid-colorize("&");
            @include font-style("&", ("font-weight": 700));
        }

        // Input field
        input[type="text"],
        input[type="tel"],
        input[type="email"],
        input[type="url"] {
            grid-column: input;

            //
            inline-size: stretch;
            min-inline-size: 0;

            //
            @include solid-colorize("&");
            @include font-style("&");
        }

        //
        input[type="checkbox"][data-type="show-password-or-url"] {
            grid-column: checkbox-btn;

            //
            appearance: none;
            margin: 0px;

            //
            position: relative;

            //
            min-block-size: 0px;
            min-inline-size: 0px;
            inline-size: 2rem;
            block-size: 2rem;
            aspect-ratio: 1 / 1;
            border-radius: 50%;

            //
            display: flex;
            place-content: center;
            place-items: center;
            line-height: 0;

            //
            cursor: pointer;
            transition: background 200ms ease, border-color 200ms ease, box-shadow 200ms ease;
            z-index: 2;

            //
            @include solid-colorize("&");
            @include font-style("&");
        }

        //
        a[data-type="preview"] {
            grid-column: input;

            //
            display: none;
            align-items: center;
            position: absolute;
            gap: 0.35rem;
            padding: 0.4rem 0.6rem;
            border-radius: 0.5rem;
            font-size: clamp(0.8rem, 0.5cqi + 0.7rem, 0.9rem);
            text-decoration: none;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            border: 0px none transparent;
            transition: background 160ms ease, color 160ms ease, border-color 160ms ease, transform 160ms cubic-bezier(0.4, 0, 0.2, 1);
        }

        //
        &[data-show-preview] a[data-type="preview"] {
            display: inline-flex;
        }
    }

    //
    .field-list-edit[data-type] > button {
        grid-column: button;

        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.45rem;
        padding: 0.65rem 0.85rem;
        border-radius: 0.7rem;

        cursor: pointer;
        transition: all 180ms cubic-bezier(0.4, 0, 0.2, 1);

        //
        @include solid-colorize("&");
        @include font-style("&");
    }

    //
    .field-list-edit[data-type="phone"] {
        .field-list-edit-part input {
            font-variant-numeric: tabular-nums;
            letter-spacing: 0.02em;
        }
    }

    .field-list-edit[data-type="email"] {
        .field-list-edit-part input {
            text-transform: lowercase;
            font-variant-caps: all-small-caps;
        }
    }

    .field-list-edit[data-type="url"] {
        .field-list-edit-part input {
            font-family: ui-monospace, "Cascadia Code", "Source Code Pro", "SF Mono", Monaco, Menlo, monospace;
            font-size: 0.92em;
            word-break: break-all;
        }
    }

    // Responsive adjustments
    @container (max-inline-size: 500px) {
        .field-list-edit-part {
            a[data-type="preview"] {
                font-size: 0.75rem;
            }
        }
    }

    @container (max-inline-size: 350px) {
        .field-list-edit-part {
            padding: 0.6rem;

            a[data-type="preview"] {
                font-size: 0.7rem;
            }
        }
    }

    // Accessibility
    @media (prefers-reduced-motion: reduce) {
        .field-list-edit-part,
        .field-list-edit-part input,
        .field-list-edit-part a,
        .field-list-edit-part input[type="checkbox"],
        .field-list-edit > button {
            transition-duration: 0ms;
        }

        .field-list-edit-part input[type="checkbox"]::before {
            transition-duration: 0ms;
        }
    }
}