@use "veela-lib" as *;
@use "../library/mixins" as ui;
@use "../library/tokens" as t;

//
@layer rs-forms-modal {

    //
    .rs-modal-backdrop {
        position: fixed;
        inset: 0;
        display: grid;
        place-content: center;
        place-items: center;
        padding: var(--space-xl);
        z-index: 9999;
        line-height: normal;
        box-sizing: border-box;
        max-inline-size: min(100cqi, 100dvi);
        max-block-size: min(100cqb, 100dvb);
        overflow: hidden;
        perspective: 1000;

        @include ui.glass-backdrop();
    }

    //
    ui-modal, .modal-form {
        display: flex;
        flex-direction: column;
        gap: var(--gap-xs);
        box-sizing: border-box;
        overflow: hidden;
        perspective: 1000;

        //
        min-inline-size: min(92dvw, 33.75rem); max-inline-size: min(99dvw, 40rem);
        min-block-size: min(94dvh, 45rem); max-block-size: min(94dvh, 45rem);
        inline-size: min(100%, 40rem);;
        line-height: normal;
        block-size: stretch;
        background-color: var(--surface-color);
        color: var(--on-surface-color);
        padding: var(--padding-lg);
        border-radius: var(--radius-lg);

        //
        @include ui.tonal-surface(surface-container-low, var(--surface-opacity-subtle), var(--radius-md));
        @include ui.vstack(var(--space-lg));
        @include ui.container-inline;
        @include scrollable("y");

        //
        &, & :where(*) { box-sizing: border-box; }
        &, &:focus-visible, &:focus { overflow-y: auto; overflow-x: hidden; scrollbar-width: thin;  }

        & {
            contain: strict;
            content-visibility: auto;
        }

        //
        .modal-title {
            margin: 0;
            line-height: 1.2;
            place-content: center;
            place-items: center;
            text-align: center;

            //
            justify-content: safe center;
            justify-items: safe center;

            //
            inline-size: stretch;
            min-inline-size: 0px;

            //
            @include ui.text-heading("headline-small", center);
        }

        //
        .modal-description {
            margin: 0;
            background: transparent;
            place-content: center;
            place-items: center;
            text-align: center;

            //
            justify-content: safe center;
            justify-items: safe center;

            //
            inline-size: stretch;
            min-inline-size: 0px;

            //
            @include ui.text-body("body-medium");
        }

        //
        .modal-section {
            @include ui.section-stack(var(--space-sm));

            //
            padding-block: var(--space-sm);
            background: transparent;
            overflow: visible;
            block-size: max-content;

            //
            inline-size: stretch;
            min-inline-size: 0px;

            //
            &:last-of-type {
                border-block-end: none;
            }

            //
            .modal-section-title {
                margin: 0;
                place-content: center;
                place-items: center;
                text-align: center;

                //
                inline-size: stretch;
                min-inline-size: 0px;

                //
                justify-content: safe center;
                justify-items: safe center;

                //
                @include ui.text-label("title-small", true);
            }

            //
            .modal-section-fields {
                @include ui.field-stack(var(--space-sm));
            }
        }

        //
        .modal-actions {
            @include ui.inline-toolbar(var(--space-md));
            justify-content: space-between;
            inline-size: stretch;
            min-inline-size: 0px;
            overflow: visible;

            //
            .modal-actions-right {
                @include ui.inline-toolbar(var(--space-sm));
            }
        }

        //
        .modal-fields {
            padding-inline: var(--space-sm);
            max-block-size: stretch;
            block-size: fit-content;
            overflow-y: auto;
            overflow-x: hidden;
            display: grid;

            //
            grid-template-columns: minmax(0px, 1fr);
            grid-auto-rows: minmax(0px, max-content);

            //
            @include ui.field-stack(var(--space-md));
            @include ui.container-inline;
            @include ui.scrollbars(6px, var(--surface-opacity-emphasis));

            //
            text-align: start;
            justify-content: start;
            justify-items: start;
            inline-size: stretch;
            min-inline-size: 0px;

            //
            .contacts-group, .modal-field {
                display: flex;
                flex-direction: column;
                gap: var(--space-sm);

                //
                place-content: center;
                place-items: center;

                //
                align-content: safe center;
                align-items: safe center;

                //
                inline-size: stretch;
                min-inline-size: 0px;

                //
                label {
                    text-align: start;
                    justify-content: start;
                    justify-items: start;
                }
            }
        }
    }
}
