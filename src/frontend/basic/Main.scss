/* Main SCSS with CSS Layers - Material Design 3 */

@layer reset, base, components, layout, utilities;

/* Import modular stylesheets */
@import "./scss/buttons.scss" layer(components);
@import "./scss/forms.scss" layer(components);
@import "./scss/layout.scss" layer(layout);
@import "./scss/utilities.scss" layer(utilities);
@import "./scss/workcenter.scss" layer(components);
@import "./scss/markdown-render.scss" layer(components);

/* Quill Editor Theming */
@layer components {
  .quill-editor-container {
    background: var(--basic-surface-container);
    border: 1px solid var(--basic-outline);
    border-radius: var(--basic-radius-lg);
    padding: var(--space-lg);
    color: var(--basic-on-surface);

    .editor-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: var(--space-lg);
      padding-bottom: var(--space-md);
      border-bottom: 1px solid var(--basic-outline-variant);

      h3 {
        margin: 0;
        font-size: var(--text-xl);
        font-weight: var(--font-weight-semibold);
        color: var(--basic-on-surface);
      }

      .editor-actions {
        display: flex;
        gap: var(--space-sm);

        .btn {
          padding: var(--space-sm) var(--space-lg);
          border: 1px solid var(--basic-outline);
          border-radius: var(--basic-radius-lg);
          background: var(--basic-surface-container-high);
          color: var(--basic-on-surface);
          font-size: var(--text-sm);
          font-weight: var(--font-weight-medium);
          cursor: pointer;
          transition: all var(--basic-motion-normal);

          &:hover {
            background: var(--basic-surface-container-highest);
            border-color: var(--basic-primary);
          }

          &.primary {
            background: var(--basic-primary);
            color: var(--basic-on-primary);
            border-color: var(--basic-primary);

            &:hover {
              background: color-mix(in oklab, var(--basic-primary) 85%, black);
            }
          }
        }
      }
    }

    .quill-wrapper {
      border: 1px solid var(--basic-outline);
      border-radius: var(--basic-radius-lg);
      overflow: hidden;

      /* Quill editor theming */
      .ql-toolbar {
        border: none;
        border-bottom: 1px solid var(--basic-outline-variant);
        background: var(--basic-surface-container-high);

        .ql-stroke {
          stroke: var(--basic-on-surface-variant);
        }

        .ql-fill {
          fill: var(--basic-on-surface-variant);
        }

        .ql-picker-label:hover,
        .ql-picker-item:hover {
          color: var(--basic-primary);
        }

        .ql-active {
          color: var(--basic-primary);

          .ql-stroke {
            stroke: var(--basic-primary);
          }

          .ql-fill {
            fill: var(--basic-primary);
          }
        }
      }

      .ql-container {
        border: none;
        font-size: var(--text-base);
        line-height: var(--leading-relaxed);
        color: var(--basic-on-surface);
        background: var(--basic-surface);
        min-height: 300px;

        .ql-editor {
          color: var(--basic-on-surface);
          padding: var(--space-lg);

          &::before {
            color: var(--basic-on-surface-variant);
            font-style: normal;
          }

          /* Code blocks */
          pre {
            background: var(--basic-surface-container-high);
            border: 1px solid var(--basic-outline);
            border-radius: var(--basic-radius-md);
            color: var(--basic-on-surface);
          }

          /* Blockquotes */
          blockquote {
            border-left: 4px solid var(--basic-primary);
            background: var(--basic-surface-container-low);
            color: var(--basic-on-surface);
          }
        }
      }
    }

    .editor-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: var(--space-lg);
      padding-top: var(--space-md);
      border-top: 1px solid var(--basic-outline-variant);

      .editor-stats {
        display: flex;
        gap: var(--space-lg);
        font-size: var(--text-sm);
        color: var(--basic-on-surface-variant);
      }

      .editor-info {
        font-size: var(--text-sm);
        color: var(--basic-on-surface-variant);
      }
    }
  }

  /* Dark theme overrides for Quill */
  .basic-app[data-theme="dark"] {
    .quill-editor-container {
      .quill-wrapper {
        .ql-toolbar {
          background: var(--basic-surface-container-low);

          .ql-stroke {
            stroke: var(--basic-on-surface);
          }

          .ql-fill {
            fill: var(--basic-on-surface);
          }
        }

        .ql-container {
          background: var(--basic-surface-container-low);

          .ql-editor {
            color: var(--basic-on-surface);

            &::before {
              color: var(--basic-on-surface-variant);
            }

            pre {
              background: var(--basic-surface-container);
              border-color: var(--basic-outline);
              color: var(--basic-on-surface);
            }

            blockquote {
              background: var(--basic-surface-container);
              color: var(--basic-on-surface);
            }
          }
        }
      }
    }
  }
}

/* Base layer - foundational styles */
@layer base {
  .basic-app {
    block-size: 100%;
    display: grid;
    grid-template-rows: auto auto minmax(0, 1fr);
    gap: 12px;
    padding: 0px;
    color: var(--basic-on-surface);
    background: var(--basic-background);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, sans-serif;
    color-scheme: light dark;
    contain: strict;
    inline-size: stretch;
    max-inline-size: stretch;
    -webkit-tap-highlight-color: transparent;
    margin: 0px;

    /* Shape / motion / elevations (Material-ish, static) */
    --basic-radius-sm: 10px;
    --basic-radius-md: 14px;
    --basic-radius-lg: 18px;
    --basic-radius-xl: 20px;
    --basic-radius-2xl: 28px;
    --basic-radius-full: min(50dvmin, 50cqmin);
    --basic-elev-0: none;
    --basic-elev-1: 0 1px 2px rgba(0, 0, 0, 0.14), 0 1px 3px rgba(0, 0, 0, 0.08);
    --basic-elev-2: 0 2px 6px rgba(0, 0, 0, 0.16), 0 1px 2px rgba(0, 0, 0, 0.10);
    --basic-elev-3: 0 8px 18px rgba(0, 0, 0, 0.18), 0 2px 6px rgba(0, 0, 0, 0.12);
    --basic-motion-fast: 120ms cubic-bezier(0.2, 0, 0, 1);
    --basic-motion-normal: 160ms cubic-bezier(0.2, 0, 0, 1);
    --basic-motion-slow: 200ms cubic-bezier(0.2, 0, 0, 1);
    --basic-focus-ring: 0 0 0 3px color-mix(in oklab, var(--basic-primary) 35%, transparent);

    /* Spacing system */
    --space-xs: 0.25rem;
    --space-sm: 0.5rem;
    --space-md: 0.75rem;
    --space-lg: 1rem;
    --space-xl: 1.25rem;
    --space-2xl: 1.6rem;

    /* Typography */
    --text-xs: 0.7rem;
    --text-sm: 0.8rem;
    --text-base: 0.9rem;
    --text-lg: 1rem;
    --text-xl: 1.25rem;
    --text-2xl: 1.6rem;
    --text-3xl: 2rem;

    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;

    --font-family: 'Roboto', ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
    --font-family-mono: 'Roboto Mono', 'SF Mono', Monaco, Inconsolata, 'Fira Code', monospace;

    --leading-tight: 1.2;
    --leading-normal: 1.5;
    --leading-relaxed: 1.8;
  }

.basic-app[data-theme="light"] {
  color-scheme: light;
  /* Teal/Cyan palette - neutral, calm tones */
  --basic-primary: #0891b2;
  --basic-on-primary: #ffffff;
  --basic-secondary: #4b6b73;
  --basic-on-secondary: #ffffff;
  --basic-tertiary: #2e7d6a;
  --basic-on-tertiary: #ffffff;
  --basic-error: #ba1a1a;
  --basic-on-error: #ffffff;

  --basic-background: #f5fafb;
  --basic-on-background: #171d1e;
  --basic-surface: #f5fafb;
  --basic-on-surface: #171d1e;
  --basic-surface-variant: #dbe4e6;
  --basic-on-surface-variant: #3f484a;
  --basic-outline: #6f797b;
  --basic-outline-variant: #bfc8ca;

  /* Surface containers (soft tint of primary) */
  --basic-surface-container-low: color-mix(in oklab, var(--basic-surface) 96%, var(--basic-primary) 4%);
  --basic-surface-container: color-mix(in oklab, var(--basic-surface) 92%, var(--basic-primary) 8%);
  --basic-surface-container-high: color-mix(in oklab, var(--basic-surface) 88%, var(--basic-primary) 12%);
  --basic-surface-container-highest: color-mix(in oklab, var(--basic-surface) 84%, var(--basic-primary) 16%);

  /* Convenience */
  --basic-border: color-mix(in oklab, var(--basic-outline-variant) 75%, transparent);
}

.basic-app[data-theme="dark"] {
  color-scheme: dark;
  /* Teal/Cyan palette - neutral, calm tones */
  --basic-primary: #5eead4;
  --basic-on-primary: #00363d;
  --basic-secondary: #a3c9d0;
  --basic-on-secondary: #243439;
  --basic-tertiary: #7ed4bc;
  --basic-on-tertiary: #003830;
  --basic-error: #ffb4ab;
  --basic-on-error: #690005;

  --basic-background: #0f1718;
  --basic-on-background: #dfe3e4;
  --basic-surface: #0f1718;
  --basic-on-surface: #dfe3e4;
  --basic-surface-variant: #3f484a;
  --basic-on-surface-variant: #bfc8ca;
  --basic-outline: #899294;
  --basic-outline-variant: #3f484a;

  /* Surface containers (soft tint of primary) */
  --basic-surface-container-low: color-mix(in oklab, var(--basic-surface) 92%, var(--basic-primary) 8%);
  --basic-surface-container: color-mix(in oklab, var(--basic-surface) 88%, var(--basic-primary) 12%);
  --basic-surface-container-high: color-mix(in oklab, var(--basic-surface) 84%, var(--basic-primary) 16%);
  --basic-surface-container-highest: color-mix(in oklab, var(--basic-surface) 80%, var(--basic-primary) 20%);

  /* Convenience */
  --basic-border: color-mix(in oklab, var(--basic-outline-variant) 70%, transparent);
}
}
