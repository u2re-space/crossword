{"version":3,"file":"content.js","sources":["../../src/frontend/main/overlay.ts","../../src/crx/content/copy.ts","../../src/crx/content/rect-selector.ts","../../src/crx/content/snip.ts","../../src/crx/content/main.ts"],"sourcesContent":["/**\n * Unified Overlay System\n * Standalone, works in: PWA, Chrome Extension content scripts, vanilla JS\n * Provides overlay, selection box, hints, and integrated toast/clipboard\n */\n\nimport { initClipboardReceiver } from \"@rs-core/modules/Clipboard\";\nimport { showToast as toastShow, initToastReceiver, type ToastOptions } from \"../items/Toast\";\n\nexport interface OverlayConfig {\n    prefix?: string;\n    zIndex?: number;\n}\n\nexport interface OverlayElements {\n    overlay: HTMLDivElement | null;\n    box: HTMLDivElement | null;\n    hint: HTMLDivElement | null;\n    sizeBadge: HTMLDivElement | null;\n    toast: HTMLDivElement | null;\n}\n\nconst DEFAULT_CONFIG: Required<OverlayConfig> = {\n    prefix: \"sel-dom\",\n    zIndex: 2147483647\n};\n\nconst createOverlayStyles = (prefix: string, zIndex: number): string => `\nhtml > .${prefix}-overlay,\nbody > .${prefix}-overlay,\n.${prefix}-overlay[popover] {\n    position: fixed !important;\n    inset: 0 !important;\n    margin: 0 !important;\n    padding: 0 !important;\n    border: none !important;\n    background: transparent !important;\n    background-color: transparent !important;\n    background-image: none !important;\n    z-index: ${zIndex} !important;\n    display: none;\n    visibility: hidden;\n    pointer-events: none;\n    box-sizing: border-box !important;\n    inline-size: 100vw !important;\n    block-size: 100vh !important;\n    max-inline-size: 100vw !important;\n    max-block-size: 100vh !important;\n    overflow: visible !important;\n    cursor: crosshair !important;\n    user-select: none !important;\n    -webkit-user-select: none !important;\n    -webkit-user-drag: none !important;\n    outline: none !important;\n}\n\nhtml > .${prefix}-overlay:popover-open,\nbody > .${prefix}-overlay:popover-open,\n.${prefix}-overlay[popover]:popover-open {\n    display: block !important;\n    visibility: visible !important;\n    pointer-events: auto !important;\n}\n\nhtml > .${prefix}-overlay::backdrop,\nbody > .${prefix}-overlay::backdrop,\n.${prefix}-overlay[popover]::backdrop {\n    position: fixed !important;\n    inset: 0 !important;\n    background: rgba(0, 0, 0, 0.35) !important;\n    pointer-events: auto !important;\n    cursor: crosshair !important;\n    z-index: ${zIndex - 1} !important;\n}\n\n.${prefix}-overlay .${prefix}-box,\n.${prefix}-box {\n    position: fixed !important;\n    overflow: visible !important;\n    border: 2px solid #4da3ff !important;\n    background: rgba(77, 163, 255, 0.15) !important;\n    box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.4) !important;\n    pointer-events: none !important;\n    -webkit-user-drag: none !important;\n    box-sizing: border-box !important;\n    z-index: 1 !important;\n}\n\n.${prefix}-overlay .${prefix}-hint,\n.${prefix}-hint {\n    position: fixed !important;\n    inset-inline-start: 50% !important;\n    inset-block-start: 50% !important;\n    transform: translate(-50%, -50%) !important;\n    background: rgba(0, 0, 0, 0.8) !important;\n    color: #fff !important;\n    font: 13px/1.4 system-ui, -apple-system, \"Segoe UI\", Roboto, Arial, sans-serif !important;\n    padding: 10px 16px !important;\n    border-radius: 8px !important;\n    pointer-events: none !important;\n    -webkit-user-drag: none !important;\n    inline-size: max-content !important;\n    block-size: max-content !important;\n    z-index: 2 !important;\n    white-space: nowrap !important;\n    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4) !important;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;\n}\n\n.${prefix}-hint:empty {\n    display: none !important;\n    visibility: hidden !important;\n}\n\n.${prefix}-overlay .${prefix}-size-badge,\n.${prefix}-box .${prefix}-size-badge,\n.${prefix}-size-badge {\n    position: absolute !important;\n    transform: translate(6px, 6px) !important;\n    background: #1e293b !important;\n    color: #fff !important;\n    font: 11px/1.3 ui-monospace, SFMono-Regular, \"SF Mono\", Menlo, Consolas, monospace !important;\n    padding: 4px 8px !important;\n    border-radius: 4px !important;\n    pointer-events: none !important;\n    -webkit-user-drag: none !important;\n    inline-size: max-content !important;\n    block-size: max-content !important;\n    z-index: 3 !important;\n    white-space: nowrap !important;\n    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4) !important;\n}\n\n.${prefix}-size-badge:empty {\n    display: none !important;\n    visibility: hidden !important;\n}\n\nhtml > .${prefix}-toast,\nbody > .${prefix}-toast,\n.${prefix}-toast {\n    position: fixed !important;\n    inset-inline-start: 50% !important;\n    inset-block-end: 24px !important;\n    inset-block-start: auto !important;\n    inset-inline-end: auto !important;\n    transform: translateX(-50%) !important;\n    background: rgba(0, 0, 0, 0.9) !important;\n    color: #fff !important;\n    font: 13px/1.4 system-ui, -apple-system, \"Segoe UI\", Roboto, Arial, sans-serif !important;\n    padding: 10px 16px !important;\n    border-radius: 8px !important;\n    pointer-events: none !important;\n    -webkit-user-drag: none !important;\n    inline-size: max-content !important;\n    block-size: max-content !important;\n    z-index: ${zIndex} !important;\n    white-space: nowrap !important;\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4) !important;\n    opacity: 0;\n    visibility: hidden;\n    transition: opacity 200ms ease-out, visibility 200ms ease-out !important;\n    margin: 0 !important;\n    border: none !important;\n    box-sizing: border-box !important;\n}\n\n.${prefix}-toast.is-visible {\n    opacity: 1 !important;\n    visibility: visible !important;\n}\n\n.${prefix}-toast:empty {\n    display: none !important;\n}\n`;\n\nconst injectedDocs = new WeakSet<Document>();\nconst overlayInstances = new Map<string, OverlayElements>();\n\nlet _receiversInitialized = false;\n\nconst initReceivers = (): void => {\n    if (_receiversInitialized) return;\n    _receiversInitialized = true;\n    initToastReceiver();\n    initClipboardReceiver();\n};\n\nconst injectStyles = (config: Required<OverlayConfig>, doc: Document = document): void => {\n    if (injectedDocs.has(doc)) return;\n\n    const styleId = `__${config.prefix}-styles__`;\n    if (doc.getElementById(styleId)) {\n        injectedDocs.add(doc);\n        return;\n    }\n\n    const style = doc.createElement(\"style\");\n    style.id = styleId;\n    style.textContent = createOverlayStyles(config.prefix, config.zIndex);\n    (doc.head || doc.documentElement).appendChild(style);\n    injectedDocs.add(doc);\n};\n\nconst createElements = (config: Required<OverlayConfig>, doc: Document = document): OverlayElements => {\n    const key = config.prefix;\n\n    if (overlayInstances.has(key)) {\n        const existing = overlayInstances.get(key)!;\n        if (existing.overlay?.isConnected) return existing;\n        overlayInstances.delete(key);\n    }\n\n    if (!doc?.documentElement) {\n        return { overlay: null, box: null, hint: null, sizeBadge: null, toast: null };\n    }\n\n    injectStyles(config, doc);\n    initReceivers();\n\n    const overlay = doc.createElement(\"div\");\n    overlay.className = `${config.prefix}-overlay`;\n    overlay.draggable = false;\n    overlay.tabIndex = -1;\n    overlay.popover = \"manual\";\n\n    const box = doc.createElement(\"div\");\n    box.className = `${config.prefix}-box`;\n    box.tabIndex = -1;\n\n    const hint = doc.createElement(\"div\");\n    hint.className = `${config.prefix}-hint`;\n    hint.textContent = \"Select area. Esc ‚Äî cancel\";\n    hint.tabIndex = -1;\n\n    const sizeBadge = doc.createElement(\"div\");\n    sizeBadge.className = `${config.prefix}-size-badge`;\n    sizeBadge.textContent = \"\";\n    sizeBadge.tabIndex = -1;\n\n    const toast = doc.createElement(\"div\");\n    toast.className = `${config.prefix}-toast`;\n    toast.tabIndex = -1;\n\n    box.appendChild(sizeBadge);\n    overlay.appendChild(box);\n    overlay.appendChild(hint);\n\n    doc.documentElement.appendChild(toast);\n    doc.documentElement.appendChild(overlay);\n\n    toast.addEventListener(\"transitionend\", () => {\n        if (!toast.classList.contains(\"is-visible\")) {\n            toast.textContent = \"\";\n        }\n    });\n\n    const elements: OverlayElements = { overlay, box, hint, sizeBadge, toast };\n    overlayInstances.set(key, elements);\n\n    return elements;\n};\n\nexport const getOverlayElements = (config?: Partial<OverlayConfig>): OverlayElements => {\n    const fullConfig: Required<OverlayConfig> = { ...DEFAULT_CONFIG, ...config };\n\n    if (typeof document === \"undefined\") {\n        return { overlay: null, box: null, hint: null, sizeBadge: null, toast: null };\n    }\n\n    return createElements(fullConfig);\n};\n\nexport const getOverlay = (config?: Partial<OverlayConfig>): HTMLDivElement | null =>\n    getOverlayElements(config).overlay;\n\nexport const getBox = (config?: Partial<OverlayConfig>): HTMLDivElement | null =>\n    getOverlayElements(config).box;\n\nexport const getHint = (config?: Partial<OverlayConfig>): HTMLDivElement | null =>\n    getOverlayElements(config).hint;\n\nexport const getSizeBadge = (config?: Partial<OverlayConfig>): HTMLDivElement | null =>\n    getOverlayElements(config).sizeBadge;\n\nexport const getToast = (config?: Partial<OverlayConfig>): HTMLDivElement | null =>\n    getOverlayElements(config).toast;\n\nexport const showToast = (text: string | ToastOptions, config?: Partial<OverlayConfig>): void => {\n    if (typeof text === \"object\") {\n        toastShow(text);\n        return;\n    }\n\n    try {\n        toastShow({ message: text, kind: \"info\", duration: 1800 });\n    } catch {\n        const elements = getOverlayElements(config);\n        const toast = elements.toast;\n        if (!toast) return;\n\n        if (!toast.classList.contains(\"is-visible\")) {\n            toast.classList.add(\"is-visible\");\n        }\n\n        if (toast.textContent === text) return;\n        toast.textContent = text;\n\n        setTimeout(() => {\n            if (toast.textContent !== text) return;\n            toast.classList.remove(\"is-visible\");\n        }, 1800);\n    }\n};\n\nexport const showSelection = (config?: Partial<OverlayConfig>): void => {\n    const elements = getOverlayElements(config);\n    const { overlay, box, sizeBadge } = elements;\n    if (!overlay || !box) return;\n\n    try {\n        (overlay as any).showPopover?.();\n    } catch (e) {\n        console.warn(\"[Overlay] showPopover failed:\", e);\n    }\n\n    overlay.style.setProperty(\"display\", \"block\", \"important\");\n\n    box.style.left = \"0px\";\n    box.style.top = \"0px\";\n    box.style.width = \"0px\";\n    box.style.height = \"0px\";\n\n    if (sizeBadge) sizeBadge.textContent = \"\";\n};\n\nexport const hideSelection = (config?: Partial<OverlayConfig>): void => {\n    const elements = getOverlayElements(config);\n    const { overlay, box, sizeBadge } = elements;\n    if (!overlay) return;\n\n    overlay.style.removeProperty(\"display\");\n\n    try {\n        (overlay as any).hidePopover?.();\n    } catch (e) {\n        console.warn(\"[Overlay] hidePopover failed:\", e);\n    }\n\n    if (box) {\n        box.style.left = \"0px\";\n        box.style.top = \"0px\";\n        box.style.width = \"0px\";\n        box.style.height = \"0px\";\n    }\n\n    if (sizeBadge) {\n        sizeBadge.textContent = \"\";\n    }\n};\n\nexport const updateBox = (\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    config?: Partial<OverlayConfig>\n): void => {\n    const elements = getOverlayElements(config);\n    const { box, sizeBadge } = elements;\n    if (!box) return;\n\n    box.style.left = `${x}px`;\n    box.style.top = `${y}px`;\n    box.style.width = `${width}px`;\n    box.style.height = `${height}px`;\n\n    if (sizeBadge) {\n        sizeBadge.textContent = `${Math.round(width)} √ó ${Math.round(height)}`;\n        sizeBadge.style.left = `${width}px`;\n        sizeBadge.style.top = `${height}px`;\n    }\n};\n\nexport const setHint = (text: string, config?: Partial<OverlayConfig>): void => {\n    const elements = getOverlayElements(config);\n    if (elements.hint) {\n        elements.hint.textContent = text;\n    }\n};\n\nexport const initOverlay = (config?: Partial<OverlayConfig>): OverlayElements => {\n    if (typeof document === \"undefined\") {\n        return { overlay: null, box: null, hint: null, sizeBadge: null, toast: null };\n    }\n\n    if (document.readyState === \"loading\") {\n        let elements: OverlayElements = { overlay: null, box: null, hint: null, sizeBadge: null, toast: null };\n        document.addEventListener(\"DOMContentLoaded\", () => {\n            elements = getOverlayElements(config);\n        }, { once: true });\n        return elements;\n    }\n\n    return getOverlayElements(config);\n};\n\n// Legacy proxy exports for backward compatibility\nexport const overlay = new Proxy({} as HTMLDivElement, {\n    get: (_, prop) => (getOverlay() as any)?.[prop],\n    set: (_, prop, value) => { const o = getOverlay(); if (o) (o as any)[prop] = value; return true; }\n});\n\nexport const box = new Proxy({} as HTMLDivElement, {\n    get: (_, prop) => (getBox() as any)?.[prop],\n    set: (_, prop, value) => { const b = getBox(); if (b) (b as any)[prop] = value; return true; }\n});\n\nexport const hint = new Proxy({} as HTMLDivElement, {\n    get: (_, prop) => (getHint() as any)?.[prop],\n    set: (_, prop, value) => { const h = getHint(); if (h) (h as any)[prop] = value; return true; }\n});\n\nexport const sizeBadge = new Proxy({} as HTMLDivElement, {\n    get: (_, prop) => (getSizeBadge() as any)?.[prop],\n    set: (_, prop, value) => { const s = getSizeBadge(); if (s) (s as any)[prop] = value; return true; }\n});\n\nexport default {\n    getElements: getOverlayElements,\n    showToast,\n    showSelection,\n    hideSelection,\n    updateBox,\n    setHint,\n    init: initOverlay,\n    getOverlay,\n    getBox,\n    getHint,\n    getSizeBadge,\n    getToast\n};\n\nif (typeof document !== \"undefined\") {\n    if (document.readyState === \"loading\") {\n        document.addEventListener(\"DOMContentLoaded\", () => getOverlayElements(), { once: true });\n    } else {\n        getOverlayElements();\n    }\n}\n","/**\n * CRX Content Script - Clipboard Handler\n * Uses unified clipboard handler module\n */\n\nimport { initClipboardHandler } from \"@rs-crx/shared/clipboard-handler\";\nimport { showToast } from \"@rs-frontend/main/overlay\";\n\n// Initialize handler for content script context\n// - No target filter (responds to all COPY_HACK messages)\n// - Shows toast feedback\ninitClipboardHandler({\n    showFeedback: true,\n    toastFn: showToast\n});\n","// Rectangle selection overlay for CRX-Snip\nexport class RectSelector {\n    private overlay: HTMLElement | null = null;\n    private selectionBox: HTMLElement | null = null;\n    private startX = 0;\n    private startY = 0;\n    private isSelecting = false;\n    private onSelect: ((rect: { x: number; y: number; width: number; height: number }) => void) | null = null;\n    private onCancel: (() => void) | null = null;\n\n    constructor() {\n        this.createOverlay();\n    }\n\n    private createOverlay(): void {\n        // Create main overlay\n        this.overlay = document.createElement('div');\n        Object.assign(this.overlay.style, {\n            position: 'fixed',\n            top: '0',\n            left: '0',\n            width: '100vw',\n            height: '100vh',\n            backgroundColor: 'rgba(0, 0, 0, 0.1)',\n            cursor: 'crosshair',\n            zIndex: '999999',\n            userSelect: 'none'\n        });\n\n        // Create selection box\n        this.selectionBox = document.createElement('div');\n        Object.assign(this.selectionBox.style, {\n            position: 'absolute',\n            border: '2px solid #007bff',\n            backgroundColor: 'rgba(0, 123, 255, 0.1)',\n            display: 'none',\n            pointerEvents: 'none'\n        });\n\n        // Create instruction text\n        const instruction = document.createElement('div');\n        Object.assign(instruction.style, {\n            position: 'fixed',\n            top: '20px',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            backgroundColor: 'rgba(0, 0, 0, 0.8)',\n            color: 'white',\n            padding: '10px 20px',\n            borderRadius: '5px',\n            fontFamily: 'Arial, sans-serif',\n            fontSize: '14px',\n            zIndex: '1000000',\n            pointerEvents: 'none'\n        });\n        instruction.textContent = 'Click and drag to select area. Press Escape to cancel.';\n\n        this.overlay.appendChild(this.selectionBox);\n        this.overlay.appendChild(instruction);\n        document.body.appendChild(this.overlay);\n\n        this.attachEventListeners();\n    }\n\n    private attachEventListeners(): void {\n        if (!this.overlay) return;\n\n        // Mouse down - start selection\n        this.overlay.addEventListener('mousedown', (e) => {\n            e.preventDefault();\n            this.isSelecting = true;\n            this.startX = e.clientX;\n            this.startY = e.clientY;\n\n            if (this.selectionBox) {\n                Object.assign(this.selectionBox.style, {\n                    left: `${this.startX}px`,\n                    top: `${this.startY}px`,\n                    width: '0px',\n                    height: '0px',\n                    display: 'block'\n                });\n            }\n        });\n\n        // Mouse move - update selection\n        this.overlay.addEventListener('mousemove', (e) => {\n            if (!this.isSelecting || !this.selectionBox) return;\n\n            const currentX = e.clientX;\n            const currentY = e.clientY;\n\n            const left = Math.min(this.startX, currentX);\n            const top = Math.min(this.startY, currentY);\n            const width = Math.abs(currentX - this.startX);\n            const height = Math.abs(currentY - this.startY);\n\n            Object.assign(this.selectionBox.style, {\n                left: `${left}px`,\n                top: `${top}px`,\n                width: `${width}px`,\n                height: `${height}px`\n            });\n        });\n\n        // Mouse up - complete selection\n        this.overlay.addEventListener('mouseup', (e) => {\n            if (!this.isSelecting) return;\n\n            const endX = e.clientX;\n            const endY = e.clientY;\n\n            const x = Math.min(this.startX, endX);\n            const y = Math.min(this.startY, endY);\n            const width = Math.abs(endX - this.startX);\n            const height = Math.abs(endY - this.startY);\n\n            // Minimum size check\n            if (width > 10 && height > 10) {\n                const rect = { x, y, width, height };\n                this.cleanup();\n                this.onSelect?.(rect);\n            } else {\n                this.cancel();\n            }\n\n            this.isSelecting = false;\n        });\n\n        // Keyboard - cancel on Escape\n        document.addEventListener('keydown', (e) => {\n            if (e.key === 'Escape') {\n                this.cancel();\n            }\n        });\n    }\n\n    private cancel(): void {\n        this.cleanup();\n        this.onCancel?.();\n    }\n\n    private cleanup(): void {\n        if (this.overlay && this.overlay.parentNode) {\n            this.overlay.parentNode.removeChild(this.overlay);\n        }\n        this.overlay = null;\n        this.selectionBox = null;\n        this.isSelecting = false;\n    }\n\n    // Public API\n    selectArea(): Promise<{ x: number; y: number; width: number; height: number } | null> {\n        return new Promise((resolve, reject) => {\n            this.onSelect = (rect) => resolve(rect);\n            this.onCancel = () => resolve(null);\n        });\n    }\n\n    destroy(): void {\n        this.cleanup();\n        this.onSelect = null;\n        this.onCancel = null;\n    }\n}\n\n// Global function for content script injection\ndeclare global {\n    interface Window {\n        crxSnipSelectRect?: () => Promise<{ x: number; y: number; width: number; height: number } | null>;\n    }\n}\n\n// Make available globally for injection\nwindow.crxSnipSelectRect = async () => {\n    const selector = new RectSelector();\n    try {\n        return await selector.selectArea();\n    } finally {\n        selector.destroy();\n    }\n};","/**\n * CrossWord ‚Äî Snip Module (Content Script)\n *\n * Provides the selection overlay + AI capture pipeline.\n * Modes: recognize | solve | code | css | custom\n *\n * Triggered by:\n *  - Context menu (START_SNIP, SOLVE_AND_ANSWER, WRITE_CODE, EXTRACT_CSS, CUSTOM_INSTRUCTION)\n *  - Keyboard shortcuts (Ctrl+Shift+X/Y forwarded by SW)\n */\n\nimport { getBox, getHint, getOverlay, getSizeBadge, hideSelection, showSelection, showToast } from \"@rs-frontend/main/overlay\";\nimport { createRuntimeChannelModule } from \"../shared/runtime\";\nimport { registerCrxHandler } from \"../../com/core/CrxMessaging\";\n\n// ---------------------------------------------------------------------------\n// Types\n// ---------------------------------------------------------------------------\n\nexport interface CropArea { x: number; y: number; width: number; height: number }\nexport type SnipMode = \"recognize\" | \"solve\" | \"code\" | \"css\" | \"custom\";\n\n// ---------------------------------------------------------------------------\n// CRX environment & runtime module\n// ---------------------------------------------------------------------------\n\nconst isInCrx = typeof chrome !== \"undefined\" && chrome.runtime?.id;\n\nlet crxModule: any = null;\nconst getCrxModule = async () => {\n    if (!crxModule && isInCrx) crxModule = await createRuntimeChannelModule(\"crx-content-script\");\n    return crxModule;\n};\n\n// ---------------------------------------------------------------------------\n// Mode metadata\n// ---------------------------------------------------------------------------\n\nconst MODE_META: Record<SnipMode, { msgType: string; name: string; error: string; hint: string; action: string }> = {\n    recognize: { msgType: \"CAPTURE\", name: \"Recognition\", error: \"No data recognized\", hint: \"Select area. Esc ‚Äî cancel\", action: \"Recognizing with AI...\" },\n    solve:     { msgType: \"CAPTURE_SOLVE\", name: \"Solving/Answering\", error: \"Could not solve/answer\", hint: \"Select problem/question. Esc ‚Äî cancel\", action: \"Solving / Answering...\" },\n    code:      { msgType: \"CAPTURE_CODE\", name: \"Code generation\", error: \"Could not generate code\", hint: \"Select code request. Esc ‚Äî cancel\", action: \"Generating code...\" },\n    css:       { msgType: \"CAPTURE_CSS\", name: \"CSS extraction\", error: \"Could not extract CSS\", hint: \"Select UI to extract CSS. Esc ‚Äî cancel\", action: \"Extracting CSS styles...\" },\n    custom:    { msgType: \"CAPTURE_CUSTOM\", name: \"Custom instruction\", error: \"Custom instruction failed\", hint: \"Select area. Esc ‚Äî cancel\", action: \"Processing...\" },\n};\n\n// ---------------------------------------------------------------------------\n// State\n// ---------------------------------------------------------------------------\n\nlet injected = false;\nlet active = false;\nlet currentMode: SnipMode = \"recognize\";\nlet customInstructionId: string | null = null;\nlet customInstructionLabel: string | null = null;\n\n// ---------------------------------------------------------------------------\n// Capture helper\n// ---------------------------------------------------------------------------\n\nconst captureTab = async (rect?: CropArea, mode: SnipMode = \"recognize\") => {\n    if (!isInCrx) return Promise.reject(new Error(\"Not in CRX environment\"));\n\n    const module = await getCrxModule();\n    if (!module) throw new Error(\"CRX runtime module not available\");\n\n    const meta = MODE_META[mode];\n    const payload: any = { type: meta.msgType, rect };\n    if (mode === \"custom\" && customInstructionId) payload.instructionId = customInstructionId;\n\n    const result = await module.capture(rect, mode);\n\n    if (!result?.ok) {\n        showToast(result?.error ? (result.error.length > 50 ? result.error.slice(0, 50) + \"...\" : result.error) : meta.error);\n    } else if (!result.data) {\n        showToast(\"No text found in selected area\");\n    }\n\n    return result;\n};\n\n// ---------------------------------------------------------------------------\n// Snip activation\n// ---------------------------------------------------------------------------\n\nexport function startSnip(mode: SnipMode = \"recognize\", instructionId?: string, instructionLabel?: string) {\n    if (active) return;\n\n    currentMode = mode;\n    customInstructionId = instructionId || null;\n    customInstructionLabel = instructionLabel || null;\n\n    const overlay = getOverlay();\n    const box = getBox();\n    const hint = getHint();\n    const sizeBadge = getSizeBadge();\n\n    if (!overlay || !box) { console.warn(\"[Snip] overlay not ready\"); return; }\n\n    let startX = 0, startY = 0, currX = 0, currY = 0, dragging = false;\n\n    const onKeyDown = (e: KeyboardEvent) => { if (e.key === \"Escape\") { e.preventDefault(); e.stopPropagation(); cleanup(); } };\n\n    const onMouseDown = (e: MouseEvent) => {\n        if (e.button !== 0 || !active) return;\n        e.preventDefault(); e.stopPropagation();\n        dragging = true;\n        startX = e.clientX; startY = e.clientY; currX = startX; currY = startY;\n        updateBox();\n        if (hint) hint.textContent = \"\";\n        if (sizeBadge) sizeBadge.textContent = \"\";\n    };\n\n    const onMouseMove = (e: MouseEvent) => { if (!dragging) return; e.preventDefault(); currX = e.clientX; currY = e.clientY; updateBox(); };\n\n    const onMouseUp = async (e: MouseEvent) => {\n        if (!dragging) return;\n        e.preventDefault();\n        dragging = false;\n\n        const x = Math.min(startX, currX), y = Math.min(startY, currY);\n        const w = Math.abs(currX - startX), h = Math.abs(currY - startY);\n        cleanup();\n\n        if (w < 2 || h < 2) { showToast(\"Selection is too small\"); return; }\n\n        const meta = MODE_META[currentMode];\n        const actionText = currentMode === \"custom\" && customInstructionLabel ? `${customInstructionLabel}...` : meta.action;\n        showToast(actionText);\n\n        try {\n            const result = await captureTab({ x, y, width: w, height: h }, currentMode).catch(() => null);\n            if (!result?.success) { /* captureTab already shows toast */ }\n        } catch { showToast(`${meta.name} failed`); }\n    };\n\n    const onCancel = () => { if (dragging) { dragging = false; cleanup(); } };\n\n    function updateBox() {\n        const x = Math.min(startX, currX), y = Math.min(startY, currY);\n        const w = Math.abs(currX - startX), h = Math.abs(currY - startY);\n        box.style.left = `${x}px`; box.style.top = `${y}px`;\n        box.style.width = `${w}px`; box.style.height = `${h}px`;\n        if (sizeBadge) {\n            sizeBadge.textContent = `${Math.round(w)} √ó ${Math.round(h)}`;\n            sizeBadge.style.left = `${w}px`; sizeBadge.style.top = `${h}px`;\n            if (!sizeBadge.isConnected) box.appendChild(sizeBadge);\n        }\n    }\n\n    function cleanup() {\n        active = false; dragging = false;\n        document.removeEventListener(\"keydown\", onKeyDown, true);\n        overlay.removeEventListener(\"mousedown\", onMouseDown);\n        overlay.removeEventListener(\"mousemove\", onMouseMove);\n        overlay.removeEventListener(\"mouseup\", onMouseUp);\n        document.removeEventListener(\"mousecancel\", onCancel, true);\n        hideSelection();\n    }\n\n    // Attach\n    document.addEventListener(\"keydown\", onKeyDown, true);\n    overlay.addEventListener(\"mousedown\", onMouseDown);\n    overlay.addEventListener(\"mousemove\", onMouseMove);\n    overlay.addEventListener(\"mouseup\", onMouseUp);\n    document.addEventListener(\"mousecancel\", onCancel, true);\n\n    active = true;\n    showSelection();\n\n    const hintText = currentMode === \"custom\" && customInstructionLabel\n        ? `Select for \"${customInstructionLabel}\". Esc ‚Äî cancel`\n        : MODE_META[currentMode].hint;\n    if (hint) hint.textContent = hintText;\n    if (sizeBadge) sizeBadge.textContent = \"\";\n}\n\n// ---------------------------------------------------------------------------\n// Message listener (from SW / context menu)\n// ---------------------------------------------------------------------------\n\nconst initSnip = () => {\n    if (injected) return;\n    injected = true;\n\n    chrome.runtime.onMessage.addListener((msg) => {\n        if (msg?.type === \"START_SNIP\") startSnip(\"recognize\");\n        if (msg?.type === \"SOLVE_AND_ANSWER\" || msg?.type === \"SOLVE_EQUATION\" || msg?.type === \"ANSWER_QUESTION\") startSnip(\"solve\");\n        if (msg?.type === \"WRITE_CODE\") startSnip(\"code\");\n        if (msg?.type === \"EXTRACT_CSS\") startSnip(\"css\");\n        if (msg?.type === \"CUSTOM_INSTRUCTION\" && msg?.instructionId) startSnip(\"custom\", msg.instructionId, msg.label);\n    });\n};\n\n// ---------------------------------------------------------------------------\n// CRX messaging handlers (progress/error feedback)\n// ---------------------------------------------------------------------------\n\nif (isInCrx) {\n    registerCrxHandler(\"processingStarted\", () => showToast(`Starting ${MODE_META[currentMode].name}...`));\n    registerCrxHandler(\"processingError\", (data: any) => showToast(`Processing failed: ${data.error}`, \"error\"));\n    registerCrxHandler(\"processingProgress\", (data: any) => {\n        if (data.progress > 0 && data.progress < 100) showToast(`${MODE_META[currentMode].name}: ${data.progress}%`);\n    });\n    registerCrxHandler(\"processingComplete\", () => { /* handled by main response */ });\n}\n\n// ---------------------------------------------------------------------------\n// Init\n// ---------------------------------------------------------------------------\n\ninitSnip();\n","/**\n * CrossWord ‚Äî Content Script Entry\n *\n * Injected into every page at document_start.\n * Handles:\n *  - Overlay + toast initialization\n *  - Copy-as-* operations (LaTeX, MathML, Markdown, HTML)\n *  - Snip & recognize (rect selection ‚Üí capture ‚Üí AI)\n *  - Rect-selector global registration\n *  - CRX result pipeline delivery (notifications)\n *  - Coordinate / element tracking for context-menu operations\n */\n\nimport { showToast, initOverlay } from \"@rs-frontend/main/overlay\";\nimport { initToastReceiver } from \"@rs-frontend/items/Toast\";\nimport { initClipboardReceiver } from \"@rs-core/modules/Clipboard\";\nimport { copyAsHTML, copyAsMathML, copyAsMarkdown, copyAsTeX } from \"@rs-core/document/Conversion\";\n\n// Content-script modules\nimport \"./copy\";           // COPY_HACK handler\nimport \"./rect-selector\";  // global crxSnipSelectRect\nimport \"./snip\";           // START_SNIP / SOLVE_AND_ANSWER / WRITE_CODE / EXTRACT_CSS / CUSTOM_INSTRUCTION\n\n// ---------------------------------------------------------------------------\n// Init overlay & broadcast receivers\n// ---------------------------------------------------------------------------\n\ninitOverlay();\nconst cleanupToast = initToastReceiver();\nconst cleanupClipboard = initClipboardReceiver();\n\nif (typeof window !== \"undefined\") {\n    window.addEventListener(\"pagehide\", () => { cleanupToast?.(); cleanupClipboard?.(); }, { once: true });\n}\n\n// ---------------------------------------------------------------------------\n// Coordinate / element tracking (for context-menu hit-testing)\n// ---------------------------------------------------------------------------\n\nconst coordinate: [number, number] = [0, 0];\nlet lastElement: HTMLElement | null = null;\n\nconst savePosition = (e: PointerEvent | MouseEvent) => {\n    coordinate[0] = e.clientX;\n    coordinate[1] = e.clientY;\n    lastElement = e.target as HTMLElement | null;\n};\n\ndocument.addEventListener(\"pointerdown\", savePosition, { passive: true, capture: true });\ndocument.addEventListener(\"pointerup\", savePosition, { passive: true, capture: true });\ndocument.addEventListener(\"click\", savePosition as EventListener, { passive: true, capture: true });\ndocument.addEventListener(\"contextmenu\", (e) => {\n    savePosition(e);\n    lastElement = (e.target as HTMLElement) || lastElement;\n}, { passive: true, capture: true });\n\n// ---------------------------------------------------------------------------\n// Copy-as-* operations (context menu ‚Üí content script)\n// ---------------------------------------------------------------------------\n\nconst copyOps = new Map<string, (el: HTMLElement) => unknown>([\n    [\"copy-as-latex\", copyAsTeX],\n    [\"copy-as-mathml\", copyAsMathML],\n    [\"copy-as-markdown\", copyAsMarkdown],\n    [\"copy-as-html\", copyAsHTML],\n]);\n\nchrome.runtime.onMessage.addListener((msg, _sender, sendResponse) => {\n    // Selection query\n    if (msg?.type === \"highlight-selection\") {\n        sendResponse({ selection: window.getSelection?.()?.toString?.() ?? \"\" });\n        return true;\n    }\n\n    // Copy-as-* operations\n    if (typeof msg?.type === \"string\" && copyOps.has(msg.type)) {\n        (async () => {\n            const op = copyOps.get(msg.type)!;\n            const target =\n                lastElement ||\n                (document.elementFromPoint(coordinate[0], coordinate[1]) as HTMLElement | null) ||\n                document.body;\n\n            try {\n                const mayTranslate = msg.type === \"copy-as-markdown\" || msg.type === \"copy-as-html\";\n                if (mayTranslate) showToast(\"Processing...\");\n                await op(target);\n                showToast(\"Copied\");\n                sendResponse({ ok: true });\n            } catch (e) {\n                console.warn(\"[Content] Copy operation failed:\", e);\n                showToast(\"Failed to copy\");\n                sendResponse({ ok: false });\n            }\n        })();\n        return true;\n    }\n\n    return false;\n});\n\n// ---------------------------------------------------------------------------\n// Rect-selector for CRX-Snip (triggered by popup)\n// ---------------------------------------------------------------------------\n\nchrome.runtime.onMessage.addListener((msg, _sender, sendResponse) => {\n    if (msg?.type !== \"crx-snip-select-rect\") return false;\n\n    (async () => {\n        try {\n            if (!window.crxSnipSelectRect) await new Promise((r) => setTimeout(r, 100));\n            if (!window.crxSnipSelectRect) throw new Error(\"Rect selector not available\");\n            sendResponse({ rect: await window.crxSnipSelectRect() });\n        } catch (e) {\n            sendResponse({ rect: null, error: e instanceof Error ? e.message : String(e) });\n        }\n    })();\n    return true;\n});\n\n// ---------------------------------------------------------------------------\n// CRX result pipeline delivery (page notifications)\n// ---------------------------------------------------------------------------\n\nconst showPageNotification = (message: string, type: \"success\" | \"error\" | \"info\" = \"info\") => {\n    try {\n        document.querySelectorAll(\".crossword-crx-notification\").forEach((el) => el.remove());\n\n        const colors = { success: \"#10b981\", error: \"#ef4444\", info: \"#3b82f6\" };\n        const icons = { success: \"‚úÖ\", error: \"‚ùå\", info: \"‚ÑπÔ∏è\" };\n\n        const el = document.createElement(\"div\");\n        el.className = \"crossword-crx-notification\";\n        Object.assign(el.style, {\n            position: \"fixed\", top: \"20px\", right: \"20px\",\n            backgroundColor: colors[type], color: \"white\",\n            padding: \"16px 20px\", borderRadius: \"8px\",\n            fontSize: \"14px\", fontFamily: \"system-ui, sans-serif\", fontWeight: \"500\",\n            boxShadow: \"0 8px 32px rgba(0,0,0,0.2)\", zIndex: \"2147483647\",\n            maxWidth: \"450px\", wordWrap: \"break-word\",\n            opacity: \"0\", transform: \"translateY(-20px) scale(0.95)\",\n            transition: \"all 0.4s cubic-bezier(0.34,1.56,0.64,1)\",\n            border: \"1px solid rgba(255,255,255,0.2)\", backdropFilter: \"blur(10px)\",\n            cursor: \"pointer\",\n        });\n        el.innerHTML = `<div style=\"display:flex;align-items:center;gap:12px\"><span style=\"font-size:18px\">${icons[type]}</span><div style=\"flex:1;line-height:1.4\">${message}</div></div>`;\n        el.addEventListener(\"click\", () => { el.style.opacity = \"0\"; el.style.transform = \"translateY(-20px) scale(0.95)\"; setTimeout(() => el.remove(), 400); });\n\n        (document.body || document.documentElement).appendChild(el);\n        requestAnimationFrame(() => { el.style.opacity = \"1\"; el.style.transform = \"translateY(0) scale(1)\"; });\n        setTimeout(() => { el.style.opacity = \"0\"; el.style.transform = \"translateY(-20px) scale(0.95)\"; setTimeout(() => el.remove(), 400); }, 5000);\n    } catch {\n        if (\"Notification\" in window && Notification.permission === \"granted\") {\n            new Notification(\"CrossWord\", { body: message, icon: chrome.runtime.getURL(\"icons/icon.png\") });\n        }\n    }\n};\n\n// BroadcastChannel listener\nconst resultBC = new BroadcastChannel(\"rs-content-script\");\nresultBC.onmessage = ({ data }) => {\n    if (data?.type === \"crx-result-delivered\" && data.result?.type === \"processed\" && typeof data.result.content === \"string\") {\n        const preview = data.result.content.length > 60 ? data.result.content.slice(0, 60) + \"...\" : data.result.content;\n        showPageNotification(`üìã Copied to clipboard!\\n${preview}`, \"success\");\n    }\n};\n\n// chrome.runtime listener (SW ‚Üí content script)\nchrome.runtime.onMessage.addListener((msg) => {\n    if (msg?.type === \"crx-result-delivered\" && msg.result?.type === \"processed\" && typeof msg.result.content === \"string\") {\n        const preview = msg.result.content.length > 60 ? msg.result.content.slice(0, 60) + \"...\" : msg.result.content;\n        showPageNotification(`üìã Copied to clipboard!\\n${preview}`, \"success\");\n    }\n});\n"],"names":["overlay","box","hint","sizeBadge","toastShow","el"],"mappings":"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"}