{"version":3,"mappings":"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","names":["ROOT","setIdleInterval","onBorderObserve","onContentObserve","html","isValidParent","passiveOpts","ctx","observeContentBox","cb","observer","attribute","camelToKebab","rules","rule","styles","kebabToCamel","$behavior","unwrap","skip","$triggerLock","ref","obj","value","old","self","a_tmp","b_tmp","store","prop","toRef","deref","elMap","$set","state","fields","name","array","selected","asArray","theirParent","isWeakCompatible","isObservable","attr","el","initialized","hash","ClosePriority","options","element","ctl","dragging","clamp","rect","I","visibleRef","OPFSWorker","rootHandle","cleanPath","entries","entry","blobToText","mimeType","isBase64","blob","newItem","n","color","updateResult","allRefs","target","splitPath","joinPath","toWrite","rs"],"ignoreList":[84],"sources":["../../../../modules/projects/dom.ts/src/agate/Properties.ts","../../../../modules/projects/dom.ts/src/agate/Detect.ts","../../../../modules/projects/dom.ts/src/agate/Utils.ts","../../../../modules/projects/dom.ts/src/agate/Zoom.ts","../../../../modules/projects/dom.ts/src/agate/Viewport.ts","../../../../modules/projects/dom.ts/src/agate/Measure.ts","../../../../modules/projects/dom.ts/src/decor/Animation.ts","../../../../modules/projects/dom.ts/src/mixin/Observer.ts","../../../../modules/projects/dom.ts/src/decor/Appear.ts","../../../../modules/projects/dom.ts/src/decor/Canvas.ts","../../../../modules/projects/dom.ts/src/decor/Shape.ts","../../../../modules/projects/dom.ts/src/mixin/Style.ts","../../../../modules/projects/dom.ts/src/mixin/Behavior.ts","../../../../modules/projects/dom.ts/src/mixin/Store.ts","../../../../modules/projects/dom.ts/src/mixin/Mixins.ts","../../../../modules/projects/dom.ts/src/mixin/Handler.ts","../../../../modules/projects/object.ts/src/wrap/Symbol.ts","../../../../modules/projects/object.ts/src/wrap/Utils.ts","../../../../modules/projects/object.ts/src/wrap/AssignObject.ts","../../../../modules/projects/object.ts/src/core/Subscript.ts","../../../../modules/projects/object.ts/src/core/Specific.ts","../../../../modules/projects/object.ts/src/core/Primitives.ts","../../../../modules/projects/object.ts/src/core/Mainline.ts","../../../../modules/projects/object.ts/src/core/Assigned.ts","../../../../modules/projects/lur.e/src/extension/css-ref/Utils.ts","../../../../modules/projects/lur.e/src/extension/css-ref/CSSAnchor.ts","../../../../modules/projects/lur.e/src/extension/css-ref/CSSTimeline.ts","../../../../modules/projects/lur.e/src/extension/css-ref/CSSAnimated.ts","../../../../modules/projects/lur.e/src/lure/core/Binding.ts","../../../../modules/projects/lur.e/src/lure/node/Queried.ts","../../../../modules/projects/lur.e/src/lure/context/Reflect.ts","../../../../modules/projects/lur.e/src/lure/context/ReflectChildren.ts","../../../../modules/projects/lur.e/src/lure/node/Changeable.ts","../../../../modules/projects/lur.e/src/lure/context/Utils.ts","../../../../modules/projects/lur.e/src/lure/node/Mapped.ts","../../../../modules/projects/lur.e/src/lure/node/Bindings.ts","../../../../modules/projects/lur.e/src/lure/node/Normalizer.ts","../../../../modules/projects/lur.e/src/lure/node/Syntax.ts","../../../../modules/projects/lur.e/src/lure/node/Switched.ts","../../../../modules/projects/lur.e/src/lure/node/JSX.ts","../../../../modules/projects/lur.e/src/lure/core/Control.ts","../../../../modules/projects/lur.e/src/extension/tasking/History.ts","../../../../modules/projects/lur.e/src/extension/tasking/BackNavigation.ts","../../../../modules/projects/lur.e/src/lure/core/Links.ts","../../../../modules/projects/lur.e/src/lure/core/Refs.ts","../../../../modules/projects/lur.e/src/lure/misc/Glit.ts","../../../../modules/projects/lur.e/src/lure/misc/Styles.ts","../../../../modules/projects/lur.e/src/extension/tasking/Manager.ts","../../../../modules/projects/lur.e/src/extension/tasking/Tasks.ts","../../../../modules/projects/lur.e/src/extension/controllers/LazyEvents.ts","../../../../modules/projects/lur.e/src/extension/controllers/Trigger.ts","../../../../modules/projects/lur.e/src/extension/controllers/PointerAPI.ts","../../../../modules/projects/lur.e/src/extension/controllers/Draggable.ts","../../../../modules/projects/lur.e/src/extension/controllers/Resizable.ts","../../../../modules/projects/lur.e/src/extension/controllers/Selection.ts","../../../../modules/projects/lur.e/src/extension/controllers/LongHover.ts","../../../../modules/projects/lur.e/src/extension/controllers/LongPress.ts","../../../../modules/projects/lur.e/src/extension/controllers/Swipe.ts","../../../../modules/projects/lur.e/src/extension/controllers/Handler.ts","../../../../modules/projects/lur.e/src/extension/space-ref/BBoxAnchor.ts","../../../../modules/projects/lur.e/src/extension/space-ref/IntersectionAnchor.ts","../../../../modules/projects/lur.e/src/extension/overlay/AnchorOverlay.ts","../../../../modules/projects/lur.e/src/extension/overlay/Register.ts","../../../../modules/projects/lur.e/src/extension/interact/CtxMenu.ts","../../../../modules/projects/lur.e/src/extension/interact/InputExt.ts","../../../../modules/projects/lur.e/src/extension/interact/Clipboard.ts","../../../../modules/projects/lur.e/src/extension/core/OPFS.ts","../../../../modules/projects/lur.e/src/extension/core/Status.ts","../../../../modules/projects/lur.e/src/extension/core/Renderer.ts","../../../../modules/projects/lur.e/src/extension/core/Base64Data.ts","../../../../modules/projects/lur.e/src/layout/grid/Interact.ts","../../../../modules/projects/lur.e/src/layout/grid/GridBox.ts","../../../../modules/projects/lur.e/src/layout/orient/OrientBox.ts","../../../../modules/projects/lur.e/src/extension/color/DynamicEngine.ts","../../../../modules/projects/lur.e/src/extension/color/StyleRules.ts","../../../../modules/projects/lur.e/src/extension/color/ThemeEngine.ts","../../../../modules/projects/lur.e/src/extension/space-ref/PointerAnchor.ts","../../../../modules/projects/lur.e/src/math/Point2D.ts","../../../../modules/projects/lur.e/src/math/Point3D.ts","../../../../modules/projects/lur.e/src/math/Point4D.ts","../../../../modules/projects/lur.e/src/math/Operations.ts","../../../../modules/projects/lur.e/src/math/GridMath.ts","../../../../modules/projects/lur.e/src/extension/css-ref/CSSAdapter.ts","../../../../modules/projects/lur.e/test/integration-examples.ts","../../../../node_modules/jsox/lib/jsox.mjs","../../src/com/config/SettingsTypes.ts","../../src/core/storage/WriteFileSmart-v2.ts","../../src/com/config/Settings.ts"],"sourcesContent":["[   // @ts-ignore\n    { name: \"--screen-width\", syntax: \"<length-percentage>\", inherits: true, initialValue: \"0px\" },\n    { name: \"--screen-height\", syntax: \"<length-percentage>\", inherits: true, initialValue: \"0px\" },\n    { name: \"--visual-width\", syntax: \"<length-percentage>\", inherits: true, initialValue: \"0px\" },\n    { name: \"--visual-height\", syntax: \"<length-percentage>\", inherits: true, initialValue: \"0px\" },\n    { name: \"--clip-ampl\", syntax: \"<number>\", inherits: true, initialValue: \"0\" },\n    { name: \"--clip-freq\", syntax: \"<number>\", inherits: true, initialValue: \"0\" },\n    { name: \"--avail-width\", syntax: \"<length-percentage>\", inherits: true, initialValue: \"0px\" },\n    { name: \"--avail-height\", syntax: \"<length-percentage>\", inherits: true, initialValue: \"0px\" },\n    { name: \"--pixel-ratio\", syntax: \"<number>\", inherits: true, initialValue: \"1\" },\n    { name: \"--percent\", syntax: \"<number>\", inherits: true, initialValue: \"0\" },\n    { name: \"--percent-x\", syntax: \"<number>\", inherits: true, initialValue: \"0\" },\n    { name: \"--percent-y\", syntax: \"<number>\", inherits: true, initialValue: \"0\" },\n    { name: \"--scroll-left\", syntax: \"<number>\", inherits: true, initialValue: \"0\" },\n    { name: \"--scroll-top\", syntax: \"<number>\", inherits: true, initialValue: \"0\" },\n    { name: \"--drag-x\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--drag-y\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--resize-x\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--resize-y\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--shift-x\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--shift-y\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cs-grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cs-grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cs-p-grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cs-p-grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--os-grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--os-grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--rv-grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--rv-grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cell-x\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cell-y\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n].forEach((options: any) => {\n    if (typeof CSS != \"undefined\") {\n        try { CSS?.registerProperty?.(options); } catch (e) { console.warn(e); }\n    }\n});\n\n//\nexport const __exportProperties = ()=>{\n\n}\n","//\nexport const isMobile = ()=>{\n    // @ts-ignore\n    let check = navigator?.userAgentData?.mobile || false; // @ts-ignore\n    ((a) => {if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||globalThis.opera);\n    return check;\n\n    //\n    const f1 = matchMedia(\"(hover: none) and (pointer: coarse) and (display-mode: fullscreen)\").matches;\n    const f2 = 'ontouchstart' in window || 'onmsgesturechange' in window;\n    return f1 && f2;\n};\n\n//\nexport const detectMobile = () => {\n    //\n    const toMatch = [\n        /Android/i,\n        /webOS/i,\n        /iPhone/i,\n        /iPad/i,\n        /iPod/i,\n        /BlackBerry/i,\n        /Windows Phone/i\n    ];\n    return toMatch.some(navigator.userAgent.match.bind(navigator.userAgent)) && (navigator.maxTouchPoints || 'ontouchstart' in document.documentElement) && globalThis.matchMedia(\"(pointer: coarse)\").matches;\n};\n","import { isArrayOrIterable } from \"fest/core\";\n\n//\nexport const getOffsetParent = (element: Element): Element | null => { return (element as HTMLElement)?.offsetParent ?? (element as any)?.host; }\nexport const getOffsetParentChain = (element: Element): Element[] => {\n    const parents: Element[] = []; let current: Element | null = element;\n    while (current) {\n        const parent = getOffsetParent(current);\n        if (parent && (parent instanceof HTMLHtmlElement)) { break; }\n        if (current = parent) { parents.push(current); }\n    }\n    return parents;\n}\n\n//\nexport const isNearlyIdentity = (matrix: DOMMatrix, epsilon: number = 1e-6): boolean => {\n    return (\n        Math.abs(matrix.a - 1) < epsilon &&\n        Math.abs(matrix.b) < epsilon &&\n        Math.abs(matrix.c) < epsilon &&\n        Math.abs(matrix.d - 1) < epsilon &&\n        Math.abs(matrix.e) < epsilon &&\n        Math.abs(matrix.f) < epsilon\n    );\n}\n\n//\nexport const makeRAFCycle = () => {\n    const control: any = {\n        canceled: false,\n        rAFs: new Set<any>(),\n        last: null,\n        cancel() { this.canceled = true; cancelAnimationFrame(this.last); return this; },\n        shedule(cb: any) { this.rAFs.add(cb); return this; }\n    };\n    (async () => {\n        while (!control?.canceled) { // @ts-ignore\n            await Promise.all((control?.rAFs?.values?.() ?? [])?.map?.((rAF) => Promise.try(rAF)?.catch?.(console.warn.bind(console)))); control.rAFs?.clear?.();\n            if (typeof requestAnimationFrame != \"undefined\") {\n                await new Promise((res) => { control.last = requestAnimationFrame(res); });\n            } else {\n                await new Promise((res) => { setTimeout(res, 16); });\n            }\n        }\n    })();\n    return control;\n};\n\n//\nexport const RAFBehavior = (shed = makeRAFCycle()) => {\n    return (cb)=>shed.shedule(cb);\n}\n\n//\nexport interface InteractStatus { pointerId?: number; };\nexport const ROOT = typeof document != \"undefined\" ? document?.documentElement : null;\nexport const setAttributesIfNull = (element, attrs = {})=>{\n    if (!attrs || (typeof attrs != \"object\") || !element) return;\n    return Array.from(Object.entries(attrs)).map(([name, value])=>{\n        const old = element.getAttribute(name);\n        if (value == null) {\n            element.removeAttribute(name);\n        } else\n        if (value != old) {\n            element.setAttribute(name, old == \"\" ? (value ?? old) : (old ?? value));\n        }\n    });\n}\n\n//\nexport const setAttributes = (element, attrs = {})=>{\n    return Array.from(Object.entries(attrs)).map(([name, value])=>{\n        if (value == null) {\n            element.removeAttribute(name);\n        } else {\n            element.setAttribute(name, value ?? element.getAttribute(name));\n        }\n    });\n}\n\n//\nexport const throttleMap = new Map<string, any>();\nexport const setIdleInterval = (cb, timeout = 1000, ...args)=>{\n    const status = { running: true, cancel: ()=>{ status.running = false; } };\n    requestIdleCallback(async ()=>{\n        if (!cb || (typeof cb != \"function\")) return;\n        while (status.running) {\n            await Promise.all([ // @ts-ignore\n                Promise.try(cb, ...args),\n                new Promise((r)=>setTimeout(r, timeout))\n            ]).catch?.(console.warn.bind(console));\n\n            //\n            await Promise.any([\n                new Promise((r)=>requestIdleCallback(r, { timeout })),\n                new Promise((r)=>setTimeout(r, timeout))\n                //new Promise((r)=>requestAnimationFrame(r))\n            ]);\n        }\n        status.cancel = ()=>{};\n    }, {timeout});\n    return status?.cancel;\n}\n\n//\nif (typeof requestAnimationFrame != \"undefined\") {\n    requestAnimationFrame(async () => {\n        while (true) {\n            throttleMap.forEach((cb) => cb?.());\n            await new Promise((r) => requestAnimationFrame(r));\n        }\n    });\n}\n\n//\nexport const borderBoxWidth   = Symbol(\"@border-box-width\") , borderBoxHeight  = Symbol(\"@border-box-height\");\nexport const contentBoxWidth  = Symbol(\"@content-box-width\"), contentBoxHeight = Symbol(\"@content-box-height\");\nexport const onBorderObserve  = new WeakMap<HTMLElement, ResizeObserver>();\nexport const onContentObserve = new WeakMap<HTMLElement, ResizeObserver>();\nexport const doContentObserve = (element, cb: any = ()=>{}) => {\n    if (!(element instanceof HTMLElement)) return;\n    if (!onContentObserve.has(element)) {\n        element[contentBoxWidth]  = (element.clientWidth );\n        element[contentBoxHeight] = (element.clientHeight);\n\n        //\n        const observer = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                if (entry.contentBoxSize) {\n                    const contentBoxSize = entry.contentBoxSize[0];\n                    if (contentBoxSize) {\n                        element[contentBoxWidth]  = Math.min(contentBoxSize.inlineSize, element.clientWidth);\n                        element[contentBoxHeight] = Math.min(contentBoxSize.blockSize, element.clientHeight);\n                        cb?.(element);\n                    }\n                }\n            }\n        });\n\n        //\n        onContentObserve.set(element, observer);\n        observer.observe((element as any)?.element ?? element, {box: \"content-box\"});\n    }\n};\n\n//\nexport const doBorderObserve = (element, cb: any = ()=>{}) => {\n    if (!(element instanceof HTMLElement)) return;\n    if (!onBorderObserve.has(element)) {\n        element[borderBoxWidth]  = element.offsetWidth;\n        element[borderBoxHeight] = element.offsetHeight;\n        const observer = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                if (entry.borderBoxSize) {\n                    const borderBoxSize = entry.borderBoxSize[0];\n                    if (borderBoxSize) {\n                        element[borderBoxWidth]  = Math.min(borderBoxSize.inlineSize, element.offsetWidth);\n                        element[borderBoxHeight] = Math.min(borderBoxSize.blockSize, element.offsetHeight);\n                        cb?.(element);\n                    }\n                }\n            }\n        });\n\n        //\n        onBorderObserve.set(element, observer);\n        observer.observe((element as any)?.element ?? element, {box: \"border-box\"});\n    }\n}\n\n//\nexport const url  = (type: string, ...source: any[]) => { return URL.createObjectURL(new Blob(source, {type})); };\nexport const html = (source: string, type: DOMParserSupportedType = 'text/html') => {\n    const parsed  = (new DOMParser()).parseFromString(source, type);\n    return parsed.querySelector('template') ?? parsed.querySelector(\"*\");\n};\n\n//\nexport const setChecked = (input: HTMLInputElement, value: boolean, ev?: any)=>{\n    if (value != null && input.checked != value) {\n        if (\n            (input?.['type'] == \"checkbox\") ||\n            (input?.['type'] == \"radio\" && !input?.checked)\n        ) { input?.click?.(); ev?.preventDefault?.(); } else {\n            input.checked = !!value;\n            input?.dispatchEvent?.(new Event(\"change\", { bubbles: true, cancelable: true, }));\n        }\n    }\n}\n\n\n\n//\nexport const isValidParent = (parent: Node | null) => {\n    return (parent != null && parent instanceof HTMLElement && !(parent instanceof DocumentFragment || parent instanceof HTMLBodyElement)) ? parent : null;\n}\n\n//\nexport const indexOf = (element: Node | null, node: Node | null) => {\n    if (element == null || node == null) return -1;\n    return Array.from(element?.childNodes ?? [])?.indexOf?.((node as ChildNode)) ?? -1;\n}\n\n//\nexport const\n    MATCH = '(-?[_a-zA-Z]+[_a-zA-Z0-9-]*)',\n    REGEX = '^(?:' + MATCH + ')|^#' + MATCH + '|^\\\\.' + MATCH + '|^\\\\[' + MATCH + '(?:([*$|~^]?=)([\"\\'])((?:(?=(\\\\\\\\?))\\\\8.)*?)\\\\6)?\\\\]';\n\n//\nexport const createElementVanilla = (selector): HTMLElement | DocumentFragment => {\n    if (selector == \":fragment:\") return document.createDocumentFragment();\n    const create = document.createElement.bind(document);\n    for (var node: any = create('div'), match, className = ''; selector && (match = selector.match(REGEX));) {\n        if (match[1]) node = create(match[1]);\n        if (match[2]) node.id = match[2];\n        if (match[3]) className += ' ' + match[3];\n        if (match[4]) node.setAttribute(match[4], match[7] || '');\n        selector = selector.slice(match[0].length);\n    }\n    if (className) node.className = className.slice(1);\n    return node;\n};\n\n//\nexport const isElement = (el: any) => { return el != null && (el instanceof Node || el instanceof Text || el instanceof Element || el instanceof Comment || el instanceof HTMLElement || el instanceof DocumentFragment) ? el : null; }\nexport const includeSelf = (target: HTMLElement, selector: string) => { return (target.querySelector(selector) ?? (target.matches(selector) ? target : null)); }\nexport const hasParent = (current: any, parent: any) => { while (current) { if (!(current?.element ?? current)) { return false; }; if ((current?.element ?? current) === (parent?.element ?? parent)) return true; current = current.parentElement ?? (current.parentNode == current?.getRootNode?.({ composed: true }) ? current?.getRootNode?.({ composed: true })?.host : current?.parentNode); } }\nexport const passiveOpts = {};\n\n//\nexport function addEvent(target, type, cb, opts: any = passiveOpts): any {\n    target?.addEventListener?.(type, cb, opts);\n    const wr = (typeof target == \"object\" || typeof target == \"function\" && !target?.deref) ? new WeakRef(target) : target;\n    return () => wr?.deref?.()?.removeEventListener?.(type, cb, opts);\n    //return () => target?.removeEventListener?.(type, cb, opts);\n}\n\n//\nexport function removeEvent(target, type, cb, opts: any = passiveOpts): any {\n    target?.removeEventListener?.(type, cb, opts);\n}\n\n// add events by map of [name, cb] in 'handlers'\n// where cb is Function or [Function, options]\nexport const addEvents = (root, handlers) => {\n    root = (root instanceof WeakRef ? root.deref() : root); // @ts-ignore\n    return [...Object.entries(handlers)]?.map?.(([name, cb]) => (Array.isArray(cb) ? addEvent(root, name, ...cb as any) : addEvent(root, name, cb)));\n}\n\n// add events by map of [name, cbs[]] in 'events'\n// where cb of cbs[] is Function or [Function, options]\n// however, [Function, options] not implemented yet\nexport const addEventsList = (el, events) => {\n    if (events) {\n        let entries: any[] = events;\n        if (events instanceof Map) {\n            entries = [...events.entries()];\n        } else {\n            entries = [...Object.entries(events)];\n        }\n        return entries.map(([name, list]) => ((isArrayOrIterable(list) ? [...list as any] : list) ?? [])?.map?.((cbs)=>{\n            return addEvent(el, name, cbs)\n        }));\n    }\n}\n\n//\nexport const removeEvents = (root, handlers) => {\n    root = (root instanceof WeakRef ? root.deref() : root); // @ts-ignore\n    return [...Object.entries(handlers)]?.map?.(([name, cb]) => (Array.isArray(cb) ? removeEvent(root, name, ...cb as any) : removeEvent(root, name, cb)));\n}\n\n//\n// Get the actual target element from an event, considering shadow DOM boundaries\nexport const getEventTarget = (ev: Event | any): HTMLElement | Element | null => {\n    if (!ev) return null;\n\n    // Use composedPath() for shadow DOM compatibility\n    if (ev?.composedPath && typeof ev.composedPath === 'function') {\n        const path = ev.composedPath();\n        // Return the first element in the path (the actual target)\n        for (const node of path) {\n            if (node instanceof HTMLElement || node instanceof Element) {\n                return node as HTMLElement;\n            }\n        }\n    }\n\n    // Fallback to target property\n    const target = ev?.target;\n    if (target instanceof HTMLElement || target instanceof Element) {\n        return target;\n    }\n\n    return null;\n};\n\n//\nexport const containsOrSelf = (a: any, b: any, ev?: Event)=>{\n    if (b == null || !(b instanceof Node) && b?.element == null) return false; // if isn't node with element or just null\n    if ((a == b)  || (a?.element ?? a) == (b?.element ?? b)) return true; // wrapper or element is same\n\n    // Use composedPath() for shadow DOM compatibility if event is provided\n    if (ev?.composedPath && typeof ev.composedPath === 'function') {\n        const path = ev.composedPath();\n        const aEl = a?.element ?? a;\n        const bEl = b?.element ?? b;\n        if (path.includes(aEl) && path.includes(bEl)) {\n            // Check if b appears before a in the path (b is deeper/child of a)\n            const aIndex = path.indexOf(aEl);\n            const bIndex = path.indexOf(bEl);\n            if (bIndex >= 0 && aIndex >= 0 && bIndex < aIndex) return true;\n        }\n    }\n\n    if (a?.contains?.(b?.element ?? b) || a?.getRootNode({ composed: true })?.host == (b?.element ?? b)) return true; // a contains b element\n    return false;\n}\n\n// get by selector self or parent, matches by selector, include shadow DOM host\nexport const MOCElement = (element: HTMLElement | null, selector: string, ev?: Event): HTMLElement | null => {\n    // Use composedPath() for shadow DOM compatibility if event is provided\n    if (ev?.composedPath && typeof ev.composedPath === 'function') {\n        const path = ev.composedPath();\n        // Search through the composed path for matching elements\n        for (const node of path) {\n            if (node instanceof HTMLElement || node instanceof Element) {\n                if ((node as HTMLElement).matches?.(selector)) {\n                    return node as HTMLElement;\n                }\n            }\n        }\n    }\n\n    const self = (element?.matches?.(selector) ? element : null);\n    const host = (element?.getRootNode({ composed: true }) as any ?? element?.parentElement?.getRootNode({ composed: true}) as any)?.host;\n    const hostMatched = host?.matches?.(selector) ? host : null;\n    const closest = (element as any)?.closest?.(selector) ?? (self as any)?.closest?.(selector) ?? (hostMatched as any)?.closest?.(selector) ?? null;\n    return (self ?? closest ?? hostMatched);\n};\n\n//\nexport const MOC = (element: HTMLElement | null, selector: string): boolean => { return !!MOCElement(element, selector); };\n\n//\nexport const isInFocus = (element: HTMLElement | null, selectorOrElement?: string | HTMLElement, dir: \"parent\" | \"child\" = \"parent\"): boolean => {\n    if (!element) return false;\n\n    // Visibility Check (if supported, otherwise basic offsetParent)\n    // @ts-ignore\n    if (element.checkVisibility && !element.checkVisibility({ checkOpacity: true, checkVisibilityCSS: true })) return false;\n    // @ts-ignore\n    if (!element.checkVisibility && element.offsetParent === null && element.style.position !== 'fixed') return false;\n\n    // Deep Active Element Resolution\n    let active = document.activeElement;\n    while (active && active.shadowRoot && active.shadowRoot.activeElement) {\n        active = active.shadowRoot.activeElement;\n    }\n\n    // Interaction Status\n    const isFocused = (active === element) || hasParent(active, element);\n    const isHovered = element.matches(\":hover\");\n\n    // Top-most check for hover (optional, but requested \"elementFromPoint\")\n    // Only worth checking if hovered but not focused, to see if it's occluded?\n    // Skipping expensive rect calc for now unless strictly needed, :hover is usually reliable for CSS pointer-events.\n\n    if (!isFocused && !isHovered && !selectorOrElement) return false;\n\n    // Constraints\n    if (selectorOrElement) {\n        if (typeof selectorOrElement === \"string\") {\n            if (dir === \"parent\") {\n                // Does the element (or its context) match the selector?\n                return !!MOCElement(element, selectorOrElement);\n            } else {\n                // Does the interaction target inside match the selector?\n                const target = isFocused ? active : (element.querySelector(\":hover\") || element);\n                const altCnd = !!MOCElement(target as HTMLElement, selectorOrElement);\n                return (element?.querySelector?.(selectorOrElement) != null || element?.matches?.(selectorOrElement) || altCnd);\n            }\n        } else if (selectorOrElement instanceof HTMLElement) {\n             if (dir === \"parent\") {\n                 return hasParent(element, selectorOrElement) || false;\n             } else {\n                 return hasParent(selectorOrElement, element) || false;\n             }\n        }\n    }\n\n    return true;\n}\n","import { cvt_cs_to_os } from \"fest/core\";\nimport { borderBoxHeight, borderBoxWidth, contentBoxHeight, contentBoxWidth } from \"./Utils\";\n\n//\nexport const getZoom = ()=>{\n    const zoomSupport = \"currentCSSZoom\" in document.documentElement;\n    // @ts-ignore\n    if (zoomSupport) { return ((document.documentElement.currentCSSZoom as number) || 1); }\n    return parseFloat(document.documentElement.style.getPropertyValue(\"--scaling\") || \"1\") || 1;\n}\n\n//\nconst zoomValues = new WeakMap<HTMLElement, number>();\n\n//\nexport const zoomOf = (element = document.documentElement) => {\n    // @ts-ignore\n    return zoomValues.getOrInsertComputed(element, ()=>{\n        // getting zoom performance broken...\n        const container: any = ((element?.matches?.(\".ui-orientbox\") ? element : null) || element?.closest?.(\".ui-orientbox\") || document.body) as HTMLElement;\n\n        // get software zoom value\n        if (container?.zoom) {\n            return (container?.zoom || 1);\n        }\n\n        // get and cache zoom value\n        // @ts-ignore\n        if (element?.currentCSSZoom) {\n            // @ts-ignore\n            return element?.currentCSSZoom || 1;\n        }\n    });\n}\n\n//\nexport const changeZoom = (scale = 1) => {\n    document.documentElement.style.setProperty(\"--scaling\", scale as unknown as string);\n    document.documentElement.dispatchEvent(new CustomEvent(\"scaling\", {\n        detail: {zoom: scale},\n        bubbles: true,\n        cancelable: true\n    }));\n    return scale;\n}\n\n//\nexport const fixedClientZoom = (element = document.documentElement)=>{\n    // @ts-ignore\n    return ((element?.currentCSSZoom != null ? 1 : zoomOf(element))) || 1;\n}\n\n//\nexport const unfixedClientZoom = (element = document.documentElement)=>{\n    // @ts-ignore\n    return ((element?.currentCSSZoom == null ? 1 : element?.currentCSSZoom)) || 1;\n}\n\n//\nexport const orientOf = (element = document.documentElement) => {\n    // legacy browser\n    const container: any = ((element?.matches?.(\"[orient], [data-mixin=\\\"ui-orientbox\\\"]\") ? element : null) || element?.closest?.(\"[orient], [data-mixin=\\\"ui-orientbox\\\"]\") || element);\n    if (container?.hasAttribute?.(\"orient\")) { return parseInt(container?.getAttribute?.(\"orient\") || \"0\") || 0; };\n    return (container?.orient || 0);\n}\n\n//\nexport const getBoundingOrientRect = (element, orient: number|null|undefined = null)=>{\n    const zoom = unfixedClientZoom(element) || 1;\n    const box = element?.getBoundingClientRect?.();\n    const nbx = {\n        left: box?.left / zoom,\n        right: box?.right / zoom,\n        top: box?.top / zoom,\n        bottom: box?.bottom / zoom,\n        width: box?.width / zoom,\n        height: box?.height / zoom,\n    };\n\n    //\n    const or_i: number = orient ?? (orientOf(element) || 0);\n    const size: [number, number] = [document.body.clientWidth / zoom, document.body.clientHeight / zoom];\n    const [left_, top_] = cvt_cs_to_os([nbx.left, nbx.top], size, or_i);\n    const [right_, bottom_] = cvt_cs_to_os([nbx.right, nbx.bottom], size, or_i);\n\n    //\n    const [left, right] = (or_i==0 || or_i==3) ? [left_, right_] : [right_, left_];\n    const [top, bottom] = (or_i==0 || or_i==1) ? [top_, bottom_] : [bottom_, top_];\n\n    //\n    const [width, height] = (or_i%2) ? [nbx.height, nbx.width] : [nbx.width, nbx.height];\n    return { left, top, right, bottom, width, height };\n}\n\n//\nexport const bbw    = (el, orient = null)=> ((orient??orientOf(el))%2 ? (el[borderBoxHeight] ?? el?.clientHeight) : (el[borderBoxWidth] ?? el?.clientWidth));\nexport const bbh    = (el, orient = null)=> ((orient??orientOf(el))%2 ? (el[borderBoxWidth] ?? el?.clientWidth) : (el[borderBoxHeight] ?? el?.clientHeight));\nexport const cbw    = (el, orient = null)=> ((orient??orientOf(el))%2 ? (el[contentBoxHeight] ?? el?.clientHeight) : (el[contentBoxWidth] ?? el?.clientWidth));\nexport const cbh    = (el, orient = null)=> ((orient??orientOf(el))%2 ? (el[contentBoxWidth] ?? el?.clientWidth) : (el[contentBoxHeight] ?? el?.clientHeight));\n","import type { StyleTuple } from \"../mixin/Style\";\nimport { addEvent } from \"./Utils\";\n\n//\nexport const getAvailSize = () => {\n    const l = typeof matchMedia != \"undefined\" ? matchMedia(\"(orientation: landscape)\")?.matches : false;\n    if (typeof screen != \"undefined\") {\n        const aw = screen?.availWidth + \"px\";\n        const ah = screen?.availHeight + \"px\";\n        return {\n            \"--screen-width\": Math.min(screen?.width, screen?.availWidth) + \"px\",\n            \"--screen-height\": Math.min(screen?.height, screen?.availHeight) + \"px\",\n            \"--avail-width\": l ? ah : aw,\n            \"--avail-height\": l ? aw : ah,\n            \"--view-height\": (Math.min(screen?.availHeight, window?.innerHeight) + \"px\"),\n            \"--pixel-ratio\": devicePixelRatio || 1,\n        };\n    };\n    return {\n        \"--screen-width\": 0 + \"px\",\n        \"--screen-height\": 0 + \"px\",\n        \"--avail-width\": 0 + \"px\",\n        \"--avail-height\": 0 + \"px\",\n        \"--view-height\": 0 + \"px\",\n        \"--pixel-ratio\": 1,\n    };\n}\n\n//\nexport const availSize = getAvailSize();\nexport const classes: StyleTuple[] = [ [\":root, :host, :scope\", availSize] ];\nexport const orientationNumberMap = {\n    \"portrait-primary\": 0, // as 0deg, aka. 360deg\n    \"landscape-primary\": 1, // as -90deg, aka. 270deg\n    \"portrait-secondary\": 2, // as -180deg, aka. 180deg\n    \"landscape-secondary\": 3 // as -270deg, aka. 90deg\n}\n\n//\nexport const updateVP = (ev?: any)=>{\n    const rule = document.documentElement;\n    Object.assign(availSize, getAvailSize());\n    Object.entries(availSize).forEach(([propName, propValue]) => {\n        const exists = rule?.style?.getPropertyValue(propName);\n        if (!exists || exists != propValue) {\n            rule?.style?.setProperty?.(propName, (propValue || \"\") as string, \"\");\n        }\n    });\n\n    // make secondary screen orientation detectable\n    document.documentElement.style.setProperty(\"--orientation-secondary\", screen?.orientation?.type?.endsWith?.(\"secondary\") ? \"1\" : \"0\");\n}\n\n//\nexport const getCorrectOrientation = () => {\n    let orientationType: string = screen.orientation.type;\n    if (!globalThis.matchMedia(\"((display-mode: fullscreen) or (display-mode: standalone) or (display-mode: window-controls-overlay))\").matches) {\n        if (matchMedia(\"(orientation: portrait)\").matches) {orientationType = orientationType.replace(\"landscape\", \"portrait\");} else\n            if (matchMedia(\"(orientation: landscape)\").matches) {orientationType = orientationType.replace(\"portrait\", \"landscape\");};\n    }\n    return orientationType;\n};\n\n//\nconst passiveOpts = { passive: true };\n\n//\nexport const whenAnyScreenChanges = (cb) => {\n    let ticking = false;\n    const update = () => {\n        if (!ticking) {\n            requestAnimationFrame(() => {\n                cb();\n                ticking = false;\n            });\n            ticking = true;\n        }\n    };\n\n    const unsubscribers: any[] = [];\n\n    // @ts-ignore\n    unsubscribers.push(addEvent(navigator?.virtualKeyboard, \"geometrychange\", update, passiveOpts));\n    unsubscribers.push(addEvent(window?.visualViewport, \"scroll\", update, passiveOpts));\n    unsubscribers.push(addEvent(window?.visualViewport, \"resize\", update, passiveOpts));\n    unsubscribers.push(addEvent(screen?.orientation, \"change\", update));\n    unsubscribers.push(addEvent(window, \"resize\", update));\n    unsubscribers.push(addEvent(document?.documentElement, \"fullscreenchange\", update));\n    unsubscribers.push(addEvent(document, \"DOMContentLoaded\", update));\n    unsubscribers.push(addEvent(matchMedia(\"(orientation: portrait)\"), \"change\", update));\n\n    //\n    update();\n    requestIdleCallback(update, { timeout: 100 });\n    return () => unsubscribers.forEach((unsub) => unsub());\n};\n\n//\nexport const fixOrientToScreen = (element)=>{\n    if (!element?.classList?.contains?.(\"native-portrait-optimized\")) {\n        element?.classList?.add?.(\"native-portrait-optimized\");\n        return whenAnyScreenChanges(()=>{\n            element.orient = orientationNumberMap?.[getCorrectOrientation()] || 0;\n        });\n    }\n}\n","import { unfixedClientZoom } from \"./Zoom\";\n\n//\nconst canvas = new OffscreenCanvas(1, 1);\nconst ctx = canvas.getContext(\"2d\");\n\n//\nexport const initTextStyle = (element, ctx)=>{\n    const style = getComputedStyle(element, \"\");\n\n    //\n    if (ctx && style) {\n        const fontWeight  = (style.getPropertyValue('font-weight')  || 'normal');\n        const fontSize    = (style.getPropertyValue('font-size')    || '16px');\n        const fontFamily  = (style.getPropertyValue('font-family')  || 'Times New Roman');\n        const fontStretch = (style.getPropertyValue('font-stretch') || 'normal') as CanvasFontStretch;\n\n        //\n        try { ctx.fontStretch     = fontStretch.includes(\"%\") ? \"normal\" : fontStretch; } catch(e) {};\n        try { ctx.letterSpacing   = (style.getPropertyValue('letter-spacing') || 'normal'); } catch(e) {};\n        try { ctx.fontKerning     = (style.getPropertyValue('font-kerning') || 'auto') as CanvasFontKerning; } catch(e) {};\n        try { ctx.fontVariantCaps = (style.getPropertyValue('font-variant-caps') || 'normal') as CanvasFontVariantCaps; } catch(e) {};\n        try { ctx.font = `${fontWeight} ${fontSize} ${fontFamily}`; } catch(e) {};\n    }\n}\n\n//\nexport const measureText = (text, element)=>{\n    if (ctx) {\n        initTextStyle(element, ctx);\n        try { return ctx.measureText(text); } catch(e) {};\n    }\n    return { width: null };\n}\n\n//\nexport const measureInputInFocus = (input: HTMLInputElement)=>{\n    const text = input.value.slice(0, input.selectionEnd || 0);\n    return measureText(text, input);\n}\n\n// important: point WITHOUT padding!\nexport const computeCaretPosition = (input: HTMLInputElement, point: [number, number])=>{\n    const text  = input?.value || \"\";\n    if (ctx) {\n        initTextStyle(input, ctx);\n        let currentWidth = 0;\n        for (let i=0;i<text.length;i++) {\n            currentWidth = ctx.measureText(text.slice(0, i))?.width;\n            if (currentWidth == null) { return text.length; };\n            if (currentWidth != null && currentWidth >= point[0]) { return Math.max(i-1, 0); };\n        }\n    }\n    return text.length;\n}\n\n//\nexport const computeCaretPositionFromClient = (input: HTMLInputElement, client: [number, number])=>{\n    const box = input.getBoundingClientRect();\n    const point: [number, number] = [client[0] - box.left / unfixedClientZoom(), client[1] - box.top / unfixedClientZoom()];\n    return computeCaretPosition(input, point);\n}\n","import { setProperty } from \"../mixin/Style\";\nimport { isMobile } from \"../agate/Detect\";\nimport { addEvents } from \"../agate/Utils\";\n\n//\nexport const animateShow = async (target)=>{\n    //\n    const animationDone = ()=>{\n        if (!target?.hasAttribute?.(\"data-hidden\")) {\n            target?.removeAttribute?.(\"data-opacity-animation\");\n            target?.dispatchEvent?.(new CustomEvent(\"u2-appear\", {\n                detail: {},\n                bubbles: true,\n                cancelable: true\n            }));\n        }\n    }\n\n    //\n    if (!target?.hasAttribute?.(\"data-hidden\") && target?.dispatchEvent?.(new CustomEvent(\"u2-before-show\", {\n        detail: {},\n        bubbles: true,\n        cancelable: true\n    }))) {\n        //\n        if (!matchMedia(\"(prefers-reduced-motion: reduce)\").matches && !target.hasAttribute(\"data-opacity-animation\") && !target.hasAttribute(\"data-instant\") && target?.getAttribute?.(\"data-hidden\") == null) {\n            target.setAttribute(\"data-opacity-animation\", \"\");\n        }\n\n        //\n        if (target.hasAttribute(\"data-opacity-animation\") && target?.getAttribute?.(\"data-hidden\") == null) {\n            const animate = target.animate([\n                {\n                    easing: \"linear\",\n                    offset: 0,\n\n                    //\n                    \"--opacity\": 0,\n                    \"--scale\": 0.8,\n                    display: \"none\",\n                    pointerEvents: \"none\"\n                },\n                {\n                    easing: \"linear\",\n                    offset: 0.01,\n\n                    //\n                    \"--opacity\": 0,\n                    \"--scale\": 0.8,\n                    display: \"none\",\n                    pointerEvents: \"none\"\n                },\n                {\n                    easing: \"linear\",\n                    offset: 1,\n\n                    //\n                    \"--opacity\": 1,\n                    \"--scale\": 1,\n                    display: \"revert-layer\",\n                    pointerEvents: \"revert-layer\"\n                }\n            ], {\n                //fill: \"forwards\",\n                duration: isMobile() ? 100 : 80,\n                easing: \"linear\",\n                delay: 0\n                //rangeStart: \"cover 0%\",\n                //rangeEnd: \"cover 100%\",\n            });\n\n            //\n            let done = false;\n            const endAnimation = ()=> {\n                if (done) { return; }; done = true;\n                events?.forEach?.((event)=>event?.());\n                animate.currentTime = 1;\n                animate.finish();\n                animationDone?.();\n            };\n\n            //\n            const abth = [endAnimation, {once: true, passive: true}];\n            const abts = [endAnimation, {once: true, passive: true}];\n\n            //\n            const events = addEvents(target, {\n                \"u2-before-hide\": abth,\n                \"u2-before-show\": abts\n            });\n\n            //\n            await animate.finished;\n            endAnimation?.();\n        } else {\n            // @ts-ignore\n            const {resolve, reject, promise} = Promise.withResolvers();\n            const req = requestAnimationFrame(resolve);\n\n            //\n            let done = false;\n            const endAnimation = ()=> {\n                if (done) { return; }; done = true;\n                events?.forEach?.((event)=>event?.());\n                cancelAnimationFrame(req);\n                resolve(performance.now());\n                animationDone?.();\n            }\n\n            //\n            const abth = [endAnimation, {once: true, passive: true}];\n            const abts = [endAnimation, {once: true, passive: true}];\n            const events = addEvents(target, {\n                \"u2-before-hide\": abth,\n                \"u2-before-show\": abts\n            });\n\n            //\n            await promise;\n            endAnimation?.();\n        }\n    }\n}\n\n\n//\nexport const animateHide = async (target)=>{\n    //\n    const animationDone = ()=>{\n        if (target?.hasAttribute?.(\"data-hidden\")) {\n            target?.removeAttribute?.(\"data-opacity-animation\");\n            target?.dispatchEvent?.(new CustomEvent(\"u2-hidden\", {\n                detail: {},\n                bubbles: true,\n                cancelable: true\n            }));\n        }\n    }\n\n    //\n    if (target?.hasAttribute?.(\"data-hidden\") && target?.dispatchEvent?.(new CustomEvent(\"u2-before-hide\", {\n        detail: {},\n        bubbles: true,\n        cancelable: true\n    }))) {\n        if (!matchMedia(\"(prefers-reduced-motion: reduce)\").matches && !target.hasAttribute(\"data-opacity-animation\") && !target.hasAttribute(\"data-instant\")) {\n            target.setAttribute(\"data-opacity-animation\", \"\");\n        }\n\n        //\n        if (target.hasAttribute(\"data-opacity-animation\")) {\n            const animate = target.animate([\n                {\n                    easing: \"linear\",\n                    offset: 0,\n\n                    //\n                    //\"--opacity\": 1,\n                    //\"--scale\": 1,\n                    //display: \"revert-layer\",\n                    pointerEvents: \"none\"\n                },\n                {\n                    easing: \"linear\",\n                    offset: 0.99,\n\n                    //\n                    \"--opacity\": 0,\n                    \"--scale\": 0.8,\n                    //display: \"revert-layer\",\n                    pointerEvents: \"none\"\n                },\n                {\n                    easing: \"linear\",\n                    offset: 1,\n\n                    //\n                    \"--opacity\": 0,\n                    \"--scale\": 0.8,\n                    display: \"none\",\n                    pointerEvents: \"none\"\n                }\n            ],  {\n                //fill: \"forwards\",\n                duration: 120,\n                easing: \"linear\",\n                delay: 0\n                //rangeStart: \"cover 0%\",\n                //rangeEnd: \"cover 100%\",\n            });\n\n            //\n            let done = false;\n            const endAnimation = ()=> {\n                if (done) { return; }; done = true;\n                events?.forEach?.((event)=>event?.());\n                animate.currentTime = 1;\n                animate.finish();\n                animationDone?.();\n            };\n\n            //\n            const abth = [endAnimation, {once: true, passive: true}];\n            const abts = [endAnimation, {once: true, passive: true}];\n            const events = addEvents(target, {\n                \"u2-before-show\": abts,\n                //\"u2-before-hide\": abth\n            });\n\n            //\n            await animate.finished;\n            endAnimation?.();\n        } else {\n            // @ts-ignore\n            const {resolve, reject, promise} = Promise.withResolvers();\n            const req = requestAnimationFrame(resolve);\n\n            //\n            let done = false;\n            const endAnimation = ()=> {\n                if (done) { return; }; done = true;\n                events?.forEach?.((event)=>event?.());\n                cancelAnimationFrame(req);\n                resolve(performance.now());\n                animationDone?.();\n            };\n\n            //\n            const abth = [endAnimation, {once: true, passive: true}];\n            const abts = [endAnimation, {once: true, passive: true}];\n            const events = addEvents(target, { \"u2-before-hide\": abth, \"u2-before-show\": abts });\n\n            //\n            await promise;\n            endAnimation?.();\n        }\n    }\n}\n","const onBorderObserve = new WeakMap<HTMLElement, Function[]>(), onContentObserve = new WeakMap<HTMLElement, Function[]>();\nconst unwrapFromQuery = (element: any) => { if (typeof element?.current == \"object\") { element = element?.element ?? element?.current ?? (typeof element?.self == \"object\" ? element?.self : null) ?? element; }; return element; }\n\n// TODO: support of fragments\nexport const observeContentBox = (element, cb) => {\n    if (!onContentObserve.has(element = unwrapFromQuery(element))) {\n        const callbacks: Function[] = [];\n        const observer = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                if (entry.contentBoxSize) {\n                    const contentBoxSize = entry.contentBoxSize[0];\n                    if (contentBoxSize) {\n                        callbacks.forEach((cb) => cb?.(contentBoxSize, observer));\n                    }\n                }\n            }\n        });\n\n        //\n        cb?.({\n            inlineSize: element.clientWidth/* - (getPxValue(element, \"padding-left\") + getPxValue(element, \"padding-right\"))*/,\n            blockSize: element.clientHeight/* - (getPxValue(element, \"padding-top\") + getPxValue(element, \"padding-bottom\"))*/,\n        }, observer);\n\n        //\n        onContentObserve.set(element, callbacks);\n        if ((element?.element ?? element) instanceof Node) {\n            observer.observe(element?.element ?? element, {box: \"content-box\"});\n        }\n    }\n\n    //\n    onContentObserve.get(element)?.push?.(cb);\n    return { disconnect: ()=>(onContentObserve.get(element)?.splice?.(onContentObserve.get(element)?.indexOf(cb) || -1, 1)) };\n};\n\n// TODO: support of fragments\nexport const observeBorderBox = (element, cb) => {\n    if (!onBorderObserve.has(element = unwrapFromQuery(element))) {\n        const callbacks: Function[] = [];\n        const observer = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                if (entry.borderBoxSize) {\n                    const borderBoxSize = entry.borderBoxSize[0];\n                    if (borderBoxSize) {\n                        callbacks.forEach((cb) => cb?.(borderBoxSize, observer));\n                    }\n                }\n            }\n        });\n\n        //\n        cb?.({\n            inlineSize: element.offsetWidth,\n            blockSize: element.offsetHeight,\n        }, observer);\n\n        //\n        onBorderObserve.set(element, callbacks);\n        if ((element?.element ?? element) instanceof Node) {\n            observer.observe(element?.element ?? element, {box: \"border-box\"});\n        }\n    }\n\n    //\n    onBorderObserve.get(element)?.push?.(cb);\n    return { disconnect: ()=>(onBorderObserve.get(element)?.splice?.(onBorderObserve.get(element)?.indexOf(cb) || -1, 1)) };\n}\n\n/*\n    const config = {\n        attributeFilter: [attribute],\n        attributeOldValue: true,\n        attributes: true,\n        childList: false,\n        subtree: false,\n    };\n*/\n\n//\nexport const observeAttribute = (element, attribute, cb) => {\n    if (typeof element?.selector == \"string\") { return observeAttributeBySelector(element, element?.selector, attribute, cb); };\n\n    //\n    const attributeList = new Set<string>((attribute.split(\",\") || [attribute]).map((s) => s.trim()));\n    const observer = new MutationObserver((mutationList, observer) => {\n        for (const mutation of mutationList) {\n            if (mutation.attributeName && attributeList.has(mutation.attributeName))\n                { cb(mutation, observer); }\n        }\n    });\n\n    //\n    if ((element?.element ?? element) instanceof Node) {\n        observer.observe(element = unwrapFromQuery(element), { attributes: true, attributeOldValue: true, attributeFilter: [...attributeList] });\n    }\n    attributeList.forEach((attribute)=>cb({ target: element, type: \"attributes\", attributeName: attribute, oldValue: (element as HTMLElement)?.getAttribute?.(attribute) }, observer));\n    return observer;\n};\n\n//\nexport const observeAttributeBySelector = (element, selector, attribute, cb) => {\n    const attributeList = new Set<string>([...(attribute.split(\",\") || [attribute])].map((s) => s.trim()));\n    const observer = new MutationObserver((mutationList, observer) => {\n        for (const mutation of mutationList) {\n            if (mutation.type == \"childList\") {\n                const addedNodes   = Array.from(mutation.addedNodes)   || [];\n                const removedNodes = Array.from(mutation.removedNodes) || [];\n\n                //\n                addedNodes.push(...Array.from(mutation.addedNodes || []).flatMap((el)=>Array.from((el as HTMLElement)?.querySelectorAll?.(selector) || []) as Element[]));\n                removedNodes.push(...Array.from(mutation.removedNodes || []).flatMap((el)=>Array.from((el as HTMLElement)?.querySelectorAll?.(selector) || []) as Element[]));\n\n                //\n                [...new Set(addedNodes)]?.filter((el: any)=>el?.matches?.(selector))?.map?.((target)=>{\n                    attributeList.forEach((attribute)=>{\n                        cb({ target, type: \"attributes\", attributeName: attribute, oldValue: (target as HTMLElement)?.getAttribute?.(attribute) }, observer);\n                    });\n                });\n            } else\n            if ((mutation.target as HTMLElement)?.matches?.(selector) && (mutation.attributeName && attributeList.has(mutation.attributeName))) {\n                cb(mutation, observer);\n            }\n        }\n    });\n\n    //\n    observer.observe(element = unwrapFromQuery(element), {\n        attributeOldValue: true,\n        attributes: true,\n        attributeFilter: [...attributeList],\n        childList: true,\n        subtree: true,\n        characterData: true\n    });\n\n    //\n    [...element.querySelectorAll(selector)].map((target)=>attributeList.forEach((attribute)=>cb({ target, type: \"attributes\", attributeName: attribute, oldValue: (target as HTMLElement)?.getAttribute?.(attribute) }, observer)));\n    return observer;\n};\n\n//\nexport const observeBySelector = (element, selector = \"*\", cb = (mut, obs)=>{}) => {\n    const unwrapNodesBySelector = (nodes: NodeListOf<Element>): Element[]=>{\n        const $nodes = Array.from(nodes || []) || [];\n        $nodes.push(...Array.from(nodes || []).flatMap((el)=> Array.from((el as HTMLElement)?.querySelectorAll?.(selector) || []) as Element[]));\n        return [...Array.from((new Set($nodes)).values())].filter((el) => (<HTMLElement>el)?.matches?.(selector));\n    }\n\n    //\n    const handleMutation = (mutation)=>{\n        const observer      = obRef?.deref?.();\n        const addedNodes   = unwrapNodesBySelector(mutation.addedNodes);\n        const removedNodes = unwrapNodesBySelector(mutation.removedNodes);\n\n        //\n        if (addedNodes.length > 0 || removedNodes.length > 0) {\n            cb?.({\n                type: mutation.type,\n                target: mutation.target,\n                attributeName: mutation.attributeName,\n                attributeNamespace: mutation.attributeNamespace,\n                nextSibling: mutation.nextSibling,\n                oldValue: mutation.oldValue,\n                previousSibling: mutation.previousSibling,\n                addedNodes, removedNodes,\n            }, observer);\n        }\n    }\n\n    //\n    const handleCome = (ev)=>{\n        handleMutation({\n            addedNodes: [ev?.target].filter((el)=>!!el),\n            removedNodes: [ev?.relatedTarget].filter((el)=>!!el),\n            type: \"childList\",\n            target: ev?.currentTarget,\n        });\n    }\n\n    //\n    const handleOutCome = (ev)=>{\n        handleMutation({\n            addedNodes: [ev?.relatedTarget].filter((el)=>!!el),\n            removedNodes: [ev?.target].filter((el)=>!!el),\n            type: \"childList\",\n            target: ev?.currentTarget,\n        });\n    }\n\n    //\n    const handleFocusClick = (ev)=>{\n        handleMutation({\n            addedNodes: [ev?.target].filter((el)=>!!el),\n            removedNodes: [ev?.relatedTarget || document?.activeElement].filter((el)=>!!el),\n            type: \"childList\",\n            target: ev?.currentTarget,\n        });\n    }\n\n    // capture: false - from parents to children, true - from children to parents\n    // passive: true - optimal for selector events\n    const factors = {\n        passive: true,\n        capture: false,\n    };\n\n    //\n    if (selector?.includes?.(\":hover\") && selector?.includes?.(\":active\")) {\n        element.addEventListener(\"pointerover\", handleCome, factors);\n        element.addEventListener(\"pointerout\", handleOutCome, factors);\n        element.addEventListener(\"pointerdown\", handleCome, factors);\n        element.addEventListener(\"pointerup\", handleOutCome, factors);\n        element.addEventListener(\"pointercancel\", handleOutCome, factors);\n        return { disconnect: ()=>{\n            element.removeEventListener(\"pointerover\", handleCome, factors);\n            element.removeEventListener(\"pointerout\", handleOutCome, factors);\n            element.removeEventListener(\"pointerdown\", handleCome, factors);\n            element.removeEventListener(\"pointerup\", handleOutCome, factors);\n            element.removeEventListener(\"pointercancel\", handleOutCome, factors);\n        } };\n    }\n\n    //\n    if (selector?.includes?.(\":hover\")) {\n        element.addEventListener(\"pointerover\", handleCome, factors);\n        element.addEventListener(\"pointerout\", handleOutCome, factors);\n        return { disconnect: ()=>{\n            element.removeEventListener(\"pointerover\", handleCome, factors);\n            element.removeEventListener(\"pointerout\", handleOutCome, factors);\n        } };\n    }\n\n    //\n    if (selector?.includes?.(\":active\")) {\n        element.addEventListener(\"pointerdown\", handleCome, factors);\n        element.addEventListener(\"pointerup\", handleOutCome, factors);\n        element.addEventListener(\"pointercancel\", handleOutCome, factors);\n        return { disconnect: ()=>{\n            element.removeEventListener(\"pointerdown\", handleCome, factors);\n            element.removeEventListener(\"pointerup\", handleOutCome, factors);\n            element.removeEventListener(\"pointercancel\", handleOutCome, factors);\n        } };\n    }\n\n    //\n    if (selector?.includes?.(\":focus\") && selector?.includes?.(\":focus-within\") && selector?.includes?.(\":focus-visible\")) {\n        element.addEventListener(\"focusin\", handleCome, factors);\n        element.addEventListener(\"focusout\", handleOutCome, factors);\n        element.addEventListener(\"click\", handleFocusClick, factors);\n        return { disconnect: ()=>{\n            element.removeEventListener(\"focusin\", handleCome, factors);\n            element.removeEventListener(\"focusout\", handleOutCome, factors);\n            element.removeEventListener(\"click\", handleFocusClick, factors);\n        } };\n    }\n\n    //\n    const observer = new MutationObserver((mutationList, observer) => {\n        for (const mutation of mutationList) {\n            if (mutation.type == \"childList\") {\n                handleMutation(mutation);\n            }\n        }\n    });\n\n    //\n    const obRef = new WeakRef(observer);\n    if ((element?.element ?? element) instanceof Node) {\n        observer.observe(element = unwrapFromQuery(element), { childList: true, subtree : true });\n    }\n    const selected = Array.from(element.querySelectorAll(selector));\n    if (selected.length > 0) { cb?.({ addedNodes: selected }, observer); };\n    return observer;\n};\n","import { observeAttributeBySelector } from \"../mixin/Observer\";\nimport { animateShow, animateHide } from \"./Animation\";\n\n//\nexport const initVisibility = async (ROOT: any = document.body)=>{\n    observeAttributeBySelector(ROOT, \"*\", \"data-hidden\", (mutation, observer)=>{\n        if (mutation.attributeName == 'data-hidden') {\n            const target = mutation.target as HTMLElement;\n\n            // TODO? legacy \"false\" support\n            if (target.getAttribute(\"data-hidden\") !== mutation.oldValue) {\n                // @ts-ignore\n                Promise?.try?.(target.getAttribute(\"data-hidden\") != null ? animateHide : animateShow, target, observer)?.catch?.(console.warn.bind(console));\n            }\n        }\n    });\n}\n\n//\nexport default initVisibility;\n","import { makeRAFCycle } from \"../agate/Utils\";\n\n//\nconst blobImageMap = new WeakMap(), delayed = new Map<number, Function | null>([]);\nconst sheduler = makeRAFCycle();\n\n//\nconst getImgWidth = (img)=>{\n    return img?.naturalWidth || img?.width || 1;\n}\n\n//\nconst getImgHeight = (img)=>{\n    return img?.naturalHeight || img?.height || 1;\n}\n\n//\nexport const callByFrame = (pointerId, cb)=>{ delayed.set(pointerId, cb); }\nexport const cover = (ctx, img, scale = 1, port, orient = 0) => {\n    const canvas = ctx.canvas;\n    ctx.translate(canvas.width / 2, canvas.height / 2);\n    ctx.rotate((-orient || 0) * (Math.PI * 0.5));\n    ctx.rotate((1 - port) * (Math.PI / 2));\n    ctx.translate(-(getImgWidth(img) / 2) * scale, -(getImgHeight(img) / 2) * scale);\n};\n\n//\nexport const createImageBitmapCache = (blob)=>{\n    if (!blobImageMap.has(blob) && (blob instanceof Blob || blob instanceof File || blob instanceof OffscreenCanvas || blob instanceof ImageBitmap || blob instanceof Image)) {\n        blobImageMap.set(blob, createImageBitmap(blob));\n    }\n    return blobImageMap.get(blob);\n}\n\n//\nconst bindCache = new WeakMap();\nconst bindCached = (cb, ctx)=>{\n    // @ts-ignore\n    return bindCache?.getOrInsertComputed?.(cb, ()=> cb?.bind?.(ctx));\n}\n\n//\nlet UICanvas: any = null;\nif (typeof HTMLCanvasElement != \"undefined\") {\n    UICanvas = class UICanvas extends HTMLCanvasElement {\n        static observedAttributes = [\"data-src\", \"data-orient\"];\n\n        //\n        ctx: CanvasRenderingContext2D | null = null;\n        image: ImageBitmap | null = null;\n        #size: [number, number] = [1, 1];\n        #loading: string | Blob | File = \"\";\n        #ready: string | Blob | File = \"\";\n\n        //\n        get #orient() { return parseInt(this.getAttribute(\"data-orient\") || \"0\") || 0; }\n        set #orient(value: number) { this.setAttribute(\"data-orient\", value.toString()); }\n\n        //\n        attributeChangedCallback(name, _, newValue) {\n            if (name == \"data-src\") { this.#preload(newValue); };\n            if (name == \"data-orient\") { this.#render(this.#ready); };\n        }\n\n        //\n        connectedCallback() {\n            const parent: HTMLElement = this.parentNode as HTMLElement;\n            this.style.setProperty(\"max-inline-size\", \"min(100%, min(100cqi, 100dvi))\");\n            this.style.setProperty(\"max-block-size\", \"min(100%, min(100cqb, 100dvb))\");\n            this.#size = [ // @ts-ignore\n                Math.min(Math.min(Math.max(this.clientWidth || parent?.clientWidth || 1, 1), parent?.clientWidth || 1) * (this.currentCSSZoom || 1), screen?.width || 1) * (devicePixelRatio || 1), // @ts-ignore\n                Math.min(Math.min(Math.max(this.clientHeight || parent?.clientHeight || 1, 1), parent?.clientHeight || 1) * (this.currentCSSZoom || 1), screen?.height || 1) * (devicePixelRatio || 1)\n            ];\n            this.#preload(this.#loading = this.dataset.src || this.#loading);\n        }\n\n        //\n        constructor() {\n            super();\n\n            //\n            const canvas = this as HTMLCanvasElement;\n            const parent = this.parentNode as HTMLElement;\n\n            //\n            const fixSize = () => {\n                const old = this.#size;\n                this.#size = [ // @ts-ignore\n                    Math.min(Math.min(Math.max(this.clientWidth || parent?.clientWidth || 1, 1), parent?.clientWidth || 1) * (this.currentCSSZoom || 1), screen?.width || 1) * (devicePixelRatio || 1), // @ts-ignore\n                    Math.min(Math.min(Math.max(this.clientHeight || parent?.clientHeight || 1, 1), parent?.clientHeight || 1) * (this.currentCSSZoom || 1), screen?.height || 1) * (devicePixelRatio || 1)\n                ];\n\n                //\n                if (old?.[0] != this.#size[0] || old?.[1] != this.#size[1]) {\n                    this.#render(this.#ready);\n                }\n            }\n\n            //\n            sheduler?.shedule?.(() => {\n                this.ctx = canvas.getContext(\"2d\", {\n                    alpha: true,\n                    desynchronized: true,\n                    powerPreference: \"high-performance\",\n                    preserveDrawingBuffer: true\n                }) as CanvasRenderingContext2D;\n\n                //\n                this.inert = true;\n                this.style.objectFit = \"cover\";\n                this.style.objectPosition = \"center\";\n                this.classList.add(\"u-canvas\");\n                this.classList.add(\"u2-canvas\");\n                this.classList.add(\"ui-canvas\");\n\n                //\n                this.style.setProperty(\"max-inline-size\", \"min(100%, min(100cqi, 100dvi))\");\n                this.style.setProperty(\"max-block-size\", \"min(100%, min(100cqb, 100dvb))\");\n\n                //\n                fixSize();\n\n                //\n                new ResizeObserver((entries) => {\n                    for (const entry of entries) {\n                        const box = entry?.devicePixelContentBoxSize?.[0];\n                        if (box) {\n                            const old = this.#size;\n                            this.#size = [ // @ts-ignore\n                                Math.max(/*contentBox.inlineSize * devicePixelRatio*/box.inlineSize || this.width, 1),\n                                Math.max(/*contentBox.blockSize  * devicePixelRatio*/box.blockSize || this.height, 1)\n                            ];\n                            if (old?.[0] != this.#size[0] || old?.[1] != this.#size[1]) {\n                                this.#render(this.#ready);\n                            }\n                        }\n                    }\n                }).observe(this, { box: \"device-pixel-content-box\" });\n\n                //\n                this.#preload(this.#loading = this.dataset.src || this.#loading);\n            });\n        }\n\n        //\n        async $useImageAsSource(blob, ready?: any | null) {\n            ready ||= this.#loading;\n            const img = (blob instanceof ImageBitmap) ? blob : (await createImageBitmapCache(blob).catch(console.warn.bind(console)));\n            if (img && ready == this.#loading) { this.image = img; this.#render(ready); }\n            return blob;\n        }\n\n        //\n        $renderPass(whatIsReady?: File | Blob | string) {\n            const canvas = this, ctx = this.ctx, img = this.image;\n            if (img && ctx && (whatIsReady == this.#loading || !whatIsReady)) {\n                if (whatIsReady) { this.#ready = whatIsReady; };\n                if (this.width != this.#size[0]) { this.width = this.#size[0]; };\n                if (this.height != this.#size[1]) { this.height = this.#size[1]; };\n                this.style.aspectRatio = `${this.width || 1} / ${this.height || 1}`;\n                //this.style.containIntrinsicInlineSize = `${this.width  || 1}px`;\n                //this.style.containIntrinsicBlockSize  = `${this.height || 1}px`;\n\n                //\n                const ox = (this.#orient % 2) || 0;\n                const port = getImgWidth(img) <= getImgHeight(img) ? 1 : 0;\n                const scale = Math.max(\n                    canvas[[\"height\", \"width\"][ox]] / (port ? getImgHeight(img) : getImgWidth(img)),\n                    canvas[[\"width\", \"height\"][ox]] / (port ? getImgWidth(img) : getImgHeight(img))\n                );\n\n                //\n                ctx.save();\n                ctx.clearRect(0, 0, canvas.width, canvas.height); cover(ctx, img, scale, port, this.#orient);\n                ctx.drawImage(img, 0, 0, img.width * scale, img.height * scale);\n                ctx.restore();\n            }\n        }\n\n        //\n        #preload(src) {\n            const ready = src || this.#loading; this.#loading = ready; return fetch(src, {\n            cache: \"force-cache\",\n            mode: \"same-origin\",\n            priority: \"high\",\n        })?.then?.(async (rsp) => this.$useImageAsSource(await rsp.blob(), ready)?.catch(console.warn.bind(console)))?.catch?.(console.warn.bind(console)); }\n        #render(whatIsReady?: File | Blob | string) {\n            const ctx = this.ctx, img = this.image;\n            if (img && ctx && (whatIsReady == this.#loading || !whatIsReady)) { sheduler?.shedule?.(bindCached(this.$renderPass, this)); }\n        }\n    }\n} else {\n    UICanvas = class UICanvas {\n        constructor() { }\n        $renderPass(whatIsReady?: File | Blob | string) { }\n        $useImageAsSource(blob, ready?: any | null) { return blob; }\n        #preload(src) { return Promise.resolve(); }\n        #render(whatIsReady?: File | Blob | string) { }\n        #orient: number = 0;\n        #loading: string | Blob | File = \"\";\n        #ready: string | Blob | File = \"\";\n        #size: [number, number] = [1, 1];\n        ctx: CanvasRenderingContext2D | null = null;\n        image: ImageBitmap | null = null;\n    }\n}\n\n//\nexport { UICanvas };\nexport default UICanvas;\n\n//\ntry { customElements.define('ui-canvas', UICanvas, {extends: 'canvas'}); } catch(e) {};\n","// Currently, I'm using SASS version of such p.sheet\nexport const WavyShapedCircle = (steps = 100, amplitude = 0.05, freq = 8) => {\n    const points: number[] = []; for (let i = 0; i < steps; i++) { points.push(i / steps); }\n    const angle   = (step) => { return `calc(${step}rad * pi * 2)`; };\n    const variant = (step) => { return `calc(calc(cos(calc(var(--clip-freq, 8) * ${angle(step)})) * 0.5 + 0.5) * var(--clip-amplitude, 0))`; };\n    const func    = (step) => [\n        `calc(calc(0.5 + calc(cos(${angle(step)}) * calc(0.5 - ${variant(step)}))) * var(--icon-size. 100%))`,\n        `calc(calc(0.5 + calc(sin(${angle(step)}) * calc(0.5 - ${variant(step)}))) * var(--icon-size. 100%))`\n    ];\n    const d = points.map((step) => {const stp = func(step).join(\" \"); return stp;}).join(\", \");\n    return { \"--clip-amplitude\": amplitude, \"--clip-freq\": freq, \"--clip-path\": `polygon(${d})` };\n};\n","import { camelToKebab, hasValue, isValidNumber, tryStringAsNumber } from \"fest/core\";\n\n//\nconst OWNER = \"DOM\",\n    styleElement = typeof document != \"undefined\" ? document.createElement(\"style\") : null;\n\n//\nif (styleElement) {\n    typeof document != \"undefined\" ? document.querySelector(\"head\")?.appendChild?.(styleElement) : null; styleElement.dataset.owner = OWNER;\n}\n\n//\nexport type  StyleTuple    = [selector: string, sheet: object];\nexport const setStyleURL   = (base: [any, any], url: string, layer: string = \"\")=>{ base[0][base[1]] = (base[1] == \"innerHTML\") ? `@import url(\"${url}\") ${layer && (typeof layer == \"string\") ? `layer(${layer})` : \"\"};` : url; };\nexport const setStyleRules = (classes: StyleTuple[]) => { return classes?.map?.((args) => setStyleRule(...args)); };\nexport const getStyleLayer = (layerName, sheet?)=>{\n    sheet ||= styleElement?.sheet;\n\n    //    @layer\n    let layerRuleIndex = Array.from(sheet?.cssRules || []).findIndex((rule) => (rule instanceof CSSLayerBlockRule) && rule?.name === layerName);\n    let layerRule;\n\n    //   \n    if (layerRuleIndex === -1 && sheet)\n        { layerRule = sheet?.cssRules?.[layerRuleIndex = sheet.insertRule(`@layer ${layerName} {}`)]; } else\n        { layerRule = sheet?.cssRules?.[layerRuleIndex]; }\n\n    //\n    return layerRule;\n}\n\n//\nexport const getStyleRule = (selector, sheet?, layerName: string|null = \"ux-query\", basis: any = null) => {\n    const root = basis instanceof ShadowRoot ? basis : (basis?.getRootNode ? basis.getRootNode({ composed: true }) : typeof document != \"undefined\" ? document.documentElement : null);\n\n    // Making element defined for CSS query\n    const uqid = (root instanceof ShadowRoot || root instanceof HTMLDocument) ? \"\" : (basis?.getAttribute?.(\"data-style-id\") || (typeof crypto != \"undefined\" ? crypto?.randomUUID?.() : \"\"));\n    const usel = root instanceof HTMLDocument ? \":root\" : (root instanceof ShadowRoot ? \":host\" : `[data-style-id=\"${uqid}\"]`);\n    basis?.setAttribute?.(\"data-style-id\", uqid);\n\n    //\n    let $styleElement: any;// = styleElement;\n    if (root instanceof ShadowRoot) {\n        if (!($styleElement = root.querySelector('style'))) {\n            $styleElement = typeof document != \"undefined\" ? document.createElement('style[data-ux-query]') : null;\n            $styleElement.setAttribute('data-ux-query', '');\n            root.appendChild($styleElement);\n        }\n    } else { $styleElement = styleElement; }\n\n    //\n    sheet ||= $styleElement?.sheet || sheet;\n\n    //\n    if (!layerName) {\n        let ruleId = Array.from(sheet?.cssRules || []).findIndex((rule) => rule instanceof CSSStyleRule && rule.selectorText?.trim?.()?.endsWith?.(selector?.trim?.() ?? \"\"));\n        if (ruleId === -1 && sheet) { ruleId = sheet?.insertRule?.(`${usel || \"\"} ${selector}`?.trim?.() + \" {}\"); }\n        return sheet?.cssRules?.[ruleId];\n    }\n\n    //\n    return getStyleRule(selector, getStyleLayer(layerName, sheet), null, basis);\n};\n\n//\nconst hasTypedOM =\n    typeof CSSStyleValue !== \"undefined\" &&\n    typeof CSSUnitValue !== \"undefined\";\n\nconst isStyleValue = (val: any): val is CSSStyleValue =>\n    hasTypedOM && val instanceof CSSStyleValue;\n\nconst isUnitValue = (val: any): val is CSSUnitValue =>\n    hasTypedOM && val instanceof CSSUnitValue;\n\nconst setPropertyIfNotEqual = (\n    styleRef: CSSStyleDeclaration,\n    kebab: string,\n    value: string | null,\n    importance = \"\"\n) => {\n    if (!styleRef || !kebab) return;\n\n    if (value == null) {\n        if (styleRef.getPropertyValue(kebab) !== \"\") {\n        styleRef.removeProperty(kebab);\n        }\n        return;\n    }\n\n    const old = styleRef.getPropertyValue(kebab);\n    if (old !== value) {\n        styleRef.setProperty(kebab, value, importance);\n    }\n};\n\n//\nexport const setStylePropertyTyped = (\n    element?: HTMLElement | null,\n    name?: string,\n    value?: any,\n    importance = \"\"\n) => {\n    if (!element || !name) return element;\n\n    const kebab = camelToKebab(name);\n    const styleRef = element.style;\n    const styleMapRef: StylePropertyMap | undefined =\n        (element as any).attributeStyleMap ?? (element as any).styleMap;\n\n    //   Typed OM  styleMap     \n    if (!hasTypedOM || !styleMapRef) {\n        return setStylePropertyFallback(element, name, value, importance);\n    }\n\n    //  ref\n    let val: any = hasValue(value) && !(isStyleValue(value) || isUnitValue(value)) ? value?.value : value;\n\n    // null/undefined ->  \n    if (val == null) {\n        styleMapRef.delete?.(kebab);\n        //       style\n        if (styleRef) {\n            setPropertyIfNotEqual(styleRef, kebab, null, importance);\n        }\n        return element;\n    }\n\n    //  CSSStyleValue\n    if (isStyleValue(val)) {\n        const old = styleMapRef.get(kebab);\n        //   value/unit,    \n        if (isUnitValue(val) && isUnitValue(old)) {\n            if (old.value === val.value && old.unit === val.unit) {\n                return element; //  \n            }\n        } else if (old === val) {\n            return element; //   ,   \n        }\n        styleMapRef.set(kebab, val); //    \n        return element;\n    }\n\n    //  -> CSSUnitValue('number')   \n    if (typeof val === \"number\") {\n        //   :\n        // 1)  CSS.px / CSS.number,   Typed OM \n        // 2)   string,    CSSUnitValue  \n        //\n        //   CSS.number ( ):\n        if ((CSS as any)?.number && !kebab.startsWith(\"--\")) {\n            const newVal: CSSUnitValue = (CSS as any).number(val);\n            const old = styleMapRef.get(kebab);\n            if (isUnitValue(old) && old.value === newVal.value && old.unit === newVal.unit) {\n                return element;\n            }\n            styleMapRef.set(kebab, newVal);\n            return element;\n        } else {\n            // fallback   \n            setPropertyIfNotEqual(styleRef, kebab, String(val), importance);\n            return element;\n        }\n    }\n\n    //    :  Typed OM -> fallback  \n    if (typeof val === \"string\" && !isStyleValue(val)) {\n        const maybeNum = tryStringAsNumber(val);\n        if (typeof maybeNum === \"number\" && (CSS as any)?.number && !kebab.startsWith(\"--\")) {\n            const newVal: CSSUnitValue = (CSS as any).number(maybeNum);\n            const old = styleMapRef.get(kebab);\n            if (isUnitValue(old) && old.value === newVal.value && old.unit === newVal.unit) {\n                return element;\n            }\n            styleMapRef.set(kebab, newVal);\n            return element;\n        } else {\n            //   \n            setPropertyIfNotEqual(styleRef, kebab, val, importance);\n            return element;\n        }\n    }\n\n    //    -> \n    setPropertyIfNotEqual(styleRef, kebab, String(val), importance);\n    return element;\n};\n\n//\nexport const setStylePropertyFallback = (\n    element?: HTMLElement | null,\n    name?: string,\n    value?: any,\n    importance = \"\"\n) => {\n    if (!element || !name) return element;\n\n    const kebab = camelToKebab(name);\n    const styleRef = element.style;\n    if (!styleRef) return element;\n\n    //  ref,  \n    let val: any = (hasValue(value) && !(isStyleValue(value) || isUnitValue(value))) ? value?.value : value;\n\n    //    \n    if (typeof val === \"string\" && !isStyleValue(val)) {\n        val = tryStringAsNumber(val) ?? val;\n    }\n\n    // null/undefined  \n    if (val == null) {\n        setPropertyIfNotEqual(styleRef, kebab, null, importance);\n        return element;\n    }\n\n    // CSSStyleValue -> \n    if (isStyleValue(val)) {\n        setPropertyIfNotEqual(styleRef, kebab, String(val), importance);\n        return element;\n    }\n\n    //  ->  (     'px'   )\n    if (typeof val === \"number\") {\n        setPropertyIfNotEqual(styleRef, kebab, String(val), importance);\n        return element;\n    }\n\n    //   -> \n    setPropertyIfNotEqual(styleRef, kebab, String(val), importance);\n    return element;\n};\n\n//\nconst promiseOrDirect = (promise: any|Promise<any>, cb: (...args: any[]) => any) => {\n    if (typeof promise?.then == \"function\") { return promise?.then?.(cb); }\n    return cb(promise);\n}\n\n//\nconst blobURLMap = new WeakMap<Blob | File, string | Promise<string>>();\nconst cacheMap = new Map<string, string | Promise<string>>();\n\n//\nexport const fetchAndCache = (url: string | Blob | File): any => {\n    if (!url) return null;\n\n    //\n    if (cacheMap.has(url as string)) { return cacheMap.get(url as string); }\n\n    //\n    if (url instanceof Blob || (url as any) instanceof File) {\n        if (blobURLMap.has(url as Blob | File)) { return blobURLMap.get(url as Blob | File); }\n        const burl = URL.createObjectURL(url as Blob | File);\n        blobURLMap.set(url as Blob | File, burl);\n        cacheMap.set(burl as string, burl);\n        return burl;\n    }\n\n    //\n    if (URL.canParse(url as string) || url?.trim?.()?.startsWith?.(\"./\")) {\n        const promised = fetch(url?.replace?.(\"?url\", \"?raw\"), {\n            cache: \"force-cache\",\n            mode: \"same-origin\",\n            priority: \"high\",\n\n        })?.then?.(async (res: Response) => {\n            const blob = await res.blob();\n            const burl = URL.createObjectURL(blob);\n            blobURLMap.set(blob as Blob | File, burl);\n            cacheMap.set(url as string, burl);\n            cacheMap.set(burl as string, burl);\n            return burl;\n        });\n\n        //\n        cacheMap.set(url as string, promised as Promise<string>);\n        return promised;\n    }\n\n    //\n    if (typeof url == \"string\") {\n        const blob = new Blob([url], { type: \"text/css\" });\n        const burl = URL.createObjectURL(blob);\n        blobURLMap.set(blob as Blob | File, burl);\n        //cacheMap.set(url as string, burl);\n        cacheMap.set(burl as string, burl);\n        return burl;\n    }\n\n    //\n    return url as string;\n}\n\n//\nconst cacheContentMap = new Map<string, string | Promise<string>>();\nconst cacheBlobContentMap = new WeakMap<Blob | File, string | Promise<string>>();\nexport const fetchAsInline = (url: string | Blob | File): Promise<string>|string => {\n    if (!url) return \"\";\n\n    //\n    if (cacheContentMap.has(url as string)) { return cacheContentMap.get(url as string) ?? \"\"; }\n\n    //\n    if (url instanceof Blob || (url as any) instanceof File) {\n        if (cacheBlobContentMap.has(url as Blob | File)) { return cacheBlobContentMap.get(url as Blob | File) ?? \"\"; }\n\n        //\n        const promised = (url as any)?.text?.()?.then?.(text => {\n            cacheBlobContentMap.set(url as Blob | File, text);\n            return text;\n        });\n        cacheBlobContentMap.set(url as Blob | File, promised);\n        return promised;\n    }\n\n    //\n    if (URL.canParse(url as string) || url?.trim?.()?.startsWith?.(\"./\")) {\n        const promised = fetch(url?.replace?.(\"?url\", \"?raw\"), {\n            cache: \"force-cache\",\n            mode: \"same-origin\",\n            priority: \"high\",\n\n        })?.then?.(async (res: Response) => {\n            const text = await res.text();\n            cacheContentMap.set(url as string, text);\n            return text;\n        });\n        cacheContentMap.set(url as string, promised);\n        return promised;\n    }\n\n    //\n    if (typeof url == \"string\") {\n        cacheContentMap.set(url as string, url);\n        return url;\n    }\n\n    //\n    return url as string;\n}\n\n//\nconst adoptedSelectorMap = new Map<string, CSSStyleSheet>();\nconst adoptedShadowSelectorMap = new WeakMap<ShadowRoot, Map<string, CSSStyleSheet>>();\nconst adoptedLayerMap = new Map<string, CSSLayerBlockRule>();\nconst adoptedShadowLayerMap = new WeakMap<ShadowRoot, Map<string, CSSLayerBlockRule>>();\n\n//\nexport const getAdoptedStyleRule = (selector: string, layerName: string | null = \"ux-query\", basis: any = null) => {\n    if (!selector) return null;\n\n    const root = basis instanceof ShadowRoot ? basis : (basis?.getRootNode ? basis.getRootNode({ composed: true }) : null);\n    const isShadowRoot = root instanceof ShadowRoot;\n    const targetAdoptedSheets = isShadowRoot ? root.adoptedStyleSheets : (typeof document != \"undefined\" ? document.adoptedStyleSheets : null);\n\n    if (!targetAdoptedSheets) return null;\n\n    const selectorKey = `${layerName || \"\"}:${selector}`;\n    let sheet: CSSStyleSheet | undefined;\n\n    if (isShadowRoot) {\n        let shadowMap = adoptedShadowSelectorMap.get(root);\n        if (!shadowMap) {\n            shadowMap = new Map();\n            adoptedShadowSelectorMap.set(root, shadowMap);\n        }\n        sheet = shadowMap.get(selectorKey);\n\n        if (!sheet) {\n            sheet = new CSSStyleSheet();\n            shadowMap.set(selectorKey, sheet);\n\n            if (!targetAdoptedSheets.includes(sheet)) {\n                targetAdoptedSheets.push(sheet);\n            }\n        }\n    } else {\n        sheet = adoptedSelectorMap.get(selectorKey);\n\n        if (!sheet) {\n            sheet = new CSSStyleSheet();\n            adoptedSelectorMap.set(selectorKey, sheet);\n\n            if (!targetAdoptedSheets.includes(sheet)) {\n                targetAdoptedSheets.push(sheet);\n            }\n        }\n    }\n\n    if (layerName) {\n        let layerRule: CSSLayerBlockRule | undefined;\n\n        if (isShadowRoot) {\n            let shadowLayerMap = adoptedShadowLayerMap.get(root);\n            if (!shadowLayerMap) {\n                shadowLayerMap = new Map();\n                adoptedShadowLayerMap.set(root, shadowLayerMap);\n            }\n            layerRule = shadowLayerMap.get(layerName);\n        } else {\n            layerRule = adoptedLayerMap.get(layerName);\n        }\n\n        if (!layerRule) {\n            const rules = Array.from(sheet.cssRules || []);\n            const layerIndex = rules.findIndex((rule) =>\n                rule instanceof CSSLayerBlockRule && rule.name === layerName\n            );\n            if (layerIndex === -1) {\n                try {\n                    sheet.insertRule(`@layer ${layerName} {}`, sheet.cssRules.length);\n                    const newRule = sheet.cssRules[sheet.cssRules.length - 1];\n                    if (newRule instanceof CSSLayerBlockRule) {\n                        layerRule = newRule;\n                    }\n                } catch (e) {\n                    layerRule = undefined;\n                }\n            } else {\n                layerRule = rules[layerIndex] as CSSLayerBlockRule;\n            }\n            if (layerRule) {\n                if (isShadowRoot) {\n                    let shadowLayerMap = adoptedShadowLayerMap.get(root);\n                    if (!shadowLayerMap) {\n                        shadowLayerMap = new Map();\n                        adoptedShadowLayerMap.set(root, shadowLayerMap);\n                    }\n                    shadowLayerMap.set(layerName, layerRule);\n                } else {\n                    adoptedLayerMap.set(layerName, layerRule);\n                }\n            }\n        }\n\n        if (layerRule) {\n            const layerRules = Array.from(layerRule.cssRules || []);\n            let layerRuleIndex = layerRules.findIndex((r) =>\n                r instanceof CSSStyleRule && r.selectorText?.trim?.() === selector?.trim?.()\n            );\n            if (layerRuleIndex === -1) {\n                try {\n                    layerRuleIndex = layerRule.insertRule(`${selector} {}`, layerRule.cssRules.length);\n                } catch (e) {\n                    return null;\n                }\n            }\n            return layerRule.cssRules[layerRuleIndex] as CSSStyleRule;\n        }\n    }\n\n    const rules = Array.from(sheet.cssRules || []);\n    let ruleIndex = rules.findIndex((rule) =>\n        rule instanceof CSSStyleRule && rule.selectorText?.trim?.() === selector?.trim?.()\n    );\n\n    if (ruleIndex === -1) {\n        try {\n            ruleIndex = sheet.insertRule(`${selector} {}`, sheet.cssRules.length);\n        } catch (e) {\n            return null;\n        }\n    }\n\n    const rule = sheet.cssRules[ruleIndex];\n    if (rule instanceof CSSStyleRule) {\n        return rule;\n    }\n\n    return null;\n};\n\n//\nexport const setStyleProperty = (element?: HTMLElement | null, name?: string, value?: any, importance = \"\") => {\n    return hasTypedOM ? setStylePropertyTyped(element, name, value, importance) : setStylePropertyFallback(element, name, value, importance);\n}\n\n//\nexport const setStyleInRule = (selector: string, name: string, value: any) => {\n    return setStyleProperty(getStyleRule(selector), name, value);\n};\n\n//\nexport const setStyleRule = (selector: string, sheet: object) => {\n    const rule = getStyleRule(selector);\n    Object.entries(sheet).forEach(([propName, propValue]) => setStyleProperty(rule, propName, propValue));\n    return rule;\n};\n\n//\nexport const hash = async (string: string|ArrayBuffer|Blob|File) => {\n    const hashBuffer = await crypto?.subtle?.digest('SHA-256', typeof string == \"string\" ? new TextEncoder().encode(string) : (string instanceof ArrayBuffer ? string : (await ((string as any)?.arrayBuffer?.()))));\n    return \"sha256-\" + btoa(String.fromCharCode.apply(null, new Uint8Array(hashBuffer) as unknown as number[]));\n};\n\n//\nexport const loadStyleSheet = (inline: string|File|Blob, base?: [any, any], layer: string = \"\", integrity?: string|Promise<string>)=>{ // @ts-ignore\n    const load = fetchAndCache(inline);\n    const url = typeof inline == \"string\" ? (URL.canParse(inline) ? inline : load) : load;\n\n    //\n    if (base?.[0]) base[0].fetchPriority = \"high\";\n    if (base && url && typeof url == \"string\") { setStyleURL(base, url, layer); };\n    if (base?.[0] && (!URL.canParse(inline as string) || integrity) && base?.[0] instanceof HTMLLinkElement) {\n        const I: any = null;//(integrity ?? (typeof inline == \"string\" ? hash(inline) : null));\n        //if (typeof I?.then == \"function\") { I?.then?.((H) => base?.[0]?.setAttribute?.(\"integrity\", H)); } else\n            //if (I) { base?.[0]?.setAttribute?.(\"integrity\", I as string); }\n    }\n\n    //\n    return promiseOrDirect(load, (res?: any | null) => {\n        if (base?.[0] && res) {\n            setStyleURL(base, res, layer);\n            base?.[0].setAttribute(\"loaded\", \"\");\n        }\n    })?.catch?.((error: any) => { console.warn(\"Failed to load style sheet:\", error); });\n\n    //\n    return base?.[0];\n};\n\n//\nexport const loadBlobStyle = (inline: string) => {\n    const style = typeof document != \"undefined\" ? document.createElement(\"link\") : null;\n    if (style) style.fetchPriority = \"high\";\n    if (style) {\n        Object.assign(style, { rel: \"stylesheet\", type: \"text/css\", crossOrigin: \"same-origin\" }); style.dataset.owner = OWNER; loadStyleSheet(inline, [style, \"href\"]); typeof document != \"undefined\" ? document.head.append(style) : null; return style;\n    };\n    return null;\n};\n\n//\nexport const loadInlineStyle = (inline: string, rootElement: any = typeof document != \"undefined\" ? document?.head : null, layer: string = \"\") => {\n    //if (!rootElement) return;\n    const PLACE = (rootElement?.querySelector?.(\"head\") ?? rootElement); if (typeof HTMLHeadElement != \"undefined\" && PLACE instanceof HTMLHeadElement) { return loadBlobStyle(inline); } // @ts-ignore\n    const style = typeof document != \"undefined\" ? document.createElement(\"style\") : null; if (style) { style.dataset.owner = OWNER; loadStyleSheet(inline, [style, \"innerHTML\"], layer); PLACE?.prepend?.(style); return style; }\n    return null;\n};\n\n//\nexport const setProperty = (target, name, value, importance = \"\")=>{\n    return setStyleProperty(target, name, value, importance);\n}\n\n//\nexport const preloadStyle = (styles: string)=>{\n    // @ts-ignore\n    return loadAsAdopted(styles, \"\");\n}\n\n//\nexport const adoptedMap = new Map<string, CSSStyleSheet>();\nexport const adoptedBlobMap = new WeakMap<Blob | File, CSSStyleSheet>();\n\n//\nlet layerCounter = 0;\nexport const loadAsAdopted = (styles: string | Blob | File, layerName: string | null = null) => {\n    if (typeof styles == \"string\" && adoptedMap?.has?.(styles)) { return adoptedMap.get(styles); }\n    if ((styles instanceof Blob || (styles as any) instanceof File) && adoptedBlobMap?.has?.(styles as Blob | File)) { return adoptedBlobMap.get(styles as Blob | File); }\n\n    //\n    if (!styles) return null; //@ts-ignore\n    const sheet = (typeof styles == \"string\" ?  //@ts-ignore\n        adoptedMap.getOrInsertComputed(styles, (styles) => new CSSStyleSheet() as CSSStyleSheet) :  //@ts-ignore\n        adoptedBlobMap.getOrInsertComputed(styles as Blob | File, (styles) => new CSSStyleSheet() as CSSStyleSheet));\n\n    //\n    //if (!layerName) { layerName = `ux-layer-${layerCounter++}`; }\n    if (typeof document != \"undefined\" && document.adoptedStyleSheets && !document.adoptedStyleSheets.includes(sheet as unknown as CSSStyleSheet)) {\n    document.adoptedStyleSheets.push(sheet as unknown as CSSStyleSheet);\n    }\n\n    //\n    if (typeof styles == \"string\" && !URL.canParse(styles)) {\n        const layerWrapped = layerName ? `@layer ${layerName} { ${styles} }` : styles;\n        adoptedMap.set(styles, sheet);\n        // Avoid blocking the main thread on huge styles (veela runtime can be big).\n        if (layerWrapped.length > 50_000 && typeof (sheet as any).replace === \"function\") {\n            (sheet as any).replace(layerWrapped).catch?.(() => {});\n        } else {\n        sheet.replaceSync(layerWrapped);\n        }\n        return sheet;\n    } else {\n        promiseOrDirect(fetchAsInline(styles), (cached: string) => {\n            adoptedMap.set(cached, sheet);\n            if (cached) {\n                const layerWrapped = layerName ? `@layer ${layerName} { ${cached} }` : cached;\n                if (layerWrapped.length > 50_000 && typeof (sheet as any).replace === \"function\") {\n                    (sheet as any).replace(layerWrapped).catch?.(() => {});\n                } else {\n                sheet.replaceSync(layerWrapped);\n                }\n                return sheet;\n            };\n        });\n    }\n\n    //\n    return sheet as CSSStyleSheet;\n}\n\n//\nexport const removeAdopted = (sheet: CSSStyleSheet | string | null | undefined): boolean => {\n    if (!sheet) return false;\n    const target = typeof sheet === \"string\" ? adoptedMap.get(sheet) : sheet;\n    if (!target || typeof document === \"undefined\") return false;\n    const sheets = document.adoptedStyleSheets;\n    const idx = sheets.indexOf(target);\n    if (idx !== -1) {\n        sheets.splice(idx, 1);\n        return true;\n    }\n    return false;\n};\n\n//\nexport type Point = DOMPoint;\nexport const parseOrigin = (origin: string, element: Element): Point => { const values = origin.split(' '); return new DOMPoint(parseLength(values[0], () => element.clientWidth), parseLength(values[1], () => element.clientHeight)); } // @ts-ignore\nexport const parseLength = (value: string, size: ()=>number): number => { if (value.endsWith('%')) { return (parseFloat(value) / 100) * size(); }; return parseFloat(value); }\n\n//\nexport const getTransform = (el)=>{\n    if (el?.computedStyleMap) {\n        const styleMap = el.computedStyleMap(), transform = styleMap.get(\"transform\"), matrix = transform?.toMatrix?.();\n        if (matrix) return matrix;\n    } else\n        // @ts-ignore\n    if (el) { const style = getComputedStyle(el); return new DOMMatrix(style?.getPropertyValue?.(\"transform\")); }\n    return new DOMMatrix();\n}\n\n//\nexport const getTransformOrigin = (el)=>{\n    // @ts-ignore\n    const style = getComputedStyle(el), cssOrigin = style?.getPropertyValue?.(\"transform-origin\") || `50% 50%`;\n    return parseOrigin(cssOrigin, el);\n}\n\n//\nexport const getPropertyValue = (src, name)=>{\n    if (\"computedStyleMap\" in src) {\n        const val = src?.computedStyleMap?.()?.get(name);\n        return val instanceof CSSUnitValue ? (val?.value || 0) : val?.toString?.();\n    }\n    // @ts-ignore\n    if (src instanceof HTMLElement) { const cs = getComputedStyle?.(src, \"\"); return (parseFloat(cs?.getPropertyValue?.(name)?.replace?.(\"px\", \"\")) || 0); }\n    return (parseFloat((src?.style ?? src).getPropertyValue?.(name)?.replace?.(\"px\", \"\")) || 0) || 0;\n}\n\n//\nexport const getElementZoom = (element: Element): number => {\n    let zoom = 1, currentElement: Element | null = element;\n    while (currentElement) {\n        if ('currentCSSZoom' in (currentElement as any)) {\n            const currentCSSZoom = (currentElement as any).currentCSSZoom;\n            if (typeof currentCSSZoom === 'number') { return (zoom *= currentCSSZoom); }\n        }\n\n        //\n        const style = getComputedStyle(currentElement); // @ts-ignore\n        if  (style.zoom && style.zoom !== 'normal') { return (zoom *= parseFloat(style.zoom)); } // @ts-ignore\n        if ((style.zoom && style.zoom !== 'normal') || 'currentCSSZoom' in (currentElement as any)) { return zoom; }\n        currentElement = (currentElement as HTMLElement)?.offsetParent ?? currentElement?.parentElement;\n    }\n    return zoom;\n}\n\n//\nexport const getPxValue = (element, name) => { return getPropertyValue?.(element, name); }\nexport const getPadding = (src, axis)=>{\n    if (axis == \"inline\") { return (getPropertyValue(src, \"padding-inline-start\") + getPropertyValue(src, \"padding-inline-end\")); };\n    return (getPropertyValue(src, \"padding-block-start\") + getPropertyValue(src, \"padding-block-end\"));\n}","export const boundBehaviors = new WeakMap();\n\n// currently, behaviors not triggers when initialized\nexport const bindBehavior = (element, behSet, behavior)=>{\n    const weak = new WeakRef(element);\n    if (!behSet.has(behavior)) { behSet.add(behavior); }\n    return element;\n}\n\n// behavior ([value, prop, old], [element, store, storeSets])=>{}\nexport const reflectBehaviors = (element, behaviors)=>{\n    if (!element) return;\n    if (behaviors) {\n        // !experimental `getOrInsert` feature!\n        // @ts-ignore\n        const behSet = boundBehaviors.getOrInsert(element, new Set());\n        [...(behaviors?.values?.() || [])].map((e)=>bindBehavior(element, behSet, e));\n    }\n    return element;\n}\n","export const namedStoreMaps = new Map<string, WeakMap<any, any>>(); // Map<name, WeakMap<element, obj>>\n\n//\nexport const getStoresOfElement = ( map: Map<any, WeakMap<any, any>>, element: any): Map<any, any> => {\n    const E = [...map.entries()||[]] as [any, any][];\n    return new Map<any, any>((E?.map?.(([n,m])=>[n,m?.get?.(element)])?.filter?.(([n,e])=>!!e)||[]) as any);;\n}\n\n//\nexport const bindStore = (element, name, obj) => {\n    let weakMap = namedStoreMaps.get(name);\n    if (!weakMap) {\n        weakMap = new WeakMap();\n        namedStoreMaps.set(name, weakMap);\n    }\n    if (!weakMap.has(element)) {\n        weakMap.set(element, obj);\n        //if (obj?.behavior) bindBeh(new WeakRef(element), [name, obj], obj?.behavior);\n    }\n    return element;\n};\n\n//\nexport const reflectStores = (element, stores) => {\n    if (!element || !stores) return;\n    for (const [name, obj] of stores.entries()) {\n        bindStore(element, name, obj);\n    }\n    return element;\n};\n","import { observeAttributeBySelector, observeBySelector } from \"./Observer\";\nimport { getStoresOfElement, namedStoreMaps } from \"./Store\";\nimport { boundBehaviors } from \"./Behavior\";\n\n// mixin { connect: (element, { ... })=>{},  disconnect: (element, { ... }): ()=>{}}\nexport const reflectMixins = (element, mixins)=>{\n    if (!element) return;\n    if (mixins) {\n        const mixinSet = boundMixinSet?.get?.(element) ?? new WeakSet();\n        if (!boundMixinSet?.has?.(element)) { boundMixinSet?.set?.(element, mixinSet); }\n        [...(mixins?.values?.() || [])].map((e)=>bindMixins(element, e, mixinSet));\n    }\n    return element;\n}\n\n//\nexport const getElementRelated = (element)=>{\n    return {\n        storeSet: getStoresOfElement(namedStoreMaps, element),\n        mixinSet: boundMixinSet?.get?.(element),\n        behaviorSet: boundBehaviors?.get?.(element)\n    }\n}\n\n//\nexport const bindMixins = (element, mixin, mixSet?)=>{\n    const wel = new WeakRef(element); mixSet ||= boundMixinSet?.get?.(element);\n    if (!mixSet?.has?.(mixin)) { mixSet?.add?.(mixin); mixinElements?.get?.(mixin)?.add?.(element);\n        if (mixin.name) { element?.setAttribute?.(\"data-mixin\", [...(element?.getAttribute?.(\"data-mixin\")?.split?.(\" \") || []), mixin.name].filter((n)=>!!n).join(\" \")); }\n        mixin?.connect?.(wel, mixin, getElementRelated(element));\n    }\n    return element;\n}\n\n// element <--> mixin-set\nexport const boundMixinSet  = new WeakMap<any, WeakSet<any>>();\nexport const mixinElements  = new WeakMap<any, any>();\n\n// mixin-set <--> naming\nexport const mixinRegistry  = new Map<string, any>();\nexport const mixinNamespace = new WeakMap<any, string>;\n\n//\nexport const updateMixinAttributes = (element, mixin)=>{\n    if (typeof mixin == \"string\") { mixin = mixinRegistry?.get?.(mixin); }\n    const names  = new Set([...(element?.getAttribute?.(\"data-mixin\")?.split?.(\" \") || [])]);\n    const mixins = new Set([...names].map((n)=>mixinRegistry?.get?.(n)).filter((m)=>!!m));\n    const mixinSet = boundMixinSet?.get?.(element) ?? new WeakSet();\n\n    //\n    if (!mixinElements?.has?.(mixin)) { mixinElements?.set?.(mixin, new WeakSet()); }\n    if (!boundMixinSet?.has?.(element)) { boundMixinSet?.set?.(element, mixinSet); }\n\n    //\n    const wel = new WeakRef(element);\n    if (!mixinSet?.has?.(mixin)) {\n        if (!mixins.has(mixin)) { mixin?.disconnect?.(wel, mixin, getElementRelated(element)); }\n        if ( mixins.has(mixin) || !mixinElements?.get?.(mixin)?.has?.(element)) { mixin?.connect?.(wel, mixin, getElementRelated(element));\n            names.add(mixinNamespace?.get?.(mixin)); mixinSet?.add?.(mixin);\n            element?.setAttribute?.(\"data-mixin\", [...names].filter((n)=>!!n).join(\" \"));\n        }\n        mixinElements?.get?.(mixin)?.add?.(element);\n    }\n    if (mixinSet?.has?.(mixin)) {\n        if (!mixins.has(mixin)) { mixinSet?.delete?.(mixin); mixin?.disconnect?.(wel, mixin, getElementRelated(element)); }\n    }\n}\n\n//\nexport const roots   = new Set<any>();\nexport const addRoot = (root: any = typeof document != \"undefined\" ? document : null) => {\n    if (!root) return;\n    if (!roots?.has?.(root)) {\n        roots?.add?.(root);\n\n        // as attribute (reacts on attribute changes)\n        observeAttributeBySelector(root, \"*\", \"data-mixin\", (mutation) => updateAllMixins(mutation.target));\n\n        // as DOM nodes (reacts on DOM changes)\n        observeBySelector(root, \"[data-mixin]\", (mutation) => {\n            for (const element of mutation.addedNodes) {\n                if (element instanceof HTMLElement) {\n                    updateAllMixins(element);\n                }\n            }\n        });\n    }\n    return root;\n};\n\n//\nexport const updateAllMixins = (element)=>{\n    const names  = new Set([...(element?.getAttribute?.(\"data-mixin\")?.split?.(\" \") || [])]);\n    const mixins = new Set([...names].map((n)=>mixinRegistry?.get?.(n)).filter((m)=>!!m));\n    [...mixins]?.map?.((m)=>updateMixinAttributes(element, m));\n}\n\n//\nexport const updateMixinAttributesAll = (elements, mixin)=>{ elements.forEach((e)=>(mixin ? updateMixinAttributes(e, mixin) : updateAllMixins(e))) }\nexport const updateMixinAttributesAllInRoots = (mixin) => {\n    for (const root of roots) { updateMixinAttributesAll(root?.querySelectorAll?.(\"[data-mixin]\"), mixin); }\n}\n\n//\nexport const nameRegistryF = new FinalizationRegistry((key: any)=>{ mixinRegistry?.delete?.(key); });\nexport const registerMixin = (name, mixin) => {\n    if (!mixinNamespace?.has?.(mixin)) {\n        const key = name?.trim?.();\n        if (key) {\n            mixinNamespace?.set?.(mixin, key);\n            mixinRegistry?.set?.(key, mixin);\n            nameRegistryF?.register?.(mixin, key);\n            updateMixinAttributesAllInRoots(mixin);\n        }\n    }\n};\n\n//\naddRoot(typeof document != \"undefined\" ? document : null);\n\n//\nexport class DOMMixin {\n    constructor(name: string|null = null) { if (name) { registerMixin(name, this); } }\n\n    //\n    public connect(wElement, wSelf, related) { return this; }\n    public disconnect(wElement, wSelf, related) { return this; }\n\n    //\n    public storeForElement(element) { return namedStoreMaps.get(this.name || \"\")?.get?.(element); };\n    public relatedForElement(element) { return getElementRelated(element); }\n\n    //\n    get elements() { return mixinElements?.get?.(this); }\n    get storage() { return namedStoreMaps?.get?.(this.name || \"\"); }\n    get name() { return mixinNamespace?.get?.(this); }\n}\n","import { setStyleProperty } from \"./Style\";\nimport { camelToKebab, DatasetValue, hasValue, isVal, isValueUnit, kebabToCamel, normalizePrimitive, $avoidTrigger } from \"fest/core\";\n\n//\nexport const handleHidden = (element, _, visible) => {\n    const $ref: any = visible;\n    if (hasValue(visible)) { visible = visible.value };\n    const isVisible = (visible = normalizePrimitive(visible)) != null && visible !== false;\n\n    //\n    $avoidTrigger($ref, ()=>{\n        if (element instanceof HTMLInputElement) { element.hidden = !isVisible; } else\n            { if (isVisible) { element?.removeAttribute?.(\"data-hidden\"); } else { element?.setAttribute?.(\"data-hidden\", \"\"); } }\n    });\n\n    //\n    return element;\n}\n\n//\nexport const handleProperty = (el?: HTMLElement|null, prop?: string|null, val?: any)=>{\n    if (!(prop = typeof prop == \"string\" ? kebabToCamel(prop) : prop) || !el || [\"style\", \"dataset\", \"attributeStyleMap\", \"styleMap\", \"computedStyleMap\"].indexOf(prop || \"\") != -1) return el;\n    const $ref: any = val;\n\n    //\n    if (hasValue(val)) { val = val.value; };\n\n    //\n    if (el?.[prop] === val) { return el; };\n    if (el?.[prop] !== val) {\n        $avoidTrigger($ref, ()=>{\n            if (val != null) { el[prop] = val; } else { delete el[prop]; };\n        })\n    }\n    return el;\n}\n\n//\nexport const handleDataset = (el?: HTMLElement|null, prop?: string, val?: DatasetValue) => {\n    const datasetRef = el?.dataset; if (!prop || !el || !datasetRef) return el;\n    const $ref: any = val;  // @ts-ignore\n    if (hasValue(val)) val = val?.value; prop = kebabToCamel(prop);\n    if (datasetRef?.[prop] === (val = normalizePrimitive(val))) return el;\n    if (val == null || val === false) { delete datasetRef[prop]; } else {\n        $avoidTrigger($ref, ()=>{\n            if (typeof val != \"object\" && typeof val != \"function\") {\n                datasetRef[prop] = String(val);\n            } else {\n                delete datasetRef[prop];\n            }\n        });\n    }\n    return el;\n};\n\n//\nexport const deleteStyleProperty = (el: HTMLElement, name: string) => el.style.removeProperty(camelToKebab(name));\n\n//\nexport const handleStyleChange = (el?: HTMLElement | null, prop?: string, val?: any) => {\n    const styleRef = el?.style;\n    if (!prop || typeof prop != \"string\" || !el || !styleRef) return el;\n    //if (hasValue(val) && !isValueUnit(val)) val = val.value;\n\n    //\n    const $ref: any = val;\n    $avoidTrigger($ref, ()=>{\n        //if (val == null) { deleteStyleProperty(el, prop); } else\n        if (isVal(val) || hasValue(val) || isValueUnit(val))\n            { setStyleProperty(el, prop, val); } else if (val == null)\n            { deleteStyleProperty(el, prop); }\n    });\n\n    //\n    return el;\n};\n\n//\nexport const handleAttribute = (el?: HTMLElement | null, prop?: string, val?: any) => {\n    if (!prop || !el) return el;\n\n    //\n    const $ref: any = val;\n    if (hasValue(val)) val = val.value; prop = camelToKebab(prop);\n    if (el?.getAttribute?.(prop) === (val = normalizePrimitive(val))) {\n        return el;\n    }\n\n    //\n    $avoidTrigger($ref, ()=>{\n        if ((typeof val != \"object\" && typeof val != \"function\") && val != null && (typeof val == \"boolean\" ? val == true : true)) {\n            el?.setAttribute?.(prop, String(val));\n        } else {\n            el?.removeAttribute?.(prop);\n        }\n    });\n\n    //\n    return el;\n};\n","// @ts-ignore\nSymbol.observable  ||= Symbol.for('observable'); // @ts-ignore\nSymbol.subscribe   ||= Symbol.for(\"subscribe\"); // @ts-ignore\nSymbol.unsubscribe ||= Symbol.for(\"unsubscribe\");\n\n//\nexport const $fxy          = Symbol.for(\"@fix\");\nexport const $value        = Symbol.for(\"@value\");\nexport const $extractKey$  = Symbol.for(\"@extract\");\nexport const $originalKey$ = Symbol.for(\"@origin\");\nexport const $registryKey$ = Symbol.for(\"@registry\");\nexport const $target       = Symbol.for(\"@target\");\nexport const $rootKey$     = Symbol.for(\"@root\");\nexport const $nodeKey$     = Symbol.for(\"@node\");\nexport const $behavior     = Symbol.for(\"@behavior\");\nexport const $promise      = Symbol.for(\"@promise\");\nexport const $triggerLess  = Symbol.for(\"@trigger-less\");\nexport const $triggerLock  = Symbol.for(\"@trigger-lock\");\nexport const $trigger      = Symbol.for(\"@trigger\");\nexport const $affected    = Symbol.for(\"@subscribe\");\nexport const $isNotEqual   = Symbol.for(\"@isNotEqual\");\n","import { hasValue, isPrimitive } from \"fest/core\";\nimport { $extractKey$, $originalKey$, $registryKey$ } from \"./Symbol\";\n\n/*\n//\ntype AnyFn = (...args: any[]) => any;\ntype MethodKeys<T> = {\n    [K in keyof T]-?: T[K] extends AnyFn ? K : never\n}[keyof T];\n\n//\ntype MethodsOf<T> = Pick<T, MethodKeys<T>>;\ntype WithMethods<Under, T> = MethodsOf<Under> & MethodsOf<T>;\n\n//\nexport type WeakKey = object;\nexport type keyType = string | number | symbol;\n\n//\nexport type refValid<Under = any, T = any, K = any> =\n    | (T & WithMethods<Under, T>)\n    | (Under[] & WithMethods<Under, T>)\n    | (Map<K, Under> & WithMethods<Under, T>)\n    | (Set<any> & WithMethods<Under, T>)\n    | (WeakMap<(K extends WeakKey ? K : never), Under> & WithMethods<Under, T>)\n    | (WeakSet<(Under extends WeakKey ? Under : never)> & WithMethods<Under, T>)\n    | (Function & WithMethods<Under, T>);\n\n//\nexport type subValid<Under = any, T = any, K = any> =\n    | refValid<Under, T, K>\n    | ([refValid<Under, T, K>, keyType | Function] & WithMethods<Under, T>)\n    | ([refValid<Under, T, K>, keyType | Function, ...any[]] & WithMethods<Under, T>);\n*/\n\n//\nexport type AnyFn = (...args: any[]) => any;\nexport type MethodKeys<T> = {\n    [K in keyof T]-?: T[K] extends AnyFn ? K : never\n}[keyof T];\nexport type MethodsOf<T> = Pick<T, MethodKeys<T>>;\n\n//\nexport type WeakKey = object | Function;\nexport type keyType = string | number | symbol;\n\n//\nexport type ContainerMethods<X> =\n    X extends (any[] | Array<any>) ? MethodsOf<Array<any>> :\n    X extends Map<keyType, any> ? MethodsOf<Map<keyType, any>> :\n    X extends Set<any> ? MethodsOf<Set<any>> :\n    X extends WeakMap<WeakKey, any> ? MethodsOf<WeakMap<WeakKey, any>> :\n    X extends WeakSet<WeakKey> ? MethodsOf<WeakSet<WeakKey>> :\n    X extends Function ? MethodsOf<Function> :\n    {};\n\n// extends by [key: symbol] internals, such as Symbol.observable, Symbol.dispose, $trigger$, etc...\nexport type observeSpecificKeys<T extends Record<keyType, any> = any> = T & {\n    [K in keyof T]: T[K] extends AnySuitable<keyType, any> ? Ui<T[K], keyType, any> : T[K];\n}[keyof T & keyType];\n\n//\nexport type MapLike<K = any, V = any> = Map<K, V> | WeakMap<K extends WeakKey ? K : never, V> | Record<K extends keyType ? K : never, V>;\nexport type SetLike<V = any, _ = unknown> = Set<V> | WeakSet<V extends WeakKey ? V : never> | V[];\nexport type AnySuitable<K = any, V = any|unknown> = Function | Record<K extends keyType ? K : never, V> | MapLike<K, V> | SetLike<K, V extends unknown ? V : unknown>;\nexport type Ui<W extends AnySuitable<any, any>, K = any, V = any> = W | W[] | AnySuitable<K, V> | AnySuitable<K, V>[];\nexport type observeValid<T = any> = T & {\n    value?: any;\n    [key: symbol]: any;\n    [key: string]: any;\n};\n\n//\nexport type TupleWithInheritedMethods<RV> =\n    RV extends unknown ? ([RV, keyType | Function] & ContainerMethods<RV>) : never;\n\n//\nexport type TupleVariadicWithInheritedMethods<RV> =\n    RV extends unknown ? ([RV, keyType | Function, ...any[]] & ContainerMethods<RV>) : never;\n\n//\nexport type subValid<T = any> =\n    | observeValid<T>\n    | TupleWithInheritedMethods<observeValid<T>>\n    | TupleVariadicWithInheritedMethods<observeValid<T>>;\n\n//\nexport const $originalObjects$ = new WeakMap();\n\n//\nexport const safe = (target)=>{\n    const unwrap: any = (typeof target == \"object\" || typeof target == \"function\") ? (target?.[$extractKey$] ?? target) : target, mapped = (e)=>safe(e);\n    if (Array.isArray(unwrap)) { return unwrap?.map?.(mapped) || Array.from(unwrap || [])?.map?.(mapped) || []; } else // @ts-ignore\n    if (unwrap instanceof Map || unwrap instanceof WeakMap) { return new Map(Array.from(unwrap?.entries?.() || [])?.map?.(([K,V])=>[K,safe(V)])); } else  // @ts-ignore\n    if (unwrap instanceof Set || unwrap instanceof WeakSet) { return new Set(Array.from(unwrap?.values?.() || [])?.map?.(mapped)); } else  // @ts-ignore\n    if (unwrap != null && typeof unwrap == \"function\" || typeof unwrap == \"object\") { return Object.fromEntries(Array.from(Object.entries(unwrap || {}) || [])?.filter?.(([K])=>(K != $extractKey$ && K != $originalKey$ && K != $registryKey$))?.map?.(([K,V])=>[K,safe(V)])); }\n    return unwrap;\n}\n\n//\nexport const unwrap = (arr)=>{ return arr?.[$extractKey$] ?? arr?.[\"@target\"] ?? arr; }\nexport const deref  = (target?: any, discountValue: boolean|null = false)=>{\n    const original = target;\n    if (isPrimitive(target) || typeof target == \"symbol\") return target;\n    if (target != null && (target instanceof WeakRef || (\"deref\" in target && typeof target?.deref == \"function\"))) { target = target?.deref?.(); };\n    if (target != null && (typeof target == \"object\" || typeof target == \"function\")) {\n        target = unwrap(target);\n        const $val = discountValue && hasValue(target) && target?.value;\n        if ($val != null && (typeof $val == \"object\" || typeof $val == \"function\"))\n            { target = $val; }\n        if (original != target)\n            { return deref(target, discountValue); }\n    }\n    return target;\n}\n\n//\nexport const isThenable = (val: any): val is PromiseLike<any> => val != null && typeof val.then === \"function\";\nexport const withPromise = (target, cb) => {\n    if (isPrimitive(target) || typeof target == \"function\") { return cb?.(target); };\n    if (isThenable(target)) return target.then(cb);\n    if (target?.promise && isThenable(target.promise)) return target.promise.then(cb);\n    return cb?.(target);\n}\n\n//\nconst disposeMap = new WeakMap();\nconst disposeRegistry = new FinalizationRegistry((callstack: any)=>{ callstack?.forEach?.((cb: any)=>cb?.()); });\n\n//\nexport function addToCallChain(obj, methodKey, callback?: any|null) {\n    if (!callback || typeof callback != \"function\" || (typeof obj != \"object\" && typeof obj != \"function\")) return;\n    if (methodKey == Symbol.dispose) {\n        // @ts-ignore\n        disposeMap?.getOrInsertComputed?.(obj, ()=>{\n            const CallChain = new Set();\n            if (typeof obj == \"object\" || typeof obj == \"function\") {\n                disposeRegistry.register(obj, CallChain);\n                disposeMap.set(obj, CallChain);\n                obj[Symbol.dispose] ??= ()=>CallChain.forEach((cb: any)=>{ cb?.(); });\n            }\n            return CallChain;\n        })?.add?.(callback);\n    } else {\n        obj[methodKey] = function(...args) { const original = obj?.[methodKey]; if (typeof original == 'function') { original.apply(this, args); }; callback.apply(this, args); };\n    }\n}\n\n\ntype DuplicateContext = 'set' | 'push' | 'unshift' | 'splice';\n\ninterface DuplicateEvent<T> {\n    value: T;\n    via: DuplicateContext;\n    index?: number;\n}\n\ninterface SetArrayOptions<T> {\n    onDuplicate?: (event: DuplicateEvent<T>) => void;\n}\n\ninterface SetArrayMethods<T> {\n    push(...items: T[]): number;\n    pop(): T | undefined;\n    shift(): T | undefined;\n    unshift(...items: T[]): number;\n    splice(start: number, deleteCount?: number, ...items: T[]): T[];\n    includes(value: T): boolean;\n    indexOf(value: T): number;\n    toArray(): T[];\n    toSet(): Set<T>;\n    clear(): void;\n    delete(value: T): boolean;\n    [Symbol.iterator](): IterableIterator<T>;\n}\n\nexport type SetArray<T> = SetArrayMethods<T> & {\n    readonly length: number;\n    [index: number]: T;\n};\n\nconst isArrayIndex = (prop: PropertyKey): prop is `${number}` => {\n    if (typeof prop !== 'string') return false;\n    if (prop === '') return false;\n    const num = Number(prop);\n    return Number.isInteger(num) && num >= 0 && String(num) === prop;\n};\n\nexport function wrapSetAsArray<T>(\n    source: Iterable<T> = [],\n    options: SetArrayOptions<T> = {}\n): SetArray<T> {\n    let backingSet: Set<T> = new Set<T>();\n\n    const notifyDuplicate = (value: T, via: DuplicateContext, index?: number) => {\n        options.onDuplicate?.({ value, via, index });\n    };\n\n    if (source instanceof Set) { backingSet = source; } else {\n        for (const item of source) {\n            if (backingSet.has(item)) {\n                notifyDuplicate(item, 'push');\n                continue;\n            }\n            backingSet.add(item);\n        }\n    }\n\n    const snapshot = () => Array.from(backingSet);\n    const rebuildFrom = (arr: T[]) => {\n        backingSet.clear();\n        for (const item of arr) {\n            backingSet.add(item);\n        }\n    };\n\n\n\n    const methods: SetArrayMethods<T> = {\n        push: (...items: T[]) => {\n            let size = backingSet.size;\n            for (const item of items) {\n                if (backingSet.has(item)) {\n                    notifyDuplicate(item, 'push');\n                    continue;\n                }\n                backingSet.add(item);\n                size++;\n            }\n            return size;\n        },\n        pop: () => {\n            const arr = snapshot();\n            if (!arr.length) return undefined;\n            const value = arr[arr.length - 1];\n            backingSet.delete(value);\n            return value;\n        },\n        shift: () => {\n            const iterator = backingSet.values().next();\n            if (iterator.done) return undefined;\n            const value = iterator.value;\n            backingSet.delete(value);\n            return value;\n        },\n        unshift: (...items: T[]) => {\n            if (!items.length) return backingSet.size;\n            const current = snapshot();\n            const toPrepend: T[] = [];\n\n            for (const item of items) {\n                if (current.includes(item) || toPrepend.includes(item)) {\n                    notifyDuplicate(item, 'unshift', 0);\n                    continue;\n                }\n                toPrepend.push(item);\n            }\n\n            if (!toPrepend.length) return current.length;\n\n            const next = [...toPrepend, ...current];\n            rebuildFrom(next);\n            return next.length;\n        },\n        splice: (start: number, deleteCount?: number, ...items: T[]) => {\n            const arr = snapshot();\n            const normalizedStart = Math.min(Math.max(start, 0), arr.length);\n            const actualDeleteCount =\n                deleteCount === undefined\n                    ? arr.length - normalizedStart\n                    : Math.max(0, Math.min(deleteCount, arr.length - normalizedStart));\n\n            const removed = arr.splice(normalizedStart, actualDeleteCount);\n\n            let insertPosition = normalizedStart;\n            for (const item of items) {\n                if (arr.includes(item)) {\n                    notifyDuplicate(item, 'splice', insertPosition);\n                    continue;\n                }\n                arr.splice(insertPosition++, 0, item);\n            }\n\n            rebuildFrom(arr);\n            return removed;\n        },\n        includes: (value: T) => backingSet.has(value),\n        indexOf: (value: T) => snapshot().indexOf(value),\n        clear: () => {\n            backingSet.clear();\n        },\n        delete: (value: T) => backingSet.delete(value),\n        toArray: () => snapshot(),\n        toSet: () => new Set(backingSet),\n        [Symbol.iterator]: () => backingSet[Symbol.iterator](),\n    };\n\n    const handler: ProxyHandler<SetArrayMethods<T>> = {\n        get: (_, prop) => {\n            if (prop === 'length') {\n                return backingSet.size;\n            }\n\n            if (isArrayIndex(prop)) {\n                const arr = snapshot();\n                return arr[Number(prop)];\n            }\n\n            const value = (methods as unknown as Record<PropertyKey, unknown>)[prop];\n            if (typeof value === 'function') {\n                return value;\n            }\n            return value;\n        },\n        set: (_, prop, value) => {\n            if (prop === 'length') {\n                if (typeof value !== 'number' || !Number.isFinite(value) || value < 0) {\n                    throw new RangeError('length must be a finite non-negative number');\n                }\n                const nextLength = Math.floor(value);\n                if (nextLength >= backingSet.size) {\n                    //   \"\"     \n                    return true;\n                }\n                const arr = snapshot().slice(0, nextLength);\n                rebuildFrom(arr);\n                return true;\n            }\n\n            if (isArrayIndex(prop)) {\n                const arr = snapshot();\n                const index = Number(prop);\n\n                if (index > arr.length) {\n                    return true; //   \"\" \n                }\n\n                const nextValue = value as T;\n                if (index < arr.length) {\n                    const currentValue = arr[index];\n                    if (Object.is(currentValue, nextValue)) {\n                        return true;\n                    }\n                    const duplicateElsewhere = arr.some(\n                        (item, idx) => idx !== index && Object.is(item, nextValue)\n                    );\n                    if (duplicateElsewhere) {\n                        notifyDuplicate(nextValue, 'set', index);\n                        return true;\n                    }\n                    arr[index] = nextValue;\n                } else {\n                    if (arr.includes(nextValue)) {\n                        notifyDuplicate(nextValue, 'set', index);\n                        return true;\n                    }\n                    arr.push(nextValue);\n                }\n\n                rebuildFrom(arr);\n                return true;\n            }\n\n            return Reflect.set(methods, prop, value);\n        },\n        deleteProperty: (_, prop) => {\n            if (prop === 'length') {\n                return false; //    \n            }\n\n            if (isArrayIndex(prop)) {\n                const arr = snapshot();\n                const index = Number(prop);\n                if (index >= arr.length) {\n                    return true;\n                }\n                arr.splice(index, 1);\n                rebuildFrom(arr);\n                return true;\n            }\n\n            return Reflect.deleteProperty(methods, prop);\n        },\n        ownKeys: () => {\n            const keys: (string | symbol)[] = [];\n            let i = 0;\n            for (const _ of backingSet) {\n                keys.push(String(i++));\n            }\n            keys.push('length');\n            return keys;\n        },\n        getOwnPropertyDescriptor: (_, prop) => {\n            if (prop === 'length') {\n                return {\n                    configurable: false,\n                    enumerable: false,\n                    writable: true,\n                    value: backingSet.size,\n                };\n            }\n\n            if (isArrayIndex(prop)) {\n                const arr = snapshot();\n                const index = Number(prop);\n                if (index >= arr.length) return undefined;\n                return {\n                    configurable: true,\n                    enumerable: true,\n                    writable: true,\n                    value: arr[index],\n                };\n            }\n\n            return Reflect.getOwnPropertyDescriptor(methods, prop);\n        },\n        has: (_, prop) => {\n            if (prop === 'length') return true;\n            if (isArrayIndex(prop)) {\n                const index = Number(prop);\n                return index >= 0 && index < backingSet.size;\n            }\n            return prop in methods;\n        },\n    };\n\n    return new Proxy(methods, handler) as SetArray<T>;\n}\n","import { objectAssign } from \"fest/core\";\nimport { $originalKey$ } from \"./Symbol\";\nimport { $originalObjects$, type keyType, type observeValid } from \"./Utils\";\n\n//\nexport class AssignObjectHandler {\n    constructor() { }\n    deleteProperty(target, name: keyType) { const result = Reflect.deleteProperty(target, name); return result; }\n    construct(target, args, newT) { return Reflect.construct(target, args, newT); }\n    apply(target, ctx, args) { return Reflect.apply(target, ctx, args); }\n    has(target, prop: keyType) { return Reflect.has(target, prop); }\n    set(target, name: keyType, value) { objectAssign(target, value, name); return true; }\n    get(target, name: keyType, ctx) {\n        if (typeof name == \"symbol\") { return target?.[name] ?? target; }\n        return Reflect.get(target, name, ctx);\n    }\n}\n\n//\nexport const makeObjectAssignable = <Under = any>(obj: Under): observeValid<Under> => {\n    // @ts-ignore\n    if (obj?.[$originalKey$] || $originalObjects$.has(obj)) { return obj; }\n\n    // @ts-ignore\n    const px = new Proxy(obj, new AssignObjectHandler());\n    $originalObjects$.set(px, obj); return px;\n}\n","import { $extractKey$ } from \"../wrap/Symbol\";\nimport { deref, type keyType } from \"../wrap/Utils\";\nimport { WR } from \"fest/core\";\n\n//\nconst withUnsub = new WeakMap();\nconst completeWithUnsub = (subscriber, weak: WeakRef<any> | WR<any>, handler: Subscript) => {\n    // @ts-ignore\n    return withUnsub.getOrInsert(subscriber, () => {\n        const registry = weak?.deref?.(); registry?.affected?.(handler);\n        const savComplete = subscriber?.complete?.bind?.(subscriber);\n        const unaffected = () => { const r = savComplete?.(); registry?.unaffected?.(handler); return r; };\n        subscriber.complete = unaffected;\n        return {\n            unaffected,\n            [Symbol.dispose]: unaffected,\n            [Symbol.asyncDispose]: unaffected,\n        }\n    });\n}\n\n//\nexport const subscriptRegistry = new WeakMap<any, Subscript>();\n\n// @ts-ignore\nconst wrapped = new WeakMap();\n\n//\nexport const register = (what: any, handle: any): any => {\n    const unwrap = what?.[$extractKey$] ?? what;  // @ts-ignore\n    subscriptRegistry.getOrInsert(unwrap, new Subscript());\n    return handle;\n}\n\n//\nexport const wrapWith = (what: any, handle: any): any => {\n    what = deref(what?.[$extractKey$] ?? what);\n    if (typeof what == \"symbol\" || !(typeof what == \"object\" || typeof what == \"function\") || what == null) return what; // @ts-ignore\n    return wrapped.getOrInsertComputed(what, () => new Proxy(what, register(what, handle)));\n}; // !experimental `getOrInsert` feature!\n\n//\nconst forAll = Symbol.for(\"@allProps\");\n\n//\nexport class Subscript {\n    compatible: any;\n    #listeners: Map<(value: any, prop: keyType, oldValue?: any, operation?: string | null) => void, any>;\n    #flags = new WeakSet();\n    #native: any;\n    #iterator: any;\n    #inDispatch = new Set<keyType>();\n\n    // : #triggerLock = new Set<keyType>();\n    #pending = new Map<keyType | null, [keyType | null, any, any, any[]]>();\n    #pendingByProp = new Map<keyType | null, Map<string, [keyType | null, any, any, (string | null), any[]]>>();\n    #flushScheduled = false;\n\n    // last run timestamp per callback\n    #lastPerfNow = new WeakMap<Function, number>();\n\n    //  \"now\"  /\n    #now() {\n        // performance     \n        return (globalThis.performance?.now?.() ?? Date.now());\n    }\n\n    constructor() {\n        this.#listeners = new Map();\n        this.#flags = new WeakSet();\n\n        this.#iterator = {\n            next: (args: any) => {\n                if (args) {\n                    Array.isArray(args) ? this.#dispatch(...(args as [any, any, any, any])) : this.#dispatch(args);\n                }\n            }\n        };\n\n        const weak = new WeakRef(this);\n        const controller = function (subscriber) {\n            const handler = subscriber?.next?.bind?.(subscriber);\n            return completeWithUnsub(subscriber, weak, handler);\n        };\n\n        // @ts-ignore\n        this.#native = (typeof Observable != \"undefined\" ? (new Observable(controller)) : null)\n        this.compatible = () => this.#native;\n    }\n\n    $safeExec(cb, ...args) {\n        if (!cb || this.#flags.has(cb)) return;\n        this.#flags.add(cb);\n\n        //\n        if (this.#lastPerfNow.get(cb) === this.#now()) return;\n        this.#lastPerfNow.set(cb, this.#now());\n\n        //\n        try {\n            const res = cb(...args);\n            if (res && typeof (res as any).then === \"function\") return (res as Promise<any>).catch(console.warn);\n            return res;\n        } catch (e) {\n            console.warn(e);\n        } finally {\n            this.#flags.delete(cb);\n        }\n    }\n\n    #dispatch(name, value = null, oldValue?: any, ...etc: any[]) {\n        const listeners = this.#listeners;\n        if (!listeners?.size) return;\n\n        const promises: Promise<any>[] = Array.from(listeners.entries())\n            .map(([cb, prop]) => {\n                if (prop === name || prop === forAll || prop === null) {\n                    return this.$safeExec(cb, value, name, oldValue, ...etc);\n                }\n                return undefined;\n            })\n            .filter((res: any) => res && typeof res.then === \"function\");\n\n        return promises.length ? Promise.allSettled(promises) : undefined;\n    }\n\n    wrap(nw: any[] | unknown) { if (Array.isArray(nw)) return wrapWith(nw, this); return nw; }\n\n    affected(cb: (value: any, prop: keyType) => void, prop?: keyType | null) {\n        if (cb == null || typeof cb != \"function\") return;\n        this.#listeners.set(cb, prop || forAll);\n        return () => this.unaffected(cb, prop || forAll);\n    }\n\n    unaffected(cb?: (value: any, prop: keyType) => void, prop?: keyType | null) {\n        if (cb != null && typeof cb == \"function\") {\n            const listeners = this.#listeners;\n            if (listeners?.has(cb) && (listeners.get(cb) == prop || prop == null || prop == forAll)) {\n                listeners.delete(cb);\n                return () => this.affected(cb, prop || forAll);\n            }\n        }\n        return this.#listeners.clear();\n    }\n\n    /**\n     *  :\n     * -  dispatch  name  -\n     * -  trigger(name)  flush    dispatch,    \n     * -  name  \n     */\n    trigger(name: keyType | null, value?: any | null, oldValue?: any, operation: string | null = null, ...etc: any[]) {\n        if (typeof name === \"symbol\") return;\n\n        // operation   undefined   \n        if (operation === undefined) operation = null;\n\n        //    operation\n        // null/undefined -> \"__\"\n        const opKey = operation ?? \"__\";\n\n        //     name  dispatch ()  \n        //      ,  flush    -\n        let byOp = this.#pendingByProp.get(name);\n        if (!byOp) {\n            byOp = new Map();\n            this.#pendingByProp.set(name, byOp);\n        }\n\n        // A:    (name + operation)   -\n        byOp.set(opKey, [name, value, oldValue, operation, etc]);\n\n        //   flush  \n        if (this.#flushScheduled) return;\n        this.#flushScheduled = true;\n\n        queueMicrotask(() => {\n            this.#flushScheduled = false;\n\n            //    ,     dispatch    \n            const batch = this.#pendingByProp;\n            this.#pendingByProp = new Map();\n\n            // : dispatch  prop,          prop\n            // (   dispatch   trigger(prop, ...),     -)\n            for (const [prop, opMap] of batch) {\n                if (prop != null && this.#inDispatch.has(prop)) continue;\n\n                if (prop != null) this.#inDispatch.add(prop);\n                try {\n                    for (const [, args] of opMap) {\n                        const [nm, v, ov, op, rest] = args;\n                        try {\n                            // #dispatch  (name, value, oldValue, ...etc)\n                            this.#dispatch(nm, v, ov, op, ...(rest ?? []));\n                        } catch (e) {\n                            console.warn(e);\n                        }\n                    }\n                } finally {\n                    if (prop != null) this.#inDispatch.delete(prop);\n                }\n            }\n        });\n    }\n\n    get iterator() { return this.#iterator; }\n}\n","import { affected, unaffected } from \"./Mainline\";\nimport { subscriptRegistry, wrapWith } from \"./Subscript\";\nimport { $extractKey$, $originalKey$, $registryKey$, $triggerLock, $triggerLess, $value, $trigger, $isNotEqual, $affected } from \"../wrap/Symbol\";\nimport type { keyType, MapLike, observeValid, SetLike } from \"../wrap/Utils\";\nimport { bindCtx, hasValue, isNotEqual, isPrimitive, makeTriggerLess, potentiallyAsync, potentiallyAsyncMap, tryParseByHint } from \"fest/core\";\n\n//\nconst __systemSkip = new Set<any>([\n    Symbol.toStringTag,\n    Symbol.iterator,\n    Symbol.asyncIterator,\n    Symbol.toPrimitive,\n\n    \"toString\",\n    \"valueOf\",\n    \"inspect\",          // node\n    \"constructor\",\n    \"__proto__\",\n    \"prototype\",\n    \"then\",\n    \"catch\",\n    \"finally\",\n    \"next\"\n]);\n\n//\nconst systemSkipGet = (target: any, name: any) => {\n    if (!__systemSkip.has(name)) return null;\n  \n    // :  undefined,   \n    const got = safeGet(target, name);\n    return (typeof got === \"function\") ? bindCtx(target, got) : got;\n};\n\n//\nconst __safeGetGuard = new WeakMap<any, Set<any>>();\nfunction isGetter(obj, propName) {\n    let got = true;\n    try { // @ts-ignore\n        __safeGetGuard?.getOrInsert?.(obj, new Set())?.add?.(propName);\n        if (__safeGetGuard?.get?.(obj)?.has?.(propName)) { got = true; }\n        const descriptor = Reflect.getOwnPropertyDescriptor(obj, propName);\n        got = (typeof descriptor?.get == \"function\");\n    } catch (e) {\n        got = true;\n    } finally {\n        __safeGetGuard?.get?.(obj)?.delete?.(propName);\n    }\n    return got;\n}\n\n//\nexport const fallThrough = (obj: any, key: any) => {\n    if (isPrimitive(obj)) return obj;\n\n    //\n    const value = safeGet(obj, key);\n    if (value == null && key != \"value\") {\n        const tmp = safeGet(obj, \"value\");\n        if (tmp != null && !isPrimitive(tmp))\n            { return fallThrough(tmp, key); } else\n            { return value; };\n    } else\n        // temp-fix: functions isn't supported correctly\n        if (key == \"value\" && value != null && !isPrimitive(value) && (typeof value != \"function\")) {\n            return fallThrough(value, key) ?? value ?? obj;\n        }\n    return value ?? obj;\n}\n\n// Safe getter with global re-entrancy guard to avoid recursive accessor loops\nexport const safeGet = (obj: any, key: any, rec?: any) => {\n    //const result = Reflect.get(obj, key, rec != null ? rec : obj);\n    //return typeof result == \"function\" ? bindCtx(obj, result) : result;\n\n    //\n    let result = undefined;\n    if (obj == null) { return obj; }\n\n    // @ts-ignore\n    let active = __safeGetGuard.getOrInsert(obj, new Set());\n    if (active?.has?.(key)) { return null; }\n\n    // directly return if not a getter\n    if (!isGetter(obj, key)) {\n        result ??= Reflect.get(obj, key, rec != null ? rec : obj);\n    } else {\n        active?.add?.(key);\n\n        //\n        try {\n            result = Reflect.get(obj, key, rec != null ? rec : obj);\n        } catch (_e) {\n            result = undefined;\n        } finally {\n            active.delete(key);\n            if (active?.size === 0) { __safeGetGuard?.delete?.(obj); }\n        }\n    }\n\n    //\n    return typeof result == \"function\" ? bindCtx(obj, result) : result;\n}\n\n// get reactive primitives (if native iterator is available, use it)\nconst systemGet = (target: any, name: any, registry: any)=>{\n    if (target == null || isPrimitive(target)) { return target; }\n\n    //\n    const exists = [\"deref\", \"bind\", \"@target\", $originalKey$, $extractKey$, $registryKey$]?.indexOf(name as any) < 0 ? safeGet(target, name as any)?.bind?.(target) : null;\n    if (exists != null) return null;\n\n    //\n    const $extK = [$extractKey$, $originalKey$];\n\n    //\n    if ($extK.indexOf(name as any) >= 0) { return safeGet(target, name as any) ?? target; }\n    if (name == $value)               { return safeGet(target, name) ?? safeGet(target, \"value\"); }\n    if (name == $registryKey$)        { return registry; } // @ts-ignore\n    if (name == Symbol.observable)    { return registry?.compatible; } // @ts-ignore\n    if (name == Symbol.subscribe)     { return (cb, prop?)=>affected(prop != null ? [target, prop] : target, cb); }\n    if (name == Symbol.iterator)      { return safeGet(target, name as any); }\n    if (name == Symbol.asyncIterator) { return safeGet(target, name as any); }\n    if (name == Symbol.dispose)       { return (prop?)=>{ safeGet(target, Symbol.dispose)?.(prop); unaffected(prop != null ? [target, prop] : target)}; }\n    if (name == Symbol.asyncDispose)  { return (prop?)=>{ safeGet(target, Symbol.asyncDispose)?.(prop); unaffected(prop != null ? [target, prop] : target); } } // @ts-ignore\n    if (name == Symbol.unsubscribe)   { return (prop?)=>unaffected(prop != null ? [target, prop] : target); }\n    if (typeof name == \"symbol\" && (name in target || safeGet(target, name) != null)) { return safeGet(target, name); }\n\n    /*\n    if (name == Symbol.toPrimitive)   { return (hint?)=>{\n        if (typeof safeGet(target, name) == \"function\") { return safeGet(target, name)?.(hint); };\n        if (safeGet(target, \"value\") != null && hasValue(target)) { return tryParseByHint(safeGet(target, \"value\"), hint); }\n    } }\n    if (name == Symbol.toStringTag) { return ()=>{\n        if (typeof safeGet(target, name) == \"function\") { return safeGet(target, name)?.(); };\n        if (safeGet(target, \"value\") != null && hasValue(target) && isPrimitive(safeGet(target, \"value\"))) { return String(safeGet(target, \"value\") ?? \"\") || \"\"; };\n        return String(safeGet(target, \"toString\")?.() ?? safeGet(target, \"valueOf\")?.() ?? target);\n    } }*/\n}\n\n//\nconst observableAPIMethods = (target, name, registry)=>{\n    if (name == \"subscribe\") {\n        return registry?.compatible?.[name] ?? ((handler)=>{\n            if (typeof handler == \"function\") {\n                return affected(target, handler);\n            } else\n            if (\"next\" in handler && handler?.next != null) {\n                const usub = affected(target, handler?.next), comp = handler?.[\"complete\"];\n                handler[\"complete\"] = (...args)=>{ usub?.(); return comp?.(...args); };\n                return handler[\"complete\"];\n            }\n        })\n    }\n}\n\n//\nexport class ObserveArrayMethod {\n    #name: string; #self: any; #handle: any;\n    constructor(name, self, handle) {\n        this.#name = name;\n        this.#self = self;\n        this.#handle = handle;\n    }\n\n    //\n    get(target, name, rec) {\n        const skip = systemSkipGet(target, name);\n        if (skip !== null) { return skip; }\n        return Reflect.get(target, name, rec);\n    }\n\n    //\n    apply(target, ctx, args) {\n        let added: [number, any, any][] = [], removed: [number, any, any][] = [];\n        let setPairs: [number, any, any][] = [];\n        let oldState: any[] = [...this.#self];\n        let idx: number = -1;\n\n        // execute operation\n        const result = Reflect.apply(target, ctx || this.#self, args);\n        if (this.#handle?.[$triggerLock]) {\n            if (Array.isArray(result)) { return observeArray(result); }\n            return result;\n        }\n\n        //\n        switch (this.#name) {\n            case \"push\"   : idx = oldState?.length; added = args; break;\n            case \"unshift\": idx = 0; added = args; break;\n            case \"pop\":\n                idx = oldState?.length - 1;\n                if (oldState.length > 0) { removed = [[idx - 1, oldState[idx - 1], null]]; }\n                break;\n            case \"shift\":\n                idx = 0;\n                if (oldState.length > 0) removed = [[idx, oldState[idx], null]];\n                break;\n            case \"splice\":\n                const [start, deleteCount, ...items] = args; idx = start;\n                added = deleteCount > 0 ? items.slice(deleteCount) : [];\n\n                // discount of replaced (assigned) elements\n                removed = deleteCount > 0 ? oldState?.slice?.(items?.length + start, start + (deleteCount - (items?.length || 0))) : [];\n\n                // fix index for remaining removed or added elements\n                idx += (deleteCount || 0) - (items?.length || 1);\n\n                // index assignment\n                if (deleteCount > 0 && items?.length > 0) {\n                    for (let i = 0; i < Math.min(deleteCount, items?.length ?? 0); i++) {\n                        setPairs.push([start + i, items[i], oldState?.[start + i] ?? null]);\n                    }\n                }\n                break;\n            case \"sort\":\n            case \"fill\":\n            case \"reverse\":\n            case \"copyWithin\":\n                // compare old and new state, find changed elements\n                idx = 0; for (let i = 0; i < oldState.length; i++) {\n                    if (isNotEqual(oldState[i], this.#self[i]))\n                        {\n                            setPairs.push([idx+i, this.#self[i], oldState[i]]);\n                        }\n                }\n                break;\n            // index assignment, args: [value, index]\n            case \"set\": idx = args[1];\n            setPairs.push([idx, args[0], oldState?.[idx] ?? null]); break;\n        }\n\n        // triggers on adding\n        const reg = subscriptRegistry.get(this.#self);\n        if (added?.length == 1) {\n            reg?.trigger?.(idx, added[0], null, added[0] == null ? \"@add\" : \"@set\");\n        } else if (added?.length > 1) {\n            reg?.trigger?.(idx, added, null, \"@addAll\");\n            added.forEach((item, I)=>reg?.trigger?.(idx+I, item, null, item == null ? \"@add\" : \"@set\"));\n        }\n\n        // triggers on changing\n        if (setPairs?.length == 1) {\n            reg?.trigger?.(setPairs[0]?.[0] ?? idx, setPairs[0]?.[1], setPairs[0]?.[2], setPairs[0]?.[2] == null ? \"@add\" : \"@set\");\n        } else if (setPairs?.length > 1) {\n            reg?.trigger?.(idx, setPairs, oldState, \"@setAll\");\n            setPairs.forEach((pair, I)=>reg?.trigger?.(pair?.[0] ?? idx+I, pair?.[1], pair?.[2], pair?.[2] == null ? \"@add\" : \"@set\"));\n        }\n\n        // triggers on removing\n        if (removed?.length == 1) {\n            reg?.trigger?.(idx, null, removed[0], removed[0] == null ? \"@add\" : \"@delete\");\n        } else if (removed?.length > 1) {\n            reg?.trigger?.(idx, null, removed, \"@clear\");\n            removed.forEach((item, I)=>reg?.trigger?.(idx+I, null, item, item == null ? \"@add\" : \"@delete\"));\n        }\n\n        //\n        if (result == target) { return new Proxy(result as any, this.#handle); };\n        if (Array.isArray(result)) { return observeArray(result); }\n        return result;\n    }\n}\n\n\n\n//\nconst triggerWhenLengthChange = (self, target, oldLen, newLen)=>{\n    const removedItems = (Number.isInteger(oldLen) && Number.isInteger(newLen) && newLen < oldLen) ? target.slice(newLen, oldLen) : [];\n    if (!self[$triggerLock] && oldLen !== newLen) {\n        const registry = (subscriptRegistry).get(target);\n\n        // emit removals if shrunk\n        if (removedItems.length === 1) {\n            registry?.trigger?.(newLen, null, removedItems[0], \"@delete\");\n        } else if (removedItems.length > 1) {\n            registry?.trigger?.(newLen, null, removedItems, \"@clear\");\n            removedItems.forEach((item, I) => registry?.trigger?.(newLen + I, null, item, \"@delete\"));\n        }\n\n        // emit additions if grown (holes are considered added undefined entries)\n        const addedCount = (Number.isInteger(oldLen) && Number.isInteger(newLen) && newLen > oldLen)\n            ? (newLen - oldLen) : 0;\n        if (addedCount === 1) {\n            registry?.trigger?.(oldLen, undefined, null, \"@add\");\n        } else if (addedCount > 1) {\n            const added = Array(addedCount).fill(undefined);\n            registry?.trigger?.(oldLen, added, null, \"@addAll\");\n            added.forEach((_, I) => registry?.trigger?.(oldLen + I, undefined, null, \"@add\"));\n        }\n    }\n}\n\n\n\n//\nexport class ObserveArrayHandler {\n    [$triggerLock]?: boolean;\n    constructor() {\n    }\n\n    //\n    has(target, name) { return Reflect.has(target, name); }\n\n    // TODO: some target with target[n] may has also reactive target[n]?.value, which (sometimes) needs to observe too...\n    // TODO: also, subscribe can't be too simply used more than once...\n    get(target, name, rec) {\n        const skip = systemSkipGet(target, name);\n        if (skip !== null) { return skip; }\n\n        //\n        if ([$extractKey$, $originalKey$, \"@target\", \"deref\"].indexOf(name as any) >= 0 && safeGet(target, name) != null && safeGet(target, name) != target) {\n            return typeof safeGet(target, name) == \"function\" ? safeGet(target, name)?.bind?.(target) : safeGet(target, name);\n        };\n\n        //\n        const registry = (subscriptRegistry)?.get?.(target);\n        const sys = systemGet(target, name, registry); if (sys != null) return sys;\n        const obs = observableAPIMethods(target, name, registry); if (obs != null) return obs;\n\n        //\n        if (name == $triggerLess) { return makeTriggerLess.call(this, this); }\n        if (name == $trigger) {\n            return (key: any = 0) => {\n                const v = safeGet(target, key);\n                return subscriptRegistry.get(target)?.trigger?.(key, v, undefined, \"@invalidate\");\n            };\n        }\n\n        //\n        if (name == \"@target\" || name == $extractKey$) return target;\n\n        //\n        if (name == \"x\") { return () => { return target?.x ?? target?.[0]; }; };\n        if (name == \"y\") { return () => { return target?.y ?? target?.[1]; }; };\n        if (name == \"z\") { return () => { return target?.z ?? target?.[2]; }; };\n        if (name == \"w\") { return () => { return target?.w ?? target?.[3]; }; };\n\n        //\n        if (name == \"r\") { return () => { return target?.r ?? target?.[0]; }; };\n        if (name == \"g\") { return () => { return target?.g ?? target?.[1]; }; };\n        if (name == \"b\") { return () => { return target?.b ?? target?.[2]; }; };\n        if (name == \"a\") { return () => { return target?.a ?? target?.[3]; }; };\n\n        // that case: target[n]?.(?{.?value})?\n        const got = safeGet(target, name) ?? (name == \"value\" ? safeGet(target, $value) : null);\n        if (typeof got == \"function\") { return new Proxy(typeof got == \"function\" ? got?.bind?.(target) : got, new ObserveArrayMethod(name, target, this)); };\n        return got;\n    }\n\n    //\n    set(target, name, value) {\n        if (typeof name != \"symbol\") {\n            // handle Array.length explicitly before numeric index normalization\n            if (Number.isInteger(parseInt(name))) { name = parseInt(name) ?? name; };\n        }\n\n        //\n        if (name == $triggerLock && value) { this[$triggerLock] = !!value; return true; }\n        if (name == $triggerLock && !value) { delete this[$triggerLock]; return true; }\n\n        // array property changes\n        const old = safeGet(target, name);\n\n        //\n        const xyzw = [\"x\", \"y\", \"z\", \"w\"];\n        const rgba = [\"r\", \"g\", \"b\", \"a\"];\n\n        //\n        const xyzw_idx = xyzw.indexOf(name);\n        const rgba_idx = rgba.indexOf(name);\n\n        //\n        let got = false;\n        if (xyzw_idx >= 0) { got = Reflect.set(target, xyzw_idx, value); } else\n        if (rgba_idx >= 0) { got = Reflect.set(target, rgba_idx, value); } else\n        { got = Reflect.set(target, name, value); }\n\n        // bit different trigger rules\n        if (name == \"length\") {\n            if (isNotEqual(old, value)) {\n                triggerWhenLengthChange(this, target, old, value);\n            }\n        }\n\n        //\n        if (!this[$triggerLock] && typeof name != \"symbol\" && isNotEqual(old, value)) {\n            (subscriptRegistry)?.get?.(target)?.trigger?.(name, value, old, typeof name == \"number\" ? \"@set\" : null);\n        }\n\n        //\n        return got;\n    }\n\n    //\n    deleteProperty(target, name) {\n        if (typeof name != \"symbol\") {\n            // handle Array.length explicitly before numeric index normalization\n            if (Number.isInteger(parseInt(name))) { name = parseInt(name) ?? name; };\n        }\n\n        //\n        if (name == $triggerLock) { delete this[$triggerLock]; return true; }\n\n        //\n        const old = safeGet(target, name);\n        const got = Reflect.deleteProperty(target, name);\n\n        //\n        if (!this[$triggerLock] && (name != \"length\" && name != $triggerLock && typeof name != \"symbol\")) {\n            if (old != null) {\n                (subscriptRegistry).get(target)?.trigger?.(name, name, old, typeof name == \"number\" ? \"@delete\" : null);\n            }\n        }\n\n        //\n        return got;\n    }\n}\n\n//\nexport class ObserveObjectHandler<T=any> {\n    [$triggerLock]?: boolean;\n    constructor() {}\n\n    // supports nested \"value\" objects and values\n    get(target, name: keyType, ctx) {\n        if ([$extractKey$, $originalKey$, \"@target\", \"deref\", \"then\", \"catch\", \"finally\"].indexOf(name as any) >= 0 && safeGet(target, name) != null && safeGet(target, name) != target) {\n            return typeof safeGet(target, name) == \"function\" ? bindCtx(target, safeGet(target, name)) : safeGet(target, name);\n        };\n\n        //\n        const registry = (subscriptRegistry).get(target) ?? subscriptRegistry.get(safeGet(target, \"value\") ?? target);\n        const sys = systemGet(target, name, registry); if (sys != null) return sys;\n\n        // drop into value if has\n        if (safeGet(target, name) == null &&\n            name != \"value\" && hasValue(target) &&\n            safeGet(target, \"value\") != null &&\n            (\n                typeof safeGet(target, \"value\") == \"object\" ||\n                typeof safeGet(target, \"value\") == \"function\"\n            ) &&\n            safeGet(safeGet(target, \"value\"), name) != null\n        ) {\n            target = safeGet(target, \"value\") ?? target;\n        }\n\n        //\n        const obs = observableAPIMethods(target, name, registry); if (obs != null) return obs;\n\n        //\n        // redirect to value key\n        if (name == $triggerLess) { return makeTriggerLess.call(this, this); }\n        if (name == $trigger) {\n            return (key: any = \"value\") => {\n                const v = safeGet(target, key);\n                const old = (key == \"value\") ? safeGet(target, $value) : undefined;\n                return subscriptRegistry.get(target)?.trigger?.(key, v, old, \"@invalidate\");\n            };\n        }\n\n        //\n        if (name == Symbol.toPrimitive) {\n            return (hint?) => {\n                const ft = fallThrough(target, name);\n                if (safeGet(ft, name)) return safeGet(ft, name)?.(hint);\n                if (isPrimitive(ft)) return tryParseByHint(ft, hint);\n                if (isPrimitive(safeGet(ft, \"value\"))) return tryParseByHint(safeGet(ft, \"value\"), hint);\n                return tryParseByHint(safeGet(ft, \"value\") ?? ft, hint);\n            }\n        }\n\n        //\n        if (name == Symbol.toStringTag) {\n            return () => {\n                const ft = fallThrough(target, name);\n                if (safeGet(ft, name)) return safeGet(ft, name)?.();\n                if (isPrimitive(ft)) return String(ft ?? \"\") || \"\";\n                if (isPrimitive(safeGet(ft, \"value\"))) return String(safeGet(ft, \"value\") ?? \"\") || \"\";\n                return String(safeGet(ft, \"value\") ?? ft ?? \"\") || \"\";\n            }\n        }\n\n        //\n        if (name == \"toString\") {\n            return () => {\n                const ft = fallThrough(target, name);\n                if (safeGet(ft, name)) return safeGet(ft, name)?.();\n                if (safeGet(ft, Symbol.toStringTag)) return safeGet(ft, Symbol.toStringTag)?.();\n                if (isPrimitive(ft)) return String(ft ?? \"\") || \"\";\n                if (isPrimitive(safeGet(ft, \"value\"))) return String(safeGet(ft, \"value\") ?? \"\") || \"\";\n                return String(safeGet(ft, \"value\") ?? ft ?? \"\") || \"\";\n            }\n        }\n\n        //\n        if (name == \"valueOf\") {\n            return () => {\n                const ft = fallThrough(target, name);\n                if (safeGet(ft, name)) return safeGet(ft, name)?.();\n                if (safeGet(ft, Symbol.toPrimitive)) return safeGet(ft, Symbol.toPrimitive)?.();\n                if (isPrimitive(ft)) return ft;\n                if (isPrimitive(safeGet(ft, \"value\"))) return safeGet(ft, \"value\");\n                return safeGet(ft, \"value\") ?? ft;\n            }\n        }\n\n        //\n        if (typeof name == \"symbol\" && (name in target || safeGet(target, name) != null)) { return safeGet(target, name); }\n\n        //\n        return fallThrough(target, name);\n    }\n\n    //\n    apply(target, ctx, args) { return Reflect.apply(target, ctx, args); }\n    ownKeys(target) { return Reflect.ownKeys(target); }\n    construct(target, args, newT) { return Reflect.construct(target, args, newT); }\n    isExtensible(target) { return Reflect.isExtensible(target); }\n\n    //\n    getOwnPropertyDescriptor(target, key) {\n        let got: TypedPropertyDescriptor<any> | undefined = undefined;\n        try { // @ts-ignore\n            __safeGetGuard?.getOrInsert?.(target, new Set())?.add?.(key);\n            if (__safeGetGuard?.get?.(target)?.has?.(key)) { got = undefined; }\n            got = Reflect.getOwnPropertyDescriptor(target, key);\n        } catch (e) {\n            got = undefined;\n        } finally {\n            __safeGetGuard?.get?.(target)?.delete?.(key);\n        }\n        return got;\n    }\n\n    // supports nested \"value\" objects\n    has(target, prop: keyType) { return (prop in target); }\n    set(target, name: keyType, value) {\n        const skip = systemSkipGet(target, name);\n        if (skip !== null) return skip;\n\n        //\n        return potentiallyAsync(value, (v) => {\n            const skip = systemSkipGet(v, name);\n            if (skip !== null) return skip;\n    \n            //\n            if (name == $triggerLock && value) { this[$triggerLock] = !!value; return true; }\n            if (name == $triggerLock && !value) { delete this[$triggerLock]; return true; }\n\n            // drop into value if has\n            const $original = target;\n\n            // drop into value if has\n            if (safeGet(target, name) == null &&\n                name != \"value\" && hasValue(target) &&\n                safeGet(target, \"value\") != null &&\n                (\n                    typeof safeGet(target, \"value\") == \"object\" ||\n                    typeof safeGet(target, \"value\") == \"function\"\n                ) &&\n                safeGet(safeGet(target, \"value\"), name) != null\n            ) {\n                target = safeGet(target, \"value\") ?? target;\n            }\n\n            //\n            if (typeof name == \"symbol\" && !(safeGet(target, name) != null && name in target)) return;\n            const oldValue = name == \"value\" ? (safeGet(target, $value) ?? safeGet(target, name)) : safeGet(target, name); target[name] = v; const newValue = safeGet(target, name) ?? v;\n            if (!this[$triggerLock] && typeof name != \"symbol\" && (safeGet(target, $isNotEqual) ?? isNotEqual)?.(oldValue, newValue)) {\n                const subscript = subscriptRegistry.get(target) ?? subscriptRegistry.get($original);\n                subscript?.trigger?.(name, v, oldValue);\n            };\n            return true;\n        })\n    }\n\n    //\n    deleteProperty(target, name: keyType) {\n        if (name == $triggerLock) { delete this[$triggerLock]; return true; }\n\n        // drop into value if has\n        if (safeGet(target, name) == null &&\n            name != \"value\" && hasValue(target) &&\n            safeGet(target, \"value\") != null &&\n            (\n                typeof safeGet(target, \"value\") == \"object\" ||\n                typeof safeGet(target, \"value\") == \"function\"\n            ) &&\n            safeGet(safeGet(target, \"value\"), name) != null\n        ) {\n            target = safeGet(target, \"value\") ?? target;\n        }\n\n        //\n        const oldValue = safeGet(target, name);\n        const result = Reflect.deleteProperty(target, name);\n\n        //\n        if (!this[$triggerLock] && (name != $triggerLock && typeof name != \"symbol\")) { (subscriptRegistry).get(target)?.trigger?.(name, null, oldValue); }\n        return result;\n    }\n}\n\n\n\n//\nexport class ObserveMapHandler<K=any, V=any> {\n    [$triggerLock]?: boolean;\n    constructor() { }\n\n    //\n    get(target, name: keyType, ctx) {\n        if ([$extractKey$, $originalKey$, \"@target\", \"deref\"].indexOf(name as any) >= 0 && safeGet(target, name) != null && safeGet(target, name) != target) {\n            return typeof safeGet(target, name) == \"function\" ?\n                bindCtx(target, safeGet(target, name)) : safeGet(target, name);\n        };\n\n        //\n        const registry = (subscriptRegistry).get(target);\n        const sys = systemGet(target, name, registry); if (sys != null) return sys;\n        const obs = observableAPIMethods(target, name, registry); if (obs != null) return obs;\n\n        //\n        target = (safeGet(target, $extractKey$) ?? safeGet(target, $originalKey$) ?? target);\n        const valueOrFx = bindCtx(target, /*Reflect.get(, name, ctx)*/safeGet(target, name));\n        if (typeof name == \"symbol\" && (name in target || safeGet(target, name) != null)) { return valueOrFx; }\n\n        //\n        if (name == $triggerLess) { return makeTriggerLess.call(this, this); }\n        if (name == $trigger) {\n            return (key: any) => {\n                if (key == null) { return; }\n                const v = target.get(key); if (v == null) { return; }\n                return subscriptRegistry.get(target)?.trigger?.(key, v, undefined, \"@set\");\n            };\n        }\n        \n        //\n        if (name == \"clear\") {\n            return () => {\n                const oldValues: any = Array.from(target?.entries?.() || []), result = valueOrFx();\n                oldValues.forEach(([prop, oldValue])=>{\n                    if (!this[$triggerLock] && oldValue) { (subscriptRegistry).get(target)?.trigger?.(prop, null, oldValue, \"@delete\"); }\n                });\n                return result;\n            };\n        }\n\n        //\n        if (name == \"delete\") {\n            return (prop, _ = null) => {\n                const oldValue = target.get(prop), result = valueOrFx(prop);\n                if (!this[$triggerLock] && oldValue) { (subscriptRegistry).get(target)?.trigger?.(prop, null, oldValue, \"@delete\"); }\n                return result;\n            };\n        }\n\n        //\n        if (name == \"set\") {\n            return (prop, value) => potentiallyAsyncMap(value, (v)=>{\n                const oldValue = target.get(prop), result = valueOrFx(prop, value);\n                if (isNotEqual(oldValue, result)) { if (!this[$triggerLock]) { (subscriptRegistry).get(target)?.trigger?.(prop, result, oldValue, oldValue == null ? \"@add\" : \"@set\"); } };\n                return result;\n            });\n        }\n\n        //\n        return valueOrFx;\n    }\n\n    //\n    set(target, name: keyType, value) {\n        if (name == $triggerLock) { this[$triggerLock] = !!value; return true; }\n        if (name == $triggerLock && !value) { delete this[$triggerLock]; return true; };\n        return Reflect.set(target, name, value);\n    }\n\n    // redirect to value key\n    has(target, prop: keyType) { return Reflect.has(target, prop); }\n    apply(target, ctx, args) { return Reflect.apply(target, ctx, args); }\n    construct(target, args, newT) { return Reflect.construct(target, args, newT); }\n    ownKeys(target) { return Reflect.ownKeys(target); }\n    isExtensible(target) { return Reflect.isExtensible(target); }\n\n    //\n    getOwnPropertyDescriptor(target, key) {\n        let got: TypedPropertyDescriptor<any> | undefined = undefined;\n        try { // @ts-ignore\n            __safeGetGuard?.getOrInsert?.(target, new Set())?.add?.(key);\n            if (__safeGetGuard?.get?.(target)?.has?.(key)) { got = undefined; }\n            got = Reflect.getOwnPropertyDescriptor(target, key);\n        } catch (e) {\n            got = undefined;\n        } finally {\n            __safeGetGuard?.get?.(target)?.delete?.(key);\n        }\n        return got;\n    }\n\n    //\n    deleteProperty(target, name: keyType) {\n        if (name == $triggerLock) { delete this[$triggerLock]; return true; }\n        const result = Reflect.deleteProperty(target, name);\n        return result;\n    }\n}\n\n//\nexport class ObserveSetHandler<T=any> {\n    [$triggerLock]?: boolean = false;\n    constructor() {}\n\n    //\n    get(target, name: keyType, ctx) {\n        if ([$extractKey$, $originalKey$, \"@target\", \"deref\"].indexOf(name as any) >= 0 && safeGet(target, name) != null && safeGet(target, name) != target) {\n            return typeof safeGet(target, name) == \"function\" ? bindCtx(target, safeGet(target, name)) : safeGet(target, name);\n        };\n\n        //\n        const registry = (subscriptRegistry).get(target);\n        const sys = systemGet(target, name, registry); if (sys != null) return sys;\n        const obs = observableAPIMethods(target, name, registry); if (obs != null) return obs;\n\n        // redirect to value key\n        target = (safeGet(target, $extractKey$) ?? safeGet(target, $originalKey$) ?? target);\n        const valueOrFx = bindCtx(target, safeGet(target, name));\n        if (typeof name == \"symbol\" && (name in target || safeGet(target, name) != null)) { return valueOrFx; }\n\n        //\n        if (name == $triggerLess) { return makeTriggerLess.call(this, this); }\n        if (name == $trigger) {\n            return (key: any) => {\n                if (key == null) return;\n                const v = target.has(key);\n                return subscriptRegistry.get(target)?.trigger?.(key, v, undefined, \"@invalidate\");\n            };\n        }\n        \n        //\n        if (name == \"clear\") {\n            return () => {\n                const oldValues = Array.from(target?.values?.() || []), result = valueOrFx();\n                oldValues.forEach((oldValue)=>{ if (!this[$triggerLock] && oldValue) { (subscriptRegistry).get(target)?.trigger?.(null, null, oldValue, \"@delete\"); } });\n                return result;\n            };\n        }\n\n        //\n        if (name == \"delete\") {\n            return (value) => {\n                const oldValue = target.has(value) ? value : null, result = valueOrFx(value);\n                if (!this[$triggerLock] && oldValue) { (subscriptRegistry).get(target)?.trigger?.(value, null, oldValue, \"@delete\"); }\n                return result;\n            };\n        }\n\n        //\n        if (name == \"add\") {\n            // TODO: add potentially async set\n            return (value) => {\n                const oldValue = target.has(value) ? value : null, result = valueOrFx(value);\n                if (isNotEqual(oldValue, value)) { if (!this[$triggerLock] && !oldValue) { (subscriptRegistry).get(target)?.trigger?.(value, value, oldValue, \"@add\"); } };\n                return result;\n            };\n        }\n\n        //\n        return valueOrFx;\n    }\n\n    //\n    set(target, name: keyType, value) {\n        if (name == $triggerLock && value) { this[$triggerLock] = !!value; return true; }\n        if (name == $triggerLock && !value) { delete this[$triggerLock]; return true; }\n        return Reflect.set(target, name, value);\n    }\n\n    // redirect to value key i\n    has(target, prop: keyType) { return Reflect.has(target, prop); }\n    apply(target, ctx, args) { return Reflect.apply(target, ctx, args); }\n    construct(target, args, newT) { return Reflect.construct(target, args, newT); }\n    ownKeys(target) { return Reflect.ownKeys(target); }\n    isExtensible(target) { return Reflect.isExtensible(target); }\n\n    //\n    getOwnPropertyDescriptor(target, key) {\n        let got: TypedPropertyDescriptor<any> | undefined = undefined;\n        try { // @ts-ignore\n            __safeGetGuard?.getOrInsert?.(target, new Set())?.add?.(key);\n            if (__safeGetGuard?.get?.(target)?.has?.(key)) { got = undefined; }\n            got = Reflect.getOwnPropertyDescriptor(target, key);\n        } catch (e) {\n            got = undefined;\n        } finally {\n            __safeGetGuard?.get?.(target)?.delete?.(key);\n        }\n        return got;\n    }\n\n    //\n    deleteProperty(target, name: keyType) {\n        if (name == $triggerLock) { delete this[$triggerLock]; return true; }\n        const result = Reflect.deleteProperty(target, name);\n        return result;\n    }\n}\n\n//\nexport const $isObservable = (target: any) => {\n    return !!((typeof target == \"object\" || typeof target == \"function\") && target != null && (target?.[$extractKey$] || target?.[$affected]));\n}\n\n//\nexport const observeArray  = <T = any>(arr: T[]): observeValid<T[]> => { return ($isObservable(arr) ? arr : wrapWith(arr, new ObserveArrayHandler())); };\nexport const observeObject = <T = any>(obj: T): observeValid<T> => { return ($isObservable(obj) ? (obj as observeValid<T>) : wrapWith(obj, new ObserveObjectHandler())); };\nexport const observeMap    = <K = any, V = any, T extends MapLike<K, V> = Map<K, V>>(map: T): observeValid<T> => { return ($isObservable(map) ? map : wrapWith(map, new ObserveMapHandler())); };\nexport const observeSet    = <K = any, V = any, T extends SetLike<K, V> = Set<K>>(set: T): observeValid<T> => { return ($isObservable(set) ? set : wrapWith(set, new ObserveSetHandler())); };\n","import { defaultByType, isPrimitive, $triggerLock, tryParseByHint, isArrayInvalidKey, type keyType } from \"fest/core\";\nimport { $value, $behavior, $promise, $extractKey$, $affected, $trigger } from \"../wrap/Symbol\";\nimport { addToCallChain, deref, type observeValid, type WeakKey } from \"../wrap/Utils\";\nimport { $isObservable, observeArray, observeMap, observeObject, observeSet } from \"./Specific\";\nimport { subscriptRegistry } from \"./Subscript\";\nimport { MethodsOf } from \"../wrap/Utils\";\nimport { affected } from \"./Mainline\";\nimport { hasValue } from \"fest/core\";\n\n//\nexport interface refWrap<T = any> {\n    [$promise]?: Promise<T>|null|undefined;\n    [$behavior]?: any;\n    [Symbol.toStringTag]?(): string;\n    [Symbol.toPrimitive]?(hint: any): any;\n    [$value]?: T;\n    set value(v: T|null|undefined);\n    get value(): T|null|undefined;\n}\n\n//\nexport type refType<T = any> = (refWrap<T> | (T extends object ? T : any)) & MethodsOf<T> & (T extends symbol | object | Function ? T : any);\n\n//\nexport const numberRef = (initial?: number|null|undefined|Promise<number>, behavior?: any): refType<number> => {\n    const isPromise = initial instanceof Promise || typeof (initial as unknown as Promise<number>)?.then == \"function\";\n    const obj: refWrap<number> = {\n        [$promise]: isPromise ? (initial as unknown as Promise<number>) : null as unknown as Promise<number>,\n        [$value]: isPromise ? 0 : (Number(deref(initial) || 0) || 0),\n        [$behavior]: behavior,\n        [Symbol?.toStringTag]() { return String(this?.[$value] ?? \"\") || \"\"; },\n        [Symbol?.toPrimitive](hint: any) { return tryParseByHint((typeof this?.[$value] != \"object\" ? this?.[$value] : (this?.[$value]?.value || 0)) ?? 0, hint); },\n        set value(v: any) { this[$value] = ((v != null && !Number.isNaN(v)) ? Number(v) : this[$value]) || 0; },\n        get value() { return Number(this[$value] || 0) || 0; }\n    };\n    const $r = observe(obj) as observeValid<refType<number>>; (initial as unknown as Promise<number>)?.then?.((v)=>$r.value = v); return $r;\n}\n\n//\nexport const stringRef = (initial?: string|null|undefined|Promise<string>, behavior?: any): refType<string> => {\n    const isPromise = initial instanceof Promise || typeof (initial as unknown as Promise<string>)?.then == \"function\";\n    const obj: refWrap<string> = {\n        [$promise]: isPromise ? (initial as unknown as Promise<string>) : null as unknown as Promise<string>,\n        [$value]: (isPromise ? \"\" : String(deref(typeof initial == \"number\" ? String(initial) : (initial || \"\")))) ?? \"\",\n        [$behavior]: behavior,\n        [Symbol?.toStringTag]() { return String(this?.[$value] ?? \"\") ?? \"\"; },\n        [Symbol?.toPrimitive](hint: any) { return tryParseByHint(this?.[$value] ?? \"\", hint); },\n        set value(v: any) { this[$value] = String(typeof v == \"number\" ? String(v) : (v || \"\")) ?? \"\"; },\n        get value() { return String(this[$value] ?? \"\") ?? \"\"; },\n    };\n    const $r = observe(obj) as observeValid<refType<string>>; (initial as unknown as Promise<string>)?.then?.((v)=>$r.value = v); return $r;\n}\n\n//\nexport const booleanRef = (initial?: boolean|null|undefined|Promise<boolean>, behavior?: any): refType<boolean> => {\n    const isPromise = initial instanceof Promise || typeof (initial as unknown as Promise<boolean>)?.then == \"function\";\n    const obj: refWrap<boolean> = {\n        [$promise]: isPromise ? (initial as unknown as Promise<boolean>) : null as unknown as Promise<boolean>,\n        [$value]: (isPromise ? false : ((deref(initial) != null ? (typeof deref(initial) == \"string\" ? true : !!deref(initial)) : false) || false)) || false,\n        [$behavior]: behavior,\n        [Symbol?.toStringTag]() { return String(this?.[$value] ?? \"\") || \"\"; },\n        [Symbol?.toPrimitive](hint: any) { return tryParseByHint(!!this?.[$value] || false, hint); },\n        set value(v: any) { this[$value] = (v != null ? (typeof v == \"string\" ? true : !!v) : this[$value]) || false; },\n        get value() { return this[$value] || false; }\n    };\n    const $r = observe(obj) as observeValid<refType<boolean>>; (initial as unknown as Promise<boolean>)?.then?.((v)=>$r.value = v); return $r;\n}\n\n//\nexport const wrapRef = <T = any>(initial?: T|null|undefined|Promise<T>, behavior?: any): observeValid<refType<T>> => {\n    const isPromise = initial instanceof Promise || typeof (initial as unknown as Promise<T>)?.then == \"function\";\n    const obj: refWrap<T> = {\n        [$promise]: isPromise ? (initial as unknown as Promise<T>) : null as unknown as Promise<T>,\n        [$behavior]: behavior,\n        [Symbol?.toStringTag]() { return String(this.value ?? \"\") || \"\"; },\n        [Symbol?.toPrimitive](hint: any) { return tryParseByHint(this.value, hint); },\n        value: isPromise ? null : deref(initial)\n    };\n    const $r = observe(obj) as observeValid<refType<T>>;\n    (initial as unknown as Promise<T>)?.then?.((v) => $r.value = v);\n    affected(initial, (v) => { /*wr?.deref?.()*/$r?.[$trigger]?.(); });\n    return $r;\n}\n\n//\nexport const propRef = <T = any>(src: observeValid<T>, srcProp: keyType | null = \"value\", initial?: any, behavior?: any): any => {\n    if (isPrimitive(src) || !src) return src;\n\n    //\n    if (Array.isArray(src) && !isArrayInvalidKey(src?.[1], src) && (Array.isArray(src?.[0]) || typeof src?.[0] == \"object\" || typeof src?.[0] == \"function\")) { src = src?.[0]; };\n\n    //\n    if ((srcProp ??= Array.isArray(src) ? null : \"value\") == null || isArrayInvalidKey(srcProp, src)) { return; }\n\n    // isn't needed to proxy reactive value, it's already reactive\n    if (srcProp && hasValue(src?.[srcProp]) && isObservable(src?.[srcProp])) {\n        return recoverReactive(src?.[srcProp]);\n    }\n\n    // legally use in LUR.E/GLit properties\n    if (srcProp && typeof src?.getProperty == \"function\" && isObservable(src?.getProperty?.(srcProp))) {\n        return src?.getProperty?.(srcProp);\n    }\n\n    // is regular object, isn't can be reactive (or reactive one-directional, not duplex), just return the value directly\n    //if (srcProp && !isObservable(src)) { return src?.[srcProp]; } // commented line means enabled one directional reactivity\n    //if (isReactive(src)) { src = recoverReactive(src); }; // recover no necessary, subscribe already checks if reactive\n\n    // truly reflective for object property key/index\n    const r: any = observe({\n        [$value]: ((src as any)[srcProp] ??= initial ?? (src as any)[srcProp]),\n        [$behavior]: behavior,\n        [Symbol?.toStringTag]() { return String(src?.[srcProp] ?? this[$value] ?? \"\") || \"\"; },\n        [Symbol?.toPrimitive](hint: any) { return tryParseByHint(src?.[srcProp], hint); },\n        set value(v) { r[$triggerLock] = true; (src as any)[srcProp] = (this[$value] = v ?? defaultByType((src as any)[srcProp])); r[$triggerLock] = false; },\n        get value() { return (this[$value] = src?.[srcProp] ?? this[$value]); }\n    });\n\n    // a reason, why regular objects isn't reactive directly, and may be single directional\n    // from 09.02.2026, do more aggresively reactive the source object\n    const usb = affected(src, (v) => { r?.[$trigger]?.(); /*r.value = src?.[srcProp] ?? r?.[$value];*/ });\n    addToCallChain(r, Symbol.dispose, usb);\n    return r;\n}\n\n//\nexport const $ref = <T = any>(typed: T|null|undefined|Promise<T>, behavior?: any): (T extends object|Function|symbol ? observeValid<T>|refType<T> : refType<T>) => {\n    switch (typeof typed) {\n        case \"boolean\": return booleanRef(typed, behavior) as refType<boolean>;\n        case \"number\" : return numberRef(typed, behavior) as refType<number>;\n        case \"string\" : return stringRef(typed, behavior) as refType<string>;\n        case \"object\" : if (typed != null) { return wrapRef(observe(typed), behavior) as any; }\n        default: return wrapRef(typed, behavior) as any;\n    }\n}\n\n//\nexport const ref = <T = any>(\n    typed: T | null | undefined | Promise<T>,\n    prop: keyType | null = \"value\",\n    behavior?: any\n): (\n    T extends object | Function | symbol ? observeValid<T> | refType<T> : refType<T>\n) & (\n    T extends symbol | object | Function ? T : any\n) => {\n    // 1. Ensure we have an observable or ref for the input\n    const $r = isObservable(typed)\n        ? (typed as observeValid<T>)\n        : ($ref(typed, behavior) as observeValid<T>);\n    \n    // 2. If a prop is given, get a ref to that prop, otherwise use the value as is\n    if (prop != null) {\n        // propRef always returns a refType<X> or observeValid<X>\n        // We cannot guarantee T extends prop type. So just return as best match\n        return propRef(\n            $r as unknown as refType<T>,\n            prop,\n            behavior\n        ) as any;\n    } else {\n        return $r as any;\n    }\n};\n\n//\nexport const promised = (promise: any, behavior?: any) => {\n    return ref(promise, behavior);\n}\n\n//\nexport const triggerWithDelay = (ref: any, cb: Function, delay = 100): ReturnType<typeof setTimeout> | undefined => { if (ref?.value ?? ref) { return setTimeout(()=>{ if (ref.value) cb?.(); }, delay); } }\n\n//\nexport const delayedBehavior  = (delay = 100) => {\n    return (cb: Function, [val], [sig]) => { let tm = triggerWithDelay(val, cb, delay); sig?.addEventListener?.(\"abort\", ()=>{ if (tm) clearTimeout(tm); }, { once: true }); };\n}\n\n//\nexport const delayedOrInstantBehavior = (delay = 100) => {\n    return (cb: Function, [val], [sig]) => { let tm = triggerWithDelay(val, cb, delay); sig?.addEventListener?.(\"abort\", ()=>{ if (tm) clearTimeout(tm); }, { once: true }); if (!tm) { cb?.(); }; };\n}\n\n\n\n//\nexport const observe = <T = any>(target: T, stateName?: string): observeValid<T> => {\n    if (target == null || typeof target == \"symbol\" || !(typeof target == \"object\" || typeof target == \"function\") || $isObservable(target)) {\n        return target as observeValid<T>;\n    }\n\n    //\n    if ((target = deref?.(target)) == null || target instanceof Promise || target instanceof WeakRef || $isObservable(target)) {\n        return target as observeValid<T>; // promise forbidden\n    }\n\n    //\n    const unwrap: any = target;\n    if (unwrap == null ||\n        typeof unwrap == \"symbol\" || !(typeof unwrap == \"object\" || typeof unwrap == \"function\") ||\n        unwrap instanceof Promise || unwrap instanceof WeakRef\n    ) { return unwrap as observeValid<T>; };\n\n    //\n    let reactive = unwrap;\n    if (Array.isArray(unwrap)) { reactive = observeArray(unwrap); return reactive; } else\n    if (unwrap instanceof Map) { reactive = observeMap(unwrap); return reactive; } else\n    if (unwrap instanceof Set) { reactive = observeSet(unwrap); return reactive; } else\n    if (typeof unwrap == \"function\" || typeof unwrap == \"object\") { reactive = observeObject(unwrap); return reactive; }\n    return reactive;\n}\n\n//\nexport const isObservable = (target: any) => {\n    if (typeof HTMLInputElement != \"undefined\" && target instanceof HTMLInputElement) { return true; }\n    return !!((typeof target == \"object\" || typeof target == \"function\") && target != null && (target?.[$extractKey$] || target?.[$affected] || subscriptRegistry?.has?.(target)));\n}\n\n//\nexport const recoverReactive = (target: any): any => {\n    return isObservable(target) ? observe(target) : null;\n}\n","import { callByAllProp, callByProp, hasValue, isKeyType, isNotEqual, isPrimitive, objectAssign } from \"fest/core\";\nimport { $extractKey$, $registryKey$, $affected, $trigger } from \"../wrap/Symbol\";\nimport { addToCallChain, safe, withPromise, type keyType, subValid, observeValid, isThenable } from \"../wrap/Utils\";\nimport { subscriptRegistry } from \"./Subscript\";\nimport { observableBySet, observableByMap } from \"./Assigned\";\nimport { isObservable } from \"./Primitives\";\n\n//\nexport const useObservable = <Under = any>(unwrap: any): observeValid<Under> => { // @ts-ignore\n    if (unwrap == null || (typeof unwrap != \"object\" && typeof unwrap != \"function\") || unwrap?.[Symbol.observable] != null) { return unwrap; } // @ts-ignore\n    try { unwrap[Symbol.observable] = self?.compatible; } catch (e) { console.warn(\"Unable to assign <[Symbol.observable]>, object will not observable by other frameworks\"); };\n    unwrap[$affected] = (cb)=>{ // @ts-ignore\n        const observable = unwrap?.[Symbol?.observable];\n        observable?.()?.affected?.(cb);\n        return () => observable?.()?.unaffected?.(cb);\n    }; // @ts-ignore\n    return unwrap;\n}\n\n//\ntype callable = (value: any, prop: keyType, old?: any, operation?: string | null) => void;\ntype subscript = (target: any, prop: keyType | null, cb: callable, ctx?: any) => any;\nexport const specializedSubscribe = new WeakMap<any, subscript>();\n\n//\nconst checkValidObj = (obj: any) => {\n    if (typeof obj == \"symbol\" || obj == null || !(typeof obj == \"object\" || typeof obj == \"function\")) return;\n    return obj;\n}\n\n//\nexport const subscribeDirectly: subscript = (target: any, prop: keyType | null, cb: (value: any, prop: keyType, old?: any, operation?: string|null) => void, ctx: any | null = null) => { if (!target) return;\n    if (!checkValidObj(target)) return;\n    const tProp = (prop != Symbol.iterator) ? prop : null;\n\n    //\n    let registry = target?.[$registryKey$] ?? (subscriptRegistry).get(target);\n\n    //\n    target = target?.[$extractKey$] ?? target;\n\n    //\n    queueMicrotask(() => {\n        if (tProp != null && tProp != Symbol.iterator) { callByProp(target, tProp, cb, ctx); } else { callByAllProp(target, cb, ctx); }\n    });\n\n    //\n    let unSub: any = registry?.affected?.(cb, tProp);\n    if (target?.[Symbol.dispose]) return unSub;\n\n    //\n    addToCallChain(unSub, Symbol.dispose, unSub);\n    addToCallChain(unSub, Symbol.asyncDispose, unSub);\n    addToCallChain(target, Symbol.dispose, unSub);\n    addToCallChain(target, Symbol.asyncDispose, unSub);\n    return unSub;\n}\n\n//\nexport const subscribeInput: subscript = (tg: HTMLInputElement, _: keyType | null, cb: (value: any, _: keyType, old?: any, operation?: string|null) => void, ctx: any | null = null) => {\n    // inputs now can be regally subscribed directly\n    const $opt: any = { }; let oldValue = tg?.value;\n    const $cb = (ev: any) => { cb?.(ev?.target?.value, \"value\", oldValue); oldValue = ev?.target?.value; };\n    (tg as any)?.addEventListener?.(\"change\", $cb, $opt);\n    return () => (tg as any)?.removeEventListener?.(\"change\", $cb, $opt);\n}\n\n//\nconst checkIsPaired = (tg: any) => {\n    return (Array.isArray(tg) && tg?.length == 2 && checkValidObj(tg?.[0])) && (isKeyType(tg?.[1]) || tg?.[1] == Symbol.iterator);\n}\n\n// split from prop pairs\nexport const subscribePaired: subscript = <Under = any>(tg: subValid<Under>, _: keyType | null, cb: (value: any, prop: keyType, old?: any, operation?: string|null) => void, ctx: any | null = null) => {\n    const prop = isKeyType(tg?.[1]) ? tg?.[1] : null;\n    return affected(tg?.[0], prop, cb, ctx);\n}\n\n//\nexport const subscribeThenable: subscript = (obj: any, prop: keyType | null, cb: (value: any, prop: keyType, old?: any, operation?: string|null) => void, ctx: any | null = null) => {\n    return obj?.then?.((obj: any) => affected?.(obj, prop, cb, ctx))?.catch?.((e: any) => { console.warn(e); return null; });\n}\n\n//\nexport const affected = (obj: any, prop: keyType | callable | null, cb: callable = ()=>{}, ctx?: any) => {\n    if (typeof prop == \"function\") { cb = prop; prop = null; }\n\n    //\n    if (isPrimitive(obj) || typeof obj == \"symbol\") { return queueMicrotask(() => { return cb?.(obj, null as any, null, null); }); }\n    if (typeof obj?.[$affected] == \"function\") {\n        return obj?.[$affected]?.(cb, prop, ctx);\n    } else\n    if (checkValidObj(obj)) {\n        const wrapped = obj;\n        obj = obj?.[$extractKey$] ?? obj;\n        if (specializedSubscribe?.has?.(obj)) {\n            return specializedSubscribe?.get?.(obj)?.(wrapped, prop, cb, ctx);\n        }\n\n        //\n        if (isObservable(wrapped) || (checkIsPaired(obj) && isObservable(obj?.[0]))) {\n            // when no exists, add a new specialized subscribe function\n            if (isThenable(obj)) //@ts-ignore\n                { return specializedSubscribe?.getOrInsert?.(obj, subscribeThenable)?.(obj, prop, cb, ctx); } else\n            if (checkIsPaired(obj))  //@ts-ignore\n                { return specializedSubscribe?.getOrInsert?.(obj, subscribePaired)?.(obj, prop, cb, ctx); } else\n            if (typeof HTMLInputElement != \"undefined\" && obj instanceof HTMLInputElement)  //@ts-ignore\n                { return specializedSubscribe?.getOrInsert?.(obj, subscribeInput)?.(obj, prop, cb, ctx); } else  //@ts-ignore\n                { return specializedSubscribe?.getOrInsert?.(obj, subscribeDirectly)?.(wrapped, prop, cb, ctx); }\n        } else {\n            return queueMicrotask(() => {\n                if (checkIsPaired(obj)) { return callByProp?.(obj?.[0], obj?.[1] as any, cb, ctx); }\n                if (prop != null && prop != Symbol.iterator) { return callByProp?.(obj, prop, cb, ctx); }\n                return callByAllProp?.(obj, cb, ctx);\n            });\n        }\n    }\n};\n\n//\nexport const makeArrayObservable = (tg)=>{\n    if (tg instanceof Set) return observableBySet(tg);\n    if (tg instanceof Map) return observableByMap(tg);\n    return tg;\n}\n\n//\nexport class DoubleWeakMap {\n    #top = new WeakMap(); // key1 -> WeakMap(key2 -> value)\n  \n    #ensureInner(key1) {\n        let inner = this.#top.get(key1);\n        if (!inner) {\n            inner = new WeakMap();\n            this.#top.set(key1, inner);\n        }\n        return inner;\n    }\n  \n    #splitPair(pair) {\n        if (!Array.isArray(pair) || pair.length !== 2) {\n            //throw new TypeError(\"Key must be a pair: [keyL1, keyL2]\");\n            return [null, null];\n        }\n        return pair;\n    }\n\n    hasL1(key1) {\n        return this.#top.has(key1);\n    }\n  \n    set(pair, value) {\n        const [key1, key2] = this.#splitPair(pair);\n        this.#ensureInner(key1).set(key2, value);\n        return this;\n    }\n  \n    get(pair) {\n        const [key1, key2] = this.#splitPair(pair);\n        return this.#top.get(key1)?.get(key2);\n    }\n  \n    has(pair) {\n        const [key1, key2] = this.#splitPair(pair);\n        return this.#top.get(key1)?.has(key2) ?? false;\n    }\n  \n    delete(pair) {\n        const [key1, key2] = this.#splitPair(pair);\n        const inner = this.#top.get(key1);\n        return inner ? inner.delete(key2) : false;\n    }\n  \n    deleteTop(key1) {\n        return this.#top.delete(key1);\n    }\n  \n    //  :  get-or-create (  \"computed\")\n    getOrCreate(pair, factory) {\n        const [key1, key2] = this.#splitPair(pair);\n        const inner = this.#ensureInner(key1);\n    \n        if (inner.has(key2)) return inner.get(key2);\n    \n        const value = factory();\n        inner.set(key2, value);\n        return value;\n    }\n  \n    // getOrInsert:     **  ( )\n    getOrInsert(pair, value) {\n        const [key1, key2] = this.#splitPair(pair);\n        const inner = this.#ensureInner(key1);\n    \n        if (inner.has(key2)) return inner.get(key2);\n    \n        inner.set(key2, value);\n        return value;\n    }\n  \n    // getOrInsertComputed:      fn(pair)  \n    // (,      )\n    getOrInsertComputed(pair, compute) {\n        const [key1, key2] = this.#splitPair(pair);\n        const inner = this.#ensureInner(key1);\n    \n        if (inner.has(key2)) return inner.get(key2);\n    \n        const value = compute([key1, key2]);\n        inner.set(key2, value);\n        return value;\n    }\n}\n\n//\nconst registeredIterated = new DoubleWeakMap();\n\n//\nexport const iterated = <T = any>(tg: subValid<T>, cb: (value: any, prop: keyType, old?: any, operation?: string|null) => void, ctx: any | null = null)=>{\n    if (!tg) return;\n\n    //\n    if (registeredIterated.has([tg, cb])) { return registeredIterated.get([tg, cb]); }\n\n    //\n    const $sub = (value: any, name: keyType, old?: any) => {\n        if (name == \"value\") {\n            //TODO: needs notify, that elements of arrayold is removed\n            const entries = (old?.value ?? old)?.entries?.();\n            const basis = (tg as any)?.value ?? value?.value ?? value;\n\n            //\n            if (entries) {\n                for (const [idx, item] of entries) {\n                    const ofOld = item ?? ((old?.value ?? old)?.[idx] ?? null);\n                    const ofNew = basis?.[idx];\n                    if (ofOld == null && ofNew != null) {\n                        cb(ofNew, idx, null, \"@add\");\n                    } else if (ofOld != null && ofNew == null) {\n                        cb(null, idx, ofOld, \"@delete\");\n                    } else if (isNotEqual(ofOld, ofNew)) {\n                        cb(ofNew, idx, ofOld, \"@set\");\n                    }\n                }\n            }\n            \n            //\n            return iterated(value ?? (tg as any)?.value, (value, prop, old, operation) => {\n                cb(value, prop, old, operation);\n            });\n        }\n        return tg[name];\n    }\n\n    // @ts-ignore\n    return registeredIterated.getOrInsertComputed([tg, cb], () => {\n        if (tg instanceof Set) { return affected([observableBySet(tg) as T, Symbol.iterator], cb, ctx); }\n        if (tg instanceof Map) { return affected(tg, cb, ctx); }\n        if (hasValue(tg)) { return affected(tg, $sub, ctx); }\n        if (Array.isArray(tg) && !(tg?.length == 2 && isKeyType(tg?.[1]) && isObservable(tg?.[0]))) { return affected([tg, Symbol.iterator], cb, ctx); }\n        return affected(tg, cb, ctx);\n    });\n}\n\n//\nexport const unaffected = <T = any>(tg: T, cb?: (value: any, prop: keyType, old?: any) => void, ctx: any | null = null) => {\n    return withPromise(tg, (target: any) => {\n        const isPair = Array.isArray(target) && target?.length == 2 && [\"object\", \"function\"].indexOf(typeof target?.[0]) >= 0 && isKeyType(target?.[1]);\n        const prop = isPair ? target?.[1] : null; target = (isPair && prop != null) ? (target?.[0] ?? target) : target;\n        const unwrap: any = (typeof target == \"object\" || typeof target == \"function\") ? (target?.[$extractKey$] ?? target) : target;\n        let self = target?.[$registryKey$] ?? (subscriptRegistry).get(unwrap);\n        self?.unaffected?.(cb, prop);\n    });\n}\n\n//\nexport const bindBy = <Under = any>(target, reactive: subValid<Under>, watch?) => {\n    affected(reactive, null, (v, p) => { objectAssign(target, v, p, true); });\n    watch?.(() => target, (N) => { for (const k in N) { objectAssign(reactive, N[k], k, true); } }, { deep: true });\n    return target;\n};\n\n//\nexport const derivate = <Under = any, T = observeValid<Under>>(from, reactFn: (value: any) => any, watch?) => bindBy(reactFn(safe(from)), from, watch);\nexport const bindByKey = <Under = any>(target, reactive: subValid<Under>, key = () => \"\") => affected(reactive, null, (value, p) => { if (p == key()) { objectAssign(target, value, null, true); } });\n","import { affected } from \"./Mainline\";\nimport { addToCallChain, observeValid, subValid, type keyType } from \"../wrap/Utils\";\nimport { observe, isObservable, triggerWithDelay, recoverReactive } from \"./Primitives\";\nimport { $promise, $triggerLock, $value, $behavior, $trigger } from \"../wrap/Symbol\";\nimport { $avoidTrigger, $getValue, hasValue, isArrayInvalidKey, isKeyType, isNotEqual, isPrimitive, objectAssignNotEqual, tryParseByHint, defaultByType, deref } from \"fest/core\";\n\n//\nexport const conditionalIndex = <Under = any>(condList: any[] = []): observeValid<Under> => { return computed(condList, () => condList.findIndex(cb => cb?.()), \"value\"); } // TODO: check\n\n//\n/*\nexport const conditionalRef = <Under = any>(cond: any, ifTrue: any, ifFalse: any, behavior?: any): refValid<Under> => {\n    const cur = autoRef((cond?.value ?? cond) ? ifTrue : ifFalse, behavior);\n    const usb = affected([cond, \"value\"], (val) => { if (cur != null && (typeof cur == \"object\" || typeof cur == \"function\")) cur.value = val ? ifTrue : ifFalse; });\n    addToCallChain(cur, Symbol.dispose, usb); return cur;\n}*/\n\n//\nexport const conditionalRef = <T = any>(cond: any, ifTrue: any, ifFalse: any, behavior?: any): observeValid<T> => {\n    if (isPrimitive(cond)) return cond ? ifTrue : ifFalse;\n\n    //\n    const getTrue = ()=>{ return ifTrue; };\n    const getFalse = ()=>{ return ifFalse; };\n\n    //\n    const valueOf = (n?: any)=>{\n        if (n != null) { cond.value = hasValue(n) ? n?.value : n; };\n        const cnd = hasValue(cond) ? cond?.value : cond;\n        return cnd ? getTrue() : getFalse();\n    }\n\n    // truly reflective\n    const r = observe({\n        [$value]: valueOf(),\n        [$behavior]: behavior,\n        [Symbol?.toStringTag]() { return String(valueOf() ?? this[$value] ?? \"\") || \"\"; },\n        [Symbol?.toPrimitive](hint: any) { return tryParseByHint(valueOf() ?? this[$value], hint); },\n        set value(v) { this[$value] = valueOf(v); },\n        get value() { return (this[$value] = valueOf() ?? this[$value]); }\n    });\n\n    //\n    const usb = affected([cond, \"value\"], (val)=>{ r?.[$trigger]?.(); });\n    addToCallChain(r, Symbol.dispose, usb); return r as unknown as observeValid<T>;\n}\n\n// alias\nexport const conditional = conditionalRef;\n\n//\n// used for redirection properties\n// !one-directional\nexport const remap = <T = any>(sub: subValid<T>, cb?: Function | null, dest?: any | null) => {\n    if (!dest) dest = observe({}) as any;\n    const usb = affected(sub, (value, prop, old) => {\n        const got = cb?.(value, prop, old);\n        if (typeof got == \"object\") { objectAssignNotEqual(dest, got); } else\n            if (isNotEqual(dest[prop], got)) dest[prop] = got;\n    });\n    if (dest) { addToCallChain(dest, Symbol.dispose, usb); }; return dest; // return reactive value\n}\n\n//\n// !one-directional\nexport const unified = <Under = any>(...subs: subValid<Under>[]) => {\n    const dest = observe({});\n    subs?.forEach?.((sub) => affected(sub, (value, prop, _) => {\n        if (isNotEqual(dest[prop], value)) { dest[prop] = value; };\n    })); return dest;\n}\n\n//\nexport const observableBySet = <T = any>(set: Set<T>): observeValid<T[]> => { // @ts-ignore\n    const obs: T[] = observe<T[]>([]) as observeValid<T[]>; // @ts-ignore\n    // Initialize with existing set entries\n    obs.push(...Array.from(set?.values?.() || [])); // @ts-ignore\n    addToCallChain(obs, Symbol.dispose, affected(set, (value, _, old) => { // @ts-ignore\n        if (isNotEqual(value, old)) {\n            if (old == null && value != null) {\n                obs.push(value);\n            } else\n                if (old != null && value == null) {\n                    const idx = obs.indexOf(old);\n                    if (idx >= 0) obs.splice(idx, 1);\n                } else {\n                    const idx = obs.indexOf(old);\n                    if (idx >= 0 && isNotEqual(obs[idx], value)) obs[idx] = value;\n                }\n        }\n    }));\n    return obs;\n}\n\n//\nexport const observableByMap = <T = any>(map: Map<any, T>): observeValid<[any, T][]> => { // @ts-ignore\n    const obs: [any, T][] = observe<[any, T][]>([]) as observeValid<[any, T][]>; // @ts-ignore\n\n    // Initialize with existing map entries\n    const initialEntries: [any, T][] = Array.from(map.entries());\n    obs.push(...initialEntries);\n\n    //\n    addToCallChain(obs, Symbol.dispose, affected(map, (value, prop, old) => {\n        if (isNotEqual(value, old) || (old == null && value != null) || (old != null && value == null)) {\n            if (old != null && value == null) {\n                // Map entry deleted (by name)\n                let idx = obs.findIndex(([name, _]) => (name == prop));\n\n                // alternative index search\n                if (idx < 0) idx = obs.findLastIndex(([_, val]) => (old === val));\n\n                // remove entry\n                if (idx >= 0) obs.splice(idx, 1);\n            } else {\n                // Map entry added or updated (by name)\n                let idx = obs.findIndex(([name, _]) => (name == prop));\n\n                // alternative index search\n                //if (idx < 0) idx = obs.findLastIndex(([_, val]) => (old === val));\n\n                //\n                if (idx >= 0 && idx < obs.length) {\n                    // Entry exists - update if value changed\n                    if (isNotEqual(obs[idx]?.[1], value)) {\n                        //obs[idx][1] = value;\n                        obs[idx] = [prop, value];\n                    }\n                } else {\n                    // New entry - add to array\n                    obs.push([prop, value]);\n                }\n            }\n        }\n    }));\n\n    //\n    return obs;\n}\n\n//\nexport interface PropStore {\n    unsub?: any;\n    bound?: any;\n    cmpfx?: any;\n    compute?: any;\n    dispose?: any;\n}\n\n//\nexport const assignMap = new WeakMap<any, Map<any, PropStore>>();\nexport const assign = <T = any>(a: subValid<T>, b: subValid<T>, prop: keyType | null = \"value\") => {\n    const isACompute = typeof a?.[1] == \"function\" && (a as [any, keyType])?.length == 2, isBCompute = typeof b?.[1] == \"function\" && (b as [any, keyType])?.length == 2, cmpBFnc = isBCompute ? b?.[1] : null;\n    const isAProp = (isKeyType(a?.[1]) || a?.[1] == Symbol.iterator) && (a as [any, keyType])?.length == 2; let a_prop = (isAProp && !isACompute) ? a?.[1] : (Array.isArray(a) ? null : prop); if (!isAProp && !isACompute) { a = [a, a_prop] as subValid<T>; }; if (isACompute) { a[1] = a_prop; };\n    const isBProp = (isKeyType(b?.[1]) || b?.[1] == Symbol.iterator) && (b as [any, keyType])?.length == 2; let b_prop = (isBProp && !isBCompute) ? b?.[1] : (Array.isArray(b) ? null : prop); if (!isBProp && !isBCompute) { b = [b, b_prop] as subValid<T>; }; if (isBCompute) { b[1] = b_prop; };\n\n    //\n    if (a_prop == null || b_prop == null || isArrayInvalidKey(a_prop, a?.[0]) || isArrayInvalidKey(b_prop, b?.[0])) { return; };\n    if (!((typeof b?.[0] == \"object\" || typeof b?.[0] == \"function\") && b?.[0] != null) && !Array.isArray(a[0]))\n        { $avoidTrigger(b, ()=>{ a[0][a_prop] = b?.[0]; }); return () => { }; };\n\n    //\n    const compute = (v, p) => {\n        const a_tmp = aRef?.deref?.();\n        const b_tmp = bRef?.deref?.();\n        if (assignMap?.get?.(a_tmp)?.get?.(a_prop)?.bound == b_tmp) {\n            let val: any = null;\n            const cmpfx = assignMap?.get?.(a_tmp)?.get?.(a_prop)?.cmpfx;\n            $avoidTrigger(b_tmp, ()=>{\n                if (typeof cmpfx == \"function\") { val = cmpfx?.($getValue(b_tmp) ?? v, p, null); } else { val = b_tmp?.[p] ?? v; };\n            });\n\n            //\n            const nv = $getValue(val);\n            if (isNotEqual(a_tmp[a_prop], nv)) {\n                $avoidTrigger(b_tmp, ()=>{ a_tmp[a_prop] = nv; });\n            };\n        } else {\n            const map = assignMap?.get?.(a_tmp);\n            const store = map?.get?.(a_prop);\n            store?.dispose?.();\n        }\n    };\n\n    //\n    const dispose = () => {\n        const a_tmp = aRef?.deref?.();\n        const map = assignMap?.get?.(a_tmp);\n        const store = map?.get?.(a_prop);\n        map?.delete?.(a_prop);\n        store?.unsub?.();\n    };\n\n    //\n    const\n        bRef = b?.[0] != null && (typeof b?.[0] == \"object\" || typeof b?.[0] == \"function\") && !(b?.[0] instanceof WeakRef || typeof b?.[0]?.deref == \"function\") ? new WeakRef(b?.[0]) : b?.[0],\n        aRef = a?.[0] != null && (typeof a?.[0] == \"object\" || typeof a?.[0] == \"function\") && !(a?.[0] instanceof WeakRef || typeof a?.[0]?.deref == \"function\") ? new WeakRef(a?.[0]) : a?.[0];\n\n    //\n    let store: PropStore = { compute, dispose, cmpfx: cmpBFnc };\n\n    //\n    const a_tmp = aRef?.deref?.(), b_tmp = bRef?.deref?.();\n    if (aRef instanceof WeakRef) {\n        if (assignMap?.get?.(a_tmp)?.get?.(a_prop)?.bound != b_tmp) {\n            assignMap?.get?.(a_tmp)?.delete?.(a_prop);\n        };\n\n        // @ts-ignore\n        const map = assignMap?.getOrInsert?.(a_tmp, new Map());\n        store = map?.getOrInsertComputed?.(a_prop, () => ({\n            bound: b_tmp,\n            cmpfx: cmpBFnc,\n            unsub: null,\n            compute,\n            dispose,\n        }));\n\n        //\n        store.unsub = affected(b, compute);\n        store.cmpfx = cmpBFnc;\n        addToCallChain(a_tmp, Symbol.dispose, store?.dispose);\n        addToCallChain(b_tmp, Symbol.dispose, store?.dispose);\n    }\n\n    // normalization isn't allowed for arrays\n    if (b_tmp && !Array.isArray(b_tmp)) {\n        $avoidTrigger(a_tmp, ()=>{\n            b_tmp[b_prop] ??= a_tmp?.[a_prop] ?? b_tmp[b_prop];\n        });\n    }\n\n    //\n    return store?.dispose;\n}\n\n//\nexport const link = <T = any>(a: subValid<T>, b: subValid<T>, prop: keyType | null = \"value\") => {\n    /*const isACompute = typeof a?.[1] == \"function\", isBCompute = typeof b?.[1] == \"function\";\n    const isAProp = (isKeyType(a?.[1]) || a?.[1] == Symbol.iterator) && (a as [any, keyType])?.length == 2; let a_prop = (isAProp && !isACompute) ? a?.[1] : prop; if (!isAProp && !isACompute) { a = [a, a_prop]; }; if (isACompute) { a[1] = a_prop; };\n    const isBProp = (isKeyType(b?.[1]) || b?.[1] == Symbol.iterator) && (b as [any, keyType])?.length == 2; let b_prop = (isBProp && !isBCompute) ? b?.[1] : prop; if (!isBProp && !isBCompute) { b = [b, b_prop]; }; if (isBCompute) { b[1] = b_prop; };\n    const usub = [ assign(a, b, b_prop), assign(b, a, a_prop) ];*/\n    const usub = [assign(a, b, prop), assign(b, a, prop)];\n    return () => usub?.map?.((c) => c?.());\n}\n\n//\nexport const computed = <T = any, OT = T>(src: subValid<T>, cb?: Function | null, behavior?: any, prop: keyType | null = \"value\"): observeValid<OT> => {\n    const isACompute = typeof src?.[1] == \"function\" && (src as [any, keyType])?.length == 2;\n    const isAProp = (isKeyType(src?.[1]) || src?.[1] == Symbol.iterator) && (src as [any, keyType])?.length == 2;\n    let a_prop = (isAProp && !isACompute) ? src?.[1] : (Array.isArray(src) ? null : prop);\n    if (!isAProp && !isACompute) { src = [(isAProp ? src?.[0] : src), a_prop] as subValid<T>; }; if (isACompute) { src[1] = a_prop; };\n    if (a_prop == null || isArrayInvalidKey(a_prop, src?.[0])) { return undefined as any; }\n\n    //\n    const cmp = (v?: any)=>{\n        let oldValue: any = undefined;\n        if (v != undefined) {\n            oldValue = src[0][a_prop];\n            src[0][a_prop] = v;\n        }\n        return cb?.(src?.[0]?.[a_prop], a_prop, oldValue);\n    };\n\n    //\n    const isPromise = false; const initial = cmp();\n    const rf: any = observe({\n        [$promise]: isPromise ? initial : undefined,\n        [$value]: initial,\n        [$behavior]: behavior,\n        [Symbol?.toStringTag]() { return String(cmp() ?? this[$value] ?? \"\") || \"\"; },\n        [Symbol?.toPrimitive](hint: any) { return tryParseByHint(cmp() ?? this[$value], hint); },\n        set value(v) { this[$value] = cmp(v); },\n        get value() { return (this[$value] = cmp() ?? this[$value]); }\n    });\n\n    //\n    const usb = affected([src?.[0] ?? src, a_prop ?? \"value\"], ()=>/*wr?.deref?.()*/rf?.[$trigger]?.())\n    //const usb = assign([rf, \"value\"], src, a_prop)\n    addToCallChain(rf, Symbol.dispose, usb); return rf;\n}\n\n//\nexport const delayedSubscribe = <Under = any>(ref: any, cb: Function, delay = 100): observeValid<Under> => {\n    let tm: any; //= triggerWithDelay(ref, cb, delay);\n    return affected([ref, \"value\"], (v) => {\n        if (!v && tm) { clearTimeout(tm); tm = null; } else\n            if (v && !tm) { tm = triggerWithDelay(ref, cb, delay) ?? tm; };\n    });\n}\n","import { numberRef } from \"fest/object\";\nimport { CSSBinder, CSSUnitConverter, CSSTransform, CSSCalc } from \"fest/lure\";\n\n// generate only random letters, NOT numbers\nexport const generateAnchorId = () => {\n    const randLetters = Math.random().toString(36).substring(2, 15).replace(/[0-9]/g, '');\n    return (\"--\" + randLetters);\n}\n\n//\nexport const getComputedZIndex = (element: HTMLElement): number => {\n    if (element?.computedStyleMap) {\n        return Number(element.computedStyleMap().get(\"z-index\")?.toString() || 0) || 0;\n    } else {\n        return Number(getComputedStyle((element as any)?.element ?? element).getPropertyValue(\"z-index\") || 0) || 0;\n    }\n}\n\n//\nexport const getExistsZIndex = (element: HTMLElement): number => {\n    if (!element) { return 0; }\n    if ((element as any)?.attributeStyleMap && (element as any).attributeStyleMap.get(\"z-index\") != null) { return Number((element as any).attributeStyleMap.get(\"z-index\")?.value ?? 0) || 0; }\n    if ((element as any)?.style && \"zIndex\" in (element as any).style && (element as any).style.zIndex != null) { return Number((element as any).style.zIndex || 0) || 0; }\n    return getComputedZIndex(element);\n}\n\n// Enhanced CSS utilities that work with reactive math\n\n// Reactive CSS value parser with unit conversion\nexport class ReactiveCSSValue {\n    private value: ReturnType<typeof numberRef>;\n    private unit: string;\n\n    constructor(initialValue: string | number, unit: string = 'px') {\n        const parsed = typeof initialValue === 'string'\n            ? CSSUnitConverter.parseValue(initialValue)\n            : { value: initialValue, unit };\n\n        this.value = numberRef(parsed.value);\n        this.unit = parsed.unit;\n    }\n\n    // Get reactive CSS string\n    get cssValue(): ReturnType<typeof numberRef> {\n        return CSSBinder.bindWithUnit({} as HTMLElement, '', this.value, this.unit);\n    }\n\n    // Convert to different unit reactively\n    toUnit(targetUnit: string): ReturnType<typeof numberRef> {\n        return CSSCalc.multiply(this.value, numberRef(1)); // Placeholder for unit conversion\n    }\n\n    // Bind to element property\n    bindTo(element: HTMLElement, property: string): () => void {\n        return CSSBinder.bindWithUnit(element, property, this.value, this.unit);\n    }\n}\n\n// Reactive transform builder\nexport class ReactiveTransform {\n    private transforms: ReturnType<typeof numberRef>[] = [];\n\n    translate(x: number | ReturnType<typeof numberRef>, y: number | ReturnType<typeof numberRef>): this {\n        const vector = typeof x === 'number' && typeof y === 'number'\n            ? { x: numberRef(x), y: numberRef(y) }\n            : { x: typeof x === 'number' ? numberRef(x) : x,\n                y: typeof y === 'number' ? numberRef(y) : y };\n        this.transforms.push(CSSTransform.translate2D(vector as any));\n        return this;\n    }\n\n    scale(x: number | ReturnType<typeof numberRef>, y?: number | ReturnType<typeof numberRef>): this {\n        const scaleX = typeof x === 'number' ? numberRef(x) : x;\n        const scaleY = y !== undefined ? (typeof y === 'number' ? numberRef(y) : y) : scaleX;\n        this.transforms.push(CSSTransform.scale2D({ x: scaleX, y: scaleY } as any));\n        return this;\n    }\n\n    rotate(angle: number | ReturnType<typeof numberRef>): this {\n        const angleRef = typeof angle === 'number' ? numberRef(angle) : angle;\n        this.transforms.push(CSSTransform.rotate(angleRef));\n        return this;\n    }\n\n    // Get combined transform string\n    get value(): ReturnType<typeof numberRef> {\n        return CSSTransform.combine(this.transforms);\n    }\n\n    // Bind to element\n    bindTo(element: HTMLElement): () => void {\n        return CSSBinder.bindTransform(element, { x: numberRef(0), y: numberRef(0) } as any);\n        // Note: This is a simplified binding - in practice you'd need to track all transform components\n    }\n}\n\n// Reactive CSS animation helper\nexport class ReactiveAnimation {\n    private element: HTMLElement;\n    private properties: Map<string, ReturnType<typeof numberRef>>;\n    private duration: number;\n    private easing: string;\n\n    constructor(element: HTMLElement, duration: number = 1000, easing: string = 'ease-out') {\n        this.element = element;\n        this.properties = new Map();\n        this.duration = duration;\n        this.easing = easing;\n    }\n\n    // Animate CSS property\n    animateProperty(property: string, from: number, to: number): this {\n        const value = numberRef(from);\n        this.properties.set(property, value);\n\n        // Bind to element\n        CSSBinder.bindWithUnit(this.element, property, value);\n\n        // Start animation\n        this.animateValue(value, from, to);\n        return this;\n    }\n\n    private animateValue(ref: ReturnType<typeof numberRef>, from: number, to: number): void {\n        const startTime = performance.now();\n\n        const animate = (currentTime: number) => {\n            const elapsed = currentTime - startTime;\n            const progress = Math.min(elapsed / this.duration, 1);\n\n            // Apply easing\n            const easedProgress = this.applyEasing(progress);\n            ref.value = from + (to - from) * easedProgress;\n\n            if (progress < 1) {\n                requestAnimationFrame(animate);\n            }\n        };\n\n        requestAnimationFrame(animate);\n    }\n\n    private applyEasing(t: number): number {\n        // Simple easing implementation\n        switch (this.easing) {\n            case 'ease-out':\n                return 1 - Math.pow(1 - t, 3);\n            case 'ease-in':\n                return t * t * t;\n            case 'ease-in-out':\n                return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;\n            default:\n                return t;\n        }\n    }\n}\n\n// Reactive CSS media query helper\nexport class ReactiveMediaQuery {\n    private query: string;\n    private matches: ReturnType<typeof numberRef>;\n\n    constructor(query: string) {\n        this.query = query;\n        this.matches = numberRef(0);\n\n        const mediaQuery = window?.matchMedia(query);\n        this.matches.value = mediaQuery.matches ? 1 : 0;\n\n        mediaQuery?.addEventListener('change', (e) => {\n            this.matches.value = e.matches ? 1 : 0;\n        });\n    }\n\n    get reactiveMatches(): ReturnType<typeof numberRef> {\n        return this.matches;\n    }\n\n    // Get reactive value based on media query\n    valueIfMatches<T>(ifTrue: T, ifFalse: T): T {\n        // This would need a computed value that switches based on matches\n        return this.matches.value ? ifTrue : ifFalse;\n    }\n}\n\n// Reactive viewport dimensions\nexport class ReactiveViewport {\n    static width: ReturnType<typeof numberRef> = numberRef(typeof window != \"undefined\" ? window?.innerWidth : 0);\n    static height: ReturnType<typeof numberRef> = numberRef(typeof window != \"undefined\" ? window?.innerHeight : 0);\n\n    static init(): void {\n        const updateSize = () => {\n            this.width.value = window?.innerWidth;\n            this.height.value = window?.innerHeight;\n        };\n\n        if (typeof window != \"undefined\") {\n            window?.addEventListener?.('resize', updateSize);\n        }\n    }\n\n    // Get reactive viewport center\n    static center(): { x: ReturnType<typeof numberRef>, y: ReturnType<typeof numberRef> } {\n        return {\n            x: CSSCalc.divide(this.width, numberRef(2)),\n            y: CSSCalc.divide(this.height, numberRef(2))\n        };\n    }\n}\n\n// Initialize viewport tracking\nReactiveViewport.init();\n\n// Reactive element dimensions\nexport class ReactiveElementSize {\n    private element: HTMLElement;\n    private size: { width: ReturnType<typeof numberRef>, height: ReturnType<typeof numberRef> };\n    private observer: ResizeObserver;\n\n    constructor(element: HTMLElement) {\n        this.element = element;\n        this.size = {\n            width: numberRef(element.offsetWidth),\n            height: numberRef(element.offsetHeight)\n        };\n\n        this.observer = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                if (entry.target === element) {\n                    this.size.width.value = entry.contentRect.width;\n                    this.size.height.value = entry.contentRect.height;\n                }\n            }\n        });\n\n        this.observer.observe(element);\n    }\n\n    get width(): ReturnType<typeof numberRef> { return this.size.width; }\n    get height(): ReturnType<typeof numberRef> { return this.size.height; }\n\n    // Get reactive center point\n    center(): { x: ReturnType<typeof numberRef>, y: ReturnType<typeof numberRef> } {\n        return {\n            x: CSSCalc.divide(this.size.width, numberRef(2)),\n            y: CSSCalc.divide(this.size.height, numberRef(2))\n        };\n    }\n\n    destroy(): void {\n        this.observer.disconnect();\n    }\n}\n\n// Reactive scroll position\nexport class ReactiveScroll {\n    private element: HTMLElement;\n    private scrollLeft: ReturnType<typeof numberRef>;\n    private scrollTop: ReturnType<typeof numberRef>;\n\n    constructor(element: HTMLElement = document.documentElement) {\n        this.element = element;\n        this.scrollLeft = numberRef(element.scrollLeft);\n        this.scrollTop = numberRef(element.scrollTop);\n\n        element.addEventListener('scroll', () => {\n            this.scrollLeft.value = element.scrollLeft;\n            this.scrollTop.value = element.scrollTop;\n        });\n    }\n\n    get left(): ReturnType<typeof numberRef> { return this.scrollLeft; }\n    get top(): ReturnType<typeof numberRef> { return this.scrollTop; }\n\n    // Get reactive scroll progress (0-1)\n    progress(axis: 'x' | 'y' = 'y'): ReturnType<typeof numberRef> {\n        const scrollSize = axis === 'x'\n            ? this.element.scrollWidth - this.element.clientWidth\n            : this.element.scrollHeight - this.element.clientHeight;\n\n        const scrollPos = axis === 'x' ? this.scrollLeft : this.scrollTop;\n\n        return CSSCalc.divide(scrollPos, numberRef(Math.max(scrollSize, 1)));\n    }\n}\n","import { getExistsZIndex, generateAnchorId } from \"./Utils\";\n\n//\nconst registeredAnchorIds = new WeakMap();\nconst registeredAnchors = new WeakMap();\n\n//\nexport class CSSAnchor {\n    source: HTMLElement;\n    anchorId: string;\n\n    //\n    constructor(source: HTMLElement) {\n        this.source = source; registeredAnchors.set(source, this); //@ts-ignore\n        this.anchorId = registeredAnchorIds.getOrInsert(source, generateAnchorId());\n        this.source.style.setProperty(\"anchor-name\", this.anchorId);\n        this.source.style.setProperty(\"position-visibility\", `always`);\n    }\n\n    //\n    connectElement(connect: HTMLElement, {\n        placement = \"fill\",\n        zIndexShift = 1,\n        inset = 0,\n        size = \"100%\",\n        transformOrigin = \"50% 50%\",\n    }) {\n        if (placement == \"fill\") {\n            connect.style.setProperty(\"inset-block-start\", `anchor(start, ${inset}px)`);\n            connect.style.setProperty(\"inset-inline-start\", `anchor(start, ${inset}px)`);\n            connect.style.setProperty(\"inset-block-end\", `anchor(end, ${inset}px)`);\n            connect.style.setProperty(\"inset-inline-end\", `anchor(end, ${inset}px)`);\n            connect.style.setProperty(\"inline-size\", `anchor-size(inline, ${size})`);\n            connect.style.setProperty(\"block-size\", `anchor-size(block, ${size})`);\n            connect.style.setProperty(\"transform-origin\", transformOrigin);\n        }\n        else if (placement == \"bottom\") {\n            connect.style.setProperty(\"inset-block-start\", `anchor(end, ${inset}px)`);\n            connect.style.setProperty(\"inset-inline-start\", `anchor(start, ${inset}px)`);\n            connect.style.setProperty(\"inline-size\", `anchor-size(self-inline, ${size})`);\n            connect.style.setProperty(\"transform-origin\", transformOrigin);\n        }\n        else if (placement == \"top\") {\n            connect.style.setProperty(\"inset-block-end\", `anchor(start, ${inset}px)`);\n            connect.style.setProperty(\"inset-inline-start\", `anchor(start, ${inset}px)`);\n            connect.style.setProperty(\"inline-size\", `anchor-size(self-inline, ${size})`);\n            connect.style.setProperty(\"transform-origin\", transformOrigin);\n        }\n        else if (placement == \"left\") {\n            connect.style.setProperty(\"inset-inline-start\", `anchor(end, ${inset}px)`);\n            connect.style.setProperty(\"inset-block-start\", `anchor(start, ${inset}px)`);\n            connect.style.setProperty(\"block-size\", `anchor-size(self-block, ${size})`);\n            connect.style.setProperty(\"transform-origin\", transformOrigin);\n        }\n        else if (placement == \"right\") {\n            connect.style.setProperty(\"inset-inline-end\", `anchor(start, ${inset}px)`);\n            connect.style.setProperty(\"inset-block-start\", `anchor(start, ${inset}px)`);\n            connect.style.setProperty(\"block-size\", `anchor-size(self-block, ${size})`);\n            connect.style.setProperty(\"transform-origin\", transformOrigin);\n        }\n        else if (placement == \"center\") {\n            connect.style.setProperty(\"inset-inline-start\", `anchor(center, ${inset}px)`);\n            connect.style.setProperty(\"inset-block-start\", `anchor(center, ${inset}px)`);\n            connect.style.setProperty(\"inline-size\", `anchor-size(self-inline, ${size})`);\n            connect.style.setProperty(\"block-size\", `anchor-size(self-block, ${size})`);\n            connect.style.setProperty(\"transform-origin\", transformOrigin);\n        }\n\n        //\n        connect.style.setProperty(\"position-visibility\", `always`);\n        connect.style.setProperty(\"position-anchor\", this.anchorId);\n        connect.style.setProperty(\"position\", `absolute`);\n        connect.style.setProperty(\"position-area\", `span-all`);\n        connect.style.setProperty(\"z-index\", String(getExistsZIndex(this.source ?? connect) + zIndexShift));\n        return this;\n    }\n\n    // Enhanced anchor positioning with container query awareness\n    connectWithContainerQuery(connect: HTMLElement, {\n        placement = \"fill\",\n        containerQuery = \"(min-width: 768px)\",\n        fallbackPlacement = \"bottom\",\n        zIndexShift = 1,\n        inset = 0,\n        size = \"100%\",\n    }) {\n        // Use container query to determine positioning strategy\n        const mediaQuery = globalThis.matchMedia ? globalThis.matchMedia(containerQuery) : null;\n        const updatePosition = () => {\n            const canUseAnchor = CSS.supports && CSS.supports(\"anchor-name\", this.anchorId);\n            const useModern = canUseAnchor && mediaQuery?.matches;\n\n            if (useModern) {\n                this.connectElement(connect, { placement, zIndexShift, inset, size });\n            } else {\n                // Fallback to traditional positioning\n                connect.style.removeProperty(\"position-anchor\");\n                connect.style.removeProperty(\"anchor-name\");\n                connect.style.setProperty(\"position\", \"absolute\");\n                connect.style.setProperty(\"z-index\", String(getExistsZIndex(this.source ?? connect) + zIndexShift));\n\n                // Simple fallback positioning based on source element\n                const sourceRect = this.source.getBoundingClientRect();\n\n                if (fallbackPlacement === \"bottom\") {\n                    connect.style.setProperty(\"top\", `${sourceRect.bottom + inset}px`);\n                    connect.style.setProperty(\"left\", `${sourceRect.left + inset}px`);\n                    connect.style.setProperty(\"width\", size);\n                } else if (fallbackPlacement === \"top\") {\n                    connect.style.setProperty(\"bottom\", `${globalThis.innerHeight - sourceRect.top + inset}px`);\n                    connect.style.setProperty(\"left\", `${sourceRect.left + inset}px`);\n                    connect.style.setProperty(\"width\", size);\n                } else if (fallbackPlacement === \"right\") {\n                    connect.style.setProperty(\"top\", `${sourceRect.top + inset}px`);\n                    connect.style.setProperty(\"left\", `${sourceRect.right + inset}px`);\n                    connect.style.setProperty(\"height\", size);\n                } else if (fallbackPlacement === \"left\") {\n                    connect.style.setProperty(\"top\", `${sourceRect.top + inset}px`);\n                    connect.style.setProperty(\"right\", `${globalThis.innerWidth - sourceRect.left + inset}px`);\n                    connect.style.setProperty(\"height\", size);\n                }\n            }\n        };\n\n        if (mediaQuery) {\n            mediaQuery.addEventListener(\"change\", updatePosition);\n            updatePosition();\n        }\n\n        return () => mediaQuery?.removeEventListener(\"change\", updatePosition);\n    }\n}\n\n//\nexport const makeAnchorElement = (anchorElement: HTMLElement) => { // @ts-ignore\n    return registeredAnchors.getOrInsert(anchorElement, new CSSAnchor(anchorElement));\n}\n","import { toRef, type keyType } from \"fest/core\";\nimport { deref, computed, affected, $affected } from \"fest/object\";\nimport { getPadding } from \"fest/dom\";\nimport { scrollRef, sizeRef } from \"fest/lure\";\nimport { makeAnchorElement } from \"./CSSAnchor\";\n\n//\nexport const $extract = Symbol.for(\"__extract\");\nexport const $element = Symbol.for(\"__element\");\n\n//\nexport const timelineHandler = {\n    [Symbol.for(\"__extract\")](target) {\n        return target.source;\n    },\n    get(target, prop, receiver) {\n        if (prop in target)  { return Reflect.get(target, prop, receiver ?? target); }\n        if (prop == \"value\") { return (target?.currentTime ?? 0) / (target?.duration ?? 1); }\n\n        // @ts-ignore\n        if (prop == $affected && (target instanceof ScrollTimeline || target instanceof ViewTimeline)) {\n            return (cb: (value: any, prop: keyType) => void, prop?: keyType | null) => {\n                const $cb = ()=> { queueMicrotask(()=> cb((target?.currentTime ?? 0) / (target?.duration ?? 1), \"value\")); }\n\n                // @ts-ignore\n                if (target instanceof ScrollTimeline) {\n                    target?.source?.addEventListener?.(\"scroll\", $cb);\n                    const $observer = new ResizeObserver((entries)=>entries.forEach((entry)=>$cb?.()));\n                    $observer.observe(target?.source, { box: \"content-box\" }); target?.source?.addEventListener?.(\"scroll\", $cb);\n                    return ()=>{ $observer.disconnect(); target?.source?.removeEventListener?.(\"scroll\", $cb); }\n                } else // @ts-ignore\n                if (target instanceof ViewTimeline) {\n                    const $observer = new IntersectionObserver((entries)=>entries.forEach((entry)=>$cb?.()), target?.observerOptions ?? { root: target?.source?.offsetParent ?? document.documentElement, rootMargin: \"0px\", threshold: [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0] });\n                    $observer.observe(target?.source); target?.source?.addEventListener?.(\"scroll\", $cb);\n                    return ()=>{ $observer.disconnect(); target?.source?.removeEventListener?.(\"scroll\", $cb); }\n                }\n            }\n        }\n        if (prop == $extract) { return target; }\n        if (prop == $element || prop == \"element\") { return target.source?.element ?? target.source; }\n        return Reflect.get(target.source, prop, receiver ?? target.source);\n    },\n    set(target, prop, value, receiver) {\n        if (prop in target) {\n            Reflect.set(target, prop, value, receiver ?? target);\n        } else\n        if (target.source) {\n            // @ts-ignore\n            Reflect.set(target.source, prop, value, receiver ?? target.source);\n        }\n        return true;\n    },\n    has(target, prop) {\n        return Reflect.has(target, prop) || Reflect.has(target.source, prop);\n    },\n    deleteProperty(target, prop) {\n        if (prop in target) {\n            return Reflect.deleteProperty(target, prop);\n        } else\n        if (target.source) {\n            // @ts-ignore\n            return Reflect.deleteProperty(target.source, prop);\n        }\n        return true;\n    },\n    ownKeys(target) {\n        return [...Reflect.ownKeys(target), ...Reflect.ownKeys(target.source)];\n    },\n    getOwnPropertyDescriptor(target, prop) {\n        return { ...Reflect.getOwnPropertyDescriptor(target, prop), ...Reflect.getOwnPropertyDescriptor(target.source, prop) };\n    },\n    getPrototypeOf(target) {\n        return Reflect.getPrototypeOf(target);\n    },\n    setPrototypeOf(target, proto) {\n        return Reflect.setPrototypeOf(target, proto);\n    },\n    isExtensible(target) {\n        return Reflect.isExtensible(target);\n    },\n    preventExtensions(target) {\n        return Reflect.preventExtensions(target);\n    }\n}\n\n//\nexport const $makeScrollTimeline = (source: HTMLElement & {element?: HTMLElement}, axis: \"inline\" | \"block\") => {\n    // @ts-ignore\n    return new Proxy(new ScrollTimeline({ source: source?.element ?? source, axis }), timelineHandler);\n}\n\n//\nexport const $makeViewTimeline = (source: HTMLElement & {element?: HTMLElement}, axis: \"inline\" | \"block\") => {\n    // @ts-ignore\n    return new Proxy(new ViewTimeline({ source: source?.element ?? source, axis }), timelineHandler);\n};\n\n// Enhanced timeline with anchor positioning and container query support\nexport class EnhancedScrollTimeline {\n    source: HTMLElement & {element?: HTMLElement};\n    axis: \"inline\" | \"block\";\n    timeline: any;\n    anchor?: any;\n\n    //\n    constructor(sourceOrOptions: HTMLElement & {element?: HTMLElement} | { source: HTMLElement & {element?: HTMLElement}, axis: \"inline\" | \"block\" }, $options?: {\n        useAnchor?: boolean;\n        anchorElement?: HTMLElement;\n    } | (\"inline\" | \"block\")) {\n        let options: any = !(sourceOrOptions instanceof HTMLElement) ? sourceOrOptions : {};\n\n        //\n        if (sourceOrOptions instanceof HTMLElement) {\n            this.source = sourceOrOptions;\n            this.axis = typeof $options == \"string\" ? $options as \"inline\" | \"block\" : \"inline\";\n        } else {\n            this.source = options?.source;\n            this.axis = options?.axis ?? \"inline\";\n            this.anchor = options?.anchorElement;\n        }\n\n        // @ts-ignore\n        this.timeline = $makeScrollTimeline(this.source, this.axis);\n\n        // Import CSSAnchor dynamically to avoid circular dependencies\n        if (!(typeof $options == \"string\") && $options?.useAnchor && !this.anchor) {\n            this.anchor = makeAnchorElement(this.source);\n        }\n    }\n\n    //\n    get [$extract]() {\n        return this.timeline?.source ?? this.source;\n    }\n\n    //\n    get [$affected]() {\n        return (cb: (value: any, prop: keyType) => void, prop?: keyType | null) => {\n            const $cb = ()=> { queueMicrotask(()=> cb((this.timeline?.currentTime ?? 0) / (this.timeline?.duration ?? 1), \"value\")); }\n            this.timeline?.addEventListener?.(\"scroll\", $cb);\n            return ()=> this.timeline?.removeEventListener?.(\"scroll\", $cb);\n        }\n    }\n\n    //\n    get element() {\n        const $src = this.timeline?.source ?? this.source;\n        return $src?.element ?? $src;\n    }\n\n    //\n    get value() {\n        return this.progress;\n    }\n\n    //\n    get currentTime() {\n        return this.timeline?.currentTime ?? 0;\n    }\n\n    //\n    get duration() {\n        return this.timeline?.duration ?? 1;\n    }\n\n    // Get current scroll progress as reactive value (0-1)\n    get progress() {\n        try {\n            const maxScroll = this.source[['scrollWidth', 'scrollHeight'][this.axis === 'inline' ? 0 : 1]] -\n                             this.source[['clientWidth', 'clientHeight'][this.axis === 'inline' ? 0 : 1]];\n            const currentScroll = this.source[['scrollLeft', 'scrollTop'][this.axis === 'inline' ? 0 : 1]];\n            return maxScroll > 0 ? currentScroll / maxScroll : 0;\n        } catch {\n            return 0;\n        }\n    }\n\n    // Scroll to specific progress (0-1)\n    scrollTo(progress: number, smooth = true) {\n        const maxScroll = this.source[['scrollWidth', 'scrollHeight'][this.axis === 'inline' ? 0 : 1]] -\n                         this.source[['clientWidth', 'clientHeight'][this.axis === 'inline' ? 0 : 1]];\n        const scrollPos = Math.max(0, Math.min(1, progress)) * maxScroll;\n\n        this.source.scrollTo({\n            [['left', 'top'][this.axis === 'inline' ? 0 : 1]]: scrollPos,\n            behavior: smooth ? 'smooth' : 'instant'\n        });\n    }\n\n    // Scroll by relative amount\n    scrollBy(delta: number, smooth = true) {\n        this.source.scrollBy({\n            [['left', 'top'][this.axis === 'inline' ? 0 : 1]]: delta,\n            behavior: smooth ? 'smooth' : 'instant'\n        });\n    }\n\n    // Get scrollable area info\n    getScrollInfo() {\n        const axisIdx = this.axis === 'inline' ? 0 : 1;\n        return {\n            scrollSize: this.source[['scrollWidth', 'scrollHeight'][axisIdx]],\n            clientSize: this.source[['clientWidth', 'clientHeight'][axisIdx]],\n            scrollPos: this.source[['scrollLeft', 'scrollTop'][axisIdx]],\n            maxScroll: this.source[['scrollWidth', 'scrollHeight'][axisIdx]] - this.source[['clientWidth', 'clientHeight'][axisIdx]],\n            progress: this.progress\n        };\n    }\n}\n\n// Enhanced ViewTimeline with intersection awareness\nexport class EnhancedViewTimeline {\n    source: HTMLElement & {element?: HTMLElement};\n    axis: \"inline\" | \"block\";\n    timeline: any;\n    intersectionObserver?: IntersectionObserver;\n    threshold?: number[];\n    root?: HTMLElement;\n    rootMargin?: string;\n    observerOptions?: IntersectionObserverInit;\n\n    //\n    constructor(sourceOrOptions: HTMLElement & {element?: HTMLElement} | { source: HTMLElement & {element?: HTMLElement}, axis: \"inline\" | \"block\" }, $options?: {\n        root?: HTMLElement;\n        rootMargin?: string;\n        threshold?: number[];\n    } | (\"inline\" | \"block\")) {\n        let options: any = !(sourceOrOptions instanceof HTMLElement) ? sourceOrOptions : {};\n\n        //\n        if (sourceOrOptions instanceof HTMLElement) {\n            this.source = sourceOrOptions as HTMLElement & {element?: HTMLElement};\n            this.axis = typeof $options == \"string\" ? $options as \"inline\" | \"block\" : \"inline\";\n        } else {\n            this.source = options?.source as HTMLElement & {element?: HTMLElement};\n            this.axis = options?.axis ?? \"inline\";\n            this.threshold = options?.threshold || [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0];\n            this.root = options?.root;\n            this.rootMargin = options?.rootMargin || '0px';\n            this.observerOptions = options ?? {\n                root: this.root,\n                rootMargin: this.rootMargin,\n                threshold: this.threshold\n            };\n        }\n\n        // @ts-ignore\n        this.timeline = $makeViewTimeline(this.source, this.axis);\n    }\n\n    //\n    get [$extract]() {\n        return this.timeline?.source ?? this.source;\n    }\n\n    //\n    get element() {\n        const $src = this.timeline?.source ?? this.source;\n        return $src?.element ?? $src;\n    }\n\n    //\n    get value() {\n        return (this.timeline?.currentTime ?? 0) / (this.timeline?.duration ?? 1);\n    }\n\n    //\n    get currentTime() {\n        return this.timeline?.currentTime ?? 0;\n    }\n\n    //\n    get duration() {\n        return this.timeline?.duration ?? 1;\n    }\n\n    //\n    get [$affected]() {\n        return (cb: (value: any, prop: keyType) => void, prop?: keyType | null) => {\n            const $cb = ()=> { queueMicrotask(()=> cb((this.timeline?.currentTime ?? 0) / (this.timeline?.duration ?? 1), \"value\")); }\n            const $observer = new IntersectionObserver((entries)=>entries.forEach((entry)=>$cb?.()));\n            $observer.observe(this.source);\n            return ()=> $observer.disconnect();\n        }\n    }\n\n    private setupIntersectionObserver() {\n        this.intersectionObserver = new IntersectionObserver((entries)=>this.handleIntersection(entries));\n        this.intersectionObserver.observe(this.source);\n    }\n\n    private handleIntersection(entries: IntersectionObserverEntry[]) {\n        for (const entry of entries) {\n            // Custom intersection handling logic\n            const ratio = entry.intersectionRatio;\n            const rect = entry.boundingClientRect;\n\n            // Update timeline progress based on intersection\n            if (this.axis === 'block') {\n                // Vertical intersection\n                const progress = rect.top < 0 ?\n                    Math.abs(rect.top) / (rect.height + globalThis.innerHeight) :\n                    1 - (rect.bottom / (rect.height + globalThis.innerHeight));\n                this.updateProgress(Math.max(0, Math.min(1, progress)));\n            } else {\n                // Horizontal intersection\n                const progress = rect.left < 0 ?\n                    Math.abs(rect.left) / (rect.width + globalThis.innerWidth) :\n                    1 - (rect.right / (rect.width + globalThis.innerWidth));\n                this.updateProgress(Math.max(0, Math.min(1, progress)));\n            }\n        }\n    }\n\n    private updateProgress(progress: number) {\n        // Update timeline progress (implementation depends on browser support)\n        if (this.timeline && 'currentTime' in this.timeline) {\n            try {\n                // @ts-ignore\n                this.timeline.currentTime = progress * 100; // CSS progress is 0-100\n            } catch (e) {\n                // Fallback for browsers without currentTime support\n                console.warn('Timeline currentTime not supported:', e);\n            }\n        }\n    }\n\n    destroy() {\n        this.timeline?.disconnect();\n    }\n}\n\n//\nexport const makeScrollTimeline = (source: HTMLElement & {element?: HTMLElement}, axis: \"inline\" | \"block\") => {\n    // @ts-ignore\n    if (typeof ScrollTimeline != \"undefined\") {\n        return new EnhancedScrollTimeline({ source: source?.element ?? source, axis: axis as \"inline\" | \"block\" });\n    }\n\n    //\n    const target   = toRef(source);\n    const scroll   = scrollRef(source, ([\"inline\", \"block\"] as [\"inline\", \"block\"])[axis]);\n    const content  = computed(sizeRef(source, ([\"inline\", \"block\"] as [\"inline\", \"block\"])[axis], \"content-box\"), (v)=>(v + getPadding(source, ([\"inline\", \"block\"] as [\"inline\", \"block\"])[axis])));\n    const percent  = computed (scroll, (vl)=> ((vl || 0) / ((deref(target)?.[['scrollWidth', 'scrollHeight'][axis]] - content?.value) || 1)));\n    affected(content, (vl: any) => ((scroll?.value || 0) / ((deref(target)?.[['scrollWidth', 'scrollHeight'][axis]] - vl) || 1)));\n    return percent;\n}\n","// CSS Animated Reference (by JS Animation API)\n// Has previous (started) state\n// And current (to) state\n// Animates when bound with style property, by change value\n\nimport { numberRef, stringRef, affected } from \"fest/object\";\nimport { toRef, deref, $getValue } from \"fest/core\";\nimport { makeRAFCycle, setProperty } from \"fest/dom\";\nimport { $extract } from \"./CSSTimeline\";\n\n/**\n * Animation configuration options\n */\nexport interface AnimationOptions {\n    duration?: number;\n    easing?: string;\n    delay?: number;\n    direction?: 'normal' | 'reverse' | 'alternate' | 'alternate-reverse';\n    iterations?: number;\n    fill?: 'none' | 'forwards' | 'backwards' | 'both';\n}\n\n/**\n * Transition configuration options\n */\nexport interface TransitionOptions {\n    duration?: number;\n    easing?: string;\n    delay?: number;\n    property?: string;\n}\n\n/**\n * Animation binding state for tracking active animations\n */\nclass AnimationState {\n    private animations = new Map<string, Animation>();\n    private transitions = new Map<string, string>();\n\n    setAnimation(property: string, animation: Animation) {\n        this.animations.set(property, animation);\n    }\n\n    getAnimation(property: string): Animation | undefined {\n        return this.animations.get(property);\n    }\n\n    cancelAnimation(property: string) {\n        const animation = this.animations.get(property);\n        if (animation) {\n            animation.cancel();\n            this.animations.delete(property);\n        }\n    }\n\n    setTransition(element: HTMLElement, property: string, options: TransitionOptions) {\n        const duration = options.duration || 200;\n        const easing = options.easing || 'ease';\n        const delay = options.delay || 0;\n\n        const transitionValue = `${property} ${duration}ms ${easing} ${delay}ms`;\n        const existingTransition = this.transitions.get(property);\n\n        if (existingTransition !== transitionValue) {\n            this.transitions.set(property, transitionValue);\n            this.updateElementTransitions(element);\n        }\n    }\n\n    private updateElementTransitions(element: HTMLElement) {\n        const transitions = Array.from(this.transitions.values()).join(', ');\n        element.style.transition = transitions;\n    }\n\n    clearTransitions(element: HTMLElement) {\n        this.transitions.clear();\n        element.style.transition = '';\n    }\n\n    cancelAll(element: HTMLElement) {\n        // Use Array.from to create a copy for iteration (fixes downlevelIteration issue)\n        const animationValues = Array.from(this.animations.values());\n        for (const animation of animationValues) {\n            animation.cancel();\n        }\n        this.animations.clear();\n        this.clearTransitions(element);\n    }\n\n    getAnimations(): Map<string, Animation> {\n        return this.animations;\n    }\n}\n\n// Global animation state registry\nconst animationStates = new WeakMap<HTMLElement, AnimationState>();\n\n/**\n * Get or create animation state for an element\n */\nfunction getAnimationState(element: HTMLElement): AnimationState {\n    let state = animationStates.get(element);\n    if (!state) {\n        state = new AnimationState();\n        animationStates.set(element, state);\n    }\n    return state;\n}\n\n/**\n * Animation binding options for different animation types\n */\nexport interface SpringOptions {\n    stiffness?: number;\n    damping?: number;\n    mass?: number;\n    velocity?: number;\n}\n\n/**\n * Animated style change handler using Web Animations API\n * Creates smooth transitions between values\n */\nexport function handleAnimatedStyleChange(\n    element: HTMLElement,\n    property: string,\n    value: any,\n    options: AnimationOptions = {}\n): void {\n    if (!element || !property) return;\n\n    const state = getAnimationState(element);\n    const currentValue = element.style.getPropertyValue(property) || getComputedStyle(element)[property as any];\n    const targetValue = $getValue(value);\n\n    // Skip animation if values are the same\n    if (currentValue === targetValue) return;\n\n    // Cancel any existing animation for this property\n    state.cancelAnimation(property);\n\n    // Create animation keyframes\n    const keyframes = [\n        { [property]: currentValue },\n        { [property]: targetValue }\n    ];\n\n    // Set default animation options\n    const animationOptions: KeyframeAnimationOptions = {\n        duration: options.duration || 200,\n        easing: options.easing || 'ease',\n        delay: options.delay || 0,\n        direction: options.direction || 'normal',\n        iterations: options.iterations || 1,\n        fill: options.fill || 'forwards'\n    };\n\n    // Create and start animation\n    const animation = element.animate(keyframes, animationOptions);\n    state.setAnimation(property, animation);\n\n    // Clean up when animation finishes\n    animation.addEventListener('finish', () => {\n        state.cancelAnimation(property);\n        // Ensure final value is set\n        element.style.setProperty(property, targetValue);\n    });\n}\n\n/**\n * Transition-based style change handler using CSS transitions\n * More efficient for simple transitions, uses browser's native transition system\n */\nexport function handleTransitionStyleChange(\n    element: HTMLElement,\n    property: string,\n    value: any,\n    options: TransitionOptions = {}\n): void {\n    if (!element || !property) return;\n\n    const state = getAnimationState(element);\n    const targetValue = $getValue(value);\n\n    // Set up transition for the property\n    state.setTransition(element, property, options);\n\n    // Apply the new value (transition will handle the animation)\n    element.style.setProperty(property, targetValue);\n}\n\n/**\n * Spring-based animation handler for natural-feeling animations\n * Uses spring physics for more organic motion\n */\nexport function handleSpringStyleChange(\n    element: HTMLElement,\n    property: string,\n    value: any,\n    options: {\n        stiffness?: number;\n        damping?: number;\n        mass?: number;\n        velocity?: number;\n    } = {}\n): void {\n    if (!element || !property) return;\n\n    const state = getAnimationState(element);\n    const targetValue = $getValue(value);\n    const currentValue = parseFloat(element.style.getPropertyValue(property)) ||\n                        parseFloat(getComputedStyle(element)[property as any]) || 0;\n\n    // Skip if values are the same\n    if (Math.abs(currentValue - targetValue) < 0.01) return;\n\n    // Cancel existing animation\n    state.cancelAnimation(property);\n\n    // Spring parameters\n    const stiffness = options.stiffness || 100;\n    const damping = options.damping || 10;\n    const mass = options.mass || 1;\n    const initialVelocity = options.velocity || 0;\n\n    let currentPosition = currentValue;\n    let currentVelocity = initialVelocity;\n    let animationId: number;\n\n    const animate = () => {\n        const springForce = -stiffness * (currentPosition - targetValue);\n        const dampingForce = -damping * currentVelocity;\n        const totalForce = springForce + dampingForce;\n        const acceleration = totalForce / mass;\n\n        currentVelocity += acceleration * 0.016; // 60fps\n        currentPosition += currentVelocity * 0.016;\n\n        // Apply the current position\n        const cssValue = property.includes('scale') || property.includes('opacity') ?\n            currentPosition.toString() :\n            `${currentPosition}px`;\n        element.style.setProperty(property, cssValue);\n\n        // Continue animation if not settled\n        if (Math.abs(currentPosition - targetValue) > 0.01 || Math.abs(currentVelocity) > 0.01) {\n            animationId = requestAnimationFrame(animate);\n                } else {\n                    // Ensure final value is exact\n                    element.style.setProperty(property, property.includes('scale') || property.includes('opacity') ?\n                        targetValue.toString() : `${targetValue}px`);\n                    state.cancelAnimation(property);\n                }\n    };\n\n    // Store animation reference for cancellation\n    const mockAnimation = {\n        cancel: () => cancelAnimationFrame(animationId)\n    } as any;\n    state.setAnimation(property, mockAnimation);\n\n    // Start animation\n    animationId = requestAnimationFrame(animate);\n}\n\n/**\n * Morphing animation handler for complex style changes\n * Can animate multiple properties simultaneously with coordinated timing\n */\nexport function handleMorphStyleChange(\n    element: HTMLElement,\n    properties: Record<string, any>,\n    options: AnimationOptions & { stagger?: number } = {}\n): void {\n    if (!element || !properties) return;\n\n    const state = getAnimationState(element);\n    const keyframes: Keyframe[] = [{}, {}];\n\n    // Build keyframes from current and target values\n    for (const [property, value] of Object.entries(properties)) {\n        const currentValue = element.style.getPropertyValue(property) ||\n                           getComputedStyle(element)[property as any];\n        const targetValue = $getValue(value);\n\n        keyframes[0][property] = currentValue;\n        keyframes[1][property] = targetValue;\n    }\n\n    // Cancel existing animations\n    for (const property of Object.keys(properties)) {\n        state.cancelAnimation(property);\n    }\n\n    const animationOptions: KeyframeAnimationOptions = {\n        duration: options.duration || 300,\n        easing: options.easing || 'ease-out',\n        delay: options.delay || 0,\n        direction: options.direction || 'normal',\n        iterations: options.iterations || 1,\n        fill: options.fill || 'forwards'\n    };\n\n    const animation = element.animate(keyframes, animationOptions);\n\n    // Store animation reference for each property\n    for (const property of Object.keys(properties)) {\n        state.setAnimation(property, animation);\n    }\n\n    animation.addEventListener('finish', () => {\n        for (const property of Object.keys(properties)) {\n            state.cancelAnimation(property);\n            // Ensure final values are set\n            const targetValue = $getValue(properties[property]);\n            element.style.setProperty(property, targetValue);\n        }\n    });\n}\n\n/**\n * Reactive animation binding that automatically animates when values change\n */\nexport function bindAnimatedStyle(\n    element: HTMLElement,\n    propertyOrProperties: string | Record<string, any>,\n    reactiveValue: any,\n    animationType: 'animate' | 'transition' | 'spring' | 'morph' = 'animate',\n    options: AnimationOptions | TransitionOptions = {}\n): () => void {\n    const wel = toRef(element);\n    const wv = toRef(reactiveValue);\n\n    if (animationType === 'morph') {\n        // For morph animations, propertyOrProperties should be a Record<string, any>\n        const properties = propertyOrProperties as Record<string, any>;\n\n        // Initial value\n        handleMorphStyleChange(deref(wel), properties, options);\n\n        // Subscribe to changes - for morph, we expect reactiveValue to be an object with reactive properties\n        const unaffected = affected(reactiveValue, (newValue) => {\n            handleMorphStyleChange(deref(wel), properties, options);\n        });\n\n        return unsubscribe;\n    } else {\n        // For other animation types, propertyOrProperties should be a string\n        const property = propertyOrProperties as string;\n\n        const handler = (animationType === 'animate') ? handleAnimatedStyleChange :\n                       (animationType === 'transition') ? handleTransitionStyleChange :\n                       handleSpringStyleChange;\n\n        // Initial value\n        handler(deref(wel), property, $getValue(deref(wv)), options);\n\n        // Subscribe to changes\n        const unaffected = affected(reactiveValue, (newValue) => {\n            handler(deref(wel), property, newValue, options);\n        });\n\n        return unsubscribe;\n    }\n}\n\n/**\n * Animation sequence builder for complex multi-stage animations\n */\nexport class AnimationSequence {\n    private steps: Array<{\n        properties: Record<string, any>;\n        options: AnimationOptions;\n        delay?: number;\n    }> = [];\n\n    addStep(properties: Record<string, any>, options: AnimationOptions = {}, delay = 0) {\n        this.steps.push({ properties, options, delay });\n        return this;\n    }\n\n    async play(element: HTMLElement): Promise<void> {\n        for (const step of this.steps) {\n            if (step.delay) {\n                await new Promise(resolve => setTimeout(resolve, step.delay));\n            }\n\n            await new Promise<void>((resolve) => {\n                handleMorphStyleChange(element, step.properties, {\n                    ...step.options,\n                    fill: 'forwards'\n                });\n\n                // Wait for animation to complete\n                setTimeout(resolve, step.options.duration || 200);\n            });\n        }\n    }\n\n    static create(): AnimationSequence {\n        return new AnimationSequence();\n    }\n}\n\n/**\n * Animation presets for common use cases\n */\nexport const AnimationPresets = {\n    // Smooth fade in/out\n    fade: {\n        duration: 200,\n        easing: 'ease-in-out'\n    },\n\n    // Bounce effect\n    bounce: {\n        duration: 400,\n        easing: 'cubic-bezier(0.68, -0.55, 0.265, 1.55)'\n    },\n\n    // Elastic effect\n    elastic: {\n        duration: 600,\n        easing: 'cubic-bezier(0.68, -0.55, 0.265, 1.55)'\n    },\n\n    // Slide in from direction\n    slideIn: (direction: 'left' | 'right' | 'up' | 'down') => ({\n        duration: 300,\n        easing: 'ease-out',\n        transform: `translate${direction === 'left' || direction === 'right' ? 'X' : 'Y'}(${direction === 'left' || direction === 'up' ? '-' : ''}100%)`\n    }),\n\n    // Scale effect\n    scale: {\n        duration: 200,\n        easing: 'ease-in-out'\n    }\n};\n\n/**\n * Cleanup function to cancel all animations for an element\n */\nexport function cancelElementAnimations(element: HTMLElement): void {\n    const state = animationStates.get(element);\n    if (state) {\n        state.cancelAll(element);\n        animationStates.delete(element);\n    }\n}\n\n/**\n * Utility to create animated reactive references\n */\nexport function animatedRef(initialValue: any, animationType: 'animate' | 'transition' | 'spring' = 'animate', options: any = {}) {\n    const ref = typeof initialValue === 'number' ? numberRef(initialValue) : stringRef(initialValue);\n\n    // Extend ref with animation metadata\n    (ref as any).$animationType = animationType;\n    (ref as any).$animationOptions = options;\n\n    return ref;\n}\n\n//\nexport const effectProperty = { fill: \"both\", delay: 0, easing: \"linear\", rangeStart: \"cover 0%\", rangeEnd: \"cover 100%\", duration: 1 };\nexport const animateByTimeline = async (source: HTMLElement, properties = {}, timeline?: any) => {\n    if (!source || !timeline) return;\n\n    // @ts-ignore\n    if (timeline instanceof ScrollTimeline || timeline instanceof ViewTimeline) {\n        return source?.animate?.(properties, { ...effectProperty as any, timeline: timeline?.[$extract] ?? timeline });\n    }\n\n    //\n    const  target  = toRef(source), wk = toRef(timeline);\n    const renderCb = ([name, $v]) => {\n        const tg = deref(target); if (tg) {\n            const val = deref(wk)?.value || 0, values = $v as [any, any];\n            setProperty(tg, name, (values[0] * (1 - val) + values[1] * val))\n        }\n    }\n\n    //\n    const scheduler = makeRAFCycle();\n    const  everyCb  = ()=>Object.entries(properties)?.forEach?.(renderCb);\n    return affected(timeline, (val: any) => scheduler?.schedule?.(everyCb));\n}\n\n\n\n// ============================================================================\n// Export Animation Binding Functions\n// ============================================================================\n\n/*\nexport {\n    bindAnimated,\n    bindTransition,\n    bindSpring,\n    bindMorph,\n    bindAnimatedBatch,\n    bindPreset,\n    bindConditionalAnimation,\n    createAnimationSequence,\n    cancelElementAnimations,\n    animatedRef,\n    AnimationPresets,\n    type AnimationOptions,\n    type TransitionOptions\n};\n*/\n","import { addToCallChain, observe, affected, unaffected } from \"fest/object\";\nimport {\n    handleAttribute,\n    handleProperty,\n    namedStoreMaps,\n    observeAttribute,\n    observeBySelector,\n    includeSelf,\n    setChecked,\n    getEventTarget,\n    handleStyleChange,\n} from \"fest/dom\";\nimport {\n    $getValue,\n    camelToKebab,\n    $set,\n    toRef,\n    deref,\n    isNotEqual,\n    handleListeners,\n    $avoidTrigger,\n} from \"fest/core\";\n\nimport {\n    handleAnimatedStyleChange,\n    handleTransitionStyleChange,\n    handleSpringStyleChange,\n    handleMorphStyleChange,\n    bindAnimatedStyle,\n    AnimationSequence,\n    AnimationPresets,\n    cancelElementAnimations,\n    animatedRef,\n    type AnimationOptions,\n    type TransitionOptions,\n} from \"../../extension/css-ref/CSSAnimated\";\n\n// ,      \nimport { DoubleWeakMap } from \"fest/object\"; // <--    \n\n// ============================================================================\n// Bank storage (pair-keyed)\n// ============================================================================\n\ntype Unsub = (() => void) | void;\ntype BankEntry = [any, Unsub];\ntype Bank = Record<string | symbol, BankEntry>;\n\n//\nexport const elMap = new DoubleWeakMap();\nexport const alives = new FinalizationRegistry((unsub: any) => unsub?.());\n\n//\nexport const $mapped = Symbol.for(\"@mapped\");\nexport const $virtual = Symbol.for(\"@virtual\");\nexport const $behavior = Symbol.for(\"@behavior\");\n\n//\nexport const bindBeh = (element: any, store: any, behavior: any) => {\n    const weak = toRef(element);\n    const name = store?.[0] ?? store?.name;\n    const value = store?.[1] ?? store?.value;\n\n    if (behavior) {\n        const usub = affected?.(store, (value, prop, old) => {\n            const valMap = namedStoreMaps?.get?.(name as string);\n            behavior?.([value, prop, old], [weak, store, valMap?.get(deref(weak))]);\n        });\n        addToCallChain(store, Symbol.dispose, usub);\n    }\n    return element;\n};\n\n//\nexport const bindCtrl = (element: any, ctrlCb: any) => {\n    const hdl = { click: ctrlCb, input: ctrlCb, change: ctrlCb };\n    ctrlCb?.({ target: element });\n    const unsub = handleListeners?.(element, \"addEventListener\", hdl);\n    addToCallChain(element, Symbol.dispose, unsub);\n    return unsub;\n};\n\n//\nexport const reflectControllers = (element: any, ctrls: any) => {\n    if (ctrls) for (let ctrl of ctrls) bindCtrl(element, ctrl);\n    return element;\n};\n\n//\nexport const $observeInput = (element: any, ref?: any | null, prop: string = \"value\") => {\n    const wel = toRef(element);\n    const rf = toRef(ref);\n\n    const ctrlCb = (_ev: any) => {\n        $set(rf, \"value\", deref(wel)?.[prop ?? \"value\"] ?? $getValue(deref(rf)));\n    };\n\n    const hdl = { click: ctrlCb, input: ctrlCb, change: ctrlCb };\n    ctrlCb?.({ target: element });\n    handleListeners?.(element, \"addEventListener\", hdl);\n\n    $set(rf, \"value\", element?.[prop ?? \"value\"] ?? $getValue(deref(ref)));\n    return () => handleListeners?.(element, \"removeEventListener\", hdl);\n};\n\n//\nexport const $observeAttribute = (el: any, ref?: any | null, prop: string = \"\") => {\n    const wel = toRef(el);\n    const wv = toRef(ref);\n\n    const attrName = camelToKebab(prop)!;\n\n    const cb = (mutation: any) => {\n        if (mutation.type == \"attributes\" && mutation.attributeName == attrName) {\n            const value = mutation?.target?.getAttribute?.(mutation.attributeName);\n            const valRef = deref(wv),\n                reVal = $getValue(valRef);\n\n            if (\n                isNotEqual(mutation.oldValue, value) &&\n                valRef != null &&\n                (typeof valRef == \"object\" || typeof valRef == \"function\")\n            ) {\n                if (isNotEqual(reVal, value) || reVal == null) {\n                    $set(valRef, \"value\", value);\n                }\n            }\n        }\n    };\n\n    return observeAttribute(el, attrName, cb);\n};\n\n// ============================================================================\n// Bank helpers (adapted to pair-key map)\n// ============================================================================\n\n// @ts-ignore // Stable Universal Key Assignation - eg. [S.U.K.A.]\nexport const removeFromBank = (el: any, handler: any, prop: any) => {\n    const bank = elMap.get([el, handler]);\n    if (bank) {\n        const old = bank[prop]?.[1];\n        delete bank[prop];\n        old?.();\n    }\n};\n\n//\nexport const addToBank = (el: any, handler: any, prop: any, forLink: any) => {\n    // bank is stored by pair [el, handler]\n    const bank = elMap.getOrInsertComputed([el, handler], () => ({} as Bank));\n    bank?.[prop]?.[1]?.();\n    bank[prop] = forLink;\n    return true;\n};\n\n//\nexport const hasInBank = (el: any, handler: any) => {\n    return elMap.has([el, handler]);\n};\n\n// ============================================================================\n// Core binding\n// ============================================================================\n\nexport const bindHandler = (\n    element: any,\n    value: any,\n    prop: any,\n    handler: any,\n    set?: any,\n    withObserver?: boolean | Function\n) => {\n    const wel = toRef(element);\n    element = deref(wel);\n    if (!element || !(element instanceof Node || element?.element instanceof Node)) return;\n\n    //\n    let controller: AbortController | null = null;\n    controller?.abort?.();\n    controller = new AbortController();\n\n    //\n    const wv = toRef(value);\n    handler?.(element, prop, value);\n\n    const un = affected?.([value, \"value\"], (curr: any, _p: any, old: any) => {\n        const valueRef = deref(wv);\n        const setRef = deref(set);\n        const elementRef = deref(wel);\n\n        const v = $getValue(valueRef) ?? $getValue(curr);\n        if (!setRef || setRef?.[prop] == valueRef) {\n            if (typeof valueRef?.[$behavior] == \"function\") {\n                valueRef?.[$behavior]?.(\n                    (_val: any = curr) => handler(elementRef, prop, v),\n                    [curr, prop, old],\n                    [controller?.signal, prop, wel]\n                );\n            } else {\n                handler(elementRef, prop, v);\n            }\n        }\n    });\n\n    //\n    let obs: any = null;\n    if (typeof withObserver == \"boolean\" && withObserver) {\n        if (handler == handleAttribute) obs = $observeAttribute(element, value, prop);\n        if (handler == handleProperty) obs = $observeInput(element, value, prop);\n    }\n    if (typeof withObserver == \"function\") {\n        obs = withObserver(element, prop, value);\n    }\n\n    //\n    const unsub = () => {\n        obs?.disconnect?.();\n        obs != null && typeof obs == \"function\" ? obs?.() : null;\n        un?.();\n        controller?.abort?.();\n        removeFromBank?.(element, handler, prop);\n    };\n\n    // @ts-ignore\n    addToCallChain(value, Symbol.dispose, unsub);\n    alives.register(element, unsub);\n\n    // register in bank\n    if (!addToBank(element, handler, prop, [value, unsub])) return unsub;\n};\n\n// ============================================================================\n// Updating forms\n// ============================================================================\n\nexport const updateInput = (target: any, state: any) => {\n    const selector = 'input:where([type=\"text\"], [type=\"number\"], [type=\"range\"])';\n    const input = includeSelf(target, \"input\");\n    const name = (input as HTMLInputElement)?.name || (target as HTMLElement)?.dataset?.name || \"\";\n\n    if (state?.[name] != null || name in state) {\n        if (state && input?.matches?.(selector)) {\n            if ((input as HTMLInputElement).value != state[name]) {\n                $avoidTrigger(state, () => {\n                    (input as HTMLInputElement).value = state[name];\n                    input.dispatchEvent(new Event(\"change\", { bubbles: true, cancelable: true }));\n                }, name);\n            }\n        }\n\n        // radio\n        if (state) {\n            const radio = includeSelf(\n                target,\n                `input:where([type=\"radio\"][name=\"${name}\"][value=\"${state?.[name]}\"])`\n            );\n            if (state && radio && state[name] == (radio as HTMLInputElement).value && !(radio as HTMLInputElement).checked) {\n                $avoidTrigger(state, () => {\n                    setChecked(radio as HTMLInputElement, state[name]);\n                }, name);\n            }\n        }\n\n        // checkbox\n        const checkbox = includeSelf(target, 'input:where([type=\"checkbox\"])');\n        if (state && checkbox) {\n            if (state[name] != (checkbox as HTMLInputElement).checked) {\n                $avoidTrigger(state, () => {\n                    setChecked(checkbox as HTMLInputElement, state[name]);\n                }, name);\n            }\n        }\n    }\n};\n\n//\nexport const bindWith = (\n    el: any,\n    prop: any,\n    value: any,\n    handler: any,\n    set?: any,\n    withObserver?: boolean | Function\n) => {\n    handler(el, prop, value);\n    return bindHandler(el, value, prop, handler, set, withObserver);\n};\n\n//\nexport const bindForms = (\n    fields: any = document.documentElement,\n    wrapper: string = \".u2-input\",\n    state: any = {}\n) => {\n    state ??= observe({});\n\n    const wst = new WeakRef(state);\n\n    const onChange = (ev: any) => {\n        const state = deref(wst);\n        if (!state) return;\n\n        const eventTarget = getEventTarget(ev) ?? ev?.target;\n        const input = eventTarget?.matches?.(\"input\") ? eventTarget : eventTarget?.querySelector?.(\"input\");\n        const target = (eventTarget?.matches?.(wrapper) ? eventTarget : input?.closest?.(wrapper)) ?? input;\n        const name = input?.name || target?.name || target?.dataset?.name;\n\n        if (state?.[name] != null || name in state) {\n            if (input?.matches?.('input:where([type=\"text\"], [type=\"number\"], [type=\"range\"])')) {\n                const value =\n                    input.valueAsNumber != null && !isNaN(input.valueAsNumber)\n                        ? input.valueAsNumber\n                        : input.value;\n                if (state[name] != value) state[name] = value;\n            }\n\n            if (input?.matches?.('input[type=\"radio\"]') && state[name] != input?.value && input?.checked) {\n                state[name] = input.value;\n            }\n\n            if (input?.matches?.('input[type=\"checkbox\"]') && state[name] != input?.checked) {\n                state[name] = input.checked;\n            }\n        }\n    };\n\n    const appearHandler = () =>\n        requestIdleCallback(\n            () => fields.querySelectorAll(wrapper).forEach((target: any) => updateInput(target, state)),\n            { timeout: 100 }\n        );\n\n    const observer = observeBySelector(fields, wrapper, (mutations: any) =>\n        mutations.addedNodes.forEach((target: any) =>\n            requestIdleCallback(() => updateInput(state, target), { timeout: 100 })\n        )\n    );\n\n    const unsubscribe = affected?.(state, (_value: any, _property: any) =>\n        fields.querySelectorAll(wrapper).forEach((target: any) => updateInput(target, state))\n    );\n\n    requestIdleCallback(\n        () => fields.querySelectorAll(wrapper).forEach((target: any) => updateInput(target, state)),\n        { timeout: 100 }\n    );\n\n    fields.addEventListener(\"input\", onChange);\n    fields.addEventListener(\"change\", onChange);\n    fields.addEventListener(\"u2-appear\", appearHandler);\n\n    const wf = new WeakRef(fields);\n    addToCallChain(state, Symbol.dispose, () => {\n        const fields = deref(wf);\n        fields?.removeEventListener?.(\"input\", onChange);\n        fields?.removeEventListener?.(\"change\", onChange);\n        fields?.removeEventListener?.(\"u2-appear\", appearHandler);\n        observer?.disconnect?.();\n        unsubscribe?.(); // <-- :   unsubscribe,    unaffected(state)\n        unaffected(state);\n    });\n\n    return state;\n};\n\n// ============================================================================\n// Animation-Based Binding Functions (unchanged)\n// ============================================================================\n\nexport const bindAnimated = (element: any, property: any, value: any, options: AnimationOptions = {}) => {\n    return bindAnimatedStyle(element, property, value, \"animate\", options);\n};\n\nexport const bindTransition = (\n    element: any,\n    property: any,\n    value: any,\n    options: TransitionOptions = {}\n) => {\n    return bindAnimatedStyle(element, property, value, \"transition\", options);\n};\n\nexport const bindSpring = (\n    element: any,\n    property: any,\n    value: any,\n    options: { stiffness?: number; damping?: number; mass?: number; velocity?: number } = {}\n) => {\n    return bindAnimatedStyle(element, property, value, \"spring\", options as any);\n};\n\nexport const bindMorph = (element: any, properties: Record<string, any>, options: AnimationOptions = {}) => {\n    return bindAnimatedStyle(element, \"\", properties, \"morph\", options);\n};\n\nexport const createAnimatedRef = animatedRef;\nexport const createAnimationSequence = () => AnimationSequence.create();\nexport const cancelAnimations = cancelElementAnimations;\n\nexport const bindWithAnimation = (\n    el: any,\n    prop: any,\n    value: any,\n    animationType: \"instant\" | \"animate\" | \"transition\" | \"spring\" = \"instant\",\n    animationOptions: AnimationOptions | TransitionOptions = {}\n) => {\n    if (animationType === \"instant\") {\n        return bindWith(el, prop, value, handleStyleChange);\n    }\n\n    const binder =\n        animationType === \"animate\" ? bindAnimated : animationType === \"transition\" ? bindTransition : bindSpring;\n\n    return binder(el, prop, value, animationOptions as any);\n};\n\nexport const bindAnimatedBatch = (\n    element: any,\n    bindings: Array<{\n        property: string;\n        value: any;\n        animationType?: \"animate\" | \"transition\" | \"spring\";\n        options?: AnimationOptions | TransitionOptions;\n        delay?: number;\n    }>\n) => {\n    const unbinders: (() => void)[] = [];\n\n    bindings.forEach((binding, index) => {\n        const delay = binding.delay || index * 50;\n        const options = {\n            ...binding.options,\n            delay: (binding.options?.delay || 0) + delay,\n        };\n\n        const unbinder = bindAnimatedStyle(\n            element,\n            binding.property,\n            binding.value,\n            binding.animationType || \"animate\",\n            options\n        );\n        unbinders.push(unbinder);\n    });\n\n    return () => unbinders.forEach((unbind) => unbind?.());\n};\n\nexport const bindPreset = {\n    fade: (element: any, value: any, duration = 200) =>\n        bindAnimated(element, \"opacity\", value, { duration, easing: \"ease-in-out\" }),\n\n    slideX: (element: any, value: any, duration = 300) =>\n        bindAnimated(element, \"transform\", value, { duration, easing: \"ease-out\" }),\n\n    slideY: (element: any, value: any, duration = 300) =>\n        bindAnimated(element, \"transform\", value, { duration, easing: \"ease-out\" }),\n\n    scale: (element: any, value: any, duration = 200) =>\n        bindAnimated(element, \"transform\", value, { duration, easing: \"ease-in-out\" }),\n\n    color: (element: any, value: any, duration = 300) =>\n        bindTransition(element, \"color\", value, { duration, easing: \"ease-in-out\" }),\n\n    backgroundColor: (element: any, value: any, duration = 300) =>\n        bindTransition(element, \"background-color\", value, { duration, easing: \"ease-in-out\" }),\n\n    bounce: (element: any, property: string, value: any) =>\n        bindSpring(element, property, value, { stiffness: 200, damping: 15 }),\n\n    elastic: (element: any, property: string, value: any) =>\n        bindAnimated(element, property, value, AnimationPresets.elastic),\n};\n\nexport const bindConditionalAnimation = (\n    element: any,\n    condition: any,\n    animations: {\n        true?: { property: string; value: any; options?: AnimationOptions }[];\n        false?: { property: string; value: any; options?: AnimationOptions }[];\n    }\n) => {\n    const wel = toRef(element);\n    const wcond = toRef(condition);\n\n    let currentUnbinders: (() => void)[] = [];\n\n    const applyAnimations = (isTrue: boolean) => {\n        currentUnbinders.forEach((un) => un?.());\n        currentUnbinders = [];\n\n        const animationSet = isTrue ? animations.true : animations.false;\n        if (animationSet) {\n            animationSet.forEach((anim) => {\n                const unbinder = bindAnimated(deref(wel), anim.property, anim.value, anim.options);\n                currentUnbinders.push(unbinder);\n            });\n        }\n    };\n\n    applyAnimations($getValue(deref(wcond)));\n\n    const unSub = affected(condition, (newValue: any) => {\n        applyAnimations(!!newValue);\n    });\n\n    return () => {\n        currentUnbinders.forEach((un) => un?.());\n        unSub?.();\n    };\n};\n\n//\nexport const withInsetWithPointer = (exists: HTMLElement, pRef: any) => {\n    if (!exists) return () => { };\n    const ubs = [\n        bindWith(exists, \"--client-x\", pRef?.[0], handleStyleChange),\n        bindWith(exists, \"--client-y\", pRef?.[1], handleStyleChange),\n    ];\n    if (pRef?.[2]) ubs.push(bindWith(exists, \"--anchor-width\", pRef?.[2], handleStyleChange));\n    if (pRef?.[3]) ubs.push(bindWith(exists, \"--anchor-height\", pRef?.[3], handleStyleChange));\n    return () => ubs?.forEach?.((ub: any) => ub?.());\n};\n\ntype Unbind = (() => void) | void;\n\nexport const bindWhileConnected = (element: Element | null | undefined, bind: () => Unbind) => {\n    if (!element) return () => { };\n\n    let cleanup: (() => void) | null = null;\n    let disposed = false;\n\n    const ensureBound = () => {\n        if (disposed) return;\n\n        if (!element.isConnected) {\n            if (cleanup) {\n                cleanup();\n                cleanup = null;\n            }\n            return;\n        }\n\n        if (!cleanup) {\n            const c = bind();\n            cleanup = typeof c === \"function\" ? c : null;\n        }\n    };\n\n    const root = typeof document !== \"undefined\" ? document.documentElement : null;\n    const el = ((element as any)?.element ?? element) as Element;\n\n    const mo =\n        typeof MutationObserver !== \"undefined\" && root\n            ? new MutationObserver((records) => {\n                for (const r of records) {\n                    if (r.target === el || (r.target as any)?.contains?.(el)) {\n                        ensureBound();\n                        return;\n                    }\n\n                    const nodes = [...Array.from(r?.addedNodes || []), ...Array.from(r?.removedNodes || [])];\n                    for (const n of nodes) {\n                        if (n === el || (n as Node).contains?.(el)) {\n                            ensureBound();\n                            return;\n                        }\n                    }\n                }\n            })\n            : null;\n\n    if (mo && root) mo.observe(root, { childList: true, subtree: true });\n\n    queueMicrotask(() => ensureBound());\n\n    return () => {\n        disposed = true;\n        mo?.disconnect?.();\n        cleanup?.();\n        cleanup = null;\n    };\n};","import { observeAttributeBySelector, getAdoptedStyleRule, handleAttribute, containsOrSelf, MOCElement, observeBySelector, observeAttribute } from \"fest/dom\";\nimport { bindWith, elMap } from \"../core/Binding\";\nimport { $affected } from \"fest/object\";\n\n//\nconst existsQueries = new WeakMap<any, Map<string|HTMLElement, any>>();\nconst alreadyUsed   = new WeakMap();\nconst queryExtensions = {\n    logAll (ctx) { return ()=> console.log(\"attributes:\", [...ctx?.attributes].map(x => ({ name: x.name, value: x.value })) ); },\n    append (ctx) { return (...args)=> ctx?.append?.(...([...args||[]]?.map?.((e)=>e?.element??e) || args)) },\n    current(ctx) { return ctx; } // direct getter\n}\n\n//\nclass UniversalElementHandler {\n    direction: \"children\" | \"parent\" = \"children\";\n    selector: string | HTMLElement;\n    index: number = 0;\n\n    //\n    private _eventMap = new WeakMap<object, Map<string, Map<Function, {wrap: Function, option: any}>>>();\n    constructor(selector, index = 0, direction: \"children\" | \"parent\" = \"children\") {\n        this.index     = index;\n        this.selector  = selector;\n        this.direction = direction;\n    }\n\n    //\n    _observeDOMChange(target: any, selector: any, cb: any) {\n        // no possible to listen to DOM change for non-string selector\n        return (typeof selector == \"string\" ? observeBySelector(target, selector, cb) : null);\n    }\n\n    //\n    _observeAttributes(target: any, attribute: any, cb: any)\n        { return (typeof this.selector == \"string\" ? observeAttributeBySelector(target, this.selector, attribute, cb) : observeAttribute(target ?? this.selector, attribute, cb)); }\n\n    //\n    _getArray(target: any) {\n        if (typeof target == \"function\") { target = this.selector || target?.(this.selector); }; if (!this.selector) return [target];\n        if (typeof this.selector == \"string\") {\n            const inclusion = ((typeof target?.matches == \"function\" && target?.element != null) && target?.matches?.(this.selector)) ? [target] : [];\n            if (this.direction == \"children\") {\n                const list = (typeof target?.querySelectorAll == \"function\" && target?.element != null) ? [...target?.querySelectorAll?.(this.selector)] : [];\n                return list?.length >= 1 ? [...list] : inclusion;\n            } else if (this.direction == \"parent\") {\n                const closest = target?.closest?.(this.selector);\n                return closest ? [closest] : inclusion;\n            }\n            return inclusion;\n        }\n        return Array.isArray(this.selector) ? this.selector : [this.selector];\n    }\n\n    //\n    _getSelected(target: any) {\n        const tg = target?.self ?? target;\n        const sel = this._selector(target);\n        if (typeof sel == \"string\") {\n            if (this.direction == \"children\") { return tg?.matches?.(sel) ? tg : tg?.querySelector?.(sel); }\n            if (this.direction == \"parent\"  ) { return tg?.matches?.(sel) ? tg : tg?.closest?.(sel); }\n        }\n        return tg == ((sel as any)?.element ?? sel) ? ((sel as any)?.element ?? sel) : null;\n    }\n\n    // if selector isn't string, can't be redirected\n    _redirectToBubble(eventName: any) {\n        const sel: any = this._selector();\n        if (typeof sel == \"string\") {\n            return {\n                [\"pointerenter\"]: \"pointerover\",\n                [\"pointerleave\"]: \"pointerout\",\n                [\"mouseenter\"]: \"mouseover\",\n                [\"mouseleave\"]: \"mouseout\",\n                [\"focus\"]: \"focusin\",\n                [\"blur\"]: \"focusout\",\n            }?.[eventName] || eventName;\n        }\n        return eventName;\n    }\n\n    //\n    _addEventListener(target: any, name: any, cb: any, option?: any) {\n        const selector = this._selector(target);\n        if (typeof selector != \"string\") {\n            selector?.addEventListener?.(name, cb, option);\n            return cb;\n        }\n\n        //\n        const eventName = this._redirectToBubble(name);\n        const parent = target?.self ?? target;\n        const wrap = (ev) => {\n            const sel: any = this._selector(target);\n            const rot = ev?.currentTarget ?? parent;\n\n            // Use composedPath() for shadow DOM compatibility\n            let tg: any = null;\n            if (ev?.composedPath && typeof ev.composedPath === 'function') {\n                const path = ev.composedPath();\n                // Find the first element in the composed path that matches our selector or is within our target\n                for (const node of path) {\n                    if (node instanceof HTMLElement || node instanceof Element) {\n                        const nodeEl = (node as any)?.element ?? node;\n                        if (typeof sel == \"string\") {\n                            if (MOCElement(nodeEl, sel, ev)) {\n                                tg = nodeEl;\n                                break;\n                            }\n                        } else {\n                            if (containsOrSelf(sel, nodeEl, ev)) {\n                                tg = nodeEl;\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n\n            // Fallback to original logic if composedPath didn't find a match\n            if (!tg) {\n                tg = (ev?.target ?? this._getSelected(target)) ?? rot;\n                tg = tg?.element ?? tg;\n            }\n\n            if (typeof sel == \"string\")\n                { if (containsOrSelf(rot, MOCElement(tg, sel, ev), ev)) { cb?.call?.(tg, ev); } } else\n                { if (containsOrSelf(rot, sel, ev) && containsOrSelf(sel, tg, ev)) { cb?.call?.(tg, ev); }\n            }\n        };\n        parent?.addEventListener?.(eventName, wrap, option);\n\n        // @ts-ignore\n        const eventMap = this._eventMap.getOrInsert(parent, new Map())!;\n        const cbMap = eventMap.getOrInsert(eventName, new WeakMap())!;\n        cbMap.set(cb, {wrap, option});\n        return wrap;\n    }\n\n    //\n    _removeEventListener(target: any, name: any, cb: any, option?: any) {\n        const selector = this._selector(target);\n        if (typeof selector != \"string\") {\n            selector?.removeEventListener?.(name, cb, option);\n            return cb;\n        }\n\n        //\n        const parent = target?.self ?? target;\n        const eventName = this._redirectToBubble(name), eventMap = this._eventMap.get(parent);\n        if (!eventMap) return; const cbMap = eventMap.get(eventName), entry = cbMap?.get?.(cb);\n        parent?.removeEventListener?.(eventName, entry?.wrap ?? cb, option ?? entry?.option ?? {});\n        cbMap?.delete?.(cb); if (cbMap?.size == 0) eventMap?.delete?.(eventName);\n        if (eventMap.size == 0) this._eventMap.delete(parent);\n    }\n\n    //\n    _selector(tg?: any) {\n        if (typeof this.selector == \"string\" && typeof tg?.selector == \"string\") { return ((tg?.selector || \"\") + \" \" + this.selector)?.trim?.(); }\n        return this.selector;\n    }\n\n    //\n    get(target: any, name: any, ctx: any) {\n        const array = this._getArray(target);\n        const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n\n        // Extensions\n        if (name in queryExtensions) { return queryExtensions?.[name]?.(selected); }\n        if (name == \"length\" && array?.length != null) { return array?.length; }\n\n        //\n        if (name == \"_updateSelector\") return (sel)=>(this.selector = sel || this.selector);\n        if ([\"style\", \"attributeStyleMap\"].indexOf(name) >= 0) {\n            const tg = target?.self ?? target;\n            const selector = this._selector(target);\n            const basis = (typeof selector == \"string\" ?\n                getAdoptedStyleRule(selector, \"ux-query\", tg) :\n                selected\n            );\n            if (name == \"attributeStyleMap\") {\n                return basis?.styleMap ?? basis?.attributeStyleMap;\n            }\n            return basis?.[name];\n        }\n\n        //\n        if (name == \"self\") return (target?.self ?? target);\n        if (name == \"selector\") return this._selector(target);\n\n        //\n        if (name == \"observeAttr\") return (name, cb)=>this._observeAttributes(target, name, cb);\n        if (name == \"DOMChange\") return (cb)=>this._observeDOMChange(target, this.selector, cb);\n        if (name == \"addEventListener\") return (name, cb, opt?)=>this._addEventListener(target, name, cb, opt);\n        if (name == \"removeEventListener\") return (name, cb, opt?)=>this._removeEventListener(target, name, cb, opt);\n\n        // get compatible reactive value, if bound\n        if (name == \"getAttribute\") {\n            return (key)=>{\n                const array = this._getArray(target);\n                const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n                const query: any = existsQueries?.get?.(target)?.get?.(this.selector) ?? selected;\n                if (elMap?.get?.(query)?.get?.(handleAttribute)?.has?.(key)) {\n                    return elMap?.get?.(query)?.get?.(handleAttribute)?.get?.(key)?.[0];\n                }\n                return selected?.getAttribute?.(key);\n            }\n        }\n\n        // set attribute\n        if (name == \"setAttribute\") {\n            return (key, value)=>{\n                // TODO:\n                // - support for multiple elements\n                // - support for newer elements by DOM Observer\n                const array = this._getArray(target);\n                const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n                if (typeof value == \"object\" && (value?.value != null || \"value\" in value)) {\n                    return bindWith(selected, key, value, handleAttribute, null, true);\n                }\n                return selected?.setAttribute?.(key, value);\n            }\n        }\n\n        //\n        if (name == \"removeAttribute\") {\n            return (key)=>{\n                const array = this._getArray(target);\n                const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n                const query: any = existsQueries?.get?.(target)?.get?.(this.selector) ?? selected;\n                if (elMap?.get?.(query)?.get?.(handleAttribute)?.has?.(key)) {\n                    return elMap?.get?.(query)?.get?.(handleAttribute)?.get?.(key)?.[1]?.();\n                }\n                return selected?.removeAttribute?.(key);\n            }\n        }\n\n        //\n        if (name == \"hasAttribute\") {\n            return (key)=>{\n                const array = this._getArray(target);\n                const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n                const query: any = existsQueries?.get?.(target)?.get?.(this.selector) ?? selected;\n                if (elMap?.get?.(query)?.get?.(handleAttribute)?.has?.(key)) {\n                    return true;\n                }\n                return selected?.hasAttribute?.(key);\n            }\n        }\n\n        // for BLU.E\n        if (name == \"element\") {\n            if (array?.length <= 1) return selected?.element ?? selected;\n            const fragment = document.createDocumentFragment();\n            fragment.append(...array); return fragment;\n        }\n\n        //\n        if (name == Symbol.toPrimitive) {\n            if ((this.selector as any)?.includes?.(\"input\") || (this.selector as any)?.matches?.(\"input\")) {\n                return (hint)=>{\n                    if (hint == \"number\") return (selected?.element ?? selected)?.valueAsNumber ?? parseFloat((selected?.element ?? selected)?.value);\n                    if (hint == \"string\") return String((selected?.element ?? selected)?.value ?? (selected?.element ?? selected));\n                    if (hint == \"boolean\") return (selected?.element ?? selected)?.checked;\n                    return (selected?.element ?? selected)?.checked ?? (selected?.element ?? selected)?.value ?? (selected?.element ?? selected);\n                }\n            }\n        }\n\n        //\n        if (name == \"checked\") {\n            if ((this.selector as any)?.includes?.(\"input\") || (this.selector as any)?.matches?.(\"input\")) {\n                return (selected?.element ?? selected)?.checked;\n            }\n        }\n\n        //\n        if (name == \"value\") {\n            if ((this.selector as any)?.includes?.(\"input\") || (this.selector as any)?.matches?.(\"input\")) {\n                return (selected?.element ?? selected)?.valueAsNumber ?? (selected?.element ?? selected)?.valueAsDate ?? (selected?.element ?? selected)?.value ?? (selected?.element ?? selected)?.checked;\n            }\n        }\n\n        // can be subscribed\n        if (name == $affected) {\n            if ((this.selector as any)?.includes?.(\"input\") || (this.selector as any)?.matches?.(\"input\")) {\n                return (cb) => {\n                    let oldValue = selected?.value;\n                    const evt: [any, any] = [\n                        (ev)=>{\n                            const input = this._getSelected(ev?.target);\n                            cb?.(input?.value, \"value\", oldValue);\n                            oldValue = input?.value;\n                        }, {passive: true}\n                    ];\n                    this._addEventListener(target, \"change\", ...evt)\n                    return ()=>this._removeEventListener(target, \"change\", ...evt)\n                }\n            }\n        }\n\n        //\n        if (name == \"deref\" && (typeof selected == \"object\" || typeof selected == \"function\") && selected != null) {\n            const wk = new WeakRef(selected);\n            return ()=>(wk?.deref?.()?.element ?? wk?.deref?.());\n        }\n\n        //\n        if (typeof name == \"string\" && /^\\d+$/.test(name)) { return array[parseInt(name)]; };\n\n        //\n        const origin = selected; //selected?.element ?? selected;\n        if (origin?.[name] != null) { return typeof origin[name] == \"function\" ? origin[name].bind(origin) : origin[name]; }\n        if ( array?.[name] != null) { return typeof  array[name] == \"function\" ?  array[name].bind(array)  :  array[name]; }\n\n        // remains possible getters\n        //return Reflect.get(target, name, ctx);\n        return typeof target?.[name] == \"function\" ? target?.[name].bind(origin) : target?.[name];\n    }\n\n    //\n    set(target: any, name: any, value: any) {\n        const array = this._getArray(target);\n        const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n\n        //\n        if (typeof name == \"string\" && /^\\d+$/.test(name)) { return false; }\n        if (array[name] != null) { return false; }\n        if (selected) { selected[name] = value; return true; }\n        return true;\n    }\n\n    //\n    has(target: any, name: any) {\n        const array = this._getArray(target);\n        const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n        return (\n            (typeof name == \"string\" && /^\\d+$/.test(name) && array[parseInt(name)] != null) ||\n            (array[name] != null) ||\n            (selected && name in selected)\n        );\n    }\n\n    //\n    deleteProperty(target: any, name: any) {\n        const array = this._getArray(target);\n        const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n        if (selected && name in selected) { delete selected[name]; return true; }\n        return false;\n    }\n\n    //\n    ownKeys(target: any) {\n        const array = this._getArray(target);\n        const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n        const keys = new Set();\n        array.forEach((el, i) => keys.add(i.toString()));\n        Object.getOwnPropertyNames(array).forEach(k => keys.add(k));\n        if (selected) Object.getOwnPropertyNames(selected).forEach(k => keys.add(k));\n        return Array.from(keys);\n    }\n\n    //\n    defineProperty(target: any, name: any, desc: any) {\n        const array = this._getArray(target);\n        const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n        if (selected) { Object.defineProperty(selected, name, desc); return true; }\n        return false;\n    }\n\n    //\n    apply(target: any, self: any, args: any) {\n        args[0] ||= this.selector;\n        const result = target?.apply?.(self, args);\n        this.selector = result || this.selector;\n        return new Proxy(target, this as ProxyHandler<any>);\n    }\n}\n\n//\nexport const Q = (selector: any, host = document.documentElement, index = 0, direction: \"children\" | \"parent\" = \"children\") => {\n    // is wrapped element or element itself\n    if ((selector?.element ?? selector) instanceof HTMLElement) {\n        const el = selector?.element ?? selector; // @ts-ignore\n        return alreadyUsed.getOrInsert(el, new Proxy(el, new UniversalElementHandler(\"\", index, direction) as ProxyHandler<any>));\n    }\n\n    // is \"ref\" hook!\n    if (typeof selector == \"function\") {\n        const el = selector; // @ts-ignore\n        return alreadyUsed.getOrInsert(el, new Proxy(el, new UniversalElementHandler(\"\", index, direction) as ProxyHandler<any>));\n    }\n\n    //\n    if (host == null || typeof host == \"string\" || typeof host == \"number\" || typeof host == \"boolean\" || typeof host == \"symbol\" || typeof host == \"undefined\") { return null; }\n    if (existsQueries?.get?.(host)?.has?.(selector)) { return existsQueries?.get?.(host)?.get?.(selector); }\n\n    // @ts-ignore // is selector by host\n    return existsQueries?.getOrInsert?.(host, new Map())?.getOrInsertComputed?.(selector, ()=>{\n        return new Proxy(host, new UniversalElementHandler(selector, index, direction) as ProxyHandler<any>);\n    });\n}\n\n// syntax:\n// - [name]: (ctx) => function() {}\nexport const extendQueryPrototype = (extended: any = {})=>{ // @ts-ignore\n    return Object.assign(queryExtensions, extended);\n}\n\n//\nexport default Q;\n","import { addToCallChain, affected, iterated } from \"fest/object\";\nimport { isNotEqual, isPrimitive } from \"fest/core\";\n\n//\nimport { bindHandler, bindWith } from \"../core/Binding\";\nimport { handleDataset, handleProperty, handleAttribute, handleStyleChange } from \"fest/dom\";\nimport Q from \"../node/Queried\";\nimport { setChecked } from \"fest/dom\";\n\n// !\n// TODO! - add support for un-subscribe for everyone...\n// !\n\n//\nconst $entries = (obj: any) => {\n    if (isPrimitive(obj)) { return []; }\n    if (Array.isArray(obj)) { return obj.map((item, idx) => [idx, item]); }\n    if (obj instanceof Map) { return Array.from(obj.entries()); }\n    if (obj instanceof Set) { return Array.from(obj.values()); }\n    return Array.from(Object.entries(obj));\n}\n\n//\nexport const reflectAttributes = (element: HTMLElement, attributes: any)=>{\n    if (!attributes) return element;\n    const weak = new WeakRef(attributes), wel = new WeakRef(element);\n    if (typeof attributes == \"object\" || typeof attributes == \"function\") {\n        $entries(attributes).forEach(([prop, value])=>{\n            handleAttribute(wel?.deref?.(), prop, value);\n        });\n        const usub = affected(attributes, (value, prop: any)=>{\n            handleAttribute(wel?.deref?.(), prop, value);\n            bindHandler(wel?.deref?.(), value, prop, handleAttribute, weak, true);\n        });\n        addToCallChain(attributes, Symbol.dispose, usub);\n        addToCallChain(element, Symbol.dispose, usub);\n    } else\n    { console.warn(\"Invalid attributes object:\", attributes); }\n}\n\n//\nexport const reflectARIA = (element: HTMLElement, aria: any)=>{\n    if (!aria) return element;\n    const weak = new WeakRef(aria), wel = new WeakRef(element);\n    if (typeof aria == \"object\" || typeof aria == \"function\") {\n        $entries(aria).forEach(([prop, value])=>{\n            handleAttribute(wel?.deref?.(), \"aria-\"+(prop?.toString?.()||prop||\"\"), value);\n        });\n        const usub = affected(aria, (value, prop)=>{ // @ts-ignore\n            handleAttribute(wel?.deref?.(), \"aria-\"+(prop?.toString?.()||prop||\"\"), value, true);\n            bindHandler(wel, value, prop, handleAttribute, weak, true);\n        });\n        addToCallChain(aria, Symbol.dispose, usub);\n        addToCallChain(element, Symbol.dispose, usub);\n    } else\n    { console.warn(\"Invalid ARIA object:\", aria);}; return element;\n}\n\n//\nexport const reflectDataset = (element: HTMLElement, dataset: any)=>{\n    if (!dataset) return element;\n    const weak = new WeakRef(dataset), wel = new WeakRef(element);\n    if (typeof dataset == \"object\" || typeof dataset == \"function\") {\n        $entries(dataset).forEach(([prop, value])=>{\n            handleDataset(wel?.deref?.(), prop, value);\n        });\n        const usub = affected(dataset, (value, prop: any)=>{\n            handleDataset(wel?.deref?.(), prop, value);\n            bindHandler(wel?.deref?.(), value, prop, handleDataset, weak);\n        });\n        addToCallChain(dataset, Symbol.dispose, usub);\n        addToCallChain(element, Symbol.dispose, usub);\n    } else\n    { console.warn(\"Invalid dataset object:\", dataset); }; return element;\n}\n\n// TODO! support observe styles\nexport const reflectStyles = (element: HTMLElement, styles: string|any)=>{\n    if (!styles) return element;\n    if (typeof styles == \"string\") { element.style.cssText = styles; } else\n    if (typeof styles?.value == \"string\") { affected([styles, \"value\"], (val) => { element.style.cssText = val; }); } else\n    if (typeof styles == \"object\" || typeof styles == \"function\") {\n        const weak = new WeakRef(styles), wel = new WeakRef(element);\n        $entries(styles).forEach(([prop, value])=>{\n            handleStyleChange(wel?.deref?.(), prop, value);\n        });\n        const usub = affected(styles, (value, prop: any)=>{\n            handleStyleChange(wel?.deref?.(), prop, value);\n            bindHandler(wel?.deref?.(), value, prop, handleStyleChange, weak?.deref?.());\n        });\n\n        //\n        addToCallChain(styles, Symbol.dispose, usub);\n        addToCallChain(element, Symbol.dispose, usub);\n    } else\n    { console.warn(\"Invalid styles object:\", styles); } return element;\n}\n\n// one-shot update\nexport const reflectWithStyleRules = async (element: HTMLElement, rule: any)=>{ const styles = await rule?.(element); return reflectStyles(element, styles); }\nexport const reflectProperties = (element: HTMLElement, properties: any)=>{\n    if (!properties) return element; const weak = new WeakRef(properties), wel = new WeakRef(element);\n\n    //\n    const onChange = (ev: any)=>{\n        const input = Q(\"input\", ev?.target);\n        if (input?.value != null && isNotEqual(input?.value, properties?.value)) properties.value = input?.value;\n        if (input?.valueAsNumber != null && isNotEqual(input?.valueAsNumber, properties?.valueAsNumber)) properties.valueAsNumber = input?.valueAsNumber;\n        if (input?.checked != null && isNotEqual(input?.checked, properties?.checked)) properties.checked = input?.checked;\n    };\n\n    //\n    $entries(properties).forEach(([prop, value])=>{\n        handleProperty(wel?.deref?.(), prop, value);\n    });\n\n    //\n    const usub = affected(properties, (value, prop: any) => {\n        const el = wel.deref();\n        if (el) {\n            if (prop == \"checked\") {\n                setChecked(el as HTMLInputElement, value);\n            } else {\n                bindWith(el, prop, value, handleProperty, weak?.deref?.(), true);\n            }\n        }\n    });\n\n    //\n    addToCallChain(properties, Symbol.dispose, usub); addToCallChain(element, Symbol.dispose, usub); element.addEventListener(\"change\", onChange); return element;\n}\n\n//\nexport const reflectClassList = (element: HTMLElement, classList?: Set<string>)=>{\n    if (!classList) return element; const wel = new WeakRef(element);\n\n    //\n    $entries(classList).forEach(([prop, value]) => {\n        const el = element;\n        if (typeof value == \"undefined\" || value == null)\n            { if ( el.classList.contains(value)) { el.classList.remove(value); } } else\n            { if (!el.classList.contains(value)) { el.classList.add(value); }\n        }\n    });\n\n    const usub = iterated(classList, (value: string)=>{\n        const el = wel?.deref?.();\n        if (el) {\n            if (typeof value == \"undefined\" || value == null)\n                { if ( el.classList.contains(value)) { el.classList.remove(value); } } else\n                { if (!el.classList.contains(value)) { el.classList.add(value); }\n            }\n        }\n    });\n\n    //\n    addToCallChain(classList, Symbol.dispose, usub);\n    addToCallChain(element, Symbol.dispose, usub); return element;\n}\n","import { addToCallChain, iterated, ref, affected } from \"fest/object\";\n\n//\nimport getNode, { appendChild, removeNotExists, replaceChildren } from \"./Utils\";\nimport { removeChild, removeChildDirectly } from \"./Utils\";\nimport { $mapped, $behavior, addToBank, hasInBank } from \"../core/Binding\";\nimport { indexOf, isValidParent } from \"fest/dom\";\n\n//\nexport const makeUpdater = (defaultParent: Node | null = null, mapper?: Function | null, isArray: boolean = true) => {\n    /*const toBeRemoved: any[] = [], toBeAppend: any[] = [], toBeReplace: any[] = [];\n    const merge = () => { // @ts-ignore\n        toBeAppend.forEach((args) => appendChild(...args)); toBeAppend.splice(0, toBeAppend.length); // @ts-ignore\n        toBeRemoved.forEach((args) => removeChild(...args)); toBeRemoved.splice(0, toBeRemoved.length); // @ts-ignore\n        toBeReplace.forEach((args) => replaceChildren(...args)); toBeReplace.splice(0, toBeReplace.length); // @ts-ignore\n    }*/\n\n    //\n    const commandBuffer: any[] = [];\n    const merge = ()=>{\n        commandBuffer?.forEach?.(([fn, args])=>fn?.(...args));\n        commandBuffer?.splice?.(0, commandBuffer?.length);\n    }\n\n    //\n    const updateChildList = (newEl, idx, oldEl, op: string | null, boundParent: Node | null = null) => {\n        const $requestor = isValidParent(boundParent) ?? isValidParent(defaultParent);\n        const newNode = getNode(newEl, mapper, idx, $requestor);\n        const oldNode = getNode(oldEl, mapper, idx, $requestor);\n\n        //\n        let doubtfulParent = newNode?.parentElement ?? oldNode?.parentElement;\n        let element = isValidParent(doubtfulParent) ?? $requestor;\n        if (!element) return; if (defaultParent != element) { defaultParent = element; }\n\n        //\n        const oldIdx = indexOf(element, oldNode);\n\n        //\n        if (([\"@add\", \"@set\", \"@delete\"].indexOf(op || \"\") >= 0 || !op)) {\n            // due splice already removed that index, we need to add +1 to the index in exists children\n            if ((newNode == null && oldNode != null) || op == \"@delete\") { commandBuffer?.push?.([removeChild, [element, oldNode, null, oldIdx >= 0 ? oldIdx : idx]]); } else\n            if ((newNode != null && oldNode == null) || op == \"@add\") { commandBuffer?.push?.([appendChild, [element, newNode, null, idx]]); } else\n            if ((newNode != null && oldNode != null) || op == \"@set\") { commandBuffer?.push?.([replaceChildren, [element, newNode, null, oldIdx >= 0 ? oldIdx : idx, oldNode]]); }; // TODO: add support for oldNode in replace method\n        }\n\n        //\n        if ((op && op != \"@get\" && [\"@add\", \"@set\", \"@delete\"].indexOf(op) >= 0) || (!op && !isArray)) { merge?.(); }\n    }\n\n    //\n    return updateChildList;\n}\n\n//\nconst asArray = (children)=>{\n    if (children instanceof Map || children instanceof Set) {\n        children = Array.from(children?.values?.());\n    }\n    return children;\n}\n\n// TODO! use handlerMap registry\nexport const reflectChildren = (element: HTMLElement | DocumentFragment, children: any[] = [], mapper?: Function) => {\n    const $parent = getNode(Array.from(children?.values?.() || [])?.[0], mapper, 0)?.parentElement;\n    if (!isValidParent(element)) { element = (isValidParent($parent) ? $parent : element) ?? element; }\n    if (!children || hasInBank(element, children)) return element;\n\n    //\n    mapper = (children?.[$mapped] ? (children as any)?.mapper : mapper) ?? mapper;\n    children = (children?.[$mapped] ? (children as any)?.children : children) ?? children;\n\n    //\n    removeNotExists(element, asArray(children)?.map?.((nd, index) => getNode(nd, mapper, index, element)));\n    const updater = makeUpdater(element, mapper, true);\n    const unsub = iterated(children, (...args) => {\n        const firstOf = getNode(Array.from(children?.values?.() || [])?.[0], mapper, 0);\n        const boundParent = firstOf?.parentElement; // @ts-ignore\n        return updater(args?.[0], args?.[1], args?.[2], args?.[3], boundParent);\n    });\n\n    //\n    addToBank(element, reflectChildren, \"childNodes\", [children, unsub]);\n    addToCallChain(children, Symbol.dispose, unsub);\n    addToCallChain(element, Symbol.dispose, unsub); return element;\n}\n\n// forcely update child nodes (and erase current content)\nexport const reformChildren = (element: HTMLElement | DocumentFragment, children: any[] = [], mapper?: Function) => {\n    if (!children || !element) return element;\n\n    //\n    mapper = (children?.[$mapped] ? (children as any)?.mapper : mapper) ?? mapper;\n    children = (children?.[$mapped] ? (children as any)?.children : children) ?? children;\n\n    //\n    const keys = Array.from(children?.keys?.() || []);\n    const cvt = asArray(children)?.map?.((nd, index) => getNode(nd, mapper, keys?.[index] ?? index, element));\n\n    //\n    removeNotExists(element, cvt); cvt?.forEach?.((nd) => appendChild(element, nd));\n    return element;\n}\n","import { affected } from \"fest/object\";\nimport { appendFix, elMap, getNode, Ps, T } from \"../context/Utils\";\nimport { makeUpdater } from \"../context/ReflectChildren\";\nimport { isPrimitive, hasValue } from \"fest/core\";\nimport { indexOf, isValidParent } from \"fest/dom\";\nimport { $mapped } from \"../core/Binding\";\nimport Q from \"./Queried\";\n\n//\ninterface ChangeableOptions {\n    boundParent?: Node | null;\n}\n\n//\nclass Ch {\n    #stub = document.createComment(\"\");\n    #valueRef?: { value: any };\n    #fragments: DocumentFragment;\n    #updater: any = null;\n    #internal: any = null;\n    #updating: boolean = false;\n    #options: ChangeableOptions = {} as ChangeableOptions;\n    #oldNode: any; // in case, if '.value' is primitive, and can't be reused by maps\n    #mapCb: any = null;\n    //#reMap: WeakMap<any, any>; // reuse same object from value\n\n    //\n    #boundParent: Node | null = null;\n\n    //\n    makeUpdater(basisParent: Node | null = null) {\n        if (basisParent) {\n            this.#internal?.(); this.#internal = null; this.#updater = null;\n            this.#updater ??= makeUpdater(basisParent, null, false);\n            this.#internal ??= affected?.([this.#valueRef, \"value\"], this._onUpdate.bind(this));\n        }\n    }\n\n    //\n    get boundParent() { return this.#boundParent; }\n    set boundParent(value: Node | null) {\n        if (value instanceof HTMLElement && isValidParent(value) && value != this.#boundParent) {\n            this.#boundParent = value; this.makeUpdater(value);\n            if (this.#oldNode) {\n                //this.#oldNode?.parentNode != null && this.#oldNode?.replaceWith?.(this.#stub); this.#oldNode = this.#stub;\n                this.#oldNode?.parentNode != null && this.#oldNode?.remove?.(); this.#oldNode = null;\n            };\n\n            //\n            const element = this.element;\n            //if (element) { appendFix(this.#boundParent, element); };\n        }\n    }\n\n    //\n    constructor(valueRef, mapCb: any = (el) => el, options: Node | null | ChangeableOptions = /*{ removeNotExistsWhenHasPrimitives: true, uniquePrimitives: true, preMap: true } as MappedOptions*/ null) {\n        this.#stub = document.createComment(\"\");\n\n        // swap arguments (JSX compatibility)\n        if (hasValue(mapCb) && ((typeof valueRef == \"function\" || typeof valueRef == \"object\") && !hasValue(valueRef))) {\n            [valueRef, mapCb] = [mapCb, valueRef] as [any, any];\n        }\n\n        // may be unified with options, if isn't exists (JSX compatibility)\n        if (!options && (mapCb != null && typeof mapCb == \"object\") && !hasValue(mapCb)) {\n            options = mapCb as ChangeableOptions;\n        }\n\n        //\n        this.#mapCb = (mapCb != null ? (typeof mapCb == \"function\" ? mapCb : (typeof mapCb == \"object\" ? mapCb?.mapper : null)) : null) ?? ((el) => el);\n        this.#oldNode = null;//this.#stub;\n        this.#valueRef  = (!hasValue(valueRef) ? mapCb?.(valueRef, -1) : valueRef) ?? valueRef;\n        this.#fragments = document.createDocumentFragment();\n\n        //\n        const $baseOptions = { removeNotExistsWhenHasPrimitives: true, uniquePrimitives: true, preMap: true } as ChangeableOptions;\n        const $newOptions = (isValidParent(options as any) ? null : (options as ChangeableOptions|null)) || {};\n        this.#options = Object.assign($baseOptions, $newOptions);\n\n        //\n        this.boundParent = isValidParent(this.#options?.boundParent as any) ?? (isValidParent(options as any) ?? null);\n    }\n\n    //\n    $getNodeBy(requestor?: any, value?: any) {\n        const node = isPrimitive(hasValue(value) ? value?.value : value) ? T(value) : getNode(value, (value == requestor) ? null : this.#mapCb, -1, requestor);\n        return node;\n    }\n\n    //\n    $getNode(requestor?: any, reassignOldNode: boolean | null = true) {\n        // TODO: resolve somehow returning this.#valueRef as element...\n        const node = isPrimitive(this.#valueRef?.value) ? T(this.#valueRef) : getNode(this.#valueRef?.value, (requestor == this.#valueRef?.value) ? null : this.#mapCb, -1, requestor);\n        if (node != null && reassignOldNode) { this.#oldNode = node; };\n        return node;\n    }\n\n    //\n    get [$mapped]() { return true; }\n\n    //\n    elementForPotentialParent(requestor: any) {\n        /*if (isValidParent(requestor)) {\n            this.boundParent = requestor;\n            this.#valueRef?.[$trigger]?.();\n        }*/\n        Promise.try(() => {\n            const element = this.$getNode(requestor);\n            if (!element || !requestor || element?.contains?.(requestor) || requestor == element) {\n                return;\n            }\n            if (requestor instanceof HTMLElement && isValidParent(requestor)) {\n                if (Array.from(requestor?.children).find((node) => node === element)) {\n                    this.boundParent = requestor;\n                } else {\n                    const observer = new MutationObserver((records) => {\n                        for (const record of records) {\n                            if (record.type === \"childList\") {\n                                if (record.addedNodes.length > 0) {\n                                    const connectedNode = Array.from((record.addedNodes as any) || []).find((node) => node === element);\n                                    if (connectedNode) {\n                                        this.boundParent = requestor;\n                                        observer.disconnect();\n                                    }\n                                }\n                            }\n                        }\n                    });\n                    observer.observe(requestor, { childList: true });\n                }\n            }\n        })?.catch?.(console.warn.bind(console));\n        return this.element;\n    }\n\n    //\n    get self(): HTMLElement | DocumentFragment | Text | null {\n        const existsNode = this.$getNode(this.boundParent) ?? this.#stub;\n        const theirParent = isValidParent(existsNode?.parentElement) ? existsNode?.parentElement : this.boundParent;\n        this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n\n        //\n        queueMicrotask(() => {\n            const theirParent = isValidParent(existsNode?.parentElement) ? existsNode?.parentElement : this.boundParent;\n            this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n        })\n\n        //\n        return (theirParent ?? this.boundParent ?? existsNode);\n    }\n\n    //\n    get element(): HTMLElement | DocumentFragment | Text | null {\n        const children = this.$getNode(this.boundParent) ?? this.#stub;\n        const theirParent = isValidParent(children?.parentElement) ? children?.parentElement : this.boundParent;\n        this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n\n        //\n        queueMicrotask(() => {\n            const theirParent = isValidParent(children?.parentElement) ? children?.parentElement : this.boundParent;\n            this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n        })\n\n        //\n        return children;\n    }\n\n    //\n    _onUpdate(newVal, idx, oldVal, op) {\n        //if (this.#updating) { return; }\n        if (isPrimitive(oldVal) && isPrimitive(newVal)) { return; }\n\n        //\n        let oldEl = (isPrimitive(oldVal) ? this.#oldNode : this.$getNodeBy(this.boundParent, oldVal)); //?? this.#oldNode;\n        let newEl = this.$getNode(this.boundParent, false) ?? this.#stub;\n        if ((oldEl && !oldEl?.parentNode) || this.#oldNode?.parentNode) { oldEl = this.#oldNode ?? oldEl; };\n\n        //\n        let updated: any = this.#updater?.(newEl, indexOf(this.boundParent, oldEl), oldEl, op, this.boundParent);\n        if (newEl != null && newEl != this.#oldNode) { this.#oldNode = newEl; } else\n        if (newEl == null && oldEl != this.#oldNode) { this.#oldNode = oldEl; };\n        return updated;\n    }\n}\n\n//\nconst isWeakCompatible = (key: any) => { \n    return (typeof key == \"object\" || typeof key == \"function\" || typeof key == \"symbol\") && key != null;\n}\n\n//\nexport const C = (observable, mapCb?, boundParent: Node | null | ChangeableOptions = null) => {\n    if (observable instanceof HTMLElement) { return Q(observable); }\n    if (observable == null) return document.createComment(\":NULL:\");\n    const checkable = (typeof mapCb == \"function\" ? mapCb(observable, -1) : observable) ?? observable;\n    if (isPrimitive(checkable)) { return T(checkable); }\n\n    //\n    if (checkable != null && hasValue(checkable)) {\n        if (isPrimitive(checkable?.value)) {\n            return checkable?.value != null ? T(checkable) : document.createComment(\":NULL:\");\n        } else\n        if (typeof checkable == \"object\" || typeof checkable == \"function\") {\n            // @ts-ignore\n            return elMap.getOrInsertComputed(isWeakCompatible(observable) ? observable : checkable, () => {\n                return new Ch(observable, mapCb, boundParent);\n            });\n        }\n    }\n\n    //\n    return getNode(checkable, null, -1, boundParent);\n};\n\n//\nexport default C;\n","import { unwrap, affected } from \"fest/object\";\nimport { $virtual, $mapped } from \"../core/Binding\";\nimport { isElement, isValidParent } from \"fest/dom\";\nimport { hasValue, isNotEqual, isPrimitive } from \"fest/core\";\nimport C from \"../node/Changeable\";\nimport Q from \"../node/Queried\";\n\n//\nexport const KIDNAP_WITHOUT_HANG = (el: any, requestor: any | null) => {\n    return ((requestor && requestor != el && !el?.contains?.(requestor) && isValidParent(requestor)) ? el?.elementForPotentialParent?.(requestor) : null) ?? el?.element;\n}\n\n//\nexport const isElementValue = (el: any, requestor?: any | null) => { return KIDNAP_WITHOUT_HANG(el, requestor) ?? (hasValue(el) && isElement(el?.value) ? el?.value : el); }\n\n//\nexport const elMap = new WeakMap();\nexport const tmMap = new WeakMap();\n\n//\nconst getMapped = (obj: any)=>{\n    if (isPrimitive(obj)) return obj;\n    if (hasValue(obj) && isPrimitive(obj?.value)) return tmMap?.get(obj);\n    return elMap?.get?.(obj);\n}\n\n//\nconst $promiseResolvedMap = new WeakMap();\nconst $makePromisePlaceholder = (promised, getNodeCb)=>{\n    if ($promiseResolvedMap?.has?.(promised)) {\n        return $promiseResolvedMap?.get?.(promised);\n    }\n\n    //\n    const comment = document.createComment(\":PROMISE:\");\n    promised?.then?.((elem)=>{\n        const element = typeof getNodeCb == \"function\" ? getNodeCb(elem) : elem;\n        $promiseResolvedMap?.set?.(promised, element);\n\n        // avoid vain (not) replacement\n        queueMicrotask(() => {\n            try {\n                if (typeof comment?.replaceWith == \"function\") {\n                    if (!comment?.isConnected) return;\n                    if (isElement(element)) { comment?.replaceWith?.(element); }\n                } else\n                    if (comment?.isConnected && isElement(element)) {\n                        comment?.parentNode?.replaceChild?.(comment, element);\n                    }\n            } catch (error) {\n                if (!comment?.isConnected) return;\n                comment?.remove?.();\n            }\n        })\n    });\n    return comment;\n}\n\n//\nexport const $getBase = (el, mapper?: Function | null, index: number = -1, requestor?: any | null)=>{\n    if (mapper != null) { return (el = $getBase(mapper?.(el, index), null, -1, requestor)); }\n    if (el instanceof WeakRef || typeof (el as any)?.deref == \"function\") { el = el.deref(); } // promise unsupported\n    if (el instanceof Promise || typeof (el as any)?.then == \"function\") { return $makePromisePlaceholder(el, (nd)=>$getBase(nd, mapper, index, requestor)); };\n    if (isElement(el) && !el?.element) { return el; } else\n    if (isElement(el?.element)) { return el; } else\n    if (hasValue(el)) { return ((el instanceof HTMLElement) ? Q : C)(el); } else\n    if (typeof el == \"object\" && el != null) { return getMapped(el); } else\n    if (typeof el == \"function\") { return $getBase(el?.(), mapper, index, requestor); }  // mapped arrays always empties after\n    if (isPrimitive(el) && el != null) return T(el);\n    return document.createComment(\":NULL:\");\n}\n\n//\nexport const isValidElement = (el)=>{\n    return (isValidParent(el) || (el instanceof DocumentFragment) || (el instanceof Text)) ? el : null;\n}\n\n//\nexport const $getLeaf = (el, requestor?: any | null)=>{\n    return isElementValue(el, requestor) ?? isElement(el);\n}\n\n//\nexport const $getNode = (el, mapper?: Function | null, index: number = -1, requestor?: any | null) => {\n    if (mapper != null) { return (el = getNode(mapper?.(el, index), null, -1, requestor)); }\n    if (el instanceof WeakRef || typeof (el as any)?.deref == \"function\") { el = el.deref(); } // promise unsupported\n    if (el instanceof Promise || typeof (el as any)?.then == \"function\") { return $makePromisePlaceholder(el, (nd)=>getNode(nd, mapper, index, requestor)); };\n    if (isElement(el) && !el?.element) { return el; } else\n    if (isElement(el?.element)) { return isElementValue(el, requestor); } else\n    if (hasValue(el)) { return ((el instanceof HTMLElement) ? Q : C)(el)?.element; } else\n    if (typeof el == \"object\" && el != null) { return getMapped(el); } else\n    if (typeof el == \"function\") { return getNode(el?.(), mapper, index, requestor); } else\n    if (isPrimitive(el) && el != null) return T(el);\n    return document.createComment(\":NULL:\");\n};\n\n//\nconst isWeakCompatible = (el: any)=>{\n    return (typeof el == \"object\" || typeof el == \"function\" || typeof el == \"symbol\") && el != null;\n}\n\n//\nconst __nodeGuard = new WeakSet<any>();\nconst __getNode = (el, mapper?: Function | null, index: number = -1, requestor?: any | null)=>{\n    if (el instanceof WeakRef || typeof (el as any)?.deref == \"function\") { el = el.deref(); }\n    if (el instanceof Promise || typeof (el as any)?.then == \"function\") { return $makePromisePlaceholder(el, (nd)=>__getNode(nd, mapper, index, requestor)); };\n    if (isWeakCompatible(el) && !isElement(el)) {\n        if (elMap.has(el)) {\n            const obj: any = getMapped(el) ?? $getBase(el, mapper, index, requestor);\n            return $getLeaf(obj instanceof WeakRef ? obj?.deref?.() : obj, requestor);\n        };\n        const $node = $getBase(el, mapper, index, requestor);\n        if (!mapper && $node != null && $node != el && isWeakCompatible(el) && !isElement(el)) { elMap.set(el, $node); }\n        return $getLeaf($node, requestor);\n    }\n    return $getNode(el, mapper, index, requestor);\n}\n\n// (obj instanceof WeakRef ? obj?.deref?.() : obj)\nexport const getNode = (el, mapper?: Function | null, index: number = -1, requestor?: any | null) => {\n    if (isWeakCompatible(el) && __nodeGuard.has(el)) { return getMapped(el) ?? isElement(el); }\n    if (isWeakCompatible(el)) __nodeGuard.add(el); const result = __getNode(el, mapper, index, requestor);\n    if (isWeakCompatible(el)) __nodeGuard.delete(el); return result;\n}\n\n/*\nexport const getNode = (el, mapper?: Function | null, index: number = -1, requestor?: any | null) => {\n    return __getNode(el, mapper, index, requestor);\n}*/\n\n//\nconst appendOrEmplaceByIndex = (parent: any, child: any, index: number = -1) => {\n    if (isElement(child) && child != null && child?.parentNode != parent) {\n        if (Number.isInteger(index) && index >= 0 && index < parent?.childNodes?.length) {\n            parent?.insertBefore?.(child, parent?.childNodes?.[index]);\n        } else {\n            parent?.append?.(child);\n        }\n    }\n}\n\n//\nexport const appendFix = (parent: any, child: any, index: number = -1) => {\n    if (!isElement(child) || parent == child || child?.parentNode == parent) return;\n    child = (child as any)?._onUpdate ? KIDNAP_WITHOUT_HANG(child, parent) : child;\n    if (!child?.parentNode && isElement(child)) { appendOrEmplaceByIndex(parent, child, index); return; };\n    if (parent?.parentNode == child?.parentNode) { return; }\n    if (isElement(child)) { appendOrEmplaceByIndex(parent, child, index); };\n}\n\n//\nconst asArray = (children)=>{\n    if (children instanceof Map || children instanceof Set) {\n        children = Array.from(children?.values?.());\n    }\n    return children;\n}\n\n//\nexport const appendArray = (parent: any, children: any[], mapper?: Function | null, index: number = -1) => {\n    const len = children?.length ?? 0;\n    if (Array.isArray(unwrap(children)) || children instanceof Map || children instanceof Set) {\n        const list = asArray(children)?.map?.((cl, I: number) => getNode(cl, mapper, I, parent))?.filter?.((el) => el != null)\n        const frag = document.createDocumentFragment();\n        list?.forEach?.((cl)=>appendFix(frag, cl));\n        appendFix(parent, frag, index);\n    } else {\n        const node = getNode(children, mapper, len, parent);\n        if (node != null) { appendFix(parent, node, index); }\n    }\n}\n\n//\nexport const appendChild = (element, cp, mapper?: Function | null, index: number = -1) => {\n    if (mapper != null) { cp = mapper?.(cp, index); }\n\n    // has children lists\n    if (cp?.children && Array.isArray(unwrap(cp?.children)) && (cp?.[$virtual] || cp?.[$mapped])) {\n        appendArray(element, cp?.children, null, index);\n    } else {\n        appendArray(element, cp, null, index);\n    }\n}\n\n\n\n//\nexport const dePhantomNode = (parent, node, index: number = -1)=>{\n    if (!parent) return node;\n    if (node?.parentNode == parent && node?.parentNode != null) {\n        return node;\n    } else\n    if (node?.parentNode != parent && !isValidParent(node?.parentNode)) {\n        if (Number.isInteger(index) && index >= 0 && Array.from(parent?.childNodes || [])?.length > index) {\n            return parent.childNodes?.[index];\n        }\n    }\n    return node;\n}\n\n//\nexport const replaceOrSwap = (parent, oldEl, newEl) => {\n    if (oldEl?.parentNode) {\n        if (oldEl?.parentNode == newEl?.parentNode) {\n            parent = oldEl?.parentNode ?? parent;\n            if (oldEl.nextSibling === newEl) { parent.insertBefore(newEl, oldEl); } else\n            if (newEl.nextSibling === oldEl) { parent.insertBefore(oldEl, newEl); } else\n            {\n                const nextSiblingOfElement1 = oldEl.nextSibling;\n                parent.replaceChild(newEl, oldEl);\n                parent.insertBefore(oldEl, nextSiblingOfElement1);\n            }\n        } else {\n            oldEl?.replaceWith?.(newEl);\n        }\n    }\n}\n\n\n\n// TODO: what exactly to replace, if has (i.e. object itself, not index)\nexport const replaceChildren = (element, cp, mapper?: Function | null, index: number = -1, old?: any|null) => {\n    if (mapper != null) { cp = mapper?.(cp, index); }; if (!element) element = old?.parentNode;\n    const cn = dePhantomNode(element, getNode(old, mapper, index), index);\n    if (cn instanceof Text && typeof cp == \"string\") { cn.textContent = cp; } else\n    if (cp != null) {\n        const node = getNode(cp); // oldNode is always unknown and phantom\n\n        if (cn?.parentNode == element && cn != node && (cn instanceof Text && node instanceof Text)) {\n            if (cn?.textContent != node?.textContent) { cn.textContent = node?.textContent?.trim?.() ?? \"\"; }\n        } else\n        if (cn?.parentNode == element && cn != node && cn != null && cn?.parentNode != null) {\n            replaceOrSwap(element, cn, node);\n        } else\n        if (cn?.parentNode != element || cn?.parentNode == null) {\n            appendChild(element, node, null, index);\n        }\n    }\n}\n\n//\nexport const removeChildDirectly = (element, node, _?: Function | null, index: number = -1) => {\n    if (Array.from(element?.childNodes ?? [])?.length < 1) return;\n    const whatToRemove = dePhantomNode(element, node, index);\n    if (whatToRemove?.parentNode == element) whatToRemove?.remove?.();\n    return element;\n}\n\n//\nexport const removeChild = (element, cp, mapper?: Function | null, index: number = -1) => {\n    const $node = getNode(cp, mapper);\n    if (!element) element = $node?.parentNode;\n    if (Array.from(element?.childNodes ?? [])?.length < 1) return;\n    const whatToRemove = dePhantomNode(element, $node, index);\n    if (whatToRemove?.parentNode == element) whatToRemove?.remove?.();\n    return element;\n}\n\n//\nexport const removeNotExists = (element, children, mapper?: Function | null) => {\n    const list = Array.from(unwrap(children) || [])?.map?.((cp, index) => getNode(cp, mapper, index));\n    Array.from(element.childNodes).forEach((nd: any) => { if (!list?.find?.((cp) => (!isNotEqual?.(cp, nd)))) nd?.remove?.(); });\n    return element;\n}\n\n//\nexport const T = (ref) => {\n    if (isPrimitive(ref) && ref != null) { return document.createTextNode(ref); }\n    if (ref == null) return document.createComment(\":NULL:\");\n\n    // @ts-ignore\n    return tmMap.getOrInsertComputed(ref, () => {\n        const element = document.createTextNode(((hasValue(ref) ? ref?.value : ref) ?? \"\")?.trim?.() ?? \"\");\n        //affected([ref, \"value\"], (val) => (element.textContent = (val?.innerText ?? val?.textContent ?? val ?? \"\")?.trim?.() ?? \"\"));\n        affected([ref, \"value\"], (val) => {\n            const untrimmed = \"\" + (val?.innerText ?? val?.textContent ?? val?.value ?? val ?? \"\");\n            (element.textContent = untrimmed?.trim?.() ?? \"\");\n        });\n        return element;\n    });\n}\n\n//\nexport default getNode;\n","import { iterated, ref } from \"fest/object\";\nimport { $mapped } from \"../core/Binding\";\nimport { getNode, appendFix, removeNotExists, removeChild, removeChildDirectly, appendChild } from \"../context/Utils\";\nimport { makeUpdater, reformChildren } from \"../context/ReflectChildren\";\nimport { canBeInteger, isObservable, isPrimitive, isHasPrimitives } from \"fest/core\";\nimport { isValidParent } from \"fest/dom\";\nimport C from \"./Changeable\";\n\n//\ninterface MappedOptions {\n    uniquePrimitives?: boolean;\n    removeNotExistsWhenHasPrimitives?: boolean;\n    boundParent?: Node | null;\n    preMap?: boolean;\n}\n\n//\nconst asArray = (children)=>{\n    if (children instanceof Map || children instanceof Set) {\n        children = Array.from(children?.values?.());\n    }\n    return children;\n}\n\n//\nclass Mp {\n    #observable?: any[];\n    #fragments: DocumentFragment;\n    #mapCb: any;\n    #reMap: WeakMap<any, any>;\n    #pmMap: Map<any, any>;\n    #updater: any = null;\n    #internal: any = null;\n    #options: MappedOptions = {} as MappedOptions;\n    #stub = document.createComment(\"\");\n\n    //\n    #indexMap: Map<any, any> = new Map();\n\n    //\n    #boundParent: Node | null = null;\n\n    //\n    makeUpdater(basisParent: Node | null = null) {\n        if (basisParent) {\n            this.#internal?.(); this.#internal = null; this.#updater = null;\n            this.#updater ??= makeUpdater(basisParent, this.mapper.bind(this), Array.isArray(this.#observable));\n            this.#internal ??= iterated?.(this.#observable, this._onUpdate.bind(this));\n        }\n    }\n\n    //\n    get boundParent() {\n        return this.#boundParent;\n    }\n\n    //\n    set boundParent(value: Node | null) {\n        if (value instanceof HTMLElement && isValidParent(value) && value != this.#boundParent) {\n            this.#boundParent = value; this.makeUpdater(value); const element = this.element;\n            //if (element && element instanceof DocumentFragment) { appendFix(this.#boundParent, element); };\n        }\n    }\n\n    //\n    constructor(observable, mapCb: any = (el) => el, options: Node | null | MappedOptions = /*{ removeNotExistsWhenHasPrimitives: true, uniquePrimitives: true, preMap: true } as MappedOptions*/ null) {\n        // swap arguments (JSX compatibility)\n        if (isObservable(mapCb) && ((typeof observable == \"function\" || typeof observable == \"object\") && !isObservable(observable))) {\n            [observable, mapCb] = [mapCb, observable] as [any, any];\n        }\n\n        // may be unified with options, if isn't exists (JSX compatibility)\n        if (!options && (mapCb != null && typeof mapCb == \"object\") && !isObservable(mapCb)) {\n            options = mapCb as MappedOptions;\n        }\n\n        //\n        this.#stub = document.createComment(\"\");\n        this.#reMap = new WeakMap();\n        this.#pmMap = new Map<any, any>(); // make 'mapper' compatible with React syntax ('mapper' property instead of function)\n        this.#mapCb = (mapCb != null ? (typeof mapCb == \"function\" ? mapCb : (typeof mapCb == \"object\" ? mapCb?.mapper : null)) : null) ?? ((el) => el);\n        this.#observable = (isObservable(observable) ? observable : (observable?.iterator ?? mapCb?.iterator ?? observable)) ?? [];\n        this.#fragments = document.createDocumentFragment();\n\n        //\n        const $baseOptions = { removeNotExistsWhenHasPrimitives: true, uniquePrimitives: true, preMap: true } as MappedOptions;\n        const $newOptions = (isValidParent(options as any) ? null : (options as MappedOptions|null)) || {};\n        this.#options = Object.assign($baseOptions, $newOptions);\n\n        //\n        this.boundParent = isValidParent(this.#options?.boundParent as any) ?? (isValidParent(options as any) ?? null);\n        if (!this.boundParent) {\n            if (this.#options.preMap) {\n                reformChildren(\n                    this.#fragments, this.#observable,\n                    this.mapper.bind(this)\n                );\n                if (this.#fragments.childNodes.length === 0) {\n                    this.#fragments.appendChild(this.#stub);\n                }\n            }\n        }\n    }\n\n    //\n    get [$mapped]() { return true; }\n\n    //\n    elementForPotentialParent(requestor: any) {\n        Promise.try(() => {\n            const element = getNode(this.#observable?.[0], this.mapper.bind(this), 0);\n            if (!element || !requestor || element?.contains?.(requestor) || requestor == element) {\n                return;\n            }\n            if (requestor instanceof HTMLElement && isValidParent(requestor)) {\n                if (Array.from(requestor?.children).find((node) => node === element)) {\n                    this.boundParent = requestor;\n                } else {\n                    const observer = new MutationObserver((records) => {\n                        for (const record of records) {\n                            if (record.type === \"childList\") {\n                                if (record.addedNodes.length > 0) {\n                                    const connectedNode = Array.from((record.addedNodes as any) || []).find((node) => node === element);\n                                    if (connectedNode) {\n                                        this.boundParent = requestor;\n                                        observer.disconnect();\n                                    }\n                                }\n                            }\n                        }\n                    });\n                    observer.observe(requestor, { childList: true });\n                }\n            }\n        })?.catch?.(console.warn.bind(console));\n\n        //\n        return this.element;\n    }\n\n    //\n    get children() { return asArray(this.#observable); }\n\n    //\n    get self(): HTMLElement | DocumentFragment | Text | null {\n        const existsNode = getNode(this.#observable?.[0], this.mapper.bind(this), 0);\n        const theirParent = isValidParent(existsNode?.parentElement) ? existsNode?.parentElement : this.boundParent;\n        this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n\n        //\n        queueMicrotask(() => {\n            const theirParent = isValidParent(existsNode?.parentElement) ? existsNode?.parentElement : this.boundParent;\n            this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n        });\n\n        //\n        return (theirParent ?? this.boundParent ?? (reformChildren(\n            this.#fragments, this.#observable,\n            this.mapper.bind(this)\n        )));\n    }\n\n    //\n    get element(): HTMLElement | DocumentFragment | Text | null {\n        const children = this.#fragments?.childNodes?.length > 0 ? this.#fragments : getNode(this.#observable?.[0], this.mapper.bind(this), 0);\n        const theirParent = isValidParent(children?.parentElement) ? children?.parentElement : this.boundParent;\n        this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n\n        //\n        queueMicrotask(() => {\n            const theirParent = isValidParent(children?.parentElement) ? children?.parentElement : this.boundParent;\n            this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n        });\n\n        //\n        return children;\n    }\n\n    //\n    get mapper() {\n        return (...args) => {\n            if (args?.[0] == null) { return null; }\n\n            //\n            if (args?.[0] instanceof Node) { return args?.[0]; };\n\n            // unsupported\n            if (args?.[0] instanceof Promise || typeof (args?.[0] as any)?.then == \"function\") { return null; };\n\n            //\n            if (\n                (args?.[1] == null || args?.[1] < 0 || (typeof args?.[1] != \"number\" || !canBeInteger(args?.[1] as any))) &&\n                (Array.isArray(this.#observable) || ((this.#observable as any) instanceof Set))\n            ) { return; }\n\n            //\n            if (args?.[0] != null && (typeof args?.[0] == \"object\" || typeof args?.[0] == \"function\" || typeof args?.[0] == \"symbol\")) // @ts-ignore\n                { return this.#reMap.getOrInsert(args?.[0], this.#mapCb(...args)); }\n\n            // prevalence of Set typed\n            if (args?.[0] != null && this.#observable instanceof Set) // @ts-ignore\n                { return this.#pmMap.getOrInsert(args?.[0], this.#mapCb(...args)); }\n\n            // prevalence of Map typed\n            if (args?.[0] != null && this.#observable instanceof Map) {\n                // unique value in map\n                if (typeof args?.[0] == \"object\" || typeof args?.[0] == \"function\" || typeof args?.[0] == \"symbol\") // @ts-ignore\n                    { return this.#reMap.getOrInsert(args?.[0], this.#mapCb(...args)); } else\n                // unique key in map (objects)\n                if (typeof args?.[1] == \"object\" || typeof args?.[1] == \"function\" || typeof args?.[1] == \"symbol\") // @ts-ignore\n                    { return this.#reMap.getOrInsert(args?.[1], this.#mapCb(...args)); } else // @ts-ignore\n                    { return this.#pmMap.getOrInsert(args?.[1], this.#mapCb(...args)); }\n            }\n\n            // array may has same values twice, no viable solution...\n            if (args?.[0] != null) {\n                if (this.#options?.uniquePrimitives && isPrimitive(args?.[0])) // @ts-ignore\n                    { return this.#pmMap.getOrInsert(args?.[0], this.#mapCb(...args)); } else\n                    { return this.#mapCb(...args); }\n            }\n        }\n    }\n\n    //\n    _onUpdate(newEl, idx, oldEl, op: string | null = \"\") {\n        //\n        if (op == \"@add\" || (newEl != null && oldEl == null)) {\n            if (this.#indexMap.has(idx)) { return; }\n            const indexRef = ref(this.#observable, idx);\n            const withElement = C(indexRef, (...args) => {\n                if (args?.[1] == null || args?.[1] < 0) { args[1] = idx ?? args?.[1]; };\n                return this.mapper(...args);\n            });\n            this.#indexMap.set(idx, withElement);\n            appendChild(this.boundParent, withElement, null, idx);\n        }\n\n        //\n        if (op == \"@delete\" || (newEl == null && oldEl != null)) {\n            const withElement = this.#indexMap.get(idx);\n            if (withElement) { removeChild(this.boundParent, withElement, null, idx); }\n            this.#indexMap.delete(idx);\n        }\n    }\n\n    // generator and iterator\n    *[Symbol.iterator]() {\n        let i=0;\n        if (this.#observable) {\n            for (let el of this.#observable)\n                { yield this.mapper(el, i++); }\n        }\n        return;\n    }\n}\n\n//\nexport const M = (observable, mapCb?, boundParent: Node | null | MappedOptions = null) => {\n    return new Mp(observable, mapCb, boundParent);\n};\n\n//\nexport default M;\n","import { reflectBehaviors, reflectStores, reflectMixins, handleProperty, handleAttribute, handleHidden, addEventsList, createElementVanilla } from \"fest/dom\";\nimport { reflectClassList, reflectStyles, reflectDataset, reflectAttributes, reflectProperties, reflectWithStyleRules, reflectARIA } from '../context/Reflect';\nimport { reflectControllers, bindWith } from '../core/Binding';\n\n//\nimport { affected } from \"fest/object\";\nimport { Q } from \"./Queried\";\nimport { M } from \"./Mapped\";\nimport { getNode } from \"../context/Utils\";\n\n//\ninterface Params {\n    classList?: Set<string>;\n    attributes?: any;\n    dataset?: any;\n    properties?: any;\n    behaviors?: any;\n    stores?: any[] | Set<any> | Map<any, any>;\n    style?: any | string;\n    slot?: any | string;\n    name?: any | string;\n    type?: any | string;\n    icon?: any | string;\n    role?: any | string;\n    inert?: boolean | string;\n    mixins?: any;\n    ctrls?: any;\n    is?: any | string;\n    part?: any | string;\n    on?: any;\n    visible?: any;\n    hidden?: any;\n    aria?: any;\n    rules?: any[];\n};\n\n// WILL not be released!\nexport const Qp = (ref, host = document.documentElement)=>{\n    if (ref?.value == null) { return Q(ref, host); }\n    const actual = Q(ref?.value, host);\n    affected(ref, (value, prop)=>actual?._updateSelector(value));\n    return actual;\n}\n\n//\nexport const $createElement = (selector: string | HTMLElement | Node | DocumentFragment | Document | Element)=>{\n    if (typeof selector == \"string\") {\n        const nl = Qp(createElementVanilla(selector));\n        return nl?.element ?? nl;\n    } else if (selector instanceof HTMLElement || selector instanceof Element || selector instanceof DocumentFragment || selector instanceof Document || selector instanceof Node) {\n        return selector;\n    } else {\n        return null;\n    }\n}\n\n//\nexport const E = (selector: string | HTMLElement | Node | DocumentFragment | Document | Element, params: Params = {}, children?: any[]|any|null) => {\n    const element = getNode(typeof selector == \"string\" ? $createElement(selector) : selector, null, -1);\n    if (element && children) { M(children, (el)=>el, element); /*reflectChildren(element, children);*/ }\n    if (element && params) {\n        if (params.ctrls != null) reflectControllers(element, params.ctrls);\n        if (params.attributes != null) reflectAttributes(element, params.attributes);\n        if (params.properties != null) reflectProperties(element, params.properties);\n        if (params.classList != null) reflectClassList(element, params.classList);\n        if (params.behaviors != null) reflectBehaviors(element, params.behaviors);\n        if (params.dataset != null) reflectDataset(element, params.dataset);\n        if (params.stores != null) reflectStores(element, params.stores);\n        if (params.mixins != null) reflectMixins(element, params.mixins);\n        if (params.style != null) reflectStyles(element, params.style);\n        if (params.aria != null) reflectARIA(element, params.aria);\n\n        //\n        if (params.is != null) bindWith(element, \"is\", params.is, handleAttribute, params, true);\n        if (params.role != null) bindWith(element, \"role\", params.role, handleProperty, params);\n        if (params.slot != null) bindWith(element, \"slot\", params.slot, handleProperty, params);\n        if (params.part != null) bindWith(element, \"part\", params.part, handleAttribute, params, true);\n        if (params.name != null) bindWith(element, \"name\", params.name, handleAttribute, params, true);\n        if (params.type != null) bindWith(element, \"type\", params.type, handleAttribute, params, true);\n        if (params.icon != null) bindWith(element, \"icon\", params.icon, handleAttribute, params, true);\n        if (params.inert != null) bindWith(element, \"inert\", params.inert, handleAttribute, params, true);\n        if (params.hidden != null) bindWith(element, \"hidden\", params.visible ?? params.hidden, handleHidden, params);\n        if (params.on != null) addEventsList(element, params.on);\n\n        //\n        if (params.rules != null) params.rules.forEach?.((rule) => reflectWithStyleRules(element, rule));\n    };\n    return Q(element);\n}\n\n//\nexport default E;\n","\n//\nexport function getIndentColumns(line: string, tabWidth = 4): number {\n    let col = 0;\n    for (let i = 0; i < line.length; i++) {\n        const ch = line[i];\n        if (ch === ' ') col += 1;\n        else if (ch === '\\t') col += tabWidth - (col % tabWidth);\n        else break;\n    }\n    return col;\n}\n\n//\nexport function stripIndentColumns(line: string, columns: number, tabWidth = 4): string {\n    let col = 0, i = 0;\n    while (i < line.length && col < columns) {\n        const ch = line[i];\n        if (ch === ' ') { col += 1; i++; }\n        else if (ch === '\\t') { col += tabWidth - (col % tabWidth); i++; }\n        else break;\n    }\n    return line.slice(i);\n}\n\n//\nexport function pickEOL(s: string): string {\n    if (s.includes('\\r\\n')) return '\\r\\n';\n    if (s.includes('\\r')) return '\\r';\n    return '\\n';\n}\n\n//\nexport function gcd(a: number, b: number): number {\n    a = Math.abs(a); b = Math.abs(b);\n    while (b) [a, b] = [b, a % b];\n    return a;\n}\n\n//\nexport function detectIndentStep(\n    text: string,\n    { ignoreFirstLine = true, tabWidth = 4 } = {}\n): { min: number; step: number; allEven: boolean; allDiv4: boolean } {\n    const lines = text.split(/\\r\\n|\\n|\\r/);\n    const start = ignoreFirstLine ? 1 : 0;\n\n    const indents: number[] = [];\n    for (let i = start; i < lines.length; i++) {\n        const ln = lines[i];\n        if (ln.trim() === '') continue;\n        indents.push(getIndentColumns(ln, tabWidth));\n    }\n    if (indents.length === 0) return { min: 0, step: 0, allEven: true, allDiv4: true };\n\n    const min = Math.min(...indents);\n    const shifted = indents.map(v => v - min).filter(v => v > 0);\n    let step = 0;\n    for (const v of shifted) step = step ? gcd(step, v) : v;\n\n    const allEven = indents.every(v => v % 2 === 0);\n    const allDiv4 = indents.every(v => v % 4 === 0);\n\n    //  :  4,  2,  1\n    if (step === 0) {\n        //   ;    \n        step = allDiv4 ? 4 : allEven ? 2 : 1;\n    } else {\n        if (step % 4 === 0) step = 4;\n        else if (step % 2 === 0) step = 2;\n        else step = 1;\n    }\n\n    return { min, step, allEven, allDiv4 };\n}\n\n//\nexport function adjustIndentToGrid(\n    line: string,\n    step: number,\n    mode: 'floor' | 'nearest' | 'ceil' = 'floor',\n    tabWidth = 4\n): string {\n    if (!step || step <= 1) return line; //     1n\n    const cur = getIndentColumns(line, tabWidth);\n    if (cur === 0) return line; //  \n    let target: number;\n    if (mode === 'nearest') target = Math.round(cur / step) * step;\n    else if (mode === 'ceil') target = Math.ceil(cur / step) * step;\n    else target = Math.floor(cur / step) * step;\n\n    const delta = cur - target;\n    if (delta > 0) {\n        //    delta \n        return stripIndentColumns(line, delta, tabWidth);\n    } else if (delta < 0) {\n        //   (  )  \n        return ' '.repeat(-delta) + line;\n    }\n    return line;\n}\n\n//\nexport function normalizeStartTagWhitespace(\n    html: string,\n    { scope = 'void-only' as 'void-only' | 'input-only' | 'all' } = {}\n): string {\n    if (!html || typeof html !== 'string') return html;\n\n    const VOID = new Set([\n        'area', 'base', 'br', 'col', 'embed', 'hr', 'img', 'input', 'link', 'meta',\n        'param', 'source', 'track', 'wbr'\n    ]);\n\n    let out = '';\n    let i = 0;\n    const n = html.length;\n\n    while (i < n) {\n        const ch = html[i];\n        if (ch !== '<') { out += ch; i++; continue; }\n\n        //  <!-- ... -->\n        if (html.startsWith('<!--', i)) {\n            const end = html.indexOf('-->', i + 4);\n            if (end === -1) { out += html.slice(i); break; }\n            out += html.slice(i, end + 3);\n            i = end + 3;\n            continue;\n        }\n        // DOCTYPE/DECL/CDATA/PI\n        if (html[i + 1] === '!' || html[i + 1] === '?') {\n            const end = html.indexOf('>', i + 2);\n            if (end === -1) { out += html.slice(i); break; }\n            out += html.slice(i, end + 1);\n            i = end + 1;\n            continue;\n        }\n        //  \n        if (html[i + 1] === '/') {\n            const end = html.indexOf('>', i + 2);\n            if (end === -1) { out += html.slice(i); break; }\n            out += html.slice(i, end + 1);\n            i = end + 1;\n            continue;\n        }\n\n        //  \n        let j = i + 1;\n        //    \"<\"\n        while (j < n && /\\s/.test(html[j])) j++;\n        const nameStart = j;\n        while (j < n && /[A-Za-z0-9:-]/.test(html[j])) j++;\n        const tagName = html.slice(nameStart, j).toLowerCase();\n        //      \n        let k = j;\n        let quote: '\"' | \"'\" | null = null;\n        while (k < n) {\n            const c = html[k];\n            if (quote) {\n                if (c === quote) quote = null;\n                k++;\n            } else {\n                if (c === '\"' || c === \"'\") { quote = c as '\"' | \"'\"; k++; }\n                else if (c === '>') { break; }\n                else { k++; }\n            }\n        }\n        if (k >= n) { out += html.slice(i); break; }\n        const rawTag = html.slice(i, k + 1); //  '>'\n\n        const shouldNormalize =\n            scope === 'all' ||\n            (scope === 'input-only' && tagName === 'input') ||\n            (scope === 'void-only' && VOID.has(tagName));\n\n        if (!shouldNormalize) {\n            out += rawTag;\n            i = k + 1;\n            continue;\n        }\n\n        //     ( )\n        let res = '';\n        let q: '\"' | \"'\" | null = null;\n        let ws = false;\n        for (let p = 0; p < rawTag.length; p++) {\n            const c = rawTag[p];\n            if (q) {\n                res += c;\n                if (c === q) q = null;\n                continue;\n            }\n            if (c === '\"' || c === \"'\") { q = c as '\"' | \"'\"; res += c; ws = false; continue; }\n            if (c === '\\n' || c === '\\r' || c === '\\t' || c === ' ') {\n                if (!ws) { res += ' '; ws = true; }\n                continue;\n            }\n            res += c;\n            ws = false;\n        }\n        //    '>'  '/>'\n        res = res.replace(/\\s*(\\/?)\\s*>$/, '$1>');\n\n        out += res;\n        i = k + 1;\n    }\n\n    return out;\n}\n\n//\nexport function collapseInterTagWhitespaceSmart(\n    html: string,\n    { preserveCommentGaps = true } = {}\n): string {\n    if (!html || typeof html !== 'string') return html;\n\n    if (!preserveCommentGaps) {\n        //  \n        return html.replace(/>\\s+</g, '><');\n    }\n\n    //  - \n    const SENT = '\\u0001';\n\n    let s = html;\n\n    // 1)  -   :\n    //    <!-- -->  <!-- -->,  <!-- -->  <tag,  <tag>  <!-- -->\n    //    [^\\S\\r\\n]+     (  )\n    s = s\n        .replace(/-->([^\\S\\r\\n]+)<!--/g, `-->${SENT}<!--`)\n        .replace(/-->([^\\S\\r\\n]+)</g, `-->${SENT}<`)\n        .replace(/>([^\\S\\r\\n]+)<!--/g, `>${SENT}<!--`);\n\n    // 2)     (   )\n    s = s.replace(/>\\s+</g, '><');\n\n    // 3)    ,   \n    s = s.replace(new RegExp(SENT, 'g'), ' ');\n\n    return s;\n}\n\n//\nexport function cleanupInterTagWhitespaceAndIndent(\n    html: string,\n    {\n        normalizeIndent = true,          //    \n        ignoreFirstLine = true,          //      \n        tabWidth = 4,                    //    \n        alignStep = 'auto' as 'auto' | 1 | 2 | 4, //  2n/4n/1n\n        quantize = 'none' as 'none' | 'floor' | 'nearest' | 'ceil', //   \n    } = {}\n): string {\n    if (!html || typeof html !== 'string' || html.indexOf('<') === -1) return html;\n    html = html?.trim?.();\n\n    //\n    const placeholders: string[] = [];\n    const protectedHtml = html.replace(\n        /<(pre|textarea|script|style)\\b[\\s\\S]*?<\\/\\1>/gi,\n        (m) => {\n            const i = placeholders.push(m) - 1;\n            return `\\u0000${i}\\u0000`;\n        }\n    );\n\n    const eol = pickEOL(protectedHtml);\n    const lines = protectedHtml.split(/\\r\\n|\\n|\\r/);\n    const start = ignoreFirstLine ? 1 : 0;\n\n    // 1)     \n    const { min, step: autoStep } = detectIndentStep(protectedHtml, { ignoreFirstLine, tabWidth });\n\n    // 2) Dedent:    \n    if (normalizeIndent && min > 0) {\n        for (let i = start; i < lines.length; i++) {\n            const ln = lines[i];\n            if (ln.trim() === '') continue;\n            lines[i] = stripIndentColumns(ln, min, tabWidth);\n        }\n    }\n\n    // 3)    2n/4n  \n    let step = alignStep === 'auto' ? autoStep : alignStep;\n    if (quantize !== 'none' && step > 1) {\n        for (let i = start; i < lines.length; i++) {\n            const ln = lines[i];\n            if (ln.trim() === '') continue;\n            lines[i] = adjustIndentToGrid(ln, step, quantize, tabWidth);\n        }\n    }\n\n    // 4)     / \n    let working = lines.join(eol);\n\n    // 5) ...dedent/\n    working = normalizeStartTagWhitespace(working, { scope: 'void-only' });\n\n    // 6)   \n    working = collapseInterTagWhitespaceSmart(working);\n\n    // 7)   \n    const cleaned = working.replace(/\\u0000(\\d+)\\u0000/g, (_, i) => placeholders[+i]);\n    return cleaned?.trim?.();\n}\n\n//\nexport function checkInsideTagBlock(contextParts: string[], ...str: string[]) {\n    const current = str?.[0] ?? \"\";\n    const idx = contextParts.indexOf(current);\n    // Fallback simple heuristic if index not found\n    if (idx < 0) {\n        const tail = (str?.join?.(\"\") ?? \"\");\n        return /<([A-Za-z\\/!?])[\\w\\W]*$/.test(tail) && !/>[\\w\\W]*$/.test(tail);\n    }\n\n    // Scan all static parts up to and including the current part\n    const prefix = contextParts.slice(0, idx + 1).join(\"\");\n    let inTag = false, inSingle = false, inDouble = false;\n\n    for (let i = 0; i < prefix.length; i++) {\n        const ch = prefix[i];\n        const next = prefix[i + 1] ?? '';\n\n        if (!inTag) {\n            if (ch === '<') {\n                // Treat as a tag only if followed by a likely opener: letter, '/', '!', or '?'\n                if (/[A-Za-z\\/!?]/.test(next)) {\n                    inTag = true; inSingle = false; inDouble = false;\n                }\n            }\n            continue;\n        }\n\n        if (!inSingle && !inDouble) {\n            if (ch === '\"') { inDouble = true; continue; }\n            if (ch === \"'\") { inSingle = true; continue; }\n            if (ch === '>') { inTag = false; continue; }\n        } else if (inDouble) {\n            if (ch === '\"') { inDouble = false; continue; }\n        } else if (inSingle) {\n            if (ch === \"'\") { inSingle = false; continue; }\n        }\n    }\n\n    return inTag;\n}\n","import { bindEvent, hasValue, isPrimitive } from \"fest/core\";\nimport { getNode } from \"../context/Utils\";\nimport { E } from \"./Bindings\";\nimport { M } from \"./Mapped\";\nimport { isElement } from \"fest/dom\";\nimport { checkInsideTagBlock, cleanupInterTagWhitespaceAndIndent } from \"./Normalizer\";\n\n//\nconst EMap = new WeakMap(), parseTag = (str) => { const match = str.match(/^([a-zA-Z0-9\\-]+)?(?:#([a-zA-Z0-9\\-_]+))?((?:\\.[a-zA-Z0-9\\-_]+)*)$/); if (!match) return { tag: str, id: null, className: null }; const [, tag = 'div', id, classStr] = match; const className = classStr ? classStr.replace(/\\./g, ' ').trim() : null; return { tag, id, className }; }\nconst preserveWhitespaceTags = new Set([\"PRE\", \"TEXTAREA\", \"SCRIPT\", \"STYLE\"]);\n\n//\nconst parseIndex = (value: string | any | null): number => {\n    if (typeof value != \"string\" || !value?.trim?.()) return -1;\n    const match = value.match(/^#{(\\d+)}$/);\n    return match ? parseInt(match?.[1] ?? \"-1\") : -1;\n}\n\n//\nconst connectElement = (el: HTMLElement | null, atb: any[], psh: any[], mapped: WeakMap<HTMLElement, any>) => {\n    if (!el) return el;\n    if (el != null) {\n        const entriesIdc: [string, number][] = [];\n        const addEntryIfExists = (name: string): [string, any] => {\n            const attr = Array.from(el?.attributes || []).find((attr) => (attr.name == name && attr.value?.includes?.(\"#{\")));\n            if (attr) {\n                const pair: [string, any] = [name, parseIndex(attr?.value) ?? -1];\n                entriesIdc.push(pair); return pair;\n            }\n            return [name, -1];\n        }\n\n        //\n        const specialEntryNames = [\"dataset\", \"style\", \"classList\", \"visible\", \"aria\", \"value\", \"ref\"];\n        specialEntryNames.forEach((name) => addEntryIfExists(name));\n\n        //\n        const makeEntries = (startsWith: string[] | string, except: string[] | string): [string, any][] => {\n            const entries: [string, any][] = [];\n            for (const attr of Array.from(el?.attributes || [])) {\n                // needs review startsWith with \"\" i.e. attributes itself, just #{}\n                const allowedNoPrefix: boolean = (Array.isArray(startsWith) ? startsWith?.some?.((str: string)=>str==\"\") : (startsWith == \"\"));\n                const prefix: string = (Array.isArray(startsWith) ? startsWith.find((start) => attr.name?.startsWith?.(start)) : (startsWith = attr.name?.startsWith?.(startsWith) ? startsWith : \"\") as string) ?? \"\";\n                const trueAttributeName = attr.name.trim()?.replace?.(prefix, \"\");\n                const isPlaceholder = attr.value?.includes?.(\"#{\") && attr.value?.includes?.(\"}\");\n                const atbIndex = parseIndex(attr?.value);\n                const excepted: boolean = (Array.isArray(except) ? except?.some?.((str: string)=>trueAttributeName?.startsWith?.(str)) : (except == trueAttributeName));\n\n                if (isPlaceholder && ((prefix == \"\" && allowedNoPrefix) || prefix != \"\") && atbIndex >= 0 && !excepted) {\n                    entries.push([trueAttributeName, atbIndex]);\n                }\n            }\n            return entries;\n        }\n\n        //\n        const makeCumulativeEntries = (startsWith: string[] | string, except: string[] | string, specific: string[] | string = \"\") => {\n            const entriesMap = new Map<string, any[]>();\n            for (const attr of Array.from(el?.attributes || [])) {\n                const allowedNoPrefix: boolean = (Array.isArray(startsWith) ? startsWith?.some?.((str: string)=>str==\"\") : (startsWith == \"\"));\n                const prefix: string = (Array.isArray(startsWith) ? startsWith.find((start) => attr.name?.startsWith?.(start)) : (startsWith = attr.name?.startsWith?.(startsWith) ? startsWith : \"\") as string) ?? \"\";\n                const trueAttributeName = attr.name.trim()?.replace?.(prefix, \"\");\n                const isPlaceholder = attr.value?.includes?.(\"#{\") && attr.value?.includes?.(\"}\");\n                const atbIndex = parseIndex(attr?.value) ?? -1;\n\n                const excepted: boolean = (Array.isArray(except) ? except?.some?.((str: string)=>trueAttributeName?.startsWith?.(str)) : (except == trueAttributeName));\n                const isSpecific: boolean = (Array.isArray(specific) ? specific?.some?.((str: string)=>attr.name === str) : (attr.name === specific)) && specific !== \"\";\n\n                if (isPlaceholder && (((prefix == \"\" && allowedNoPrefix) || prefix != \"\") || isSpecific) && atbIndex >= 0 && !excepted) {\n                    const key = isSpecific ? attr.name : trueAttributeName;\n                    if (!entriesMap.has(key)) {\n                        entriesMap.set(key, []);\n                    }\n                    entriesMap.get(key)?.push(atbIndex);\n                }\n            }\n            return Array.from(entriesMap.entries());\n        }\n\n        //\n        let attributesEntries: [string, any][] = makeEntries([\"attr:\", \"\"], [\"ref\"]);\n        let propertiesEntries: [string, any][] = makeEntries([\"prop:\"], []);\n        let onEntries: [string, any[]][] = makeCumulativeEntries([\"on:\", \"@\"], [], \"\");\n        let refEntries: [string, any[]][] = makeCumulativeEntries([\"ref:\"], [], [\"ref\"]);\n\n        // remove entries that are already in properties or on\n        //attributesEntries = attributesEntries?.filter?.((pair) => !(propertiesEntries?.some?.((p) => p[0] == pair[0]) || onEntries?.some?.((p) => p[0] == pair[0]) || refEntries?.some?.((p) => p[0] == pair[0]))) ?? [];\n\n        //\n        const bindings: any = Object.fromEntries(entriesIdc?.filter?.((pair) => pair[1] >= 0)?.map?.((pair) => [pair[0], atb?.[pair[1]] ?? null]) ?? []);\n        bindings.attributes = Object.fromEntries(attributesEntries?.filter?.((pair) => pair[1] >= 0)?.map?.((pair) => [pair[0], atb?.[pair[1]] ?? null]) ?? []);\n        bindings.properties = Object.fromEntries(propertiesEntries?.filter?.((pair) => pair[1] >= 0)?.map?.((pair) => [pair[0], atb?.[pair[1]] ?? null]) ?? []);\n        bindings.on = Object.fromEntries(onEntries?.filter?.((pair) => pair[1]?.some?.((idx: number) => idx >= 0))?.map?.((pair) => [pair[0], pair[1]?.map?.((idx: number) => atb?.[idx]).filter((v: any) => v != null)]) ?? []);\n\n        //\n        const refIndex = entriesIdc?.find?.((pair) => (pair[0] == \"ref\" && pair[1] >= 0))?.[1];\n        if (refIndex != null && refIndex >= 0) {\n            const ref = atb?.[refIndex];\n            if (typeof ref == \"function\") { ref?.(el); } else if (ref != null && typeof ref == \"object\") { ref.value = el; }\n        }\n\n        //\n        refEntries?.forEach?.((pair: [string, number[]]) => {\n            const handlers: any[] = pair?.[1]\n                ?.filter?.((idx: number) => idx != null && idx >= 0)\n                ?.map?.((idx: number) => atb?.[idx])\n                ?.filter?.((v: any) => v != null);\n\n            //\n            handlers?.forEach?.((ref: any) => {\n                if (typeof ref == \"function\") { ref?.(el); } else if (ref != null && typeof ref == \"object\") { ref.value = el; }\n            });\n        });\n\n        //\n        const clearPlaceholdersFromAttributesOfElement = (el: HTMLElement | null)=>{\n            if (el == null) return;\n\n            //\n            const attributeIsInRegistry = (name: string) => {\n                return attributesEntries?.some?.((pair) => pair[0] == name) || name?.startsWith?.(\"ref:\") || name == \"ref\";\n            }\n\n            // needs by splice or remove, DOM element.attributes is a live collection\n            for (const attr of Array.from(el?.attributes || [])) {\n                if ( // relaxed syntax for placeholder, if in registry\n                    (attr.value?.includes?.(\"#{\") && attr.value?.includes?.(\"}\") && attributeIsInRegistry(attr.name as string)) ||\n\n                    // stricter check of placeholder, if none in registry\n                    attr.value?.startsWith?.(\"#{\") && attr.value?.endsWith?.(\"}\") ||\n\n                    // if attribute name contains colon, it is a property\n                    attr.name?.includes?.(\":\") || attr.name?.includes?.(\"ref:\") || attr.name == \"ref\"\n                ) { el?.removeAttribute?.(attr.name as string); }\n            };\n        }\n\n        //\n        clearPlaceholdersFromAttributesOfElement(el);\n        if (!EMap?.has?.(el)) { EMap?.set?.(el, E(el, bindings)); };\n    };\n    return EMap?.get?.(el) ?? el;\n}\n\n//\nconst linearBuilder = (strings, ...values) => {\n    const nodes: any[] = [];\n    for (let i = 0; i < strings?.length; i++) {\n        const str = strings?.[i];\n        const val = values?.[i];\n        nodes.push(H(str));\n        nodes.push(val);\n    }\n    if (nodes?.length <= 1) return getNode(nodes?.[0], null, 0);\n\n    // TODO! fix parent node bound support\n    const fragment = document.createDocumentFragment();\n    fragment.append(...nodes?.filter?.((nd) => (nd != null))?.map?.((en, i: number) => getNode(en, null, i))?.filter?.((nd) => (nd != null)));\n    return fragment;\n}\n\n//\nexport function html(strings, ...values) {\n    if (strings?.at?.(0)?.trim?.()?.startsWith?.(\"<\") && strings?.at?.(-1)?.trim?.()?.endsWith?.(\">\")) {\n        return htmlBuilder({ createElement: null })(strings, ...values);\n    }\n    return linearBuilder(strings, ...values);\n};\n\n//\nconst isValidParent = (parent: Node) => {\n    return (parent != null && parent instanceof HTMLElement && !(parent instanceof DocumentFragment || (parent instanceof HTMLBodyElement && parent != document.body)));\n}\n\n//\nconst replaceNode = (parent: Node, node: Node, el: any) => {\n    if (el != null) { el.boundParent = parent; }\n\n    //\n    let newNode = getNode(el, null, -1, parent);\n    if (isElement(newNode)) {\n        if (newNode?.parentNode != parent && !newNode?.contains?.(parent) && newNode != null) {\n            (node as any)?.replaceWith?.((hasValue(newNode) && (typeof newNode?.value == \"object\" || typeof newNode?.value == \"function\") && isElement(newNode?.value)) ? newNode?.value : newNode);\n        }\n    } else\n    { (node as any)?.remove?.(); }\n}\n\n//\nexport function htmlBuilder({ createElement = null } = {}) {\n    return function (strings, ...values) {\n        let parts: string[] = [];\n        const psh: any[] = [], atb: any[] = [];\n        for (let i = 0; i < strings.length; i++) {\n            parts.push(strings?.[i] || \"\");\n            if (i < values.length) {\n                if (strings[i]?.trim()?.endsWith?.(\"<\")) {\n                    const dat = parseTag(values?.[i]);\n                    parts.push((dat.tag || \"div\"));\n                    if (dat.id) parts.push(` id=\"${dat.id}\"`);\n                    if (dat.className) parts.push(` class=\"${dat.className}\"`);\n                } else {\n                    // sequences such as inside of `<...>`\n                    const $inTagOpen = checkInsideTagBlock(strings, strings?.[i] || \"\", strings?.[i + 1] || \"\");\n                    const $afterEquals = /[\\w:\\-\\.\\]]\\s*=\\s*$/.test(strings[i]?.trim?.() ?? \"\") || strings[i]?.trim?.()?.endsWith?.(\"=\");\n\n                    //\n                    const $isQuoteBegin = strings[i]?.trim?.()?.match?.(/['\"]$/);\n                    const $isQuoteEnd = strings[i + 1]?.trim?.()?.match?.(/^['\"]/) ?? $isQuoteBegin;\n\n                    //\n                    const $betweenQuotes = ($isQuoteBegin && $isQuoteEnd);\n                    const $attributePattern = $afterEquals;\n\n                    //\n                    const isAttr = ($attributePattern || $betweenQuotes) && $inTagOpen;\n                    if (isAttr) {\n                        const $needsToQuoteWrap = ($attributePattern && !($betweenQuotes));\n                        const ati = atb.length;\n                        parts.push((typeof values?.[i] == \"string\" ? values?.[i]?.trim?.() != \"\" : values?.[i] != null) ? (($needsToQuoteWrap ? `\"#{${ati}}\"` : `#{${ati}}`)) : \"\");\n                        atb.push(values?.[i]);\n                    } else\n                    if (!$inTagOpen) {\n                        const psi = psh.length;\n                        parts.push((typeof values?.[i] == \"string\" ? values?.[i]?.trim?.() != \"\" : values?.[i] != null) ? (isPrimitive(values?.[i]) ? String(values?.[i])?.trim?.() : `<!--o:${psi}-->`) : \"\");\n                        psh.push(values?.[i]);\n                    }\n                }\n            }\n        }\n\n        //\n        const sourceCode = cleanupInterTagWhitespaceAndIndent(parts.join(\"\").trim());\n        const mapped = new WeakMap(), parser = new DOMParser(), doc: any = parser.parseFromString(sourceCode, \"text/html\");\n\n        //\n        const isTemplate = doc instanceof HTMLTemplateElement || doc?.matches?.(\"template\");\n        const sources: any = (isTemplate ? doc : doc.querySelector(\"template\"))?.content ?? (doc.body ?? doc);\n\n        //\n        const frag = document.createDocumentFragment();\n        const bucket = Array.from(sources.childNodes)?.filter((e: any) => { return e instanceof Node; }).map((node: any) => {\n            if (!isValidParent(node?.parentNode) && node?.parentNode != frag) {\n                node?.remove?.();\n                if (node != null) { frag?.append?.(node); };\n            }\n            return node;\n        });\n\n        //\n        let walkedNodes: any[] = [];\n\n        //\n        bucket.forEach((nodeSet: any) => {\n            const walker: any = nodeSet ? document.createTreeWalker(nodeSet, NodeFilter.SHOW_ALL, null) : null;\n            do {\n                const node: any = walker?.currentNode;\n                walkedNodes.push(node);\n            } while (walker?.nextNode?.());\n        });\n\n        //\n        walkedNodes?.filter?.((node: any) => node?.nodeType == Node.COMMENT_NODE)?.forEach?.((node: any) => {\n            if (node?.nodeValue?.trim?.()?.includes?.(\"o:\") && Number.isInteger(parseInt(node?.nodeValue?.trim?.()?.slice?.(2) ?? \"-1\"))) {\n                let el: any = psh?.[parseInt(node?.nodeValue?.trim?.()?.slice?.(2) ?? \"-1\") ?? -1];\n\n                // make iteratable array and set\n                if (el == null || el === undefined || (typeof el == \"string\" ? el : null)?.trim?.() == \"\") {\n                    node?.remove?.();\n                } else {\n                    const $parent = node?.parentNode;\n                    if (Array.isArray(el) || el instanceof Map || el instanceof Set) {\n                        replaceNode?.($parent, node, el = M(el, null, $parent));\n                    } else\n                    if (el != null) {\n                        replaceNode?.($parent, node, el);\n                    }\n                }\n            }\n\n            // remove comment node if it is connected\n            if (node?.isConnected) {\n                node?.remove?.();\n            }\n        });\n\n        //\n        walkedNodes?.filter((node: any) => node.nodeType == Node.ELEMENT_NODE)?.map?.((node) => {\n            connectElement(node as HTMLElement, atb, psh, mapped);\n        });\n\n        // Final whitespace cleanup to ensure :empty works even after dynamic insertions\n        return Array.from(frag?.childNodes)?.length > 1 ? frag : frag?.childNodes?.[0];\n    };\n}\n\n//\nexport const H = (str: any, ...values: any[]) => {\n    //if (typeof str == \"object\" && hasValue(str)) return C(str);\n    if (typeof str == \"string\") {\n        if (str?.trim?.()?.startsWith?.(\"<\") && str?.trim?.()?.endsWith?.(\">\")) {\n            const parser = new DOMParser(), doc = parser.parseFromString(cleanupInterTagWhitespaceAndIndent(str?.trim?.()), \"text/html\");\n            const basis = doc.querySelector(\"template\")?.content ?? doc.body;\n            // Normalize and clean whitespace-only text nodes between tags\n            if (basis instanceof HTMLBodyElement) {\n                const frag = document.createDocumentFragment();\n                frag.append(...Array.from(basis.childNodes ?? []));\n                return (Array.from(frag.childNodes)?.length > 1 ? frag : frag?.childNodes?.[0]);\n            }\n            if (basis instanceof DocumentFragment) { return basis; }\n            if (basis?.childNodes?.length > 1) { const frag = document.createDocumentFragment(); frag.append(...Array.from(basis?.childNodes ?? [])); return frag; }\n            return basis?.childNodes?.[0] ?? (new Text(str));\n        }\n        return new Text(str);\n    } else\n    if (typeof str == \"function\") { return H(str?.()); } else\n    if (Array.isArray(str) && values) { return html(str, ...values); } else\n    if (str instanceof Node) { return str; };\n    return getNode(str);\n}\n\n//\nexport default H;\n","import { addToCallChain, affected, $trigger } from \"fest/object\";\nimport { appendFix, getNode, removeChild, replaceOrSwap } from \"../context/Utils\";\nimport { contextify, isNotEqual, inProxy } from \"fest/core\";\nimport { isElement, isValidParent } from \"fest/dom\";\n\n//\nexport interface SwitchedParams {\n    current?: { value: string | number; }|null; // candidates\n    mapped?: any[]|any|Map<any, any>|Set<any>|null;\n}\n\n//\nconst $getFromMapped = (mapped: any, value: number|string|null|undefined) => {\n    if ((typeof value == \"number\" && value < 0) || (typeof value == \"string\" && !value) || value == null) return { element: \"\" };\n    if (mapped instanceof Map || typeof mapped?.get == \"function\") { return mapped.get(value); }\n    if (mapped instanceof Set || typeof mapped?.has == \"function\") { return mapped.has(value) ? value : null; }\n    return mapped?.[value] ?? { element: \"\" };\n}\n\n//\nconst getFromMapped = (mapped: any, value: number|string|null|undefined, requestor: any | null = null) => {\n    return getNode($getFromMapped(mapped, value), null, -1, requestor);\n}\n\n//\nexport class SwM implements SwitchedParams {\n    #stub = document.createComment(\"\");\n    current?: { value: string | number; }|null;\n    mapped?: any[]|any|Map<any, any>|Set<any>|null;\n    boundParent: Node | null = null;\n\n    //\n    constructor(params?: SwitchedParams|null, mapped?: any[]|any|Map<any, any>|Set<any>|null) {\n        this.#stub = document.createComment(\"\");\n        this.current = params?.current ?? { value: -1 };\n        this.mapped = params?.mapped ?? mapped ?? [];\n\n        //\n        const us = affected([params?.current, \"value\"], (newVal, prop, oldVal) => (this as any)._onUpdate(newVal, prop, oldVal));\n        if (us) addToCallChain(this, Symbol.dispose, us);\n    }\n\n    //\n    get element(): Node {\n        const element = getFromMapped(this.mapped, this.current?.value ?? -1, this.boundParent) ?? this.#stub;\n        const theirParent = isValidParent(element?.parentElement) ? element?.parentElement : this.boundParent;\n        this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n\n        //\n        if (element != null && (element?.parentNode != this.boundParent || !element?.parentNode)) {\n            if (this.boundParent) { appendFix(this.boundParent, element); };\n        }\n\n        //\n        queueMicrotask(() => {\n            const theirParent = isValidParent(element?.parentElement) ? element?.parentElement : this.boundParent;\n            this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n        });\n\n        //\n        return element;\n    }\n\n    //\n    elementForPotentialParent(requestor: any) {\n        if (isValidParent(requestor)) {\n            this.boundParent = requestor;\n        }\n\n        //\n        this.current?.[$trigger]?.();\n        return this.element;\n    }\n\n    //\n    _onUpdate(newVal, prop, oldVal): void {\n        const idx = newVal ?? this.current?.value;\n        if (oldVal ? isNotEqual(idx, oldVal/*this.current?.value*/) : true) {\n            const old = oldVal ?? this.current?.value;\n            if (this.current) this.current.value = idx ?? -1;\n\n            // Find parent and new/old nodes\n            const parent  = getFromMapped(this.mapped, old ?? idx ?? -1)?.parentNode ?? this.boundParent; this.boundParent = parent ?? this.boundParent;\n            const newNode = getFromMapped(this.mapped, idx ?? -1, parent) ?? this.#stub;\n            const oldNode = getFromMapped(this.mapped, old ?? -1, parent);\n\n            // Update DOM nodes accordingly\n            if (isElement(parent)) {\n                if (isElement(newNode)) {\n                    if (isElement(oldNode))\n                        { try { replaceOrSwap(parent, oldNode, newNode); } catch (e) { console.warn(e); } } else\n                        { appendFix(parent, newNode); }\n                } else\n                if (oldNode && !newNode)\n                    { removeChild(parent, oldNode); }\n            }\n        }\n    }\n}\n\n//\nclass SwHandler implements ProxyHandler<SwitchedParams> {\n    constructor() {}\n\n    //\n    set(params: SwitchedParams, name, val) { return Reflect.set(getFromMapped(params?.mapped, params?.current?.value ?? -1) ?? params, name, val); }\n    has(params: SwitchedParams, name) { return Reflect.has(getFromMapped(params?.mapped, params?.current?.value ?? -1) ?? params, name); }\n    get(params: SwitchedParams, name, ctx) {\n        if (name == \"elementForPotentialParent\" && (name in params || params?.[name] != null)) { return (params as SwM)?.elementForPotentialParent?.bind(params); };\n        if (name == \"element\" && (name in params || params?.[name] != null)) { return (params as SwM)?.element; };\n        if (name == \"_onUpdate\" && (name in params || params?.[name] != null)) { return (params as SwM)?._onUpdate?.bind(params); };\n        return contextify(getFromMapped(params?.mapped, params?.current?.value ?? -1) ?? params, name);\n    }\n\n    //\n    ownKeys(params: SwitchedParams) { return Reflect.ownKeys(getFromMapped(params?.mapped, params?.current?.value ?? -1) ?? params); }\n    apply(params: SwitchedParams, thisArg, args) { return Reflect.apply(getFromMapped(params?.mapped, params?.current?.value ?? -1) ?? params, thisArg, args); }\n    deleteProperty(params: SwitchedParams, name) { return Reflect.deleteProperty(getFromMapped(params?.mapped, params?.current?.value ?? -1) ?? params, name); }\n    setPrototypeOf(params: SwitchedParams, proto) { return Reflect.setPrototypeOf(getFromMapped(params?.mapped, params?.current?.value ?? -1) ?? params, proto); }\n    getPrototypeOf(params: SwitchedParams) { return Reflect.getPrototypeOf(getFromMapped(params?.mapped, params?.current?.value ?? -1) ?? params); }\n    defineProperty(params: SwitchedParams, name, desc) { return Reflect.defineProperty(getFromMapped(params?.mapped, params?.current?.value ?? -1) ?? params, name, desc); }\n    getOwnPropertyDescriptor(params: SwitchedParams, name) { return Reflect.getOwnPropertyDescriptor(getFromMapped(params?.mapped, params?.current?.value ?? -1) ?? params, name); }\n    preventExtensions(params: SwitchedParams) { return Reflect.preventExtensions(getFromMapped(params?.mapped, params?.current?.value ?? -1) ?? params); }\n    isExtensible(params: SwitchedParams) { return Reflect.isExtensible(getFromMapped(params?.mapped, params?.current?.value ?? -1) ?? params); }\n}\n\n//\nexport const I = (params: SwitchedParams, mapped?: any[]|any|Map<any, any>|Set<any>|null) => { // @ts-ignore\n    return inProxy?.getOrInsertComputed?.(params, ()=>{\n        const px = new Proxy(params instanceof SwM ? params : new SwM(params, mapped), new SwHandler());\n        return px;\n    });\n}\n\n//\nexport default I;\n","import { E } from \"./Bindings\";\nimport { M } from \"./Mapped\";\nimport { I } from \"./Switched\";\nimport { Q } from \"./Queried\";\nimport { bindEvent } from \"fest/core\";\n\n//\nexport const createElement = (type: string | HTMLElement | Node | DocumentFragment | Document | Element | Function, props: any = {}, children?: any[]|any|null, ...others: any[]|any|null)=>{\n    let normalized: any = {}, ref;\n    let attributes: any = {}, properties: any = {}, classList: any = {}, style: any = {}, ctrls: any = {}, on: any = {};\n\n    //\n    for (const i in props) {\n        if (i == 'ref') {\n            if (typeof type != 'function') {\n                ref = typeof props[i] != 'function' ? props[i] : Q(props[i]);\n            }\n        } else\n        if (i == 'classList') { classList = props[i]; } else\n        if (i == 'style') { style = props[i]; } else\n\n        //\n        if (i?.startsWith?.(\"@\"))     { const name = i.replace(\"@\", \"\").trim();   if (name) { bindEvent(on, name, props[i]); } else { on = props[i]; } } else\n        if (i?.startsWith?.(\"on:\"))   { const name = i.replace(\"on:\", \"\").trim(); if (name) { bindEvent(on, name, props[i]); } else { on = props[i]; } } else\n        if (i?.startsWith?.(\"prop:\")) { const name = i.replace(\"prop:\", \"\").trim(); if (name) { properties[name] = props[i]; } else { properties = props[i]; } } else\n        if (i?.startsWith?.(\"attr:\")) { const name = i.replace(\"attr:\", \"\").trim(); if (name) { attributes[name] = props[i]; } else { attributes = props[i]; } } else\n        if (i?.startsWith?.(\"ctrl:\")) { const name = i.replace(\"ctrl:\", \"\").trim(); if (name) { ctrls.set(name, props[i]); } else { ctrls = props[i]; } } else\n            { attributes[i.trim()] = props[i]; }\n    };\n\n    //\n    Object.assign(normalized, {\n        attributes,\n        properties,\n        classList,\n        style,\n        on,\n    });\n\n    //\n    const $children = Array.isArray(children) ? children :\n        (others?.length > 0 ? [children, ...others] :\n            (((typeof children == \"object\" || typeof children == \"function\") && !(children instanceof Node) || children instanceof DocumentFragment) ? children : [children]));\n\n    //\n    if (typeof type == \"function\") { return type(props, $children); }\n    if (type == \"For\") { return M(props, $children); }\n    if (type == \"Switch\") { return I(props, $children); }\n\n    //\n    const element = E(type, normalized, $children); if (!element) return element;\n    Promise.try(()=>{ if (ref) { if (typeof ref == \"function\") { ref?.(element); } else { ref.value = element; } } })?.catch?.(console.warn.bind(console));\n    return element;\n}\n","import { deref, isNotEqual, toRef, unref } from \"fest/core\";\nimport { Q } from \"../node/Queried\";\nimport { makeRAFCycle, setProperty } from \"fest/dom\";\nimport { affected } from \"fest/object\";\n\n//\nexport const checkboxCtrl = (ref) => { ref = toRef(ref); return (ev) => { const $ref = unref(ref); if ($ref != null) { $ref.value = Q(`input[type=\"radio\"], input[type=\"checkbox\"], input:checked`, ev?.target)?.checked ?? $ref?.value; } } }\nexport const numberCtrl = (ref) => { ref = toRef(ref); return (ev) => { const $ref = unref(ref); if ($ref != null && isNotEqual($ref?.value, ev?.target?.valueAsNumber)) { $ref.value = Number(Q(\"input\", ev?.target)?.valueAsNumber || 0) ?? 0; } } }\nexport const valueCtrl = (ref) => { ref = toRef(ref); return (ev) => { const $ref = unref(ref); if ($ref != null && isNotEqual(ev?.target?.value, $ref?.value)) { $ref.value = (Q(\"input\", ev?.target)?.value ?? $ref?.value) || \"\"; } } }\n\n//\nexport const radioCtrl = (ref, name) => {\n    ref = toRef(ref);\n    return (ev) => {\n        let $ref = unref(ref);\n        const selector = `input[name=\"${name}\"]:checked`;\n        if ($ref) { $ref.value = (ev?.target?.matches?.(selector) ? ev?.target : ev?.target?.querySelector?.(selector))?.value ?? $ref.value; }\n    }\n}\n\n//\nexport const controlVisible = (source: HTMLElement, coef: any = null)=>{\n    if (!source) return; const target = toRef(source), wk = toRef(coef);\n    const renderCb = ()=>{\n        const tg = deref(target); if (tg) {\n            const val = deref(wk)?.value || 0, hidden = val < 0.001 || val > 0.999;\n            setProperty(tg, \"visibility\", hidden ? \"collapse\" : \"visible\");\n            setProperty(tg?.querySelector?.(\"*\"), \"pointer-events\", hidden ? \"none\" : \"auto\");\n        }\n    };\n    return affected(coef, (val: any)=>makeRAFCycle()?.schedule(renderCb))\n}\n","import { observe, propRef, affected } from \"fest/object\";\nimport { addEvent, hash } from \"fest/dom\";\nimport { isPrimitive } from \"fest/core\";\nimport { getIgnoreNextPopState, setIgnoreNextPopState } from \"./BackNavigation\";\n\n//\nexport type NavigationAction = \"PUSH\" | \"REPLACE\" | \"POP\" | \"BACK\" | \"FORWARD\" | \"MANUAL\";\n\n//\nexport interface IHistoryState {\n    index: number;\n    depth: number;\n    action: NavigationAction;\n    view: string;\n    timestamp: number;\n    [key: string]: any;\n}\n\n//\nconst STATE_KEY = \"rs-nav-ctx\";\nconst STACK_KEY = \"rs-nav-stack\";\n\n//\nexport interface IHistoryManager {\n    index: number;\n    length: number;\n    action: NavigationAction;\n    view: string;\n    canBack: boolean;\n    canForward: boolean;\n    entries: IHistoryState[];\n}\n\n// Global reactive state for history\nexport const historyState = observe({\n    index: 0,\n    length: 0,\n    action: \"MANUAL\" as NavigationAction,\n    view: \"\",\n    canBack: false,\n    canForward: false,\n    entries: [] as IHistoryState[]\n}) as unknown as IHistoryManager;\n\n// Helper to get current state safely\nconst getCurrentState = (): Partial<IHistoryState> => {\n    try {\n        return history.state?.[STATE_KEY] || historyState?.entries?.[historyState?.index] || {};\n    } catch (e) {\n        return {};\n    }\n};\n\n// Helper to save/load stack\nconst saveStack = () => {\n    try {\n        sessionStorage.setItem(STACK_KEY, JSON.stringify(historyState?.entries));\n    } catch (e) { }\n};\n\nconst loadStack = (): IHistoryState[] => {\n    try {\n        const stored = sessionStorage.getItem(STACK_KEY);\n        return stored ? JSON.parse(stored) : [];\n    } catch (e) {\n        return [];\n    }\n};\n\n// Helper to merge state\nconst mergeState = (newState: any, existingData?: any) => {\n    try {\n        const current = existingData !== undefined ? existingData : (history?.state || {});\n        if (isPrimitive(current) && current !== null) return { value: current, [STATE_KEY]: newState };\n        if (current === null) return { [STATE_KEY]: newState };\n        return { ...current, [STATE_KEY]: newState };\n    } catch (e) {\n        return { [STATE_KEY]: newState };\n    }\n};\n\n//\nlet initialized = false;\n\n// Patch pushState and replaceState\nexport const originalPush = typeof history != \"undefined\" ? history.pushState.bind(history) : undefined;\nexport const originalReplace = typeof history != \"undefined\" ? history.replaceState.bind(history) : undefined;\nexport const originalGo = typeof history != \"undefined\" ? history.go.bind(history) : undefined;\nexport const originalForward = typeof history != \"undefined\" ? history.forward.bind(history) : undefined;\nexport const originalBack = typeof history != \"undefined\" ? history.back.bind(history) : undefined;\n\n// Initialize history tracking\nexport const initHistory = (initialView: string = \"\") => {\n    if (initialized) return;\n    initialized = true;\n\n    //\n    const current = getCurrentState();\n    const view = initialView || location.hash || \"#\";\n\n    // Load or init stack\n    let stack = loadStack();\n    const idx = current.index || 0;\n\n    // Validate stack against current state\n    if (stack && (stack?.length === 0 || idx >= stack?.length) /* || stack[idx]?.view !== (current.view || view) */) {\n        // If stack is invalid or empty, we try to reconstruct or reset\n        // For a new session, we might want to start fresh or trust the stack if it seems plausible\n        // But if history.state has an index that doesn't match stack, trust history.state (browser truth)\n        if (stack.length <= idx) {\n            // Stack missing or too short. Reset/Expand\n            stack[idx] = {\n                index: idx,\n                depth: history.length,\n                action: current?.action || \"REPLACE\",\n                view: view,\n                timestamp: Date.now()\n            };\n        }\n    }\n    historyState.entries = stack;\n\n    // Set initial state if needed\n    if (!current.timestamp) {\n        const state: IHistoryState = {\n            index: idx,\n            depth: history.length,\n            action: \"REPLACE\",\n            view: view,\n            timestamp: Date.now()\n        };\n        history?.replaceState?.(mergeState(state), \"\", location.hash);\n\n        // Update stack\n        if (historyState?.entries) {\n            historyState.entries[idx] = state;\n        }\n        saveStack();\n    } else {\n        // Sync reactive state with existing history state\n        historyState.index = current.index || 0;\n        historyState.view = current.view || view;\n\n        // Ensure stack matches current\n        if (!historyState?.entries?.[historyState?.index]) {\n             historyState.entries[historyState.index] = current as IHistoryState;\n             saveStack();\n        }\n    }\n\n    updateReactiveState(getCurrentState()?.action || \"REPLACE\", view);\n\n    //\n    history.go = (delta = 0) => {\n        const currentState = getCurrentState();\n        currentState.index = Math.max(0, Math.min(historyState.length, (currentState.index || 0) + delta));\n        const existsState = historyState.entries[currentState.index];\n        Object.assign(currentState, existsState || {});\n\n        //\n        setIgnoreNextPopState(true);\n        const result = originalGo?.(delta);\n        setTimeout(() => { setIgnoreNextPopState(false); }, 0);\n\n        //\n        updateReactiveState((currentState?.action || \"POP\") || (delta > 0 ? \"FORWARD\" : \"BACK\") as any, currentState?.view);\n        return result;\n    };\n\n    history.back = () => { return history.go(-1); };\n    history.forward = () => { return history.go(1); };\n    history.pushState = (data: any, unused: string, url?: string | URL | null) => {\n        const currentState = getCurrentState();\n        const nextIndex = (currentState.index || 0) + 1;\n\n        const newState: IHistoryState = {\n            index: nextIndex,\n            depth: history.length + 1,\n            action: \"PUSH\",\n            view: url ? String(url) : (currentState.view || \"\"),\n            timestamp: Date.now()\n        };\n\n        const result = originalPush?.(mergeState(newState, data), unused, url);\n\n        // Update stack: wipe forward history\n        historyState.entries = historyState?.entries?.slice?.(0, nextIndex);\n        historyState.entries?.push?.(newState);\n        saveStack();\n\n        updateReactiveState(\"PUSH\", newState.view);\n        return result;\n    };\n\n    //\n    history.replaceState = (data: any, unused: string, url?: string | URL | null) => {\n        const currentState = getCurrentState();\n        const index = currentState?.index || 0;\n\n        //\n        const newState: IHistoryState = {\n            ...currentState,\n            index: index,\n            depth: history.length,\n            action: \"REPLACE\",\n            view: url ? String(url) : (currentState?.view || \"\"),\n            timestamp: Date.now()\n        };\n\n        //\n        const result = originalReplace?.(mergeState(newState, data), unused, url);\n\n        // Update stack: replace current\n        if (historyState?.entries) {\n            historyState.entries[index] = newState;\n            historyState.entries[historyState.index].view = url ? String(url) : (currentState?.view || \"\");\n        }\n\n        //\n        saveStack();\n        updateReactiveState(\"REPLACE\", newState.view);\n        return result;\n    };\n\n    // Listen for popstate\n    addEvent(window, \"popstate\", (ev) => {\n        const state = ev.state?.[STATE_KEY] as IHistoryState;\n        const currentIndex = historyState.index ?? 0;\n\n        if (!state) {\n            // Likely a hash change or external navigation\n            // We treat it as a PUSH for now if we can't determine otherwise\n            // But if we have entries, we might check if hash matches?\n            // For now, keep existing logic\n            const newState: IHistoryState = {\n                index: currentIndex + 1,\n                depth: history.length,\n                action: \"PUSH\",\n                view: location.hash || \"#\",\n                timestamp: Date.now()\n            };\n\n            // Inject state but preserve any existing state if present (unlikely if ev.state is null)\n            history.replaceState(mergeState(newState, ev.state), \"\", location.hash);\n\n            // Update stack\n            historyState.entries = historyState?.entries?.slice?.(0, newState.index);\n            historyState?.entries?.push?.(newState);\n            saveStack();\n\n            updateReactiveState(\"PUSH\", newState.view);\n            return;\n        } else {\n            const newIndex = state?.index ?? 0;\n            let action: NavigationAction = \"POP\";\n            if (newIndex < currentIndex) {\n                action = \"BACK\";\n            } else if (newIndex > currentIndex) {\n                action = \"FORWARD\";\n            }\n            updateReactiveState(action, state?.view || location.hash);\n        }\n    });\n\n    // Listen for hashchange as fallback/augment\n    // This ensures we catch changes that might bypass popstate in some scenarios\n    // or when manual location.hash assignment occurs without history API\n    addEvent(window, \"hashchange\", (ev) => {\n        if (getIgnoreNextPopState()) return;\n\n        const currentHash = location.hash || \"#\";\n        // Only update if historyState hasn't caught up yet (deduplication with popstate)\n        if (historyState.view !== currentHash) {\n\n            // prevent hatching popstate event\n            updateReactiveState(\"PUSH\", currentHash);\n        }\n    });\n};\n\n//\nconst updateReactiveState = (action?: NavigationAction, view?: string) => {\n    const current = getCurrentState();\n    historyState.index = current.index || 0;\n    historyState.length = history.length;\n    historyState.action = action || \"POP\";\n    historyState.view = view || current.view || location.hash;\n    historyState.canBack = historyState.index > 0;\n};\n\n// Navigation helpers\nexport const navigate = (view: string, replace: boolean = false) => {\n    const hash = view.startsWith(\"#\") ? view : `#${view}`;\n\n    // Optimization: if replacing, check if we are just going back to previous view\n    if (replace && historyState?.index > 0) {\n        const prev = historyState?.entries?.[historyState?.index - 1];\n        if (prev && prev.view === hash) {\n            // prevent hatching popstate event\n            history.back();\n            return;\n        }\n    }\n\n    // when doing navigation, stop hatching popstate event\n    if (replace) {\n        // don't do anything if the current view is the same as the new view\n        if (historyState?.entries?.[historyState.index]?.view !== hash || historyState?.entries?.[historyState.index]?.view) {\n            history?.replaceState?.(null, \"\", hash);\n        }\n    } else {\n        history?.pushState?.(null, \"\", hash);\n    }\n};\n\n//\nexport const historyViewRef = (initialValue: string = `#${location.hash?.replace?.(/^#/, \"\") || \"home\"}`, options: { ignoreBack?: boolean, withoutHashPrefix?: boolean } = {}) => {\n    const internal = observe({ value: initialValue }) as unknown as { value: string };\n\n    // Prevent circular updates between history and internal value\n    let isUpdatingFromHistory = false;\n    let isUpdatingFromInternal = false;\n\n    // Sync from history to ref\n    // The historyState acts as a bridge:\n    // 1. User Action (Back/Forward) -> Window 'popstate' -> initHistory listener -> historyState -> This Subscription\n    // 2. User Action (Hash Change) -> Window 'hashchange' -> initHistory listener -> historyState -> This Subscription\n    affected([historyState, \"view\"], (view: string) => {\n        if (isUpdatingFromInternal) return; // Prevent circular update\n\n        if (options.ignoreBack && historyState.action === \"BACK\") {\n            return;\n        }\n\n        let nextValue = view;\n        if (options.withoutHashPrefix) {\n            nextValue = view.replace(/^#/, \"\");\n        }\n\n        if (internal.value !== nextValue) {\n            isUpdatingFromHistory = true;\n            internal.value = nextValue;\n            isUpdatingFromHistory = false;\n        }\n    });\n\n    // Sync from ref to history\n    // Application Action (Programmatic) -> ref.value change -> This Subscription -> navigate() -> pushState() -> historyState\n    affected([internal, \"value\"], (val: string) => {\n        if (isUpdatingFromHistory) return; // Prevent circular update\n\n        let viewToNavigate = val;\n        if (options.withoutHashPrefix && !val.startsWith(\"#\")) {\n            viewToNavigate = `#${val}`;\n        }\n\n        if (historyState.view !== viewToNavigate) {\n            isUpdatingFromInternal = true;\n            // This is a programmatic change, so we PUSH\n            navigate(viewToNavigate);\n            isUpdatingFromInternal = false;\n        }\n    });\n\n    // Proxy to return the ref but with special behavior if needed\n    return internal;\n};\n","/**\n * BackNavigation - Priority-based back gesture/button navigation manager\n *\n * Handles mobile/browser back gestures/buttons for closing:\n * - Context menus (highest priority)\n * - Modal dialogs\n * - Sidebars/overlays\n * - Tasks/views (lowest priority)\n *\n * Usage:\n * 1. Register closable elements/callbacks with priority\n * 2. On back navigation, closes the highest priority active element first\n * 3. Supports custom close handlers and visibility checks\n */\n\nimport { addEvent } from \"fest/dom\";\nimport { historyState, initHistory, originalForward } from \"./History\";\n\n//\nexport enum ClosePriority {\n// ... existing ...\n    CONTEXT_MENU = 100,\n    DROPDOWN = 90,\n    MODAL = 80,\n    DIALOG = 70,\n    SIDEBAR = 60,\n    OVERLAY = 50,\n    PANEL = 40,\n    TOAST = 30,\n    TASK = 20,\n    VIEW = 10,\n    DEFAULT = 0\n}\n\n//\nexport interface CloseableEntry {\n    // in general, hashId is getter\n    hashId?: string;\n    id: string;\n    priority: ClosePriority | number;\n    isActive: (view?: string) => boolean;\n    close: (view?: string) => boolean | void;\n    element?: WeakRef<HTMLElement> | null;\n    group?: string;\n}\n\n//\ninterface BackNavigationOptions {\n    preventDefaultNavigation?: boolean;\n    pushInitialState?: boolean;\n    skipPopstateHandler?: boolean; // Skip adding popstate handler (when managed externally)\n    debug?: boolean;\n}\n\n//\nconst registry = new Map<string, CloseableEntry>();\nlet navigationInitialized = false;\nlet processingBack = false;\nlet historyDepth = 0;\nlet options: BackNavigationOptions = {};\n\n// Shared state for coordination between handlers\nexport let ignoreNextPopState = false;\nexport const setIgnoreNextPopState = (value: boolean) => { ignoreNextPopState = value; };\nexport const getIgnoreNextPopState = () => ignoreNextPopState;\n\n//\nconst generateId = () => `closeable-${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\n\n/**\n * Register a closeable element/callback with the back navigation system\n */\nexport const registerCloseable = (\n    entry: Omit<CloseableEntry, \"id\"> & { id?: string }\n): (() => void) => {\n    const id = entry.id || generateId();\n    const fullEntry: CloseableEntry = Object.assign(entry, { id });//{ ...entry, id };\n    if (fullEntry?.hashId == null) {\n        fullEntry.hashId = id;\n    }\n\n    registry.set(id, fullEntry);\n\n    if (options.debug) {\n        console.log(\"[BackNav] Registered:\", id, \"priority:\", entry.priority);\n    }\n\n    return () => unregisterCloseable(id);\n};\n\n/**\n * Unregister a closeable by ID\n */\nexport const unregisterCloseable = (id: string): boolean => {\n    const removed = registry.delete(id);\n    if (options.debug && removed) {\n        console.log(\"[BackNav] Unregistered:\", id);\n    }\n    return removed;\n};\n\n/**\n * Get all active closeables sorted by priority (highest first)\n */\nexport const getActiveCloseables = (view?: string): CloseableEntry[] => {\n    return Array.from(registry.values())\n        .filter((entry) => {\n            // Check if element still exists (if WeakRef is provided)\n            if (entry.element) {\n                const el = entry.element.deref();\n                // If element is gone, remove from registry\n                if (!el) {\n                    registry.delete(entry.id);\n                    return false;\n                }\n            }\n\n            // Check if closeable is active\n            return entry.isActive(view);\n        })\n        .sort((a, b) => (b.priority as number) - (a.priority as number));\n};\n\n/**\n * Get the highest priority active closeable\n */\nexport const getActiveCloseable = (view?: string): CloseableEntry | null => {\n    const active = getActiveCloseables(view);\n    return active[0] || null;\n};\n\n/**\n * Attempt to close the highest priority active closeable\n * @returns true if something was closed, false otherwise\n */\nexport const closeHighestPriority = (view?: string): CloseableEntry | null => {\n    const entry = getActiveCloseable(view);\n    if (!entry) return null;\n\n    if (options.debug) {\n        console.log(\"[BackNav] Closing:\", entry.id, \"priority:\", entry.priority);\n    }\n\n    //\n    // registry?.delete?.(entry?.id);\n    const result = entry?.close?.(view);\n    return result != false ? entry : null;\n};\n\n/**\n * Close all active closeables in a specific group\n */\nexport const closeByGroup = (group: string): number => {\n    let closedCount = 0;\n\n    for (const entry of registry.values()) {\n        if (entry.group === group && entry.isActive()) {\n            registry?.delete?.(entry.id);\n            const result = entry.close();\n            if (result !== false) closedCount++;\n        }\n    }\n\n    return closedCount;\n};\n\n/**\n * Check if any closeable is currently active\n */\nexport const hasActiveCloseable = (view?: string): boolean => {\n    return getActiveCloseable(view) != null;\n};\n\n/**\n * Handle back navigation (popstate event)\n */\nconst handleBackNavigation = (ev: PopStateEvent): boolean => {\n    if (processingBack) return false;\n    if (ignoreNextPopState) {\n        ignoreNextPopState = false;\n        return false;\n    }\n    if (ev?.state?.action) return false;\n    processingBack = true;\n\n    try {\n        ignoreNextPopState = true;\n\n        // Determine closing view\n        let closingView: string | undefined;\n        // Check if we have history state available and it was a back action\n        if (historyState.entries && (historyState.action === \"BACK\" || historyState.action === \"POP\")) {\n             // If we went back, we came from the next index\n             // Note: historyState.index is the *current* index (destination)\n             const prevEntry = historyState.entries[historyState.index + 1];\n             if (prevEntry) {\n                 closingView = prevEntry.view;\n             }\n        }\n\n        //\n        // try to close the highest priority active closeable\n        const closed = closeHighestPriority(closingView) ?? true;\n\n        // now, in negative, if isn't closed, may be forward back navigation...\n        if (!closed) {\n            // Prevent actual back navigation by going forward\n            // This preserves the current URL/hash without modification\n            ev.preventDefault?.();\n            ignoreNextPopState = true;\n            originalForward?.();\n            setTimeout(() => { ignoreNextPopState = false; }, 0);\n            processingBack = false;\n            return true;\n        }\n\n        ignoreNextPopState = false;\n        processingBack = false;\n        return false;\n    } finally {\n        ignoreNextPopState = false;\n        processingBack = false;\n        return false;\n    }\n};\n\n/**\n * Initialize back navigation handling\n */\nexport const initBackNavigation = (opts: BackNavigationOptions = {}): (() => void) => {\n    if (navigationInitialized) {\n        console.warn(\"[BackNav] Already initialized\");\n        return () => {};\n    }\n\n    options = { ...opts };\n    navigationInitialized = true;\n\n    // Initialize history wrapper\n    initHistory(location.hash);\n\n    // Push initial state to enable back detection\n    if (opts.pushInitialState !== false && !opts.skipPopstateHandler) {\n        historyDepth = 0;\n        setIgnoreNextPopState(true);\n        // Use historyState wrapper compliant push if possible, or manual merge\n        // We'll trust initHistory has set up basic state.\n        // But BackNavigation logic relies on `backNav` property.\n        // Let's merge it properly.\n        const current = history.state || {};\n        const newState = { ...current, backNav: true, depth: historyDepth };\n        history.pushState(newState, \"\", location.hash || \"#\");\n        setIgnoreNextPopState(false);\n    }\n\n    //\n    let unbind: (() => void) | undefined;\n\n    // Only add popstate handler if not managed externally (e.g., by Manager.ts)\n    if (!opts.skipPopstateHandler) {\n        const popstateHandler = (ev: PopStateEvent) => {\n            if (!ev?.state?.action) {\n                const wasHandled = handleBackNavigation(ev);\n                if (!wasHandled && !opts.preventDefaultNavigation) {\n                    // Allow normal back navigation\n                }\n            }\n        };\n\n        unbind = addEvent(window, \"popstate\", popstateHandler);\n    }\n\n    if (options.debug) {\n        console.log(\"[BackNav] Initialized\", opts.skipPopstateHandler ? \"(external handler)\" : \"\");\n    }\n\n    return () => {\n        unbind?.();\n        navigationInitialized = false;\n        registry.clear();\n        if (options.debug) {\n            console.log(\"[BackNav] Destroyed\");\n        }\n    };\n};\n\n/**\n * Register a context menu as closeable\n */\nexport const registerContextMenu = (\n    element: HTMLElement,\n    visibleRef: { value: boolean },\n    onClose?: () => void\n): (() => void) => {\n    return registerCloseable({\n        id: `ctx-menu-${element.id || generateId()}`,\n        priority: ClosePriority.CONTEXT_MENU,\n        element: new WeakRef(element),\n        group: \"context-menu\",\n        isActive: () => visibleRef.value === true,\n        close: () => {\n            visibleRef.value = false;\n            onClose?.();\n            return false;\n        }\n    });\n};\n\n/**\n * Register a modal dialog as closeable\n */\nexport const registerModal = (\n    element: HTMLElement,\n    isActiveCheck?: () => boolean,\n    onClose?: () => void\n): (() => void) => {\n    return registerCloseable({\n        id: `modal-${element.id || generateId()}`,\n        priority: ClosePriority.MODAL,\n        element: new WeakRef(element),\n        group: \"modal\",\n        isActive: isActiveCheck ?? (() => {\n            const el = element;\n            return el?.isConnected &&\n                   !el?.hasAttribute?.(\"data-hidden\") &&\n                   el?.checkVisibility?.({ opacityProperty: true, visibilityProperty: true }) !== false;\n        }),\n        close: () => {\n            onClose?.();\n            element?.remove?.();\n            return false;\n        }\n    });\n};\n\n/**\n * Register a sidebar as closeable\n */\nexport const registerSidebar = (\n    element: HTMLElement,\n    openedRef: { value: any },\n    onClose?: () => void\n): (() => void) => {\n    return registerCloseable({\n        id: `sidebar-${element.id || generateId()}`,\n        priority: ClosePriority.SIDEBAR,\n        element: new WeakRef(element),\n        group: \"sidebar\",\n        isActive: () => {\n            const val = openedRef.value;\n            return !!val && String(val) !== \"false\";\n        },\n        close: () => {\n            openedRef.value = false;\n            onClose?.();\n            return false;\n        }\n    });\n};\n\n/**\n * Register an overlay/panel as closeable\n */\nexport const registerOverlay = (\n    element: HTMLElement,\n    isActiveCheck: () => boolean,\n    onClose: () => void,\n    priority: ClosePriority = ClosePriority.OVERLAY\n): (() => void) => {\n    return registerCloseable({\n        id: `overlay-${element.id || generateId()}`,\n        priority,\n        element: new WeakRef(element),\n        group: \"overlay\",\n        isActive: isActiveCheck,\n        close: () => {\n            onClose();\n            return false;\n        }\n    });\n};\n\n/**\n * Create a modal backdrop with back navigation support\n * Wraps an existing modal creation pattern\n */\nexport const createBackNavigableModal = (\n    content: HTMLElement | DocumentFragment,\n    options: {\n        backdropClass?: string;\n        closeOnBackdropClick?: boolean;\n        closeOnEscape?: boolean;\n        onClose?: () => void;\n    } = {}\n): { element: HTMLElement; close: () => void; unregister: () => void } => {\n    const {\n        backdropClass = \"rs-modal-backdrop\",\n        closeOnBackdropClick = true,\n        closeOnEscape = true,\n        onClose\n    } = options;\n\n    const backdrop = document.createElement(\"div\");\n    backdrop.className = backdropClass;\n    backdrop.appendChild(content);\n\n    const close = () => {\n        onClose?.();\n        backdrop.remove();\n        document.removeEventListener(\"keydown\", escHandler);\n    };\n\n    const escHandler = (ev: KeyboardEvent) => {\n        if (ev.key === \"Escape\" && closeOnEscape) {\n            close();\n        }\n    };\n\n    if (closeOnEscape) {\n        document.addEventListener(\"keydown\", escHandler);\n    }\n\n    if (closeOnBackdropClick) {\n        backdrop.addEventListener(\"click\", (ev) => {\n            if (ev.target === backdrop) {\n                close();\n            }\n        });\n    }\n\n    const unregister = registerModal(backdrop, undefined, close);\n\n    return { element: backdrop, close, unregister };\n};\n\n//\nexport default {\n    register: registerCloseable,\n    unregister: unregisterCloseable,\n    init: initBackNavigation,\n    close: closeHighestPriority,\n    hasActive: hasActiveCloseable,\n    getActive: getActiveCloseable,\n    getAllActive: getActiveCloseables,\n    closeByGroup,\n    registerContextMenu,\n    registerModal,\n    registerSidebar,\n    registerOverlay,\n    createBackNavigableModal,\n    ClosePriority\n};\n","import { boundBehaviors, getCorrectOrientation, orientationNumberMap, whenAnyScreenChanges, handleHidden, handleAttribute, getPadding, addEvent, iterateContentBox } from \"fest/dom\";\nimport { observe, booleanRef, numberRef, affected, stringRef, ref } from \"fest/object\";\nimport { isNotEqual, isValueRef, $avoidTrigger, isObject, getValue, isPrimitive, normalizePrimitive, $getValue, deref, hasValue } from \"fest/core\";\nimport { checkboxCtrl, numberCtrl, valueCtrl } from \"./Control\";\nimport { bindCtrl, bindWith } from \"./Binding\";\nimport { setChecked } from \"fest/dom\";\nimport { getIgnoreNextPopState, setIgnoreNextPopState } from \"../../extension/tasking/BackNavigation\";\n\n//\nexport const localStorageLinkMap = new Map<string, any>();\nexport const localStorageLink = (existsStorage?: any|null, exists?: any|null, key?: string, initial?: any|null) => {\n    if (key == null) return;\n    // de-assign local storage link for key\n    if (localStorageLinkMap.has(key)) {\n        localStorageLinkMap.get(key)?.[0]?.();\n        localStorageLinkMap.delete(key);\n    }\n\n    // @ts-ignore // assign new local storage link for key\n    return localStorageLinkMap.getOrInsertComputed?.(key, ()=>{\n        const def  = (existsStorage ?? localStorage).getItem(key) ?? (initial?.value ?? initial);\n        const ref = isValueRef(exists) ? exists : stringRef(def); /*if (typeof ref == \"object\" || typeof ref == \"function\")*/ ref.value ??= def;\n        const $val = new WeakRef(ref);\n        const unsb = affected([ref, \"value\"], (val) => {\n            $avoidTrigger($val?.deref?.(), ()=>{\n                (existsStorage ?? localStorage).setItem(key, val);\n            });\n        });\n        const list = (ev) => { if (ev.storageArea == (existsStorage ?? localStorage) && ev.key == key) {\n            if (isNotEqual(ref.value, ev.newValue)) { ref.value = ev.newValue; };\n        } };\n        addEventListener(\"storage\", list);\n        return [() => { unsb?.(); removeEventListener(\"storage\", list); }, ref];\n    });\n}\n\n//\nconst normalizeHash = (hash: string | null, withHashCharacter: boolean = true) => {\n    if (hash == null) return (withHashCharacter ? \"#\" : \"\");\n    if (!withHashCharacter && hash?.startsWith?.(\"#\")) { return (hash?.replace?.(\"#\", \"\") || \"\"); };\n    if (withHashCharacter && !hash?.startsWith?.(\"#\")) { return `#${hash || \"\"}`; };\n    return (withHashCharacter ? (hash?.startsWith?.(\"#\") ? hash : `#${hash || \"\"}`) : hash?.replace?.(\"#\", \"\")) || \"\";\n}\n\n//\nexport const hashTargetLink = (_?: any|null, exists?: any|null, initial?: any|null, withHashCharacter: boolean = false)=>{\n    const locationHash = normalizeHash(normalizeHash(location?.hash || \"\", false) || normalizeHash(initial || \"\", false) || \"\", withHashCharacter) || \"\";\n\n    //\n    const ref = isValueRef(exists) ? exists : stringRef(locationHash);\n    if (isObject(ref)) ref.value ||= locationHash;\n\n    //\n    let processingStateChange = false;\n    let nanoThrottle = 0;\n    const evf = (ev) => {\n        if (getIgnoreNextPopState()) return;\n        if (nanoThrottle <= 0) {\n            nanoThrottle = 1;\n            setTimeout(() => {\n                const normalizedLocationHash = normalizeHash(location?.hash, false);\n                const newValue = normalizeHash(normalizedLocationHash || normalizeHash(ref.value || \"\", false), withHashCharacter) || \"\";\n                if (normalizeHash(ref.value, false) !== normalizeHash(newValue, false)) {\n                    if (!processingStateChange) {\n                        processingStateChange = true;\n                        ref.value = newValue;\n                        setTimeout(() => (processingStateChange = false), 0);\n                    }\n                }\n                nanoThrottle = 0;\n            }, 0);\n        }\n    };\n\n    //\n    const $val = new WeakRef(ref);\n    const usb = affected([ref, \"value\"], (val) => {\n        const newHash = normalizeHash(normalizeHash($getValue($val?.deref?.()) || val, false) || normalizeHash(location?.hash, false), true);\n        if (newHash != location.hash) {\n            $avoidTrigger($val?.deref?.(), () => {\n                if (!processingStateChange) {\n                    setIgnoreNextPopState(true);\n                    //location.hash = `#${(newHash || location.hash)?.replace?.(/^#/, \"\")?.trim?.()?.replace?.(/^#/, \"\")?.trim?.() || \"\"}`;\n                    history.pushState(\"\", \"\", newHash || location.hash);\n                    setTimeout(() => setIgnoreNextPopState(false), 0);\n                }\n            });\n        }\n    });\n\n    //\n    addEventListener(\"popstate\", evf);\n    addEventListener(\"hashchange\", evf);\n    return () => { usb?.();\n        removeEventListener(\"popstate\", evf);\n        removeEventListener(\"hashchange\", evf);\n    };\n}\n\n//\nexport const matchMediaLink = (existsMedia?: any|null, exists?: any|null, condition?: string) => {\n    if (condition == null) return;\n    const med = existsMedia ?? matchMedia(condition), def = med?.matches || false;\n    const ref = isValueRef(exists) ? exists : booleanRef(def); ref.value ??= def;\n    const evf = (ev) => (ref.value = ev.matches); med?.addEventListener?.(\"change\", evf);\n    return () => { med?.removeEventListener?.(\"change\", evf); };\n}\n\n//\nexport const visibleLink = (element?: any|null, exists?: any|null, initial?: any|null) => {\n    if (element == null) return;\n    const def = (initial?.value ?? (typeof initial != \"object\" ? initial : null)) ?? (element?.getAttribute?.(\"data-hidden\") == null);\n    const val = isValueRef(exists) ? exists : booleanRef(!!def);\n    const usb = bindWith(element, \"data-hidden\", val, handleHidden);\n    const evf = [(ev) => { val.value = ev?.type == \"u2-hidden\" ? false : true; }, { passive: true }], wel = new WeakRef(element);\n    element?.addEventListener?.(\"u2-hidden\" , ...evf);\n    element?.addEventListener?.(\"u2-appear\", ...evf);\n    return () => {\n        const element = wel?.deref?.(); usb?.();\n        element?.removeEventListener?.(\"u2-hidden\" , ...evf);\n        element?.removeEventListener?.(\"u2-appear\", ...evf);\n    };\n}\n\n//\nexport const attrLink = (element?: any|null, exists?: any|null, attribute?: string, initial?: any|null) => {\n    const def = element?.getAttribute?.(attribute) ?? (typeof initial == \"boolean\" ? (initial ? \"\" : null) : getValue(initial));\n    if (!element) return; const val = isValueRef(exists) ? exists : stringRef(def);\n    if (isObject(val) && !normalizePrimitive(val.value)) val.value = normalizePrimitive(def) ?? val.value ?? \"\";\n    return bindWith(element, attribute, val, handleAttribute, null, true);\n}\n\n//\nexport const sizeLink = (element?: any|null, exists?: any|null, axis?: \"inline\" | \"block\", box?: ResizeObserverBoxOptions) => {\n    const def = box == \"border-box\" ? element?.[axis == \"inline\" ? \"offsetWidth\" : \"offsetHeight\"] : (element?.[axis == \"inline\" ? \"clientWidth\" : \"clientHeight\"] - getPadding(element, axis));\n    const val = isValueRef(exists) ? exists : numberRef(def); if (isObject(val)) val.value ||= (def ?? val.value) || 1;\n    const obs = new ResizeObserver((entries) => {\n        if (isObject(val)) {\n            if (box == \"border-box\") { val.value = axis == \"inline\" ? entries[0].borderBoxSize[0].inlineSize : entries[0].borderBoxSize[0].blockSize };\n            if (box == \"content-box\") { val.value = axis == \"inline\" ? entries[0].contentBoxSize[0].inlineSize : entries[0].contentBoxSize[0].blockSize };\n            if (box == \"device-pixel-content-box\") { val.value = axis == \"inline\" ? entries[0].devicePixelContentBoxSize[0].inlineSize : entries[0].devicePixelContentBoxSize[0].blockSize };\n        }\n    });\n    if ((element?.element ?? element?.self ?? element) instanceof HTMLElement) { obs?.observe?.(element?.element ?? element?.self ?? element, { box }); };\n    return ()=>obs?.disconnect?.();\n}\n\n//\nexport const scrollLink = (element?: any|null, exists?: any|null, axis?: \"inline\" | \"block\", initial?: any|null) => {\n    const wel = element instanceof WeakRef ? element : new WeakRef(element);\n    if (initial != null && typeof (initial?.value ?? initial) == \"number\") { element?.scrollTo?.({ [axis == \"block\" ? \"top\" : \"left\"]: (initial?.value ?? initial) }); };\n    const def = element?.[axis == \"block\" ? \"scrollTop\" : \"scrollLeft\"];\n    const val = isValueRef(exists) ? exists : numberRef(def || 0); if (isObject(val)) val.value ||= (def ?? val.value) || 1; val.value ||= (def ?? val.value) || 0;\n    const usb = affected([val, \"value\"], (v) => { if (Math.abs((axis == \"block\" ? element?.scrollTop : element?.scrollLeft) - (val?.value ?? val)) > 0.001) element?.scrollTo?.({ [axis == \"block\" ? \"top\" : \"left\"]: (val?.value ?? val) })});\n    const scb = [(ev) => { val.value = (axis == \"block\" ? wel?.deref?.()?.scrollTop : wel?.deref?.()?.scrollLeft) || 0; }, { passive: true }];\n    element?.addEventListener?.(\"scroll\", ...scb); return ()=>{ wel?.deref?.()?.removeEventListener?.(\"scroll\", ...scb); usb?.(); };\n}\n\n//\nexport const checkedLink = (element?: any|null, exists?: any|null) => {\n    const def = (!!element?.checked) || false;\n    const val = isValueRef(exists) ? exists : booleanRef(def); if (isObject(val)) val.value ??= def;\n    const dbf = bindCtrl(element, checkboxCtrl(val));\n    const usb = affected([val, \"value\"], (v) => {\n        if (element && element?.checked != v) {\n            setChecked(element, v);\n        }\n    });\n    return ()=>{ usb?.(); dbf?.(); };\n}\n\n//\nexport const valueLink = (element?: any|null, exists?: any|null) => {\n    if (isPrimitive(element)) return;\n    if (!element || !(element instanceof Node || element?.element instanceof Node)) return;\n\n    //\n    const def = element?.value ?? \"\";\n    const val = isValueRef(exists) ? exists : stringRef(def); if (isObject(val)) val.value ??= def;\n    const dbf = bindCtrl(element, valueCtrl(val));\n    const $val = new WeakRef(val);\n    const usb = affected([val, \"value\"], (v) => {\n        if (element && isNotEqual(element?.value, (v?.value ?? v))) {\n            $avoidTrigger(deref($val), ()=>{\n                element.value = $getValue(deref($val)) ?? $getValue(v);\n                element?.dispatchEvent?.(new Event(\"change\", { bubbles: true }));\n            });\n        }\n    });\n    return ()=>{ usb?.(); dbf?.(); };\n}\n\n//\nexport const valueAsNumberLink = (element?: any|null, exists?: any|null) => {\n    if (isPrimitive(element)) return;\n    if (!element || !(element instanceof Node || element?.element instanceof Node)) return;\n\n    //\n    const def = Number(element?.valueAsNumber) || 0;\n    const val = isValueRef(exists) ? exists : numberRef(def); if (isObject(val)) val.value ??= def;\n    const dbf = bindCtrl(element, numberCtrl(val));\n    const usb = affected([val, \"value\"], (v) => {\n        if (element && (element.type == \"range\" || element.type == \"number\") && typeof element?.valueAsNumber == \"number\" && isNotEqual(element?.valueAsNumber, v)) {\n            element.valueAsNumber = Number(v);\n            element?.dispatchEvent?.(new Event(\"change\", { bubbles: true }));\n        }\n    });\n    return ()=>{ usb?.(); dbf?.(); };\n}\n\n//\nexport const observeSizeLink = (element?: any|null, exists?: any|null, box?: any|null, styles?: any|null) => {\n    if (isPrimitive(element)) return;\n    if (!element || !(element instanceof Node || element?.element instanceof Node)) return;\n\n    //\n    if (!styles) styles = isValueRef(exists) ? exists : observe({}); let obs: any = null;\n    (obs = new ResizeObserver((mut) => {\n        if (box == \"border-box\") {\n            styles.inlineSize = `${mut[0].borderBoxSize[0].inlineSize}px`;\n            styles.blockSize  = `${mut[0].borderBoxSize[0].blockSize}px`;\n        }\n        if (box == \"content-box\") {\n            styles.inlineSize = `${mut[0].contentBoxSize[0].inlineSize}px`;\n            styles.blockSize  = `${mut[0].contentBoxSize[0].blockSize}px`;\n        }\n        if (box == \"device-pixel-content-box\") {\n            styles.inlineSize = `${mut[0].devicePixelContentBoxSize[0].inlineSize}px`;\n            styles.blockSize  = `${mut[0].devicePixelContentBoxSize[0].blockSize}px`;\n        }\n    })).observe(element?.element ?? element?.self ?? element, { box });\n    return () => { obs?.disconnect?.(); };\n}\n\n//\nexport const refCtl = (value?: any|null) => {\n    if (isPrimitive(value)) return;\n\n    //\n    let self: any = null, ctl = ref(value, self = ([val, prop, old], [weak, ctl, valMap]) => boundBehaviors?.get?.(weak?.deref?.())?.values?.()?.forEach?.((beh) => {\n        (beh != self ? beh : null)?.([val, prop, old], [weak, ctl, valMap]);\n    })); return ctl;\n}\n\n//\nexport const orientLink = (host?: any|null, exists?: any|null)=>{\n    const orient = orientationNumberMap?.[getCorrectOrientation()] || 0;\n    const def = Number(orient) || 0;\n    const val = isValueRef(exists) ? exists : numberRef(def);\n    if (hasValue(val)) val.value = def;\n\n    // !Change orientation? You are seious?!\n    //affected([exists, \"value\"], (orient)=>{ // pickup name...\n        //screen?.orientation?.lock?.($NAME$?.(orient));\n    //});\n\n    return whenAnyScreenChanges(()=>{\n        val.value = orientationNumberMap?.[getCorrectOrientation()] || 0;\n    });\n}\n","import { stringRef, numberRef, booleanRef, deref, observe, addToCallChain, affected, computed, $trigger, ref } from \"fest/object\";\nimport { attrLink, valueLink, checkedLink, valueAsNumberLink, localStorageLink, sizeLink, scrollLink, visibleLink, matchMediaLink, orientLink, localStorageLinkMap, hashTargetLink } from \"./Links\";\nimport { addEvent, getPadding, handleAttribute } from \"fest/dom\";\nimport { elMap } from \"./Binding\";\nimport { isValidObj, WRef } from \"fest/core\";\nimport { operated } from \"fest/lure\";\n\n//\nexport const makeRef = (host?: any, type?: any, link?: any, ...args)=>{\n    if (link == attrLink || link == handleAttribute) {\n        const exists = elMap?.get?.(host)?.get?.(handleAttribute)?.get?.(args[0])?.[0];\n        if (exists) { return exists; };\n    }\n    const rf = (type ?? ref)?.(null), usub = link?.(host, rf, ...args);\n    if (usub && rf) addToCallChain(rf, Symbol.dispose, usub); return rf;\n}\n\n//\nexport const orientRef = (host?: any, ...args)=>makeRef(host, numberRef, orientLink, ...args);\nexport const attrRef = (host?: any, ...args)=>makeRef(host, stringRef, attrLink, ...args);\nexport const valueRef = (host?: any, ...args)=>makeRef(host, stringRef, valueLink, ...args);\nexport const valueAsNumberRef = (host?: any, ...args)=>makeRef(host, numberRef, valueAsNumberLink, ...args);\nexport const localStorageRef = (...args)=>{\n    if (localStorageLinkMap.has(args[0])) return localStorageLinkMap.get(args[0])?.[1];\n    const link: any = localStorageLink, type: any = stringRef;\n    const rf = (type ?? ref)?.(null), pair = link?.(null, rf, ...args);\n    const [usub, _] = pair;\n    if (usub && rf) addToCallChain(rf, Symbol.dispose, usub);\n    /*localStorageLinkMap.set(args[0], pair);*/ return rf;\n};\n\n//\nexport const sizeRef = (host?: any, ...args)=>makeRef(host, numberRef, sizeLink, ...args);\nexport const checkedRef = (host?: any, ...args)=>makeRef(host, booleanRef, checkedLink, ...args);\nexport const scrollRef = (host?: any, ...args)=>makeRef(host, numberRef, scrollLink, ...args);\nexport const visibleRef = (host?: any, ...args)=>makeRef(host, booleanRef, visibleLink, ...args);\nexport const matchMediaRef = (...args)=>makeRef(null, booleanRef, matchMediaLink, ...args);\nexport const hashTargetRef = (...args)=>makeRef(null, stringRef, hashTargetLink, ...args);\n\n//\nexport const makeWeakRef = (/*host?: any,*/ initial?: any, behavior?: any)=>{\n    const obj = deref(initial);\n    return isValidObj(obj) ? observe(WRef(obj)) : ref(obj, behavior);\n};\n\n//\nexport const scrollSize  = (source: HTMLElement, axis: number = 0, inputChange?: any|null)=>{ // @ts-ignore\n    const target  = toRef(source);\n    const compute = (vl: any)=>((deref(target)?.[['scrollWidth', 'scrollHeight'][axis] || 'scrollWidth'] - 1) || 1);\n    const scroll  = scrollRef(source, ([\"inline\", \"block\"] as [\"inline\", \"block\"])[axis]);\n    const conRef  = sizeRef(source, ([\"inline\", \"block\"] as [\"inline\", \"block\"])[axis], \"content-box\");\n    const percent = computed(scroll, compute);\n    const recompute = ()=>{ scroll?.[$trigger]?.(); percent?.[$trigger]?.(); }\n\n    //\n    affected(conRef, (vl: any)=>{ recompute?.(); });\n    addEvent(inputChange || source, \"input\" , ()=>{ recompute?.(); });\n    addEvent(inputChange || source, \"change\", ()=>{ recompute?.(); });\n    queueMicrotask(()=>{ recompute?.(); });\n    return percent;\n}\n\n// Enhanced reactive scrollbar sizing with CSS calc integration\nexport const reactiveScrollbarSize = (source: HTMLElement, axis: number, contentSize: ReturnType<typeof numberRef>) => {\n    const containerSize = axis === 0\n        ? operated([], () => source.clientWidth)\n        : operated([], () => source.clientHeight);\n\n    return operated([containerSize, contentSize], () => {\n        const ratio = containerSize.value / contentSize.value;\n        const minSize = 20; // Minimum thumb size in pixels\n        return Math.max(minSize, ratio * containerSize.value);\n    });\n};\n\n// All classes are exported above when declared\nexport const paddingBoxSize  = (source: HTMLElement, axis: number, inputChange?: any|null)=>{ // @ts-ignore\n    const target  = asWeak(source);\n    const scroll  = scrollRef(source, ([\"inline\", \"block\"] as [\"inline\", \"block\"])[axis]);\n    const conRef  = sizeRef(source, ([\"inline\", \"block\"] as [\"inline\", \"block\"])[axis], \"content-box\");\n    const content = computed(conRef, (v: any)=>(v + (getPadding(source, ([\"inline\", \"block\"] as [\"inline\", \"block\"])[axis]) || 0)));\n    const recompute = ()=>{ conRef?.[$trigger]?.(); content?.[$trigger]?.(); }\n\n    //\n    affected(scroll, (vl: any)=>{ recompute?.(); });\n    addEvent(inputChange || source, \"input\" , ()=>{ recompute?.(); });\n    addEvent(inputChange || source, \"change\", ()=>{ recompute?.(); });\n    queueMicrotask(()=>{ recompute?.(); });\n    return content;\n}\n","import { ref } from \"fest/object\";\nimport { addRoot, isElement, loadAsAdopted, loadInlineStyle, setAttributesIfNull } from \"fest/dom\";\n\nimport {\n    valueAsNumberRef,\n    localStorageRef,\n    matchMediaRef,\n    checkedRef,\n    scrollRef,\n    valueRef,\n    sizeRef,\n    attrRef\n} from \"../../lure/core/Refs\";\n\nimport { Q } from \"../../lure/node/Queried\";\nimport { E } from \"../../lure/node/Bindings\";\nimport { H } from \"../../lure/node/Syntax\";\n\n//\nconst styleCache = new Map();\nconst styleElementCache = new WeakMap();\nconst propStore = new WeakMap<object, Map<string, any>>();\nconst CSM = new WeakMap<WeakKey | HTMLElement, any>();\n\nconst camelToKebab = (str: string) => str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\nconst kebabToCamel = (str: string) => str.replace(/-([a-z])/g, (_, char) => char.toUpperCase());\nconst whenBoxValid = (name: string) => {\n    const cb = camelToKebab(name);\n    if ([\"border-box\", \"content-box\", \"device-pixel-content-box\"].indexOf(cb) >= 0) return cb;\n    return null;\n};\nconst whenAxisValid = (name: string) => {\n    const cb = camelToKebab(name);\n    if (cb?.startsWith?.(\"inline\")) return \"inline\";\n    if (cb?.startsWith?.(\"block\")) return \"block\";\n    return null;\n};\n\nconst characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\nconst inRenderKey = Symbol.for(\"@render@\");\nconst defKeys = Symbol.for(\"@defKeys@\");\nconst defaultStyle = typeof document != \"undefined\" ? document?.createElement?.(\"style\") : null;\n\nconst defineSource = (source: string | any, holder: any, name?: string | null) => {\n    if (source == \"attr\") return attrRef.bind(null, holder, name || \"\");\n    if (source == \"media\") return matchMediaRef;\n    if (source == \"query\") return (val: string) => Q?.(name || val || \"\", holder);\n    if (source == \"query-shadow\") return (val: string) => Q?.(name || val || \"\", holder?.shadowRoot ?? holder);\n    if (source == \"localStorage\") return localStorageRef;\n    if (source == \"inline-size\") return sizeRef.bind(null, holder, \"inline\", whenBoxValid(name!) || \"border-box\");\n    if (source == \"content-box\") return sizeRef.bind(null, holder, whenAxisValid(name!) || \"inline\", \"content-box\");\n    if (source == \"block-size\") return sizeRef.bind(null, holder, \"block\", whenBoxValid(name!) || \"border-box\");\n    if (source == \"border-box\") return sizeRef.bind(null, holder, whenAxisValid(name!) || \"inline\", \"border-box\");\n    if (source == \"scroll\") return scrollRef.bind(null, holder, whenAxisValid(name!) || \"inline\");\n    if (source == \"device-pixel-content-box\") return sizeRef.bind(null, holder, whenAxisValid(name!) || \"inline\", \"device-pixel-content-box\");\n    if (source == \"checked\") return checkedRef.bind(null, holder);\n    if (source == \"value\") return valueRef.bind(null, holder);\n    if (source == \"value-as-number\") return valueAsNumberRef.bind(null, holder);\n    return ref;\n};\n\nif (defaultStyle) {\n    typeof document != \"undefined\" ? document.querySelector?.(\"head\")?.appendChild?.(defaultStyle) : null;\n}\n\nconst getDef = (source?: string | any | null): any => {\n    if (source == \"query\") return \"input\";\n    if (source == \"query-shadow\") return \"input\";\n    if (source == \"media\") return false;\n    if (source == \"localStorage\") return null;\n    if (source == \"attr\") return null;\n    if (source == \"inline-size\") return 0;\n    if (source == \"block-size\") return 0;\n    if (source == \"border-box\") return 0;\n    if (source == \"content-box\") return 0;\n    if (source == \"scroll\") return 0;\n    if (source == \"device-pixel-content-box\") return 0;\n    if (source == \"checked\") return false;\n    if (source == \"value\") return \"\";\n    if (source == \"value-as-number\") return 0;\n    return null;\n};\n\nif (defaultStyle) {\n    defaultStyle.innerHTML = `@layer ux-preload {\n        :host { display: none; }\n    }`;\n}\n\n// ============================================\n//   WEB COMPONENTS LIFECYCLE\n// ============================================\n\n/**\n *  lifecycle callbacks  Custom Elements\n */\nexport interface CustomElementLifecycle {\n    connectedCallback?(): this|void|undefined;\n    disconnectedCallback?(): this|void|undefined;\n    adoptedCallback?(): this|void|undefined;\n    attributeChangedCallback?(name: string, oldValue: string | null, newValue: string | null): this|void|undefined;\n}\n\n/**\n *   Custom Element\n */\nexport interface CustomElementStatic {\n    observedAttributes?: string[];\n    formAssociated?: boolean;\n}\n\n/**\n *    Custom Element  lifecycle\n */\nexport interface CustomElementBase extends HTMLElement, CustomElementLifecycle {}\n\n/**\n *     GLitElement\n */\nexport interface GLitElementInstance extends CustomElementLifecycle {\n    styles?: any;\n    initialAttributes?: Record<string, any> | (() => Record<string, any>);\n    styleLibs: HTMLStyleElement[];\n    adoptedStyleSheets: CSSStyleSheet[];\n    styleLayers(): string[];\n    render(weak?: WeakRef<any>): HTMLElement | DocumentFragment | Node;\n    onInitialize(weak?: WeakRef<any>): this|void|undefined;\n    onRender(weak?: WeakRef<any>): this|void|undefined;\n    loadStyleLibrary(module: any): this|void|undefined;\n    createShadowRoot(): ShadowRoot;\n    $init?(): void;\n}\n\n/**\n *    HTMLElement      lifecycle\n */\nexport type HTMLElementConstructor<T extends HTMLElement = HTMLElement> = {\n    new(...args: any[]): T & CustomElementLifecycle;\n    prototype: T & CustomElementLifecycle;\n} & CustomElementStatic;\n\n/**\n *    GLitElement -     lifecycle\n */\nexport type GLitElementConstructor<T extends HTMLElement = HTMLElement> = {\n    new(...args: any[]): T & GLitElementInstance;\n    prototype: T & GLitElementInstance;\n} & CustomElementStatic;\n\n/**\n *   ,   \n */\nexport type GLitElementClass<T extends HTMLElement = HTMLElement> = \n    GLitElementConstructor<T> & {\n        new(...args: any[]): T & GLitElementInstance & CustomElementLifecycle;\n    };\n\n// ============================================\n//   \n// ============================================\n\nexport function withProperties<T extends HTMLElementConstructor>(ctr: T): T {\n    const proto = ctr.prototype as any ?? Object.getPrototypeOf(ctr) ?? ctr;\n    const $prev = (proto as any)?.$init ?? (ctr as any)?.$init;\n    (proto as any).$init = function (this: any, ...args: any[]) {\n        $prev?.call?.(this, ...args);\n\n        // Collect defKeys from entire prototype chain (child-first, skip duplicates)\n        const allDefs: Record<string, any> = {};\n        let p: any = Object.getPrototypeOf(this) ?? this;\n        while (p) {\n            if (Object.hasOwn(p, defKeys)) {\n                const defs = Object.assign({}, Object.getOwnPropertyDescriptors(p), p[defKeys] ?? {});\n                for (const k of Object.keys(defs)) {\n                    if (!(k in allDefs)) { allDefs[k] = defs[k]; };\n                }\n            }\n            p = Object.getPrototypeOf(p);\n        }\n\n        for (const [key, def] of Object.entries(allDefs)) {\n            const exists = this[key];\n            if (def != null) {\n                Object.defineProperty(this, key, def as PropertyDescriptor);\n            }\n            try { this[key] = exists || this[key]; } catch (e) {}\n        }\n\n        return this;\n    };\n\n    return ctr;\n}\n\nexport function generateName(length = 8) {\n    let r = '';\n    const l = characters.length;\n    for (let i = 0; i < length; i++) {\n        r += characters.charAt(Math.floor(Math.random() * l));\n    }\n    return r;\n}\n\nexport function defineElement(name: string, options?: ElementDefinitionOptions) {\n    return function <T extends HTMLElementConstructor>(target: T, _key?: string): T {\n        try {\n            if (typeof customElements === \"undefined\" || !name) return target;\n            const existing = customElements.get(name);\n            if (existing) return existing as unknown as T;\n            customElements.define(name, target as unknown as CustomElementConstructor, options);\n        } catch (e: any) {\n            if (e?.name === \"NotSupportedError\" || /has already been used|already been defined/i.test(e?.message || \"\")) {\n                return (customElements?.get?.(name) ?? target) as T;\n            }\n            throw e;\n        }\n        return target;\n    };\n}\n\nexport interface PropertyOptions {\n    attribute?: string | boolean;\n    source?: string | any;\n    name?: string | null;\n    from?: any | null;\n}\n\nexport function property(options: PropertyOptions = {}) {\n    const { attribute, source, name, from } = options;\n\n    return function (target: any, key: string) {\n        const attrName = typeof attribute == \"string\" ? attribute : (name ?? key);\n\n        if (attribute !== false && attrName != null) {\n            const ctor = target.constructor;\n            if (!ctor.observedAttributes) {\n                ctor.observedAttributes = [];\n            }\n            if (ctor.observedAttributes.indexOf(attrName) < 0) {\n                ctor.observedAttributes.push(attrName);\n            }\n        }\n\n        if (!Object.hasOwn(target, defKeys)) target[defKeys] = {};\n\n        target[defKeys][key] = {\n            get(this: any) {\n                const ROOT = this;\n                const inRender = ROOT[inRenderKey];\n                const sourceTarget = !from ? ROOT : (from instanceof HTMLElement ? from : (typeof from == \"string\" ? Q?.(from, ROOT) : ROOT));\n\n                let store = propStore.get(ROOT);\n                let stored = store?.get?.(key);\n\n                if (stored == null && source != null) {\n                    if (!store) {\n                        propStore.set(ROOT, store = new Map());\n                    }\n                    if (!store?.has?.(key)) {\n                        store?.set?.(key, stored = defineSource(source, sourceTarget, name || key)?.(getDef(source)));\n                    }\n                }\n\n                if (inRender) return stored;\n                if (stored?.element instanceof HTMLElement) return stored?.element;\n                return ((typeof stored == \"object\" || typeof stored == \"function\") && (stored?.value != null || \"value\" in stored)) ? stored?.value : stored;\n            },\n            set(this: any, newValue: any) {\n                const ROOT = this;\n                const sourceTarget = !from ? ROOT : (from instanceof HTMLElement ? from : (typeof from == \"string\" ? Q?.(from, ROOT) : ROOT));\n\n                let store = propStore.get(ROOT);\n                let stored = store?.get?.(key);\n\n                if (stored == null && source != null) {\n                    if (!store) {\n                        propStore.set(ROOT, store = new Map());\n                    }\n                    if (!store?.has?.(key)) {\n                        const initialValue = (((typeof newValue == 'object' || typeof newValue == 'function') ? (newValue?.value) : null) ?? newValue) ?? getDef(source);\n                        store?.set?.(key, stored = defineSource(source, sourceTarget, name || key)?.(initialValue));\n                    }\n                } else if (typeof stored == \"object\" || typeof stored == \"function\") {\n                    try {\n                        if (typeof newValue == 'object' && newValue != null && ((newValue?.value == null && !(\"value\" in newValue)) || typeof newValue?.value == \"object\" || typeof newValue?.value == \"function\")) {\n                            Object.assign(stored, newValue?.value ?? newValue);\n                        } else {\n                            stored.value = ((typeof newValue == 'object' || typeof newValue == 'function') ? (newValue?.value) : null) ?? newValue;\n                        }\n                    } catch (e) {\n                        console.warn(\"Error setting property value:\", e);\n                    }\n                }\n            },\n            enumerable: true,\n            configurable: true,\n        };\n    };\n}\n\n// ============================================\n// \n// ============================================\n\nconst adoptedStyleSheetsCache = new WeakMap<object, CSSStyleSheet[]>();\n\nconst addAdoptedSheetToElement = (bTo: any, sheet: CSSStyleSheet) => {\n    let adoptedSheets = adoptedStyleSheetsCache.get(bTo);\n    if (!adoptedSheets) {\n        adoptedStyleSheetsCache.set(bTo, adoptedSheets = []);\n    }\n    if (sheet && adoptedSheets.indexOf(sheet) < 0) {\n        adoptedSheets.push(sheet);\n    }\n    if (bTo.shadowRoot) {\n        bTo.shadowRoot.adoptedStyleSheets = [\n            ...(bTo.shadowRoot.adoptedStyleSheets || []),\n            ...adoptedSheets.filter((s: CSSStyleSheet) => !bTo.shadowRoot.adoptedStyleSheets?.includes(s))\n        ];\n    }\n};\n\nexport const loadCachedStyles = (bTo: any, src: any): HTMLStyleElement | null => {\n    if (!src) return null;\n\n    let resolvedSrc = src;\n    if (typeof src == \"function\") {\n        try {\n            const weak = new WeakRef(bTo);\n            resolvedSrc = src.call(bTo, weak);\n        } catch (e) {\n            console.warn(\"Error calling styles function:\", e);\n            return null;\n        }\n    }\n\n    if (resolvedSrc && typeof CSSStyleSheet != \"undefined\" && resolvedSrc instanceof CSSStyleSheet) {\n        addAdoptedSheetToElement(bTo, resolvedSrc);\n        return null;\n    }\n\n    if (resolvedSrc instanceof Promise) {\n        resolvedSrc.then((result: any) => {\n            if (result instanceof CSSStyleSheet) {\n                addAdoptedSheetToElement(bTo, result);\n            } else if (result != null) {\n                loadCachedStyles(bTo, result);\n            }\n        }).catch((e: any) => {\n            console.warn(\"Error loading adopted stylesheet:\", e);\n        });\n        return null;\n    }\n\n    if (typeof resolvedSrc == \"string\" || resolvedSrc instanceof Blob || (resolvedSrc as any) instanceof File) {\n        const adopted = loadAsAdopted(resolvedSrc, \"\");\n        if (adopted) {\n            let adoptedSheets = adoptedStyleSheetsCache.get(bTo);\n            if (!adoptedSheets) {\n                adoptedStyleSheetsCache.set(bTo, adoptedSheets = []);\n            }\n            const addAdoptedSheet = (sheet: CSSStyleSheet) => {\n                if (sheet && adoptedSheets!.indexOf(sheet) < 0) {\n                    adoptedSheets!.push(sheet);\n                }\n                if (bTo.shadowRoot) {\n                    bTo.shadowRoot.adoptedStyleSheets = [\n                        ...(bTo.shadowRoot.adoptedStyleSheets || []),\n                        ...adoptedSheets!.filter((s: CSSStyleSheet) => !bTo.shadowRoot.adoptedStyleSheets?.includes(s))\n                    ];\n                }\n            };\n            if (adopted instanceof Promise) {\n                adopted.then(addAdoptedSheet).catch((e: any) => {\n                    console.warn(\"Error loading adopted stylesheet:\", e);\n                });\n                return null;\n            } else {\n                addAdoptedSheet(adopted);\n                return null;\n            }\n        }\n    }\n\n    const source = ((typeof src == \"function\" || typeof src == \"object\") ? styleElementCache : styleCache);\n    const cached = source.get(src);\n    let styleElement = cached?.styleElement;\n    let vars = cached?.vars;\n\n    if (!cached) {\n        let styles = ``;\n        let props: any[] = [];\n\n        if (typeof resolvedSrc == \"string\") {\n            styles = resolvedSrc || \"\";\n        } else if (typeof resolvedSrc == \"object\" && resolvedSrc != null) {\n            if (resolvedSrc instanceof HTMLStyleElement) {\n                styleElement = resolvedSrc;\n            } else {\n                styles = typeof (resolvedSrc as any).css == \"string\" ? (resolvedSrc as any).css : (typeof resolvedSrc == \"string\" ? resolvedSrc : String(resolvedSrc));\n                props = (resolvedSrc as any)?.props ?? props;\n                vars = (resolvedSrc as any)?.vars ?? vars;\n            }\n        }\n\n        if (!styleElement && styles) {\n            styleElement = loadInlineStyle(styles, bTo, \"ux-layer\");\n        }\n\n        source.set(src, { css: styles, props, vars, styleElement });\n    }\n\n    return styleElement;\n};\n\nexport const isNotExtended = (el: HTMLElement): boolean => {\n    return !(\n        (el instanceof HTMLDivElement) ||\n        (el instanceof HTMLImageElement) ||\n        (el instanceof HTMLVideoElement) ||\n        (el instanceof HTMLCanvasElement)\n    ) && !(el?.hasAttribute?.(\"is\") || el?.getAttribute?.(\"is\") != null);\n};\n\nexport const customElement = defineElement;\n\n// ============================================\n//   GLitElement\n// ============================================\n\n/**\n * GLitElement:         .\n *   lifecycle callbacks Web Components.\n * \n * @param derivate -     (  HTMLElement).\n * @returns       lifecycle.\n * \n * @example\n * ```typescript\n * //  \n * class MyElement extends GLitElement() {\n *     connectedCallback() {\n *         super.connectedCallback();\n *         console.log('Connected!');\n *     }\n *     \n *     render() {\n *         return H`<div>Hello</div>`;\n *     }\n * }\n * \n * //     \n * class MyButton extends GLitElement(HTMLButtonElement) {\n *     static observedAttributes = ['disabled'];\n *     \n *     attributeChangedCallback(name, oldVal, newVal) {\n *         console.log(`${name} changed from ${oldVal} to ${newVal}`);\n *     }\n * }\n * \n * //  \n * @defineElement('my-element')\n * class MyElement extends GLitElement() {\n *     @property({ source: 'attr', name: 'value' })\n *     value: string = '';\n *     \n *     disconnectedCallback() {\n *         console.log('Disconnected!');\n *     }\n * }\n * ```\n */\nexport function GLitElement<T extends HTMLElement = HTMLElement>(\n    derivate?: HTMLElementConstructor<T>\n): GLitElementClass<T> {\n    const Base = (derivate ?? HTMLElement) as HTMLElementConstructor<T>;\n\n    //  \n    const cached = CSM.get(Base);\n    if (cached) return cached as GLitElementClass<T>;\n\n    /**\n     *      lifecycle\n     */\n    abstract class GLitElementImpl extends (Base as unknown as new (...args: any[]) => HTMLElement & CustomElementLifecycle) implements GLitElementInstance {\n        #shadowDOM?: ShadowRoot | null;\n        #styleElement?: HTMLStyleElement;\n        #defaultStyle?: HTMLStyleElement;\n        #initialized: boolean = false;\n\n        styleLibs: HTMLStyleElement[] = [];\n        adoptedStyleSheets: CSSStyleSheet[] = [];\n\n        //     \n        get styles(): any { return undefined; }\n        get initialAttributes(): Record<string, any> | (() => Record<string, any>) | undefined { return undefined; }\n\n        styleLayers(): string[] { return []; }\n\n        render(_weak?: WeakRef<any>): HTMLElement | DocumentFragment | Node {\n            return document.createElement(\"slot\");\n        }\n\n        constructor(...args: any[]) {\n            super(...args);\n            if (isNotExtended(this)) {\n                const shadowRoot = addRoot(\n                    this.shadowRoot ?? \n                    (this as any).createShadowRoot?.() ?? \n                    this.attachShadow({ mode: \"open\" })\n                );\n                const defStyle = (this.#defaultStyle ??= defaultStyle?.cloneNode?.(true) as HTMLStyleElement);\n                const layersStyle = shadowRoot.querySelector(`style[data-type=\"ux-layer\"]`);\n                if (layersStyle) {\n                    layersStyle.after(defStyle);\n                } else {\n                    shadowRoot.prepend(defStyle);\n                }\n            }\n            this.styleLibs ??= [];\n        }\n\n        protected $makeLayers(): string {\n            return `@layer ${[\"ux-preload\", \"ux-layer\", ...(this.styleLayers?.() ?? [])].join?.(\",\") ?? \"\"};`;\n        }\n\n        $init?(): void;\n\n        onInitialize(_weak?: WeakRef<any>): this {\n            return this;\n        }\n\n        onRender(_weak?: WeakRef<any>): this {\n            return this;\n        }\n\n        protected getProperty(key: string): any {\n            const current = (this as any)[inRenderKey];\n            (this as any)[inRenderKey] = true;\n            const cp = (this as any)[key];\n            (this as any)[inRenderKey] = current;\n            if (!current) {\n                delete (this as any)[inRenderKey];\n            }\n            return cp;\n        }\n\n        loadStyleLibrary($module: any): this {\n            const root = this.shadowRoot;\n            const module = typeof $module == \"function\" ? $module?.(root) : $module;\n\n            if (module instanceof HTMLStyleElement) {\n                this.styleLibs?.push?.(module);\n                if (this.#styleElement?.isConnected) {\n                    this.#styleElement?.before?.(module);\n                } else {\n                    this.shadowRoot?.prepend?.(module);\n                }\n            } else if (module instanceof CSSStyleSheet) {\n                let adoptedSheets = adoptedStyleSheetsCache.get(this);\n                if (!adoptedSheets) {\n                    adoptedStyleSheetsCache.set(this, adoptedSheets = []);\n                }\n                if (adoptedSheets.indexOf(module) < 0) {\n                    adoptedSheets.push(module);\n                }\n                if (root) {\n                    root.adoptedStyleSheets = [\n                        ...(root.adoptedStyleSheets || []),\n                        ...adoptedSheets.filter((s: CSSStyleSheet) => !root.adoptedStyleSheets?.includes(s))\n                    ];\n                }\n            } else {\n                const adopted = loadAsAdopted(module, \"ux-layer\");\n                let adoptedSheets = adoptedStyleSheetsCache.get(this);\n                if (!adoptedSheets) {\n                    adoptedStyleSheetsCache.set(this, adoptedSheets = []);\n                }\n                const addAdoptedSheet = (sheet: CSSStyleSheet) => {\n                    if (sheet && adoptedSheets!.indexOf(sheet) < 0) {\n                        adoptedSheets!.push(sheet);\n                    }\n                    if (root) {\n                        root.adoptedStyleSheets = [\n                            ...(root.adoptedStyleSheets || []),\n                            ...adoptedSheets!.filter((s: CSSStyleSheet) => !root.adoptedStyleSheets?.includes(s))\n                        ];\n                    }\n                };\n                if (adopted instanceof Promise) {\n                    adopted.then(addAdoptedSheet).catch(() => { });\n                } else if (adopted) {\n                    addAdoptedSheet(adopted);\n                }\n            }\n            return this;\n        }\n\n        createShadowRoot(): ShadowRoot {\n            return addRoot(this.shadowRoot ?? this.attachShadow({ mode: \"open\" })) as ShadowRoot;\n        }\n\n        // ============================================\n        // LIFECYCLE CALLBACKS\n        // ============================================\n\n        /**\n         *      DOM\n         */\n        connectedCallback(): void {\n            //     \n            if (super.connectedCallback) {\n                super.connectedCallback();\n            }\n\n            const weak = new WeakRef(this);\n\n            if (!this.#initialized) {\n                this.#initialized = true;\n                const shadowRoot = isNotExtended(this)\n                    ? (this.createShadowRoot?.() ?? this.shadowRoot ?? this.attachShadow({ mode: \"open\" }))\n                    : this.shadowRoot;\n\n                //  \n                const ctor = this.constructor as any;\n                const init = (this as any).$init ?? (ctor as any).prototype?.$init;\n                if (typeof init === \"function\") init.call(this);\n\n                //  \n                const attrs = typeof this.initialAttributes == \"function\"\n                    ? (this.initialAttributes as () => Record<string, any>)()\n                    : this.initialAttributes;\n                setAttributesIfNull(this, attrs);\n\n                this.onInitialize?.call(this, weak);\n\n                (this as any)[inRenderKey] = true;\n\n                if (isNotExtended(this) && shadowRoot) {\n                    const rendered = this.render?.call?.(this, weak) ?? document.createElement(\"slot\");\n                    const styleElement = loadCachedStyles(this, this.styles);\n\n                    if (styleElement instanceof HTMLStyleElement) {\n                        this.#styleElement = styleElement;\n                    }\n\n                    const elements = [\n                        H`<style data-type=\"ux-layer\" prop:innerHTML=${this.$makeLayers()}></style>`,\n                        this.#defaultStyle,\n                        ...(this.styleLibs.map(x => x.cloneNode?.(true)) || []),\n                        styleElement,\n                        rendered\n                    ].filter((x): x is Node => x != null && (isElement(x) as unknown as boolean));\n\n                    shadowRoot.append(...elements);\n\n                    const adoptedSheets = adoptedStyleSheetsCache.get(this) || [];\n                    if (adoptedSheets.length > 0) {\n                        shadowRoot.adoptedStyleSheets = [\n                            ...adoptedSheets.filter((s: CSSStyleSheet) => !shadowRoot.adoptedStyleSheets?.includes(s)),\n                            ...new Set([...(shadowRoot.adoptedStyleSheets || [])])\n                        ];\n                    }\n                }\n\n                this.onRender?.call?.(this, weak);\n                delete (this as any)[inRenderKey];\n            }\n        }\n\n        /**\n         *      DOM\n         */\n        disconnectedCallback(): void {\n            if (super.disconnectedCallback) {\n                super.disconnectedCallback();\n            }\n        }\n\n        /**\n         *       \n         */\n        adoptedCallback(): void {\n            if (super.adoptedCallback) {\n                super.adoptedCallback();\n            }\n        }\n\n        /**\n         *     \n         */\n        attributeChangedCallback(name: string, oldValue: string | null, newValue: string | null): void {\n            if (super.attributeChangedCallback) {\n                super.attributeChangedCallback(name, oldValue, newValue);\n            }\n        }\n    }\n\n    //  withProperties  \n    const result = withProperties(GLitElementImpl as unknown as HTMLElementConstructor<T & GLitElementInstance>);\n    CSM.set(Base, result);\n    console.log(\"result\", result);\n\n    return result as unknown as GLitElementClass<T>;\n}\n\n// ============================================\n//    \n// ============================================\n\n/**\n *      \n */\nexport type GLitElementDecorated<T extends HTMLElement = HTMLElement> = \n    InstanceType<GLitElementClass<T>>;\n\n/**\n *    observedAttributes\n */\nexport type ObservedAttributes<T extends string[]> = {\n    observedAttributes: T;\n    attributeChangedCallback(name: T[number], oldValue: string | null, newValue: string | null): void;\n};\n","import { bindWith } from \"../../lure/core/Binding\";\nimport { handleStyleChange } from \"fest/dom\";\n\n//\n// NEWER, INLINE STYLES ONLY!!!\n// string template for CSS values\nexport const S = (strings, ...values: any[])=>{\n    // extract possible reactive values\n    let props: string[] = [], vars: Map<string, any> = new Map();\n    let index = 0, counter = 0;\n    const parts: string[] = [];\n    for (const string of strings) {\n        parts.push(string);\n        const $value = values?.[index], $isValid = strings[index+1]?.trim?.()?.includes?.(\";\");\n        if ($isValid) {\n            if (typeof $value == \"object\" && ($value?.value != null || \"value\" in $value)) {\n                const varName = `--ref-${counter}`;\n                parts.push(`var(${varName})`);\n                props.push(`@property ${varName} { syntax: \"<number>\"; initial-value: ${$value?.value ?? 0}; inherits: true; };`);\n                vars.set(varName, $value);\n                counter++;\n            } else\n            if (typeof $value != \"object\" && typeof $value != \"function\") {\n                parts.push(`${$value}`);\n            }\n        }\n        index++;\n    }\n\n    // return a function that applies the style to an element\n    return [(element: any)=>{\n        element.style.cssText = parts?.join?.(\";\") ?? element.style.cssText;\n\n        // apply reactive values\n        const subs: any[] = [];\n        for (const [name, value] of vars) {\n            subs.push(bindWith(element, name, value, handleStyleChange));\n        }\n\n        // return a function that unsubscribes the reactive values\n        return ()=>{\n            for (const sub of subs) {\n                sub?.();\n            }\n        }\n    }, props, vars];\n};\n\n//\nexport const css = (strings, ...values: any[])=>{ return S(strings, ...values); }\n","import { ITask } from \"./Types\";\nimport { addEvent } from \"fest/dom\";\nimport {\n    initBackNavigation,\n    registerCloseable,\n    closeHighestPriority,\n    hasActiveCloseable,\n    ClosePriority,\n    getIgnoreNextPopState,\n    setIgnoreNextPopState\n} from \"./BackNavigation\";\n\n//\nexport const getBy = (tasks: ITask[] = [], taskId: ITask|string|any)=>{\n    return tasks.find((t)=>(taskId == t || (typeof t.taskId == \"string\" && t.taskId?.replace?.(/^#/, \"\") == (typeof taskId == \"string\" ? taskId?.replace?.(/^#/, \"\") : null))));\n}\n\n//\nexport const historyBack = (tasks: ITask[] = [])=>{\n    setIgnoreNextPopState(true);\n    history?.back?.(); const lastFocus = getFocused(tasks, false)?.taskId || \"\";\n    if (location?.hash?.trim?.()?.replace?.(/^#/, \"\")?.trim?.() != lastFocus?.trim?.()?.replace?.(/^#/, \"\")?.trim?.()) { setIgnoreNextPopState(true); history?.replaceState?.(\"\", \"\", lastFocus); }\n    return tasks;\n}\n\n//\nexport const getFocused = (tasks: ITask[] = [], includeHash: boolean = true)=>{\n    return (tasks.findLast((t)=>t.active) ?? (includeHash ? tasks?.find?.((t)=>t.taskId?.replace?.(/^#/, \"\") == location.hash?.replace?.(/^#/, \"\")) : null));\n}\n\n/**\n * Register a task with the back navigation system\n * Tasks have lower priority than modals/menus and can be closed via back gesture\n */\nexport const registerTask = (task: ITask, onClose?: () => void): (() => void) => {\n    return registerCloseable({\n        id: `task-${task.taskId?.replace?.(/^#/, \"\") ?? task.taskId}`,\n        priority: ClosePriority.TASK,\n        group: \"task\",\n        isActive: () => task.active === true,\n        close: (view?: string) => {\n            task.active = false;\n            return onClose?.() ?? false;\n            // Return false to allow the back navigation to proceed (updating the URL)\n            // since tasks are typically history-based\n            //return false;\n        }\n    }) as (() => void);\n};\n\n//\nexport const navigationEnable = (tasks: ITask[], taskEnvAction?: (task?: ITask|null)=>boolean|void)=>{\n    let processingHashChange = false;\n\n    // Initialize centralized back navigation\n    // We don't skip handler anymore, we rely on it\n    initBackNavigation({\n        preventDefaultNavigation: false,\n        pushInitialState: false\n    });\n\n    // Register a general fallback closeable for taskEnvAction\n    if (taskEnvAction) {\n        registerCloseable({\n            id: \"task-env-manager\",\n            priority: ClosePriority.VIEW, // Low priority\n            isActive: () => !!getFocused(tasks, true),\n            close: () => {\n                // If taskEnvAction returns true, it handled the close/action\n                // and wants to cancel the back navigation (return true)\n                const focused = getFocused(tasks, true);\n                if (focused && taskEnvAction(focused)) {\n                    return true;\n                }\n                return false;\n            }\n        });\n    }\n\n    // prevent behavior once...\n    addEvent(window, \"hashchange\", (ev)=>{\n        if (processingHashChange || getIgnoreNextPopState()) return;\n        processingHashChange = true;\n        try {\n            const fc = getBy(tasks, location.hash);\n            if (fc) { fc.focus = true; } else {\n                const hash = getFocused(tasks, false)?.taskId || location.hash || \"\";\n                if (location.hash?.trim?.()?.replace?.(/^#/, \"\")?.trim?.() != hash?.trim?.()?.replace?.(/^#/, \"\")?.trim?.()) {\n                    setIgnoreNextPopState(true);\n                    // Preserve existing state structure\n                    const state = history.state || {};\n                    history?.replaceState?.(state, \"\", hash);\n                };\n            };\n        } finally {\n            processingHashChange = false;\n        }\n    });\n\n    // Ensure initial state\n    if (!history.state?.backNav) {\n        setIgnoreNextPopState(true);\n        const state = history.state || {};\n        history?.replaceState?.({ ...state, backNav: true, depth: history.length }, \"\", location.hash || \"#\");\n        setIgnoreNextPopState(false);\n    }\n\n    //\n    return tasks;\n}\n","import { observe, $triggerLess } from \"fest/object\";\nimport { getBy, getFocused, registerTask } from \"./Manager\";\nimport { ITask } from \"./Types\";\nimport { ITaskOptions } from \"./Types\";\nimport { setIgnoreNextPopState } from \"./BackNavigation\";\n\n//\nexport class Task implements ITask {\n    $active: boolean = false;\n    $action: ()=>boolean|void;\n    payload: any;\n    taskId: string;\n    list?: ITask[]|null;\n    _unregisterBack?: () => void;\n\n    //\n    constructor(taskId: string, list?: ITask[]|null, state: ITaskOptions|null = null, payload: any = {}, action?: any) {\n        this.taskId = taskId;\n        this.list = list; this.payload = payload; Object.assign(this, state);\n        this.$action = action ?? (()=>{\n            if ((location.hash != this.taskId) && this.taskId) {\n                setIgnoreNextPopState(true);\n                history.replaceState(\"\", \"\", this.taskId || location.hash);\n                setIgnoreNextPopState(false);\n                return;\n            }\n        });\n        this.addSelfToList(list, true);\n    }\n\n    //\n    addSelfToList(list?: ITask[]|null, doFocus: boolean = false): ITask {\n        if (list == null) return this;\n\n        //\n        const has = getBy(list, this);\n        if (has != this) {\n            if (!has) { list?.push(makeTask(this) as any); } else { Object.assign(has, this); }\n        }\n\n        //\n        this.list = list;\n\n        //\n        if (doFocus) { this.focus = true; }\n        setIgnoreNextPopState(true);\n        history.pushState({ backNav: true }, \"\", getFocused(list, false)?.taskId || location.hash);\n        setIgnoreNextPopState(false);\n        document.dispatchEvent(new CustomEvent(\"task-focus\", { detail: this, bubbles: true, composed: true, cancelable: true }));\n\n        //\n        return this;\n    }\n\n    //\n    get active(): boolean { return !!this.$active; }\n    get order(): number { return this.list?.findIndex?.((t)=>(t == this || (typeof t.taskId == \"string\" && t.taskId == this.taskId))) ?? -1; }\n    get focus(): boolean {\n        if (!this.taskId) return false;\n        const task = this.list?.findLast?.((t)=>t.active) ?? null; if (!task) return false;\n        if (task?.taskId &&task?.taskId == this.taskId) { return true; };\n        return false;\n    }\n\n    //\n    set active(activeStatus: boolean) {\n        if (this != null && this?.$active != activeStatus) {\n            this.$active = activeStatus;\n\n            if (activeStatus) {\n                this._unregisterBack = registerTask(this);\n            } else {\n                this._unregisterBack?.();\n                this._unregisterBack = undefined;\n            }\n\n            document.dispatchEvent(new CustomEvent(\"task-focus\", { detail: getFocused(this.list ?? [], false), bubbles: true, composed: true, cancelable: true }));\n        }\n    }\n\n    //\n    set focus(activeStatus: boolean) {\n        if (activeStatus && (activeStatus != this.focus)) {\n            const index = this.order;\n            if (!this.focus && index >= 0) {\n                const last = this.list?.findLastIndex?.((t)=>t.focus) ?? -1;\n                if (index < last || last < 0)\n                    {\n                        // avoid remove and add reactive element triggering\n                        if (this.list) for (const task of this.list) {\n                            if (task != this && task?.taskId != this.taskId) {\n                                task.focus = false;\n                            }\n                        }\n                        this.list?.[$triggerLess]?.(()=>{\n                            this.list?.splice?.(index, 1); this.list?.push?.(makeTask(this) as any);\n                        })\n                        document.dispatchEvent(new CustomEvent(\"task-focus\", { detail: getFocused(this.list ?? [], false), bubbles: true, composed: true, cancelable: true }));\n                    }\n\n                //\n                this.takeAction();\n            }\n        }\n    }\n\n    //\n    takeAction(): boolean|void {\n        return this.$action?.call?.(this);\n    }\n\n    //\n    removeFromList() {\n        if (!this.list) return this;\n        const index = this.list.indexOf(getBy(this.list, this) ?? makeTask(this as any) as any) ?? -1;\n        if (index >= 0) { this.list.splice(index, 1); }\n        const list = this.list; this.list = null;\n        document.dispatchEvent(new CustomEvent(\"task-focus\", { detail: getFocused(list ?? [], false), bubbles: true, composed: true, cancelable: true }));\n        return this;\n    }\n}\n\n//\nexport const makeTask = (taskId: string|Task, list?: ITask[]|null, state: ITaskOptions|null = null, payload: any = {}, action?: any)=>{\n    if (taskId instanceof Task) return observe(taskId);\n    const task = new Task(taskId, list, state, payload, action);\n    return observe(task);\n}\n\n//\nexport const makeTasks = (createCb: any)=>{\n    const tasks = observe([]);\n    const result = createCb(tasks);\n    return tasks;\n}\n","type AnyHandler<E extends Event = Event> = (ev: E) => any;\n\ntype Hub = {\n    handlers: Set<AnyHandler>;\n    listener: (ev: Event) => void;\n    options: AddEventListenerOptions;\n};\n\nconst hubsByTarget = new WeakMap<EventTarget, Map<string, Hub>>();\n\nconst keyOf = (type: string, options: AddEventListenerOptions) => {\n    const capture = options?.capture ? \"1\" : \"0\";\n    const passive = options?.passive ? \"1\" : \"0\";\n    return `${type}|c:${capture}|p:${passive}`;\n};\n\nexport const lazyAddEventListener = <E extends Event = Event>(\n    target: EventTarget | null | undefined,\n    type: string,\n    handler: AnyHandler<E>,\n    options: AddEventListenerOptions = {}\n) => {\n    if (!target || typeof (target as any).addEventListener !== \"function\") return () => { };\n\n    // `once` is not compatible with a shared hub listener; callers should implement their own once-logic.\n    const normalized: AddEventListenerOptions = {\n        capture: Boolean(options.capture),\n        passive: Boolean(options.passive),\n    };\n\n    const key = keyOf(type, normalized);\n    let hubs = hubsByTarget.get(target);\n    if (!hubs) {\n        hubs = new Map();\n        hubsByTarget.set(target, hubs);\n    }\n\n    let hub = hubs.get(key);\n    if (!hub) {\n        const handlers = new Set<AnyHandler>();\n        const listener = (ev: Event) => {\n            for (const cb of Array.from(handlers)) {\n                try {\n                    cb(ev);\n                } catch (e) {\n                    console.warn(e);\n                }\n            }\n        };\n        hubs.set(key, hub = { handlers, listener, options: normalized });\n        (target as any).addEventListener(type, listener, normalized);\n    }\n\n    hub.handlers.add(handler as AnyHandler);\n\n    return () => {\n        const hubsNow = hubsByTarget.get(target);\n        const hubNow = hubsNow?.get(key);\n        if (!hubNow) return;\n\n        hubNow.handlers.delete(handler as AnyHandler);\n        if (hubNow.handlers.size > 0) return;\n\n        (target as any).removeEventListener(type, hubNow.listener, hubNow.options);\n        hubsNow?.delete(key);\n        if (hubsNow && hubsNow.size === 0) hubsByTarget.delete(target);\n    };\n};\n\ntype ProxiedStrategy = \"closest\" | \"bubble\";\ntype When = boolean | \"handled\";\n\ntype ProxiedConfig = {\n    strategy?: ProxiedStrategy;\n    preventDefault?: When;\n    stopPropagation?: When;\n    stopImmediatePropagation?: When;\n};\n\ntype ProxiedHub = {\n    targets: Map<HTMLElement, Set<AnyHandler>>;\n    unbindGlobal: (() => void) | null;\n    options: AddEventListenerOptions;\n    strategy: ProxiedStrategy;\n    config: ProxiedConfig;\n    dispatch: (ev: Event) => void;\n};\n\nconst proxiedByRoot = new WeakMap<EventTarget, Map<string, ProxiedHub>>();\n\nconst resolveHTMLElement = (el: any): HTMLElement | null => {\n    const resolved = (el as any)?.element ?? el;\n    return resolved instanceof HTMLElement ? resolved : null;\n};\n\nconst shouldApply = (when: When | undefined, hadMatch: boolean, hadHandled: boolean) => {\n    if (!when) return false;\n    if (when === \"handled\") return hadHandled;\n    return hadMatch;\n};\n\n/**\n * Proxied events:\n * - Installs **one** real DOM listener on `root` (per event/options/config), but only after the first element handler registers.\n * - Routes events to registered element handlers based on the composed path.\n * - Can conditionally call preventDefault/stop* only when a trigger matches (or when handled).\n */\nexport const addProxiedEvent = <E extends Event = Event>(\n    root: EventTarget | null | undefined,\n    type: string,\n    options: AddEventListenerOptions = { capture: true, passive: false },\n    config: ProxiedConfig = {}\n) => {\n    const target = root;\n    if (!target || typeof (target as any).addEventListener !== \"function\") {\n        return (_element: any, _handler: AnyHandler<E>) => () => { };\n    }\n\n    const normalized: AddEventListenerOptions = {\n        capture: Boolean(options.capture),\n        passive: Boolean(options.passive),\n    };\n    const strategy: ProxiedStrategy = config.strategy ?? \"closest\";\n\n    const key = `${type}|c:${normalized.capture ? \"1\" : \"0\"}|p:${normalized.passive ? \"1\" : \"0\"}|s:${strategy}|pd:${String(config.preventDefault ?? \"\")}|sp:${String(config.stopPropagation ?? \"\")}|sip:${String(config.stopImmediatePropagation ?? \"\")}`;\n\n    let hubs = proxiedByRoot.get(target);\n    if (!hubs) {\n        hubs = new Map();\n        proxiedByRoot.set(target, hubs);\n    }\n\n    let hub = hubs.get(key);\n    if (!hub) {\n        const targets = new Map<HTMLElement, Set<AnyHandler>>();\n\n        const dispatch = (ev: Event) => {\n            let hadMatch = false;\n            let hadHandled = false;\n\n            const callSet = (set: Set<AnyHandler> | undefined) => {\n                if (!set || set.size === 0) return;\n                hadMatch = true;\n                for (const cb of Array.from(set)) {\n                    const r = cb(ev);\n                    if (r) hadHandled = true;\n                }\n            };\n\n            const path = (ev as any)?.composedPath?.() as any[] | undefined;\n            if (Array.isArray(path)) {\n                if (strategy === \"closest\") {\n                    for (const n of path) {\n                        const el = resolveHTMLElement(n);\n                        if (!el) continue;\n                        const set = targets.get(el);\n                        if (!set) continue;\n                        callSet(set);\n                        break;\n                    }\n                } else {\n                    for (const n of path) {\n                        const el = resolveHTMLElement(n);\n                        if (!el) continue;\n                        callSet(targets.get(el));\n                    }\n                }\n            } else {\n                let cur = resolveHTMLElement((ev as any)?.target) as HTMLElement | null;\n                while (cur) {\n                    const set = targets.get(cur);\n                    if (set) {\n                        callSet(set);\n                        if (strategy === \"closest\") break;\n                    }\n                    const r = cur.getRootNode?.() as (ShadowRoot | Document | null);\n                    cur = (cur.parentElement || (r instanceof ShadowRoot ? r.host : null)) as HTMLElement | null;\n                }\n            }\n\n            if (shouldApply(config.preventDefault, hadMatch, hadHandled)) (ev as any)?.preventDefault?.();\n            if (shouldApply(config.stopImmediatePropagation, hadMatch, hadHandled)) (ev as any)?.stopImmediatePropagation?.();\n            if (shouldApply(config.stopPropagation, hadMatch, hadHandled)) (ev as any)?.stopPropagation?.();\n        };\n\n        hub = { targets, unbindGlobal: null, options: normalized, strategy, config, dispatch };\n        hubs.set(key, hub);\n    }\n\n    return (element: any, handler: AnyHandler<E>) => {\n        const el = resolveHTMLElement(element);\n        if (!el) return () => { };\n\n        // Attach the single real DOM listener only when the first trigger registers.\n        if (hub!.targets.size === 0 && !hub!.unbindGlobal) {\n            hub!.unbindGlobal = lazyAddEventListener(target, type, hub!.dispatch, hub!.options);\n        }\n\n        let set = hub!.targets.get(el);\n        if (!set) {\n            set = new Set();\n            hub!.targets.set(el, set);\n        }\n        set.add(handler as AnyHandler);\n\n        return () => {\n            const hubsNow = proxiedByRoot.get(target);\n            const h = hubsNow?.get(key);\n            if (!h) return;\n\n            const resolved = resolveHTMLElement(element);\n            if (!resolved) return;\n\n            const s = h.targets.get(resolved);\n            if (!s) return;\n            s.delete(handler as AnyHandler);\n            if (s.size === 0) h.targets.delete(resolved);\n\n            if (h.targets.size === 0) {\n                h.unbindGlobal?.();\n                h.unbindGlobal = null;\n                hubsNow?.delete(key);\n                if (hubsNow && hubsNow.size === 0) proxiedByRoot.delete(target);\n            }\n        };\n    };\n};\n","import { doBorderObserve, doContentObserve, addEvents, handleStyleChange, iterateContentBox, addEvent } from \"fest/dom\";\nimport { addToCallChain, numberRef, stringRef, booleanRef } from \"fest/object\";\nimport { lazyAddEventListener } from \"./LazyEvents\";\nimport { unref } from \"fest/core\";\nimport { toRef } from \"fest/core\";\n\n//\nconst ROOT = typeof document != \"undefined\" ? document?.documentElement : null;\nconst SELECTOR = \"ui-modal[type=\\\"contextmenu\\\"], ui-button, ui-taskbar, ui-navbar, ui-statusbar, button, label, input, ui-longtext, ui-focustext, ui-row-select, ui-row-button, .u2-input, .ui-input\";\nconst $set = (rv, key, val)=>{ if (rv?.deref?.() != null) { return (rv.deref()[key] = val); }; }\n\n//\ntype RefBool = { value: boolean };\ntype Area = {\n    left  : number;\n    top   : number;\n    right : number;\n    bottom: number;\n    width : number;\n    height: number;\n};\n\n//\ninterface TriggerOptions {\n    root?: any;\n    selector?: string;     // ,      \"dispose\"\n    closeEvents?: string[]; //    \"dispose\"\n    mouseLeaveDelay?: number; //   mouseleave\n}\n\n//\nexport function makeInterruptTrigger(\n    except: any = null,\n    ref: RefBool|Function = booleanRef(false),\n    closeEvents: string[] = [\"pointerdown\", \"click\", \"contextmenu\", \"scroll\"],\n    element: any = document?.documentElement\n) {\n    if (!element) return () => { };\n    const wr = new WeakRef(ref);\n    const close = typeof ref === \"function\" ? ref : (ev) => { (!(except?.contains?.(ev?.target) || ev?.target == (except?.element ?? except)) || !except) ? $set(wr, \"value\", false) : false; };\n    const listening = closeEvents.map((event) =>\n        lazyAddEventListener(element, event, close as any, { capture: false, passive: false })\n    );\n    const dispose = () => listening.forEach((ub) => ub?.());\n    addToCallChain(ref, Symbol.dispose, dispose);\n    return dispose;\n}\n\n//\nexport const doObserve = (holder, parent)=>{\n    if (!holder) { throw Error(\"Element is null...\"); };\n    if ( parent) { doContentObserve(parent); };\n    doBorderObserve(holder);\n}\n\n//\nexport const makeShiftTrigger = (callable, newItem?)=> ((evc)=>{\n    const ev = evc;\n    newItem ??= ev?.target ?? newItem;\n    if (!newItem.dataset.dragging) {\n        const n_coord: [number, number] = [ev.clientX, ev.clientY];\n        if (ev?.pointerId >= 0) {\n            (newItem as HTMLElement)?.setPointerCapture?.(ev?.pointerId);\n        };\n\n        //\n        const shifting = ((evc_l: any)=>{\n            const ev_l = evc_l;\n            ev_l?.preventDefault?.();\n            if (ev_l?.pointerId == ev?.pointerId) {\n                const coord: [number, number] = [evc_l.clientX, evc_l.clientY];\n                const shift: [number, number] = [coord[0] - n_coord[0], coord[1] - n_coord[1]];\n                if (Math.hypot(...shift) > 2) {\n                    newItem?.style?.setProperty?.(\"will-change\", \"inset, transform, translate, z-index\");\n\n                    //\n                    unbind?.(ev_l);\n                    callable?.(ev);\n                }\n            }\n        });\n\n        //\n        const releasePointer = ((evc_l)=>{\n            const ev_l = evc_l;\n            if (ev_l?.pointerId == ev?.pointerId) {\n                (newItem as HTMLElement)?.releasePointerCapture?.(ev?.pointerId);\n                unbind?.(ev_l);\n            }\n        });\n\n        //\n        const handler = {\n            \"pointermove\": shifting,\n            \"pointercancel\": releasePointer,\n            \"pointerup\": releasePointer\n        }\n\n        //\n        const unbind = ((evc_l)=>{\n            const ev_l = evc_l;\n            if (ev_l?.pointerId == ev?.pointerId) {\n                bindings?.forEach(binding => binding?.());\n            }\n        });\n\n        //\n        const bindings = addEvents(ROOT, handler);\n    }\n});\n\n//\nfunction deepContains(container: Node, target: Node): boolean {\n    let node: Node | null = target;\n\n    while (node) {\n        if (node === container) return true;\n\n        //\n        const anyNode = node as any;\n        if (anyNode.assignedSlot) {\n            node = anyNode.assignedSlot as Node;\n            continue;\n        }\n\n        //\n        if (node.parentNode) {\n            node = node.parentNode;\n            continue;\n        }\n\n        //\n        const root = (node as any).getRootNode?.();\n        if (root && (root as ShadowRoot).host) {\n            node = (root as ShadowRoot).host;\n        } else {\n            node = null;\n        }\n    }\n\n    return false;\n}\n\n//\nfunction isInside(target: Event | Node, container: Element): boolean {\n    if ('composedPath' in (target as Event) && typeof (target as Event).composedPath === 'function') {\n        return (target as Event).composedPath().includes(container);\n    }\n\n    //\n    const node = (target as any).target ? (target as any).target as Node : target as Node;\n    return node ? deepContains(container, node) : false;\n}\n\n//\nexport function makeClickOutsideTrigger(ref: RefBool, except: any = null, element: any, options: TriggerOptions = {}) {\n    const {\n        root = typeof document != \"undefined\" ? document?.documentElement : null,\n        closeEvents = [\"scroll\", \"click\", \"pointerdown\"],\n        mouseLeaveDelay = 100\n    } = options;\n\n    //\n    let mouseLeaveTimer: any = null;\n\n    //\n    const wr = new WeakRef(ref);\n    function onMouseLeave() { mouseLeaveTimer = setTimeout(() => { $set(wr, \"value\", false); }, mouseLeaveDelay); }\n    function onMouseEnter() { if (mouseLeaveTimer) clearTimeout(mouseLeaveTimer); }\n    function onDisposeEvent(ev: Event) { if (!isInside(ev, element?.element ?? element) && !isInside(ev, except?.element ?? except)) $set(wr, \"value\", false); }\n    function onPointerDown(ev: Event) {\n        const t = ev;\n        if (!isInside(t, element?.element ?? element) && !isInside(t, except?.element ?? except)) $set(wr, \"value\", false);\n    }\n\n    //\n    const listening = [\n        ...addEvents(root, Object.fromEntries(closeEvents.map(event => [event, onDisposeEvent]))),\n        addEvent(root, \"pointerdown\", onPointerDown)\n    ];\n    if (element) {\n        //listening.push(addEvent(element, \"mouseleave\", onMouseLeave), addEvent(element, \"mouseenter\", onMouseEnter));\n    }\n\n    //\n    function destroy() {\n        listening.forEach(ub=>ub?.());\n    }\n\n    //\n    addToCallChain(ref, Symbol.dispose, destroy);\n    return ref;\n}\n\n//\nexport const OOBTrigger = (element, ref, selector?, root = typeof document != \"undefined\" ? document?.documentElement : null) => {\n    ref = toRef(ref);\n    const checker = (ev) => {\n        let $ref = unref(ref);\n        const target = selector ? (ev?.target?.matches?.(selector) ? ev?.target : (ev?.target ?? root)?.querySelector?.(selector)) : ev?.target;\n        if (!target || (element != target)) { $ref.value = false; }\n    }\n    const cancel = () => { root?.removeEventListener?.(\"click\", checker); }\n    if (root) root.addEventListener?.(\"click\", checker); return cancel;\n}\n","import { getBoundingOrientRect, orientOf, addEvent, addEvents, hasParent, removeEvent } from \"fest/dom\";\nimport { cvt_cs_to_os, withCtx } from \"fest/core\";\nimport { Vector2D, vector2Ref } from \"fest/lure\";\n\n//\nexport class DecorWith {\n    #addition: any;\n\n    // needs prototype extends with Reflect\n    constructor(addition) { this.#addition = addition; }\n    get(target, name) { return withCtx(this.#addition, this.#addition?.[name]) ?? withCtx(target, target?.[name]); }\n    set(target, name, val) {\n        if (!Reflect.set(target, name, val)) {\n            this.#addition[name] = val;\n        }\n        return true;\n    }\n\n    ownKeys(target) { return [...(Reflect.ownKeys(target) ?? []), ...(Reflect.ownKeys(this.#addition) ?? [])]; }\n    getOwnPropertyDescriptor(target, name) { return Reflect.getOwnPropertyDescriptor(target, name) ?? Reflect.getOwnPropertyDescriptor(this.#addition, name); }\n    getPrototypeOf(target) { return Reflect.getPrototypeOf(target) ?? Reflect.getPrototypeOf(this.#addition); }\n    setPrototypeOf(target, proto) { return Reflect.setPrototypeOf(target, proto) ?? Reflect.setPrototypeOf(this.#addition, proto); }\n    isExtensible(target) { return Reflect.isExtensible(target) ?? Reflect.isExtensible(this.#addition); }\n    preventExtensions(target) { return Reflect.preventExtensions(target) ?? Reflect.preventExtensions(this.#addition); }\n    defineProperty(target, name, desc) { return Reflect.defineProperty(this.#addition, name, desc) ?? Reflect.defineProperty(target, name, desc); }\n    deleteProperty(target, name) { return Reflect.deleteProperty(this.#addition, name) ?? Reflect.deleteProperty(target, name); }\n    //construct(target, args, newTarget) { return Reflect.construct(this.#addition, args, newTarget) ?? Reflect.construct(target, args, newTarget); }\n}\n\n//\nexport const elementPointerMap = new WeakMap<any, any>();\nexport const agWrapEvent = (cb)=>{\n\n    //\n    const wpb = (ev: any)=>{\n        const el = (ev?.target?.matches?.(\".ui-orientbox\") ? ev?.target : null) || ev?.target?.closest?.(\".ui-orientbox\");\n        if (!el) { return cb(ev); }; //\n\n        // @ts-ignore\n        let {pointerCache, pointerMap} = elementPointerMap?.getOrInsert?.(el, { pointerCache: new Map<number, any>(), pointerMap: new Map<number, any>() });\n\n        //const zoom: number = zoomOf(ev?.target || el) || 1;\n        const coord: [number, number] = [(ev?.clientX || 0), (ev?.clientY || 0)];\n        const cache: any = pointerCache?.getOrInsert?.(ev?.pointerId || 0, {\n            client: coord,\n            orient: null,\n            boundingBox: null,\n            movement: vector2Ref(0, 0)\n        });\n\n        //\n        cache.delta  = [coord[0] - cache.client[0], coord[1] - cache.client[1]];\n        cache.movement.x.value = cache.delta[0];\n        cache.movement.y.value = cache.delta[1];\n        cache.orient = null, cache.client = coord;\n\n        //\n        const pointer = pointerMap?.getOrInsert?.(ev?.pointerId || 0, {\n            type: (ev?.type||\"pointer\"),\n            event: ev,\n            target: ev?.target || el,\n            cs_box: [el?.offsetWidth || 1, el?.offsetHeight || 1],\n            cap_element: null,\n\n            //\n            get client() { return cache.client; },\n            get orient() { return cache.orient ??= cvt_cs_to_os([...(pointer.client || cache.client)] as [number, number], [el?.offsetWidth || 1, el?.offsetHeight || 1], orientOf(ev.target || el) || 0); },\n            get movement() { return [cache.movement.x.value, cache.movement.y.value]; },\n            get boundingBox() { return (cache.boundingBox ??= getBoundingOrientRect(ev?.target || el, orientOf(ev.target || el) || 0)); },\n\n            //\n            capture(element = ev?.target || el) { return (pointer.cap_element = element?.setPointerCapture?.(ev?.pointerId || 0)); },\n            release(element = null) {\n                (element || pointer.cap_element || ev?.target || el)?.releasePointerCapture?.(ev?.pointerId || 0);\n                pointer.cap_element = null;\n            },\n        });\n\n        //\n        Object.assign(pointer, {\n            type: (ev?.type||\"pointer\"),\n            event: ev,\n            target: ev?.target || el,\n            cs_box: [el?.offsetWidth || 1, el?.offsetHeight || 1],\n            pointerId: ev?.pointerId || 0\n        });\n\n        //\n        if (ev?.type == \"contextmenu\" || ev?.type == \"click\" || ev?.type == \"pointerup\" || ev?.type == \"pointercancel\") {\n            pointerMap?.delete?.(ev?.pointerId || 0);\n            pointerCache?.delete?.(ev?.pointerId || 0);\n            if (ev?.type == \"pointercancel\") {\n                pointer?.release?.();\n            }\n        };\n\n        //\n        if (pointer && ev) { return cb(new Proxy(ev, new DecorWith(pointer))); };\n    }\n\n    //\n    return wpb;\n};\n\n//\nclass PointerEdge {\n    pointer: [number, number] = [0, 0];\n    results: any;\n\n    //\n    constructor(pointer: [number, number] = [0, 0]) {\n        this.pointer = pointer;\n        this.results = { left: false, top: false, bottom: false, right: false };\n    }\n\n    //\n    get left() { const current = Math.abs(this.pointer[0] - 0) < 10; return (this.results.left = current); }\n    get top () { const current = Math.abs(this.pointer[1] - 0) < 10; return (this.results.top  = current); }\n    get right () { const current = Math.abs(this.pointer[0] - globalThis.innerWidth)  < 10; return (this.results.right  = current); }\n    get bottom() { const current = Math.abs(this.pointer[1] - globalThis.innerHeight) < 10; return (this.results.bottom = current); }\n}\n\n//\ninterface EvStub { pointerId: number; }\ninterface HoldingElement {\n    shifting?: [number, number];\n    modified?: [number, number];\n    element?: WeakRef<HTMLElement>;\n    result?: [any, any];\n    propertyName?: string;\n}\n\n//\ninterface PointerObject {\n    id: number;\n    down?: [number, number],\n    event?: MouseEvent | PointerEvent | EvStub;\n    edges?: PointerEdge;\n    current: [number, number],\n    holding?: HoldingElement[];\n    movement: [number, number];\n};\n\n//\nconst preventedPointers = new Map<number, any>();\nexport const clickPrevention = (element, pointerId = 0)=>{\n    if (preventedPointers.has(pointerId)) { return; }\n\n    //\n    const rmev = ()=>{\n        preventedPointers.delete(pointerId);\n        dce?.forEach?.(unbind => unbind?.());\n        ece?.forEach?.(unbind => unbind?.());\n    }\n\n    //\n    const preventClick = (e: PointerEvent | MouseEvent | CustomEvent | any) => {\n        if (e?.pointerId == pointerId || e?.pointerId == null || pointerId == null || pointerId < 0) {\n            //e.stopPropagation();\n            e.preventDefault();\n            preventedPointers.set(pointerId, true);\n            rmev();\n        } else {\n            preventedPointers.delete(pointerId);\n        }\n    };\n\n    //\n    const emt: [(e: PointerEvent | MouseEvent | CustomEvent | any) => any, AddEventListenerOptions] = [preventClick, {once: true}];\n    const doc: [(e: PointerEvent | MouseEvent | CustomEvent | any) => any, AddEventListenerOptions] = [preventClick, {once: true, capture: true}];\n\n    //\n    const dce = addEvents(document.documentElement, {\n        \"click\": doc,\n        \"pointerdown\": doc,\n        \"contextmenu\": doc\n    });\n    const ece = addEvents(element, {\n        \"click\": emt,\n        \"pointerdown\": emt,\n        \"contextmenu\": emt\n    });\n    setTimeout(rmev, 10);\n}\n\n//\nlet PointerEventDrag: any = null;\nif (typeof PointerEvent != \"undefined\") {\n    PointerEventDrag = class PointerEventDrag extends PointerEvent {\n        #holding: any;\n        constructor(type, eventInitDict) { super(type, eventInitDict); this.#holding = eventInitDict?.holding; }\n        get holding() { return this.#holding; }\n        get event() { return this.#holding?.event; }\n        get result() { return this.#holding?.result; }\n        get shifting() { return this.#holding?.shifting; }\n        get modified() { return this.#holding?.modified; }\n        get canceled() { return this.#holding?.canceled; }\n        get duration() { return this.#holding?.duration; }\n        get element() { return this.#holding?.element?.deref?.() ?? null; }\n        get propertyName() { return this.#holding?.propertyName ?? \"drag\"; }\n    }\n} else {\n    PointerEventDrag = class PointerEventDrag {\n        #holding: any;\n        constructor(type, eventInitDict) { this.#holding = eventInitDict?.holding; }\n        get holding() { return this.#holding; }\n    }\n}\n\n//\nexport const draggingPointerMap = new WeakMap<any, any>();\nexport const grabForDrag = (\n    em,\n    ex: PointerEvent|any = { pointerId: 0, pointerType: \"mouse\" },\n    {\n        shifting = [0, 0],\n        result   = [{value: 0}, {value: 0}]\n    } = {}\n) => {\n    let last: any = ex;\n    let frameTime = 0.01, lastLoop = performance.now(), thisLoop;\n    const filterStrength  = 100;\n    const computeDuration = () => {\n        var thisFrameTime = (thisLoop=performance.now()) - lastLoop;\n        frameTime += (thisFrameTime - frameTime) / filterStrength;\n        lastLoop = thisLoop;\n        return frameTime;\n    }\n\n    //\n    const hm: any = {\n        result,\n        movement: [...(ex?.movement || [0, 0])],\n        shifting: [...shifting],\n        modified: [...shifting],\n        canceled: false,\n        duration: frameTime,\n        element: new WeakRef(em),\n        client: null///[0, 0]\n    };\n\n    //\n    const moveEvent = [/*agWrapEvent*/((evc)=>{\n        if (ex?.pointerId == evc?.pointerId) {\n            evc?.preventDefault?.();\n            if (hasParent(evc?.target, em)) {\n                const client = [...(evc?.client  || [evc?.clientX || 0, evc?.clientY || 0] || [0, 0])]; hm.duration = computeDuration();\n                hm.movement  = [...(hm.client ? [client?.[0] - (hm.client?.[0] || 0), client?.[1] - (hm.client?.[1] || 0)] : [0, 0])];\n                hm.client    = client;\n                hm.shifting[0] +=  hm.movement[0] || 0                   , hm.shifting[1] +=  hm.movement[1] || 0;\n                hm.modified[0]  = (hm.shifting[0] ?? hm.modified[0]) || 0, hm.modified[1]  = (hm.shifting[1] ?? hm.modified[1]) | 0;\n                em?.dispatchEvent?.(new PointerEventDrag(\"m-dragging\", {\n                    ...evc,\n                    bubbles: true,\n                    holding: hm,\n                    event: evc,\n                }));\n                if (hm?.result?.[0] != null) hm.result[0].value = hm.modified[0] || 0;\n                if (hm?.result?.[1] != null) hm.result[1].value = hm.modified[1] || 0;\n                if (hm?.result?.[2] != null) hm.result[2].value = 0;\n            }\n        }\n    }), {capture: true}];\n\n    // @ts-ignore\n    const promised = Promise.withResolvers();\n    const releaseEvent = [/*agWrapEvent*/((evc)=>{\n        if (ex?.pointerId == evc?.pointerId) {\n            const elm = em?.element || em;\n            if (hasParent(evc?.target, elm) || evc?.currentTarget?.contains?.(elm) || evc?.target == elm) {\n                if (evc?.type == \"pointerup\") { clickPrevention(elm, evc?.pointerId); };\n\n                //\n                queueMicrotask(() => promised?.resolve?.(result));\n                bindings?.forEach?.(binding => binding?.());\n                elm?.releaseCapturePointer?.(evc?.pointerId);\n                elm?.dispatchEvent?.(new PointerEventDrag(\"m-dragend\", { ...evc, bubbles: true, holding: hm, event: evc }));\n                hm.canceled = true; try { ex.pointerId = -1; } catch (_) { /* noop */ }\n            }\n        }\n    }), {capture: true}];\n\n    //\n    let bindings: any = null;\n    clickPrevention(em, ex?.pointerId);\n    queueMicrotask(() => {\n        if (em?.dispatchEvent?.(new PointerEventDrag(\"m-dragstart\", { ...ex, bubbles: true, holding: hm, event: ex }))) {\n            //ex?.capture?.(em);\n            em?.setPointerCapture?.(ex?.pointerId);\n\n            //\n            bindings = addEvents(em, {\n                \"pointermove\": moveEvent,\n                \"pointercancel\": releaseEvent,\n                \"pointerup\": releaseEvent\n            });\n\n            //\n            bindings?.push?.(...addEvents(document.documentElement, {\n                \"pointercancel\": releaseEvent,\n                \"pointerup\": releaseEvent\n            }));\n        } else { hm.canceled = true; }\n    });\n\n    //\n    return promised?.promise ?? result;\n};\n\n//\nexport const bindDraggable = (elementOrEventListener, onEnd:any = ()=>{}, draggable: any|null = [{value: 0}, {value: 0}], shifting: any = [0, 0])=>{\n    if (!draggable) { return; }\n    const process = (ev, el)=>grabForDrag(el ?? elementOrEventListener, ev, {result: draggable, shifting: typeof shifting == \"function\" ? shifting?.(draggable) : shifting})?.then?.(onEnd);\n\n    //\n    if (typeof elementOrEventListener?.addEventListener == \"function\") { addEvent(elementOrEventListener, \"pointerdown\", process); } else\n    if (typeof elementOrEventListener == \"function\")  { elementOrEventListener(process); } else\n    { throw new Error(\"bindDraggable: elementOrEventListener is not a function or an object with addEventListener\"); }\n\n    //\n    const dispose = ()=>{ if (typeof elementOrEventListener?.removeEventListener == \"function\") { removeEvent(elementOrEventListener, \"pointerdown\", process); } };\n    return { draggable, dispose, process };\n}\n","import { setStyleProperty, RAFBehavior, ROOT } from \"fest/dom\";\nimport { makeShiftTrigger, doObserve } from \"./Trigger\";\nimport { bindDraggable } from \"./PointerAPI\";\n\n//\n//import {  E  } from \"fest/lure\";\nimport { numberRef, affected } from \"fest/object\";\nimport { Vector2D, vector2Ref, Rect2D, clampPointToRect, createRect2D } from \"fest/lure\";\n\n//\ninterface DragHandlerOptions {\n    handler?: HTMLElement;\n    constraints?: {\n        bounds?: Rect2D;      // Drag within these bounds\n        centerOffset?: Vector2D; // Offset from center for bounds checking\n        snapToGrid?: { size: Vector2D, offset: Vector2D }; // Grid snapping\n    };\n}\n\n//\nconst _LOG_ = (...args)=>{ console.log(...args); return args?.[0]; };\n\n//\nexport class DragHandler {\n    #holder: HTMLElement;\n    #dragging: Vector2D;\n    #raf = 0;\n    #pending: Vector2D;\n    #options?: DragHandlerOptions;\n    #subscriptions?: Array<() => void>;\n\n    // @ts-ignore\n    get #parent() { return this.#holder.offsetParent ?? this.#holder?.host ?? ROOT; }\n\n    //\n    constructor(holder, options: DragHandlerOptions) {\n        if (!holder) { throw Error(\"Element is null...\"); }\n        doObserve(this.#holder = holder, this.#parent);\n        this.#dragging = vector2Ref(0, 0);\n        this.#pending = vector2Ref(0, 0);\n        this.#options = options;\n        setStyleProperty(this.#holder, \"--drag-x\", 0);\n        setStyleProperty(this.#holder, \"--drag-y\", 0);\n        this.#attachObservers();\n        if (options) this.draggable(options);\n    }\n\n    //\n    #queueFrame(x = 0, y = 0) {\n        let constrainedX = x || 0;\n        let constrainedY = y || 0;\n\n        // Apply constraints if specified\n        if (this.#options?.constraints?.bounds) {\n            const bounds = this.#options.constraints.bounds;\n            const centerOffset = this.#options.constraints.centerOffset || vector2Ref(0, 0);\n\n            // Calculate element bounds for constraint checking\n            const elementSize = vector2Ref(this.#holder.offsetWidth, this.#holder.offsetHeight);\n            const elementBounds = createRect2D(constrainedX, constrainedY, elementSize.x, elementSize.y);\n\n            // Apply bounds constraints\n            const constrainedPos = clampPointToRect(\n                new Vector2D(constrainedX + centerOffset.x.value, constrainedY + centerOffset.y.value),\n                bounds\n            );\n\n            constrainedX = constrainedPos.x.value - centerOffset.x.value;\n            constrainedY = constrainedPos.y.value - centerOffset.y.value;\n        }\n\n        // Apply grid snapping if specified\n        if (this.#options?.constraints?.snapToGrid) {\n            const { size: gridSize, offset: gridOffset } = this.#options.constraints.snapToGrid;\n            constrainedX = Math.round((constrainedX - gridOffset.x.value) / gridSize.x.value) * gridSize.x.value + gridOffset.x.value;\n            constrainedY = Math.round((constrainedY - gridOffset.y.value) / gridSize.y.value) * gridSize.y.value + gridOffset.y.value;\n        }\n\n        this.#pending.x.value = constrainedX;\n        this.#pending.y.value = constrainedY;\n\n        if (this.#raf) { return; }\n        this.#raf = requestAnimationFrame(() => {\n            this.#raf = 0;\n            const dx = this.#pending.x.value;\n            const dy = this.#pending.y.value;\n\n            //\n            //setStyleProperty(this.#holder, \"--drag-x\", dx || 0);\n            //setStyleProperty(this.#holder, \"--drag-y\", dy || 0);\n            //setStyleProperty(this.#holder, \"transform\", `translate3d(calc(var(--drag-x, 0) * 1px), calc(var(--drag-y, 0) * 1px), 0px)`);\n\n            // CSS variables slows down the animation, so we use transform instead\n            setStyleProperty(this.#holder, \"transform\", `translate3d(\n                clamp(calc(-1px * var(--shift-x, 0)), ${dx || 0}px, calc(100cqi - 100% - var(--shift-x, 0) * 1px)),\n                clamp(calc(-1px * var(--shift-y, 0)), ${dy || 0}px, calc(100cqb - 100% - var(--shift-y, 0) * 1px)),\n                0px)`?.trim?.()?.replaceAll?.(/\\s+/g, \" \")?.replaceAll?.(/\\n+/g, \" \")?.trim?.() ?? \"\");\n        });\n    }\n\n    #attachObservers() {\n        if (this.#subscriptions) { return; }\n        const emit = () => {\n            this.#queueFrame(\n                this.#dragging.x.value,\n                this.#dragging.y.value\n            );\n        };\n        this.#subscriptions = [\n            affected(this.#dragging.x, emit),\n            affected(this.#dragging.y, emit),\n        ];\n        emit();\n    }\n\n    //\n    draggable(options: DragHandlerOptions) {\n        const handler = options.handler ?? this.#holder;\n        const dragging = this.#dragging;\n        this.#attachObservers();\n\n        //\n        const weak        = new WeakRef(this.#holder);\n        const binding     = (grabAction) => handler.addEventListener(\"pointerdown\", makeShiftTrigger((ev)=>grabAction(ev, this.#holder), this.#holder));\n        const dragResolve = (dragging)   => {\n            const holder = weak?.deref?.() as any;\n            holder?.style?.removeProperty?.(\"will-change\");\n            queueMicrotask(()=>{\n                holder?.removeAttribute?.(\"data-dragging\");\n                holder?.style?.removeProperty?.(\"transform\");\n            });\n\n            //\n            const box = /*getBoundingOrientRect(holder) ||*/ holder?.getBoundingClientRect?.();\n            this.#dragging.x.value = 0;\n            this.#dragging.y.value = 0;\n            this.#queueFrame(0, 0);\n\n            //\n            setStyleProperty(holder, \"--shift-x\", (box?.left || 0));\n            setStyleProperty(holder, \"--shift-y\", (box?.top  || 0));\n        }\n\n        //\n        // Convert Vector2D to array format for bindDraggable compatibility\n        const draggingArray = [this.#dragging.x, this.#dragging.y];\n        return bindDraggable(binding, dragResolve, draggingArray, ()=>{\n            const holder = weak?.deref?.() as any;\n            holder?.setAttribute?.(\"data-dragging\", \"\");\n            holder?.style?.setProperty(\"will-change\", \"inset, translate, transform, opacity, z-index\");\n            this.#queueFrame(this.#dragging.x.value, this.#dragging.y.value);\n            return [0, 0];\n        });\n    }\n}\n\n//\nexport default DragHandler;\n","import { bbh, bbw, cbh, cbw, ROOT, type InteractStatus, RAFBehavior } from \"fest/dom\";\nimport { makeShiftTrigger, doObserve } from \"./Trigger\";\nimport { clamp } from \"fest/core\";\n\n//\nimport { numberRef } from \"fest/object\";\nimport { E } from \"../../lure/node/Bindings\";\nimport { bindDraggable } from \"./PointerAPI\";\nimport { Vector2D, vector2Ref } from \"fest/lure\";\n\n//\nexport class ResizeHandler {\n    #holder: HTMLElement;\n    #resizing: Vector2D;\n\n    // @ts-ignore\n    get #parent() { return this.#holder.offsetParent ?? this.#holder?.host ?? ROOT; }\n\n    //\n    constructor(holder, options?: any) {\n        if (!holder) { throw Error(\"Element is null...\"); }\n        doObserve(this.#holder = holder, this.#parent); this.#resizing = vector2Ref(0, 0);\n        if (options) this.resizable(options);\n    }\n\n    //\n    limitResize(real, virtual, holder, container) {\n        const widthDiff  = cbw(holder) - (bbw(holder) - (this.#resizing.x.value || 0));\n        const heightDiff = cbh(holder) - (bbh(holder) - (this.#resizing.y.value || 0));\n\n        // if relative of un-resized to edge corner max-size\n        // discount of dragging offset!\n        real[0] = clamp(0, virtual?.[0] || 0, widthDiff) || 0;\n        real[1] = clamp(0, virtual?.[1] || 0, heightDiff) || 0;\n        return real;\n    }\n\n    // TODO! Resizing v2 (full reworking for performance)\n    resizable(options) {\n        const handler  = options.handler ?? this.#holder, status: InteractStatus = { pointerId: -1 };\n        const resizing = this.#resizing, weak = new WeakRef(this.#holder), self_w = new WeakRef(this);\n\n        //\n        const dragResolve = (dragging) => {\n            const holder = weak?.deref?.() as any;\n            holder?.style?.removeProperty?.(\"will-change\");\n            //holder?.style?.setProperty(\"--resize-x\", \"0\");\n            //holder?.style?.setProperty(\"--resize-y\", \"0\");\n            queueMicrotask(()=>{\n                holder?.removeAttribute?.(\"data-resizing\");\n            });\n        };\n\n        //\n        const binding  = (grabAction)=>handler.addEventListener(\"pointerdown\", makeShiftTrigger((ev)=>grabAction(ev, this.#holder), this.#holder));\n        const initDrag = ()=>{\n            const starting = [this.#resizing.x.value || 0, this.#resizing.y.value || 0];\n            const holder = weak?.deref?.() as any;\n            const parent = this.#parent;\n            self_w?.deref?.()?.limitResize?.(starting, starting, holder, parent)\n            holder?.setAttribute?.(\"data-resizing\", \"\");\n            return starting;\n        };\n\n        //\n        // Convert Vector2D to array format for bindDraggable compatibility\n        const resizingArray = [this.#resizing.x, this.#resizing.y];\n        E(this.#holder, { style: {\n            \"--resize-x\": this.#resizing.x,\n            \"--resize-y\": this.#resizing.y\n        } });\n\n        //\n        return bindDraggable(binding, dragResolve, resizingArray, initDrag);\n    }\n}\n\n//\nexport default ResizeHandler;\n","import { addEvent, removeEvent, setStyleProperty, getBoundingOrientRect } from \"fest/dom\";\nimport { makeShiftTrigger } from \"./Trigger\";\nimport { bindDraggable } from \"./PointerAPI\";\nimport {\n    Vector2D, vector2Ref, Rect2D, createRect2D,\n    rectCenter, rectContainsPoint, rectIntersects, rectArea,\n    clampPointToRect, pointToRectDistance, addVector2D, subtractVector2D\n} from \"fest/lure\";\nimport { numberRef, affected } from \"fest/object\";\n\nexport interface SelectionOptions {\n    target?: HTMLElement;      // Element to attach selection to (default: document.body)\n    minSize?: Vector2D;        // Minimum selection size\n    maxSize?: Vector2D;        // Maximum selection size\n    aspectRatio?: number;      // Fixed aspect ratio\n    snapToGrid?: { size: Vector2D, offset: Vector2D }; // Grid snapping\n    bounds?: Rect2D;           // Selection bounds\n    style?: {\n        border?: string;\n        background?: string;\n        borderRadius?: string;\n        zIndex?: number;\n    };\n    showHandles?: boolean;     // Show resize handles\n    onSelect?: (rect: Rect2D) => void;    // Selection callback\n    onChange?: (rect: Rect2D) => void;    // Change callback\n    onCancel?: () => void;     // Cancel callback\n}\n\n/**\n * Selection controller for creating snipping rectangles on screen/canvas\n * Supports drag-to-create, resize, constraints, and grid snapping\n */\nexport class SelectionController {\n    private target: HTMLElement;\n    private options: SelectionOptions;\n    private selectionRect?: Rect2D;\n    private overlayElement?: HTMLElement;\n    private isActive = false;\n    private startPoint?: Vector2D;\n    private currentPoint?: Vector2D;\n    private dragStart?: Vector2D;\n    private resizeHandle?: string; // 'nw', 'ne', 'sw', 'se', 'n', 's', 'e', 'w'\n\n    constructor(options: SelectionOptions = {}) {\n        this.options = {\n            target: document.body,\n            minSize: vector2Ref(10, 10),\n            maxSize: vector2Ref(globalThis.innerWidth, globalThis.innerHeight),\n            showHandles: true,\n            style: {\n                border: '2px solid #007acc',\n                background: 'rgba(0, 122, 204, 0.1)',\n                borderRadius: '0',\n                zIndex: 9999\n            },\n            ...options\n        };\n        this.target = this.options.target!;\n    }\n\n    /**\n     * Start selection mode - attaches event listeners\n     */\n    start(): void {\n        if (this.isActive) return;\n\n        this.isActive = true;\n        this.createOverlay();\n        this.attachEvents();\n    }\n\n    /**\n     * Stop selection mode - removes event listeners and overlay\n     */\n    stop(): void {\n        if (!this.isActive) return;\n\n        this.isActive = false;\n        this.removeOverlay();\n        this.detachEvents();\n        this.options.onCancel?.();\n    }\n\n    /**\n     * Get current selection rectangle\n     */\n    getSelection(): Rect2D | null {\n        return this.selectionRect || null;\n    }\n\n    /**\n     * Set selection programmatically\n     */\n    setSelection(rect: Rect2D): void {\n        this.selectionRect = rect;\n        this.updateOverlay();\n        this.options.onChange?.(rect);\n    }\n\n    /**\n     * Clear current selection\n     */\n    clearSelection(): void {\n        this.selectionRect = undefined;\n        this.updateOverlay();\n        this.options.onCancel?.();\n    }\n\n    private createOverlay(): void {\n        if (this.overlayElement) return;\n\n        this.overlayElement = document.createElement('div');\n        Object.assign(this.overlayElement.style, {\n            position: 'fixed',\n            pointerEvents: 'none',\n            boxSizing: 'border-box',\n            ...this.options.style\n        });\n\n        // Create resize handles if enabled\n        if (this.options.showHandles) {\n            this.createResizeHandles();\n        }\n\n        this.target.appendChild(this.overlayElement);\n    }\n\n    private createResizeHandles(): void {\n        if (!this.overlayElement) return;\n\n        const handles = ['nw', 'ne', 'sw', 'se', 'n', 's', 'e', 'w'];\n        const handleElements: HTMLElement[] = [];\n\n        handles.forEach(handle => {\n            const handleEl = document.createElement('div');\n            handleEl.setAttribute('data-handle', handle);\n            Object.assign(handleEl.style, {\n                position: 'absolute',\n                width: handle.length === 1 ? '100%' : '8px',\n                height: handle.length === 1 ? '8px' : '100%',\n                background: this.options.style?.border || '#007acc',\n                cursor: this.getCursorForHandle(handle),\n                pointerEvents: 'auto'\n            });\n\n            // Position the handle\n            this.positionHandle(handleEl, handle);\n\n            handleEl.addEventListener('pointerdown', (e) => {\n                e.stopPropagation();\n                this.startResize(handle, vector2Ref(e.clientX, e.clientY));\n            });\n\n            this.overlayElement!.appendChild(handleEl);\n            handleElements.push(handleEl);\n        });\n    }\n\n    private positionHandle(handleEl: HTMLElement, handle: string): void {\n        const style = handleEl.style;\n        switch (handle) {\n            case 'nw': style.top = style.left = '0'; break;\n            case 'ne': style.top = '0'; style.right = '0'; break;\n            case 'sw': style.bottom = style.left = '0'; break;\n            case 'se': style.bottom = style.right = '0'; break;\n            case 'n': style.top = '0'; style.left = '50%'; style.transform = 'translateX(-50%)'; break;\n            case 's': style.bottom = '0'; style.left = '50%'; style.transform = 'translateX(-50%)'; break;\n            case 'e': style.top = '50%'; style.right = '0'; style.transform = 'translateY(-50%)'; break;\n            case 'w': style.top = '50%'; style.left = '0'; style.transform = 'translateY(-50%)'; break;\n        }\n    }\n\n    private getCursorForHandle(handle: string): string {\n        const cursors: Record<string, string> = {\n            'nw': 'nw-resize', 'ne': 'ne-resize', 'sw': 'sw-resize', 'se': 'se-resize',\n            'n': 'n-resize', 's': 's-resize', 'e': 'e-resize', 'w': 'w-resize'\n        };\n        return cursors[handle] || 'pointer';\n    }\n\n    private attachEvents(): void {\n        this.target.addEventListener('pointerdown', this.handlePointerDown);\n        this.target.addEventListener('pointermove', this.handlePointerMove);\n        this.target.addEventListener('pointerup', this.handlePointerUp);\n        document.addEventListener('keydown', this.handleKeyDown);\n    }\n\n    private detachEvents(): void {\n        this.target.removeEventListener('pointerdown', this.handlePointerDown);\n        this.target.removeEventListener('pointermove', this.handlePointerMove);\n        this.target.removeEventListener('pointerup', this.handlePointerUp);\n        document.removeEventListener('keydown', this.handleKeyDown);\n    }\n\n    private handlePointerDown = (e: PointerEvent): void => {\n        if (e.button !== 0) return; // Only left mouse button\n\n        const point = vector2Ref(e.clientX, e.clientY);\n\n        // Check if clicking on a resize handle\n        const handle = this.getHandleAtPoint(point);\n        if (handle) {\n            this.startResize(handle, point);\n            return;\n        }\n\n        // Check if clicking inside existing selection\n        if (this.selectionRect && rectContainsPoint(this.selectionRect, point).value) {\n            this.startDrag(point);\n            return;\n        }\n\n        // Start new selection\n        this.startSelection(point);\n    };\n\n    private handlePointerMove = (e: PointerEvent): void => {\n        const point = vector2Ref(e.clientX, e.clientY);\n\n        if (this.resizeHandle) {\n            this.updateResize(point);\n        } else if (this.dragStart) {\n            this.updateDrag(point);\n        } else if (this.startPoint) {\n            this.updateSelection(point);\n        }\n    };\n\n    private handlePointerUp = (e: PointerEvent): void => {\n        if (this.resizeHandle) {\n            this.endResize();\n        } else if (this.dragStart) {\n            this.endDrag();\n        } else if (this.startPoint) {\n            this.endSelection();\n        }\n    };\n\n    private handleKeyDown = (e: KeyboardEvent): void => {\n        if (e.key === 'Escape') {\n            this.clearSelection();\n        } else if (e.key === 'Enter' && this.selectionRect) {\n            this.options.onSelect?.(this.selectionRect);\n        }\n    };\n\n    private startSelection(point: Vector2D): void {\n        this.startPoint = point;\n        this.currentPoint = point;\n        this.selectionRect = createRect2D(point.x, point.y, 0, 0);\n        this.updateOverlay();\n    }\n\n    private updateSelection(point: Vector2D): void {\n        if (!this.startPoint || !this.selectionRect) return;\n\n        this.currentPoint = point;\n\n        // Calculate selection rectangle\n        const minX = Math.min(this.startPoint.x.value, point.x.value);\n        const minY = Math.min(this.startPoint.y.value, point.y.value);\n        const maxX = Math.max(this.startPoint.x.value, point.x.value);\n        const maxY = Math.max(this.startPoint.y.value, point.y.value);\n\n        this.selectionRect.position.x.value = minX;\n        this.selectionRect.position.y.value = minY;\n        this.selectionRect.size.x.value = maxX - minX;\n        this.selectionRect.size.y.value = maxY - minY;\n\n        // Apply constraints\n        this.applyConstraints();\n\n        this.updateOverlay();\n        this.options.onChange?.(this.selectionRect);\n    }\n\n    private endSelection(): void {\n        if (!this.selectionRect) return;\n\n        // Ensure minimum size\n        if (this.selectionRect.size.x.value < this.options.minSize!.x.value ||\n            this.selectionRect.size.y.value < this.options.minSize!.y.value) {\n            this.clearSelection();\n            return;\n        }\n\n        this.options.onSelect?.(this.selectionRect);\n        this.startPoint = undefined;\n        this.currentPoint = undefined;\n    }\n\n    private startDrag(point: Vector2D): void {\n        if (!this.selectionRect) return;\n        this.dragStart = point;\n    }\n\n    private updateDrag(point: Vector2D): void {\n        if (!this.dragStart || !this.selectionRect) return;\n\n        const delta = subtractVector2D(point, this.dragStart);\n        this.selectionRect.position = addVector2D(this.selectionRect.position, delta);\n        this.dragStart = point;\n\n        // Apply bounds constraints\n        if (this.options.bounds) {\n            this.selectionRect.position = clampPointToRect(this.selectionRect.position, this.options.bounds);\n        }\n\n        this.updateOverlay();\n        this.options.onChange?.(this.selectionRect);\n    }\n\n    private endDrag(): void {\n        this.dragStart = undefined;\n    }\n\n    private startResize(handle: string, point: Vector2D): void {\n        this.resizeHandle = handle;\n        this.dragStart = point;\n    }\n\n    private updateResize(point: Vector2D): void {\n        if (!this.resizeHandle || !this.dragStart || !this.selectionRect) return;\n\n        const delta = subtractVector2D(point, this.dragStart);\n        this.resizeFromHandle(this.resizeHandle, delta);\n        this.dragStart = point;\n\n        this.applyConstraints();\n        this.updateOverlay();\n        this.options.onChange?.(this.selectionRect);\n    }\n\n    private resizeFromHandle(handle: string, delta: Vector2D): void {\n        if (!this.selectionRect) return;\n\n        const rect = this.selectionRect;\n        let newX = rect.position.x.value;\n        let newY = rect.position.y.value;\n        let newWidth = rect.size.x.value;\n        let newHeight = rect.size.y.value;\n\n        switch (handle) {\n            case 'nw':\n                newX += delta.x.value;\n                newY += delta.y.value;\n                newWidth -= delta.x.value;\n                newHeight -= delta.y.value;\n                break;\n            case 'ne':\n                newY += delta.y.value;\n                newWidth += delta.x.value;\n                newHeight -= delta.y.value;\n                break;\n            case 'sw':\n                newX += delta.x.value;\n                newWidth -= delta.x.value;\n                newHeight += delta.y.value;\n                break;\n            case 'se':\n                newWidth += delta.x.value;\n                newHeight += delta.y.value;\n                break;\n            case 'n':\n                newY += delta.y.value;\n                newHeight -= delta.y.value;\n                break;\n            case 's':\n                newHeight += delta.y.value;\n                break;\n            case 'e':\n                newWidth += delta.x.value;\n                break;\n            case 'w':\n                newX += delta.x.value;\n                newWidth -= delta.x.value;\n                break;\n        }\n\n        // Prevent negative dimensions\n        if (newWidth < 0) {\n            newX += newWidth;\n            newWidth = -newWidth;\n        }\n        if (newHeight < 0) {\n            newY += newHeight;\n            newHeight = -newHeight;\n        }\n\n        rect.position.x.value = newX;\n        rect.position.y.value = newY;\n        rect.size.x.value = newWidth;\n        rect.size.y.value = newY;\n    }\n\n    private endResize(): void {\n        this.resizeHandle = undefined;\n        this.dragStart = undefined;\n    }\n\n    private applyConstraints(): void {\n        if (!this.selectionRect) return;\n\n        const rect = this.selectionRect;\n\n        // Apply aspect ratio\n        if (this.options.aspectRatio) {\n            const currentRatio = rect.size.x.value / rect.size.y.value;\n            const targetRatio = this.options.aspectRatio;\n\n            if (Math.abs(currentRatio - targetRatio) > 0.01) {\n                if (currentRatio > targetRatio) {\n                    rect.size.y.value = rect.size.x.value / targetRatio;\n                } else {\n                    rect.size.x.value = rect.size.y.value * targetRatio;\n                }\n            }\n        }\n\n        // Apply size limits\n        rect.size.x.value = Math.max(this.options.minSize!.x.value,\n            Math.min(this.options.maxSize!.x.value, rect.size.x.value));\n        rect.size.y.value = Math.max(this.options.minSize!.y.value,\n            Math.min(this.options.maxSize!.y.value, rect.size.y.value));\n\n        // Apply bounds\n        if (this.options.bounds) {\n            rect.position.x.value = Math.max(this.options.bounds.position.x.value,\n                Math.min(rect.position.x.value,\n                    this.options.bounds.position.x.value + this.options.bounds.size.x.value - rect.size.x.value));\n            rect.position.y.value = Math.max(this.options.bounds.position.y.value,\n                Math.min(rect.position.y.value,\n                    this.options.bounds.position.y.value + this.options.bounds.size.y.value - rect.size.y.value));\n        }\n\n        // Apply grid snapping\n        if (this.options.snapToGrid) {\n            const { size: gridSize, offset: gridOffset } = this.options.snapToGrid;\n            rect.position.x.value = Math.round((rect.position.x.value - gridOffset.x.value) / gridSize.x.value) *\n                gridSize.x.value + gridOffset.x.value;\n            rect.position.y.value = Math.round((rect.position.y.value - gridOffset.y.value) / gridSize.y.value) *\n                gridSize.y.value + gridOffset.y.value;\n        }\n    }\n\n    private updateOverlay(): void {\n        if (!this.overlayElement) return;\n\n        if (!this.selectionRect) {\n            this.overlayElement.style.display = 'none';\n            return;\n        }\n\n        const rect = this.selectionRect;\n        Object.assign(this.overlayElement.style, {\n            display: 'block',\n            left: `${rect.position.x.value}px`,\n            top: `${rect.position.y.value}px`,\n            width: `${rect.size.x.value}px`,\n            height: `${rect.size.y.value}px`\n        });\n    }\n\n    private removeOverlay(): void {\n        if (this.overlayElement) {\n            this.overlayElement.remove();\n            this.overlayElement = undefined;\n        }\n    }\n\n    private getHandleAtPoint(point: Vector2D): string | null {\n        if (!this.overlayElement || !this.selectionRect) return null;\n\n        const rect = this.selectionRect;\n        const handles = this.overlayElement.querySelectorAll('[data-handle]');\n        const handleSize = 8; // pixels\n\n        for (let i = 0; i < handles.length; i++) {\n            const handle = handles[i];\n            const handleRect = (handle as HTMLElement).getBoundingClientRect();\n            if (point.x.value >= handleRect.left && point.x.value <= handleRect.right &&\n                point.y.value >= handleRect.top && point.y.value <= handleRect.bottom) {\n                return handle.getAttribute('data-handle');\n            }\n        }\n\n        return null;\n    }\n\n    /**\n     * Get selection as image data (for canvas/screen capture)\n     */\n    async getSelectionImage(): Promise<ImageData | null> {\n        if (!this.selectionRect) return null;\n\n        // This would require additional canvas/screen capture implementation\n        // For now, return null\n        return null;\n    }\n\n    /**\n     * Destroy the selection controller\n     */\n    destroy(): void {\n        this.stop();\n        this.clearSelection();\n    }\n}\n\n// Export default\nexport default SelectionController;\n","import { ROOT, addEvents } from \"fest/dom\";\n\n//\nexport class LongHoverHandler {\n    #holder: HTMLElement;\n\n    //\n    constructor(holder, options?, fx = (ev) => {ev.target.dispatchEvent(new PointerEvent(\"long-hover\", {...ev, bubbles: true}));}) {\n        this.#holder = holder; holder[\"@control\"] = this;\n        if (!holder) { throw Error(\"Element is null...\"); };\n        if (options) { this.longHover(options, fx); };\n    }\n\n    //\n    defaultHandler(ev, weakRef: WeakRef<HTMLElement>) {\n        return weakRef?.deref()?.dispatchEvent?.(new PointerEvent(\"long-hover\", {...ev, bubbles: true}));\n    }\n\n    //\n    longHover(options, fx = (ev) => {ev.target.dispatchEvent(new PointerEvent(\"long-hover\", {...ev, bubbles: true}));}) {\n        const action: any = { pointerId: -1, timer: null };\n        const initiate = ((evc)=>{\n            const ev = evc;\n            if ((ev.target.matches(options.selector) || ev.target.closest(options.selector)) && action.pointerId < 0) {\n                action.pointerId = ev.pointerId;\n                action.timer = setTimeout(()=>{\n                    fx?.(ev);\n                }, options.holdTime ?? 300);\n            }\n        });\n\n        //\n        const cancelEv = ((evc)=>{\n            const ev = evc;\n            if ((ev.target.matches(options.selector) || ev.target.closest(options.selector)) && action.pointerId == ev.pointerId) {\n                if (action.timer) { clearTimeout(action.timer); };\n\n                //\n                action.timer   = null;\n                action.pointerId = -1;\n            }\n        });\n\n        //\n        addEvents(ROOT, {\n            \"pointerover\"  : initiate,\n            \"pointerdown\"  : initiate,\n            \"pointerout\"   : cancelEv,\n            \"pointerup\"    : cancelEv,\n            \"pointercancel\": cancelEv\n        });\n    }\n}\n\n//\nexport default LongHoverHandler;\n","import { addEvents } from \"fest/dom\";\n\n//\nconst defaultOptions = {\n    anyPointer: true,\n    mouseImmediate: true,\n    minHoldTime: 100,\n    maxHoldTime: 2000,\n    maxOffsetRadius: 10\n};\n\n//\nconst preventor: [(ev: PointerEvent) => void, AddEventListenerOptions] = [\n    (ev: PointerEvent) => {\n    ev.preventDefault();\n    ev.stopPropagation();\n    ev.stopImmediatePropagation();\n}, { once: true }]\n\n//\nexport class LongPressHandler {\n    #holder: HTMLElement;\n    #preventedPointers: Set<number>;\n    //\n    constructor(holder,  options: any = {...defaultOptions}, fx?: (ev: PointerEvent) => void) {\n        (this.#holder = holder)[\"@control\"] = this;\n        this.#preventedPointers = new Set();\n        if (!holder) { throw Error(\"Element is null...\"); }\n        if (!options) { options = {...defaultOptions}; }\n        const currentClone = {...options};\n        Object.assign(options, defaultOptions, currentClone);\n        if (options) { this.longPress(options, fx); }\n    }\n\n    //\n    defaultHandler(ev, weakRef: WeakRef<HTMLElement>) {\n        return weakRef?.deref()?.dispatchEvent?.(new PointerEvent(\"long-press\", {...ev, bubbles: true}));\n    }\n\n    //\n    longPress(options: any = {...defaultOptions}, fx?: (ev: PointerEvent) => void) {\n        const ROOT = document.documentElement;\n        const weakRef = new WeakRef(this.#holder);\n        const actionState = this.initializeActionState();\n\n        //\n        this.holding = {\n            actionState,\n            options, fx: fx || ((ev) => this.defaultHandler(ev, weakRef))\n        }\n\n        // Event listeners\n        const pointerDownListener = (ev: PointerEvent) => this.onPointerDown(this.holding, ev, weakRef);\n        const pointerMoveListener = (ev: PointerEvent) => this.onPointerMove(this.holding, ev);\n        const pointerUpListener   = (ev: PointerEvent) => this.onPointerUp(this.holding, ev);\n\n        //\n        addEvents(ROOT, {\n            \"pointerdown\": pointerDownListener,\n            \"pointermove\": pointerMoveListener,\n            \"pointerup\"  : pointerUpListener,\n            \"pointercancel\": pointerUpListener\n        });\n    }\n\n    //\n    private initializeActionState() {\n        return {\n            timerId: null,\n            immediateTimerId: null,\n            pointerId: -1,\n            startCoord: [0, 0] as [number, number],\n            lastCoord: [0, 0] as [number, number],\n            isReadyForLongPress: false,\n            cancelCallback: () => {},\n            cancelPromiseResolver: null as (() => void) | null,\n            cancelPromiseRejector: null as ((reason?: any) => void) | null,\n        };\n    }\n\n    //\n    private preventFromClicking(self: any, ev: PointerEvent) {\n        if (!this.#preventedPointers.has(ev.pointerId)) {\n            this.#preventedPointers.add(ev.pointerId);\n\n            self?.addEventListener?.(\"click\", ...preventor);\n            self?.addEventListener?.(\"contextmenu\", ...preventor);\n        }\n    }\n\n    //\n    private releasePreventing(self: any, pointerId: number) {\n        if (this.#preventedPointers.has(pointerId)) {\n            this.#preventedPointers.delete(pointerId);\n            self?.removeEventListener?.(\"click\", ...preventor);\n            self?.removeEventListener?.(\"contextmenu\", ...preventor);\n        }\n    }\n\n    //\n    private onPointerDown(self: any, ev: PointerEvent, weakRef: WeakRef<HTMLElement>) {\n        if (\n            !this.isValidTarget(self, ev.target as HTMLElement, weakRef) ||\n            !(self.options?.anyPointer || ev?.pointerType == \"touch\")\n        ) return;\n\n        //\n        ev.preventDefault();\n        this.resetAction(self, self.actionState);\n\n        // Initialize state\n        const { actionState }  = self;\n        actionState.pointerId  = ev.pointerId;\n        actionState.startCoord = [ev.clientX, ev.clientY];\n        actionState.lastCoord  = [...actionState.startCoord];\n\n        // Set up cancellation promise\n        const $withResolver = Promise.withResolvers<void>();\n        actionState.cancelPromiseResolver = $withResolver.resolve;\n        actionState.cancelPromiseRejector = $withResolver.reject;\n        actionState.cancelCallback = () => {\n            clearTimeout(actionState.timerId!);\n            clearTimeout(actionState.immediateTimerId!);\n            actionState.isReadyForLongPress = false;\n            $withResolver.resolve();\n            this.resetAction(self, actionState);\n        };\n        // Immediate trigger timer\n        if (self.options?.mouseImmediate && ev.pointerType === \"mouse\") {\n            self.fx?.(ev);\n            return actionState.cancelCallback();\n        }\n\n        // Long press timer\n        actionState.timerId = setTimeout(() => {\n            actionState.isReadyForLongPress = true;\n        }, self.options?.minHoldTime);\n\n        // Start timers for long press and immediate actions\n        actionState.immediateTimerId = setTimeout(() => {\n            if (this.isInPlace(self)) {\n                this.preventFromClicking(self, ev);\n\n                //\n                self.fx?.(ev);\n                actionState.cancelCallback();\n            }\n        }, self.options?.maxHoldTime);\n\n        // Cancel promise handling\n        Promise.race([\n            $withResolver.promise,\n            new Promise<void>((_, reject) => setTimeout(() => reject(new Error(\"Timeout\")), 3000)),\n        ]).catch(console.warn);\n    }\n\n    //\n    private onPointerMove(self: any, ev: PointerEvent) {\n        const {actionState} = self;\n        if (ev.pointerId !== actionState.pointerId) return;\n        actionState.lastCoord = [ev.clientX, ev.clientY];\n\n        //\n        if (!this.isInPlace(self)) { return actionState.cancelCallback(); }\n\n        //\n        this.preventFromClicking(self, ev);\n        actionState.startCoord = [ev.clientX, ev.clientY];\n    }\n\n    //\n    private resetAction(self: any, actionState: any) {\n        this.releasePreventing(self, actionState.pointerId);\n        actionState.pointerId               = -1;\n        actionState.cancelPromiseResolver   = null;\n        actionState.cancelPromiseRejector   = null;\n        actionState.isReadyForLongPress     = false;\n        actionState.cancelCallback          = null;\n    }\n\n    //\n    private onPointerUp(self: any, ev: PointerEvent) {\n        const {actionState} = self;\n        if (ev.pointerId !== actionState.pointerId) return;\n        actionState.lastCoord = [ev.clientX, ev.clientY];\n\n        if (actionState.isReadyForLongPress && this.isInPlace(self)) {\n            self.fx?.(ev);\n            this.preventFromClicking(self, ev);\n        }\n\n        actionState.cancelCallback();\n        this.resetAction(self, actionState);\n    }\n\n    //\n    private holding: any = { fx: null, options: {}, actionState: {} }\n    private hasParent(current, parent) { while (current) { if (current === parent) return true; current = current.parentElement; } }\n    private isInPlace(self: any): boolean {\n        const {actionState}    = self;\n        const [startX, startY] = actionState.startCoord;\n        const [lastX, lastY]   = actionState.lastCoord;\n        const  distance        = Math.hypot(lastX - startX, lastY - startY);\n        return distance <= (self.options?.maxOffsetRadius);\n    }\n\n    //\n    private isValidTarget(self: any, target: HTMLElement, weakRef: WeakRef<HTMLElement>): boolean|null|undefined {\n        const weakElement = weakRef?.deref?.();\n        return (\n            weakElement && (this.hasParent(target, weakElement) || target === weakElement) &&\n            (!self.options?.handler || target.matches(self.options?.handler))\n        );\n    }\n}\n\n//\nexport default LongPressHandler;\n","import { ROOT, addEvents } from \"fest/dom\";\n\n//\nexport class SwipeHandler {\n    #holder: HTMLElement;\n\n    //\n    constructor(holder, options?) {\n        (this.#holder = holder)[\"@control\"] = this;\n        if (!holder) { throw Error(\"Element is null...\"); }\n        if (options) { this.swipe(options); }\n    }\n\n    //\n    swipe(options) {\n        if (options?.handler) {\n            const swipes = new Map<number, any>([]);\n            const swipes_w = new WeakRef(swipes);\n\n            //\n            const registerMove = (evc) => {\n                const ev = evc;\n                if (swipes?.has?.(ev.pointerId)) {\n                    //ev.preventDefault();\n                    const swipe = swipes?.get?.(ev.pointerId);\n                    Object.assign(swipe || {}, {\n                        current: [...(ev.client || [ev?.clientX, ev?.clientY])],\n                        pointerId: ev.pointerId,\n                        time: performance.now(),\n                    });\n                }\n            };\n\n            //\n            const compAngle = (a, c) => { return ((a - c + 540) % 360) - 180; };\n            const completeSwipe = (ev) => {\n                const pointerId = ev.pointerId;\n                if (swipes?.has?.(pointerId)) {\n                    const swipe = swipes_w?.deref()?.get?.(pointerId);\n                    const diffP = [\n                        swipe.start[0] - swipe.current[0],\n                        swipe.start[1] - swipe.current[1],\n                    ];\n                    const diffT = performance.now() - swipe.startTime;\n                    const speed = Math.hypot(...diffP) / diffT;\n                    if ((swipe.speed = speed) > (options.threshold || 0.5)) {\n                        swipe.direction = \"name\";\n                        swipe.swipeAngle = Math.atan2(\n                            swipe.current[1] - swipe.start[1],\n                            swipe.current[0] - swipe.start[0]\n                        );\n\n                        //\n                        if ( Math.abs( compAngle(swipe.swipeAngle * (180 / Math.PI), 0   ) ) <= 20 ) { swipe.direction = \"left\"; }; //AR.get(el.getAttribute(\"data-swipe-action-left\"))?.(el); swipe.direction = \"left\"; }\n                        if ( Math.abs( compAngle(swipe.swipeAngle * (180 / Math.PI), 180 ) ) <= 20 ) { swipe.direction = \"right\"; }; //AR.get(el.getAttribute(\"data-swipe-action-right\"))?.(el); swipe.direction = \"right\"; }\n                        if ( Math.abs( compAngle(swipe.swipeAngle * (180 / Math.PI), 270 ) ) <= 20 ) { swipe.direction = \"up\"; }; //AR.get(el.getAttribute(\"data-swipe-action-up\"))?.(el); swipe.direction = \"up\"; }\n                        if ( Math.abs( compAngle(swipe.swipeAngle * (180 / Math.PI), 90  ) ) <= 20 ) { swipe.direction = \"down\"; }; //AR.get(el.getAttribute(\"data-swipe-action-down\"))?.(el); swipe.direction = \"down\"; }\n                        options?.trigger?.(swipe);\n                    }\n                    swipes_w?.deref()?.delete?.(pointerId);\n                }\n            };\n\n            //\n            const takeAction = ((evc) => {\n                const ev = evc;\n                if (ev.target == options?.handler) {\n                    swipes?.set(ev.pointerId, {\n                        target: ev.target,\n                        start: [...(ev.client || [ev?.clientX, ev?.clientY])],\n                        current: [...(ev.client || [ev?.clientX, ev?.clientY])],\n                        pointerId: ev.pointerId,\n                        startTime: performance.now(),\n                        time: performance.now(),\n                        speed: 0,\n                    }); // @ts-ignore // stronger policy now...\n                    ev?.capture?.();\n                }\n            })\n\n            //\n            addEvents(ROOT, {\n                \"pointerdown\"  : takeAction   ,\n                \"pointermove\"  : registerMove ,\n                \"pointerup\"    : completeSwipe,\n                \"pointercancel\": completeSwipe,\n            });\n        }\n    }\n}\n\n//\nexport default SwipeHandler;\n","import { addEvent, iterateContentBox } from \"fest/dom\";\n\n// Legacy style handlers API\n\n//\nexport const handleByPointer = (cb, root = typeof document != \"undefined\" ? document?.documentElement : null)=>{\n    if (!root) return () => { };\n    let pointerId = -1;\n    const rst = (ev)=>{ pointerId = -1; };\n    const tgi = (ev)=>{ if (pointerId < 0) pointerId = ev.pointerId; if (pointerId == ev.pointerId) { cb?.(ev); } };\n    const listening = [\n        addEvent(root, \"pointerup\", rst),\n        addEvent(root, \"pointercancel\", rst),\n        addEvent(root, \"pointermove\", tgi)\n    ];\n    return ()=>{\n        listening.forEach(ub=>ub?.());\n    }\n}\n\n//\nexport const handleForFixPosition = (container, cb, root = typeof document != \"undefined\" ? document?.documentElement : null)=>{\n    if (!root) return () => { };\n    const ptu = (ev)=>cb?.(ev);\n    const listening = [\n        addEvent(container, \"scroll\", ptu),\n        addEvent(root, \"resize\", ptu)\n    ];\n    const obs = observeContentBox(container, ptu);\n    return ()=>{\n        listening.forEach(ub=>ub?.());\n        obs?.disconnect?.();\n    }\n}\n","import { numberRef, addToCallChain } from \"fest/object\";\nimport { addEvent, handleStyleChange } from \"fest/dom\";\nimport {\n    vector2Ref, bindWith, Vector2D,\n    rectCenter, rectArea, Rect2D, rectContainsPoint, rectIntersects,\n    clampPointToRect, pointToRectDistance\n} from \"fest/lure\";\nimport { CSSBinder, CSSUnitUtils } from \"fest/lure\";\nimport { ReactiveElementSize } from \"../css-ref/Utils\";\n\n//\nexport function boundingBoxAnchorRef(anchor: HTMLElement, options?: {\n    root?: HTMLElement,\n    observeResize?: boolean,\n    observeMutations?: boolean,\n}) {\n    if (!anchor) return () => { };\n\n    // Create reactive vectors for position and size\n    const position = vector2Ref(0, 0); // x, y\n    const size = vector2Ref(0, 0);     // width, height\n    const area = [\n        position.x, position.y, // x, y\n        size.x, size.y,         // width, height\n        numberRef(0), numberRef(0) // to right, to bottom (computed)\n    ];\n\n    // Reactive rectangle representation\n    const rect: Rect2D = { position, size };\n    const center = rectCenter(rect);\n    const reactiveArea = rectArea(rect);\n\n    const { root = anchor?.offsetParent ?? document.documentElement, iterateResize = true, iterateMutations = false } = options || {};\n\n    // Reactive element size tracker\n    const elementSize = new ReactiveElementSize(anchor);\n\n    //\n    function updateArea() {\n        const rect  = anchor?.getBoundingClientRect?.() ?? {};\n        position.x.value = rect?.left; // x\n        position.y.value = rect?.top;  // y\n        size.x.value = rect?.right - rect?.left; // width\n        size.y.value = rect?.bottom - rect?.top; // height\n        area[4].value = rect?.right;  // to right\n        area[5].value = rect?.bottom; // to bottom\n    }\n\n    //\n    const listening = [\n        addEvent(root, \"scroll\", updateArea, { capture: true }),\n        addEvent(window, \"resize\", updateArea),\n        addEvent(window, \"scroll\", updateArea, { capture: true })\n    ];\n\n    //\n    let resizeObs: ResizeObserver | undefined;\n    if (observeResize && \"ResizeObserver\" in window && typeof ResizeObserver != \"undefined\") {\n        resizeObs = typeof ResizeObserver != \"undefined\" ? new ResizeObserver(updateArea) : undefined;\n        resizeObs?.observe(anchor);\n    }\n\n    //\n    let mutationObs: MutationObserver | undefined;\n    if (observeMutations) {\n        mutationObs = typeof MutationObserver != \"undefined\" ? new MutationObserver(updateArea) : undefined;\n        mutationObs?.observe(anchor, { attributes: true, childList: true, subtree: true });\n    }\n\n    //\n    updateArea();\n    function destroy() {\n        listening.forEach(ub=>ub?.());\n        resizeObs?.disconnect?.();\n        mutationObs?.disconnect?.();\n    }\n\n    //\n    if (destroy) {\n        area.forEach(ub=>addToCallChain(ub, Symbol.dispose, destroy));\n    }\n\n    // Return enhanced area with vector, rectangle, and CSS operations\n    const enhancedArea = Object.assign(area, {\n        position,       // Vector2D for x, y\n        size,          // Vector2D for width, height\n        rect,          // Rect2D interface\n        center,        // Reactive center point\n        area: reactiveArea, // Reactive area calculation\n        elementSize,   // ReactiveElementSize instance\n\n        // Rectangle operations\n        containsPoint: (point: Vector2D) => rectContainsPoint(rect, point),\n        intersects: (otherRect: Rect2D) => rectIntersects(rect, otherRect),\n        clampPoint: (point: Vector2D) => clampPointToRect(point, rect),\n        distanceToPoint: (point: Vector2D) => pointToRectDistance(point, rect),\n\n        // CSS binding utilities\n        bindPosition: (element: HTMLElement) => CSSBinder.bindPosition(element, position),\n        bindSize: (element: HTMLElement) => CSSBinder.bindSize(element, size),\n        bindCenter: (element: HTMLElement) => CSSBinder.bindPosition(element, center),\n\n        destroy: () => {\n            elementSize.destroy();\n            destroy();\n        }\n    });\n\n    return enhancedArea;\n}\n\n//\n// Unit conversion utilities now imported from CSSUnitUtils\n\n//\nexport const bindWithRect = (anchor: HTMLElement, area: any|null, options?: {\n    root?: HTMLElement,\n    observeResize?: boolean,\n    observeMutations?: boolean,\n    placement?: \"fill\" | \"bottom\" | \"top\" | \"left\" | \"right\" | \"center\",\n}) => {\n    if (!anchor) return () => { };\n\n    //\n    if (area?.connectElement) {\n        return area?.connectElement?.(anchor, options || {});\n    }\n\n    //\n    const [left, top, width, height, right, bottom] = area;\n    const usb: any[] = [];\n\n    //\n    if (options?.placement == \"fill\") {\n        usb.push(bindWith(anchor, \"inset-block-start\", CSSUnitUtils.asPx(left), handleStyleChange));\n        usb.push(bindWith(anchor, \"inset-inline-start\", CSSUnitUtils.asPx(top), handleStyleChange));\n        usb.push(bindWith(anchor, \"inset-block-end\", CSSUnitUtils.asPx(right), handleStyleChange));\n        usb.push(bindWith(anchor, \"inset-inline-end\", CSSUnitUtils.asPx(bottom), handleStyleChange));\n        usb.push(bindWith(anchor, \"inline-size\", CSSUnitUtils.asPx(width), handleStyleChange));\n        usb.push(bindWith(anchor, \"block-size\", CSSUnitUtils.asPx(height), handleStyleChange));\n    }\n    else if (options?.placement == \"bottom\") {\n        usb.push(bindWith(anchor, \"inset-block-start\", CSSUnitUtils.asPx(bottom), handleStyleChange));\n        usb.push(bindWith(anchor, \"inset-inline-start\", CSSUnitUtils.asPx(left), handleStyleChange));\n        usb.push(bindWith(anchor, \"inline-size\", CSSUnitUtils.asPx(width), handleStyleChange));\n    }\n    else if (options?.placement == \"top\") {\n        usb.push(bindWith(anchor, \"inset-block-end\", CSSUnitUtils.asPx(top), handleStyleChange));\n        usb.push(bindWith(anchor, \"inset-inline-start\", CSSUnitUtils.asPx(left), handleStyleChange));\n        usb.push(bindWith(anchor, \"inline-size\", CSSUnitUtils.asPx(width), handleStyleChange));\n    }\n    else if (options?.placement == \"left\") {\n        usb.push(bindWith(anchor, \"inset-inline-end\", CSSUnitUtils.asPx(right), handleStyleChange));\n        usb.push(bindWith(anchor, \"inset-block-start\", CSSUnitUtils.asPx(top), handleStyleChange));\n        usb.push(bindWith(anchor, \"block-size\", CSSUnitUtils.asPx(height), handleStyleChange));\n    }\n    else if (options?.placement == \"right\") {\n        usb.push(bindWith(anchor, \"inset-inline-start\", CSSUnitUtils.asPx(left), handleStyleChange));\n        usb.push(bindWith(anchor, \"inset-block-start\", CSSUnitUtils.asPx(top), handleStyleChange));\n        usb.push(bindWith(anchor, \"block-size\", CSSUnitUtils.asPx(height), handleStyleChange));\n    }\n    else if (options?.placement == \"center\") {\n        usb.push(bindWith(anchor, \"inset-inline-start\", CSSUnitUtils.asPx(left), handleStyleChange));\n        usb.push(bindWith(anchor, \"inset-block-start\", CSSUnitUtils.asPx(top), handleStyleChange));\n        usb.push(bindWith(anchor, \"inline-size\", CSSUnitUtils.asPx(width), handleStyleChange));\n        usb.push(bindWith(anchor, \"block-size\", CSSUnitUtils.asPx(height), handleStyleChange));\n    }\n    return () => { usb?.forEach?.(ub=>ub?.()); };\n};\n\n// Enhanced binding for scrollbar positioning with intersection support\nexport const bindScrollbarPosition = (scrollbar: HTMLElement, anchorBox: any[]|any, axis: 'horizontal' | 'vertical', options?: {\n    useIntersection?: boolean,\n    zIndexShift?: number,\n}) => {\n    const { useIntersection = false, zIndexShift = 1 } = options || {};\n    const usb: any[] = [];\n\n    //\n    if (anchorBox?.connectElement) {\n        return anchorBox?.connectElement?.(scrollbar, Object.assign(options || {}, {\n            placement: axis == \"horizontal\" ? \"bottom\" : \"right\"\n        }));\n    }\n\n    //\n    scrollbar.style.position = useIntersection ? 'fixed' : 'absolute';\n    scrollbar.style.zIndex = `${zIndexShift}`;\n\n    if (useIntersection) {\n        // Intersection box: [ix, iy, iwidth, iheight, iright, ibottom, ax, ay, awidth, aheight, rx, ry, rwidth, rheight]\n        if (axis === 'horizontal') {\n            // Position at bottom of intersection area\n            usb.push(bindWith(scrollbar, \"left\", CSSUnitUtils.asPx(anchorBox[0]), handleStyleChange));     // intersection x\n            usb.push(bindWith(scrollbar, \"top\", CSSUnitUtils.asPx(anchorBox[5]), handleStyleChange));     // intersection bottom\n            usb.push(bindWith(scrollbar, \"width\", CSSUnitUtils.asPx(anchorBox[2]), handleStyleChange));  // intersection width\n        } else {\n            // Position at right of intersection area\n            usb.push(bindWith(scrollbar, \"left\", CSSUnitUtils.asPx(anchorBox[4]), handleStyleChange));    // intersection right\n            usb.push(bindWith(scrollbar, \"top\", CSSUnitUtils.asPx(anchorBox[1]), handleStyleChange));     // intersection y\n            usb.push(bindWith(scrollbar, \"height\", CSSUnitUtils.asPx(anchorBox[3]), handleStyleChange)); // intersection height\n        }\n    } else {\n        // Regular bounding box: [x, y, width, height, right, bottom]\n        if (axis === 'horizontal') {\n            // Position at bottom of content area\n            usb.push(bindWith(scrollbar, \"left\", CSSUnitUtils.asPx(anchorBox[0]), handleStyleChange));     // x\n            usb.push(bindWith(scrollbar, \"top\", CSSUnitUtils.asPx(anchorBox[5]), handleStyleChange));     // bottom\n            usb.push(bindWith(scrollbar, \"width\", CSSUnitUtils.asPx(anchorBox[2]), handleStyleChange));  // width\n        } else {\n            // Position at right of content area\n            usb.push(bindWith(scrollbar, \"left\", CSSUnitUtils.asPx(anchorBox[4]), handleStyleChange));    // right\n            usb.push(bindWith(scrollbar, \"top\", CSSUnitUtils.asPx(anchorBox[1]), handleStyleChange));     // y\n            usb.push(bindWith(scrollbar, \"height\", CSSUnitUtils.asPx(anchorBox[3]), handleStyleChange)); // height\n        }\n    }\n\n    return () => { usb?.forEach?.(ub=>ub?.()); };\n};\n","import { numberRef, addToCallChain } from \"fest/object\";\nimport { addEvent, getBoundingOrientRect } from \"fest/dom\";\n\n//\nconst computeIntersectionRect = (anchor: HTMLElement, root: HTMLElement = document.documentElement, includeExtendedInfo = false) => {\n    // Get root rectangle (viewport or container)\n    const rootRect = getBoundingOrientRect(root) ?? root?.getBoundingClientRect?.();\n\n    // Get anchor element rectangle\n    const anchorRect = getBoundingOrientRect(anchor) ?? anchor?.getBoundingClientRect?.();\n    if (!anchorRect) {\n        return includeExtendedInfo ? {\n            intersection: { left: 0, top: 0, right: 0, bottom: 0, width: 0, height: 0 },\n            anchor: { left: 0, top: 0, width: 0, height: 0 },\n            root: rootRect\n        } : { left: 0, top: 0, right: 0, bottom: 0, width: 0, height: 0 };\n    }\n\n    // Calculate intersection rectangle\n    const intersectionLeft = Math.max(rootRect.left, anchorRect.left);\n    const intersectionTop = Math.max(rootRect.top, anchorRect.top);\n    const intersectionRight = Math.min(rootRect.right, anchorRect.right);\n    const intersectionBottom = Math.min(rootRect.bottom, anchorRect.bottom);\n\n    // Check if there's actually an intersection\n    const hasIntersection = intersectionRight > intersectionLeft && intersectionBottom > intersectionTop;\n\n    const intersection = hasIntersection ? {\n        left: intersectionLeft,\n        top: intersectionTop,\n        right: intersectionRight,\n        bottom: intersectionBottom,\n        width: intersectionRight - intersectionLeft,\n        height: intersectionBottom - intersectionTop\n    } : { left: 0, top: 0, right: 0, bottom: 0, width: 0, height: 0 };\n\n    if (includeExtendedInfo) {\n        return {\n            intersection,\n            anchor: anchorRect,\n            root: rootRect,\n            // Additional properties for shadow/filter calculations\n            anchorLeft: anchorRect.left,\n            anchorTop: anchorRect.top,\n            anchorRight: anchorRect.right,\n            anchorBottom: anchorRect.bottom,\n            anchorWidth: anchorRect.width,\n            anchorHeight: anchorRect.height,\n            rootLeft: rootRect.left,\n            rootTop: rootRect.top,\n            rootWidth: rootRect.width,\n            rootHeight: rootRect.height\n        };\n    }\n\n    return intersection;\n};\n\n\n\n// may be used for underlying dynamic shadows and clipping masks\nexport function intersectionBoxAnchorRef(anchor: HTMLElement, options?: {\n    root?: HTMLElement,\n    observeResize?: boolean,\n    observeMutations?: boolean,\n    observeIntersection?: boolean,\n}) {\n    if (!anchor) return () => { };\n    const area = [\n        numberRef(0), numberRef(0), numberRef(0), numberRef(0), numberRef(0), numberRef(0)\n    ]\n    const { root = anchor?.offsetParent ?? document.documentElement, iterateResize = true, iterateMutations = true, iterateIntersection = true } = options || {};\n\n    //\n    function updateArea(intersectionRect?: any) {\n        const rect: any = intersectionRect ? {\n            left: intersectionRect.left,\n            top: intersectionRect.top,\n            width: intersectionRect.width,\n            height: intersectionRect.height,\n            right: intersectionRect.right,\n            bottom: intersectionRect.bottom\n        } : computeIntersectionRect(anchor as HTMLElement, root as HTMLElement, false);\n        area[0].value = rect?.left ?? 0; // intersection x\n        area[1].value = rect?.top ?? 0;  // intersection y\n        area[2].value = rect?.width ?? 0; // intersection width\n        area[3].value = rect?.height ?? 0; // intersection height\n        area[4].value = rect?.right ?? 0;  // intersection right\n        area[5].value = rect?.bottom ?? 0; // intersection bottom\n    }\n\n    //\n    let resizeObs: ResizeObserver | undefined;\n    if (observeResize && \"ResizeObserver\" in window && typeof ResizeObserver != \"undefined\") {\n        resizeObs = typeof ResizeObserver != \"undefined\" ? new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                updateArea(entry.contentRect);\n            }\n        }) : undefined;\n        resizeObs?.observe(anchor);\n    }\n\n    //\n    let mutationObs: MutationObserver | undefined;\n    if (observeMutations) {\n        mutationObs = typeof MutationObserver != \"undefined\" ? new MutationObserver((mutations) => {\n            for (const mutation of mutations) {\n                updateArea(computeIntersectionRect(anchor as HTMLElement, root as HTMLElement, false));\n            }\n        }) : undefined;\n        mutationObs?.observe(anchor, { attributes: true, childList: true, subtree: true });\n    }\n\n    //\n    let intersectionObs: IntersectionObserver | undefined;\n    if (observeIntersection) {\n        intersectionObs = typeof IntersectionObserver != \"undefined\" ? new IntersectionObserver((entries) => {\n            for (const entry of entries) {\n                updateArea(entry.intersectionRect as any);\n            }\n        }, {\n            root: root instanceof HTMLElement ? root : null,\n            threshold: [0],\n            rootMargin: \"0px\"\n        }) : undefined;\n        intersectionObs?.observe(anchor);\n    }\n\n    //\n    const listening = [\n        addEvent(root, \"scroll\", () => updateArea(computeIntersectionRect(anchor as HTMLElement, root as HTMLElement, false)), { capture: true }),\n        addEvent(window, \"resize\", () => updateArea(computeIntersectionRect(anchor as HTMLElement, root as HTMLElement, false))),\n        addEvent(window, \"scroll\", () => updateArea(computeIntersectionRect(anchor as HTMLElement, root as HTMLElement, false)), { capture: true })\n    ];\n\n    //\n    updateArea(computeIntersectionRect(anchor as HTMLElement, root as HTMLElement, false));\n\n    //\n    function destroy() {\n        listening.forEach(ub=>ub?.());\n        resizeObs?.disconnect?.();\n        mutationObs?.disconnect?.();\n        intersectionObs?.disconnect?.();\n    }\n\n    //\n    if (destroy) {\n        area.forEach(ub=>addToCallChain(ub, Symbol.dispose, destroy));\n    }\n    return area;\n}\n\n\n// Enhanced intersection box anchor with detailed geometry information\nexport function enhancedIntersectionBoxAnchorRef(anchor: HTMLElement, options?: {\n    root?: HTMLElement,\n    observeResize?: boolean,\n    observeMutations?: boolean,\n    observeIntersection?: boolean,\n}) {\n    if (!anchor) return () => { };\n\n    // Extended area array: [ix, iy, iwidth, iheight, iright, ibottom, ax, ay, awidth, aheight, rx, ry, rwidth, rheight]\n    const area = [\n        numberRef(0), numberRef(0), numberRef(0), numberRef(0), numberRef(0), numberRef(0), // intersection: x, y, width, height, right, bottom\n        numberRef(0), numberRef(0), numberRef(0), numberRef(0), // anchor: x, y, width, height\n        numberRef(0), numberRef(0), numberRef(0), numberRef(0)  // root: x, y, width, height\n    ];\n\n    //\n    const { root = anchor?.offsetParent ?? document.documentElement, iterateResize = true, iterateMutations = true, iterateIntersection = true } = options || {};\n\n    //\n    function updateArea(intersectionRect?: any) {\n        const data = intersectionRect ? {\n            intersection: {\n                left: intersectionRect.left,\n                top: intersectionRect.top,\n                right: intersectionRect.right,\n                bottom: intersectionRect.bottom,\n                width: intersectionRect.width,\n                height: intersectionRect.height\n            },\n            anchor: getBoundingOrientRect(anchor) ?? anchor?.getBoundingClientRect?.(),\n            root: (root instanceof HTMLElement ? (getBoundingOrientRect(root) ?? root?.getBoundingClientRect?.()) : null) ?? {\n                left: 0, top: 0, right: globalThis.innerWidth, bottom: globalThis.innerHeight,\n                width: globalThis.innerWidth, height: globalThis.innerHeight\n            }\n        } : computeIntersectionRect(anchor as HTMLElement, root as HTMLElement, true);\n\n        if (!data.anchor) return;\n\n        // Intersection properties\n        area[0].value = data.intersection.left ?? 0;     // intersection x\n        area[1].value = data.intersection.top ?? 0;      // intersection y\n        area[2].value = data.intersection.width ?? 0;    // intersection width\n        area[3].value = data.intersection.height ?? 0;   // intersection height\n        area[4].value = data.intersection.right ?? 0;    // intersection right\n        area[5].value = data.intersection.bottom ?? 0;   // intersection bottom\n\n        // Anchor properties\n        area[6].value = data.anchor.left ?? 0;           // anchor x\n        area[7].value = data.anchor.top ?? 0;            // anchor y\n        area[8].value = data.anchor.width ?? 0;          // anchor width\n        area[9].value = data.anchor.height ?? 0;         // anchor height\n\n        // Root properties\n        area[10].value = data.root.left ?? 0;            // root x\n        area[11].value = data.root.top ?? 0;             // root y\n        area[12].value = data.root.width ?? 0;           // root width\n        area[13].value = data.root.height ?? 0;          // root height\n    }\n\n    //\n    let resizeObs: ResizeObserver | undefined;\n    if (observeResize && \"ResizeObserver\" in window && typeof ResizeObserver != \"undefined\") {\n        resizeObs = typeof ResizeObserver != \"undefined\" ? new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                updateArea(entry.contentRect);\n            }\n        }) : undefined;\n        resizeObs?.observe(anchor);\n    }\n\n    //\n    let mutationObs: MutationObserver | undefined;\n    if (observeMutations) {\n        mutationObs = typeof MutationObserver != \"undefined\" ? new MutationObserver((mutations) => {\n            for (const mutation of mutations) {\n                updateArea(computeIntersectionRect(anchor as HTMLElement, root as HTMLElement, true).intersection);\n            }\n        }) : undefined;\n        mutationObs?.observe(anchor, { attributes: true, childList: true, subtree: true });\n    }\n\n    //\n    let intersectionObs: IntersectionObserver | undefined;\n    if (observeIntersection) {\n        intersectionObs = typeof IntersectionObserver != \"undefined\" ? new IntersectionObserver((entries) => {\n            for (const entry of entries) {\n                updateArea(entry.intersectionRect as any);\n            }\n        }, {\n            root: root instanceof HTMLElement ? root : null,\n            threshold: [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0],\n            rootMargin: \"0px\"\n        }) : undefined;\n        intersectionObs?.observe(anchor);\n    }\n\n    //\n    const listening = [\n        addEvent(root, \"scroll\", () => updateArea(computeIntersectionRect(anchor as HTMLElement, root as HTMLElement, true).intersection), { capture: true }),\n        addEvent(window, \"resize\", () => updateArea(computeIntersectionRect(anchor as HTMLElement, root as HTMLElement, true).intersection)),\n        addEvent(window, \"scroll\", () => updateArea(computeIntersectionRect(anchor as HTMLElement, root as HTMLElement, true).intersection), { capture: true })\n    ];\n\n    //\n    updateArea(computeIntersectionRect(anchor as HTMLElement, root as HTMLElement, true).intersection);\n\n    //\n    function destroy() {\n        listening.forEach(ub => ub?.());\n        resizeObs?.disconnect?.();\n        mutationObs?.disconnect?.();\n        intersectionObs?.disconnect?.();\n    }\n\n    //\n    if (destroy) {\n        area.forEach(ub => addToCallChain(ub, Symbol.dispose, destroy));\n    }\n\n    return area;\n}\n","import { makeAnchorElement } from \"../css-ref/CSSAnchor\";\nimport { bindScrollbarPosition, boundingBoxAnchorRef } from \"../space-ref/BBoxAnchor\";\nimport { enhancedIntersectionBoxAnchorRef } from \"../space-ref/IntersectionAnchor\";\n\n//\nexport const getParentOrShadowRoot = (element: HTMLElement): HTMLElement|ShadowRoot|undefined => {\n    if ((element as any)?.parentElement) {\n        return (!((element as any)?.parentElement instanceof DocumentFragment) ? (element as any)?.parentElement as HTMLElement : undefined);\n    }\n    return (element as any)?.host?.shadowRoot as ShadowRoot;\n}\n\n//\nexport const observeDisconnect = (element: Element, handleMutation) => {\n    if (!element?.isConnected) {\n        return handleMutation();\n    }\n\n    //\n    const observer = new MutationObserver((mutationList, observer) => {\n        for (const mutation of mutationList) {\n            if (mutation.type == \"childList\") {\n                if (Array.from(mutation?.removedNodes||[]).some((node)=>(node === element || node?.contains?.(element)))) {\n                    queueMicrotask(()=>handleMutation(mutation));\n                    observer?.disconnect?.();\n                }\n            }\n        }\n    });\n\n    //\n    const parent = getParentOrShadowRoot(element as HTMLElement) ?? document.documentElement;\n    const observed = (parent instanceof HTMLElement ? parent : parent?.host) ?? parent;\n    queueMicrotask(() => observer.observe(observed, {\n        subtree: true,\n        childList: true\n    }));\n}\n\n//\nexport const observeConnect = (element: Element, handleMutation) => {\n    if (element?.isConnected) {\n        return handleMutation();\n    }\n\n    //\n    const observer = new MutationObserver((mutationList, observer) => {\n        for (const mutation of mutationList) {\n            if (mutation.type == \"childList\") {\n                if (Array.from(mutation?.addedNodes||[]).some((node)=>(node === element || node?.contains?.(element)))) {\n                    queueMicrotask(()=>handleMutation(mutation));\n                    observer?.disconnect?.();\n                }\n            }\n        }\n    });\n\n    //\n    const parent = getParentOrShadowRoot(element as HTMLElement) ?? document.documentElement;\n    const observed = (parent instanceof HTMLElement ? parent : parent?.host) ?? parent;\n    queueMicrotask(() => observer.observe(observed, {\n        subtree: true,\n        childList: true\n    }));\n}\n\n//\nexport const appendAsOverlay = (anchor: HTMLElement|null, overlay?: HTMLElement|null, self?: HTMLElement|null, options?: {\n    root?: HTMLElement,\n    zIndexShift?: number,\n    placement?: \"fill\" | \"bottom\" | \"top\" | \"left\" | \"right\" | \"center\" | \"scrollbar-x\" | \"scrollbar-y\",\n    inset?: number,\n    size?: string,\n    transformOrigin?: string,\n    useIntersection?: boolean,\n}) => {\n    const {\n        root = window,\n        zIndexShift = 1,\n        placement = \"fill\",\n        inset = 0,\n        size = \"100%\",\n        transformOrigin = \"50% 50%\",\n        useIntersection = false\n    } = options || {};\n    anchor ??= (self?.children?.[0] as HTMLElement) ?? anchor;\n\n    //\n    if (!anchor && (self?.children?.length ?? 0) < 1) {\n        // fix anchor problems\n        const fillAnchorBox = document.createElement(\"div\");\n        fillAnchorBox.classList.add(\"ui-window-frame-anchor-box\");\n        fillAnchorBox.style.position = \"relative\";\n        fillAnchorBox.style.inlineSize = \"stretch\";\n        fillAnchorBox.style.blockSize = \"stretch\";\n        fillAnchorBox.style.zIndex = String(zIndexShift + 0);\n        fillAnchorBox.style.pointerEvents = \"none\";\n        fillAnchorBox.style.opacity = \"1\";\n        fillAnchorBox.style.visibility = \"visible\";\n        fillAnchorBox.style.backgroundColor = \"transparent\";\n        (self as any)?.append?.(anchor = fillAnchorBox);\n    }\n\n    //\n    if (anchor == null || overlay == null) return;\n    const anchorBinder = makeAnchorElement(anchor);\n\n    // Handle scrollbar-specific placements\n    if (placement === \"scrollbar-x\") {\n        anchorBinder.connectElement(overlay, {\n            placement: \"bottom\",\n            zIndexShift,\n            inset,\n            size,\n            transformOrigin\n        });\n    } else if (placement === \"scrollbar-y\") {\n        anchorBinder.connectElement(overlay, {\n            placement: \"right\",\n            zIndexShift,\n            inset,\n            size,\n            transformOrigin\n        });\n    } else {\n        anchorBinder.connectElement(overlay, {\n            placement,\n            zIndexShift,\n            inset,\n            size,\n            transformOrigin\n        });\n    }\n\n    //\n    observeConnect(anchor, () => {\n        const parent = getParentOrShadowRoot(anchor) ?? self;\n        const styled = parent instanceof HTMLElement ? parent : parent?.host;\n        (styled as HTMLElement)?.style?.setProperty?.(\"anchor-scope\", anchorBinder.anchorId);\n        (anchor as any)?.after?.(overlay);\n        observeDisconnect(parent as Element, () => overlay?.remove?.());\n    });\n\n    //\n    return anchor;\n}\n\n// Enhanced scrollbar overlay with reactive positioning\nexport const appendScrollbarOverlay = (content: HTMLElement, scrollbar: HTMLElement, axis: 'horizontal' | 'vertical', options?: {\n    zIndexShift?: number,\n    autoPosition?: boolean,\n    useIntersection?: boolean,\n    theme?: string,\n}) => {\n    const { zIndexShift = 1, autoPosition = true, useIntersection = false, theme = \"default\" } = options || {};\n\n    // Set theme class\n    scrollbar.classList.add(`scrollbar-theme-${theme}`);\n    scrollbar.setAttribute(\"data-axis\", axis);\n\n    let cleanupFunctions: (() => void)[] = [];\n\n    if (autoPosition) {\n        // Use enhanced intersection box for precise positioning\n        if (useIntersection) {\n            const intersectionBox: any[] = enhancedIntersectionBoxAnchorRef(content as HTMLElement, {\n                root: window as any,\n                observeResize: true,\n                observeMutations: true,\n                observeIntersection: true\n            }) as any[];\n\n            // Position scrollbar using reactive bindings\n            cleanupFunctions.push(bindScrollbarPosition(scrollbar, intersectionBox as any[], axis, {\n                useIntersection: true,\n                zIndexShift\n            }));\n        } else {\n            // Use standard bounding box with reactive bindings\n            const box: any[] = boundingBoxAnchorRef(content as HTMLElement, {\n                observeResize: true,\n                observeMutations: true\n            }) as any[];\n\n            // Position scrollbar using reactive bindings\n            cleanupFunctions.push(bindScrollbarPosition(scrollbar, box, axis, {\n                useIntersection: false,\n                zIndexShift\n            }));\n        }\n    }\n\n    // Add scrollbar to DOM\n    if (!scrollbar.parentNode) {\n        document.body.appendChild(scrollbar);\n    }\n\n    // Set up removal on content disconnect with cleanup\n    observeDisconnect(content, () => {\n        cleanupFunctions.forEach(cleanup => cleanup());\n        scrollbar.remove();\n    });\n\n    //\n    return scrollbar;\n};\n\n// Example usage function for testing reactive scrollbar overlays\nexport const createReactiveScrollbarOverlay = (content: HTMLElement, axis: 'horizontal' | 'vertical' = 'vertical') => {\n    // Create scrollbar element\n    const scrollbar = document.createElement('div');\n    scrollbar.className = `reactive-scrollbar reactive-scrollbar-${axis}`;\n    scrollbar.style.background = 'rgba(0,0,0,0.3)';\n    scrollbar.style.borderRadius = '4px';\n    scrollbar.style.position = 'absolute';\n    scrollbar.style.zIndex = '1000';\n\n    if (axis === 'horizontal') {\n        scrollbar.style.height = '8px';\n        scrollbar.style.width = '100px';\n    } else {\n        scrollbar.style.width = '8px';\n        scrollbar.style.height = '100px';\n    }\n\n    // Use reactive positioning\n    return appendScrollbarOverlay(content, scrollbar, axis, {\n        autoPosition: true,\n        useIntersection: true,\n        theme: 'default'\n    });\n};\n","import { DOMMixin } from \"fest/dom\";\nimport { appendAsOverlay } from \"./AnchorOverlay\";\n\n//\nconst registered = new Map();\n\n//\nexport const registerOverlayElement = (name, construct) => {\n    const withIt = new WeakMap();\n\n    //\n    const bindWith = (content: any, holder?: any, inputChange?: any|null) => {\n        if (content?.style?.anchorName || withIt?.has?.(content)) return false;\n        if (content) {\n            const self: any = construct?.(content, holder, inputChange);\n            withIt?.set?.(content, self); appendAsOverlay(content, self, holder);\n        }\n        return true;\n    }\n\n    //\n    class OverlayModifier extends DOMMixin {\n        constructor(name?) { super(name); }\n\n        // @ts-ignore\n        connect(ws) {\n            const self: any = ws?.deref?.() ?? ws;\n            if (withIt?.has?.(self)) return;\n            bindWith(self);\n        }\n    }\n\n    //\n    const pack = [withIt, bindWith, OverlayModifier];\n    registered.set(name, pack);\n    new OverlayModifier(name);\n    return pack;\n}\n","//import { visibleRef, H, Q } from \"fest/lure\";\nimport { addEvent } from \"fest/dom\";\nimport { visibleRef } from \"../../lure/core/Refs\";\nimport { addProxiedEvent } from \"../controllers/LazyEvents\";\nimport { bindWhileConnected } from \"../../lure/core/Binding\";\n\n//\nimport { registerContextMenu } from \"../tasking/BackNavigation\";\nimport Q from \"../../lure/node/Queried\";\nimport H from \"../../lure/node/Syntax\";\nimport { boundingBoxAnchorRef } from \"../space-ref/BBoxAnchor\";\nimport { makeInterruptTrigger } from \"../controllers/Trigger\";\nimport { withInsetWithPointer } from \"../../lure/core/Binding\";\n\n//\nexport interface RefBool { value?: boolean; }\nexport interface MenuItem {\n    id: string;\n    label: string;\n    icon: string;\n    action?: (initiator: HTMLElement, item: MenuItem, ev: MouseEvent) => void;\n}\n\n//\nexport interface CtxMenuDesc {\n    items?: MenuItem[][];\n    defaultAction?: (initiator: HTMLElement, item: MenuItem, ev: MouseEvent) => void;\n    buildItems?: (details: { event: MouseEvent; initiator: HTMLElement; trigger: HTMLElement; menu: HTMLElement; ctxMenuDesc: CtxMenuDesc }) => MenuItem[][] | void;\n    onBeforeOpen?: (details: { event: MouseEvent; initiator: HTMLElement; trigger: HTMLElement; menu: HTMLElement; ctxMenuDesc: CtxMenuDesc }) => boolean | void;\n    context?: any;\n    openedWith?: {\n        event: MouseEvent;\n        initiator: HTMLElement;\n        element: HTMLElement;\n        close: () => void;\n        context?: any;\n    } | null;\n}\n\n//\nexport const itemClickHandle = (ev: MouseEvent, ctxMenuDesc: CtxMenuDesc) => {\n    const id = Q(`[data-id]`, ev?.target as HTMLElement, 0, \"parent\")?.getAttribute?.(\"data-id\");\n    const item: MenuItem | undefined = ctxMenuDesc?.items\n        ?.find?.((I?: MenuItem[]) => I?.some?.((I: MenuItem) => I?.id == id))\n        ?.find?.((I: MenuItem) => I?.id == id);\n\n    (item?.action ?? ctxMenuDesc?.defaultAction)?.(\n        ctxMenuDesc?.openedWith?.initiator as HTMLElement,\n        item as MenuItem,\n        ctxMenuDesc?.openedWith?.event ?? ev\n    );\n\n    ctxMenuDesc?.openedWith?.close?.();\n\n    const vr = getBoundVisibleRef(ctxMenuDesc?.openedWith?.element as HTMLElement);\n    if (vr != null) vr.value = false;\n};\n\nconst visibleMap = new WeakMap<HTMLElement, RefBool | null>();\n\n// Proxied trigger handling: guarantees ONE real `contextmenu` listener on documentElement.\n// preventDefault/stopImmediatePropagation ONLY when the handler returns truthy (\"handled\").\nconst registerCtxMenu = typeof document !== \"undefined\" && document?.documentElement\n    ? addProxiedEvent<MouseEvent>(\n        document.documentElement,\n        \"contextmenu\",\n        { capture: true, passive: false },\n        { strategy: \"closest\", preventDefault: \"handled\", stopImmediatePropagation: \"handled\" }\n    )\n    : (_el: any, _handler: any) => () => { };\n\nconst getBoundVisibleRef = (menuElement: HTMLElement): RefBool | null => {\n    if (menuElement == null) return null; // @ts-ignore\n    return visibleMap?.getOrInsertComputed?.(menuElement, () => visibleRef(menuElement, false)) as RefBool;\n};\n\nexport const bindMenuItemClickHandler = (menuElement: HTMLElement, menuDesc: CtxMenuDesc) => {\n    const handler = (ev: MouseEvent) => { itemClickHandle(ev, menuDesc); };\n    const listening = addEvent(menuElement, \"click\", handler, { composed: true });\n    return () => listening?.();\n};\n\nexport const getGlobalContextMenu = (parent: HTMLElement | Document = document) => {\n    let menu = Q('ui-modal[type=\"contextmenu\"]', parent as HTMLElement);\n    if (!menu) {\n        menu = H`<ui-modal type=\"contextmenu\"></ui-modal>`;\n        (parent instanceof Document ? parent.body : parent).append(menu);\n    }\n    return menu as HTMLElement;\n};\n\nexport const makeMenuHandler = (\n    triggerElement: HTMLElement,\n    placement: any,\n    ctxMenuDesc: CtxMenuDesc,\n    menuElement?: HTMLElement\n) => {\n    return (ev: MouseEvent) => {\n        let handled = false;\n\n        const menu = menuElement || getGlobalContextMenu();\n        const visibleRef = getBoundVisibleRef(menu);\n\n        const initiator = (ev?.target as HTMLElement | null) ?? triggerElement ?? (document.elementFromPoint(ev?.clientX || 0, ev?.clientY || 0) as HTMLElement);\n        const details = { event: ev, initiator: initiator as HTMLElement, trigger: triggerElement, menu: menu, ctxMenuDesc };\n        ctxMenuDesc.context = details;\n\n        if (ctxMenuDesc?.onBeforeOpen?.(details) === false) {\n            return handled;\n        }\n\n        const builtItems = ctxMenuDesc?.buildItems?.(details);\n        if (Array.isArray(builtItems) && builtItems.length) {\n            ctxMenuDesc.items = builtItems;\n        }\n\n        if (visibleRef?.value && ev?.type !== \"contextmenu\") {\n            visibleRef.value = false;\n            ctxMenuDesc?.openedWith?.close?.();\n            return handled;\n        }\n\n        if (initiator && visibleRef) {\n            handled = true;\n\n            // TODO: use reactive mapped ctx-menu element\n            menu.innerHTML = \"\";\n            visibleRef.value = true;\n\n            menu?.append?.(\n                ...(ctxMenuDesc?.items\n                    ?.map?.((section, sIdx) => {\n                        const items = section?.map?.((item) =>\n                            H`<li data-id=${item?.id || \"\"}><ui-icon icon=${item?.icon || \"\"}></ui-icon><span>${item?.label || \"\"}</span></li>`\n                        );\n                        const separator = (section?.length > 1 && sIdx !== ((ctxMenuDesc?.items?.length || 0) - 1))\n                            ? H`<li class=\"ctx-menu-separator\"></li>`\n                            : null;\n                        return [...items, separator];\n                    })\n                    ?.flat?.()\n                    ?.filter?.((E) => !!E) || [])\n            );\n\n            const where = withInsetWithPointer?.(menu, placement?.(ev, initiator));\n            const unbindClick = bindMenuItemClickHandler(menu, ctxMenuDesc);\n\n            // Close when interacting outside the menu.\n            const untrigger = makeInterruptTrigger?.(\n                menu,\n                (e: MouseEvent) => { // @ts-ignore\n                    const menuAny = menu as any;\n                    if (!(menu?.contains?.((e?.target ?? null) as any) || e?.target == (menuAny?.element ?? menuAny)) || !e?.target) {\n                        ctxMenuDesc?.openedWith?.close?.();\n                        const vr = getBoundVisibleRef(menu);\n                        if (vr != null) vr.value = false;\n                    }\n                },\n                [\"click\", \"pointerdown\", \"scroll\"]\n            );\n\n            // While open: suppress native context menu on the menu element itself.\n            const unmenuCtx = registerCtxMenu(menu, () => true);\n\n            ctxMenuDesc.openedWith = {\n                initiator: initiator as HTMLElement,\n                element: menu,\n                event: ev,\n                context: ctxMenuDesc?.context,\n                close() {\n                    visibleRef.value = false;\n                    ctxMenuDesc.openedWith = null;\n                    unbindClick?.();\n                    where?.();\n                    untrigger?.();\n                    unmenuCtx?.();\n                    // @ts-ignore\n                    if (ctxMenuDesc._backUnreg) { ctxMenuDesc._backUnreg(); ctxMenuDesc._backUnreg = null; }\n                },\n            };\n\n            // Register with back navigation\n            // @ts-ignore\n            if (!ctxMenuDesc._backUnreg && visibleRef) {\n                // @ts-ignore\n                ctxMenuDesc._backUnreg = registerContextMenu(menu, visibleRef, () => {\n                    ctxMenuDesc?.openedWith?.close?.();\n                });\n            }\n        }\n\n        return handled;\n    };\n};\n\n// use cursor as anchor based on contextmenu\nexport const ctxMenuTrigger = (triggerElement: HTMLElement, ctxMenuDesc: CtxMenuDesc, menuElement?: HTMLElement) => {\n    const evHandler = makeMenuHandler(triggerElement, (ev) => [ev?.clientX, ev?.clientY, 200], ctxMenuDesc, menuElement);\n\n    // Activate trigger + global listener only when trigger element is actually connected.\n    const unbindConnected = bindWhileConnected(triggerElement, () => {\n        return registerCtxMenu(triggerElement, evHandler as any);\n    });\n\n    return () => {\n        unbindConnected?.();\n    };\n};\n\n// bit same as contextmenu, but different by anchor and trigger (from element drop-down)\nexport const dropMenuTrigger = (triggerElement: HTMLElement, ctxMenuDesc: CtxMenuDesc, menuElement?: HTMLElement) => {\n    const menu = menuElement || Q('ui-modal[type=\"menulist\"]', document.body) || getGlobalContextMenu();\n\n    const anchorElement = triggerElement; // @ts-ignore\n    const evHandler = makeMenuHandler(triggerElement, (ev) => boundingBoxAnchorRef(anchorElement)?.slice?.(0, 3), ctxMenuDesc, menu);\n    const untrigger = makeInterruptTrigger?.(\n        menu,\n        (ev: MouseEvent) => { // @ts-ignore\n            if (!(menu?.contains?.(ev?.target) || ev?.target == (triggerElement?.element ?? triggerElement)) || !ev?.target) {\n                ctxMenuDesc?.openedWith?.close?.();\n                const vr = getBoundVisibleRef(menu);\n                if (vr != null) vr.value = false;\n            }\n        },\n        [\"click\", \"pointerdown\", \"scroll\"]\n    );\n\n    const listening = addEvent(triggerElement, \"click\", evHandler, { composed: true });\n    return () => { untrigger?.(); listening?.(); };\n};\n","import { addEvent, setChecked, handleStyleChange } from \"fest/dom\";\nimport { computed, conditional, numberRef, affected } from \"fest/object\";\nimport { bindDraggable } from \"../controllers/PointerAPI\";\n\n//\nimport { makeShiftTrigger } from \"../controllers/Trigger\";\nimport { bindWith, bindCtrl } from \"../../lure/core/Binding\";\n\n// Enhanced reactive math and CSS integration\nimport { operated, CSSBinder } from \"fest/lure\";\nimport { ReactiveElementSize } from \"../css-ref/Utils\";\nimport { ReactiveTransform } from \"../css-ref/Utils\";\n\n//\n/* ***************************************************************************************** *\n * Here few version of value and coordinates                                                 *\n * #. [type]  : [components]:        , [relative_version], # commetary                       *\n * 1. value   : [value, min, max]    , value_shift       , # used for value                  *\n * 2. pointer : [x, y]               , pointer_shift     , # used from events                *\n * 3. inp_box : [offset, width, zoom],                   , # used for pointer                *\n * 4. clamped : [from 0 to 1]        ,                   , # used for styles, in conversions *\n * 5. dragging: [dx, dy]             ,                   , # relative from current offset    *\n * ***************************************************************************************** */\n\n// Enhanced reactive utilities with CSS integration\nexport const boolDepIconRef = (cnd)=> conditional(cnd, \"badge-check\", \"badge\");\n\nexport const indicationRef = (ref)=> computed(ref, (v)=>(parseFloat(v) || 0)?.toLocaleString?.('en-US', {\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 1\n}));\n\n// Reactive input position calculation with CSS integration\nexport const reactiveInputPosition = (input: HTMLInputElement, container?: HTMLElement) => {\n    const elementSize = container ? new ReactiveElementSize(container) : null;\n    const value = clampedValueRef(input);\n\n    return operated([value, elementSize?.width || numberRef(100)], () => {\n        const containerWidth = elementSize?.width.value || 100;\n        const percentage = value.value;\n        return percentage * containerWidth;\n    });\n};\n\n// Reactive input handle transform with CSS matrix support\nexport const reactiveInputHandleTransform = (input: HTMLInputElement, container?: HTMLElement) => {\n    const position = reactiveInputPosition(input, container);\n    const transform = new ReactiveTransform();\n\n    // Create reactive translate transform\n    return operated([position], () => `translateX(${position.value}px)`);\n};\n\n// currently, unused\nexport const convertValueToPointer = (input)=>{\n    const $cmp = getInputValues(input);\n    const [value, min, max] = $cmp;\n    if (input?.type == \"number\" || input?.type == \"range\") {\n        return (value - min) / (max - min);\n    } else\n    if (input?.type == \"checkbox\") {\n        return value ? 1 : 0;\n    } else\n    if (input?.type == \"radio\") {\n        const all = [...input?.parentNode?.querySelectorAll?.('input[type=\"radio\"]')], len = all?.length, nth = all.indexOf(input);\n        return nth / (len - 1);\n    }\n    return value;\n}\n\n// \"relative\"\nexport const convertPointerToValueShift = (input, shift, container)=>{\n    // relative pointer coordinate info [0, 1]\n    const dec = (shift?.[0]?.value || 0) / (container?.offsetWidth || 1);\n    const $cmp = getInputValues(input), [_, min, max] = $cmp;\n\n    // compute value shift\n    if (input?.type == \"checkbox\") { return Math.sign(shift?.[0]?.value); } else\n    if (input?.type == \"range\" || input?.type == \"number\") { return dec * (max - min); } else\n    if (input?.type == \"radio\") { return Math.round(dec * max); }\n    return dec;\n}\n\n// get correct value for input types\nexport const correctValue = (input, val)=>{\n    if (input?.type == \"number\" || input?.type == \"range\")\n        { return val; } else\n    if (input?.type == \"checkbox\")\n        { return val > 0.5 ? true : false;\n    } else\n    if (input?.type == \"radio\") {\n        const all = [...input?.parentNode?.querySelectorAll?.('input[type=\"radio\"]')], len = all?.length;\n        return Math.max(Math.min(Math.round(val), len), 0);\n    }\n}\n\n// \"absolute\"\nexport const convertPointerToValue = (input, relateFromCorner, container)=>{\n    const clamped = relateFromCorner / (container?.offsetWidth || 1); // [0, 1]);\n    const $cmp = getInputValues(input), [_, min, max] = $cmp;\n    const val = clamped * (max - min) + min;\n    return correctValue(input, val);\n}\n\n//\nexport const getValueWithShift = (input, valueShift)=>{\n    const $cmp = getInputValues(input);\n    return correctValue(input, $cmp?.[0] + valueShift);\n}\n\n//\nexport const setInputValue = (input, value)=>{\n    const $cmp = getInputValues(input), [_, min, max] = $cmp;\n    if (input?.type == \"number\" || input?.type == \"range\")\n        { if (value != input.valueAsNumber) { input.valueAsNumber = value; input?.dispatchEvent?.(new Event(\"change\", { bubbles: true })); } } else\n    if (input?.type == \"checkbox\")\n        { setChecked(input, value > 0.5 ? true : false); } else\n    if (input?.type == \"radio\") {\n        const all = [...input?.parentNode?.querySelectorAll?.('input[type=\"radio\"]')];\n        if (value != 0) { setChecked(all[Math.max(Math.min(Math.round(value), max), min)], value); }\n    }\n}\n\n\n\n// combined getValueWithShift with setValue\nexport const setValueByShift = (input, valueShift) => {\n    return setInputValue(input, getValueWithShift(input, valueShift));\n}\n\n//\nexport const setValueByPointer = (input, pointer, container)=>{\n    return setInputValue(input, convertPointerToValue(input, pointer, container));\n}\n\n\n\n// TODO: support animation\nexport const resolveDragging = (input, dragging, container) => {\n    // in case of input is HTMLInputElement\n    setValueByShift(input, convertPointerToValueShift(input, dragging, container));\n\n\n    // reset dragging coordinate\n    try { dragging[0].value = 0, dragging[1].value = 0; } catch(e) {};\n    return [0, 0];\n};\n\n//\nexport const getInputValues = (inp): [number, number, number] =>{\n    if ((inp?.type == \"number\" || inp?.type == \"range\") && inp?.valueAsNumber != null) { return [(inp?.valueAsNumber || 0), parseFloat(inp?.min || 0), parseFloat(inp?.max || 0)]; } else\n    if (inp?.type == \"checkbox\") { return [inp?.checked ? 1 : 0, 0, 1]; } else\n    if (inp?.type == \"radio\") {\n        const all = [...inp?.parentNode?.querySelectorAll?.('input[type=\"radio\"]')];\n        const len = all?.length, nth = all?.indexOf?.(inp) ?? -1;\n        return [nth, 0, len-1];\n    }\n    return [0, 0, 0];\n}\n\n//\nexport const progress = (value, min, max)=>{\n    return (value - min) / (max - min);\n}\n\n// get into [0, 1]\nexport const getClampedValue = (inp)=>{\n    return progress(...getInputValues(inp));\n}\n\n// reference of [0, 1]\nexport const clampedValueRef = (inp)=>{\n    const rf = numberRef(getClampedValue(inp));\n    const ctr = (ev)=>{ rf.value = getClampedValue(ev?.target ?? inp); };\n    bindCtrl?.(inp, ctr); return rf;\n}\n\n//\nexport const dragSlider = (thumb, handler, input)=>{ // @ts-ignore\n    const usedPointer = { id: -1 };\n    const correctOffset = ()=>{ try { dragging[0].value = 0, dragging[1].value = 0; } catch(e) {}; return [0, 0]; };\n    const customTrigger = (doGrab)=>{\n        const $handler = makeShiftTrigger((ev)=>{\n            thumb?.setPointerCapture?.(usedPointer.id = ev?.pointerId);\n            thumb?.setAttribute?.(\"data-dragging\", \"true\");\n            correctOffset(); doGrab?.(ev, thumb);\n        }, thumb);\n\n        const ub = addEvent(handler, \"pointerdown\", $handler);\n        const ubt = addEvent(thumb, \"pointerdown\", $handler);\n        listening.push(ub, ubt);\n        return ub;\n    };\n\n    //\n    const listening = [\n        addEvent(handler, \"click\", (ev)=>{\n            if (input?.type == \"checkbox\" || input?.type == \"radio\") { setChecked(input, input?.checked, ev); }\n        }),\n        addEvent(handler, \"pointerdown\", (ev)=>{\n            if (!(ev?.target?.matches?.(\".ui-thumb\") || ev?.target?.closest?.(\".ui-thumb\"))) {\n                if (ev?.target == (handler?.element ?? handler) || handler.contains(ev?.target)) {\n                    //correctOffset();\n                    setValueByPointer(input, (ev?.layerX || 0), handler);\n                }\n            }\n        })\n    ];\n\n    //\n    const dragging = [ numberRef(0), numberRef(0) ];\n\n    // Enhanced reactive binding with CSS transform matrices\n    const dragTransform = operated([dragging[0]], () => `translateX(${dragging[0].value}px)`);\n    const valuePosition = reactiveInputPosition(input, handler);\n\n    // Bind reactive transforms and values\n    CSSBinder.bindTransform(thumb, dragTransform);\n    CSSBinder.bindTransform(handler, dragTransform);\n\n    // Enhanced reactive value calculations\n    const relativeValue = operated([dragging[0]], (dx) =>\n        convertPointerToValueShift(input, dragging, handler)\n    );\n    const clampedValue = clampedValueRef(input);\n\n    bindWith?.(handler, \"--relate\", relativeValue, handleStyleChange);\n    bindWith?.(handler, \"--value\", clampedValue, handleStyleChange);\n    const obj = bindDraggable(customTrigger, (dragging)=>{\n        thumb?.removeAttribute?.(\"data-dragging\");\n        if (usedPointer.id >= 0)\n            { thumb?.releasePointerCapture?.(usedPointer.id); usedPointer.id = -1; }\n        resolveDragging(input, dragging, handler);\n    }, dragging, correctOffset);\n    //addToCallChain(obj, Symbol.dispose, ()=>listening.forEach(ub=>ub?.()));\n    return ()=>{\n        listening.forEach(ub=>ub?.());\n        obj?.dispose?.();\n    };\n};\n","import { lazyAddEventListener } from \"../controllers/LazyEvents\";\n\n//\nexport interface ClipboardProvider {\n    onCopy?(ev: ClipboardEvent): void | boolean;\n    onCut?(ev: ClipboardEvent): void | boolean;\n    onPaste?(ev: ClipboardEvent): void | boolean;\n}\n\n//\nconst collectProviders = (ev: ClipboardEvent, action: keyof ClipboardProvider): ClipboardProvider[] => {\n    const providers = new Set<ClipboardProvider>();\n    let el = (ev?.target as HTMLElement | null) || document.activeElement || document.body;\n\n    // Ignore if target is a native input that handles clipboard (unless we want to override?)\n    if (el instanceof HTMLInputElement || el instanceof HTMLTextAreaElement || (el as HTMLElement).isContentEditable) {\n        return [];\n    }\n\n    // 1. Walk up the tree (bubbling emulation / focus context)\n    let current: HTMLElement | null = el as HTMLElement;\n    while (current) {\n        // Check if element instance has the methods (e.g. web components or custom objects attached)\n        if (typeof (current as any)[action] === \"function\") {\n            providers.add(current as any);\n        }\n        // Also check if there's an operative instance or controller attached\n        if ((current as any).operativeInstance && typeof (current as any).operativeInstance[action] === \"function\") {\n            providers.add((current as any).operativeInstance);\n        }\n\n        // Move up\n        if (current.shadowRoot && (current.shadowRoot as any).host) {\n            current = (current.shadowRoot as any).host;\n        } else {\n            current = (current.parentElement || (current.getRootNode() as ShadowRoot)?.host) as HTMLElement;\n        }\n    }\n\n    // 2. TreeWalker Search (fallback: find any active provider in the composed tree)\n    // This is useful if the focus is on body/document but a provider is conceptually active or visible\n    if (ev.currentTarget instanceof Node || typeof document !== \"undefined\") {\n        const root = (ev.currentTarget instanceof Node ? (ev.currentTarget instanceof Document ? ev.currentTarget.body : ev.currentTarget) : document.body) as HTMLElement;\n        if (root) {\n            const walker = document.createTreeWalker(\n                root,\n                NodeFilter.SHOW_ELEMENT,\n                {\n                    acceptNode(node) {\n                        if (typeof (node as any)[action] === \"function\" ||\n                           ((node as any).operativeInstance && typeof (node as any).operativeInstance[action] === \"function\")) {\n                            return NodeFilter.FILTER_ACCEPT;\n                        }\n                        return NodeFilter.FILTER_SKIP;\n                    }\n                }\n            );\n\n            while (walker.nextNode()) {\n                const node = walker.currentNode as HTMLElement;\n                if (typeof (node as any)[action] === \"function\") {\n                    providers.add(node as any);\n                }\n                if ((node as any).operativeInstance && typeof (node as any).operativeInstance[action] === \"function\") {\n                    providers.add((node as any).operativeInstance);\n                }\n            }\n        }\n    }\n\n    return Array.from(providers);\n}\n\n//\nconst handleClipboardEvent = (ev: ClipboardEvent, type: \"onCopy\" | \"onCut\" | \"onPaste\") => {\n    const providers = collectProviders(ev, type);\n    for (const provider of providers) {\n        provider[type]?.(ev);\n    }\n};\n\n//\nlet initialized = false;\nexport const initGlobalClipboard = () => {\n    if (typeof window === \"undefined\" || initialized) return;\n    initialized = true;\n\n    // Lazily attach (single shared listener per event type) on first init.\n    lazyAddEventListener(window, \"copy\", (ev: Event) => handleClipboardEvent(ev as ClipboardEvent, \"onCopy\"), { capture: false, passive: true });\n    lazyAddEventListener(window, \"cut\", (ev: Event) => handleClipboardEvent(ev as ClipboardEvent, \"onCut\"), { capture: false, passive: true });\n    lazyAddEventListener(window, \"paste\", (ev: Event) => handleClipboardEvent(ev as ClipboardEvent, \"onPaste\"), { capture: false, passive: false });\n};\n","import { UUIDv4, Promised } from 'fest/core';\nimport { observe } from 'fest/object';\nimport { createWorkerChannel, createQueuedOptimizedWorkerChannel, QueuedWorkerChannel } from 'fest/uniform';\n\n// Import the OPFS worker using Vite's worker syntax\nimport OPFSWorker from './OPFS.uniform.worker.ts?worker';\n\n//\nlet workerChannel: any = null;\nconst isServiceWorker = typeof ServiceWorkerGlobalScope !== \"undefined\" && self instanceof ServiceWorkerGlobalScope;\n\n//\nconst observers = new Map();\n\nlet workerInitPromise: Promise<any> | null = null;\n\nexport const ensureWorker = (): Promise<any> => {\n    if (workerInitPromise) return workerInitPromise;\n\n    workerInitPromise = new Promise(async (resolve) => {\n        // In Service Worker context we never instantiate dedicated worker, directHandlers are used instead\n        if (typeof Worker !== \"undefined\" && !isServiceWorker) {\n            try {\n                // Create basic worker channel first to test\n                const baseChannel = await createWorkerChannel({\n                    name: \"opfs-worker\",\n                    script: OPFSWorker\n                });\n\n                // Create queued optimized worker channel using the base channel\n                workerChannel = new QueuedWorkerChannel(\"opfs-worker\", async () => baseChannel, {\n                    timeout: 30000, // 30 second timeout for file operations (file ops can be slow)\n                    retries: 3,\n                    batching: true, // Enable message batching for better performance\n                    compression: false // File operations don't benefit from compression\n                });\n\n                // Resolve immediately - operations will queue until channel is ready\n                resolve(workerChannel);\n            } catch (e) {\n                console.warn(\"OPFSUniformWorker instantiation failed, falling back to main thread...\", e);\n                workerChannel = null;\n                resolve(null);\n            }\n        } else {\n            workerChannel = null;\n            resolve(null);\n        }\n    });\n\n    return workerInitPromise;\n};\n\n// Direct OPFS handlers for Service Worker context (where postMessage doesn't work as expected)\n// Direct OPFS handlers for Service Worker context (where postMessage doesn't work as expected)\nexport const directHandlers: Record<string, (payload: any) => Promise<any>> = {\n    readDirectory: async ({ rootId, path, create }: any) => {\n        try {\n            const root = await navigator.storage.getDirectory();\n            const parts = (path || \"\").trim().replace(/\\/+/g, \"/\").split(\"/\").filter((p: string) => p);\n            let current = root;\n            for (const part of parts) {\n                current = await current.getDirectoryHandle(part, { create });\n            }\n            const entries: any[] = [];\n            // @ts-ignore\n            for await (const [name, entry] of current.entries()) {\n                entries.push([name, entry]);\n            }\n            return entries;\n        } catch (e) {\n            console.warn(\"Direct readDirectory error:\", e);\n            return [];\n        }\n    },\n\n    readFile: async ({ rootId, path, type }: any) => {\n        try {\n            const root = await navigator.storage.getDirectory();\n            const parts = (path || \"\").trim().replace(/\\/+/g, \"/\").split(\"/\").filter((p: string) => p);\n            const filename = parts.pop();\n            let dir = root;\n            for (const part of parts) {\n                dir = await dir.getDirectoryHandle(part, { create: false });\n            }\n            const fileHandle = await dir.getFileHandle(filename!, { create: false });\n            const file = await fileHandle.getFile();\n            if (type === \"text\") return await file.text();\n            if (type === \"arrayBuffer\") return await file.arrayBuffer();\n            return file;\n        } catch (e) {\n            console.warn(\"Direct readFile error:\", e);\n            return null;\n        }\n    },\n\n    writeFile: async ({ rootId, path, data }: any) => {\n        try {\n            const root = await navigator.storage.getDirectory();\n            const parts = (path || \"\").trim().replace(/\\/+/g, \"/\").split(\"/\").filter((p: string) => p);\n            const filename = parts.pop();\n            let dir = root;\n            for (const part of parts) {\n                dir = await dir.getDirectoryHandle(part, { create: true });\n            }\n            const fileHandle = await dir.getFileHandle(filename!, { create: true });\n            const writable = await fileHandle.createWritable();\n            await writable.write(data);\n            await writable.close();\n            return true;\n        } catch (e) {\n            console.warn(\"Direct writeFile error:\", e);\n            return false;\n        }\n    },\n\n    remove: async ({ rootId, path, recursive }: any) => {\n        try {\n            const root = await navigator.storage.getDirectory();\n            const parts = (path || \"\").trim().replace(/\\/+/g, \"/\").split(\"/\").filter((p: string) => p);\n            const name = parts.pop();\n            let dir = root;\n            for (const part of parts) {\n                dir = await dir.getDirectoryHandle(part, { create: false });\n            }\n            await dir.removeEntry(name!, { recursive });\n            return true;\n        } catch {\n            return false;\n        }\n    },\n\n    copy: async ({ from, to }: any) => {\n        try {\n            const copyRecursive = async (source: any, dest: any) => {\n                if (source.kind === 'directory') {\n                    for await (const [name, entry] of source.entries()) {\n                        if (entry.kind === 'directory') {\n                            const newDest = await dest.getDirectoryHandle(name, { create: true });\n                            await copyRecursive(entry, newDest);\n                        } else {\n                            const file = await entry.getFile();\n                            const newFile = await dest.getFileHandle(name, { create: true });\n                            const writable = await newFile.createWritable();\n                            await writable.write(file);\n                            await writable.close();\n                        }\n                    }\n                } else {\n                    const file = await source.getFile();\n                    const writable = await dest.createWritable();\n                    await writable.write(file);\n                    await writable.close();\n                }\n            };\n            await copyRecursive(from, to);\n            return true;\n        } catch (e) {\n            console.warn(\"Direct copy error:\", e);\n            return false;\n        }\n    },\n\n    // Placeholder for observe/unobserve (FileSystemObserver not available in all contexts)\n    observe: async () => false,\n    unobserve: async () => true,\n    mount: async () => true,\n    unmount: async () => true\n};\n\n//\nexport const post = (type: string, payload: any = {}, transfer: any[] = []) => {\n    // In Service Worker context, execute directly instead of using postMessage\n    if (isServiceWorker && directHandlers[type]) {\n        return directHandlers[type](payload);\n    }\n\n    return new Promise(async (resolve, reject) => {\n        try {\n            const channel = await ensureWorker();\n            if (!channel) {\n                // Fallback to direct handlers if no worker channel available\n                if (directHandlers[type]) {\n                    return resolve(directHandlers[type](payload));\n                }\n                return reject(new Error('No worker channel available'));\n            }\n\n            // Use optimized uniform channel API\n            const result = await channel.request(type, payload);\n            resolve(result);\n        } catch (err) {\n            reject(err);\n        }\n    });\n};\n\n//\nexport const getDir = (dest) => {\n    if (typeof dest != \"string\") return dest; dest = dest?.trim?.() || dest;\n    if (!dest?.endsWith?.(\"/\")) { dest = dest?.trim?.()?.split?.(\"/\")?.slice(0, -1)?.join?.(\"/\")?.trim?.() || dest; };\n    const p1 = !dest?.trim()?.endsWith(\"/\") ? (dest + \"/\") : dest; return (!p1?.startsWith(\"/\") ? (\"/\" + p1) : p1);\n}\n\n//\nexport const imageImportDesc = {\n    startIn: \"pictures\", multiple: false,\n    types: [{ description: \"wallpaper\", accept: { \"image/*\": [\".png\", \".gif\", \".jpg\", \".jpeg\", \".webp\", \".jxl\",] }, }]\n}\n\n//\nexport const generalFileImportDesc = {\n    startIn: \"documents\", multiple: false,\n    types: [{ description: \"files\", accept: { \"application/*\": [\".txt\", \".md\", \".html\", \".htm\", \".css\", \".js\", \".json\", \".csv\", \".xml\", \".jpg\", \".jpeg\", \".png\", \".gif\", \".webp\", \".svg\", \".ico\", \".mp3\", \".wav\", \".mp4\", \".webm\", \".pdf\", \".zip\", \".rar\", \".7z\",] }, }]\n}\n\n// \"/\" default is OPFS root (but may another root), \"/user/\" is OPFS root by default too, \"/assets/\" is unknown backend related assets\nexport const mappedRoots = new Map<string, () => Promise<any>>([\n    [\"/\", async () => ((await navigator?.storage?.getDirectory?.()))],\n    [\"/user/\", async () => (await navigator?.storage?.getDirectory?.())],\n    [\"/assets/\", async () => { console.warn(\"Backend related API not implemented!\"); return null; }],\n]);\n\n//\nexport const currentHandleMap = new Map<string, any>()\n\n//\nexport const mountAsRoot = async (forId: string, copyFromInternal?: boolean) => {\n    const cleanId = forId?.trim?.()?.replace?.(/^\\//, \"\")?.trim?.()?.split?.(\"/\")?.filter?.(p => !!p?.trim?.())?.at?.(0);\n\n    // @ts-ignore\n    const rootHandle = currentHandleMap?.get(cleanId) ?? (await showDirectoryPicker?.({\n        mode: \"readwrite\",\n        id: `${cleanId}`\n    })?.catch?.(console.warn.bind(console)));\n\n    //\n    if (rootHandle && cleanId && typeof cleanId == \"string\") { currentHandleMap?.set?.(cleanId, rootHandle); };\n    if (rootHandle && typeof localStorage != \"undefined\") {\n        localStorage?.setItem?.(\"opfs.mounted\", JSON.stringify([...JSON.parse(localStorage?.getItem?.(\"opfs.mounted\") || \"[]\"), cleanId]));\n    };\n\n    //\n    if (rootHandle) {\n        // Sync to worker\n        post('mount', { id: cleanId, handle: rootHandle });\n    }\n\n    //\n    if (copyFromInternal && rootHandle && cleanId == \"user\") {\n        const internalRoot = await navigator?.storage?.getDirectory?.();\n        await copyFromOneHandlerToAnother(internalRoot, rootHandle, {})?.catch?.(console.warn.bind(console));\n    };\n\n    //\n    return rootHandle;\n}\n\n//\nexport const unmountAsRoot = async (forId: string) => {\n    if (typeof localStorage != \"undefined\") {\n        localStorage?.setItem?.(\"opfs.mounted\", JSON.stringify(JSON.parse(localStorage?.getItem?.(\"opfs.mounted\") || \"[]\").filter((id: string) => id != forId)));\n    }\n    // Sync to worker\n    post('unmount', { id: forId });\n}\n\n// Enhanced root resolution function\nexport async function resolveRootHandle(rootHandle: any, relPath: string = \"\"): Promise<any> {\n    // if is null, just return OPFS root\n    if (rootHandle == null || rootHandle == undefined || rootHandle?.trim?.()?.length == 0) {\n        rootHandle = \"/user/\";\n    }\n\n    //\n    const cleanId = typeof rootHandle == \"string\" ? rootHandle?.trim?.()?.replace?.(/^\\//, \"\")?.trim?.()?.split?.(\"/\")?.filter?.(p => !!p?.trim?.())?.at?.(0) : null;\n    if (cleanId) {\n        if (typeof localStorage != \"undefined\" && JSON.parse(localStorage?.getItem?.(\"opfs.mounted\") || \"[]\").includes(cleanId)) {\n            // @ts-ignore\n            rootHandle = currentHandleMap?.get(cleanId);\n        }\n        if (!rootHandle) { rootHandle = (await mappedRoots?.get?.(`/${cleanId}/`)?.()) ?? (await navigator.storage.getDirectory()); };\n    }\n\n    //\n    if (rootHandle instanceof FileSystemDirectoryHandle) {\n        return rootHandle;\n    }\n\n    // Normalize relPath for root matching\n    const normalizedPath = relPath?.trim?.() || \"/\";\n    const pathForMatch = normalizedPath.startsWith(\"/\") ? normalizedPath : \"/\" + normalizedPath;\n\n    // Find the best matching root from mappedRoots\n    let bestMatch: (() => Promise<any>) | null = null;\n    let bestMatchLength = 0;\n\n    //\n    for (const [rootPath, rootResolver] of mappedRoots.entries()) {\n        if (pathForMatch.startsWith(rootPath) && rootPath.length > bestMatchLength) {\n            bestMatch = rootResolver;\n            bestMatchLength = rootPath.length;\n        }\n    }\n\n    // Use the best matching root resolver, fallback to OPFS root\n    try {\n        const resolvedRoot = bestMatch ? await bestMatch() : null;\n        return resolvedRoot || await navigator?.storage?.getDirectory?.();\n    } catch (error) {\n        console.warn(\"Failed to resolve root handle, falling back to OPFS root:\", error);\n        return await navigator?.storage?.getDirectory?.();\n    }\n}\n\n// Enhanced path normalization with relative directory support\nexport function normalizePath(basePath: string = \"\", relPath: string): string {\n    if (!relPath?.trim()) return basePath;\n\n    const cleanRelPath = relPath.trim();\n\n    // Handle absolute paths (starting with /)\n    if (cleanRelPath.startsWith(\"/\")) {\n        return cleanRelPath;\n    }\n\n    // Handle relative paths\n    const baseParts = basePath.split(\"/\").filter(p => p?.trim());\n    const relParts = cleanRelPath.split(\"/\").filter(p => p?.trim());\n\n    for (const part of relParts) {\n        if (part === \".\") {\n            // Current directory - no change\n            continue;\n        } else if (part === \"..\") {\n            // Parent directory - go up one level\n            if (baseParts.length > 0) {\n                baseParts.pop();\n            }\n        } else {\n            // Regular directory/file name\n            baseParts.push(part);\n        }\n    }\n\n    return \"/\" + baseParts.join(\"/\");\n}\n\n// Enhanced path resolution that combines root mapping and relative path handling\nexport async function resolvePath(rootHandle: any, relPath: string, basePath: string = \"\"): Promise<{ rootHandle: any, resolvedPath: string }> {\n    // First normalize the relative path\n    const normalizedRelPath = normalizePath(basePath, relPath);\n\n    // Then resolve the root handle\n    const resolvedRootHandle = await resolveRootHandle(rootHandle, normalizedRelPath);\n\n    return {\n        rootHandle: resolvedRootHandle,\n        resolvedPath: normalizedRelPath\n    };\n}\n\n\n//\nexport function handleError(logger, status, message) { logger?.(status, message); return null; }\nexport function defaultLogger(status, message) { console.trace(`[${status}] ${message}`); };\nexport function getFileExtension(path) { return path?.trim?.()?.split?.(\".\")?.[1]; }\nexport function detectTypeByRelPath(relPath) { if (relPath?.trim()?.endsWith?.('/')) return 'directory'; return 'file'; }\nexport function getMimeTypeByFilename(filename) {\n    const ext = filename?.split?.('.')?.pop?.()?.toLowerCase?.();\n    const mimeTypes = {\n        'txt': 'text/plain',\n        'md': 'text/markdown',\n        'html': 'text/html',\n        'htm': 'text/html',\n        'css': 'text/css',\n        'js': 'application/javascript',\n        'json': 'application/json',\n        'csv': 'text/csv',\n        'xml': 'application/xml',\n        'jpg': 'image/jpeg',\n        'jpeg': 'image/jpeg',\n        'png': 'image/png',\n        'gif': 'image/gif',\n        'webp': 'image/webp',\n        'svg': 'image/svg+xml',\n        'ico': 'image/x-icon',\n        'mp3': 'audio/mpeg',\n        'wav': 'audio/wav',\n        'mp4': 'video/mp4',\n        'webm': 'video/webm',\n        'pdf': 'application/pdf',\n        'zip': 'application/zip',\n        'rar': 'application/vnd.rar',\n        '7z': 'application/x-7z-compressed',\n        // ...\n    };\n    return mimeTypes[ext] || 'application/octet-stream';\n}\n\n//\nexport const hasFileExtension = (path: string) => {\n    return path?.trim?.()?.split?.(\".\")?.[1]?.trim?.()?.length > 0;\n}\n\n//\nexport async function getDirectoryHandle(rootHandle, relPath, { create = false, basePath = \"\" } = {}, logger = defaultLogger) {\n    try {\n        const { rootHandle: resolvedRoot, resolvedPath } = await resolvePath(rootHandle, relPath, basePath);\n        // Remove /user/ prefix\n        const cleanPath = resolvedPath?.trim?.()?.startsWith?.(\"/user/\") ?\n            resolvedPath?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.() : resolvedPath;\n\n        const parts = cleanPath.split('/').filter((p) => (!!p?.trim?.()));\n        if (parts.length > 0 && hasFileExtension(parts[parts.length - 1]?.trim?.())) { parts?.pop?.(); };\n\n        // Fallback to direct access if we need to return a Handle\n        // But we want to use worker for operations.\n        // Current API returns Handle.\n        // If we want optimization, we should use worker.\n        // But getDirectoryHandle returns a Handle.\n\n        let dir = resolvedRoot;\n        if (parts?.length > 0) {\n            for (const part of parts) {\n                dir = await dir?.getDirectoryHandle?.(part, { create });\n                if (!dir) { break; };\n            }\n        }\n        return dir;\n    } catch (e: any) { return handleError(logger, 'error', `getDirectoryHandle: ${e.message}`); }\n}\n\n//\nexport async function getFileHandle(rootHandle, relPath, { create = false, basePath = \"\" } = {}, logger = defaultLogger) {\n    try {\n        const { rootHandle: resolvedRoot, resolvedPath } = await resolvePath(rootHandle, relPath, basePath);\n        const cleanPath = resolvedPath?.trim?.()?.startsWith?.(\"/user/\") ?\n            resolvedPath?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.() : resolvedPath;\n\n        const parts = cleanPath.split('/').filter((d) => (!!d?.trim?.()));\n        if (parts?.length == 0) return null;\n\n        const filePath = parts.length > 0 ? parts[parts.length - 1]?.trim?.()?.replace?.(/\\s+/g, '-') : '';\n        const dirName = parts.length > 1 ? parts?.slice(0, -1)?.join?.('/')?.trim?.()?.replace?.(/\\s+/g, '-') : '';\n\n        if (cleanPath?.trim?.()?.endsWith?.(\"/\")) { return null; };\n\n        // Delegate to getDirectoryHandle (which is currently main thread)\n        const dir = await getDirectoryHandle(resolvedRoot, dirName, { create, basePath }, logger);\n        return dir?.getFileHandle?.(filePath, { create });\n    } catch (e: any) { return handleError(logger, 'error', `getFileHandle: ${e.message}`); }\n}\n\n//\nexport async function getHandler(rootHandle, relPath, options: { basePath?: string } = {}, logger = defaultLogger) {\n    try {\n        const { rootHandle: resolvedRootHandle, resolvedPath } = await resolvePath(rootHandle, relPath, options?.basePath || \"\");\n        const type = detectTypeByRelPath(resolvedPath);\n        if (type == 'directory') {\n            const dir = await getDirectoryHandle(resolvedRootHandle, resolvedPath?.trim?.()?.replace?.(/\\/$/, ''), options, logger);\n            if (dir) return { type: 'directory', handle: dir };\n        } else {\n            const file = await getFileHandle(resolvedRootHandle, resolvedPath, options, logger);\n            if (file) return { type: 'file', handle: file };\n        }\n        return null;\n    } catch (e: any) { return handleError(logger, 'error', `getHandler: ${e.message}`); }\n}\n\n//\nexport async function createHandler(rootHandle, relPath, options: { basePath?: string } = {}, logger = defaultLogger) {\n    try {\n        const { rootHandle: resolvedRootHandle, resolvedPath } = await resolvePath(rootHandle, relPath, options?.basePath || \"\");\n        const type = detectTypeByRelPath(resolvedPath);\n        if (type == 'directory') {\n            return await getDirectoryHandle(resolvedRootHandle, resolvedPath?.trim?.()?.replace?.(/\\/$/, ''), options, logger);\n        } else {\n            return await getFileHandle(resolvedRootHandle, resolvedPath, options, logger);\n        }\n    } catch (e: any) { return handleError(logger, 'error', `createHandler: ${e.message}`); }\n}\n\n// Shared State Structure\ninterface DirectoryState {\n    mapCache: Map<string, any>;\n    dirHandle: Promise<any>;\n    resolvePath: string;\n    observationId: string;\n    refCount: number;\n    cleanup: () => void;\n    updateCache: () => Promise<any>;\n}\n\nexport const directoryCacheMap = new Map<string, DirectoryState>();\n\n\n//\nexport const mayNotPromise = (pms: any, cb: (pms: any) => any, errCb: (e: any) => any = console.warn.bind(console)) => {\n    if (typeof pms?.then == \"function\") {\n        return pms?.then?.(cb)?.catch?.(errCb);\n    } else {\n        try {\n            return cb(pms);\n        } catch (e: any) {\n            errCb(e);\n            return null;\n        }\n    }\n}\n\n//\nexport function openDirectory(\n    rootHandle,\n    relPath,\n    options: { create: boolean; basePath?: string } = { create: false },\n    logger = defaultLogger\n) {\n    let cacheKey = \"\";\n\n    // :     reactive-map\n    // ( ,     shared mapCache  state)\n    let localMapCache: Map<string, any> = observe(new Map<string, any>()) as any;\n\n    const pathPromise = (async () => {\n        try {\n            const { rootHandle: resolvedRootHandle, resolvedPath } = await resolvePath(\n                rootHandle,\n                relPath,\n                options?.basePath || \"\"\n            );\n            cacheKey = `${resolvedRootHandle?.name || \"root\"}:${resolvedPath}`;\n            return { rootHandle: resolvedRootHandle, resolvedPath };\n        } catch {\n            return { rootHandle: null, resolvedPath: \"\" };\n        }\n    })();\n\n    const statePromise: Promise<DirectoryState | null> = pathPromise.then(async ({ rootHandle, resolvedPath }) => {\n        if (!resolvedPath) return null;\n\n        const existing = directoryCacheMap.get(cacheKey);\n        if (existing) {\n            existing.refCount++;\n            //   proxy  shared map\n            localMapCache = existing.mapCache;\n            return existing;\n        }\n\n        const mapCache = observe(new Map<string, any>()) as Map<string, any>;\n        localMapCache = mapCache;\n\n        const observationId = UUIDv4();\n        const dirHandlePromise = getDirectoryHandle(rootHandle, resolvedPath, options, logger);\n\n        const updateCache = async () => {\n            const cleanPath = resolvedPath?.trim?.()?.startsWith?.(\"/user/\")\n                ? resolvedPath?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.()\n                : resolvedPath;\n\n            const entries: any = await post(\n                \"readDirectory\",\n                {\n                    rootId: \"\",\n                    path: cleanPath,\n                    create: options.create,\n                },\n                rootHandle ? [rootHandle] : []\n            );\n\n            if (!entries) return mapCache;\n\n            const entryMap = new Map(entries);\n\n            // remove deleted\n            for (const key of mapCache.keys()) {\n                if (!entryMap.has(key)) mapCache.delete(key);\n            }\n\n            // add new\n            for (const [key, handle] of entryMap) {\n                if (!mapCache.has(key as string)) mapCache.set(key as string, handle);\n            }\n\n            return mapCache;\n        };\n\n        const cleanup = () => {\n            post(\"unobserve\", { id: observationId });\n            observers.delete(observationId);\n            directoryCacheMap.delete(cacheKey);\n        };\n\n        observers.set(observationId, (changes: any[]) => {\n            for (const change of changes) {\n                if (!change?.name) continue;\n\n                if (change.type === \"modified\" || change.type === \"created\" || change.type === \"appeared\") {\n                    mapCache.set(change.name, change.handle);\n                } else if (change.type === \"deleted\" || change.type === \"disappeared\") {\n                    mapCache.delete(change.name);\n                }\n            }\n        });\n\n        const cleanPath = resolvedPath?.trim?.()?.startsWith?.(\"/user/\")\n            ? resolvedPath?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.()\n            : resolvedPath;\n\n        post(\n            \"observe\",\n            {\n                rootId: \"\",\n                path: cleanPath,\n                id: observationId,\n            },\n            rootHandle ? [rootHandle] : []\n        );\n\n        // initial load (fire and forget)\n        updateCache();\n\n        const newState: DirectoryState = {\n            mapCache,\n            dirHandle: dirHandlePromise,\n            resolvePath: resolvedPath,\n            observationId,\n            refCount: 1,\n            cleanup,\n            updateCache,\n        };\n\n        directoryCacheMap.set(cacheKey, newState);\n\n        const entries: any = await Promise.all(await Array.fromAsync((await dirHandlePromise)?.entries?.() ?? []));\n        for (const [name, handle] of entries) {\n            if (!mapCache.has(name)) mapCache.set(name, handle);\n        }\n\n        return { ...newState, mapCache };\n    });\n\n    //\n    let disposed = false;\n    const dispose = () => {\n        if (disposed) return;\n        disposed = true;\n        statePromise\n            .then((s) => {\n                if (!s) return;\n                s.refCount--;\n                if (s.refCount <= 0) s.cleanup();\n            })\n            .catch(console.warn);\n    };\n\n    //\n    const handler: ProxyHandler<any> = {\n        get(_target, prop) {\n            // 0)   /     \n            //    /\n            if (\n                prop === Symbol.toStringTag ||\n                prop === Symbol.iterator ||\n                prop === \"toString\" ||\n                prop === \"valueOf\" ||\n                prop === \"inspect\" ||\n                prop === \"constructor\" ||\n                prop === \"__proto__\" ||\n                prop === \"prototype\"\n            ) {\n                return undefined;\n            }\n\n            if (prop === \"dispose\") return dispose;\n\n            //    Map (  backup)\n            if (prop === \"getMap\") return () => localMapCache;\n\n            // map-like  (!)\n            if (prop === \"entries\") return () => localMapCache.entries();\n            if (prop === \"keys\") return () => localMapCache.keys();\n            if (prop === \"values\") return () => localMapCache.values();\n            if (prop === Symbol.iterator) return () => localMapCache[Symbol.iterator]();\n\n            //  \n            if (prop === \"size\") return localMapCache.size;\n            if (prop === \"has\") return (k: string) => localMapCache.has(k);\n            if (prop === \"get\") return (k: string) => localMapCache.get(k);\n\n            //  \n            if (prop === \"entries\") return () => localMapCache.entries();\n            if (prop === \"keys\") return () => localMapCache.keys();\n            if (prop === \"values\") return () => localMapCache.values();\n\n            //\n            if (prop === \"refresh\") {\n                return () =>\n                    statePromise\n                        .then((s) => s?.updateCache?.())\n                        .then(() => pxy);\n            }\n\n            // Promise-like:    await openDirectory(...)\n            if (prop === \"then\" || prop === \"catch\" || prop === \"finally\") {\n                //  proxy awaitable\n                const p = statePromise.then(() => true);\n                // @ts-ignore\n                return p[prop].bind(p);\n            }\n\n            // :    dirHandle ( )\n            return (...args: any[]) =>\n                statePromise.then(async (s) => {\n                    if (!s) return undefined;\n                    const dh = await s.dirHandle;\n                    const v = dh?.[prop];\n                    if (typeof v === \"function\") return v.apply(dh, args);\n                    return v;\n                });\n        },\n\n        // : ownKeys   \n        ownKeys() {\n            return Array.from(localMapCache.keys());\n        },\n\n        getOwnPropertyDescriptor() {\n            return { enumerable: true, configurable: true };\n        },\n    };\n\n    const fx: any = function () { };\n    const pxy = new Proxy(fx, handler);\n    return pxy;\n}\n\n//\nexport async function readFile(rootHandle, relPath, options: { basePath?: string } = {}, logger = defaultLogger) {\n    try {\n        const { rootHandle: resolvedRoot, resolvedPath } = await resolvePath(rootHandle, relPath, options?.basePath || \"\");\n        const cleanPath = resolvedPath?.trim?.()?.startsWith?.(\"/user/\") ?\n            resolvedPath?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.() : resolvedPath;\n\n        // Use Worker\n        const file = await post('readFile', { rootId: \"\", path: cleanPath, type: \"blob\" }, resolvedRoot ? [resolvedRoot] : []);\n        return file;\n    } catch (e: any) { return handleError(logger, 'error', `readFile: ${e.message}`); }\n}\n\n//\nexport async function readAsObjectURL(rootHandle, relPath, options: { basePath?: string } = {}, logger = defaultLogger) {\n    try {\n        const file: any = await readFile(rootHandle, relPath, options, logger);\n        return file ? URL.createObjectURL(file) : null;\n    } catch (e: any) { return handleError(logger, 'error', `readAsObjectURL: ${e.message}`); }\n}\n\n//\nexport async function readFileUTF8(rootHandle, relPath, options: { basePath?: string } = {}, logger = defaultLogger) {\n    try {\n        const file: any = await readFile(rootHandle, relPath, options, logger);\n        if (!file) return \"\";\n        return await file.text();\n    } catch (e: any) { return handleError(logger, 'error', `readFileUTF8: ${e.message}`); }\n}\n\n\n\n//\nexport async function writeFile(rootHandle, relPath, data, logger = defaultLogger) {\n    if (data instanceof FileSystemFileHandle) { data = await data.getFile(); }\n    if (data instanceof FileSystemDirectoryHandle) {\n        const dstHandle = await getDirectoryHandle(await resolveRootHandle(rootHandle), relPath + (relPath?.trim?.()?.endsWith?.(\"/\") ? \"\" : \"/\") + (data?.name || \"\")?.trim?.()?.replace?.(/\\s+/g, '-'), { create: true });\n        return await copyFromOneHandlerToAnother(data, dstHandle, {})?.catch?.(console.warn.bind(console));\n    } else\n\n        //\n        try {\n            const { rootHandle: resolvedRoot, resolvedPath } = await resolvePath(rootHandle, relPath, \"\");\n            const cleanPath = resolvedPath?.trim?.()?.startsWith?.(\"/user/\") ?\n                resolvedPath?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.() : resolvedPath;\n\n            await post('writeFile', { rootId: \"\", path: cleanPath, data }, resolvedRoot ? [resolvedRoot] : []);\n            return true;\n        } catch (e: any) { return handleError(logger, 'error', `writeFile: ${e.message}`); }\n}\n\n//\nexport async function getFileWriter(rootHandle, relPath, options: { create?: boolean, basePath?: string } = { create: true }, logger = defaultLogger) {\n    try {\n        const { rootHandle: resolvedRootHandle, resolvedPath } = await resolvePath(rootHandle, relPath, options?.basePath || \"\");\n        return (await getFileHandle(resolvedRootHandle, resolvedPath, options, logger))?.createWritable?.();\n    } catch (e: any) { return handleError(logger, 'error', `getFileWriter: ${e.message}`); }\n}\n\n\n\n\n\n//\nexport async function removeFile(rootHandle, relPath, options: { recursive?: boolean, basePath?: string } = { recursive: true }, logger = defaultLogger) {\n    try {\n        const { rootHandle: resolvedRoot, resolvedPath } = await resolvePath(rootHandle, relPath, options?.basePath || \"\");\n        const cleanPath = resolvedPath?.trim?.()?.startsWith?.(\"/user/\") ?\n            resolvedPath?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.() : resolvedPath;\n\n        await post('remove', { rootId: \"\", path: cleanPath, recursive: options.recursive }, resolvedRoot ? [resolvedRoot] : []);\n        return true;\n    } catch (e: any) { return handleError(logger, 'error', `removeFile: ${e.message}`); }\n}\n\n//\nexport async function removeDirectory(rootHandle, relPath, options: { recursive?: boolean, basePath?: string } = { recursive: true }, logger = defaultLogger) {\n    try {\n        // Reuse logic from removeFile as worker distinguishes via path handling or just removeEntry\n        return removeFile(rootHandle, relPath, options, logger);\n    } catch (e: any) { return handleError(logger, 'error', `removeDirectory: ${e.message}`); }\n}\n\n//\nexport async function remove(rootHandle, relPath, options: { basePath?: string } = {}, logger = defaultLogger) {\n    try {\n        return removeFile(rootHandle, relPath, { recursive: true, ...options }, logger);\n    } catch (e: any) { return handleError(logger, 'error', `remove: ${e.message}`); }\n}\n\n//\nexport const openImageFilePicker = async () => {\n    const $e = \"showOpenFilePicker\"; // @ts-ignore\n    const showOpenFilePicker = window?.[$e]?.bind?.(window) ?? (await import(\"fest/polyfill/showOpenFilePicker.mjs\"))?.[$e];\n    return showOpenFilePicker(imageImportDesc);\n}\n\n//\nexport const downloadFile = async (file) => {\n    // as file\n    if (file instanceof FileSystemFileHandle) { file = await file.getFile(); }\n    if (typeof file == \"string\") { file = await provide(file); }; const filename = file?.name; if (!filename) return; // @ts-ignore // IE10+\n    if (\"msSaveOrOpenBlob\" in self.navigator) { self.navigator.msSaveOrOpenBlob(file, filename); };\n\n    // for directory\n    if (file instanceof FileSystemDirectoryHandle) {\n        // @ts-ignore\n        let dstHandle = await showDirectoryPicker?.({\n            mode: \"readwrite\"\n        })?.catch?.(console.warn.bind(console));\n\n        //\n        if (file && dstHandle) {\n            // open handle relative to selected directory\n            dstHandle = (await getDirectoryHandle(dstHandle, file?.name || \"\", { create: true })?.catch?.(console.warn.bind(console))) || dstHandle;\n            return await copyFromOneHandlerToAnother(file, dstHandle, {})?.catch?.(console.warn.bind(console));\n        }\n\n        // currently, different methods are unsupported... (not implemented)\n        return;\n    }\n\n    // @ts-ignore\n    const fx = await (self?.showOpenFilePicker ? new Promise((r) => r({ // @ts-ignore\n        showOpenFilePicker: self?.showOpenFilePicker?.bind?.(window), // @ts-ignore\n        showSaveFilePicker: self?.showSaveFilePicker?.bind?.(window), // @ts-ignore\n    })) // @ts-ignore\n        : import(/* @vite-ignore */ \"fest/polyfill/showOpenFilePicker.mjs\"));\n\n    // @ts-ignore\n    if (window?.showSaveFilePicker) { // @ts-ignore\n        const fileHandle = await fx?.showSaveFilePicker?.({ suggestedName: filename })?.catch?.(console.warn.bind(console));\n        const writableFileStream = await fileHandle?.createWritable?.({ keepExistingData: true })?.catch?.(console.warn.bind(console));\n        await writableFileStream?.write?.(file)?.catch?.(console.warn.bind(console));\n        await writableFileStream?.close?.()?.catch?.(console.warn.bind(console));\n    } else {\n        const a = document.createElement(\"a\");\n        try { a.href = URL.createObjectURL(file); } catch (e) { console.warn(e); };\n        a.download = filename; document.body.appendChild(a); a.click();\n        setTimeout(function () {\n            document.body.removeChild(a);\n            globalThis.URL.revokeObjectURL(a.href);\n        }, 0);\n    }\n}\n\n//\nexport const provide = async (req: string | Request = \"\", rw = false) => {\n    const url: string = (req as Request)?.url ?? req;\n    const cleanUrl = url?.replace?.(location.origin, \"\")?.trim?.();\n\n    //\n    if (cleanUrl?.startsWith?.(\"/user\")) {\n        const path = cleanUrl?.replace?.(/^\\/user/g, \"\")?.trim?.();\n        const root = await navigator?.storage?.getDirectory?.();\n        const handle = await getFileHandle(root, path, { create: !!rw });\n\n        if (rw) {\n            return handle?.createWritable?.();\n        }\n        return handle?.getFile?.();\n    } else {\n        try {\n            if (!req) return null;\n            const r = await fetch(req);\n            const blob = await r?.blob()?.catch?.(console.warn.bind(console));\n            const lastModifiedHeader = r?.headers?.get?.(\"Last-Modified\");\n            const lastModified = lastModifiedHeader ? Date.parse(lastModifiedHeader) : 0;\n\n            if (blob) {\n                return new File([blob], url?.substring(url?.lastIndexOf('/') + 1), {\n                    type: blob?.type,\n                    lastModified: isNaN(lastModified) ? 0 : lastModified\n                })\n            }\n        } catch (e: any) { return handleError(defaultLogger, 'error', `provide: ${e.message}`); }\n    }\n}\n\n//\nexport const getLeast = (item) => {\n    if (item?.types?.length > 0) {\n        return item?.getType?.(Array.from(item?.types || [])?.at?.(-1));\n    }\n    return null;\n}\n\n//\nexport const dropFile = async (file, dest = \"/user/\"?.trim?.()?.replace?.(/\\s+/g, '-'), current?: any) => {\n    const fs = await resolveRootHandle(null);\n    const path = getDir(dest?.trim?.()?.startsWith?.(\"/user/\") ? dest?.replace?.(/^\\/user/g, \"\")?.trim?.() : dest);\n    const user = path?.replace?.(\"/user\", \"\")?.trim?.();\n\n    //\n    file = file instanceof File ? file : (new File([file], UUIDv4() + \".\" + (file?.type?.split?.(\"/\")?.[1] || \"tmp\")))\n\n    //\n    const fp = user + (file?.name || \"wallpaper\")?.trim?.()?.replace?.(/\\s+/g, '-');\n    await writeFile(fs, fp, file);\n\n    // TODO! needs to fix same directory scope\n    current?.set?.(\"/user\" + fp?.trim?.()?.replace?.(/\\s+/g, '-'), file);\n    return \"/user\" + fp?.trim?.();\n}\n\n//\nexport const uploadDirectory = async (dest = \"/user/\", id: any = null) => {\n    dest = dest?.trim?.()?.startsWith?.(\"/user/\") ? dest?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.() : dest;\n    if (!globalThis.showDirectoryPicker) {\n        return;\n    }\n\n    // @ts-ignore\n    const srcHandle = await showDirectoryPicker?.({\n        mode: \"readonly\", id\n    })?.catch?.(console.warn.bind(console));\n    if (!srcHandle) return;\n\n    //\n    const dstHandle = await getDirectoryHandle(await resolveRootHandle(null), dest + (dest?.trim?.()?.endsWith?.(\"/\") ? \"\" : \"/\") + srcHandle.name?.trim?.()?.replace?.(/\\s+/g, '-'), { create: true });\n    if (!dstHandle) return;\n    return await copyFromOneHandlerToAnother(srcHandle, dstHandle, {})?.catch?.(console.warn.bind(console));\n}\n\n//\nexport const uploadFile = async (dest = \"/user/\"?.trim?.()?.replace?.(/\\s+/g, '-'), current?: any) => {\n    const $e = \"showOpenFilePicker\"; dest = dest?.trim?.()?.startsWith?.(\"/user/\") ? dest?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.() : dest;\n\n    // @ts-ignore\n    const showOpenFilePicker = window?.[$e]?.bind?.(window) ?? (await import(\"fest/polyfill/showOpenFilePicker.mjs\"))?.[$e];\n    return showOpenFilePicker({ ...generalFileImportDesc, multiple: true } as any)?.then?.(async (handles = []) => {\n        for (const handle of handles) {\n            const file = (handle as any) instanceof File ? (handle as any) : (await (handle as any)?.getFile?.());\n            await dropFile(file, dest, current);\n        }\n    });\n}\n\n//\nexport const ghostImage = typeof Image != \"undefined\" ? new Image() : null;\nif (ghostImage) {\n    ghostImage.decoding = \"async\";\n    ghostImage.width = 24;\n    ghostImage.height = 24;\n\n\n    //\n    try {\n        ghostImage.src = URL.createObjectURL(new Blob([`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 384 512\"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d=\"M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 288c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128z\"/></svg>`], { type: \"image/svg+xml\" }));\n    } catch (e) { }\n}\n\n\n/*  // in drag-start\n    ev.dataTransfer.effectAllowed = \"copyLink\";\n    ev?.dataTransfer?.clearData?.();\n    ev?.dataTransfer?.setDragImage?.(ghostImage, 0, 0);\n*/\n\n//\nexport const attachFile = (transfer, file, path = \"\") => {\n    try {\n        const url = URL.createObjectURL(file);\n        if (file?.type && file?.type != \"text/plain\") {\n            transfer?.items?.add?.(file, file?.type || \"text/plain\");\n        } else {\n            transfer?.add?.(file);\n        }\n        if (path) { transfer?.items?.add?.(path, \"text/plain\"); };\n        transfer?.setData?.(\"text/uri-list\", url);\n        transfer?.setData?.(\"DownloadURL\", file?.type + \":\" + file?.name + \":\" + url);\n    } catch (e) { }\n}\n\n//\nexport const dropAsTempFile = async (data: any) => {\n    const items = (data)?.items;\n    const item = items?.[0];\n    const isImage = item?.types?.find?.((n) => n?.startsWith?.(\"image/\"));\n    const blob = await (data?.files?.[0] ?? ((isImage ? item?.getType?.(isImage) : null) || getLeast(item)));\n    return dropFile(blob, \"/user/temp/\"?.trim?.()?.replace?.(/\\s+/g, '-'));\n}\n\n//\nexport const clearAllInDirectory = async (rootHandle: any = null, relPath = \"\", options: { basePath?: string } = {}, logger = defaultLogger) => {\n    try {\n        const { rootHandle: resolvedRoot, resolvedPath } = await resolvePath(rootHandle, relPath, options?.basePath || \"\");\n        const cleanPath = resolvedPath?.trim?.()?.startsWith?.(\"/user/\") ?\n            resolvedPath?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.() : resolvedPath;\n\n        await post('remove', { rootId: \"\", path: cleanPath, recursive: true }, resolvedRoot ? [resolvedRoot] : []);\n    } catch (e: any) { return handleError(logger, 'error', `clearAllInDirectory: ${e.message}`); }\n}\n\n// used for import/export by file pickers (OPFS, FileSystem, etc. )\nexport const copyFromOneHandlerToAnother = async (fromHandle: FileSystemDirectoryHandle | FileSystemFileHandle, toHandle: FileSystemDirectoryHandle | FileSystemFileHandle, options = {}, logger = defaultLogger) => {\n    // We delegate to worker\n    return post('copy', { from: fromHandle, to: toHandle }, [fromHandle, toHandle]);\n}\n\n//\nexport const handleIncomingEntries = (\n    data: DataTransfer | FileList | File[] | any,\n    destPath: string = \"/user/\",\n    rootHandle: any = null,\n    onItemHandled?: (file: File, path: string) => void | Promise<void>\n) => {\n    const tasks: Promise<any>[] = [];\n    const items = Array.from(data?.items ?? []);\n    const files = Array.from(data?.files ?? []);\n    const dataArray = Array.isArray(data) ? data : [...((data?.[Symbol.iterator] ? data : [data]))];\n\n    //\n    return Promise.try(async () => {\n        const resolvedRoot = await resolveRootHandle(rootHandle);\n\n        //\n        const processItem = async (item: any) => {\n            // Handle FileSystemHandle (modern drag/drop)\n            let handle: any;\n            if (item.kind === 'file' || item.kind === 'directory') {\n                try {\n                    // @ts-ignore\n                    handle = await item.getAsFileSystemHandle?.();\n                } catch { }\n            }\n\n            if (handle) {\n                if (handle.kind === 'directory') {\n                    const nwd = await getDirectoryHandle(resolvedRoot, destPath + (handle.name || \"\").trim().replace(/\\s+/g, '-'), { create: true });\n                    if (nwd) tasks.push(copyFromOneHandlerToAnother(handle, nwd, { create: true }));\n                } else {\n                    const file = await handle.getFile();\n                    const path = destPath + (file.name || handle.name).trim().replace(/\\s+/g, '-');\n                    tasks.push(writeFile(resolvedRoot, path, file).then(() => onItemHandled?.(file, path)));\n                }\n                return;\n            }\n\n            // Handle File object (fallback)\n            if (item.kind === 'file' || item instanceof File) {\n                const file = item instanceof File ? item : item.getAsFile();\n                if (file) {\n                    const path = destPath + (file.name).trim().replace(/\\s+/g, '-');\n                    tasks.push(writeFile(resolvedRoot, path, file).then(() => onItemHandled?.(file, path)));\n                }\n                return;\n            }\n        };\n        // 1. Try DataTransfer items\n        if (items?.length > 0) {\n            for (const item of items as any) {\n                await processItem(item);\n            }\n        }\n        // 2. Try Files\n        if (files?.length > 0) {\n            for (const file of files as any) {\n                await processItem(file);\n            }\n        }\n        // 3. Array of Files\n        if (dataArray?.length > 0) {\n            for (const item of dataArray) {\n                await processItem(item);\n            }\n        }\n\n        // 4. Handle text/uri-list\n        const uriList = data?.getData?.(\"text/uri-list\") || data?.getData?.(\"text/plain\");\n        if (uriList && typeof uriList === \"string\") {\n            const urls = uriList.split(/\\r?\\n/).filter(Boolean);\n            for (const url of urls) {\n                if (url.startsWith(\"file://\")) continue;\n                // Detect if it's internal /user/ path\n                if (url.startsWith(\"/user/\")) {\n                    const src = url.trim();\n                    // Copy internal\n                    tasks.push(Promise.try(async () => {\n                        const srcHandle = await getHandler(resolvedRoot, src);\n                        if (srcHandle?.handle) {\n                            const name = src.split(\"/\").filter(Boolean).pop();\n                            if (srcHandle.type === 'directory') {\n                                const nwd = await getDirectoryHandle(resolvedRoot, destPath + name, { create: true });\n                                await copyFromOneHandlerToAnother(srcHandle.handle, nwd, { create: true });\n                            } else {\n                                const file = await srcHandle.handle.getFile();\n                                const path = destPath + name;\n                                await writeFile(resolvedRoot, path, file);\n                                onItemHandled?.(file, path);\n                            }\n                        }\n                    }));\n                } else {\n                    // External URL\n                    tasks.push(Promise.try(async () => {\n                        const file = await provide(url);\n                        if (file) {\n                            const path = destPath + file.name;\n                            await writeFile(resolvedRoot, path, file);\n                            onItemHandled?.(file, path);\n                        }\n                    }));\n                }\n            }\n        }\n\n        // 5. Handle ClipboardItems (for async clipboard API)\n        // This is usually passed as an array of ClipboardItem objects, but `data` here might be DataTransfer.\n        // If passed explicitly:\n        if (dataArray?.[0] instanceof ClipboardItem) {\n            for (const item of dataArray) {\n                for (const type of item.types) {\n                    if (type.startsWith(\"image/\") || type.startsWith(\"text/\")) {\n                        const blob = await item.getType(type);\n                        const ext = type.split(\"/\")[1].split(\"+\")[0] || \"txt\"; // simplified\n                        const file = new File([blob], `clipboard-${Date.now()}.${ext}`, { type });\n                        const path = destPath + file.name;\n                        tasks.push(writeFile(resolvedRoot, path, file).then(() => onItemHandled?.(file, path)));\n                    }\n                }\n            }\n        }\n\n        //\n        await Promise.allSettled(tasks).catch(console.warn.bind(console));\n    });\n}\n","import { setIdleInterval, addEvent } from \"fest/dom\";\nimport { ref } from \"fest/object\";\n\n//\nexport const batteryStatusRef = ()=>{\n    const rv = ref(\"battery-charging\");\n\n    // @ts-ignore\n    const batteryStatus = navigator.getBattery?.();\n    const batteryIcons = new Map([\n        [0, \"battery-warning\"],\n        [25, \"battery\"],\n        [50, \"battery-low\"],\n        [75, \"battery-medium\"],\n        [100, \"battery-full\"],\n    ]);\n\n    //\n    const byLevel = (lv = 1.0)=>(batteryIcons.get(Math.max(Math.min(Math.round(lv * 4) * 25, 100), 0))||\"battery\");\n    const changeBatteryStatus = ()=>{\n        let battery = \"battery-charging\";\n        if (!batteryStatus) {\n            rv.value = battery;\n        } else {\n            batteryStatus?.then?.((btr)=>{\n                if (btr.charging)\n                    { battery = \"battery-charging\"; } else // @ts-ignore\n                    { battery = byLevel(btr.level)||\"battery\"; };\n                    rv.value = battery;\n            })?.catch?.(console.warn.bind(console));\n        }\n    }\n\n    //\n    changeBatteryStatus(); setIdleInterval(changeBatteryStatus, 1000);\n    batteryStatus?.then?.((btr)=>{\n        addEvent(btr, \"chargingchange\", changeBatteryStatus);\n        addEvent(btr, \"levelchange\", changeBatteryStatus);\n        changeBatteryStatus();\n    }); return rv;\n}\n\n// TODO? support of seconds option (user-defined)\nexport const timeStatusRef = ()=>{\n    const rv = ref(\"00:00:00\");\n    const updateTime = ()=> (rv.value = new Date().toLocaleTimeString(navigator.language, { hour12: false, timeStyle: \"short\" }))\n    setIdleInterval(updateTime, 15000); document.addEventListener(\"DOMContentLoaded\", updateTime, { once: true });\n    return rv;\n};\n\n//\nexport const signalStatusRef = ()=>{\n    const rv = ref(\"wifi-off\");\n\n    // @ts-ignore\n    const changeSignal = ()=>(rv.value = signalIcons[navigator.onLine ? (navigator?.connection?.effectiveType || \"4g\") : \"offline\"]);\n    const signalIcons  = {\n        \"offline\": \"wifi-off\",\n        \"4g\": \"wifi\",\n        \"3g\": \"wifi-high\",\n        \"2g\": \"wifi-low\",\n        \"slow-2g\": \"wifi-zero\"\n    }\n\n    // @ts-ignore\n    addEvent(navigator.connection, \"change\", changeSignal);\n    setIdleInterval(changeSignal, 1000);\n    changeSignal?.(); return rv;\n};\n","import { RAFBehavior } from \"fest/dom\";\n\n//\nexport const makeRenderer = () => {\n    const canvas = document.createElement(\"canvas\");\n    const fallback = document.createElement(\"div\");\n    canvas.width = 1;\n    canvas.height = 1;\n\n    //\n    canvas.classList.add(\"u2-renderer\");\n    canvas.classList.add(\"u2-implement\");\n    fallback.classList.add(\"u2-fallback\");\n    fallback.classList.add(\"u2-renderer\");\n\n    //\n    fallback.style.inlineSize = \"stretch\";\n    fallback.style.blockSize = \"stretch\";\n    fallback.style.contain = \"layout paint\";\n    //fallback.style.containerType = \"size\";\n    fallback.style.containIntrinsicInlineSize = \"1px\";\n    fallback.style.containIntrinsicBlockSize = \"1px\";\n    fallback.style.maxInlineSize = \"min(100cqi, 100dvi)\";\n    fallback.style.maxBlockSize = \"min(100cqb, 100dvb)\";\n    fallback.style.pointerEvents = \"auto\";\n\n    //\n    //return fallback;\n\n    //\n    canvas.style.inlineSize = \"stretch\";\n    canvas.style.blockSize = \"stretch\";\n    canvas.style.objectFit = \"contain\";\n    canvas.style.objectPosition = \"center\";\n    canvas.style.imageRendering = \"auto\";\n    canvas.style.imageRendering = \"optimizeQuality\";\n    canvas.style.imageRendering = \"smooth\";\n    canvas.style.imageRendering = \"high-quality\";\n    canvas.style.contain = \"layout paint\";\n    //canvas.style.containerType = \"size\";\n    canvas.style.containIntrinsicInlineSize = \"1px\";\n    canvas.style.containIntrinsicBlockSize = \"1px\";\n    canvas.style.maxInlineSize = \"min(100cqi, 100dvi)\";\n    canvas.style.maxBlockSize = \"min(100cqb, 100dvb)\";\n    canvas.style.pointerEvents = \"auto\";\n\n    // @ts-ignore\n    canvas.layoutsubtree = true;\n    canvas.setAttribute(\"layoutsubtree\", \"true\");\n\n    //\\\n    const ctx = canvas?.getContext?.(\"2d\") as CanvasRenderingContext2D | null;\n    if (!ctx) { return fallback; }\n\n    //\n    if ((ctx as any)?.drawElement == null && (ctx as any)?.drawElementImage == null) {\n        return fallback;\n    }\n\n    //\n    const drawElementAct = (ctx as any)?.drawElementImage != null ? (ctx as any)?.drawElementImage?.bind?.(ctx) : (ctx as any)?.drawElement?.bind?.(ctx);\n    if (drawElementAct == null) {\n        return fallback;\n    }\n\n    //\n    const makeInteractive = (element?: HTMLElement)=>{\n        const drawElement = element ?? (canvas.children?.[0] as HTMLElement);\n        if (drawElement == null) return;\n\n        //\n        try {\n            (ctx as any).setHitTestRegions([{\n                element: drawElement,\n                rect: {\n                    x: 0,\n                    y: 0,\n                    width: drawElement?.offsetWidth * devicePixelRatio,\n                    height: drawElement?.offsetHeight * devicePixelRatio\n                }\n            }]);\n        } catch(e) {\n            console.warn(e);\n        }\n    }\n\n    //\n    const rafDebounce = RAFBehavior();\n    const doRender = () => {\n        const drawElement = canvas.children?.[0];\n        if (drawElementAct == null || drawElement == null || !canvas.checkVisibility() || canvas.dataset.dragging != null || canvas.closest?.(\"[data-dragging]\") != null) return;\n\n        //\n        ctx.reset();\n        ctx.save();\n        ctx.scale(devicePixelRatio || 1, devicePixelRatio || 1);\n        try { drawElementAct(drawElement, 0, 0, canvas.width / devicePixelRatio, canvas.height / devicePixelRatio); } catch(e) { console.warn(e); }\n        makeInteractive();\n        ctx.restore();\n    }\n\n    //https://localhost/#task2\n    const resizeObserver = new ResizeObserver((entries) => {\n        const entry = entries.find((entry) => entry.target === canvas);\n        const newWidth  = Math.min(entry?.devicePixelContentBoxSize?.[0]?.inlineSize || canvas.width, (canvas?.offsetParent || document.documentElement)?.clientWidth * devicePixelRatio);\n        const newHeight = Math.min(entry?.devicePixelContentBoxSize?.[0]?.blockSize || canvas.height, (canvas?.offsetParent || document.documentElement)?.clientHeight * devicePixelRatio);\n\n        //\n        if (newWidth != canvas.width) { canvas.width = newWidth; };\n        if (newHeight != canvas.height) { canvas.height = newHeight; };\n        if (newWidth != canvas.width || newHeight != canvas.height) { rafDebounce(doRender); };\n        //\n    });\n\n    //\n    queueMicrotask(()=>{ // @ts-ignore\n        resizeObserver.observe(canvas, {box: ['device-pixel-content-box'], fireOnEveryPaint: true});\n    });\n\n    //\n    (async ()=>{\n        while (true) {\n            await new Promise((resolve) => requestAnimationFrame(resolve));\n            if (canvas.checkVisibility() && canvas.dataset.dragging == null && canvas.closest?.(\"[data-dragging]\") == null) {\n                doRender();\n            }\n        }\n    })();\n\n    //\n    return canvas;\n}\n","export type Base64Alphabet = \"base64\" | \"base64url\";\nexport type Base64LastChunkHandling = \"loose\" | \"strict\" | \"stop-before-partial\";\n\nexport type DataUrlParts = {\n    mimeType: string;\n    isBase64: boolean;\n    data: string;\n};\n\nexport type DecodeBase64Options = {\n    alphabet?: Base64Alphabet;\n    lastChunkHandling?: Base64LastChunkHandling;\n};\n\nexport type EncodeBase64Options = {\n    alphabet?: Base64Alphabet;\n};\n\nexport type BlobToStringOptions = {\n    /**\n     * When true, encode raw text payload with encodeURIComponent().\n     * Common for SVG: data:image/svg+xml,${encodeURIComponent(svg)}.\n     */\n    uriComponent?: boolean;\n    /**\n     * If provided, overrides blob.type when producing a data URL.\n     */\n    mimeType?: string;\n    /**\n     * Output as base64 (default true for non-text). If false, output as text (optionally URI-encoded).\n     */\n    base64?: boolean;\n    /**\n     * Base64 encoding options for base64/base64url.\n     */\n    base64Options?: EncodeBase64Options;\n    /**\n     * For text serialization.\n     */\n    textEncoding?: \"utf-8\";\n};\n\nexport type StringToBinaryOptions = {\n    /**\n     * Prefer/force decoding a URL-encoded payload via decodeURIComponent.\n     * If omitted, we auto-detect by trying to decode only when it looks encoded.\n     */\n    uriComponent?: boolean;\n    /**\n     * If provided, overrides any mime type derived from a data URL.\n     */\n    mimeType?: string;\n    /**\n     * When creating a File, use this filename.\n     */\n    filename?: string;\n    /**\n     * When true, return a File. Otherwise return a Blob.\n     */\n    asFile?: boolean;\n    /**\n     * If true, treat input as base64 (or base64url) bytes (not UTF-8 text).\n     * If omitted, auto-detect via data URL or base64 shape.\n     */\n    isBase64?: boolean;\n    /**\n     * Decode options for base64/base64url.\n     */\n    base64?: DecodeBase64Options;\n    /**\n     * Max bytes allowed for decoded binary data.\n     */\n    maxBytes?: number;\n};\n\nexport type DataAssetInput = File | Blob | string | URL;\nexport type DataAssetSource = \"file\" | \"blob\" | \"data-url\" | \"base64\" | \"url\" | \"uri\" | \"text\";\n\nexport type DataAsset = {\n    hash: string;\n    name: string;\n    type: string;\n    size: number;\n    source: DataAssetSource;\n    file: File;\n};\n\nexport type NormalizeDataAssetOptions = {\n    mimeType?: string;\n    /**\n     * Prefix for generated hash-based filenames.\n     */\n    namePrefix?: string;\n    /**\n     * Optional explicit filename override.\n     */\n    filename?: string;\n    /**\n     * When true, keep input File name instead of hash-name.\n     */\n    preserveFileName?: boolean;\n    uriComponent?: boolean;\n    maxBytes?: number;\n};\n\nconst DEFAULT_MIME = \"application/octet-stream\";\n\nconst DATA_URL_RE = /^data:(?<mime>[^;,]+)?(?<params>(?:;[^,]*)*?),(?<data>[\\s\\S]*)$/i;\n\nfunction canUseFromBase64(): boolean {\n    return typeof (Uint8Array as any).fromBase64 === \"function\";\n}\n\nfunction canUseToBase64(u8: Uint8Array): boolean {\n    return typeof (u8 as any).toBase64 === \"function\";\n}\n\nfunction tryDecodeURIComponent(s: string): string {\n    try {\n        return decodeURIComponent(s);\n    } catch {\n        return s;\n    }\n}\n\nfunction likelyUriComponent(s: string): boolean {\n    return /%[0-9A-Fa-f]{2}/.test(s) || s.includes(\"+\");\n}\n\nfunction isTextMime(mimeType: string): boolean {\n    const t = (mimeType || \"\").toLowerCase();\n    return (\n        t.startsWith(\"text/\") ||\n        t.includes(\"json\") ||\n        t.includes(\"xml\") ||\n        t.includes(\"svg\") ||\n        t.includes(\"javascript\") ||\n        t.includes(\"ecmascript\")\n    );\n}\n\nfunction bytesToArrayBuffer(bytes: Uint8Array): ArrayBuffer {\n    const buf: ArrayBufferLike = bytes.buffer;\n    if (buf instanceof ArrayBuffer) {\n        return buf.slice(bytes.byteOffset, bytes.byteOffset + bytes.byteLength);\n    }\n    const ab = new ArrayBuffer(bytes.byteLength);\n    new Uint8Array(ab).set(bytes);\n    return ab;\n}\n\nexport function parseDataUrl(input: string): DataUrlParts | null {\n    const s = (input || \"\").trim();\n    if (!s.toLowerCase().startsWith(\"data:\")) return null;\n\n    const m = s.match(DATA_URL_RE);\n    if (!m?.groups) return null;\n\n    const mimeType = (m.groups.mime || DEFAULT_MIME).trim() || DEFAULT_MIME;\n    const params = (m.groups.params || \"\").toLowerCase();\n    const isBase64 = params.includes(\";base64\");\n    const data = m.groups.data ?? \"\";\n    return { mimeType, isBase64, data };\n}\n\nexport function decodeBase64ToBytes(base64: string, options: DecodeBase64Options = {}): Uint8Array {\n    const alphabet: Base64Alphabet = options.alphabet || \"base64\";\n    const lastChunkHandling: Base64LastChunkHandling = options.lastChunkHandling || \"loose\";\n    const s = (base64 || \"\").trim();\n\n    if (canUseFromBase64()) {\n        // Modern native: Uint8Array.fromBase64()\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array/fromBase64\n        return (Uint8Array as any).fromBase64(s, { alphabet, lastChunkHandling });\n    }\n\n    // Fallback: atob() for base64 only.\n    // For base64url, convert to base64 first.\n    const normalized =\n        alphabet === \"base64url\"\n            ? s.replace(/-/g, \"+\").replace(/_/g, \"/\")\n            : s;\n\n    // pad to multiple of 4\n    const padLen = (4 - (normalized.length % 4)) % 4;\n    const padded = normalized + \"=\".repeat(padLen);\n\n    const binary = typeof atob === \"function\" ? atob(padded) : \"\";\n    const out = new Uint8Array(binary.length);\n    for (let i = 0; i < binary.length; i++) out[i] = binary.charCodeAt(i);\n    return out;\n}\n\nexport function encodeBytesToBase64(bytes: Uint8Array, options: EncodeBase64Options = {}): string {\n    const alphabet: Base64Alphabet = options.alphabet || \"base64\";\n\n    if (canUseToBase64(bytes)) {\n        // Modern native: Uint8Array.prototype.toBase64()\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array/toBase64\n        return (bytes as any).toBase64({ alphabet });\n    }\n\n    // Fallback: btoa() with chunking\n    const chunkSize = 0x8000;\n    let binary = \"\";\n    for (let i = 0; i < bytes.length; i += chunkSize) {\n        binary += String.fromCharCode(...bytes.subarray(i, i + chunkSize));\n    }\n    const b64 = typeof btoa === \"function\" ? btoa(binary) : \"\";\n    if (alphabet !== \"base64url\") return b64;\n    return b64.replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+$/g, \"\");\n}\n\nexport async function blobToBytes(blob: Blob): Promise<Uint8Array> {\n    const ab = await blob.arrayBuffer();\n    return new Uint8Array(ab);\n}\n\nexport async function blobToText(blob: Blob, encoding: \"utf-8\" = \"utf-8\"): Promise<string> {\n    // Prefer native Blob.text() when available.\n    if (typeof blob.text === \"function\") return await blob.text();\n    const bytes = await blobToBytes(blob);\n    const dec = new TextDecoder(encoding);\n    return dec.decode(bytes);\n}\n\nexport async function blobToBase64(blob: Blob, options: EncodeBase64Options = {}): Promise<string> {\n    const bytes = await blobToBytes(blob);\n    return encodeBytesToBase64(bytes, options);\n}\n\nexport async function blobToDataUrl(blob: Blob, options: BlobToStringOptions = {}): Promise<string> {\n    const mimeType = (options.mimeType || blob.type || DEFAULT_MIME).trim() || DEFAULT_MIME;\n    const wantsBase64 = options.base64 ?? !isTextMime(mimeType);\n\n    if (wantsBase64) {\n        const b64 = await blobToBase64(blob, options.base64Options || {});\n        return `data:${mimeType};base64,${b64}`;\n    }\n\n    const text = await blobToText(blob, options.textEncoding || \"utf-8\");\n    const payload = options.uriComponent ? encodeURIComponent(text) : text;\n    return `data:${mimeType},${payload}`;\n}\n\nexport async function fileToDataUrl(file: File, options: BlobToStringOptions = {}): Promise<string> {\n    return await blobToDataUrl(file, options);\n}\n\nfunction looksLikeBase64(s: string): { isBase64: boolean; alphabet: Base64Alphabet } {\n    const t = (s || \"\").trim();\n    if (!t) return { isBase64: false, alphabet: \"base64\" };\n\n    const hasUrlAlphabet = /[-_]/.test(t) && !/[+/]/.test(t);\n    const alphabet: Base64Alphabet = hasUrlAlphabet ? \"base64url\" : \"base64\";\n\n    const normalized = alphabet === \"base64url\" ? t.replace(/-/g, \"+\").replace(/_/g, \"/\") : t;\n    const cleaned = normalized.replace(/[\\r\\n\\s]/g, \"\");\n    const allowed = /^[A-Za-z0-9+/]*={0,2}$/.test(cleaned);\n    if (!allowed) return { isBase64: false, alphabet };\n\n    // Not perfect; good enough for \"try base64 decode\"\n    if (cleaned.length < 8) return { isBase64: false, alphabet };\n    return { isBase64: true, alphabet };\n}\n\nfunction canParseUrl(value: string): boolean {\n    try {\n        if (typeof URL === \"undefined\") return false;\n        if (typeof (URL as any).canParse === \"function\") return (URL as any).canParse(value);\n        // Fallback for environments without URL.canParse\n        new URL(value);\n        return true;\n    } catch {\n        return false;\n    }\n}\n\nfunction extensionByMimeType(mimeType: string): string {\n    const t = (mimeType || \"\").toLowerCase().split(\";\")[0].trim();\n    if (!t) return \"bin\";\n\n    const mapped: Record<string, string> = {\n        \"text/plain\": \"txt\",\n        \"text/markdown\": \"md\",\n        \"text/html\": \"html\",\n        \"application/json\": \"json\",\n        \"application/xml\": \"xml\",\n        \"image/jpeg\": \"jpg\",\n        \"image/png\": \"png\",\n        \"image/webp\": \"webp\",\n        \"image/gif\": \"gif\",\n        \"image/svg+xml\": \"svg\",\n        \"application/pdf\": \"pdf\",\n    };\n    if (mapped[t]) return mapped[t];\n\n    const slashIdx = t.indexOf(\"/\");\n    if (slashIdx <= 0 || slashIdx >= t.length - 1) return \"bin\";\n    let subtype = t.slice(slashIdx + 1);\n    if (subtype.includes(\"+\")) subtype = subtype.split(\"+\")[0];\n    if (subtype.includes(\".\")) subtype = subtype.split(\".\").pop() || subtype;\n    return subtype || \"bin\";\n}\n\nfunction fallbackHashHex(bytes: Uint8Array): string {\n    // Non-cryptographic fallback only for environments without SubtleCrypto.\n    let h = 2166136261;\n    for (let i = 0; i < bytes.length; i++) {\n        h ^= bytes[i];\n        h = Math.imul(h, 16777619);\n    }\n    return (h >>> 0).toString(16).padStart(8, \"0\").repeat(8);\n}\n\nasync function sha256Hex(bytes: Uint8Array): Promise<string> {\n    try {\n        const subtle = (globalThis.crypto as Crypto | undefined)?.subtle;\n        if (!subtle) return fallbackHashHex(bytes);\n        const digest = await subtle.digest(\"SHA-256\", bytes);\n        const out = new Uint8Array(digest);\n        return Array.from(out, (b) => b.toString(16).padStart(2, \"0\")).join(\"\");\n    } catch {\n        return fallbackHashHex(bytes);\n    }\n}\n\nexport function isBase64Like(input: string): boolean {\n    return looksLikeBase64(input).isBase64;\n}\n\nexport async function normalizeDataAsset(input: DataAssetInput, options: NormalizeDataAssetOptions = {}): Promise<DataAsset> {\n    const maxBytes = options.maxBytes ?? 50 * 1024 * 1024;\n    const namePrefix = (options.namePrefix || \"asset\").trim() || \"asset\";\n    const preserveFileName = options.preserveFileName ?? false;\n\n    let source: DataAssetSource = \"text\";\n    let blob: Blob;\n    let incomingFile: File | null = null;\n\n    if (input instanceof File) {\n        source = \"file\";\n        incomingFile = input;\n        blob = options.mimeType && options.mimeType !== input.type\n            ? new Blob([await input.arrayBuffer()], { type: options.mimeType })\n            : input;\n    } else if (input instanceof Blob) {\n        source = \"blob\";\n        blob = options.mimeType && options.mimeType !== input.type\n            ? new Blob([await input.arrayBuffer()], { type: options.mimeType })\n            : input;\n    } else {\n        const raw = (input instanceof URL ? input.toString() : String(input ?? \"\")).trim();\n        const parsed = parseDataUrl(raw);\n        const decodedUri = options.uriComponent ? tryDecodeURIComponent(raw) : (likelyUriComponent(raw) ? tryDecodeURIComponent(raw) : raw);\n\n        if (parsed) {\n            source = \"data-url\";\n        } else if (canParseUrl(raw)) {\n            source = \"url\";\n        } else if (isBase64Like(raw)) {\n            source = \"base64\";\n        } else if (decodedUri !== raw && (parseDataUrl(decodedUri) || isBase64Like(decodedUri) || canParseUrl(decodedUri))) {\n            source = \"uri\";\n        } else {\n            source = \"text\";\n        }\n\n        const stringSource = source === \"uri\" ? decodedUri : raw;\n        blob = await stringToBlob(stringSource, {\n            mimeType: options.mimeType,\n            uriComponent: options.uriComponent,\n            isBase64: source === \"base64\" ? true : undefined,\n            maxBytes,\n        });\n    }\n\n    const bytes = await blobToBytes(blob);\n    if (bytes.byteLength > maxBytes) throw new Error(`Data too large: ${bytes.byteLength} bytes`);\n\n    const hash = await sha256Hex(bytes);\n    const mimeType = (options.mimeType || blob.type || DEFAULT_MIME).trim() || DEFAULT_MIME;\n    const extension = extensionByMimeType(mimeType);\n    const hashedName = options.filename || `${namePrefix}-${hash.slice(0, 16)}.${extension}`;\n    const finalName = preserveFileName && incomingFile?.name ? incomingFile.name : hashedName;\n\n    const file = incomingFile && preserveFileName && !options.mimeType\n        ? incomingFile\n        : new File([blob], finalName, { type: mimeType });\n\n    return {\n        hash,\n        name: file.name,\n        type: file.type || mimeType,\n        size: file.size,\n        source,\n        file,\n    };\n}\n\nexport async function stringToBlobOrFile(input: string, options: StringToBinaryOptions = {}): Promise<Blob | File> {\n    const maxBytes = options.maxBytes ?? 50 * 1024 * 1024;\n    const raw = (input ?? \"\").trim();\n\n    const parsedDataUrl = parseDataUrl(raw);\n    if (parsedDataUrl) {\n        const mimeType = options.mimeType || parsedDataUrl.mimeType || DEFAULT_MIME;\n        const payload = options.uriComponent ? tryDecodeURIComponent(parsedDataUrl.data) : (likelyUriComponent(parsedDataUrl.data) ? tryDecodeURIComponent(parsedDataUrl.data) : parsedDataUrl.data);\n        const isBase64 = options.isBase64 ?? parsedDataUrl.isBase64;\n\n        if (isBase64) {\n            const bytes = decodeBase64ToBytes(payload, {\n                alphabet: options.base64?.alphabet || \"base64\",\n                lastChunkHandling: options.base64?.lastChunkHandling || \"loose\",\n            });\n            if (bytes.byteLength > maxBytes) throw new Error(`Decoded data too large: ${bytes.byteLength} bytes`);\n            const blob = new Blob([bytesToArrayBuffer(bytes)], { type: mimeType });\n            if (!options.asFile) return blob;\n            return new File([blob], options.filename || \"file\", { type: mimeType });\n        }\n\n        // Non-base64 data URL: treat as URL-encoded bytes/string. We keep it as UTF-8 text by default.\n        const blob = new Blob([payload], { type: mimeType });\n        if (!options.asFile) return blob;\n        return new File([blob], options.filename || \"file\", { type: mimeType });\n    }\n\n    // If it's a normal URL, fetch it.\n    try {\n        if (typeof URL !== \"undefined\" && (URL as any).canParse?.(raw)) {\n            const res = await fetch(raw);\n            const blob = await res.blob();\n            const mimeType = options.mimeType || blob.type || DEFAULT_MIME;\n            const typed = blob.type === mimeType ? blob : new Blob([await blob.arrayBuffer()], { type: mimeType });\n            if (!options.asFile) return typed;\n            return new File([typed], options.filename || \"file\", { type: mimeType });\n        }\n    } catch {\n        // fall through to treat as plain string / base64\n    }\n\n    // Plain string case: base64 bytes OR text.\n    const maybeDecoded = options.uriComponent ? tryDecodeURIComponent(raw) : (likelyUriComponent(raw) ? tryDecodeURIComponent(raw) : raw);\n    const base64Hint = looksLikeBase64(maybeDecoded);\n    const isBase64 = options.isBase64 ?? base64Hint.isBase64;\n    const mimeType = options.mimeType || (isBase64 ? DEFAULT_MIME : \"text/plain;charset=utf-8\");\n\n    if (isBase64) {\n        const bytes = decodeBase64ToBytes(maybeDecoded, {\n            alphabet: options.base64?.alphabet || base64Hint.alphabet,\n            lastChunkHandling: options.base64?.lastChunkHandling || \"loose\",\n        });\n        if (bytes.byteLength > maxBytes) throw new Error(`Decoded data too large: ${bytes.byteLength} bytes`);\n        const blob = new Blob([bytesToArrayBuffer(bytes)], { type: mimeType });\n        if (!options.asFile) return blob;\n        return new File([blob], options.filename || \"file\", { type: mimeType });\n    }\n\n    const blob = new Blob([maybeDecoded], { type: mimeType });\n    if (!options.asFile) return blob;\n    return new File([blob], options.filename || \"file\", { type: mimeType });\n}\n\nexport async function stringToBlob(input: string, options: Omit<StringToBinaryOptions, \"asFile\" | \"filename\"> = {}): Promise<Blob> {\n    return (await stringToBlobOrFile(input, { ...options, asFile: false })) as Blob;\n}\n\nexport async function stringToFile(input: string, filename: string, options: Omit<StringToBinaryOptions, \"asFile\" | \"filename\"> = {}): Promise<File> {\n    return (await stringToBlobOrFile(input, { ...options, asFile: true, filename })) as File;\n}\n\n","import { RAFBehavior, orientOf, getBoundingOrientRect, setStyleProperty } from \"fest/dom\";\nimport { makeObjectAssignable, observe, affected, numberRef } from \"fest/object\";\nimport { makeShiftTrigger, LongPressHandler, clampCell, floorCell, bindDraggable } from \"fest/lure\";\nimport { convertOrientPxToCX, redirectCell } from \"fest/core\";\nimport type { GridArgsType as GridArgsType, GridItemType } from \"fest/core\";\n\n//\n// Track registered CSS properties to avoid duplicate registration errors during HMR\nconst registeredCSSProperties = new Set<string>();\n\n[   // @ts-ignore\n    { name: \"--drag-x\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--drag-y\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--resize-x\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--resize-y\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--shift-x\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--shift-y\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cs-grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cs-grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cs-transition-r\", syntax: \"<length-percentage>\", inherits: false, initialValue: \"0px\" },\n    { name: \"--cs-transition-c\", syntax: \"<length-percentage>\", inherits: false, initialValue: \"0px\" },\n    { name: \"--cs-p-grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cs-p-grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--os-grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--os-grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--rv-grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--rv-grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cell-x\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cell-y\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n].forEach((options: any) => {\n    if (typeof CSS != \"undefined\" && !registeredCSSProperties.has(options.name)) {\n        try {\n            CSS?.registerProperty?.(options);\n            registeredCSSProperties.add(options.name);\n        } catch (e) {\n            // Silently ignore duplicate registration errors (common during HMR)\n        }\n    }\n});\n\n//\n//const setStyleProperty = (item, prop, value) => {\n    /*if (value == null || item?.style?.getPropertyValue?.(prop) === String(value)) { return; }\n    return item?.style?.setProperty?.(prop, value);*/\n//}\n\n//\n//const computed = Symbol(\"@computed\");\nconst depAxis  = (axis: string = \"x\")=>{ const m = /*matchMedia(\"(orientation: portrait)\").matches*/true; return {[\"x\"]: m?\"c\":\"r\", [\"y\"]: m?\"r\":\"c\"}[axis]; }\nconst swapped  = (axis: string = \"x\")=>{ const m = matchMedia(\"(orientation: portrait)\").matches; return {[\"x\"]: m?\"x\":\"y\", [\"y\"]: m?\"y\":\"x\"}[axis]; }\n\n// DragCoord\nexport const animationSequence = (DragCoord = 0, axis = \"x\") => {\n    const drag = \"--drag-\" + axis;\n    const axisKey = depAxis(axis);\n    const rvProp = `--rv-grid-${axisKey}`;\n    const gridProp = `--cs-grid-${axisKey}`;\n    const prevGridProp = `--cs-p-grid-${axisKey}`;\n    return [\n        { [rvProp]: `var(${prevGridProp})`, [drag]: DragCoord }, // starting...\n        { [rvProp]: `var(${gridProp})`, [drag]: 0 }\n    ];\n};\n\n//\nexport const doAnimate = async (newItem, axis: any = \"x\", animate = false, signal?: AbortSignal)=>{\n\n    //\n    //setProperty(newItem, \"--cs-p-offset-\" + swp, `${newItem?.[{\"x\": \"offsetLeft\", \"y\": \"offsetTop\"}[swp as any]] || 0}px`);\n    //const oldOffset = `${newItem?.[{\"x\": \"offsetLeft\", \"y\": \"offsetTop\"}[swp as any]] || 0}px`;\n    //setProperty(newItem, \"--cs-p-grid-\" + depAxis(axis), oldValue);\n    const dragCoord = parseFloat(newItem?.style?.getPropertyValue?.(\"--drag-\" + axis) || \"0\") || 0;\n\n    //\n    if (!animate) { await new Promise((r)=>requestAnimationFrame(r)); };\n\n    //\n    const animation = animate && !matchMedia(\"(prefers-reduced-motion: reduce)\")?.matches ? newItem.animate(animationSequence(dragCoord, axis), {\n        fill: \"none\",\n        duration: 200,\n        //duration: 150,\n        easing: \"linear\"\n    }) : null;\n\n    //\n    let shifted = false;\n    const onShift: [any, any] = [(ev)=>{\n        if (!shifted) {\n            shifted = true;\n            animation?.finish?.();\n        }\n\n        //\n        newItem?.removeEventListener?.(\"m-dragstart\", ...onShift);\n        signal?.removeEventListener?.(\"abort\", ...onShift);\n    }, {once: true}];\n\n    // not fact, but for animation\n    signal?.addEventListener?.(\"abort\", ...onShift);\n    newItem?.addEventListener?.(\"m-dragstart\", ...onShift);\n    //await new Promise((r)=>requestAnimationFrame(r));\n    return animation?.finished?.catch?.(console.warn.bind(console));\n    //if (!shifted) { onShift?.[0]?.(); } // commit dragging result\n}\n\n//\nexport const reflectCell = async (newItem: HTMLElement, pArgs: GridArgsType, withAnimate = false): Promise<void> => {\n    const layout: [number, number] = [(pArgs?.layout as any)?.columns || pArgs?.layout?.[0] || 4, (pArgs?.layout as any)?.rows || pArgs?.layout?.[1] || 8];\n    const {item, list, items} = pArgs;\n    await new Promise((r)=>queueMicrotask(()=>r(true)));\n    return affected?.(item, (state, property)=>{\n        const gridSystem = newItem?.parentElement;\n        layout[0] = parseInt(gridSystem?.getAttribute?.(\"data-grid-columns\") || \"4\") || layout[0];\n        layout[1] = parseInt(gridSystem?.getAttribute?.(\"data-grid-rows\") || \"8\") || layout[1];\n        const args = {item, list, items, layout, size: [gridSystem?.clientWidth, gridSystem?.clientHeight]};\n        if (item && !item?.cell) { item.cell = makeObjectAssignable(observe([0, 0])); }; // @ts-ignore\n        if (property == \"cell\") {\n            const nc = redirectCell(item?.cell || [0, 0], args as GridArgsType);\n            if (nc[0] != item?.cell?.[0] && item?.cell) { item.cell[0] = nc?.[0]; }\n            if (nc[1] != item?.cell?.[1] && item?.cell) { item.cell[1] = nc?.[1]; }\n            setStyleProperty(newItem, \"--p-cell-x\", nc?.[0]);\n            setStyleProperty(newItem, \"--p-cell-y\", nc?.[1]);\n            setStyleProperty(newItem, \"--cell-x\", nc?.[0]);\n            setStyleProperty(newItem, \"--cell-y\", nc?.[1]);\n        }\n    });\n}\n\n//\nexport const makeDragEvents = async (\n    newItem: HTMLElement,\n    { layout, dragging, currentCell, syncDragStyles }: {\n        layout: [number, number],\n        dragging: [any, any],\n        currentCell: [any, any],\n        syncDragStyles: (flush: boolean) => void\n    },\n    { item, items, list }: {\n        item: GridItemType,\n        items: Map<string, GridItemType> | Set<GridItemType> | GridItemType[],\n        list: Set<string> | string[]\n    }): Promise<{ dispose: () => void, draggable: any, process: (ev: MouseEvent, el: HTMLElement) => Promise<unknown> } | undefined> => {\n\n    //\n    const $updateLayout = (newItem: HTMLElement): [number, number] => {\n        const gridSystem = newItem?.parentElement as HTMLElement | null;\n        if (!gridSystem) { return layout; }\n        layout[0] = parseInt(gridSystem.getAttribute?.(\"data-grid-columns\") as string || \"4\") || layout[0];\n        layout[1] = parseInt(gridSystem.getAttribute?.(\"data-grid-rows\") as string || \"8\") || layout[1];\n        return layout;\n    };\n\n    //\n    const getSpanOffset = (bounds: DOMRect | null, layoutSnapshot: [number, number] | null, size: [number, number] | null, orient: number | null): [number, number] => {\n        if (!bounds || !layoutSnapshot || !size || orient == null) { return [0, 0]; }\n        const safeLayout: [number, number] = [\n            Math.max(layoutSnapshot?.[0] || 0, 1),\n            Math.max(layoutSnapshot?.[1] || 0, 1)\n        ];\n        const orientedSize: [number, number] = orient % 2 ? [size?.[1] || 1, size?.[0] || 1] : [size?.[0] || 1, size?.[1] || 1];\n        const cellSize: [number, number] = [\n            (orientedSize[0] || 1) / safeLayout[0],\n            (orientedSize[1] || 1) / safeLayout[1]\n        ];\n        const spanX = Math.max((bounds?.width || cellSize[0]) / (cellSize[0] || 1), 1);\n        const spanY = Math.max((bounds?.height || cellSize[1]) / (cellSize[1] || 1), 1);\n        return [(spanX - 1) / 2, (spanY - 1) / 2];\n    };\n\n    //\n    const computeCellFromBounds = (): { inset?: [number, number], cell?: [number, number] } | null => {\n        const gridSystem = newItem?.parentElement as HTMLElement | null;\n        if (!gridSystem) { return null; }\n\n        //\n        const orient = orientOf(gridSystem);\n        const cbox = getBoundingOrientRect(newItem, orient) ?? newItem?.getBoundingClientRect?.();\n        const pbox = getBoundingOrientRect(gridSystem, orient) ?? gridSystem?.getBoundingClientRect?.();\n        if (!cbox || !pbox) { return null; }\n\n        //\n        const layoutSnapshot = [...$updateLayout(newItem)] as [number, number];\n        const parentRect = gridSystem.getBoundingClientRect?.();\n        const gridSize: [number, number] = [\n            gridSystem?.clientWidth || gridSystem?.offsetWidth || parentRect?.width || 1,\n            gridSystem?.clientHeight || gridSystem?.offsetHeight || parentRect?.height || 1\n        ];\n        const inset: [number, number] = [\n            //(cbox.left - pbox.left),\n            //(cbox.top - pbox.top)\n            (((cbox.left + cbox.right) / 2) - pbox.left),\n            (((cbox.top + cbox.bottom) / 2) - pbox.top)\n        ];\n        const args = { item, items, list, layout: layoutSnapshot as [number, number], size: gridSize };\n        const spanOffset = getSpanOffset(cbox as unknown as DOMRect, layoutSnapshot as [number, number], gridSize, orient);\n        const projected = convertOrientPxToCX(inset, args, orient);\n        projected[0] -= spanOffset[0];\n        projected[1] -= spanOffset[1];\n        const flooredCell = floorCell(projected as [number, number]);\n        const redirectedCell = redirectCell([flooredCell.x.value, flooredCell.y.value], args);\n        const clampedCell = clampCell(redirectedCell, layoutSnapshot as [number, number]);\n        return {\n            inset: [inset[0] - dragging?.[0]?.value, inset[1] - dragging?.[1]?.value],\n            cell: [clampedCell.x.value, clampedCell.y.value] // Convert Vector2D back to array\n        } as { inset?: [number, number], cell?: [number, number] };\n    };\n\n    //\n    const setCellAxis = (cell: [number, number] | null, axis = 0): void => {\n        if (!cell) { return; }\n        if (currentCell?.[axis]?.value != cell?.[axis]) {\n            try { currentCell[axis].value = cell[axis]; } catch(e){};\n        };\n    };\n\n    //\n    const setCell = (cell: [number, number]): void => {\n        const args = {item, items, list, layout, size: [newItem?.clientWidth || 0, newItem?.clientHeight || 0] as [number, number]};\n        const redirectedCell = redirectCell(cell, args as GridArgsType);\n        const clampedCell = clampCell(redirectedCell, layout as [number, number]);\n        cell = [clampedCell.x.value, clampedCell.y.value]; // Convert Vector2D back to array\n        setCellAxis(cell, 0); setCellAxis(cell, 1);\n    };\n\n    //\n    const syncInsetVars = (inset?: [number, number]): void => {\n        if (!inset) { return; }\n        setStyleProperty(newItem, \"--cs-inset-x\", `${inset[0] || 0}px`);\n        setStyleProperty(newItem, \"--cs-inset-y\", `${inset[1] || 0}px`);\n    };\n\n    //\n    const correctOffset = (dragging: [any, any]): [number, number] => {\n        // compute correct cell with span awareness\n        const ctx = computeCellFromBounds() as { inset: [number, number], cell: [number, number] } | null;\n        const cell = ctx?.cell;\n\n        //\n        if (cell) {\n            syncInsetVars((ctx?.inset || [0, 0]) as [number, number]); setCell(cell);\n            setStyleProperty(newItem, \"--p-cell-x\", cell?.[0] ?? currentCell?.[0]?.value ?? item?.cell?.[0] ?? 0);\n            setStyleProperty(newItem, \"--p-cell-y\", cell?.[1] ?? currentCell?.[1]?.value ?? item?.cell?.[1] ?? 0);\n            setStyleProperty(newItem, \"--cell-x\", cell?.[0] ?? currentCell?.[0]?.value ?? item?.cell?.[0] ?? 0);\n            setStyleProperty(newItem, \"--cell-y\", cell?.[1] ?? currentCell?.[1]?.value ?? item?.cell?.[1] ?? 0);\n        }\n\n        // reset dragging offset\n        if (dragging && Array.isArray(dragging)) {\n            try { dragging[0].value = 0, dragging[1].value = 0; } catch (e) { };\n        }\n        syncDragStyles?.(true); newItem?.setAttribute?.(\"data-dragging\", \"\");\n        return [0, 0];\n    };\n\n    //\n    const resolveDragging = (dragging: [any, any]): [number, number] => {\n        // compute correct cell\n        const ctx = computeCellFromBounds() as { inset: [number, number], cell: [number, number] } | null;\n        const cell = ctx?.cell;\n\n        //\n        setStyleProperty(newItem, \"--p-cell-x\", currentCell?.[0]?.value ?? item?.cell?.[0] ?? cell?.[0]);\n        setStyleProperty(newItem, \"--p-cell-y\", currentCell?.[1]?.value ?? item?.cell?.[1] ?? cell?.[1]);\n        syncDragStyles?.(true);\n\n        //\n        if (cell) {\n            setCell(cell);\n            setStyleProperty(newItem, \"--cell-x\", cell?.[0] ?? currentCell?.[0]?.value ?? item?.cell?.[0] ?? 0);\n            setStyleProperty(newItem, \"--cell-y\", cell?.[1] ?? currentCell?.[1]?.value ?? item?.cell?.[1] ?? 0);\n        }\n\n        //\n        const animations = [\n            doAnimate(newItem, \"x\", true),\n            doAnimate(newItem, \"y\", true)\n        ];\n\n        //\n        Promise.allSettled(animations).finally(()=>{\n            if (dragging && Array.isArray(dragging)) {\n                try { dragging[0].value = 0, dragging[1].value = 0; } catch (e) { };\n            }\n\n            //\n            syncDragStyles?.(true);\n\n            //\n            if (cell) {\n                setStyleProperty(newItem, \"--p-cell-x\", cell?.[0] ?? currentCell?.[0]?.value ?? item?.cell?.[0] ?? 0);\n                setStyleProperty(newItem, \"--p-cell-y\", cell?.[1] ?? currentCell?.[1]?.value ?? item?.cell?.[1] ?? 0);\n                setStyleProperty(newItem, \"--cell-x\", cell?.[0] ?? currentCell?.[0]?.value ?? item?.cell?.[0] ?? 0);\n                setStyleProperty(newItem, \"--cell-y\", cell?.[1] ?? currentCell?.[1]?.value ?? item?.cell?.[1] ?? 0);\n            }\n\n            //\n            newItem?.removeAttribute?.(\"data-dragging\");\n            delete newItem?.dataset?.dragging;\n        });\n\n        //\n        return [0, 0];\n    };\n\n    //\n    const customTrigger = (doGrab: (ev: MouseEvent, newItem: HTMLElement) => void): LongPressHandler => new LongPressHandler(newItem, {\n        handler: \"*\",\n        anyPointer: true,\n        mouseImmediate: true,\n        minHoldTime: 60 * 3600,\n        maxHoldTime: 100\n    }, makeShiftTrigger((ev)=>{correctOffset(dragging); doGrab?.(ev, newItem)}));\n\n    //\n    return bindDraggable(customTrigger, resolveDragging, dragging);\n};\n\n// shifting - reactive basis\nexport const ROOT = typeof document != \"undefined\" ? document?.documentElement : null;\nexport const bindInteraction = (newItem: HTMLElement, pArgs: any): [any, any] => {\n    reflectCell(newItem, pArgs, true);\n\n    //\n    const { item, items, list } = pArgs, layout = [pArgs?.layout?.columns || pArgs?.layout?.[0] || 4, pArgs?.layout?.rows || pArgs?.layout?.[1] || 8];\n    const dragging: [any, any] = [ numberRef(0, RAFBehavior()), numberRef(0, RAFBehavior()) ], currentCell: [any, any] = [ numberRef(item?.cell?.[0] || 0), numberRef(item?.cell?.[1] || 0) ];\n\n    //\n    setStyleProperty(newItem, \"--cell-x\", currentCell?.[0]?.value || 0);\n    setStyleProperty(newItem, \"--cell-y\", currentCell?.[1]?.value || 0);\n\n    //\n    const applyDragStyles = (): void => {\n        if (dragging?.[0]?.value != null) setStyleProperty(newItem, \"--drag-x\", dragging?.[0]?.value || 0);\n        if (dragging?.[1]?.value != null) setStyleProperty(newItem, \"--drag-y\", dragging?.[1]?.value || 0);\n    };\n\n    //\n    let dragStyleRaf = 0, lastRaf: any = null;\n    const syncDragStyles = (flush = false): void => {\n        if (flush) {\n            applyDragStyles();\n            dragStyleRaf = 0;\n            if (lastRaf) { cancelAnimationFrame(lastRaf); }\n            lastRaf = null;\n        } else\n        if (!dragStyleRaf) {\n            dragStyleRaf = 1;\n            lastRaf = requestAnimationFrame(() => {\n                applyDragStyles();\n                dragStyleRaf = 0;\n                lastRaf = null;\n            });\n        }\n    };\n\n    //\n    affected([dragging?.[0], \"value\"], (val, prop) => { if (prop == \"value\") { syncDragStyles(); } });\n    affected([dragging?.[1], \"value\"], (val, prop) => { if (prop == \"value\") { syncDragStyles(); } });\n    syncDragStyles(true);\n\n    //\n    affected([currentCell?.[0], \"value\"], (val, prop) => {\n        if (prop == \"value\" && item.cell != null && val != null) {\n            setStyleProperty(newItem, \"--cell-x\", (item.cell[0] = val) || 0);\n        }\n    });\n\n    //\n    affected([currentCell?.[1], \"value\"], (val, prop) => {\n        if (prop == \"value\" && item.cell != null && val != null) {\n            setStyleProperty(newItem, \"--cell-y\", (item.cell[1] = val) || 0);\n        }\n    });\n\n    //\n    makeDragEvents(newItem, {layout: layout as [number, number], currentCell, dragging, syncDragStyles}, {item, items, list});\n    return currentCell as [any, any];\n}\n","import { E, elementPointerMap } from \"fest/lure\";\nimport { DOMMixin } from \"fest/dom\";\n\n//\nexport class UIGridBox extends DOMMixin {\n    constructor(name?) { super(name); }\n\n    // @ts-ignore\n    connect(ws) {\n        const self: any = ws?.deref?.();\n        E(self, {classList: new Set([\"ui-gridlayout\"])});\n\n        //\n        const size = [self.clientWidth, self.clientHeight];\n        const resizeObserver = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                if (entry?.contentBoxSize) {\n                    const contentBoxSize = entry?.contentBoxSize?.[0];\n                    size[0] = (contentBoxSize?.inlineSize || size[0] || 0);\n                    size[1] = (contentBoxSize?.blockSize || size[1] || 0);\n                }\n            }\n        });\n\n        //\n        Object.defineProperty(self, \"size\", { get: () => size });\n\n        //\n        resizeObserver.observe(self, {box: \"content-box\"});\n        elementPointerMap.set(self, {\n            pointerMap: new Map<number, any>(),\n            pointerCache: new Map<number, any>()\n        });\n    }\n}\n\n//\nnew UIGridBox(\"ui-gridbox\");\nexport default UIGridBox;\n","import { elementPointerMap } from \"fest/lure\";\nimport { DOMMixin, getCorrectOrientation, orientationNumberMap } from \"fest/dom\";\nimport { numberRef } from \"fest/object\";\nimport { Vector2D, vector2Ref } from \"fest/lure\";\n\n//\nexport class UIOrientBox extends DOMMixin {\n    constructor(name?) { super(name); }\n\n    // @ts-ignore\n    connect(ws) {\n        const self: any = ws?.deref?.() ?? ws;\n        self.classList.add(\"ui-orientbox\");\n\n        //\n        //const zoom = attrRef(self, \"zoom\", 1), orient = attrRef(self, \"orient\", 0);\n        const zoom = numberRef(1), orient = numberRef(orientationNumberMap?.[getCorrectOrientation()] || 0);\n        self.style.setProperty(\"--zoom\", zoom.value);\n        self.style.setProperty(\"--orient\", orient.value);\n\n        // TODO: broken, fix later\n        //bindWith(self, \"--zoom\", zoom, handleStyleChange, null);\n        //bindWith(self, \"--orient\", orient, handleStyleChange, null);\n\n        // settings size is illogical! and not implemented!\n        Object.defineProperty(self, \"size\", { get: () => size });\n\n        //\n        Object.defineProperty(self, \"zoom\", {\n            get: () => parseFloat(zoom.value) || 1,\n            set: (value) => { zoom.value = value; self.style.setProperty(\"--zoom\", value); }\n        });\n\n        //\n        Object.defineProperty(self, \"orient\", {\n            get: () => parseInt(orient.value) || 0,\n            set: (value) => { orient.value = value; self.style.setProperty(\"--orient\", value); }\n        });\n\n        //\n        const size = vector2Ref(self.clientWidth, self.clientHeight);\n        const resizeObserver = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                if (entry?.contentBoxSize) {\n                    const contentBoxSize = entry?.contentBoxSize?.[0];\n                    size.x.value = (contentBoxSize?.inlineSize || size.x.value || 0);\n                    size.y.value = (contentBoxSize?.blockSize || size.y.value || 0);\n                }\n            }\n        });\n\n        //\n        resizeObserver.observe(self, {box: \"content-box\"});\n        elementPointerMap.set(self, {\n            pointerMap: new Map<number, any>(),\n            pointerCache: new Map<number, any>()\n        });\n\n        //\n        return this;\n    }\n}\n\n//\nnew UIOrientBox(\"ui-orientbox\");\nexport default UIOrientBox;\n","import { addEvent, fixedClientZoom } from \"fest/dom\";\nimport { stringRef } from \"fest/object\";\n\n//\nexport const electronAPI = \"electronBridge\";\n\n//\nfunction extractAlpha(input) {\n    if (typeof input !== 'string') return null;\n    let color = input.trim().toLowerCase();\n\n    // 1)  \n    if (color === 'transparent') return 0;\n\n    // 2) Hex- (#rgb[a], #rrggbb[aa])     getComputedStyle,  \n    if (color.startsWith('#')) {\n        const hex = color;\n        if (hex.length === 4) return 1; // #rgb\n        if (hex.length === 7) return 1; // #rrggbb\n        if (hex.length === 5) { // #rgba\n            const a = hex[4];\n            const aa = a + a; // expand\n            return clamp(parseInt(aa, 16) / 255, 0, 1);\n        }\n        if (hex.length === 9) { // #rrggbbaa\n            const aa = hex.slice(7, 9);\n            return clamp(parseInt(aa, 16) / 255, 0, 1);\n        }\n        return null; //  \n    }\n\n    // 3)  : rgb(), rgba(), hsl()/hsla()  .., color()\n    const fnMatch = color.match(/^([a-z-]+)\\((.*)\\)$/i);\n    if (!fnMatch) {\n        // getComputedStyle   'inherit/initial/unset'   :\n        return null;\n    }\n\n    const name = fnMatch[1];\n    const body = fnMatch[2].trim();\n\n    // 3a)     :  / <alpha>\n    //   rgb(), hsl(), hwb(), lab(), lch(), oklab(), oklch(), color()\n    {\n        const slashIdx = body.lastIndexOf('/');\n        if (slashIdx !== -1) {\n            const aStr = body.slice(slashIdx + 1).trim();\n            const a = parseAlphaComponent(aStr);\n            if (a != null) return clamp(a, 0, 1);\n            return null;\n        }\n    }\n\n    // 3b)  -  4- : rgba(..., a), hsla(..., a)\n    //      rgba(r,g,b,a)\n    if (body.includes(',')) {\n        const parts = body.split(',').map(s => s.trim());\n        if (parts.length >= 4) {\n            const a = parseAlphaComponent(parts[3]);\n            if (a != null) return clamp(a, 0, 1);\n            return null;\n        }\n        // 3    \n        return 1;\n    }\n\n    // 3c)     => 1\n    return 1;\n}\n\nfunction parseAlphaComponent(str) {\n    if (!str) return null;\n    // : 30% => 0.3\n    if (str.endsWith('%')) {\n        const n = parseFloat(str);\n        if (Number.isNaN(n)) return null;\n        return n / 100;\n    }\n    //  0..1\n    const n = parseFloat(str);\n    if (Number.isNaN(n)) return null;\n    return n;\n}\n\nfunction clamp(v, min, max) {\n    return Math.min(max, Math.max(min, v));\n}\n\n\n\n//\nconst tacp = (color: string)=>{\n    if (!color || color == null) return 0;\n    return (extractAlpha?.(color) || 0) > 0.1;\n};\n\n//\nconst setIdleInterval = (cb, timeout = 1000, ...args)=>{\n    requestIdleCallback(async ()=>{\n        if (!cb || (typeof cb != \"function\")) return;\n        while (true) { // @ts-ignore\n            await Promise.try(cb, ...args);\n            await new Promise((r)=>setTimeout(r, timeout));\n            await new Promise((r)=>requestIdleCallback(r, {timeout: 100}));\n            await new Promise((r)=>requestAnimationFrame(r));\n        }\n    }, {timeout: 1000});\n}\n\n//\nexport const pickBgColor = (x, y, holder: HTMLElement | null = null)=>{\n    // exclude any non-reasonable\n    const opaque = Array.from(document.elementsFromPoint(x, y))?.filter?.((el: any)=>(\n        ((el instanceof HTMLElement) && el != holder) &&\n        (el?.dataset?.alpha != null ? parseFloat(el?.dataset?.alpha) > 0.01 : true) && // @ts-ignore\n         el?.checkVisibility?.({ contentVisibilityAuto: true, opacityProperty: true, visibilityProperty: true }) &&\n         el?.matches?.(\":not([data-hidden])\") &&\n        (el?.style?.getPropertyValue(\"display\") != \"none\")\n    ))\n    .map((element) => {\n        const computed = getComputedStyle?.(element);\n        return {\n            element,\n            zIndex: parseInt(computed?.zIndex || \"0\", 10) || 0,\n            color: (computed?.backgroundColor || \"transparent\")\n        }})\n    .sort((a, b) => Math.sign(b.zIndex - a.zIndex))\n    .filter(({ color })=>(tacp(color)));\n\n    //\n    if (opaque?.[0]?.element instanceof HTMLElement) {\n        return opaque?.[0]?.color || \"transparent\";\n    }\n\n    //\n    return \"transparent\";\n};\n\n//\nexport const pickFromCenter = (holder)=>{\n    // not able to using some mechanics\n    const box = holder?.getBoundingClientRect();//getBoundingOrientBox(holder);\n    if (box) {\n        const Z = 0.5 * (fixedClientZoom?.() || 1);\n        const xy: [number, number] = [(box.left + box.right) * Z, (box.top + box.bottom) * Z];\n        return pickBgColor(...xy, holder);\n    }\n}\n\n//\nexport const dynamicNativeFrame = (root = document.documentElement)=>{\n    let media = root?.querySelector?.('meta[data-theme-color]') ?? root?.querySelector?.('meta[name=\"theme-color\"]');\n\n    // Create meta element if it doesn't exist\n    if (!media && root == document.documentElement) {\n        media = document.createElement('meta');\n        media.setAttribute('name', 'theme-color');\n        media.setAttribute('data-theme-color', '');\n        media.setAttribute('content', 'transparent');\n        document.head.appendChild(media);\n    }\n\n    const color = pickBgColor(globalThis.innerWidth - 64, 10);\n    if ((media || window?.[electronAPI]) && root == document.documentElement) {\n        media?.setAttribute?.(\"content\", color);\n    }\n}\n\n//\nexport const dynamicBgColors = (root = document.documentElement) => {\n    root.querySelectorAll(\"body, body > *, body > * > *\").forEach((target)=>{\n        if (target) { pickFromCenter(target); }\n    });\n};\n\n//\nexport const dynamicTheme = (ROOT = document.documentElement)=>{\n    matchMedia(\"(prefers-color-scheme: dark)\").addEventListener(\"change\", ({}) => dynamicBgColors(ROOT));\n\n    //\n    const updater = ()=>{\n        dynamicNativeFrame(ROOT);\n        dynamicBgColors(ROOT);\n    }\n\n    //\n    addEvent(ROOT, \"u2-appear\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(ROOT, \"u2-hidden\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(ROOT, \"u2-theme-change\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(window, \"load\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(document, \"visibilitychange\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    setIdleInterval(updater, 500);\n}\n\n//\nexport const currentColorFromPointRef = (x, y, ROOT = document.documentElement, timeout = 500)=>{\n    const color = pickBgColor(x, y, ROOT);\n    const rfc = stringRef(color);\n    const updater = ()=>{\n        const color = pickBgColor(x, y, ROOT);\n        rfc.value = color;\n    }\n\n    //\n    addEvent(ROOT, \"u2-appear\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(ROOT, \"u2-hidden\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(ROOT, \"u2-theme-change\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(window, \"load\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(document, \"visibilitychange\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    setIdleInterval(updater, timeout);\n    return rfc;\n}\n\n//\nexport const currentColorFromCenterRef = (element: HTMLElement, ROOT = document.documentElement, timeout = 500)=>{\n    const color = pickFromCenter(element);\n    const rfc = stringRef(color);\n    const updater = ()=>{\n        const color = pickFromCenter(element);\n        rfc.value = color;\n    }\n\n    //\n    addEvent(ROOT, \"u2-appear\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(ROOT, \"u2-hidden\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(ROOT, \"u2-theme-change\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(window, \"load\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(document, \"visibilitychange\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    setIdleInterval(updater, timeout);\n    return rfc;\n}\n\n//\nexport default dynamicTheme;\n","import { E, Q, localStorageRef } from \"fest/lure\";\n\n//\nexport type StyleTuple = [selector: string, sheet: object];\nexport const updateThemeBase = async (originColor: string|null = null)=>{\n    const primaryRef = localStorageRef(\"--primary\", originColor);\n    if (originColor != null && primaryRef.value != originColor) primaryRef.value = originColor;\n    E(document.documentElement, { style: { \"--primary\": primaryRef } })\n    return [primaryRef];\n}\n","import { dynamicNativeFrame, dynamicBgColors, dynamicTheme } from \"./DynamicEngine.js\";\n\n//\nexport const colorScheme = async () => {\n    dynamicNativeFrame();\n    dynamicBgColors();\n};\n\n//\nexport default colorScheme;\n\n//\nif (typeof document != \"undefined\") {\n    requestAnimationFrame(()=>colorScheme?.());\n    dynamicTheme?.();\n}\n","import { addToCallChain, booleanRef, numberRef, stringRef } from \"fest/object\";\nimport { handleByPointer } from \"../controllers/Handler\";\nimport { WRef } from \"fest/core\";\n\n//\nexport const pointerAnchorRef = (root = typeof document != \"undefined\" ? document?.documentElement : null)=>{\n    if (!root) return () => { };\n    const coordinate = [ numberRef(0), numberRef(0) ];\n    coordinate.push(WRef(handleByPointer((ev)=>{ coordinate[0].value = ev.clientX; coordinate[1].value = ev.clientY; }, root)));\n    if (coordinate[2]?.deref?.() ?? coordinate[2]) { addToCallChain(coordinate, Symbol.dispose, coordinate[2]?.deref?.() ?? coordinate[2]); }\n    return coordinate;\n}\n\n//\nexport const visibleBySelectorRef = (selector)=>{\n    const visRef = booleanRef(false), usub = handleByPointer((ev)=>{\n        const target = typeof document != \"undefined\" ? document.elementFromPoint(ev.clientX, ev.clientY) : null;\n        visRef.value = target?.matches?.(selector) ?? false;\n    });\n    if (usub) addToCallChain(visRef, Symbol.dispose, usub); return visRef;\n}\n\n//\nexport const showAttributeRef = (attribute = \"data-tooltip\")=>{\n    const valRef = stringRef(\"\"), usub = handleByPointer((ev)=>{\n        const target: any = typeof document != \"undefined\" ? document.elementFromPoint(ev.clientX, ev.clientY) : null;\n        valRef.value = target?.getAttribute?.(attribute)?.(`[${attribute}]`) ?? \"\";\n    });\n    if (usub) addToCallChain(valRef, Symbol.dispose, usub); return valRef;\n}\n","import { numberRef, observe } from \"fest/object\";\n\nexport class Vector2D {\n    private _x: ReturnType<typeof numberRef>;\n    private _y: ReturnType<typeof numberRef>;\n\n    constructor(x: number | ReturnType<typeof numberRef> = 0, y: number | ReturnType<typeof numberRef> = 0) {\n        this._x = typeof x === 'number' ? numberRef(x) : x;\n        this._y = typeof y === 'number' ? numberRef(y) : y;\n    }\n\n    get x() { return this._x; }\n    set x(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') {\n            this._x.value = value;\n        } else {\n            this._x = value;\n        }\n    }\n\n    get y() { return this._y; }\n    set y(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') {\n            this._y.value = value;\n        } else {\n            this._y = value;\n        }\n    }\n\n    // Array-like access for compatibility\n    get 0() { return this._x; }\n    get 1() { return this._y; }\n\n    // Convert to plain array for operations\n    toArray() {\n        return [this._x, this._y];\n    }\n\n    // Clone the vector\n    clone() {\n        return new Vector2D(this._x.value, this._y.value);\n    }\n\n    // Set values\n    set(x: number, y: number) {\n        this._x.value = x;\n        this._y.value = y;\n        return this;\n    }\n\n    // Copy from another vector\n    copy(v: Vector2D) {\n        this._x.value = v.x.value;\n        this._y.value = v.y.value;\n        return this;\n    }\n\n    // Vector operations\n    add(v: Vector2D): Vector2D {\n        return new Vector2D(this._x.value + v.x.value, this._y.value + v.y.value);\n    }\n\n    subtract(v: Vector2D): Vector2D {\n        return new Vector2D(this._x.value - v.x.value, this._y.value - v.y.value);\n    }\n\n    multiply(scalar: number): Vector2D {\n        return new Vector2D(this._x.value * scalar, this._y.value * scalar);\n    }\n\n    divide(scalar: number): Vector2D {\n        if (scalar === 0) throw new Error(\"Division by zero\");\n        return new Vector2D(this._x.value / scalar, this._y.value / scalar);\n    }\n\n    // Dot product\n    dot(v: Vector2D): number {\n        return this._x.value * v.x.value + this._y.value * v.y.value;\n    }\n\n    // Cross product (returns scalar in 2D)\n    cross(v: Vector2D): number {\n        return this._x.value * v.y.value - this._y.value * v.x.value;\n    }\n\n    // Magnitude (length)\n    magnitude(): number {\n        return Math.sqrt(this._x.value * this._x.value + this._y.value * this._y.value);\n    }\n\n    // Squared magnitude (faster than magnitude for comparisons)\n    magnitudeSquared(): number {\n        return this._x.value * this._x.value + this._y.value * this._y.value;\n    }\n\n    // Distance to another vector\n    distanceTo(v: Vector2D): number {\n        const dx = this._x.value - v.x.value;\n        const dy = this._y.value - v.y.value;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n\n    // Squared distance (faster for comparisons)\n    distanceToSquared(v: Vector2D): number {\n        const dx = this._x.value - v.x.value;\n        const dy = this._y.value - v.y.value;\n        return dx * dx + dy * dy;\n    }\n\n    // Normalize (make unit length)\n    normalize(): Vector2D {\n        const mag = this.magnitude();\n        if (mag === 0) return new Vector2D(0, 0);\n        return new Vector2D(this._x.value / mag, this._y.value / mag);\n    }\n\n    // Check if vectors are equal\n    equals(v: Vector2D, tolerance: number = 1e-6): boolean {\n        return Math.abs(this._x.value - v.x.value) < tolerance &&\n               Math.abs(this._y.value - v.y.value) < tolerance;\n    }\n\n    // Linear interpolation\n    lerp(v: Vector2D, t: number): Vector2D {\n        const clampedT = Math.max(0, Math.min(1, t));\n        return new Vector2D(\n            this._x.value + (v.x.value - this._x.value) * clampedT,\n            this._y.value + (v.y.value - this._y.value) * clampedT\n        );\n    }\n\n    // Angle with another vector (in radians)\n    angleTo(v: Vector2D): number {\n        const dot = this.dot(v);\n        const det = this.cross(v);\n        return Math.atan2(det, dot);\n    }\n\n    // Rotate vector by angle (in radians)\n    rotate(angle: number): Vector2D {\n        const cos = Math.cos(angle);\n        const sin = Math.sin(angle);\n        return new Vector2D(\n            this._x.value * cos - this._y.value * sin,\n            this._x.value * sin + this._y.value * cos\n        );\n    }\n\n    // Project onto another vector\n    projectOnto(v: Vector2D): Vector2D {\n        const scalar = this.dot(v) / v.magnitudeSquared();\n        return v.multiply(scalar);\n    }\n\n    // Reflect across a normal vector\n    reflect(normal: Vector2D): Vector2D {\n        const normalizedNormal = normal.normalize();\n        const dotProduct = this.dot(normalizedNormal);\n        return this.subtract(normalizedNormal.multiply(2 * dotProduct));\n    }\n\n    // Clamp vector components\n    clamp(min: Vector2D, max: Vector2D): Vector2D {\n        return new Vector2D(\n            Math.max(min.x.value, Math.min(max.x.value, this._x.value)),\n            Math.max(min.y.value, Math.min(max.y.value, this._y.value))\n        );\n    }\n\n    // Get the minimum component\n    min(): number {\n        return Math.min(this._x.value, this._y.value);\n    }\n\n    // Get the maximum component\n    max(): number {\n        return Math.max(this._x.value, this._y.value);\n    }\n\n    // Static utility methods\n    static zero(): Vector2D {\n        return new Vector2D(0, 0);\n    }\n\n    static one(): Vector2D {\n        return new Vector2D(1, 1);\n    }\n\n    static unitX(): Vector2D {\n        return new Vector2D(1, 0);\n    }\n\n    static unitY(): Vector2D {\n        return new Vector2D(0, 1);\n    }\n\n    // Create vector from angle (in radians)\n    static fromAngle(angle: number, length: number = 1): Vector2D {\n        return new Vector2D(\n            Math.cos(angle) * length,\n            Math.sin(angle) * length\n        );\n    }\n\n    // Create vector from polar coordinates\n    static fromPolar(angle: number, radius: number): Vector2D {\n        return Vector2D.fromAngle(angle, radius);\n    }\n}\n\nexport const vector2Ref = (x: number | ReturnType<typeof numberRef> = 0, y: number | ReturnType<typeof numberRef> = 0) => {\n    return new Vector2D(x, y);\n}\n\nexport class Matrix2D {\n    private _elements: ReturnType<typeof numberRef>[];\n\n    constructor(\n        a: number | ReturnType<typeof numberRef> = 1, b: number | ReturnType<typeof numberRef> = 0,\n        c: number | ReturnType<typeof numberRef> = 0, d: number | ReturnType<typeof numberRef> = 1\n    ) {\n        this._elements = [\n            typeof a === 'number' ? numberRef(a) : a,\n            typeof b === 'number' ? numberRef(b) : b,\n            typeof c === 'number' ? numberRef(c) : c,\n            typeof d === 'number' ? numberRef(d) : d\n        ];\n    }\n\n    get elements() { return this._elements; }\n\n    // Matrix elements access\n    get m00() { return this._elements[0]; }\n    get m01() { return this._elements[1]; }\n    get m10() { return this._elements[2]; }\n    get m11() { return this._elements[3]; }\n\n    set m00(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') this._elements[0].value = value;\n        else this._elements[0] = value;\n    }\n    set m01(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') this._elements[1].value = value;\n        else this._elements[1] = value;\n    }\n    set m10(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') this._elements[2].value = value;\n        else this._elements[2] = value;\n    }\n    set m11(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') this._elements[3].value = value;\n        else this._elements[3] = value;\n    }\n\n    // Array-like access for compatibility\n    get 0() { return this._elements[0]; }\n    get 1() { return this._elements[1]; }\n    get 2() { return this._elements[2]; }\n    get 3() { return this._elements[3]; }\n\n    // Convert to plain array for operations\n    toArray() {\n        return [...this._elements];\n    }\n\n    // Clone the matrix\n    clone() {\n        return new Matrix2D(\n            this._elements[0].value, this._elements[1].value,\n            this._elements[2].value, this._elements[3].value\n        );\n    }\n\n    // Set values\n    set(a: number, b: number, c: number, d: number) {\n        this._elements[0].value = a;\n        this._elements[1].value = b;\n        this._elements[2].value = c;\n        this._elements[3].value = d;\n        return this;\n    }\n\n    // Identity matrix\n    identity() {\n        return this.set(1, 0, 0, 1);\n    }\n\n    // Copy from another matrix\n    copy(m: Matrix2D) {\n        this._elements[0].value = m.elements[0].value;\n        this._elements[1].value = m.elements[1].value;\n        this._elements[2].value = m.elements[2].value;\n        this._elements[3].value = m.elements[3].value;\n        return this;\n    }\n\n    // Matrix operations\n    multiply(m: Matrix2D): Matrix2D {\n        const a = this._elements[0].value, b = this._elements[1].value;\n        const c = this._elements[2].value, d = this._elements[3].value;\n        const e = m.elements[0].value, f = m.elements[1].value;\n        const g = m.elements[2].value, h = m.elements[3].value;\n\n        return new Matrix2D(\n            a * e + b * g, a * f + b * h,\n            c * e + d * g, c * f + d * h\n        );\n    }\n\n    multiplyScalar(s: number): Matrix2D {\n        return new Matrix2D(\n            this._elements[0].value * s, this._elements[1].value * s,\n            this._elements[2].value * s, this._elements[3].value * s\n        );\n    }\n\n    // Transform a vector\n    transformVector(v: Vector2D): Vector2D {\n        const x = this._elements[0].value * v.x.value + this._elements[1].value * v.y.value;\n        const y = this._elements[2].value * v.x.value + this._elements[3].value * v.y.value;\n        return new Vector2D(x, y);\n    }\n\n    // Determinant\n    determinant(): number {\n        return this._elements[0].value * this._elements[3].value -\n               this._elements[1].value * this._elements[2].value;\n    }\n\n    // Inverse matrix\n    inverse(): Matrix2D | null {\n        const det = this.determinant();\n        if (det === 0) return null; // Not invertible\n\n        const invDet = 1 / det;\n        return new Matrix2D(\n            this._elements[3].value * invDet, -this._elements[1].value * invDet,\n            -this._elements[2].value * invDet, this._elements[0].value * invDet\n        );\n    }\n\n    // Transpose\n    transpose(): Matrix2D {\n        return new Matrix2D(\n            this._elements[0].value, this._elements[2].value,\n            this._elements[1].value, this._elements[3].value\n        );\n    }\n\n    // Check if matrices are equal\n    equals(m: Matrix2D, tolerance: number = 1e-6): boolean {\n        for (let i = 0; i < 4; i++) {\n            if (Math.abs(this._elements[i].value - m.elements[i].value) > tolerance) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    // Create rotation matrix\n    static rotation(angle: number): Matrix2D {\n        const cos = Math.cos(angle);\n        const sin = Math.sin(angle);\n        return new Matrix2D(cos, -sin, sin, cos);\n    }\n\n    // Create scale matrix\n    static scale(sx: number, sy: number = sx): Matrix2D {\n        return new Matrix2D(sx, 0, 0, sy);\n    }\n\n    // Create shear matrix\n    static shear(sx: number, sy: number): Matrix2D {\n        return new Matrix2D(1, sx, sy, 1);\n    }\n}\n\nexport const matrix2x2Ref = (\n    a: number | ReturnType<typeof numberRef> = 1, b: number | ReturnType<typeof numberRef> = 0,\n    c: number | ReturnType<typeof numberRef> = 0, d: number | ReturnType<typeof numberRef> = 1\n) => {\n    return new Matrix2D(a, b, c, d);\n}\n","\nimport { numberRef } from \"fest/object\";\n\nexport class Vector3D {\n    private _x: ReturnType<typeof numberRef>;\n    private _y: ReturnType<typeof numberRef>;\n    private _z: ReturnType<typeof numberRef>;\n\n    constructor(x: number | ReturnType<typeof numberRef> = 0, y: number | ReturnType<typeof numberRef> = 0, z: number | ReturnType<typeof numberRef> = 0) {\n        this._x = typeof x === 'number' ? numberRef(x) : x;\n        this._y = typeof y === 'number' ? numberRef(y) : y;\n        this._z = typeof z === 'number' ? numberRef(z) : z;\n    }\n\n    get x() { return this._x; }\n    set x(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') {\n            this._x.value = value;\n        } else {\n            this._x = value;\n        }\n    }\n\n    get y() { return this._y; }\n    set y(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') {\n            this._y.value = value;\n        } else {\n            this._y = value;\n        }\n    }\n\n    get z() { return this._z; }\n    set z(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') {\n            this._z.value = value;\n        } else {\n            this._z = value;\n        }\n    }\n\n    // Array-like access for compatibility\n    get 0() { return this._x; }\n    get 1() { return this._y; }\n    get 2() { return this._z; }\n\n    // Convert to plain array for operations\n    toArray() {\n        return [this._x, this._y, this._z];\n    }\n\n    // Clone the vector\n    clone() {\n        return new Vector3D(this._x.value, this._y.value, this._z.value);\n    }\n\n    // Set values\n    set(x: number, y: number, z: number) {\n        this._x.value = x;\n        this._y.value = y;\n        this._z.value = z;\n        return this;\n    }\n\n    // Copy from another vector\n    copy(v: Vector3D) {\n        this._x.value = v.x.value;\n        this._y.value = v.y.value;\n        this._z.value = v.z.value;\n        return this;\n    }\n}\n\nexport const vector3Ref = (x: number | ReturnType<typeof numberRef> = 0, y: number | ReturnType<typeof numberRef> = 0, z: number | ReturnType<typeof numberRef> = 0) => {\n    return new Vector3D(x, y, z);\n}\n\nexport class Matrix3D {\n    private _elements: ReturnType<typeof numberRef>[];\n\n    constructor(\n        a: number | ReturnType<typeof numberRef> = 1, b: number | ReturnType<typeof numberRef> = 0, c: number | ReturnType<typeof numberRef> = 0,\n        d: number | ReturnType<typeof numberRef> = 0, e: number | ReturnType<typeof numberRef> = 1, f: number | ReturnType<typeof numberRef> = 0,\n        g: number | ReturnType<typeof numberRef> = 0, h: number | ReturnType<typeof numberRef> = 0, i: number | ReturnType<typeof numberRef> = 1\n    ) {\n        this._elements = [\n            typeof a === 'number' ? numberRef(a) : a,\n            typeof b === 'number' ? numberRef(b) : b,\n            typeof c === 'number' ? numberRef(c) : c,\n            typeof d === 'number' ? numberRef(d) : d,\n            typeof e === 'number' ? numberRef(e) : e,\n            typeof f === 'number' ? numberRef(f) : f,\n            typeof g === 'number' ? numberRef(g) : g,\n            typeof h === 'number' ? numberRef(h) : h,\n            typeof i === 'number' ? numberRef(i) : i\n        ];\n    }\n\n    get elements() { return this._elements; }\n\n    // Matrix elements access\n    get m00() { return this._elements[0]; } get m01() { return this._elements[1]; } get m02() { return this._elements[2]; }\n    get m10() { return this._elements[3]; } get m11() { return this._elements[4]; } get m12() { return this._elements[5]; }\n    get m20() { return this._elements[6]; } get m21() { return this._elements[7]; } get m22() { return this._elements[8]; }\n\n    set m00(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[0].value = value; else this._elements[0] = value; }\n    set m01(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[1].value = value; else this._elements[1] = value; }\n    set m02(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[2].value = value; else this._elements[2] = value; }\n    set m10(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[3].value = value; else this._elements[3] = value; }\n    set m11(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[4].value = value; else this._elements[4] = value; }\n    set m12(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[5].value = value; else this._elements[5] = value; }\n    set m20(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[6].value = value; else this._elements[6] = value; }\n    set m21(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[7].value = value; else this._elements[7] = value; }\n    set m22(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[8].value = value; else this._elements[8] = value; }\n\n    // Array-like access for compatibility\n    get 0() { return this._elements[0]; } get 1() { return this._elements[1]; } get 2() { return this._elements[2]; }\n    get 3() { return this._elements[3]; } get 4() { return this._elements[4]; } get 5() { return this._elements[5]; }\n    get 6() { return this._elements[6]; } get 7() { return this._elements[7]; } get 8() { return this._elements[8]; }\n\n    // Convert to plain array for operations\n    toArray() {\n        return [...this._elements];\n    }\n\n    // Clone the matrix\n    clone() {\n        return new Matrix3D(\n            this._elements[0].value, this._elements[1].value, this._elements[2].value,\n            this._elements[3].value, this._elements[4].value, this._elements[5].value,\n            this._elements[6].value, this._elements[7].value, this._elements[8].value\n        );\n    }\n\n    // Set values\n    set(a: number, b: number, c: number, d: number, e: number, f: number, g: number, h: number, i: number) {\n        this._elements[0].value = a; this._elements[1].value = b; this._elements[2].value = c;\n        this._elements[3].value = d; this._elements[4].value = e; this._elements[5].value = f;\n        this._elements[6].value = g; this._elements[7].value = h; this._elements[8].value = i;\n        return this;\n    }\n\n    // Identity matrix\n    identity() {\n        return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1);\n    }\n\n    // Copy from another matrix\n    copy(m: Matrix3D) {\n        for (let i = 0; i < 9; i++) {\n            this._elements[i].value = m.elements[i].value;\n        }\n        return this;\n    }\n}\n\nexport const matrix3x3Ref = (\n    a: number | ReturnType<typeof numberRef> = 1, b: number | ReturnType<typeof numberRef> = 0, c: number | ReturnType<typeof numberRef> = 0,\n    d: number | ReturnType<typeof numberRef> = 0, e: number | ReturnType<typeof numberRef> = 1, f: number | ReturnType<typeof numberRef> = 0,\n    g: number | ReturnType<typeof numberRef> = 0, h: number | ReturnType<typeof numberRef> = 0, i: number | ReturnType<typeof numberRef> = 1\n) => {\n    return new Matrix3D(a, b, c, d, e, f, g, h, i);\n}","\nimport { numberRef } from \"fest/object\";\n\nexport class Vector4D {\n    private _x: ReturnType<typeof numberRef>;\n    private _y: ReturnType<typeof numberRef>;\n    private _z: ReturnType<typeof numberRef>;\n    private _w: ReturnType<typeof numberRef>;\n\n    constructor(x: number | ReturnType<typeof numberRef> = 0, y: number | ReturnType<typeof numberRef> = 0, z: number | ReturnType<typeof numberRef> = 0, w: number | ReturnType<typeof numberRef> = 1) {\n        this._x = typeof x === 'number' ? numberRef(x) : x;\n        this._y = typeof y === 'number' ? numberRef(y) : y;\n        this._z = typeof z === 'number' ? numberRef(z) : z;\n        this._w = typeof w === 'number' ? numberRef(w) : w;\n    }\n\n    get x() { return this._x; }\n    set x(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') {\n            this._x.value = value;\n        } else {\n            this._x = value;\n        }\n    }\n\n    get y() { return this._y; }\n    set y(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') {\n            this._y.value = value;\n        } else {\n            this._y = value;\n        }\n    }\n\n    get z() { return this._z; }\n    set z(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') {\n            this._z.value = value;\n        } else {\n            this._z = value;\n        }\n    }\n\n    get w() { return this._w; }\n    set w(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') {\n            this._w.value = value;\n        } else {\n            this._w = value;\n        }\n    }\n\n    // Array-like access for compatibility\n    get 0() { return this._x; }\n    get 1() { return this._y; }\n    get 2() { return this._z; }\n    get 3() { return this._w; }\n\n    // Convert to plain array for operations\n    toArray() {\n        return [this._x, this._y, this._z, this._w];\n    }\n\n    // Clone the vector\n    clone() {\n        return new Vector4D(this._x.value, this._y.value, this._z.value, this._w.value);\n    }\n\n    // Set values\n    set(x: number, y: number, z: number, w: number = 1) {\n        this._x.value = x;\n        this._y.value = y;\n        this._z.value = z;\n        this._w.value = w;\n        return this;\n    }\n\n    // Copy from another vector\n    copy(v: Vector4D) {\n        this._x.value = v.x.value;\n        this._y.value = v.y.value;\n        this._z.value = v.z.value;\n        this._w.value = v.w.value;\n        return this;\n    }\n}\n\nexport const vector4Ref = (x: number | ReturnType<typeof numberRef> = 0, y: number | ReturnType<typeof numberRef> = 0, z: number | ReturnType<typeof numberRef> = 0, w: number | ReturnType<typeof numberRef> = 1) => {\n    return new Vector4D(x, y, z, w);\n}\n\nexport class Matrix4D {\n    private _elements: ReturnType<typeof numberRef>[];\n\n    constructor(\n        a: number | ReturnType<typeof numberRef> = 1, b: number | ReturnType<typeof numberRef> = 0, c: number | ReturnType<typeof numberRef> = 0, d: number | ReturnType<typeof numberRef> = 0,\n        e: number | ReturnType<typeof numberRef> = 0, f: number | ReturnType<typeof numberRef> = 1, g: number | ReturnType<typeof numberRef> = 0, h: number | ReturnType<typeof numberRef> = 0,\n        i: number | ReturnType<typeof numberRef> = 0, j: number | ReturnType<typeof numberRef> = 0, k: number | ReturnType<typeof numberRef> = 1, l: number | ReturnType<typeof numberRef> = 0,\n        m: number | ReturnType<typeof numberRef> = 0, n: number | ReturnType<typeof numberRef> = 0, o: number | ReturnType<typeof numberRef> = 0, p: number | ReturnType<typeof numberRef> = 1\n    ) {\n        this._elements = [\n            typeof a === 'number' ? numberRef(a) : a, typeof b === 'number' ? numberRef(b) : b, typeof c === 'number' ? numberRef(c) : c, typeof d === 'number' ? numberRef(d) : d,\n            typeof e === 'number' ? numberRef(e) : e, typeof f === 'number' ? numberRef(f) : f, typeof g === 'number' ? numberRef(g) : g, typeof h === 'number' ? numberRef(h) : h,\n            typeof i === 'number' ? numberRef(i) : i, typeof j === 'number' ? numberRef(j) : j, typeof k === 'number' ? numberRef(k) : k, typeof l === 'number' ? numberRef(l) : l,\n            typeof m === 'number' ? numberRef(m) : m, typeof n === 'number' ? numberRef(n) : n, typeof o === 'number' ? numberRef(o) : o, typeof p === 'number' ? numberRef(p) : p\n        ];\n    }\n\n    get elements() { return this._elements; }\n\n    // Matrix elements access\n    get m00() { return this._elements[0]; }  get m01() { return this._elements[1]; }  get m02() { return this._elements[2]; }  get m03() { return this._elements[3]; }\n    get m10() { return this._elements[4]; }  get m11() { return this._elements[5]; }  get m12() { return this._elements[6]; }  get m13() { return this._elements[7]; }\n    get m20() { return this._elements[8]; }  get m21() { return this._elements[9]; }  get m22() { return this._elements[10]; } get m23() { return this._elements[11]; }\n    get m30() { return this._elements[12]; } get m31() { return this._elements[13]; } get m32() { return this._elements[14]; } get m33() { return this._elements[15]; }\n\n    set m00(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[0].value = value; else this._elements[0] = value; }\n    set m01(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[1].value = value; else this._elements[1] = value; }\n    set m02(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[2].value = value; else this._elements[2] = value; }\n    set m03(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[3].value = value; else this._elements[3] = value; }\n    set m10(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[4].value = value; else this._elements[4] = value; }\n    set m11(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[5].value = value; else this._elements[5] = value; }\n    set m12(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[6].value = value; else this._elements[6] = value; }\n    set m13(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[7].value = value; else this._elements[7] = value; }\n    set m20(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[8].value = value; else this._elements[8] = value; }\n    set m21(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[9].value = value; else this._elements[9] = value; }\n    set m22(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[10].value = value; else this._elements[10] = value; }\n    set m23(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[11].value = value; else this._elements[11] = value; }\n    set m30(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[12].value = value; else this._elements[12] = value; }\n    set m31(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[13].value = value; else this._elements[13] = value; }\n    set m32(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[14].value = value; else this._elements[14] = value; }\n    set m33(value: number | ReturnType<typeof numberRef>) { if (typeof value === 'number') this._elements[15].value = value; else this._elements[15] = value; }\n\n    // Array-like access for compatibility\n    get 0() { return this._elements[0]; }  get 1() { return this._elements[1]; }  get 2() { return this._elements[2]; }  get 3() { return this._elements[3]; }\n    get 4() { return this._elements[4]; }  get 5() { return this._elements[5]; }  get 6() { return this._elements[6]; }  get 7() { return this._elements[7]; }\n    get 8() { return this._elements[8]; }  get 9() { return this._elements[9]; }  get 10() { return this._elements[10]; } get 11() { return this._elements[11]; }\n    get 12() { return this._elements[12]; } get 13() { return this._elements[13]; } get 14() { return this._elements[14]; } get 15() { return this._elements[15]; }\n\n    // Convert to plain array for operations\n    toArray() {\n        return [...this._elements];\n    }\n\n    // Clone the matrix\n    clone() {\n        return new Matrix4D(\n            this._elements[0].value, this._elements[1].value, this._elements[2].value, this._elements[3].value,\n            this._elements[4].value, this._elements[5].value, this._elements[6].value, this._elements[7].value,\n            this._elements[8].value, this._elements[9].value, this._elements[10].value, this._elements[11].value,\n            this._elements[12].value, this._elements[13].value, this._elements[14].value, this._elements[15].value\n        );\n    }\n\n    // Set values\n    set(a: number, b: number, c: number, d: number, e: number, f: number, g: number, h: number, i: number, j: number, k: number, l: number, m: number, n: number, o: number, p: number) {\n        this._elements[0].value = a; this._elements[1].value = b; this._elements[2].value = c; this._elements[3].value = d;\n        this._elements[4].value = e; this._elements[5].value = f; this._elements[6].value = g; this._elements[7].value = h;\n        this._elements[8].value = i; this._elements[9].value = j; this._elements[10].value = k; this._elements[11].value = l;\n        this._elements[12].value = m; this._elements[13].value = n; this._elements[14].value = o; this._elements[15].value = p;\n        return this;\n    }\n\n    // Identity matrix\n    identity() {\n        return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    }\n\n    // Copy from another matrix\n    copy(m: Matrix4D) {\n        for (let i = 0; i < 16; i++) {\n            this._elements[i].value = m.elements[i].value;\n        }\n        return this;\n    }\n}\n\nexport const matrix4x4Ref = (\n    a: number | ReturnType<typeof numberRef> = 1, b: number | ReturnType<typeof numberRef> = 0, c: number | ReturnType<typeof numberRef> = 0, d: number | ReturnType<typeof numberRef> = 0,\n    e: number | ReturnType<typeof numberRef> = 0, f: number | ReturnType<typeof numberRef> = 1, g: number | ReturnType<typeof numberRef> = 0, h: number | ReturnType<typeof numberRef> = 0,\n    i: number | ReturnType<typeof numberRef> = 0, j: number | ReturnType<typeof numberRef> = 0, k: number | ReturnType<typeof numberRef> = 1, l: number | ReturnType<typeof numberRef> = 0,\n    m: number | ReturnType<typeof numberRef> = 0, n: number | ReturnType<typeof numberRef> = 0, o: number | ReturnType<typeof numberRef> = 0, p: number | ReturnType<typeof numberRef> = 1\n) => {\n    return new Matrix4D(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p);\n}\n","import { numberRef, computed, affected } from \"fest/object\";\nimport { Vector2D, vector2Ref } from \"./Point2D\";\nimport { Vector3D } from \"./Point3D\";\nimport { Vector4D } from \"./Point4D\";\n\n// Utility functions for component integration\nexport const vectorFromArray = (arr: ReturnType<typeof numberRef>[]): Vector2D | Vector3D | Vector4D => {\n    switch (arr.length) {\n        case 2: return new Vector2D(arr[0], arr[1]);\n        case 3: return new Vector3D(arr[0], arr[1], arr[2]);\n        case 4: return new Vector4D(arr[0], arr[1], arr[2], arr[3]);\n        default: throw new Error(`Unsupported vector dimension: ${arr.length}`);\n    }\n};\n\nexport const vectorToArray = (vec: Vector2D | Vector3D | Vector4D): ReturnType<typeof numberRef>[] => {\n    if (vec instanceof Vector2D) return [vec.x, vec.y];\n    if (vec instanceof Vector3D) return [vec.x, vec.y, vec.z];\n    if (vec instanceof Vector4D) return [vec.x, vec.y, vec.z, vec.w];\n    throw new Error(\"Unsupported vector type\");\n};\n\n// Transform utilities for layout components\nexport const translate2D = (vec: Vector2D, tx: ReturnType<typeof numberRef>, ty: ReturnType<typeof numberRef>) => {\n    return addVector2D(vec, new Vector2D(tx, ty));\n};\n\nexport const scale2D = (vec: Vector2D, sx: ReturnType<typeof numberRef>, sy: ReturnType<typeof numberRef> = sx) => {\n    return new Vector2D(\n        operated([vec.x, sx], () => vec.x.value * sx.value),\n        operated([vec.y, sy], () => vec.y.value * sy.value)\n    );\n};\n\nexport const rotate2D = (vec: Vector2D, angle: ReturnType<typeof numberRef>) => {\n    const cos = operated([angle], () => Math.cos(angle.value));\n    const sin = operated([angle], () => Math.sin(angle.value));\n    return new Vector2D(\n        operated([vec.x, vec.y, cos, sin], () => vec.x.value * cos.value - vec.y.value * sin.value),\n        operated([vec.x, vec.y, cos, sin], () => vec.x.value * sin.value + vec.y.value * cos.value)\n    );\n};\n\n// Rectangle/Bounding box operations\nexport interface Rect2D {\n    position: Vector2D; // x, y\n    size: Vector2D;     // width, height\n}\n\nexport const createRect2D = (x: number | ReturnType<typeof numberRef> = 0,\n                            y: number | ReturnType<typeof numberRef> = 0,\n                            width: number | ReturnType<typeof numberRef> = 0,\n                            height: number | ReturnType<typeof numberRef> = 0): Rect2D => ({\n    position: vector2Ref(x, y),\n    size: vector2Ref(width, height)\n});\n\n// Rectangle center point (reactive)\nexport const rectCenter = (rect: Rect2D): Vector2D => {\n    return addVector2D(rect.position, multiplyVector2D(rect.size, numberRef(0.5)));\n};\n\n// Point containment in rectangle (reactive)\nexport const rectContainsPoint = (rect: Rect2D, point: Vector2D): ReturnType<typeof numberRef> => {\n    return operated([rect.position.x, rect.position.y, rect.size.x, rect.size.y, point.x, point.y], () => {\n        const inX = point.x.value >= rect.position.x.value && point.x.value <= rect.position.x.value + rect.size.x.value;\n        const inY = point.y.value >= rect.position.y.value && point.y.value <= rect.position.y.value + rect.size.y.value;\n        return inX && inY;\n    });\n};\n\n// Rectangle intersection (reactive)\nexport const rectIntersects = (rectA: Rect2D, rectB: Rect2D): ReturnType<typeof numberRef> => {\n    return operated([\n        rectA.position.x, rectA.position.y, rectA.size.x, rectA.size.y,\n        rectB.position.x, rectB.position.y, rectB.size.x, rectB.size.y\n    ], () => {\n        const aRight = rectA.position.x.value + rectA.size.x.value;\n        const aBottom = rectA.position.y.value + rectA.size.y.value;\n        const bRight = rectB.position.x.value + rectB.size.x.value;\n        const bBottom = rectB.position.y.value + rectB.size.y.value;\n\n        return !(rectA.position.x.value > bRight ||\n                 aRight < rectB.position.x.value ||\n                 rectA.position.y.value > bBottom ||\n                 aBottom < rectB.position.y.value);\n    });\n};\n\n// Rectangle union (reactive)\nexport const rectUnion = (rectA: Rect2D, rectB: Rect2D): Rect2D => {\n    const minX = operated([rectA.position.x, rectB.position.x], () => Math.min(rectA.position.x.value, rectB.position.x.value));\n    const minY = operated([rectA.position.y, rectB.position.y], () => Math.min(rectA.position.y.value, rectB.position.y.value));\n    const maxX = operated([rectA.position.x, rectA.size.x, rectB.position.x, rectB.size.x], () =>\n        Math.max(rectA.position.x.value + rectA.size.x.value, rectB.position.x.value + rectB.size.x.value));\n    const maxY = operated([rectA.position.y, rectA.size.y, rectB.position.y, rectB.size.y], () =>\n        Math.max(rectA.position.y.value + rectA.size.y.value, rectB.position.y.value + rectB.size.y.value));\n\n    return {\n        position: new Vector2D(minX, minY),\n        size: new Vector2D(\n            operated([maxX, minX], () => maxX.value - minX.value),\n            operated([maxY, minY], () => maxY.value - minY.value)\n        )\n    };\n};\n\n// Clamp point to rectangle bounds (reactive)\nexport const clampPointToRect = (point: Vector2D, rect: Rect2D): Vector2D => {\n    return new Vector2D(\n        operated([point.x, rect.position.x, rect.size.x], () =>\n            Math.max(rect.position.x.value, Math.min(point.x.value, rect.position.x.value + rect.size.x.value))),\n        operated([point.y, rect.position.y, rect.size.y], () =>\n            Math.max(rect.position.y.value, Math.min(point.y.value, rect.position.y.value + rect.size.y.value)))\n    );\n};\n\n// Distance from point to rectangle edge (reactive)\nexport const pointToRectDistance = (point: Vector2D, rect: Rect2D): ReturnType<typeof numberRef> => {\n    const clamped = clampPointToRect(point, rect);\n    return magnitude2D(subtractVector2D(point, clamped));\n};\n\n// Rectangle area (reactive)\nexport const rectArea = (rect: Rect2D): ReturnType<typeof numberRef> => {\n    return operated([rect.size.x, rect.size.y], () => rect.size.x.value * rect.size.y.value);\n};\n\n// Scale rectangle around center (reactive)\nexport const scaleRectAroundCenter = (rect: Rect2D, scale: ReturnType<typeof numberRef>): Rect2D => {\n    const center = rectCenter(rect);\n    const newSize = multiplyVector2D(rect.size, scale);\n    const newPosition = subtractVector2D(center, multiplyVector2D(newSize, numberRef(0.5)));\n\n    return {\n        position: newPosition,\n        size: newSize\n    };\n};\n\n// Transform rectangle with matrix (reactive)\nexport const transformRect2D = (rect: Rect2D, transform: (point: Vector2D) => Vector2D): Rect2D => {\n    // Transform all four corners and create bounding box\n    const corners = [\n        rect.position, // top-left\n        addVector2D(rect.position, new Vector2D(rect.size.x, numberRef(0))), // top-right\n        addVector2D(rect.position, rect.size), // bottom-right\n        addVector2D(rect.position, new Vector2D(numberRef(0), rect.size.y))  // bottom-left\n    ];\n\n    const transformedCorners = corners.map(transform);\n    return rectUnion(\n        { position: transformedCorners[0], size: vector2Ref(0, 0) },\n        { position: transformedCorners[1], size: vector2Ref(0, 0) }\n    );\n};\n\n// Relative positioning within container\nexport const relativePosition = (child: Vector2D, parent: Rect2D): Vector2D => {\n    return new Vector2D(\n        operated([child.x, parent.position.x], () => child.x.value - parent.position.x.value),\n        operated([child.y, parent.position.y], () => child.y.value - parent.position.y.value)\n    );\n};\n\n// Convert relative position to absolute\nexport const absolutePosition = (relative: Vector2D, parent: Rect2D): Vector2D => {\n    return addVector2D(relative, parent.position);\n};\n\n// Aspect ratio constraint for rectangles\nexport const constrainRectAspectRatio = (rect: Rect2D, aspectRatio: ReturnType<typeof numberRef>, mode: 'fit' | 'fill' = 'fit'): Rect2D => {\n    return operated([rect.size.x, rect.size.y, aspectRatio], () => {\n        const currentRatio = rect.size.x.value / rect.size.y.value;\n        const targetRatio = aspectRatio.value;\n\n        let newWidth = rect.size.x.value;\n        let newHeight = rect.size.y.value;\n\n        if (mode === 'fit') {\n            if (currentRatio > targetRatio) {\n                // Too wide, constrain height\n                newHeight = newWidth / targetRatio;\n            } else {\n                // Too tall, constrain width\n                newWidth = newHeight * targetRatio;\n            }\n        } else { // fill\n            if (currentRatio > targetRatio) {\n                // Too wide, constrain width\n                newWidth = newHeight * targetRatio;\n            } else {\n                // Too tall, constrain height\n                newHeight = newWidth / targetRatio;\n            }\n        }\n\n        return {\n            position: rect.position,\n            size: vector2Ref(newWidth, newHeight)\n        };\n    });\n};\n\n// ============================================================================\n// Enhanced Input and UI Control Operations\n// ============================================================================\n\n// Smooth value interpolation for UI controls\nexport const smoothValueTransition = (\n    current: ReturnType<typeof numberRef>,\n    target: ReturnType<typeof numberRef>,\n    smoothing: ReturnType<typeof numberRef> = numberRef(0.1)\n): ReturnType<typeof numberRef> => {\n    return operated([current, target, smoothing], () => {\n        const diff = target.value - current.value;\n        return current.value + diff * smoothing.value;\n    });\n};\n\n// Calculate thumb position for slider/range controls\nexport const sliderThumbPosition = (\n    value: ReturnType<typeof numberRef>,\n    min: ReturnType<typeof numberRef>,\n    max: ReturnType<typeof numberRef>,\n    trackSize: ReturnType<typeof numberRef>\n): ReturnType<typeof numberRef> => {\n    return operated([value, min, max, trackSize], () => {\n        const normalizedValue = (value.value - min.value) / (max.value - min.value);\n        return normalizedValue * trackSize.value;\n    });\n};\n\n// Calculate scrollbar thumb size and position\nexport const scrollbarMetrics = (\n    contentSize: ReturnType<typeof numberRef>,\n    containerSize: ReturnType<typeof numberRef>,\n    scrollPosition: ReturnType<typeof numberRef>\n) => {\n    const thumbSize = operated([contentSize, containerSize], () => {\n        const ratio = containerSize.value / contentSize.value;\n        return Math.max(20, ratio * containerSize.value); // Minimum 20px\n    });\n\n    const thumbPosition = operated([scrollPosition, contentSize, containerSize, thumbSize], () => {\n        const maxScroll = contentSize.value - containerSize.value;\n        const scrollRatio = maxScroll > 0 ? scrollPosition.value / maxScroll : 0;\n        return scrollRatio * (containerSize.value - thumbSize.value);\n    });\n\n    return { thumbSize, thumbPosition };\n};\n\n// Convert screen coordinates to normalized control values\nexport const screenToControlValue = (\n    screenPos: ReturnType<typeof numberRef>,\n    controlRect: Rect2D,\n    axis: 'x' | 'y' = 'x'\n): ReturnType<typeof numberRef> => {\n    const controlStart = axis === 'x' ? controlRect.position.x : controlRect.position.y;\n    const controlSize = axis === 'x' ? controlRect.size.x : controlRect.size.y;\n\n    return operated([screenPos, controlStart, controlSize], () => {\n        const relativePos = screenPos.value - controlStart.value;\n        return Math.max(0, Math.min(1, relativePos / controlSize.value));\n    });\n};\n\n// Enhanced easing functions for UI animations\nexport const easeInOutCubic = (t: ReturnType<typeof numberRef>): ReturnType<typeof numberRef> => {\n    return operated([t], () => {\n        const x = t.value;\n        return x < 0.5 ? 4 * x * x * x : 1 - Math.pow(-2 * x + 2, 3) / 2;\n    });\n};\n\nexport const easeOutBounce = (t: ReturnType<typeof numberRef>): ReturnType<typeof numberRef> => {\n    return operated([t], () => {\n        let x = t.value;\n        const n1 = 7.5625;\n        const d1 = 2.75;\n\n        if (x < 1 / d1) {\n            return n1 * x * x;\n        } else if (x < 2 / d1) {\n            x -= 1.5 / d1;\n            return n1 * x * x + 0.75;\n        } else if (x < 2.5 / d1) {\n            x -= 2.25 / d1;\n            return n1 * x * x + 0.9375;\n        } else {\n            x -= 2.625 / d1;\n            return n1 * x * x + 0.984375;\n        }\n    });\n};\n\n// Momentum-based scrolling calculations\nexport const momentumScroll = (\n    velocity: ReturnType<typeof numberRef>,\n    deceleration: ReturnType<typeof numberRef> = numberRef(0.95),\n    minVelocity: ReturnType<typeof numberRef> = numberRef(0.01)\n): ReturnType<typeof numberRef> => {\n    return operated([velocity, deceleration, minVelocity], () => {\n        const newVelocity = velocity.value * deceleration.value;\n        return Math.abs(newVelocity) < minVelocity.value ? 0 : newVelocity;\n    });\n};\n\n// Calculate scroll bounds with bounce effects\nexport const scrollBoundsWithBounce = (\n    scrollPosition: ReturnType<typeof numberRef>,\n    contentSize: ReturnType<typeof numberRef>,\n    containerSize: ReturnType<typeof numberRef>,\n    bounceDistance: ReturnType<typeof numberRef> = numberRef(50)\n): ReturnType<typeof numberRef> => {\n    return operated([scrollPosition, contentSize, containerSize, bounceDistance], () => {\n        const maxScroll = contentSize.value - containerSize.value;\n\n        if (scrollPosition.value < 0) {\n            // Bouncing at start\n            const bounce = Math.min(bounceDistance.value, Math.abs(scrollPosition.value));\n            return -bounce * 0.3; // Reduce bounce effect\n        } else if (scrollPosition.value > maxScroll) {\n            // Bouncing at end\n            const overScroll = scrollPosition.value - maxScroll;\n            const bounce = Math.min(bounceDistance.value, overScroll);\n            return maxScroll + bounce * 0.3;\n        }\n\n        return scrollPosition.value;\n    });\n};\n\n//\nconst flattenRefs = (input: any): ReturnType<typeof numberRef>[] => {\n    const refs: ReturnType<typeof numberRef>[] = [];\n\n    const traverse = (item: any) => {\n        if (item && typeof item === 'object' && 'value' in item) {\n            // It's a reactive reference\n            refs.push(item);\n        } else if (Array.isArray(item)) {\n            // It's an array, traverse each element\n            item.forEach(traverse);\n        } else if (item && typeof item === 'object') {\n            // It's an object, traverse its properties\n            Object.values(item).forEach(traverse);\n        }\n    };\n\n    traverse(input);\n    return refs;\n};\n\n//\nexport const operated = (args: any[], fn: (...values: any[]) => any) => {\n    // Get initial values for the function\n    const getCurrentValues = () => args.map(arg => {\n        if (arg && typeof arg === 'object' && 'value' in arg) {\n            return arg.value;\n        }\n        return arg;\n    });\n\n    const initialResult = fn(...getCurrentValues());\n\n    // If the result is a number, return a reactive number reference\n    if (typeof initialResult === 'number') {\n        const result = numberRef(initialResult);\n\n        const updateResult = () => {\n            result.value = fn(...getCurrentValues());\n        };\n\n        // Flatten all reactive references from the arguments\n        const allRefs = flattenRefs(args);\n\n        // Subscribe to each reactive reference to update the result\n        allRefs.forEach(ref => affected(ref, updateResult));\n\n        return result;\n    }\n\n    // For non-number results (vectors, matrices, etc.), return the computed result\n    // The caller is responsible for ensuring the result has the right reactive structure\n    let currentResult = initialResult;\n\n    const updateResult = () => {\n        currentResult = fn(...getCurrentValues());\n    };\n\n    // Flatten all reactive references from the arguments\n    const allRefs = flattenRefs(args);\n\n    // Subscribe to each reactive reference to update the result\n    allRefs.forEach(ref => affected(ref, updateResult));\n\n    return currentResult;\n}\n\n\n\n\n// Scalar operations (1D)\nexport const addRef = (a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>) => {\n    return operated([a, b], () => a.value + b.value);\n}\n\nexport const subtractRef = (a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>) => {\n    return operated([a, b], () => a.value - b.value);\n}\n\nexport const multiplyRef = (a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>) => {\n    return operated([a, b], () => a.value * b.value);\n}\n\nexport const divideRef = (a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>) => {\n    return operated([a, b], () => a.value / b.value);\n}\n\nexport const modulusRef = (a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>) => {\n    return operated([a, b], () => a.value % b.value);\n}\n\nexport const powerRef = (a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>) => {\n    return operated([a, b], () => Math.pow(a.value, b.value));\n}\n\n// Trigonometric functions\nexport const sinRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.sin(a.value));\n}\n\nexport const cosRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.cos(a.value));\n}\n\nexport const tanRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.tan(a.value));\n}\n\nexport const asinRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.asin(a.value));\n}\n\nexport const acosRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.acos(a.value));\n}\n\nexport const atanRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.atan(a.value));\n}\n\nexport const atan2Ref = (a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>) => {\n    return operated([a, b], () => Math.atan2(a.value, b.value));\n}\n\nexport const hypotRef = (a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>) => {\n    return operated([a, b], () => Math.hypot(a.value, b.value));\n}\n\n// Other math functions\nexport const squareRootRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.sqrt(a.value));\n}\n\nexport const cubeRootRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.cbrt(a.value));\n}\n\nexport const absoluteRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.abs(a.value));\n}\n\nexport const signRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.sign(a.value));\n}\n\nexport const clampRef = (a: ReturnType<typeof numberRef>, min: ReturnType<typeof numberRef>, max: ReturnType<typeof numberRef>) => {\n    return operated([a, min, max], () => Math.min(Math.max(a.value, min.value), max.value));\n}\n\n// Vector operations (2D)\nexport const addVector2D = (a: Vector2D, b: Vector2D) => {\n    return new Vector2D(\n        operated([a.x, b.x], () => a.x.value + b.x.value),\n        operated([a.y, b.y], () => a.y.value + b.y.value)\n    );\n}\n\nexport const subtractVector2D = (a: Vector2D, b: Vector2D) => {\n    return new Vector2D(\n        operated([a.x, b.x], () => a.x.value - b.x.value),\n        operated([a.y, b.y], () => a.y.value - b.y.value)\n    );\n}\n\nexport const multiplyVector2D = (a: Vector2D, scalar: ReturnType<typeof numberRef>) => {\n    return new Vector2D(\n        operated([a.x, scalar], () => a.x.value * scalar.value),\n        operated([a.y, scalar], () => a.y.value * scalar.value)\n    );\n}\n\nexport const divideVector2D = (a: Vector2D, scalar: ReturnType<typeof numberRef>) => {\n    return new Vector2D(\n        operated([a.x, scalar], () => a.x.value / scalar.value),\n        operated([a.y, scalar], () => a.y.value / scalar.value)\n    );\n}\n\nexport const dotProduct2D = (a: Vector2D, b: Vector2D) => {\n    return operated([a.x, a.y, b.x, b.y], () => a.x.value * b.x.value + a.y.value * b.y.value);\n}\n\nexport const magnitude2D = (a: Vector2D) => {\n    return operated([a.x, a.y], () => Math.sqrt(a.x.value * a.x.value + a.y.value * a.y.value));\n}\n\nexport const normalize2D = (a: Vector2D) => {\n    const mag = magnitude2D(a);\n    return new Vector2D(\n        operated([a.x, mag], () => a.x.value / mag.value),\n        operated([a.y, mag], () => a.y.value / mag.value)\n    );\n}\n\n// Vector operations (3D)\nexport const addVector3D = (a: Vector3D, b: Vector3D) => {\n    return new Vector3D(\n        operated([a.x, b.x], () => a.x.value + b.x.value),\n        operated([a.y, b.y], () => a.y.value + b.y.value),\n        operated([a.z, b.z], () => a.z.value + b.z.value)\n    );\n}\n\nexport const subtractVector3D = (a: Vector3D, b: Vector3D) => {\n    return new Vector3D(\n        operated([a.x, b.x], () => a.x.value - b.x.value),\n        operated([a.y, b.y], () => a.y.value - b.y.value),\n        operated([a.z, b.z], () => a.z.value - b.z.value)\n    );\n}\n\nexport const multiplyVector3D = (a: Vector3D, scalar: ReturnType<typeof numberRef>) => {\n    return new Vector3D(\n        operated([a.x, scalar], () => a.x.value * scalar.value),\n        operated([a.y, scalar], () => a.y.value * scalar.value),\n        operated([a.z, scalar], () => a.z.value * scalar.value)\n    );\n}\n\nexport const divideVector3D = (a: Vector3D, scalar: ReturnType<typeof numberRef>) => {\n    return new Vector3D(\n        operated([a.x, scalar], () => a.x.value / scalar.value),\n        operated([a.y, scalar], () => a.y.value / scalar.value),\n        operated([a.z, scalar], () => a.z.value / scalar.value)\n    );\n}\n\nexport const dotProduct3D = (a: Vector3D, b: Vector3D) => {\n    return operated([a.x, a.y, a.z, b.x, b.y, b.z], () =>\n        a.x.value * b.x.value + a.y.value * b.y.value + a.z.value * b.z.value\n    );\n}\n\nexport const crossProduct3D = (a: Vector3D, b: Vector3D) => {\n    return new Vector3D(\n        operated([a.y, a.z, b.y, b.z], () => a.y.value * b.z.value - a.z.value * b.y.value),\n        operated([a.z, a.x, b.z, b.x], () => a.z.value * b.x.value - a.x.value * b.z.value),\n        operated([a.x, a.y, b.x, b.y], () => a.x.value * b.y.value - a.y.value * b.x.value)\n    );\n}\n\nexport const magnitude3D = (a: Vector3D) => {\n    return operated([a.x, a.y, a.z], () =>\n        Math.sqrt(a.x.value * a.x.value + a.y.value * a.y.value + a.z.value * a.z.value)\n    );\n}\n\nexport const normalize3D = (a: Vector3D) => {\n    const mag = magnitude3D(a);\n    return new Vector3D(\n        operated([a.x, mag], () => a.x.value / mag.value),\n        operated([a.y, mag], () => a.y.value / mag.value),\n        operated([a.z, mag], () => a.z.value / mag.value)\n    );\n}\n\n// Vector operations (4D)\nexport const addVector4D = (a: Vector4D, b: Vector4D) => {\n    return new Vector4D(\n        operated([a.x, b.x], () => a.x.value + b.x.value),\n        operated([a.y, b.y], () => a.y.value + b.y.value),\n        operated([a.z, b.z], () => a.z.value + b.z.value),\n        operated([a.w, b.w], () => a.w.value + b.w.value)\n    );\n}\n\nexport const subtractVector4D = (a: Vector4D, b: Vector4D) => {\n    return new Vector4D(\n        operated([a.x, b.x], () => a.x.value - b.x.value),\n        operated([a.y, b.y], () => a.y.value - b.y.value),\n        operated([a.z, b.z], () => a.z.value - b.z.value),\n        operated([a.w, b.w], () => a.w.value - b.w.value)\n    );\n}\n\nexport const multiplyVector4D = (a: Vector4D, scalar: ReturnType<typeof numberRef>) => {\n    return new Vector4D(\n        operated([a.x, scalar], () => a.x.value * scalar.value),\n        operated([a.y, scalar], () => a.y.value * scalar.value),\n        operated([a.z, scalar], () => a.z.value * scalar.value),\n        operated([a.w, scalar], () => a.w.value * scalar.value)\n    );\n}\n\nexport const divideVector4D = (a: Vector4D, scalar: ReturnType<typeof numberRef>) => {\n    return new Vector4D(\n        operated([a.x, scalar], () => a.x.value / scalar.value),\n        operated([a.y, scalar], () => a.y.value / scalar.value),\n        operated([a.z, scalar], () => a.z.value / scalar.value),\n        operated([a.w, scalar], () => a.w.value / scalar.value)\n    );\n}\n\nexport const dotProduct4D = (a: Vector4D, b: Vector4D) => {\n    return operated([a.x, a.y, a.z, a.w, b.x, b.y, b.z, b.w], () =>\n        a.x.value * b.x.value + a.y.value * b.y.value + a.z.value * b.z.value + a.w.value * b.w.value\n    );\n}\n\nexport const magnitude4D = (a: Vector4D) => {\n    return operated([a.x, a.y, a.z, a.w], () =>\n        Math.sqrt(a.x.value * a.x.value + a.y.value * a.y.value + a.z.value * a.z.value + a.w.value * a.w.value)\n    );\n}\n\nexport const normalize4D = (a: Vector4D) => {\n    const mag = magnitude4D(a);\n    return new Vector4D(\n        operated([a.x, mag], () => a.x.value / mag.value),\n        operated([a.y, mag], () => a.y.value / mag.value),\n        operated([a.z, mag], () => a.z.value / mag.value),\n        operated([a.w, mag], () => a.w.value / mag.value)\n    );\n}\n","import { numberRef } from \"fest/object\";\nimport { operated, vector2Ref, Vector2D, addVector2D, Rect2D, createRect2D, } from \"./index\";\n\n// Grid-specific mathematical types and operations\n\n/**\n * Grid coordinate system with row/column addressing\n */\nexport interface GridCoord {\n    row: ReturnType<typeof numberRef>;\n    col: ReturnType<typeof numberRef>;\n}\n\n/**\n * Grid cell definition with position and span\n */\nexport interface GridCell extends GridCoord {\n    rowSpan: ReturnType<typeof numberRef>;\n    colSpan: ReturnType<typeof numberRef>;\n}\n\n/**\n * Grid layout configuration\n */\nexport interface GridConfig {\n    rows: ReturnType<typeof numberRef>;\n    cols: ReturnType<typeof numberRef>;\n    cellWidth: ReturnType<typeof numberRef>;\n    cellHeight: ReturnType<typeof numberRef>;\n    gap: ReturnType<typeof numberRef>; // Gap between cells\n    padding: Vector2D; // Grid padding\n}\n\n/**\n * Grid coordinate utilities\n */\nexport class GridCoordUtils {\n    // Create reactive grid coordinate\n    static create(row: number = 0, col: number = 0): GridCoord {\n        return {\n            row: numberRef(row),\n            col: numberRef(col)\n        };\n    }\n\n    // Convert grid coordinates to pixel position\n    static toPixel(coord: GridCoord, config: GridConfig): Vector2D {\n        return operated([\n            coord.row, coord.col,\n            config.cellWidth, config.cellHeight,\n            config.gap, config.padding.x, config.padding.y\n        ], () => {\n            const x = config.padding.x.value +\n                     coord.col.value * (config.cellWidth.value + config.gap.value);\n            const y = config.padding.y.value +\n                     coord.row.value * (config.cellHeight.value + config.gap.value);\n            return vector2Ref(x, y);\n        });\n    }\n\n    // Convert pixel position to grid coordinates\n    static fromPixel(pixel: Vector2D, config: GridConfig): GridCoord {\n        const coord = operated([\n            pixel.x, pixel.y,\n            config.cellWidth, config.cellHeight,\n            config.gap, config.padding.x, config.padding.y\n        ], () => {\n            const col = Math.floor(\n                (pixel.x.value - config.padding.x.value) /\n                (config.cellWidth.value + config.gap.value)\n            );\n            const row = Math.floor(\n                (pixel.y.value - config.padding.y.value) /\n                (config.cellHeight.value + config.gap.value)\n            );\n            return GridCoordUtils.create(row, col);\n        });\n\n        return {\n            row: operated([coord], () => (coord.value as any).row.value),\n            col: operated([coord], () => (coord.value as any).col.value)\n        };\n    }\n\n    // Snap pixel position to nearest grid intersection\n    static snapToGrid(pixel: Vector2D, config: GridConfig): Vector2D {\n        const gridCoord = this.fromPixel(pixel, config);\n        return this.toPixel(gridCoord, config);\n    }\n\n    // Snap pixel position to nearest grid cell center\n    static snapToCellCenter(pixel: Vector2D, config: GridConfig): Vector2D {\n        const gridCoord = this.fromPixel(pixel, config);\n        const cellTopLeft = this.toPixel(gridCoord, config);\n\n        return operated([\n            cellTopLeft.x, cellTopLeft.y,\n            config.cellWidth, config.cellHeight\n        ], () => {\n            const centerX = cellTopLeft.x.value + config.cellWidth.value / 2;\n            const centerY = cellTopLeft.y.value + config.cellHeight.value / 2;\n            return vector2Ref(centerX, centerY);\n        });\n    }\n\n    // Get adjacent coordinates\n    static adjacent(coord: GridCoord, direction: 'up' | 'down' | 'left' | 'right'): GridCoord {\n        const deltas = {\n            up: { row: -1, col: 0 },\n            down: { row: 1, col: 0 },\n            left: { row: 0, col: -1 },\n            right: { row: 0, col: 1 }\n        };\n\n        const delta = deltas[direction];\n        return {\n            row: operated([coord.row], () => coord.row.value + delta.row),\n            col: operated([coord.col], () => coord.col.value + delta.col)\n        };\n    }\n\n    // Check if coordinate is within grid bounds\n    static isValid(coord: GridCoord, config: GridConfig): ReturnType<typeof numberRef> {\n        return operated([coord.row, coord.col, config.rows, config.cols], () =>\n            coord.row.value >= 0 && coord.row.value < config.rows.value &&\n            coord.col.value >= 0 && coord.col.value < config.cols.value\n        );\n    }\n\n    // Manhattan distance between grid coordinates\n    static manhattanDistance(a: GridCoord, b: GridCoord): ReturnType<typeof numberRef> {\n        return operated([a.row, a.col, b.row, b.col], () =>\n            Math.abs(a.row.value - b.row.value) + Math.abs(a.col.value - b.col.value)\n        );\n    }\n\n    // Euclidean distance between grid coordinates\n    static euclideanDistance(a: GridCoord, b: GridCoord): ReturnType<typeof numberRef> {\n        return operated([a.row, a.col, b.row, b.col], () =>\n            Math.sqrt(\n                Math.pow(a.row.value - b.row.value, 2) +\n                Math.pow(a.col.value - b.col.value, 2)\n            )\n        );\n    }\n}\n\n/**\n * Grid cell utilities with span support\n */\nexport class GridCellUtils {\n    // Create reactive grid cell\n    static create(row: number = 0, col: number = 0, rowSpan: number = 1, colSpan: number = 1): GridCell {\n        return {\n            row: numberRef(row),\n            col: numberRef(col),\n            rowSpan: numberRef(rowSpan),\n            colSpan: numberRef(colSpan)\n        };\n    }\n\n    // Convert grid cell to pixel rectangle\n    static toRect(cell: GridCell, config: GridConfig): Rect2D {\n        const topLeft = GridCoordUtils.toPixel(cell, config);\n\n        // Calculate width and height considering spans\n        const width = operated([\n            cell.colSpan, config.cellWidth, config.gap\n        ], () =>\n            cell.colSpan.value * config.cellWidth.value +\n            (cell.colSpan.value - 1) * config.gap.value\n        );\n\n        const height = operated([\n            cell.rowSpan, config.cellHeight, config.gap\n        ], () =>\n            cell.rowSpan.value * config.cellHeight.value +\n            (cell.rowSpan.value - 1) * config.gap.value\n        );\n\n        return createRect2D(topLeft.x, topLeft.y, width, height);\n    }\n\n    // Get cell center point\n    static getCenter(cell: GridCell, config: GridConfig): Vector2D {\n        const rect = this.toRect(cell, config);\n        return operated([rect.position.x, rect.position.y, rect.size.x, rect.size.y], () =>\n            vector2Ref(\n                rect.position.x.value + rect.size.x.value / 2,\n                rect.position.y.value + rect.size.y.value / 2\n            )\n        );\n    }\n\n    // Check if cells overlap (considering spans)\n    static overlaps(a: GridCell, b: GridCell): ReturnType<typeof numberRef> {\n        return operated([\n            a.row, a.col, a.rowSpan, a.colSpan,\n            b.row, b.col, b.rowSpan, b.colSpan\n        ], () => {\n            const aRight = a.col.value + a.colSpan.value;\n            const aBottom = a.row.value + a.rowSpan.value;\n            const bRight = b.col.value + b.colSpan.value;\n            const bBottom = b.row.value + b.rowSpan.value;\n\n            return !(a.col.value >= bRight || aRight <= b.col.value ||\n                    a.row.value >= bBottom || aBottom <= b.row.value);\n        });\n    }\n\n    // Get cells that a spanning cell occupies\n    static getOccupiedCells(cell: GridCell): GridCoord[] {\n        const cells: GridCoord[] = [];\n\n        for (let r = 0; r < cell.rowSpan.value; r++) {\n            for (let c = 0; c < cell.colSpan.value; c++) {\n                cells.push(GridCoordUtils.create(\n                    cell.row.value + r,\n                    cell.col.value + c\n                ));\n            }\n        }\n\n        return cells;\n    }\n}\n\n/**\n * Grid layout algorithms\n */\nexport class GridLayoutUtils {\n    // Fit cells into grid without overlap (basic bin packing)\n    static fitCells(cells: GridCell[], config: GridConfig): GridCell[] {\n        const placed: GridCell[] = [];\n        const occupied = new Set<string>();\n\n        cells.forEach(cell => {\n            let placedCell = { ...cell };\n\n            // Try to find a valid position\n            for (let row = 0; row < config.rows.value; row++) {\n                for (let col = 0; col < config.cols.value; col++) {\n                    placedCell.row = numberRef(row);\n                    placedCell.col = numberRef(col);\n\n                    // Check if this position fits\n                    if (this.canPlaceCell(placedCell, occupied, config)) {\n                        this.markOccupied(placedCell, occupied);\n                        placed.push(placedCell);\n                        return;\n                    }\n                }\n            }\n\n            // If no position found, place at origin (will overlap)\n            placed.push(placedCell);\n        });\n\n        return placed;\n    }\n\n    // Check if a cell can be placed at its current position\n    static canPlaceCell(cell: GridCell, occupied: Set<string>, config: GridConfig): boolean {\n        // Check bounds\n        if (!GridCoordUtils.isValid(cell, config).value) return false;\n\n        // Check if any occupied cells conflict\n        const occupiedCells = GridCellUtils.getOccupiedCells(cell);\n        return !occupiedCells.some(coord =>\n            occupied.has(`${coord.row.value},${coord.col.value}`)\n        );\n    }\n\n    // Mark cells as occupied\n    static markOccupied(cell: GridCell, occupied: Set<string>): void {\n        const occupiedCells = GridCellUtils.getOccupiedCells(cell);\n        occupiedCells.forEach(coord => {\n            occupied.add(`${coord.row.value},${coord.col.value}`);\n        });\n    }\n\n    // Calculate optimal grid size for given cells\n    static calculateOptimalSize(cells: GridCell[]): { rows: number, cols: number } {\n        let maxRow = 0, maxCol = 0;\n\n        cells.forEach(cell => {\n            maxRow = Math.max(maxRow, cell.row.value + cell.rowSpan.value);\n            maxCol = Math.max(maxCol, cell.col.value + cell.colSpan.value);\n        });\n\n        return { rows: maxRow, cols: maxCol };\n    }\n\n    // Redistribute cells using different algorithms\n    static redistributeCells(\n        cells: GridCell[],\n        config: GridConfig,\n        algorithm: 'row-major' | 'column-major' | 'diagonal' = 'row-major'\n    ): GridCell[] {\n        const redistributed: GridCell[] = [];\n        let currentRow = 0, currentCol = 0;\n\n        cells.forEach((cell, index) => {\n            switch (algorithm) {\n                case 'row-major':\n                    if (currentCol + cell.colSpan.value > config.cols.value) {\n                        currentRow++;\n                        currentCol = 0;\n                    }\n                    cell.row = numberRef(currentRow);\n                    cell.col = numberRef(currentCol);\n                    currentCol += cell.colSpan.value;\n                    break;\n\n                case 'column-major':\n                    if (currentRow + cell.rowSpan.value > config.rows.value) {\n                        currentCol++;\n                        currentRow = 0;\n                    }\n                    cell.row = numberRef(currentRow);\n                    cell.col = numberRef(currentCol);\n                    currentRow += cell.rowSpan.value;\n                    break;\n\n                case 'diagonal':\n                    const diagonal = Math.floor(index / Math.sqrt(cells.length));\n                    cell.row = numberRef(diagonal);\n                    cell.col = numberRef(index % Math.ceil(Math.sqrt(cells.length)));\n                    break;\n            }\n\n            redistributed.push(cell);\n        });\n\n        return redistributed;\n    }\n}\n\n/**\n * Grid animation and transition utilities\n */\nexport class GridAnimationUtils {\n    // Animate cell movement along grid\n    static animateCellMovement(\n        cell: GridCell,\n        targetCoord: GridCoord,\n        config: GridConfig,\n        duration: number = 300\n    ): Promise<void> {\n        return new Promise(resolve => {\n            const startRow = cell.row.value;\n            const startCol = cell.col.value;\n            const endRow = targetCoord.row.value;\n            const endCol = targetCoord.col.value;\n\n            const startTime = performance.now();\n\n            const animate = (currentTime: number) => {\n                const elapsed = currentTime - startTime;\n                const progress = Math.min(elapsed / duration, 1);\n\n                // Easing function (ease-out cubic)\n                const eased = 1 - Math.pow(1 - progress, 3);\n\n                cell.row.value = startRow + (endRow - startRow) * eased;\n                cell.col.value = startCol + (endCol - startCol) * eased;\n\n                if (progress < 1) {\n                    requestAnimationFrame(animate);\n                } else {\n                    resolve();\n                }\n            };\n\n            requestAnimationFrame(animate);\n        });\n    }\n\n    // Animate cell resizing\n    static animateCellResize(\n        cell: GridCell,\n        targetRowSpan: number,\n        targetColSpan: number,\n        duration: number = 300\n    ): Promise<void> {\n        return new Promise(resolve => {\n            const startRowSpan = cell.rowSpan.value;\n            const startColSpan = cell.colSpan.value;\n\n            const startTime = performance.now();\n\n            const animate = (currentTime: number) => {\n                const elapsed = currentTime - startTime;\n                const progress = Math.min(elapsed / duration, 1);\n\n                const eased = 1 - Math.pow(1 - progress, 3);\n\n                cell.rowSpan.value = startRowSpan + (targetRowSpan - startRowSpan) * eased;\n                cell.colSpan.value = startColSpan + (targetColSpan - startColSpan) * eased;\n\n                if (progress < 1) {\n                    requestAnimationFrame(animate);\n                } else {\n                    resolve();\n                }\n            };\n\n            requestAnimationFrame(animate);\n        });\n    }\n\n    // Chain animations for complex transitions\n    static createAnimationChain(cell: GridCell, config: GridConfig) {\n        return {\n            moveTo: (targetCoord: GridCoord, duration?: number) =>\n                GridAnimationUtils.animateCellMovement(cell, targetCoord, config, duration),\n\n            resizeTo: (rowSpan: number, colSpan: number, duration?: number) =>\n                GridAnimationUtils.animateCellResize(cell, rowSpan, colSpan, duration),\n\n            then: function(callback: () => void) {\n                return this;\n            }\n        };\n    }\n}\n\n/**\n * Grid collision and interaction utilities\n */\nexport class GridInteractionUtils {\n    // Find cell at pixel position\n    static getCellAtPixel(pixel: Vector2D, config: GridConfig): GridCoord {\n        return GridCoordUtils.fromPixel(pixel, config);\n    }\n\n    // Get all cells in a pixel rectangle\n    static getCellsInRect(rect: Rect2D, config: GridConfig): GridCoord[] {\n        const cells: GridCoord[] = [];\n\n        // Convert rect corners to grid coordinates\n        const topLeft = GridCoordUtils.fromPixel(rect.position, config);\n        const bottomRight = GridCoordUtils.fromPixel(\n            addVector2D(rect.position, rect.size),\n            config\n        );\n\n        for (let row = topLeft.row.value; row <= bottomRight.row.value; row++) {\n            for (let col = topLeft.col.value; col <= bottomRight.col.value; col++) {\n                if (row >= 0 && row < config.rows.value &&\n                    col >= 0 && col < config.cols.value) {\n                    cells.push(GridCoordUtils.create(row, col));\n                }\n            }\n        }\n\n        return cells;\n    }\n\n    // Check if dragging a cell to a new position would cause overlaps\n    static wouldOverlap(cell: GridCell, newCoord: GridCoord, existingCells: GridCell[]): boolean {\n        const testCell = GridCellUtils.create(\n            newCoord.row.value,\n            newCoord.col.value,\n            cell.rowSpan.value,\n            cell.colSpan.value\n        );\n\n        return existingCells.some(otherCell =>\n            otherCell !== cell && GridCellUtils.overlaps(testCell, otherCell).value\n        );\n    }\n\n    // Find valid drop positions for a cell\n    static findValidPositions(cell: GridCell, config: GridConfig, existingCells: GridCell[]): GridCoord[] {\n        const validPositions: GridCoord[] = [];\n\n        for (let row = 0; row < config.rows.value - cell.rowSpan.value + 1; row++) {\n            for (let col = 0; col < config.cols.value - cell.colSpan.value + 1; col++) {\n                const testCoord = GridCoordUtils.create(row, col);\n                if (!this.wouldOverlap(cell, testCoord, existingCells)) {\n                    validPositions.push(testCoord);\n                }\n            }\n        }\n\n        return validPositions;\n    }\n\n    // Calculate drag preview position (snapped to valid positions)\n    static calculateDragPreview(cell: GridCell, dragPosition: Vector2D, config: GridConfig, existingCells: GridCell[]): GridCoord {\n        const snappedCoord = GridCoordUtils.fromPixel(dragPosition, config);\n\n        // Clamp to valid range\n        const clampedRow = Math.max(0, Math.min(\n            snappedCoord.row.value,\n            config.rows.value - cell.rowSpan.value\n        ));\n        const clampedCol = Math.max(0, Math.min(\n            snappedCoord.col.value,\n            config.cols.value - cell.colSpan.value\n        ));\n\n        const clampedCoord = GridCoordUtils.create(clampedRow, clampedCol);\n\n        // If position would overlap, find nearest valid position\n        if (this.wouldOverlap(cell, clampedCoord, existingCells)) {\n            const validPositions = this.findValidPositions(cell, config, existingCells);\n            if (validPositions.length > 0) {\n                // Find closest valid position\n                let closest = validPositions[0];\n                let minDistance = GridCoordUtils.euclideanDistance(clampedCoord, closest).value;\n\n                validPositions.forEach(pos => {\n                    const distance = GridCoordUtils.euclideanDistance(clampedCoord, pos).value;\n                    if (distance < minDistance) {\n                        minDistance = distance;\n                        closest = pos;\n                    }\n                });\n\n                return closest;\n            }\n        }\n\n        return clampedCoord;\n    }\n}\n\n/*\n// Export all grid math utilities\nexport {\n    GridCoordUtils,\n    GridCellUtils,\n    GridLayoutUtils,\n    GridAnimationUtils,\n    GridInteractionUtils\n};\n*/\n\n\n// ============================================================================\n// Enhanced Grid Cell Utilities using GridMath\n// ============================================================================\n// These functions leverage the comprehensive GridMath library to provide:\n// - Reactive grid coordinate management\n// - Proper bounds checking and validation\n// - Grid-aware snapping and rounding\n// - Pathfinding and collision detection\n// - Layout optimization algorithms\n//\n// All functions maintain backward compatibility with existing [x, y] array format\n// while adding powerful new GridMath capabilities.\n//\n// Key GridMath integrations:\n// - GridCoordUtils: Coordinate conversion, validation, distance calculations\n// - GridCellUtils: Cell spanning, collision detection, geometry\n// - GridLayoutUtils: Auto-arrangement, optimization algorithms\n// - GridInteractionUtils: Drag preview, position validation\n// ============================================================================\n\n// Enhanced cell utilities using GridMath (keeping backward compatibility)\nexport const clampCell = (cellPos: Vector2D | [number, number], layout: [number, number]): Vector2D => {\n    // Extract coordinates from input (handles both Vector2D and array formats)\n    let x: number, y: number;\n\n    if (cellPos instanceof Vector2D) {\n        x = cellPos.x?.value ?? 0;\n        y = cellPos.y?.value ?? 0;\n    } else if (Array.isArray(cellPos) && cellPos.length >= 2) {\n        x = cellPos[0] ?? 0;\n        y = cellPos[1] ?? 0;\n    } else {\n        // Invalid input, return origin\n        return vector2Ref(0, 0);\n    }\n\n    // Handle NaN/infinite values\n    if (!isFinite(x) || !isFinite(y)) {\n        return vector2Ref(0, 0);\n    }\n\n    // Validate layout\n    const cols = Math.max(1, layout[0] || 1);\n    const rows = Math.max(1, layout[1] || 1);\n\n    // Clamp coordinates to valid grid bounds\n    const clampedX = Math.max(0, Math.min(Math.floor(x), cols - 1));\n    const clampedY = Math.max(0, Math.min(Math.floor(y), rows - 1));\n\n    return vector2Ref(clampedX, clampedY);\n};\n\n// Enhanced grid-aware cell rounding using GridMath\nexport const floorCell = (cellPos: Vector2D | [number, number], N = 1): Vector2D => {\n    const x = cellPos instanceof Vector2D ? cellPos.x.value : cellPos[0];\n    const y = cellPos instanceof Vector2D ? cellPos.y.value : cellPos[1];\n\n    // Use grid-aware flooring - snap to nearest N-cell boundary\n    const flooredCol = Math.floor(x / N) * N;\n    const flooredRow = Math.floor(y / N) * N;\n\n    return vector2Ref(flooredCol, flooredRow);\n};\n\nexport const ceilCell = (cellPos: Vector2D | [number, number], N = 1): Vector2D => {\n    const x = cellPos instanceof Vector2D ? cellPos.x.value : cellPos[0];\n    const y = cellPos instanceof Vector2D ? cellPos.y.value : cellPos[1];\n\n    // Use grid-aware ceiling - snap to next N-cell boundary\n    const ceiledCol = Math.ceil(x / N) * N;\n    const ceiledRow = Math.ceil(y / N) * N;\n\n    return vector2Ref(ceiledCol, ceiledRow);\n};\n\nexport const roundCell = (cellPos: Vector2D | [number, number], N = 1): Vector2D => {\n    const x = cellPos instanceof Vector2D ? cellPos.x.value : cellPos[0];\n    const y = cellPos instanceof Vector2D ? cellPos.y.value : cellPos[1];\n\n    // Use grid-aware rounding - snap to nearest N-cell boundary\n    const roundedCol = Math.round(x / N) * N;\n    const roundedRow = Math.round(y / N) * N;\n\n    return vector2Ref(roundedCol, roundedRow);\n};\n\n// Additional grid-aware utility functions using GridMath\nexport const snapToGridCell = (cellPos: Vector2D | [number, number], layout: [number, number]): Vector2D => {\n    // Convert to grid coordinate, then snap to valid grid position\n    const coord = cellPos instanceof Vector2D\n        ? GridCoordUtils.create(cellPos.y.value, cellPos.x.value)\n        : GridCoordUtils.create(cellPos[1], cellPos[0]);\n\n    const config: GridConfig = {\n        rows: numberRef(layout[1]),\n        cols: numberRef(layout[0]),\n        cellWidth: numberRef(1),\n        cellHeight: numberRef(1),\n        gap: numberRef(0),\n        padding: vector2Ref(0, 0)\n    };\n\n    // Find nearest valid grid intersection\n    const validCoord = GridCoordUtils.create(\n        Math.max(0, Math.min(coord.row.value, config.rows.value - 1)),\n        Math.max(0, Math.min(coord.col.value, config.cols.value - 1))\n    );\n\n    return vector2Ref(validCoord.col.value, validCoord.row.value);\n};\n\nexport const getCellDistance = (cellA: Vector2D | [number, number], cellB: Vector2D | [number, number]): number => {\n    // Calculate Manhattan distance between grid cells\n    const coordA = cellA instanceof Vector2D\n        ? GridCoordUtils.create(cellA.y.value, cellA.x.value)\n        : GridCoordUtils.create(cellA[1], cellA[0]);\n\n    const coordB = cellB instanceof Vector2D\n        ? GridCoordUtils.create(cellB.y.value, cellB.x.value)\n        : GridCoordUtils.create(cellB[1], cellB[0]);\n\n    return GridCoordUtils.manhattanDistance(coordA, coordB).value;\n};\n\nexport const getAdjacentCells = (cellPos: Vector2D | [number, number], layout: [number, number]): Vector2D[] => {\n    // Get all adjacent cells (4-way or 8-way adjacency)\n    const centerCoord = cellPos instanceof Vector2D\n        ? GridCoordUtils.create(cellPos.y.value, cellPos.x.value)\n        : GridCoordUtils.create(cellPos[1], cellPos[0]);\n\n    const config: GridConfig = {\n        rows: numberRef(layout[1]),\n        cols: numberRef(layout[0]),\n        cellWidth: numberRef(1),\n        cellHeight: numberRef(1),\n        gap: numberRef(0),\n        padding: vector2Ref(0, 0)\n    };\n\n    const adjacent: Vector2D[] = [];\n    const directions: ('up' | 'down' | 'left' | 'right')[] =\n        ['up', 'down', 'left', 'right'];\n\n    for (const direction of directions) {\n        const adjacentCoord = GridCoordUtils.adjacent(centerCoord, direction);\n        if (GridCoordUtils.isValid(adjacentCoord, config).value) {\n            adjacent.push(vector2Ref(adjacentCoord.col.value, adjacentCoord.row.value));\n        }\n    }\n\n    return adjacent;\n};\n\n// Advanced grid utility functions using GridMath\nexport const getCellsInRange = (centerCell: Vector2D | [number, number], radius: number, layout: [number, number]): Vector2D[] => {\n    // Get all cells within Manhattan distance radius\n    const centerCoord = centerCell instanceof Vector2D\n        ? GridCoordUtils.create(centerCell.y.value, centerCell.x.value)\n        : GridCoordUtils.create(centerCell[1], centerCell[0]);\n\n    const config: GridConfig = {\n        rows: numberRef(layout[1]),\n        cols: numberRef(layout[0]),\n        cellWidth: numberRef(1),\n        cellHeight: numberRef(1),\n        gap: numberRef(0),\n        padding: vector2Ref(0, 0)\n    };\n\n    const cellsInRange: Vector2D[] = [];\n\n    for (let row = Math.max(0, centerCoord.row.value - radius);\n         row <= Math.min(layout[1] - 1, centerCoord.row.value + radius);\n         row++) {\n        for (let col = Math.max(0, centerCoord.col.value - radius);\n             col <= Math.min(layout[0] - 1, centerCoord.col.value + radius);\n             col++) {\n\n            const testCoord = GridCoordUtils.create(row, col);\n            const distance = GridCoordUtils.manhattanDistance(centerCoord, testCoord).value;\n\n            if (distance <= radius) {\n                cellsInRange.push(vector2Ref(col, row));\n            }\n        }\n    }\n\n    return cellsInRange;\n};\n\nexport const findPathBetweenCells = (\n    startCell: Vector2D | [number, number],\n    endCell: Vector2D | [number, number],\n    layout: [number, number],\n    obstacles: (Vector2D | [number, number])[] = []\n): Vector2D[] => {\n    // Simple A* pathfinding between grid cells\n    const startCoord = startCell instanceof Vector2D\n        ? GridCoordUtils.create(startCell.y.value, startCell.x.value)\n        : GridCoordUtils.create(startCell[1], startCell[0]);\n\n    const endCoord = endCell instanceof Vector2D\n        ? GridCoordUtils.create(endCell.y.value, endCell.x.value)\n        : GridCoordUtils.create(endCell[1], endCell[0]);\n\n    // Convert obstacles to coordinate set for fast lookup\n    const obstacleSet = new Set(\n        obstacles.map(obs => {\n            const coord = obs instanceof Vector2D\n                ? GridCoordUtils.create(obs.y.value, obs.x.value)\n                : GridCoordUtils.create(obs[1], obs[0]);\n            return `${coord.row.value},${coord.col.value}`;\n        })\n    );\n\n    const config: GridConfig = {\n        rows: numberRef(layout[1]),\n        cols: numberRef(layout[0]),\n        cellWidth: numberRef(1),\n        cellHeight: numberRef(1),\n        gap: numberRef(0),\n        padding: vector2Ref(0, 0)\n    };\n\n    // A* implementation (simplified)\n    const openSet = new Map<string, { coord: GridCoord, f: number, g: number, parent: GridCoord | null }>();\n    const closedSet = new Set<string>();\n\n    const startKey = `${startCoord.row.value},${startCoord.col.value}`;\n    openSet.set(startKey, {\n        coord: startCoord,\n        f: GridCoordUtils.manhattanDistance(startCoord, endCoord).value,\n        g: 0,\n        parent: null\n    });\n\n    while (openSet.size > 0) {\n        // Find node with lowest f score\n        let currentKey = '';\n        let lowestF = Infinity;\n\n        for (const [key, node] of openSet) {\n            if (node.f < lowestF) {\n                lowestF = node.f;\n                currentKey = key;\n            }\n        }\n\n        const current = openSet.get(currentKey)!;\n        openSet.delete(currentKey);\n        closedSet.add(currentKey);\n\n        // Check if we reached the end\n        if (current.coord.row.value === endCoord.row.value &&\n            current.coord.col.value === endCoord.col.value) {\n            // Reconstruct path\n            const path: Vector2D[] = [];\n            let node: typeof current | null = current;\n\n            while (node) {\n                path.unshift(vector2Ref(node.coord.col.value, node.coord.row.value));\n                if (!node.parent) break;\n\n                const parentKey = `${node.parent.row.value},${node.parent.col.value}`;\n                node = openSet.get(parentKey) || null;\n            }\n\n            return path;\n        }\n\n        // Check adjacent cells\n        const directions: (keyof typeof GridCoordUtils.adjacent extends (coord: any, direction: infer D) => any ? D : never)[] =\n            ['up', 'down', 'left', 'right'];\n\n        for (const direction of directions) {\n            const neighborCoord = GridCoordUtils.adjacent(current.coord, direction as 'up' | 'down' | 'left' | 'right');\n            const neighborKey = `${neighborCoord.row.value},${neighborCoord.col.value}`;\n\n            if (!GridCoordUtils.isValid(neighborCoord, config).value ||\n                closedSet.has(neighborKey) ||\n                obstacleSet.has(neighborKey)) {\n                continue;\n            }\n\n            const gScore = current.g + 1; // Movement cost of 1\n            const hScore = GridCoordUtils.manhattanDistance(neighborCoord, endCoord).value;\n            const fScore = gScore + hScore;\n\n            const existing = openSet.get(neighborKey);\n            if (!existing || gScore < existing.g) {\n                openSet.set(neighborKey, {\n                    coord: neighborCoord,\n                    f: fScore,\n                    g: gScore,\n                    parent: current.coord\n                });\n            }\n        }\n    }\n\n    // No path found\n    return [];\n};\n\nexport const checkCellCollision = (\n    cellA: Vector2D | [number, number],\n    cellB: Vector2D | [number, number],\n    cellSizeA: [number, number] = [1, 1],\n    cellSizeB: [number, number] = [1, 1]\n): boolean => {\n    // Check if two cells with spans collide\n    const coordA = cellA instanceof Vector2D\n        ? GridCoordUtils.create(cellA.y.value, cellA.x.value)\n        : GridCoordUtils.create(cellA[1], cellA[0]);\n\n    const coordB = cellB instanceof Vector2D\n        ? GridCoordUtils.create(cellB.y.value, cellB.x.value)\n        : GridCoordUtils.create(cellB[1], cellB[0]);\n\n    // Create grid cells with spans\n    const gridCellA = GridCellUtils.create(\n        coordA.row.value, coordA.col.value,\n        cellSizeA[1], cellSizeA[0]  // Note: [width, height] -> [colSpan, rowSpan]\n    );\n\n    const gridCellB = GridCellUtils.create(\n        coordB.row.value, coordB.col.value,\n        cellSizeB[1], cellSizeB[0]\n    );\n\n    return GridCellUtils.overlaps(gridCellA, gridCellB).value;\n};\n\nexport const optimizeCellLayout = (\n    cells: Array<{ pos: Vector2D | [number, number], size: [number, number] }>,\n    layout: [number, number]\n): Array<{ pos: Vector2D, size: [number, number] }> => {\n    // Use GridMath layout algorithms to optimize cell positioning\n    const config: GridConfig = {\n        rows: numberRef(layout[1]),\n        cols: numberRef(layout[0]),\n        cellWidth: numberRef(1),\n        cellHeight: numberRef(1),\n        gap: numberRef(0),\n        padding: vector2Ref(0, 0)\n    };\n\n    // Convert to GridCell format\n    const gridCells = cells.map((cell, index) => {\n        const coord = cell.pos instanceof Vector2D\n            ? GridCoordUtils.create(cell.pos.y.value, cell.pos.x.value)\n            : GridCoordUtils.create(cell.pos[1], cell.pos[0]);\n\n        return GridCellUtils.create(\n            coord.row.value, coord.col.value,\n            cell.size[1], cell.size[0]  // [width, height] -> [colSpan, rowSpan]\n        );\n    });\n\n    // Use GridMath to fit cells without overlap\n    const fittedCells = GridLayoutUtils.fitCells(gridCells, config);\n\n    // Convert back to original format\n    return fittedCells.map((fittedCell, index) => ({\n        pos: vector2Ref(fittedCell.col.value, fittedCell.row.value),\n        size: [fittedCell.colSpan.value, fittedCell.rowSpan.value]\n    }));\n};\n","import { numberRef } from \"fest/object\";\nimport { bindWith, bindAnimated, bindTransition, bindSpring, bindMorph } from \"fest/lure\";\nimport {\n    Vector2D, operated,\n    Matrix2D, Matrix4D\n} from \"../../math/index\";\nimport { handleStyleChange } from \"fest/dom\";\nimport { AnimationOptions, TransitionOptions } from \"./CSSAnimated\";\n\n// CSS Typed OM and Unit Conversion Utilities\nexport class CSSUnitConverter {\n    private static readonly unitPatterns = {\n        px: /(-?\\d*\\.?\\d+)px/g,\n        em: /(-?\\d*\\.?\\d+)em/g,\n        rem: /(-?\\d*\\.?\\d+)rem/g,\n        vh: /(-?\\d*\\.?\\d+)vh/g,\n        vw: /(-?\\d*\\.?\\d+)vw/g,\n        vmin: /(-?\\d*\\.?\\d+)vmin/g,\n        vmax: /(-?\\d*\\.?\\d+)vmax/g,\n        percent: /(-?\\d*\\.?\\d+)%/g\n    };\n\n    // Convert CSS value to pixels\n    static toPixels(value: string, element?: HTMLElement): number {\n        if (!value) return 0;\n\n        const testElement = element || document.body;\n        const testDiv = document.createElement('div');\n        testDiv.style.position = 'absolute';\n        testDiv.style.visibility = 'hidden';\n        testDiv.style.width = value;\n        testElement.appendChild(testDiv);\n\n        const pixels = testDiv.offsetWidth;\n        testElement.removeChild(testDiv);\n        return pixels;\n    }\n\n    // Convert pixels to CSS unit\n    static fromPixels(pixels: number, unit: 'px' | 'em' | 'rem' | '%' = 'px'): string {\n        switch (unit) {\n            case 'em':\n                const fontSize = parseFloat(getComputedStyle(document.body).fontSize);\n                return `${pixels / fontSize}em`;\n            case 'rem':\n                const rootFontSize = parseFloat(getComputedStyle(document.documentElement).fontSize);\n                return `${pixels / rootFontSize}rem`;\n            case '%':\n                return `${(pixels / globalThis.innerWidth) * 100}%`;\n            default:\n                return `${pixels}px`;\n        }\n    }\n\n    // Parse CSS value with units\n    static parseValue(cssValue: string): { value: number, unit: string } {\n        const match = cssValue.match(/^(-?\\d*\\.?\\d+)([a-z%]+)?$/);\n        if (!match) return { value: 0, unit: 'px' };\n\n        return {\n            value: parseFloat(match[1]),\n            unit: match[2] || 'px'\n        };\n    }\n\n    // Convert between units\n    static convertUnits(value: number, fromUnit: string, toUnit: string, element?: HTMLElement): number {\n        if (fromUnit === toUnit) return value;\n\n        // Convert to pixels first\n        let pixels: number;\n        switch (fromUnit) {\n            case 'px':\n                pixels = value;\n                break;\n            case 'em':\n                const fontSize = parseFloat(getComputedStyle(element || document.body).fontSize);\n                pixels = value * fontSize;\n                break;\n            case 'rem':\n                const rootFontSize = parseFloat(getComputedStyle(document.documentElement).fontSize);\n                pixels = value * rootFontSize;\n                break;\n            case '%':\n                pixels = (value / 100) * globalThis.innerWidth;\n                break;\n            case 'vw':\n                pixels = (value / 100) * globalThis.innerWidth;\n                break;\n            case 'vh':\n                pixels = (value / 100) * globalThis.innerHeight;\n                break;\n            default:\n                pixels = value;\n        }\n\n        // Convert from pixels to target unit\n        switch (toUnit) {\n            case 'px':\n                return pixels;\n            case 'em':\n                const fontSize = parseFloat(getComputedStyle(element || document.body).fontSize);\n                return pixels / fontSize;\n            case 'rem':\n                const rootFontSize = parseFloat(getComputedStyle(document.documentElement).fontSize);\n                return pixels / rootFontSize;\n            case '%':\n                return (pixels / globalThis.innerWidth) * 100;\n            case 'vw':\n                return (pixels / globalThis.innerWidth) * 100;\n            case 'vh':\n                return (pixels / globalThis.innerHeight) * 100;\n            default:\n                return pixels;\n        }\n    }\n}\n\n// CSS Transform Utilities with Reactive Math\nexport class CSSTransform {\n    // Convert reactive Vector2D to CSS translate\n    static translate2D(vector: Vector2D): ReturnType<typeof numberRef> {\n        return operated([vector.x, vector.y], () =>\n            `translate(${vector.x.value}px, ${vector.y.value}px)`\n        );\n    }\n\n    // Convert reactive Vector2D to CSS translate3d\n    static translate3D(vector: Vector2D, z: ReturnType<typeof numberRef> = numberRef(0)): ReturnType<typeof numberRef> {\n        return operated([vector.x, vector.y, z], () =>\n            `translate3d(${vector.x.value}px, ${vector.y.value}px, ${z.value}px)`\n        );\n    }\n\n    // Convert reactive Vector2D to CSS scale\n    static scale2D(vector: Vector2D): ReturnType<typeof numberRef> {\n        return operated([vector.x, vector.y], () =>\n            `scale(${vector.x.value}, ${vector.y.value})`\n        );\n    }\n\n    // Convert reactive number to CSS rotate\n    static rotate(angle: ReturnType<typeof numberRef>): ReturnType<typeof numberRef> {\n        return operated([angle], () => `rotate(${angle.value}deg)`);\n    }\n\n    // Combine transforms into single CSS transform string\n    static combine(transforms: ReturnType<typeof numberRef>[]): ReturnType<typeof numberRef> {\n        return operated(transforms, () => transforms.map(t => t.value).join(' '));\n    }\n\n    // Create matrix transform from reactive Matrix2D\n    static matrix2D(matrix: Matrix2D): ReturnType<typeof numberRef> {\n        return operated(matrix.elements, () =>\n            `matrix(${matrix.elements.map(e => e.value).join(', ')})`\n        );\n    }\n\n    // Create matrix3d transform from reactive Matrix4D\n    static matrix3D(matrix: Matrix4D): ReturnType<typeof numberRef> {\n        return operated(matrix.elements, () =>\n            `matrix3d(${matrix.elements.map(e => e.value).join(', ')})`\n        );\n    }\n}\n\n// CSS Position and Size Utilities\nexport class CSSPosition {\n    // Convert reactive Vector2D to CSS position values\n    static leftTop(vector: Vector2D): { left: ReturnType<typeof numberRef>, top: ReturnType<typeof numberRef> } {\n        return {\n            left: operated([vector.x], () => `${vector.x.value}px`),\n            top: operated([vector.y], () => `${vector.y.value}px`)\n        };\n    }\n\n    // Convert reactive Vector2D to CSS inset values\n    static inset(vector: Vector2D): { inset: ReturnType<typeof numberRef> } {\n        return {\n            inset: operated([vector.x, vector.y], () => `${vector.y.value}px ${vector.x.value}px`)\n        };\n    }\n\n    // Convert reactive Vector2D to CSS size values\n    static size(vector: Vector2D): { width: ReturnType<typeof numberRef>, height: ReturnType<typeof numberRef> } {\n        return {\n            width: operated([vector.x], () => `${vector.x.value}px`),\n            height: operated([vector.y], () => `${vector.y.value}px`)\n        };\n    }\n}\n\n// CSS Reactive Binding Utilities\nexport class CSSBinder {\n    // Bind reactive Vector2D to CSS transform\n    static bindTransform(\n        element: HTMLElement,\n        vector: Vector2D,\n        animationType: 'instant' | 'animate' | 'transition' | 'spring' = 'instant',\n        options?: AnimationOptions | TransitionOptions\n    ): () => void {\n        const transformValue = CSSTransform.translate2D(vector);\n        const binder = animationType === 'instant' ? bindWith :\n                      animationType === 'animate' ? bindAnimated :\n                      animationType === 'transition' ? bindTransition : bindSpring;\n        return binder(element, 'transform', transformValue, options) ?? (() => {});\n    }\n\n    // Bind reactive Vector2D to CSS position\n    static bindPosition(\n        element: HTMLElement,\n        vector: Vector2D,\n        animationType: 'instant' | 'animate' | 'transition' | 'spring' = 'instant',\n        options?: AnimationOptions | TransitionOptions\n    ): () => void {\n        const position = CSSPosition.leftTop(vector);\n        const binder = animationType === 'instant' ? bindWith :\n                      animationType === 'animate' ? bindAnimated :\n                      animationType === 'transition' ? bindTransition : bindSpring;\n\n        const unsubLeft = binder(element, 'left', position.left, options) ?? (() => {});\n        const unsubTop = binder(element, 'top', position.top, options) ?? (() => {});\n        return () => { unsubLeft?.(); unsubTop?.(); };\n    }\n\n    // Bind reactive Vector2D to CSS size\n    static bindSize(\n        element: HTMLElement,\n        vector: Vector2D,\n        animationType: 'instant' | 'animate' | 'transition' | 'spring' = 'instant',\n        options?: AnimationOptions | TransitionOptions\n    ): () => void {\n        const size = CSSPosition.size(vector);\n        const binder = animationType === 'instant' ? bindWith :\n                      animationType === 'animate' ? bindAnimated :\n                      animationType === 'transition' ? bindTransition : bindSpring;\n\n        const unsubWidth = binder(element, 'width', size.width, options) ?? (() => {});\n        const unsubHeight = binder(element, 'height', size.height, options) ?? (() => {});\n        return () => { unsubWidth?.(); unsubHeight?.(); };\n    }\n\n    // Bind reactive value with unit conversion\n    static bindWithUnit(\n        element: HTMLElement,\n        property: string,\n        value: ReturnType<typeof numberRef>,\n        unit: string = 'px',\n        animationType: 'instant' | 'animate' | 'transition' | 'spring' = 'instant',\n        options?: AnimationOptions | TransitionOptions\n    ): () => void {\n        const cssValue = operated([value], () => `${value.value}${unit}`);\n        const binder = animationType === 'instant' ? bindWith :\n                      animationType === 'animate' ? bindAnimated :\n                      animationType === 'transition' ? bindTransition : bindSpring;\n        return binder(element, property, cssValue, options) ?? (() => {});\n    }\n\n    // Bind reactive vector with unit conversion\n    static bindVectorWithUnit(\n        element: HTMLElement,\n        vector: Vector2D,\n        unit: string = 'px',\n        animationType: 'instant' | 'animate' | 'transition' | 'spring' = 'instant',\n        options?: AnimationOptions | TransitionOptions\n    ): () => void {\n        const cssValue = operated([vector.x, vector.y], () =>\n            `${vector.x.value}${unit} ${vector.y.value}${unit}`\n        );\n        const binder = animationType === 'instant' ? bindWith :\n                      animationType === 'animate' ? bindAnimated :\n                      animationType === 'transition' ? bindTransition : bindSpring;\n\n        return binder(element, 'transform', cssValue, {\n            ...options,\n            handler: animationType === 'instant' ? undefined : (el: HTMLElement, val: any) => {\n                el.style.setProperty('transform', `translate(${val})`);\n            }\n        }) ?? (() => {});\n    }\n\n    // Enhanced animation methods with morphing support\n    static bindTransformMorph(\n        element: HTMLElement,\n        transformProps: {\n            translate?: Vector2D;\n            scale?: Vector2D | ReturnType<typeof numberRef>;\n            rotate?: ReturnType<typeof numberRef>;\n            skew?: Vector2D;\n        },\n        options: AnimationOptions = {}\n    ): () => void {\n        const transforms: Record<string, any> = {};\n\n        if (transformProps.translate) {\n            transforms.transform = operated(\n                [transformProps.translate.x, transformProps.translate.y],\n                () => `translate(${transformProps.translate!.x.value}px, ${transformProps.translate!.y.value}px)`\n            );\n        }\n\n        if (transformProps.scale) {\n            const scaleStr = transformProps.scale instanceof Vector2D ?\n                operated([transformProps.scale.x, transformProps.scale.y],\n                    () => `scale(${transformProps.scale!.x.value}, ${transformProps.scale!.y.value})`) :\n                operated([transformProps.scale],\n                    () => `scale(${transformProps.scale!.value})`);\n            transforms.transform = transforms.transform ?\n                operated([transforms.transform, scaleStr], (t, s) => `${t} ${s}`) : scaleStr;\n        }\n\n        if (transformProps.rotate) {\n            const rotateStr = operated([transformProps.rotate],\n                () => `rotate(${transformProps.rotate!.value}deg)`);\n            transforms.transform = transforms.transform ?\n                operated([transforms.transform, rotateStr], (t, r) => `${t} ${r}`) : rotateStr;\n        }\n\n        if (transformProps.skew) {\n            const skewStr = operated([transformProps.skew.x, transformProps.skew.y],\n                () => `skew(${transformProps.skew!.x.value}deg, ${transformProps.skew!.y.value}deg)`);\n            transforms.transform = transforms.transform ?\n                operated([transforms.transform, skewStr], (t, s) => `${t} ${s}`) : skewStr;\n        }\n\n        return bindMorph(element, transforms, options);\n    }\n\n    // Bind reactive color with smooth transitions\n    static bindColor(\n        element: HTMLElement,\n        property: string,\n        color: ReturnType<typeof numberRef> | string,\n        animationType: 'instant' | 'animate' | 'transition' = 'transition',\n        options: TransitionOptions = { duration: 300, easing: 'ease-in-out' }\n    ): () => void {\n        const binder = animationType === 'instant' ? bindWith :\n                      animationType === 'animate' ? bindAnimated : bindTransition;\n\n        const colorValue = typeof color === 'string' ? color :\n            operated([color], () => `hsl(${color.value}, 70%, 50%)`);\n\n        return binder(element, property, colorValue, options) ?? (() => {});\n    }\n\n    // Bind reactive opacity with fade effects\n    static bindOpacity(\n        element: HTMLElement,\n        opacity: ReturnType<typeof numberRef>,\n        animationType: 'instant' | 'animate' | 'transition' | 'spring' = 'transition',\n        options: AnimationOptions | TransitionOptions = { duration: 200, easing: 'ease-in-out' }\n    ): () => void {\n        const binder = animationType === 'instant' ? bindWith :\n                      animationType === 'animate' ? bindAnimated :\n                      animationType === 'transition' ? bindTransition : bindSpring;\n\n        return binder(element, 'opacity', opacity, options) ?? (() => {});\n    }\n\n    // Bind reactive border radius with morphing\n    static bindBorderRadius(\n        element: HTMLElement,\n        radius: Vector2D | ReturnType<typeof numberRef>,\n        animationType: 'instant' | 'animate' | 'transition' | 'spring' = 'animate',\n        options: AnimationOptions | TransitionOptions = { duration: 300, easing: 'ease-out' }\n    ): () => void {\n        const binder = animationType === 'instant' ? bindWith :\n                      animationType === 'animate' ? bindAnimated :\n                      animationType === 'transition' ? bindTransition : bindSpring;\n\n        const radiusValue = radius instanceof Vector2D ?\n            operated([radius.x, radius.y], () => `${radius.x.value}px ${radius.y.value}px`) :\n            operated([radius], () => `${radius.value}px`);\n\n        return binder(element, 'border-radius', radiusValue, options) ?? (() => {});\n    }\n}\n\n// CSS Calc/Math Operations\nexport class CSSCalc {\n    // Create CSS calc expression from reactive values\n    static add(a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>, unit: string = 'px'): ReturnType<typeof numberRef> {\n        return operated([a, b], () => `calc(${a.value}${unit} + ${b.value}${unit})`);\n    }\n\n    static subtract(a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>, unit: string = 'px'): ReturnType<typeof numberRef> {\n        return operated([a, b], () => `calc(${a.value}${unit} - ${b.value}${unit})`);\n    }\n\n    static multiply(a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>): ReturnType<typeof numberRef> {\n        return operated([a, b], () => `calc(${a.value} * ${b.value})`);\n    }\n\n    static divide(a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>): ReturnType<typeof numberRef> {\n        return operated([a, b], () => `calc(${a.value} / ${b.value})`);\n    }\n\n    // Clamp reactive value between min and max\n    static clamp(value: ReturnType<typeof numberRef>, min: ReturnType<typeof numberRef>, max: ReturnType<typeof numberRef>, unit: string = 'px'): ReturnType<typeof numberRef> {\n        return operated([value, min, max], () => `clamp(${min.value}${unit}, ${value.value}${unit}, ${max.value}${unit})`);\n    }\n\n    // Min/max operations\n    static min(a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>, unit: string = 'px'): ReturnType<typeof numberRef> {\n        return operated([a, b], () => `min(${a.value}${unit}, ${b.value}${unit})`);\n    }\n\n    static max(a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>, unit: string = 'px'): ReturnType<typeof numberRef> {\n        return operated([a, b], () => `max(${a.value}${unit}, ${b.value}${unit})`);\n    }\n}\n\n// DOM Matrix Integration\nexport class DOMMatrixAdapter {\n    // Convert reactive Matrix4D to DOMMatrix\n    static toDOMMatrix(matrix: Matrix4D): DOMMatrix {\n        return new DOMMatrix(matrix.elements.map(e => e.value));\n    }\n\n    // Convert DOMMatrix to reactive Matrix4D\n    static fromDOMMatrix(domMatrix: DOMMatrix): Matrix4D {\n        const elements = Array.from(domMatrix.toFloat32Array()).map(v => numberRef(v));\n        return new Matrix4D(\n            elements[0], elements[1], elements[2], elements[3],\n            elements[4], elements[5], elements[6], elements[7],\n            elements[8], elements[9], elements[10], elements[11],\n            elements[12], elements[13], elements[14], elements[15]\n        );\n    }\n\n    // Apply reactive transform to DOMMatrix\n    static applyTransform(domMatrix: DOMMatrix, transform: Matrix4D): DOMMatrix {\n        const reactiveMatrix = this.fromDOMMatrix(domMatrix);\n        // This would need matrix multiplication - simplified for now\n        return domMatrix.multiplySelf(this.toDOMMatrix(transform));\n    }\n}\n\n// CSS Custom Properties Integration\nexport class CSSCustomProps {\n    // Bind reactive value to CSS custom property\n    static bindProperty(element: HTMLElement, propName: string, value: ReturnType<typeof numberRef>, unit: string = ''): () => void {\n        return operated([value], () => {\n            element.style.setProperty(propName, `${value.value}${unit}`);\n            return () => {}; // Return cleanup function\n        });\n    }\n\n    // Bind reactive Vector2D to CSS custom properties\n    static bindVectorProperties(element: HTMLElement, baseName: string, vector: Vector2D, unit: string = 'px'): () => void {\n        const unsubX = this.bindProperty(element, `${baseName}-x`, vector.x, unit);\n        const unsubY = this.bindProperty(element, `${baseName}-y`, vector.y, unit);\n        return () => { unsubX(); unsubY(); };\n    }\n\n    // Get reactive value from CSS custom property\n    static getReactiveProperty(element: HTMLElement, propName: string): ReturnType<typeof numberRef> {\n        const initialValue = parseFloat(getComputedStyle(element).getPropertyValue(propName)) || 0;\n        const reactiveValue = numberRef(initialValue);\n\n        // Set up observer for CSS custom property changes\n        const observer = new MutationObserver(() => {\n            const newValue = parseFloat(getComputedStyle(element).getPropertyValue(propName)) || 0;\n            reactiveValue.value = newValue;\n        });\n\n        observer.observe(element, {\n            attributes: true,\n            attributeFilter: ['style']\n        });\n\n        return reactiveValue;\n    }\n}\n\n// ============================================================================\n// Unified Unit Conversion and CSS Utilities\n// ============================================================================\n\n// CSS Unit Conversion and Formatting Utilities\nexport class CSSUnitUtils {\n    // Convert reactive values to CSS pixel units\n    static asPx(value: number | string | ReturnType<typeof numberRef>): string | ReturnType<typeof numberRef> {\n        if (typeof value === 'number') {\n            return `${value || 0}px`;\n        }\n        if (typeof value === 'string') {\n            return value || '0px';\n        }\n        // Reactive value - return computed string\n        return operated([value], (v) => `${v || 0}px`);\n    }\n\n    // Convert reactive values to CSS percentage units\n    static asPercent(value: number | string | ReturnType<typeof numberRef>): string | ReturnType<typeof numberRef> {\n        if (typeof value === 'number') {\n            return `${value || 0}%`;\n        }\n        if (typeof value === 'string') {\n            return value || '0%';\n        }\n        // Reactive value - return computed string\n        return operated([value], (v) => `${v || 0}%`);\n    }\n\n    // Convert reactive values to CSS em units\n    static asEm(value: number | string | ReturnType<typeof numberRef>): string | ReturnType<typeof numberRef> {\n        if (typeof value === 'number') {\n            return `${value || 0}em`;\n        }\n        if (typeof value === 'string') {\n            return value || '0em';\n        }\n        // Reactive value - return computed string\n        return operated([value], (v) => `${v || 0}em`);\n    }\n\n    // Convert reactive values to CSS rem units\n    static asRem(value: number | string | ReturnType<typeof numberRef>): string | ReturnType<typeof numberRef> {\n        if (typeof value === 'number') {\n            return `${value || 0}rem`;\n        }\n        if (typeof value === 'string') {\n            return value || '0rem';\n        }\n        // Reactive value - return computed string\n        return operated([value], (v) => `${v || 0}rem`);\n    }\n\n    // Convert reactive values to CSS viewport units\n    static asVw(value: number | string | ReturnType<typeof numberRef>): string | ReturnType<typeof numberRef> {\n        if (typeof value === 'number') {\n            return `${value || 0}vw`;\n        }\n        if (typeof value === 'string') {\n            return value || '0vw';\n        }\n        return operated([value], (v) => `${v || 0}vw`);\n    }\n\n    static asVh(value: number | string | ReturnType<typeof numberRef>): string | ReturnType<typeof numberRef> {\n        if (typeof value === 'number') {\n            return `${value || 0}vh`;\n        }\n        if (typeof value === 'string') {\n            return value || '0vh';\n        }\n        return operated([value], (v) => `${v || 0}vh`);\n    }\n\n    // Generic unit converter with fallback\n    static asUnit(value: number | string | ReturnType<typeof numberRef>, unit: string, fallbackValue: number = 0): string | ReturnType<typeof numberRef> {\n        if (typeof value === 'number') {\n            return `${value || fallbackValue}${unit}`;\n        }\n        if (typeof value === 'string') {\n            return value || `${fallbackValue}${unit}`;\n        }\n        return operated([value], (v) => `${v || fallbackValue}${unit}`);\n    }\n\n    // Reactive CSS calc() expressions\n    static calc(expression: string): string {\n        return `calc(${expression})`;\n    }\n\n    // Create reactive calc expressions\n    static reactiveCalc(operands: Array<number | string | ReturnType<typeof numberRef>>, operator: string): ReturnType<typeof numberRef> {\n        return operated(operands, (...values) => {\n            const expression = values.join(` ${operator} `);\n            return `calc(${expression})`;\n        });\n    }\n\n    // Clamp reactive values with CSS clamp()\n    static clamp(min: number | string | ReturnType<typeof numberRef>,\n                 value: number | string | ReturnType<typeof numberRef>,\n                 max: number | string | ReturnType<typeof numberRef>): ReturnType<typeof numberRef> {\n        const minStr = typeof min === 'number' || typeof min === 'string' ? min : operated([min], v => v);\n        const valStr = typeof value === 'number' || typeof value === 'string' ? value : operated([value], v => v);\n        const maxStr = typeof max === 'number' || typeof max === 'string' ? max : operated([max], v => v);\n\n        return operated([minStr, valStr, maxStr].filter(v => typeof v !== 'string'), () => {\n            const minVal = typeof min === 'number' ? min : (typeof min === 'string' ? min : min.value);\n            const val = typeof value === 'number' ? value : (typeof value === 'string' ? value : value.value);\n            const maxVal = typeof max === 'number' ? max : (typeof max === 'string' ? max : max.value);\n            return `clamp(${minVal}, ${val}, ${maxVal})`;\n        });\n    }\n\n    // Reactive max/min functions\n    static max(values: Array<number | string | ReturnType<typeof numberRef>>): ReturnType<typeof numberRef> {\n        return operated(values.filter(v => typeof v !== 'string'), (...nums) => {\n            const cssValues = values.map(v =>\n                typeof v === 'number' ? v : (typeof v === 'string' ? v : v.value)\n            );\n            return `max(${cssValues.join(', ')})`;\n        });\n    }\n\n    static min(values: Array<number | string | ReturnType<typeof numberRef>>): ReturnType<typeof numberRef> {\n        return operated(values.filter(v => typeof v !== 'string'), (...nums) => {\n            const cssValues = values.map(v =>\n                typeof v === 'number' ? v : (typeof v === 'string' ? v : v.value)\n            );\n            return `min(${cssValues.join(', ')})`;\n        });\n    }\n}\n\n// ============================================================================\n// Enhanced UI Control CSS Integration\n// ============================================================================\n\n// Specialized CSS utilities for input controls\nexport class CSSInputControls {\n    // Bind slider thumb position reactively\n    static bindSliderThumb(\n        thumbElement: HTMLElement,\n        value: ReturnType<typeof numberRef>,\n        min: ReturnType<typeof numberRef>,\n        max: ReturnType<typeof numberRef>,\n        trackWidth: ReturnType<typeof numberRef>\n    ): () => void {\n        const position = operated([value, min, max, trackWidth], () => {\n            const percentage = ((value.value - min.value) / (max.value - min.value)) * 100;\n            return `translateX(${percentage}%)`;\n        });\n\n        return CSSBinder.bindTransform(thumbElement, position);\n    }\n\n    // Bind progress bar fill reactively\n    static bindProgressFill(\n        fillElement: HTMLElement,\n        progress: ReturnType<typeof numberRef>\n    ): () => void {\n        const width = operated([progress], () => `${progress.value * 100}%`);\n        return bindWith(fillElement, 'width', width, handleStyleChange) ?? (() => {});\n    }\n\n    // Bind checkbox/radio button state with animations\n    static bindToggleState(\n        element: HTMLElement,\n        checked: ReturnType<typeof numberRef>\n    ): () => void {\n        const scale = operated([checked], () => checked.value ? 'scale(1)' : 'scale(0)');\n        const opacity = operated([checked], () => checked.value ? '1' : '0');\n\n        const unsubScale = CSSBinder.bindTransform(element, scale);\n        const unsubOpacity = bindWith(element, 'opacity', opacity, handleStyleChange) ?? (() => {});\n\n        return () => { unsubScale?.(); unsubOpacity?.(); };\n    }\n}\n\n// Specialized CSS utilities for scrollbars\nexport class CSSScrollbarControls {\n    // Bind scrollbar thumb position and size reactively\n    static bindScrollbarThumb(\n        thumbElement: HTMLElement,\n        scrollPosition: ReturnType<typeof numberRef>,\n        contentSize: ReturnType<typeof numberRef>,\n        containerSize: ReturnType<typeof numberRef>,\n        axis: 'horizontal' | 'vertical' = 'vertical'\n    ): () => void {\n        // Calculate thumb size\n        const thumbSize = operated([contentSize, containerSize], () => {\n            const ratio = containerSize.value / contentSize.value;\n            return Math.max(20, ratio * containerSize.value);\n        });\n\n        // Calculate thumb position\n        const thumbPosition = operated([scrollPosition, contentSize, containerSize, thumbSize], () => {\n            const maxScroll = Math.max(0, contentSize.value - containerSize.value);\n            const scrollRatio = maxScroll > 0 ? scrollPosition.value / maxScroll : 0;\n            return scrollRatio * (containerSize.value - thumbSize.value);\n        });\n\n        // Create transform based on axis\n        const transform = axis === 'vertical'\n            ? operated([thumbPosition], () => `translateY(${thumbPosition.value}px)`)\n            : operated([thumbPosition], () => `translateX(${thumbPosition.value}px)`);\n\n        // Bind size and transform\n        const unsubSize = axis === 'vertical'\n            ? bindWith(thumbElement, 'height', operated([thumbSize], (s) => `${s}px`), handleStyleChange)\n            : bindWith(thumbElement, 'width', operated([thumbSize], (s) => `${s}px`), handleStyleChange);\n\n        const unsubTransform = CSSBinder.bindTransform(thumbElement, transform);\n\n        return () => { unsubSize?.(); unsubTransform?.(); };\n    }\n\n    // Bind scrollbar visibility with smooth transitions\n    static bindScrollbarVisibility(\n        scrollbarElement: HTMLElement,\n        isVisible: ReturnType<typeof numberRef>,\n        transitionDuration: number = 300\n    ): () => void {\n        const opacity = operated([isVisible], () => isVisible.value);\n        const visibility = operated([isVisible], () => isVisible.value > 0 ? 'visible' : 'hidden');\n        const pointerEvents = operated([isVisible], () => isVisible.value > 0 ? 'auto' : 'none');\n\n        const unsubOpacity = bindWith(scrollbarElement, 'opacity', opacity, handleStyleChange);\n        const unsubVisibility = bindWith(scrollbarElement, 'visibility', visibility, handleStyleChange);\n        const unsubPointerEvents = bindWith(scrollbarElement, 'pointer-events', pointerEvents, handleStyleChange);\n\n        // Add transition\n        scrollbarElement.style.transition = `opacity ${transitionDuration}ms ease-in-out`;\n\n        return () => {\n            unsubOpacity?.();\n            unsubVisibility?.();\n            unsubPointerEvents?.();\n        };\n    }\n\n    // Bind scrollbar theme properties reactively\n    static bindScrollbarTheme(\n        scrollbarElement: HTMLElement,\n        theme: {\n            trackColor?: ReturnType<typeof numberRef>;\n            thumbColor?: ReturnType<typeof numberRef>;\n            borderRadius?: ReturnType<typeof numberRef>;\n            thickness?: ReturnType<typeof numberRef>;\n        }\n    ): () => void {\n        const unbinders: (() => void)[] = [];\n\n        if (theme.trackColor) {\n            unbinders.push(bindWith(scrollbarElement, '--scrollbar-track-color',\n                operated([theme.trackColor], (c) => `rgba(${c.value}, ${c.value}, ${c.value}, 0.1)`), handleStyleChange) ?? (() => {}));\n        }\n\n        if (theme.thumbColor) {\n            unbinders.push(bindWith(scrollbarElement, '--scrollbar-thumb-color',\n                operated([theme.thumbColor], (c) => `rgba(${c.value}, ${c.value}, ${c.value}, 0.5)`), handleStyleChange) ?? (() => {}));\n        }\n\n        if (theme.borderRadius) {\n            unbinders.push(bindWith(scrollbarElement, '--scrollbar-border-radius',\n                operated([theme.borderRadius], (r) => `${r.value}px`), handleStyleChange) ?? (() => {}));\n        }\n\n        if (theme.thickness) {\n            unbinders.push(bindWith(scrollbarElement, '--scrollbar-thickness',\n                operated([theme.thickness], (t) => `${t.value}px`), handleStyleChange) ?? (() => {}));\n        }\n\n        return () => unbinders.forEach(unbind => unbind?.());\n    }\n}\n\n// Enhanced momentum scrolling utilities\nexport class CSSMomentumScrolling {\n    // Create smooth scroll animation with momentum\n    static createMomentumScroll(\n        element: HTMLElement,\n        velocity: ReturnType<typeof numberRef>,\n        deceleration: number = 0.92\n    ): Promise<void> {\n        return new Promise(resolve => {\n            let animationId: number;\n            const animate = () => {\n                velocity.value *= deceleration;\n\n                if (Math.abs(velocity.value) < 0.1) {\n                    velocity.value = 0;\n                    cancelAnimationFrame(animationId);\n                    resolve();\n                    return;\n                }\n\n                element.scrollBy({\n                    top: velocity.value,\n                    behavior: 'instant'\n                });\n\n                animationId = requestAnimationFrame(animate);\n            };\n\n            animate();\n        });\n    }\n\n    // Create bounce-back animation for scroll boundaries\n    static createBounceBack(\n        element: HTMLElement,\n        overScroll: ReturnType<typeof numberRef>,\n        duration: number = 300\n    ): Promise<void> {\n        return new Promise(resolve => {\n            const startTime = performance.now();\n            const startValue = overScroll.value;\n\n            const animate = (currentTime: number) => {\n                const elapsed = currentTime - startTime;\n                const progress = Math.min(elapsed / duration, 1);\n\n                // Ease out cubic\n                const eased = 1 - Math.pow(1 - progress, 3);\n\n                overScroll.value = startValue * (1 - eased);\n\n                if (progress < 1) {\n                    requestAnimationFrame(animate);\n                } else {\n                    overScroll.value = 0;\n                    resolve();\n                }\n            };\n\n            requestAnimationFrame(animate);\n        });\n    }\n}\n\n// Enhanced focus and interaction states\nexport class CSSInteractionStates {\n    // Bind focus ring with reactive visibility\n    static bindFocusRing(\n        element: HTMLElement,\n        isFocused: ReturnType<typeof numberRef>,\n        ringColor: string = 'rgba(59, 130, 246, 0.5)'\n    ): () => void {\n        const boxShadow = operated([isFocused], () =>\n            isFocused.value ? `0 0 0 2px ${ringColor}` : 'none'\n        );\n\n        return bindWith(element, 'box-shadow', boxShadow, handleStyleChange) ?? (() => {});\n    }\n\n    // Bind hover state with smooth transitions\n    static bindHoverState(\n        element: HTMLElement,\n        isHovered: ReturnType<typeof numberRef>,\n        hoverTransform: string = 'scale(1.05)'\n    ): () => void {\n        const transform = operated([isHovered], () =>\n            isHovered.value ? hoverTransform : 'none'\n        );\n\n        return CSSBinder.bindTransform(element, transform) ?? (() => {});\n    }\n\n    // Bind active/press state\n    static bindActiveState(\n        element: HTMLElement,\n        isActive: ReturnType<typeof numberRef>,\n        activeTransform: string = 'scale(0.95)'\n    ): () => void {\n        const transform = operated([isActive], () =>\n            isActive.value ? activeTransform : 'none'\n        );\n\n        return CSSBinder.bindTransform(element, transform) ?? (() => {});\n    }\n}\n\n/*\n// Export all enhanced CSS adapter utilities\nexport {\n    CSSUnitConverter,\n    CSSUnitUtils,\n    CSSTransform,\n    CSSPosition,\n    CSSBinder,\n    CSSCalc,\n    DOMMatrixAdapter,\n    CSSCustomProps,\n    CSSInputControls,\n    CSSScrollbarControls,\n    CSSMomentumScrolling,\n    CSSInteractionStates\n};*/\n","// Integration examples showing how reactive math enhances existing components\n\nimport { numberRef, affected, computed } from \"fest/object\";\nimport {\n    Vector2D, vector2Ref,\n    addVector2D, subtractVector2D, multiplyVector2D, magnitude2D, divideVector2D,\n    translate2D, scale2D, rotate2D,\n    vectorFromArray, vectorToArray,\n    operated,\n    Rect2D, createRect2D, rectCenter, rectContainsPoint, rectIntersects, rectArea,\n    clampPointToRect, pointToRectDistance, constrainRectAspectRatio,\n    GridCoordUtils, GridCellUtils, GridLayoutUtils, GridAnimationUtils, GridInteractionUtils,\n    GridCoord, GridCell, GridConfig\n} from \"../src/math/index\";\nimport { ReactiveElementSize } from \"../src/extension/css-ref/Utils\";\n\n/**\n * Example 1: Enhanced Draggable with reactive vector math\n * Improves upon the existing DragHandler in controllers/Draggable.ts\n */\nexport class ReactiveDraggable {\n    private position: Vector2D;\n    private velocity: Vector2D;\n    private acceleration: Vector2D;\n\n    constructor(initialX = 0, initialY = 0) {\n        this.position = vector2Ref(initialX, initialY);\n        this.velocity = vector2Ref(0, 0);\n        this.acceleration = vector2Ref(0, 0);\n    }\n\n    // Physics-based movement with reactive math\n    update(deltaTime: number) {\n        // velocity += acceleration * deltaTime\n        const deltaVel = multiplyVector2D(this.acceleration, numberRef(deltaTime));\n        this.velocity = addVector2D(this.velocity, deltaVel);\n\n        // position += velocity * deltaTime\n        const deltaPos = multiplyVector2D(this.velocity, numberRef(deltaTime));\n        this.position = addVector2D(this.position, deltaPos);\n    }\n\n    // Apply forces reactively\n    applyForce(force: Vector2D) {\n        this.acceleration = addVector2D(this.acceleration, force);\n    }\n\n    // Get current position as array (compatible with existing DOM APIs)\n    getPosition() {\n        return [this.position.x.value, this.position.y.value];\n    }\n}\n\n/**\n * Example 2: Enhanced BBoxAnchor with reactive vector operations\n * Improves upon extension/space-ref/BBoxAnchor.ts\n */\nexport class ReactiveBoundingBox {\n    private topLeft: Vector2D;\n    private size: Vector2D;\n    private center: Vector2D;\n    private corners: Vector2D[];\n\n    constructor(element: HTMLElement) {\n        // Create reactive vectors from element bounds\n        this.topLeft = vector2Ref(0, 0);\n        this.size = vector2Ref(0, 0);\n\n        // Computed reactive center point\n        this.center = addVector2D(\n            this.topLeft,\n            multiplyVector2D(this.size, numberRef(0.5))\n        );\n\n        // Computed reactive corners\n        this.corners = [\n            this.topLeft, // top-left\n            addVector2D(this.topLeft, new Vector2D(this.size.x, numberRef(0))), // top-right\n            addVector2D(this.topLeft, this.size), // bottom-right\n            addVector2D(this.topLeft, new Vector2D(numberRef(0), this.size.y))  // bottom-left\n        ];\n\n        this.updateBounds(element);\n    }\n\n    updateBounds(element: HTMLElement) {\n        const rect = element.getBoundingClientRect();\n        this.topLeft.x.value = rect.left;\n        this.topLeft.y.value = rect.top;\n        this.size.x.value = rect.width;\n        this.size.y.value = rect.height;\n    }\n\n    // Reactive collision detection\n    contains(point: Vector2D) {\n        const inX = operated([point.x, this.topLeft.x, this.size.x], () =>\n            point.x.value >= this.topLeft.x.value &&\n            point.x.value <= this.topLeft.x.value + this.size.x.value\n        );\n        const inY = operated([point.y, this.topLeft.y, this.size.y], () =>\n            point.y.value >= this.topLeft.y.value &&\n            point.y.value <= this.topLeft.y.value + this.size.y.value\n        );\n        return operated([inX, inY], () => inX.value && inY.value);\n    }\n\n    // Get bounds as array (compatible with existing APIs)\n    getBounds() {\n        return [\n            this.topLeft.x.value, this.topLeft.y.value, // x, y\n            this.size.x.value, this.size.y.value        // width, height\n        ];\n    }\n}\n\n/**\n * Example 3: Enhanced Grid Layout with matrix transformations\n * Improves upon layout/grid/Interact.ts\n */\nexport class ReactiveGridTransform {\n    private position: Vector2D;\n    private scale: Vector2D;\n    private rotation: ReturnType<typeof numberRef>;\n\n    constructor() {\n        this.position = vector2Ref(0, 0);\n        this.scale = vector2Ref(1, 1);\n        this.rotation = numberRef(0);\n    }\n\n    // Apply transformation matrix to a point\n    transformPoint(point: Vector2D): Vector2D {\n        // Scale -> Rotate -> Translate\n        let result = scale2D(point, this.scale.x, this.scale.y);\n        result = rotate2D(result, this.rotation);\n        result = translate2D(result, this.position.x, this.position.y);\n        return result;\n    }\n\n    // Convert grid coordinates to screen coordinates\n    gridToScreen(gridX: number, gridY: number, cellSize: number): Vector2D {\n        const gridPoint = vector2Ref(gridX * cellSize, gridY * cellSize);\n        return this.transformPoint(gridPoint);\n    }\n\n    // Convert screen coordinates to grid coordinates\n    screenToGrid(screenX: number, screenY: number, cellSize: number): Vector2D {\n        // Inverse transformation: Translate -> Rotate -> Scale\n        const screenPoint = vector2Ref(screenX, screenY);\n        let result = translate2D(screenPoint, operated([this.position.x], () => -this.position.x.value),\n                                              operated([this.position.y], () => -this.position.y.value));\n        result = rotate2D(result, operated([this.rotation], () => -this.rotation.value));\n        result = scale2D(result, operated([this.scale.x], () => 1/this.scale.x.value),\n                               operated([this.scale.y], () => 1/this.scale.y.value));\n        return new Vector2D(\n            operated([result.x], () => result.x.value / cellSize),\n            operated([result.y], () => result.y.value / cellSize)\n        );\n    }\n}\n\n/**\n * Example 4: Enhanced Pointer API with reactive vectors\n * Improves upon extension/controllers/PointerAPI.ts\n */\nexport class ReactivePointer {\n    private position: Vector2D;\n    private delta: Vector2D;\n    private velocity: Vector2D;\n\n    constructor() {\n        this.position = vector2Ref(0, 0);\n        this.delta = vector2Ref(0, 0);\n        this.velocity = vector2Ref(0, 0);\n    }\n\n    updatePosition(clientX: number, clientY: number, deltaTime: number = 1) {\n        const newPosition = vector2Ref(clientX, clientY);\n\n        // Calculate delta movement\n        this.delta = subtractVector2D(newPosition, this.position);\n\n        // Calculate velocity (delta / time)\n        this.velocity = multiplyVector2D(this.delta, numberRef(1 / deltaTime));\n\n        // Update position\n        this.position = newPosition;\n    }\n\n    // Get distance from another point\n    distanceTo(other: Vector2D) {\n        const diff = subtractVector2D(this.position, other);\n        return magnitude2D(diff);\n    }\n\n    // Check if pointer is within a reactive bounding box\n    isWithin(bounds: ReactiveBoundingBox) {\n        return bounds.contains(this.position);\n    }\n\n    // Get position as array for DOM APIs\n    getPosition() {\n        return [this.position.x.value, this.position.y.value];\n    }\n}\n\n/**\n * Enhanced Pointer API with reactive vectors\n * Improves upon extension/controllers/PointerAPI.ts\n */\nexport class ReactivePointerAPI {\n    private pointers: Map<number, ReactivePointer> = new Map();\n\n    // Enhanced coordinate conversion with reactive math\n    static clientToOrient(clientX: number, clientY: number, element: HTMLElement): Vector2D {\n        const rect = element.getBoundingClientRect();\n        const elementSize = vector2Ref(rect.width, rect.height);\n\n        // Convert client coordinates to element-relative coordinates\n        const relativeX = operated([numberRef(clientX), numberRef(rect.left)], (cx, left) => cx.value - left.value);\n        const relativeY = operated([numberRef(clientY), numberRef(rect.top)], (cy, top) => cy.value - top.value);\n\n        // Normalize to 0-1 range\n        const normalizedX = operated([relativeX, numberRef(rect.width)], (rx, w) => rx.value / w.value);\n        const normalizedY = operated([relativeY, numberRef(rect.height)], (ry, h) => ry.value / h.value);\n\n        return new Vector2D(normalizedX, normalizedY);\n    }\n\n    // Enhanced movement tracking\n    trackPointer(pointerId: number, clientX: number, clientY: number): ReactivePointer {\n        let pointer = this.pointers.get(pointerId);\n        if (!pointer) {\n            pointer = new ReactivePointer();\n            this.pointers.set(pointerId, pointer);\n        }\n\n        pointer.updatePosition(clientX, clientY, 1/60); // 60fps\n        return pointer;\n    }\n\n    // Reactive collision detection between pointers and elements\n    isPointerOverElement(pointerId: number, element: HTMLElement): ReturnType<typeof numberRef> {\n        const pointer = this.pointers.get(pointerId);\n        if (!pointer) return numberRef(0);\n\n        const bbox = new ReactiveBoundingBox(element);\n        const pointerPos = vector2Ref(...pointer.getPosition());\n        return bbox.contains(pointerPos);\n    }\n\n    // Multi-pointer gesture recognition\n    getPinchDistance(pointerId1: number, pointerId2: number): ReturnType<typeof numberRef> {\n        const p1 = this.pointers.get(pointerId1);\n        const p2 = this.pointers.get(pointerId2);\n\n        if (!p1 || !p2) return numberRef(0);\n\n        const pos1 = vector2Ref(...p1.getPosition());\n        const pos2 = vector2Ref(...p2.getPosition());\n        return magnitude2D(subtractVector2D(pos1, pos2));\n    }\n}\n\n/**\n * Enhanced Draggable with physics and reactive math\n * Improves upon extension/controllers/Draggable.ts\n */\nexport class ReactiveDraggableEnhanced {\n    private holder: HTMLElement;\n    private reactivePosition: Vector2D;\n    private velocity: Vector2D;\n    private acceleration: Vector2D;\n    private friction: ReturnType<typeof numberRef>;\n    private spring: { stiffness: ReturnType<typeof numberRef>, damping: ReturnType<typeof numberRef> };\n    private dragHandler: any; // Would be DragHandler instance\n\n    constructor(holder: HTMLElement, options: {\n        friction?: number;\n        spring?: { stiffness: number; damping: number };\n    } = {}) {\n        this.holder = holder;\n\n        // Initialize reactive vectors\n        this.reactivePosition = vector2Ref(0, 0);\n        this.velocity = vector2Ref(0, 0);\n        this.acceleration = vector2Ref(0, 0);\n\n        // Physics parameters\n        this.friction = numberRef(options.friction || 0.95);\n        this.spring = {\n            stiffness: numberRef(options.spring?.stiffness || 0.1),\n            damping: numberRef(options.spring?.damping || 0.8)\n        };\n    }\n\n    // Physics-based updates\n    updatePhysics(deltaTime: number = 1/60) {\n        // Apply friction to velocity\n        this.velocity = multiplyVector2D(this.velocity, this.friction);\n\n        // Update position based on velocity\n        const deltaPos = multiplyVector2D(this.velocity, numberRef(deltaTime));\n        this.reactivePosition = addVector2D(this.reactivePosition, deltaPos);\n\n        // Apply spring forces if near target\n        this.applySpringForces();\n    }\n\n    private applySpringForces() {\n        // Spring back to origin when released\n        const springForce = multiplyVector2D(this.reactivePosition, operated([this.spring.stiffness], (s) => -s.value));\n        const dampingForce = multiplyVector2D(this.velocity, operated([this.spring.damping], (d) => -d.value));\n\n        this.acceleration = addVector2D(springForce, dampingForce);\n        this.velocity = addVector2D(this.velocity, multiplyVector2D(this.acceleration, numberRef(1/60)));\n    }\n\n    // Apply external forces (like mouse drag)\n    applyForce(force: Vector2D) {\n        this.velocity = addVector2D(this.velocity, force);\n    }\n\n    // Get current position for DOM updates\n    getPositionForDOM() {\n        return [this.reactivePosition.x.value, this.reactivePosition.y.value];\n    }\n\n    // Check if movement has settled\n    isAtRest(threshold: number = 0.1): boolean {\n        const speed = magnitude2D(this.velocity).value;\n        const distance = magnitude2D(this.reactivePosition).value;\n        return speed < threshold && distance < threshold;\n    }\n\n    // Enhanced drag end with physics settling\n    enhancedDragEnd() {\n        // Start physics-based settling animation\n        const animate = () => {\n            this.updatePhysics();\n            const [x, y] = this.getPositionForDOM();\n\n            // Update DOM element\n            this.holder.style.transform = `translate3d(${x}px, ${y}px, 0px)`;\n\n            if (!this.isAtRest()) {\n                requestAnimationFrame(animate);\n            }\n        };\n\n        requestAnimationFrame(animate);\n    }\n}\n\n/**\n * Enhanced Resizable with reactive constraints\n * Improves upon extension/controllers/Resizable.ts\n */\nexport class ReactiveResizableEnhanced {\n    private holder: HTMLElement;\n    private reactiveSize: Vector2D;\n    private minSize: Vector2D;\n    private maxSize: Vector2D;\n    private aspectRatio: ReturnType<typeof numberRef> | null;\n\n    constructor(holder: HTMLElement, options: {\n        minSize?: [number, number];\n        maxSize?: [number, number];\n        aspectRatio?: number;\n    } = {}) {\n        this.holder = holder;\n\n        // Initialize reactive vectors\n        this.reactiveSize = vector2Ref(\n            holder.offsetWidth,\n            holder.offsetHeight\n        );\n\n        this.minSize = vector2Ref(\n            options.minSize?.[0] || 50,\n            options.minSize?.[1] || 50\n        );\n\n        this.maxSize = vector2Ref(\n            options.maxSize?.[0] || globalThis.innerWidth,\n            options.maxSize?.[1] || globalThis.innerHeight\n        );\n\n        this.aspectRatio = options.aspectRatio ? numberRef(options.aspectRatio) : null;\n    }\n\n    // Set size with reactive constraints\n    setSize(width: number, height: number) {\n        let newWidth = operated([numberRef(width), this.minSize.x, this.maxSize.x], (w, min, max) =>\n            Math.max(min.value, Math.min(max.value, w.value))\n        );\n\n        let newHeight = operated([numberRef(height), this.minSize.y, this.maxSize.y], (h, min, max) =>\n            Math.max(min.value, Math.min(max.value, h.value))\n        );\n\n        // Apply aspect ratio constraint if set\n        if (this.aspectRatio) {\n            const currentRatio = operated([newWidth, newHeight], (w, h) => w.value / h.value);\n            const targetRatio = this.aspectRatio;\n\n            operated([currentRatio, targetRatio], (current, target) => {\n                if (Math.abs(current.value - target.value) > 0.01) {\n                    // Adjust height to match aspect ratio\n                    newHeight = operated([newWidth, targetRatio], (w, ratio) => w.value / ratio.value);\n                }\n            });\n        }\n\n        this.reactiveSize.x.value = newWidth.value;\n        this.reactiveSize.y.value = newHeight.value;\n\n        // Update DOM element\n        this.holder.style.width = `${newWidth.value}px`;\n        this.holder.style.height = `${newHeight.value}px`;\n    }\n\n    // Resize with constraints applied\n    resizeBy(deltaWidth: number, deltaHeight: number) {\n        const newWidth = operated([this.reactiveSize.x, numberRef(deltaWidth)], (w, dw) => w.value + dw.value);\n        const newHeight = operated([this.reactiveSize.y, numberRef(deltaHeight)], (h, dh) => h.value + dh.value);\n\n        this.setSize(newWidth.value, newHeight.value);\n    }\n\n    // Get constrained size for DOM updates\n    getConstrainedSize() {\n        return [this.reactiveSize.x.value, this.reactiveSize.y.value];\n    }\n\n    // Check if size is at minimum/maximum bounds\n    isAtMinSize(): boolean {\n        return this.reactiveSize.x.value <= this.minSize.x.value ||\n               this.reactiveSize.y.value <= this.minSize.y.value;\n    }\n\n    isAtMaxSize(): boolean {\n        return this.reactiveSize.x.value >= this.maxSize.x.value ||\n               this.reactiveSize.y.value >= this.maxSize.y.value;\n    }\n}\n\n/**\n * Enhanced Grid System with reactive transformations\n * Improves upon layout/grid/Interact.ts\n */\nexport class ReactiveGridSystem {\n    private cellSize: Vector2D;\n    private gridOffset: Vector2D;\n    private zoom: ReturnType<typeof numberRef>;\n    private pan: Vector2D;\n\n    constructor(cellSize: [number, number] = [32, 32]) {\n        this.cellSize = vector2Ref(cellSize[0], cellSize[1]);\n        this.gridOffset = vector2Ref(0, 0);\n        this.zoom = numberRef(1);\n        this.pan = vector2Ref(0, 0);\n    }\n\n    // Convert grid coordinates to screen coordinates with zoom and pan\n    gridToScreen(gridX: number, gridY: number): Vector2D {\n        const gridPos = vector2Ref(gridX, gridY);\n\n        // Scale by cell size\n        const scaled = multiplyVector2D(gridPos, this.cellSize);\n\n        // Apply zoom\n        const zoomed = multiplyVector2D(scaled, this.zoom);\n\n        // Apply pan offset\n        const panned = addVector2D(zoomed, this.pan);\n\n        // Add grid offset\n        return addVector2D(panned, this.gridOffset);\n    }\n\n    // Convert screen coordinates to grid coordinates\n    screenToGrid(screenX: number, screenY: number): Vector2D {\n        const screenPos = vector2Ref(screenX, screenY);\n\n        // Remove pan and offset\n        const unpanned = subtractVector2D(screenPos, this.pan);\n        const unoffset = subtractVector2D(unpanned, this.gridOffset);\n\n        // Remove zoom\n        const unzoomed = divideVector2D(unoffset, this.zoom);\n\n        // Convert to grid units\n        return divideVector2D(unzoomed, this.cellSize);\n    }\n\n    // Snap position to nearest grid point\n    snapToGrid(position: Vector2D): Vector2D {\n        const gridCoords = this.screenToGrid(position.x.value, position.y.value);\n        return this.gridToScreen(\n            Math.round(gridCoords.x.value),\n            Math.round(gridCoords.y.value)\n        );\n    }\n\n    // Get grid line positions for rendering\n    getGridLines(viewportSize: [number, number]): { horizontal: number[], vertical: number[] } {\n        const [width, height] = viewportSize;\n\n        // Calculate visible grid range\n        const topLeft = this.screenToGrid(-this.pan.x.value, -this.pan.y.value);\n        const bottomRight = this.screenToGrid(width - this.pan.x.value, height - this.pan.y.value);\n\n        const horizontal: number[] = [];\n        const vertical: number[] = [];\n\n        // Generate horizontal lines\n        for (let y = Math.floor(topLeft.y.value); y <= Math.ceil(bottomRight.y.value); y++) {\n            const screenY = this.gridToScreen(0, y).y.value;\n            horizontal.push(screenY);\n        }\n\n        // Generate vertical lines\n        for (let x = Math.floor(topLeft.x.value); x <= Math.ceil(bottomRight.x.value); x++) {\n            const screenX = this.gridToScreen(x, 0).x.value;\n            vertical.push(screenX);\n        }\n\n        return { horizontal, vertical };\n    }\n\n    // Animate zoom with smooth interpolation\n    animateZoom(targetZoom: number, duration: number = 300) {\n        const startZoom = this.zoom.value;\n        const startTime = performance.now();\n\n        const animate = (currentTime: number) => {\n            const elapsed = currentTime - startTime;\n            const progress = Math.min(elapsed / duration, 1);\n\n            // Easing function (ease-out cubic)\n            const eased = 1 - Math.pow(1 - progress, 3);\n\n            this.zoom.value = startZoom + (targetZoom - startZoom) * eased;\n\n            if (progress < 1) {\n                requestAnimationFrame(animate);\n            }\n        };\n\n        requestAnimationFrame(animate);\n    }\n\n    // Pan the grid smoothly\n    panBy(deltaX: number, deltaY: number) {\n        this.pan.x.value += deltaX;\n        this.pan.y.value += deltaY;\n    }\n\n    // Center the grid on a specific point\n    centerOn(point: Vector2D) {\n        const centerX = globalThis.innerWidth / 2;\n        const centerY = globalThis.innerHeight / 2;\n\n        this.pan.x.value = centerX - point.x.value;\n        this.pan.y.value = centerY - point.y.value;\n    }\n}\n\n/**\n * Enhanced Orientation System with reactive transformations\n * Improves upon layout/orient/OrientBox.ts\n */\nexport class ReactiveOrientSystem {\n    private position: Vector2D;\n    private scale: Vector2D;\n    private rotation: ReturnType<typeof numberRef>;\n    private skew: Vector2D;\n\n    constructor() {\n        this.position = vector2Ref(0, 0);\n        this.scale = vector2Ref(1, 1);\n        this.rotation = numberRef(0);\n        this.skew = vector2Ref(0, 0);\n    }\n\n    // Generate CSS transform string reactively\n    getTransformString(): ReturnType<typeof numberRef> {\n        return operated(\n            [this.position.x, this.position.y, this.scale.x, this.scale.y, this.rotation, this.skew.x, this.skew.y],\n            (x, y, sx, sy, rot, skx, sky) =>\n                `translate3d(${x.value}px, ${y.value}px, 0px) ` +\n                `scale(${sx.value}, ${sy.value}) ` +\n                `rotate(${rot.value}deg) ` +\n                `skew(${skx.value}deg, ${sky.value}deg)`\n        );\n    }\n\n    // Apply transformation to a point\n    transformPoint(point: Vector2D): Vector2D {\n        // Apply scale\n        let result = multiplyVector2D(point, this.scale);\n\n        // Apply rotation\n        result = rotate2D(result, this.rotation);\n\n        // Apply translation\n        result = addVector2D(result, this.position);\n\n        return result;\n    }\n\n    // Get inverse transformation for converting screen to local coordinates\n    inverseTransformPoint(point: Vector2D): Vector2D {\n        // Inverse translate\n        let result = subtractVector2D(point, this.position);\n\n        // Inverse rotate\n        result = rotate2D(result, operated([this.rotation], (r) => -r.value));\n\n        // Inverse scale\n        result = divideVector2D(result, this.scale);\n\n        return result;\n    }\n\n    // Interpolate between two transformation states\n    interpolateTo(target: ReactiveOrientSystem, progress: number) {\n        const newSystem = new ReactiveOrientSystem();\n\n        newSystem.position = addVector2D(\n            multiplyVector2D(this.position, operated([numberRef(1), numberRef(progress)], (a, p) => a.value - p.value)),\n            multiplyVector2D(target.position, numberRef(progress))\n        );\n\n        newSystem.scale = addVector2D(\n            multiplyVector2D(this.scale, operated([numberRef(1), numberRef(progress)], (a, p) => a.value - p.value)),\n            multiplyVector2D(target.scale, numberRef(progress))\n        );\n\n        newSystem.rotation = operated(\n            [this.rotation, target.rotation, numberRef(progress)],\n            (current, target, p) => current.value + (target.value - current.value) * p.value\n        );\n\n        return newSystem;\n    }\n\n    // Check if transformation is identity (no transformation applied)\n    isIdentity(): boolean {\n        return this.position.x.value === 0 && this.position.y.value === 0 &&\n               this.scale.x.value === 1 && this.scale.y.value === 1 &&\n               this.rotation.value === 0 &&\n               this.skew.x.value === 0 && this.skew.y.value === 0;\n    }\n\n    // Reset to identity transformation\n    reset() {\n        this.position.x.value = 0;\n        this.position.y.value = 0;\n        this.scale.x.value = 1;\n        this.scale.y.value = 1;\n        this.rotation.value = 0;\n        this.skew.x.value = 0;\n        this.skew.y.value = 0;\n    }\n\n    // Apply transformation relative to current state\n    transformBy(translation?: [number, number], scale?: [number, number], rotation?: number) {\n        if (translation) {\n            this.position = addVector2D(this.position, vector2Ref(translation[0], translation[1]));\n        }\n\n        if (scale) {\n            this.scale = multiplyVector2D(this.scale, vector2Ref(scale[0], scale[1]));\n        }\n\n        if (rotation !== undefined) {\n            this.rotation.value += rotation;\n        }\n    }\n}\n\n/**\n * Example 5: Rectangle operations for UI layout and collision detection\n * Enhanced spatial reasoning with reactive rectangles\n */\nexport class ReactiveSpatialManager {\n    private elements: Map<HTMLElement, Rect2D> = new Map();\n    private viewport: Rect2D;\n\n    constructor() {\n        // Reactive viewport bounds\n        this.viewport = createRect2D(0, 0, globalThis.innerWidth, globalThis.innerHeight);\n\n        // Update viewport on resize\n        globalThis.addEventListener('resize', () => {\n            this.viewport.size.x.value = globalThis.innerWidth;\n            this.viewport.size.y.value = globalThis.innerHeight;\n        });\n    }\n\n    // Register an element with reactive bounds\n    registerElement(element: HTMLElement): Rect2D {\n        const rect = createRect2D(0, 0, 0, 0);\n        this.elements.set(element, rect);\n        this.updateElementBounds(element);\n        return rect;\n    }\n\n    // Update element bounds reactively\n    updateElementBounds(element: HTMLElement): void {\n        const rect = this.elements.get(element);\n        if (!rect) return;\n\n        const bounds = element.getBoundingClientRect();\n        rect.position.x.value = bounds.left;\n        rect.position.y.value = bounds.top;\n        rect.size.x.value = bounds.width;\n        rect.size.y.value = bounds.height;\n    }\n\n    // Find elements that intersect with a point\n    getElementsAtPoint(point: Vector2D): HTMLElement[] {\n        const result: HTMLElement[] = [];\n        for (const [element, rect] of this.elements) {\n            if (rectContainsPoint(rect, point).value) {\n                result.push(element);\n            }\n        }\n        return result;\n    }\n\n    // Find elements that intersect with a rectangle\n    getElementsIntersectingRect(queryRect: Rect2D): HTMLElement[] {\n        const result: HTMLElement[] = [];\n        for (const [element, rect] of this.elements) {\n            if (rectIntersects(rect, queryRect).value) {\n                result.push(element);\n            }\n        }\n        return result;\n    }\n\n    // Get elements within viewport\n    getVisibleElements(): HTMLElement[] {\n        return this.getElementsIntersectingRect(this.viewport);\n    }\n\n    // Calculate distance from point to nearest element\n    getDistanceToNearestElement(point: Vector2D): number {\n        let minDistance = Infinity;\n        for (const [element, rect] of this.elements) {\n            const distance = pointToRectDistance(point, rect).value;\n            minDistance = Math.min(minDistance, distance);\n        }\n        return minDistance;\n    }\n\n    // Constrain element to viewport\n    constrainToViewport(element: HTMLElement): void {\n        const rect = this.elements.get(element);\n        if (!rect) return;\n\n        // Clamp position to viewport bounds\n        rect.position.x.value = Math.max(0, Math.min(rect.position.x.value,\n            this.viewport.size.x.value - rect.size.x.value));\n        rect.position.y.value = Math.max(0, Math.min(rect.position.y.value,\n            this.viewport.size.y.value - rect.size.y.value));\n    }\n}\n\n/**\n * Example 6: Enhanced Selection Controller integration\n * Shows how to use the Selection controller with reactive math\n */\nexport class AdvancedSelectionManager {\n    private selection: any; // Would be SelectionController\n    private spatialManager: ReactiveSpatialManager;\n    private selectedElements: Set<HTMLElement> = new Set();\n\n    constructor() {\n        this.spatialManager = new ReactiveSpatialManager();\n        // this.selection = new SelectionController({ /* options */ });\n    }\n\n    // Select elements within selection rectangle\n    selectElementsInRect(selectionRect: Rect2D): void {\n        const intersectingElements = this.spatialManager.getElementsIntersectingRect(selectionRect);\n\n        // Clear previous selection\n        this.selectedElements.forEach(el => el.classList.remove('selected'));\n        this.selectedElements.clear();\n\n        // Add new selection\n        intersectingElements.forEach(el => {\n            el.classList.add('selected');\n            this.selectedElements.add(el);\n        });\n    }\n\n    // Get bounding box of all selected elements\n    getSelectionBounds(): Rect2D | null {\n        if (this.selectedElements.size === 0) return null;\n\n        let union: Rect2D | null = null;\n        for (const element of this.selectedElements) {\n            const elementRect = this.spatialManager.registerElement(element);\n            union = union ? {\n                position: vector2Ref(\n                    Math.min(union.position.x.value, elementRect.position.x.value),\n                    Math.min(union.position.y.value, elementRect.position.y.value)\n                ),\n                size: vector2Ref(\n                    Math.max(union.position.x.value + union.size.x.value,\n                            elementRect.position.x.value + elementRect.size.x.value) -\n                        Math.min(union.position.x.value, elementRect.position.x.value),\n                    Math.max(union.position.y.value + union.size.y.value,\n                            elementRect.position.y.value + elementRect.size.y.value) -\n                        Math.min(union.position.y.value, elementRect.position.y.value)\n                )\n            } : elementRect;\n        }\n\n        return union;\n    }\n\n    // Move all selected elements by offset\n    moveSelection(offset: Vector2D): void {\n        for (const element of this.selectedElements) {\n            const rect = this.spatialManager.registerElement(element);\n            rect.position.x.value += offset.x.value;\n            rect.position.y.value += offset.y.value;\n\n            // Update DOM element\n            element.style.transform = `translate(${rect.position.x.value}px, ${rect.position.y.value}px)`;\n        }\n    }\n\n    // Scale selection around center\n    scaleSelection(scale: number): void {\n        const bounds = this.getSelectionBounds();\n        if (!bounds) return;\n\n        const center = rectCenter(bounds);\n\n        for (const element of this.selectedElements) {\n            const rect = this.spatialManager.registerElement(element);\n\n            // Scale around selection center\n            const toCenter = subtractVector2D(rectCenter(rect), center);\n            const scaledToCenter = multiplyVector2D(toCenter, numberRef(scale));\n            const newCenter = addVector2D(center, scaledToCenter);\n\n            // Update position and size\n            const newSize = multiplyVector2D(rect.size, numberRef(scale));\n            rect.position.x.value = newCenter.x.value - newSize.x.value / 2;\n            rect.position.y.value = newCenter.y.value - newSize.y.value / 2;\n            rect.size.x.value = newSize.x.value;\n            rect.size.y.value = newSize.y.value;\n\n            // Update DOM element\n            element.style.transform = `translate(${rect.position.x.value}px, ${rect.position.y.value}px)`;\n            element.style.width = `${rect.size.x.value}px`;\n            element.style.height = `${rect.size.y.value}px`;\n        }\n    }\n}\n\n/**\n * Example 7: CSS-Integrated Reactive Animation System\n * Demonstrates seamless integration between reactive math and CSS transforms\n */\nexport class ReactiveCSSAnimation {\n    private element: HTMLElement;\n    private transform: any; // Would be ReactiveTransform\n    private position: Vector2D;\n    private scale: Vector2D;\n    private rotation: ReturnType<typeof numberRef>;\n    private progress: ReturnType<typeof numberRef>;\n    private duration: number;\n    private startTime: number;\n\n    constructor(element: HTMLElement, duration = 1000) {\n        this.element = element;\n        this.duration = duration;\n        this.position = vector2Ref(0, 0);\n        this.scale = vector2Ref(1, 1);\n        this.rotation = numberRef(0);\n        this.progress = numberRef(0);\n        this.startTime = 0;\n\n        // Bind reactive transform to CSS\n        this.bindToCSS();\n    }\n\n    private bindToCSS() {\n        // This would use the CSSAdapter utilities\n        // const transform = new ReactiveTransform();\n        // transform.translate(this.position.x, this.position.y);\n        // transform.scale(this.scale.x, this.scale.y);\n        // transform.rotate(this.rotation);\n        // CSSBinder.bindTransform(this.element, transform.value);\n    }\n\n    animateTo(targetPos: Vector2D, targetScale: Vector2D = vector2Ref(1, 1), targetRotation: number = 0) {\n        const startPos = { x: this.position.x.value, y: this.position.y.value };\n        const startScale = { x: this.scale.x.value, y: this.scale.y.value };\n        const startRotation = this.rotation.value;\n\n        this.startTime = performance.now();\n\n        const animate = (currentTime: number) => {\n            const elapsed = currentTime - this.startTime;\n            this.progress.value = Math.min(elapsed / this.duration, 1);\n\n            // Easing function (ease-out cubic)\n            const t = 1 - Math.pow(1 - this.progress.value, 3);\n\n            // Interpolate position\n            this.position.x.value = startPos.x + (targetPos.x.value - startPos.x) * t;\n            this.position.y.value = startPos.y + (targetPos.y.value - startPos.y) * t;\n\n            // Interpolate scale\n            this.scale.x.value = startScale.x + (targetScale.x.value - startScale.x) * t;\n            this.scale.y.value = startScale.y.value + (targetScale.y.value - startScale.y) * t;\n\n            // Interpolate rotation\n            this.rotation.value = startRotation + (targetRotation - startRotation) * t;\n\n            if (this.progress.value < 1) {\n                requestAnimationFrame(animate);\n            }\n        };\n\n        requestAnimationFrame(animate);\n    }\n\n    // Chain animations\n    then(): Promise<void> {\n        return new Promise(resolve => {\n            const checkComplete = () => {\n                if (this.progress.value >= 1) {\n                    resolve();\n                } else {\n                    requestAnimationFrame(checkComplete);\n                }\n            };\n            checkComplete();\n        });\n    }\n}\n\n/**\n * Example 8: Reactive CSS Layout System\n * Shows how reactive math can power responsive layouts\n */\nexport class ReactiveCSSLayout {\n    private container: HTMLElement;\n    private items: HTMLElement[];\n    private layoutType: 'grid' | 'flex' | 'absolute';\n    private spacing: ReturnType<typeof numberRef>;\n    private itemSize: Vector2D;\n\n    constructor(container: HTMLElement, layoutType: 'grid' | 'flex' | 'absolute' = 'grid') {\n        this.container = container;\n        this.layoutType = layoutType;\n        this.items = Array.from(container.children) as HTMLElement[];\n        this.spacing = numberRef(10);\n        this.itemSize = vector2Ref(100, 100);\n\n        this.setupReactiveLayout();\n    }\n\n    private setupReactiveLayout() {\n        // React to container size changes\n        const containerSize = new ReactiveElementSize(this.container);\n\n        // Update layout when container size or spacing changes\n        operated([containerSize.width, containerSize.height, this.spacing], () => {\n            this.updateLayout();\n        });\n    }\n\n    private updateLayout() {\n        const containerRect = this.container.getBoundingClientRect();\n\n        switch (this.layoutType) {\n            case 'grid':\n                this.updateGridLayout(containerRect);\n                break;\n            case 'flex':\n                this.updateFlexLayout(containerRect);\n                break;\n            case 'absolute':\n                this.updateAbsoluteLayout(containerRect);\n                break;\n        }\n    }\n\n    private updateGridLayout(containerRect: DOMRect) {\n        const cols = Math.floor((containerRect.width + this.spacing.value) / (this.itemSize.x.value + this.spacing.value));\n        const rows = Math.ceil(this.items.length / cols);\n\n        this.items.forEach((item, index) => {\n            const row = Math.floor(index / cols);\n            const col = index % cols;\n\n            const x = col * (this.itemSize.x.value + this.spacing.value);\n            const y = row * (this.itemSize.y.value + this.spacing.value);\n\n            item.style.position = 'absolute';\n            item.style.left = `${x}px`;\n            item.style.top = `${y}px`;\n            item.style.width = `${this.itemSize.x.value}px`;\n            item.style.height = `${this.itemSize.y.value}px`;\n        });\n    }\n\n    private updateFlexLayout(containerRect: DOMRect) {\n        // Simple flex layout with reactive spacing\n        const totalSpacing = (this.items.length - 1) * this.spacing.value;\n        const availableWidth = containerRect.width - totalSpacing;\n        const itemWidth = availableWidth / this.items.length;\n\n        this.items.forEach((item, index) => {\n            const x = index * (itemWidth + this.spacing.value);\n\n            item.style.position = 'absolute';\n            item.style.left = `${x}px`;\n            item.style.top = '0px';\n            item.style.width = `${itemWidth}px`;\n            item.style.height = `${this.itemSize.y.value}px`;\n        });\n    }\n\n    private updateAbsoluteLayout(containerRect: DOMRect) {\n        // Position items absolutely with constraints\n        this.items.forEach((item, index) => {\n            // This would use constraint solving with reactive math\n            // For demo, just position in a circle\n            const angle = (index / this.items.length) * Math.PI * 2;\n            const radius = Math.min(containerRect.width, containerRect.height) * 0.3;\n            const centerX = containerRect.width / 2;\n            const centerY = containerRect.height / 2;\n\n            const x = centerX + Math.cos(angle) * radius - this.itemSize.x.value / 2;\n            const y = centerY + Math.sin(angle) * radius - this.itemSize.y.value / 2;\n\n            item.style.position = 'absolute';\n            item.style.left = `${x}px`;\n            item.style.top = `${y}px`;\n            item.style.width = `${this.itemSize.x.value}px`;\n            item.style.height = `${this.itemSize.y.value}px`;\n        });\n    }\n\n    // Reactively update item size\n    setItemSize(width: number, height: number) {\n        this.itemSize.x.value = width;\n        this.itemSize.y.value = height;\n        this.updateLayout();\n    }\n\n    // Reactively update spacing\n    setSpacing(spacing: number) {\n        this.spacing.value = spacing;\n        // Layout updates automatically due to reactive subscription\n    }\n\n    // Add reactive item\n    addItem(item: HTMLElement) {\n        this.items.push(item);\n        this.container.appendChild(item);\n        this.updateLayout();\n    }\n\n    // Remove item reactively\n    removeItem(item: HTMLElement) {\n        const index = this.items.indexOf(item);\n        if (index > -1) {\n            this.items.splice(index, 1);\n            item.remove();\n            this.updateLayout();\n        }\n    }\n}\n\n/**\n * Example 9: Reactive CSS Scroll-based Animations\n * Demonstrates scroll-driven reactive transforms\n */\nexport class ReactiveScrollAnimation {\n    private element: HTMLElement;\n    private scroll: any; // Would be ReactiveScroll\n    private startOffset: number;\n    private endOffset: number;\n    private transform: any; // Would be ReactiveTransform\n\n    constructor(element: HTMLElement, startOffset = 0, endOffset = 1000) {\n        this.element = element;\n        this.startOffset = startOffset;\n        this.endOffset = endOffset;\n\n        // this.scroll = new ReactiveScroll();\n        // this.transform = new ReactiveTransform();\n        this.setupScrollAnimation();\n    }\n\n    private setupScrollAnimation() {\n        // Bind scroll progress to transform\n        // const progress = this.scroll.progress('y');\n        // operated([progress], () => {\n        //     const t = progress.value;\n        //     this.transform.reset();\n        //     this.transform.translate(0, t * 100);\n        //     this.transform.rotate(t * 360);\n        //     this.transform.scale(1 + t * 0.5, 1 + t * 0.5);\n        // });\n        //\n        // // Bind to CSS\n        // CSSBinder.bindTransform(this.element, this.transform.value);\n    }\n\n    // Update scroll range\n    setScrollRange(start: number, end: number) {\n        this.startOffset = start;\n        this.endOffset = end;\n        // Would need to update scroll progress calculation\n    }\n\n    // Add keyframe at specific scroll progress\n    addKeyframe(progress: number, transform: any) {\n        // Would implement keyframe interpolation\n        // this.keyframes.set(progress, transform);\n    }\n}\n\n// Grid examples have been moved to src/math/integration-examples.ts\n// All grid classes are now available from 'fest/lure' or 'fest/lure/src/math'\n","//\"use strict\";\n// jsox.js\n// JSOX JavaScript Object eXchange. Inherits human features of comments\n// and extended formatting from JSON6; adds macros, big number and date\n// support.  See README.md for details.\n//\n// This file is based off of https://github.com/JSON6/  ./lib/json6.js\n// which is based off of https://github.com/d3x0r/sack  ./src/netlib/html5.websocket/json6_parser.c\n//\n\n//const util = require('util'); // debug inspect.\n//import util from 'util'; \n\nconst _JSON=JSON; // in case someone does something like JSON=JSOX; we still need a primitive _JSON for internal stringification\n//if( \"undefined\" === typeof exports )\n//\tvar exports = {};\n\n/**\n * JSOX container for all JSOX methods.\n * @namespace\n */\nconst JSOX = {};\n//const JSOX = (function ( JSOX ) {\nJSOX.JSOX = JSOX;\nJSOX.version = \"1.2.125\";\n\n//const _DEBUG_LL = false;\n//const _DEBUG_PARSING = false;\n//const _DEBUG_STRINGIFY = false;\n//const _DEBUG_PARSING_STACK = false;\n//const _DEBUG_PARSING_NUMBERS = false;\n//const _DEBUG_PARSING_DETAILS = false;\n//const _DEBUG_PARSING_CONTEXT = false;\n//const _DEBUG_REFERENCES = false; // this tracks folling context stack when the components have not been completed.\n//const _DEBUG_WHITESPACE = false; \nconst hasBigInt = (typeof BigInt === \"function\");\nconst testNonIdentifierCharacters = false; // maybe an option to enable; references otherwise unused table.\nconst VALUE_UNDEFINED = -1\nconst VALUE_UNSET = 0\nconst VALUE_NULL = 1\nconst VALUE_TRUE = 2\nconst VALUE_FALSE = 3\nconst VALUE_STRING = 4\nconst VALUE_NUMBER = 5\nconst VALUE_OBJECT = 6\nconst VALUE_NEG_NAN = 7\nconst VALUE_NAN = 8\nconst VALUE_NEG_INFINITY = 9\nconst VALUE_INFINITY = 10\n//const VALUE_DATE = 11  // unused yet; this is actuall a subType of VALUE_NUMBER\nconst VALUE_EMPTY = 12 // [,] makes an array with 'empty item'\nconst VALUE_ARRAY = 13 //\n// internally arrayType = -1 is a normal array\n// arrayType = -2 is a reference array, which, which closed is resolved to\n//     the specified object.\n// arrayType = -3 is a normal array, that has already had this element pushed.\nconst knownArrayTypeNames = [\"ab\",\"u8\",\"cu8\",\"s8\",\"u16\",\"s16\",\"u32\",\"s32\",\"u64\",\"s64\",\"f32\",\"f64\"];\nlet arrayToJSOX = null;\nlet mapToJSOX = null;\nconst knownArrayTypes = [ArrayBuffer\n                        ,Uint8Array,Uint8ClampedArray,Int8Array\n                        ,Uint16Array,Int16Array\n                        ,Uint32Array,Int32Array\n                        ,null,null//,Uint64Array,Int64Array\n                        ,Float32Array,Float64Array];\n// somehow max isn't used... it would be the NEXT available VALUE_XXX value...\n//const VALUE_ARRAY_MAX = VALUE_ARRAY + knownArrayTypes.length + 1; // 1 type is not typed; just an array.\n\nconst WORD_POS_RESET = 0;\nconst WORD_POS_TRUE_1 = 1;\nconst WORD_POS_TRUE_2 = 2;\nconst WORD_POS_TRUE_3 = 3;\nconst WORD_POS_FALSE_1 = 5;\nconst WORD_POS_FALSE_2 = 6;\nconst WORD_POS_FALSE_3 = 7;\nconst WORD_POS_FALSE_4 = 8;\nconst WORD_POS_NULL_1 = 9;\nconst WORD_POS_NULL_2 = 10;\nconst WORD_POS_NULL_3 = 11;\nconst WORD_POS_UNDEFINED_1 = 12;\nconst WORD_POS_UNDEFINED_2 = 13;\nconst WORD_POS_UNDEFINED_3 = 14;\nconst WORD_POS_UNDEFINED_4 = 15;\nconst WORD_POS_UNDEFINED_5 = 16;\nconst WORD_POS_UNDEFINED_6 = 17;\nconst WORD_POS_UNDEFINED_7 = 18;\nconst WORD_POS_UNDEFINED_8 = 19;\nconst WORD_POS_NAN_1 = 20;\nconst WORD_POS_NAN_2 = 21;\nconst WORD_POS_INFINITY_1 = 22;\nconst WORD_POS_INFINITY_2 = 23;\nconst WORD_POS_INFINITY_3 = 24;\nconst WORD_POS_INFINITY_4 = 25;\nconst WORD_POS_INFINITY_5 = 26;\nconst WORD_POS_INFINITY_6 = 27;\nconst WORD_POS_INFINITY_7 = 28;\n\nconst WORD_POS_FIELD = 29;\nconst WORD_POS_AFTER_FIELD = 30;\nconst WORD_POS_END = 31;\nconst WORD_POS_AFTER_FIELD_VALUE = 32;\n//const WORD_POS_BINARY = 32;\n\nconst CONTEXT_UNKNOWN = 0\nconst CONTEXT_IN_ARRAY = 1\nconst CONTEXT_OBJECT_FIELD = 2\nconst CONTEXT_OBJECT_FIELD_VALUE = 3\nconst CONTEXT_CLASS_FIELD = 4\nconst CONTEXT_CLASS_VALUE = 5\nconst CONTEXT_CLASS_FIELD_VALUE = 6\nconst keywords = {\t[\"true\"]:true,[\"false\"]:false,[\"null\"]:null,[\"NaN\"]:NaN,[\"Infinity\"]:Infinity,[\"undefined\"]:undefined }\n\n/**\n * Extend Date type with a nanosecond field.\n * @constructor\n * @param {Date} original_date\n * @param {Number} nanoseconds in milli-seconds of Date ( 0 to 1_000_000 )\n */\nclass DateNS extends Date {\n\tconstructor(a,b ) {\n\t\tsuper(a);\n\t\tthis.ns = b||0;\n\t}\t\n}\n\nJSOX.DateNS = DateNS;\n\nconst contexts = [];\n/**\n * get a context from stack (reuse contexts)\n * @internal\n */\nfunction getContext() {\n\tlet ctx = contexts.pop();\n\tif( !ctx )\n\t\tctx = { context : CONTEXT_UNKNOWN\n\t\t      , current_proto : null\n\t\t      , current_class : null\n\t\t      , current_class_field : 0\n\t\t      , arrayType : -1\n\t\t      , valueType : VALUE_UNSET\n\t\t      , elements : null\n\t\t      };\n\treturn ctx;\n}\n/**\n * return a context to the stack (reuse contexts)\n * @internal\n */\nfunction dropContext(ctx) { \n\tcontexts.push( ctx ) \n}\n\n/**\n * SACK jsox compatibility; hands maps to internal C++ code in other case.\n * @internal\n */\nJSOX.updateContext = function() {\n    //if( toProtoTypes.get( Map.prototype ) ) return;\n    //console.log( \"Do init protoypes for new context objects...\" );\n    //initPrototypes();\n}\n\nconst buffers = [];\nfunction getBuffer() { let buf = buffers.pop(); if( !buf ) buf = { buf:null, n:0 }; else buf.n = 0; return buf; }\nfunction dropBuffer(buf) { buffers.push( buf ); }\n\n/**\n * Provide minimal escapes for a string to be encapsulated as a JSOX string in quotes.\n *\n * @param {string} string \n * @returns {string}\n */\nJSOX.escape = function(string) {\n\tlet n;\n\tlet output = '';\n\tif( !string ) return string;\n\tfor( n = 0; n < string.length; n++ ) {\n\t\tif( ( string[n] == '\"' ) || ( string[n] == '\\\\' ) || ( string[n] == '`' )|| ( string[n] == '\\'' )) {\n\t\t\toutput += '\\\\';\n\t\t}\n\t\toutput += string[n];\n\t}\n\treturn output;\n}\n\n\nlet toProtoTypes = new WeakMap();\nlet toObjectTypes = new Map();\nlet fromProtoTypes = new Map();\nlet commonClasses = [];\n\n/**\n * reset JSOX parser entirely; clears all type mappings\n *\n * @returns {void}\n */\nJSOX.reset = function() {\n\ttoProtoTypes = new WeakMap();\n\ttoObjectTypes = new Map();\n\tfromProtoTypes = new Map();\n\tcommonClasses = [];\t\n}\n\n/**\n * Create a streaming parser.  Add data with parser.write(data); values that\n * are found are dispatched to the callback.\n *\n * @param {(value:any) => void} [cb]\n * @param {(this: any, key: string, value: any) => any} [reviver] \n * @returns {JSOXParser}\n*/\nJSOX.begin = function( cb, reviver ) {\n\n\tconst val = { name : null,\t  // name of this value (if it's contained in an object)\n\t\t\tvalue_type: VALUE_UNSET, // value from above indiciating the type of this value\n\t\t\tstring : '',   // the string value of this value (strings and number types only)\n\t\t\tcontains : null,\n\t\t\tclassName : null,\n\t\t};\n\t\n\tconst pos = { line:1, col:1 };\n\tlet\tn = 0;\n\tlet     str;\n\tlet\tlocalFromProtoTypes = new Map();\n\tlet\tword = WORD_POS_RESET,\n\t\tstatus = true,\n\t\tredefineClass = false,\n\t\tnegative = false,\n\t\tresult = null,\n\t\trootObject = null,\n\t\telements = undefined,\n\t\tcontext_stack = {\n\t\t\tfirst : null,\n\t\t\tlast : null,\n\t\t\tsaved : null,\n\t\t\tpush(node) {\n\t\t\t\t//_DEBUG_PARSING_CONTEXT && console.log( \"pushing context:\", node );\n\t\t\t\tlet recover = this.saved;\n\t\t\t\tif( recover ) { this.saved = recover.next; \n\t\t\t\t\trecover.node = node; \n\t\t\t\t\trecover.next = null; \n\t\t\t\t\trecover.prior = this.last; }\n\t\t\t\telse { recover = { node : node, next : null, prior : this.last }; }\n\t\t\t\tif( !this.last ) this.first = recover;\n\t\t\t\telse this.last.next = recover;\n\t\t\t\tthis.last = recover;\n\t\t\t\tthis.length++;\n\t\t\t},\n\t\t\tpop() {\n\t\t\t\tlet result = this.last;\n\t\t\t\t// through normal usage this line can never be used.\n\t\t\t\t//if( !result ) return null;\n\t\t\t\tif( !(this.last = result.prior ) ) this.first = null;\n\t\t\t\tresult.next = this.saved;\n\t\t\t\tif( this.last ) this.last.next = null;\n\t\t\t\tif( !result.next ) result.first = null;\n\t\t\t\tthis.saved = result;\n\t\t\t\tthis.length--;\n\t\t\t\t//_DEBUG_PARSING_CONTEXT && console.log( \"popping context:\", result.node );\n\t\t\t\treturn result.node;\n\t\t\t},\n\t\t\tlength : 0,\n\t\t\t/*dump() {  // //_DEBUG_CONTEXT_STACK\n\t\t\t\tconsole.log( \"STACK LENGTH:\", this.length );\n\t\t\t\tlet cur= this.first;\n\t\t\t\tlet level = 0;\n\t\t\t\twhile( cur ) {\n\t\t\t\t\tconsole.log( \"Context:\", level, cur.node );\n\t\t\t\t\tlevel++;\n\t\t\t\t\tcur = cur.next;\n\t\t\t\t}\n\t\t\t}*/\n\t\t},\n\t\tclasses = [],  // class templates that have been defined.\n\t\tprotoTypes = {},\n\t\tcurrent_proto = null,  // the current class being defined or being referenced.\n\t\tcurrent_class = null,  // the current class being defined or being referenced.\n\t\tcurrent_class_field = 0,\n\t\tarrayType = -1,  // the current class being defined or being referenced.\n\t\tparse_context = CONTEXT_UNKNOWN,\n\t\tcomment = 0,\n\t\tfromHex = false,\n\t\tdecimal = false,\n\t\texponent = false,\n\t\texponent_sign = false,\n\t\texponent_digit = false,\n\t\tinQueue = {\n\t\t\tfirst : null,\n\t\t\tlast : null,\n\t\t\tsaved : null,\n\t\t\tpush(node) {\n\t\t\t\tlet recover = this.saved;\n\t\t\t\tif( recover ) { this.saved = recover.next; recover.node = node; recover.next = null; recover.prior = this.last; }\n\t\t\t\telse { recover = { node : node, next : null, prior : this.last }; }\n\t\t\t\tif( !this.last ) this.first = recover;\n\t\t\t\telse this.last.next = recover;\n\t\t\t\tthis.last = recover;\n\t\t\t},\n\t\t\tshift() {\n\t\t\t\tlet result = this.first;\n\t\t\t\tif( !result ) return null;\n\t\t\t\tif( !(this.first = result.next ) ) this.last = null;\n\t\t\t\tresult.next = this.saved; this.saved = result;\n\t\t\t\treturn result.node;\n\t\t\t},\n\t\t\tunshift(node) {\n\t\t\t\tlet recover = this.saved;\n\t\t\t\t// this is always true in this usage.\n\t\t\t\t//if( recover ) { \n\t\t\t\t\tthis.saved = recover.next; recover.node = node; recover.next = this.first; recover.prior = null; \n\t\t\t\t//}\n\t\t\t\t//else { recover = { node : node, next : this.first, prior : null }; }\n\t\t\t\tif( !this.first ) this.last = recover;\n\t\t\t\tthis.first = recover;\n\t\t\t}\n\t\t},\n\t\tgatheringStringFirstChar = null,\n\t\tgatheringString = false,\n\t\tgatheringNumber = false,\n\t\tstringEscape = false,\n\t\tcr_escaped = false,\n\t\tunicodeWide = false,\n\t\tstringUnicode = false,\n\t\tstringHex = false,\n\t\thex_char = 0,\n\t\thex_char_len = 0,\n\t\tcompleted = false,\n\t\tdate_format = false,\n\t\tisBigInt = false\n\t\t;\n\n\tfunction throwEndError( leader ) {\n\t\tthrow new Error( `${leader} at ${n} [${pos.line}:${pos.col}]`);\n\t}\n\n\treturn {\n\t\t/**\n\t\t * Define a class that can be used to deserialize objects of this type.\n\t\t * @param {string} prototypeName \n\t\t * @param {new ():any} o \n\t\t * @param {(any)=>any} f \n\t\t */\n\t\tfromJSOX( prototypeName, o, f ) {\n\t\t\tif( localFromProtoTypes.get(prototypeName) ) throw new Error( \"Existing fromJSOX has been registered for prototype\" );\n\t\t\tfunction privateProto() { }\n\t\t\tif( !o ) o = privateProto;\n\t\t\tif( o && !(\"constructor\" in o )){\n\t\t\t\tthrow new Error( \"Please pass a prototype like thing...\");\n\t\t\t}\n\t\t\tlocalFromProtoTypes.set( prototypeName, { protoCon:o.prototype.constructor, cb:f } );\n\t\t},\n\t\tregisterFromJSOX( prototypeName, o/*, f*/ ) {\n\t\t\tthrow new Error( \"registerFromJSOX is deprecated, please update to use fromJSOX instead:\" + prototypeName + o.toString() );\n\t\t},\n\t\tfinalError() {\n\t\t\tif( comment !== 0 ) { // most of the time everything's good.\n\t\t\t\tif( comment === 1 ) throwEndError( \"Comment began at end of document\" );\n\t\t\t\tif( comment === 2 ) /*console.log( \"Warning: '//' comment without end of line ended document\" )*/;\n\t\t\t\tif( comment === 3 ) throwEndError( \"Open comment '/*' is missing close at end of document\" );\n\t\t\t\tif( comment === 4 ) throwEndError( \"Incomplete '/* *' close at end of document\" );\n\t\t\t}\n\t\t\tif( gatheringString ) throwEndError( \"Incomplete string\" );\n\t\t},\n\t\tvalue() {\n\t\t\tthis.finalError();\n\t\t\tlet r = result;\n\t\t\tresult = undefined;\n\t\t\treturn r;\n\t\t},\n\t\t/**\n\t\t * Reset the parser to a blank state.\n\t\t */\n\t\treset() {\n\t\t\tword = WORD_POS_RESET;\n\t\t\tstatus = true;\n\t\t\tif( inQueue.last ) inQueue.last.next = inQueue.save;\n\t\t\tinQueue.save = inQueue.first;\n\t\t\tinQueue.first = inQueue.last = null;\n\t\t\tif( context_stack.last ) context_stack.last.next = context_stack.save;\n\t\t\tcontext_stack.length = 0;\n\t\t\tcontext_stack.save = inQueue.first;\n\t\t\tcontext_stack.first = context_stack.last = null;//= [];\n\t\t\telements = undefined;\n\t\t\tparse_context = CONTEXT_UNKNOWN;\n\t\t\tclasses = [];\n\t\t\tprotoTypes = {};\n\t\t\tcurrent_proto = null;\n\t\t\tcurrent_class = null;\n\t\t\tcurrent_class_field = 0;\n\t\t\tval.value_type = VALUE_UNSET;\n\t\t\tval.name = null;\n\t\t\tval.string = '';\n\t\t\tval.className = null;\n\t\t\tpos.line = 1;\n\t\t\tpos.col = 1;\n\t\t\tnegative = false;\n\t\t\tcomment = 0;\n\t\t\tcompleted = false;\n\t\t\tgatheringString = false;\n\t\t\tstringEscape = false;  // string stringEscape intro\n\t\t\tcr_escaped = false;   // carraige return escaped\n\t\t\tdate_format = false;\n\t\t\t//stringUnicode = false;  // reading \\u\n\t\t\t//unicodeWide = false;  // reading \\u{} in string\n\t\t\t//stringHex = false;  // reading \\x in string\n\t\t},\n\t\tusePrototype(className,protoType ) { protoTypes[className] = protoType; },\n\t\t/**\n\t\t * Add input to the parser to get parsed.\n\t\t * @param {string} msg \n\t\t */\n\t\twrite(msg) {\n\t\t\tlet retcode;\n\t\t\tif (typeof msg !== \"string\" && typeof msg !== \"undefined\") msg = String(msg);\n\t\t\tif( !status ) throw new Error( \"Parser is still in an error state, please reset before resuming\" );\n\t\t\tfor( retcode = this._write(msg,false); retcode > 0; retcode = this._write() ) {\n\t\t\t\tif( typeof reviver === 'function' ) (function walk(holder, key) {\n\t\t\t\t\tlet k, v, value = holder[key];\n\t\t\t\t\tif (value && typeof value === 'object') {\n\t\t\t\t\t\tfor (k in value) {\n\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(value, k)) {\n\t\t\t\t\t\t\t\tv = walk(value, k);\n\t\t\t\t\t\t\t\tif (v !== undefined) {\n\t\t\t\t\t\t\t\t\tvalue[k] = v;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdelete value[k];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn reviver.call(holder, key, value);\n\t\t\t\t}({'': result}, ''));\n\t\t\t\tresult = cb( result );\n\n\t\t\t\tif( retcode < 2 )\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Parse a string and return the result.\n\t\t * @template T\n\t\t * @param {string} msg\n\t\t * @param {(key:string,value:any)=>any} [reviver]\n\t\t * @returns {T}\n\t\t */\n\t\tparse(msg,reviver) {\n\t\t\tif (typeof msg !== \"string\") msg = String(msg);\n\t\t\tthis.reset();\n\t\t\tconst writeResult = this._write( msg, true );\n\t\t\tif( writeResult > 0 ) {\n\t\t\t\tif( writeResult > 1 ){\n\t\t\t\t\t// probably a carriage return.\n\t\t\t\t\t//console.log( \"Extra data at end of message\");\n\t\t\t\t}\n\t\t\t\tlet result = this.value();\n\t\t\t\tif( ( \"undefined\" === typeof result ) && writeResult > 1 ){\n\t\t\t\t\tthrow new Error( \"Pending value could not complete\");\n\t\t\t\t}\n\t                \n\t\t\t\tresult = typeof reviver === 'function' ? (function walk(holder, key) {\n\t\t\t\t\tlet k, v, value = holder[key];\n\t\t\t\t\tif (value && typeof value === 'object') {\n\t\t\t\t\t\tfor (k in value) {\n\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(value, k)) {\n\t\t\t\t\t\t\t\tv = walk(value, k);\n\t\t\t\t\t\t\t\tif (v !== undefined) {\n\t\t\t\t\t\t\t\t\tvalue[k] = v;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdelete value[k];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn reviver.call(holder, key, value);\n\t\t\t\t}({'': result}, '')) : result;\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tthis.finalError();\n\t\t\treturn undefined;\n\n\t\t\t\n\t\t\treturn this.write(msg );\n\t\t},\n\t\t_write(msg,complete_at_end) {\n\t\t\tlet cInt;\n\t\t\tlet input;\n\t\t\tlet buf;\n\t\t\tlet retval = 0;\n\t\t\tfunction throwError( leader, c ) {\n\t\t\t\tthrow new Error( `${leader} '${String.fromCodePoint( c )}' unexpected at ${n} (near '${buf.substr(n>4?(n-4):0,n>4?3:(n-1))}[${String.fromCodePoint( c )}]${buf.substr(n, 10)}') [${pos.line}:${pos.col}]`);\n\t\t\t}\n\n\t\t\tfunction RESET_VAL()  {\n\t\t\t\tval.value_type = VALUE_UNSET;\n\t\t\t\tval.string = '';\n\t\t\t\tval.contains = null;\n\t\t\t\t//val.className = null;\n\t\t\t}\n\n\t\t\tfunction convertValue() {\n\t\t\t\tlet fp = null;\n\t\t\t\t//_DEBUG_PARSING && console.log( \"CONVERT VAL:\", val );\n\t\t\t\tswitch( val.value_type ){\n\t\t\t\tcase VALUE_NUMBER:\n\t\t\t\t\t//1502678337047\n\t\t\t\t\tif( ( ( val.string.length > 13 ) || ( val.string.length == 13 && val[0]>'2' ) )\n\t\t\t\t\t    && !date_format && !exponent_digit && !exponent_sign && !decimal ) {\n\t\t\t\t\t\tisBigInt = true;\n\t\t\t\t\t}\n\t\t\t\t\tif( isBigInt ) { if( hasBigInt ) return BigInt(val.string); else throw new Error( \"no builtin BigInt()\", 0 ) }\n\t\t\t\t\tif( date_format ) { \n\t\t\t\t\t\tconst r = val.string.match(/\\.(\\d\\d\\d\\d*)/ );\n\t\t\t\t\t\tconst frac = ( r )?( r )[1]:null;\n\t\t\t\t\t\tif( !frac || (frac.length < 4) ) {\n\t\t\t\t\t\t\tconst r = new Date( val.string ); \n\t\t\t\t\t\t\tif(isNaN(r.getTime())) throwError( \"Bad Date format\", cInt ); return r;  \n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet ns = frac.substr( 3 );\n\t\t\t\t\t\t\twhile( ns.length < 6 ) ns = ns+'0';\n\t\t\t\t\t\t\tconst r = new DateNS( val.string, Number(ns ) ); \n\t\t\t\t\t\t\tif(isNaN(r.getTime())) throwError( \"Bad DateNS format\" + r+r.getTime(), cInt ); return r;  \n\t\t\t\t\t\t}\n\t\t\t\t\t\t//const r = new Date( val.string ); if(isNaN(r.getTime())) throwError( \"Bad number format\", cInt ); return r;  \n\t\t\t\t\t}\n\t\t\t\t\treturn  (negative?-1:1) * Number( val.string );\n\t\t\t\tcase VALUE_STRING:\n\t\t\t\t\tif( val.className ) {\n\t\t\t\t\t\tfp = localFromProtoTypes.get( val.className );\n\t\t\t\t\t\tif( !fp )\n\t\t\t\t\t\t\tfp = fromProtoTypes.get( val.className );\n\t\t\t\t\t\tif( fp && fp.cb ) {\n\t\t\t\t\t\t\tval.className = null;\n\t\t\t\t\t\t\treturn fp.cb.call( val.string );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// '[object Object]' throws this error.\n\t\t\t\t\t\t\tthrow new Error( \"Double string error, no constructor for: new \" + val.className + \"(\"+val.string+\")\" )\n\t\t\t\t\t\t}\t\n\t\t\t\t\t}\n\t\t\t\t\treturn val.string;\n\t\t\t\tcase VALUE_TRUE:\n\t\t\t\t\treturn true;\n\t\t\t\tcase VALUE_FALSE:\n\t\t\t\t\treturn false;\n\t\t\t\tcase VALUE_NEG_NAN:\n\t\t\t\t\treturn -NaN;\n\t\t\t\tcase VALUE_NAN:\n\t\t\t\t\treturn NaN;\n\t\t\t\tcase VALUE_NEG_INFINITY:\n\t\t\t\t\treturn -Infinity;\n\t\t\t\tcase VALUE_INFINITY:\n\t\t\t\t\treturn Infinity;\n\t\t\t\tcase VALUE_NULL:\n\t\t\t\t\treturn null;\n\t\t\t\tcase VALUE_UNDEFINED:\n\t\t\t\t\treturn undefined;\n\t\t\t\tcase VALUE_EMPTY:\n\t\t\t\t\treturn undefined;\n\t\t\t\tcase VALUE_OBJECT:\n\t\t\t\t\tif( val.className ) { \n\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"class reviver\" );\n\t\t\t\t\t\tfp = localFromProtoTypes.get( val.className );\n\t\t\t\t\t\tif( !fp )\n\t\t\t\t\t\t\tfp = fromProtoTypes.get( val.className );\n\t\t\t\t\t\tval.className = null;\n\t\t\t\t\t\tif( fp && fp.cb ) return val.contains = fp.cb.call( val.contains ); \n\t\t\t\t\t}\n\t\t\t\t\treturn val.contains;\n\t\t\t\tcase VALUE_ARRAY:\n\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"Array conversion:\", arrayType, val.contains );\n\t\t\t\t\tif( arrayType >= 0 ) {\n\t\t\t\t\t\tlet ab;\n\t\t\t\t\t\tif( val.contains.length )\n\t\t\t\t\t\t\tab = DecodeBase64( val.contains[0] )\n\t\t\t\t\t\telse ab = DecodeBase64( val.string );\n\t\t\t\t\t\tif( arrayType === 0 ) {\n\t\t\t\t\t\t\tarrayType = -1;\n\t\t\t\t\t\t\treturn ab;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst newab = new knownArrayTypes[arrayType]( ab );\n\t\t\t\t\t\t\tarrayType = -1;\n\t\t\t\t\t\t\treturn newab;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if( arrayType === -2 ) {\n\t\t\t\t\t\tlet obj = rootObject;\n\t\t\t\t\t\t//let ctx = context_stack.first;\n\t\t\t\t\t\tlet lvl;\n\t\t\t\t\t\t//console.log( \"Resolving Reference...\", context_stack.length );\n\t\t\t\t\t\t//console.log( \"--elements and array\", elements );\n\t\t\t\t\t\t\n\t\t\t\t\t\tconst pathlen = val.contains.length;\n\t\t\t\t\t\tfor( lvl = 0; lvl < pathlen; lvl++ ) {\n\t\t\t\t\t\t\tconst idx = val.contains[lvl];\n\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Looking up idx:\", idx, \"of\", val.contains, \"in\", obj );\n\t\t\t\t\t\t\tlet nextObj = obj[idx];\n\n\t\t\t\t\t\t\t//_DEBUG_REFERENCES  && console.log( \"Resolve path:\", lvl, idx,\"in\", obj, context_stack.length, val.contains.toString() );\n\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"NEXT OBJECT:\", nextObj );\n\t\t\t\t\t\t\tif( !nextObj ) {\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlet ctx = context_stack.first;\n\t\t\t\t\t\t\t\t\tlet p = 0;\n\t\t\t\t\t\t\t\t\t//_DEBUG_PARSING_CONTEXT && context_stack.dump();\n\t\t\t\t\t\t\t\t\twhile( ctx && p < pathlen && p < context_stack.length ) {\n\t\t\t\t\t\t\t\t\t\tconst thisKey = val.contains[p];\n\t\t\t\t\t\t\t\t\t\tif( !ctx.next || thisKey !== ctx.next.node.name ) {\n\t\t\t\t\t\t\t\t\t\t\tbreak;  // can't follow context stack any further.... \n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Checking context:\", obj, \"p=\",p, \"key=\",thisKey, \"ctx(and .next)=\",util.inspect(ctx));\n\t\t\t\t\t\t\t\t\t\t//console.dir(ctx, { depth: null })\n\t\t\t\t\t\t\t\t\t\tif( ctx.next ) {\n\t\t\t\t\t\t\t\t\t\t\tif( \"number\" === typeof thisKey ) {\n\t\t\t\t\t\t\t\t\t\t\t\tconst actualObject = ctx.next.node.elements;\n\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Number in index... tracing stack...\", obj, actualObject, ctx && ctx.next && ctx.next.next && ctx.next.next.node );\n\n\t\t\t\t\t\t\t\t\t\t\t\tif( actualObject && thisKey >= actualObject.length ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"AT \", p, actualObject.length, val.contains.length );\n\t\t\t\t\t\t\t\t\t\t\t\t\tif( p === (context_stack.length-1) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log( \"This is actually at the current object so use that\", p, val.contains, elements );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnextObj = elements;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tp++;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tctx = ctx.next;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"is next... \", thisKey, actualObject.length )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif( ctx.next.next && thisKey === actualObject.length ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"is next... \")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnextObj = ctx.next.next.node.elements;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tctx = ctx.next;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tp++;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobj = nextObj;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"FAILING HERE\", ctx.next, ctx.next.next, elements, obj );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Nothing after, so this is just THIS?\" );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnextObj = elements;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tp++; // make sure to exit.\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//obj = next\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"field AT index\", p,\"of\", val.contains.length );\n\t\t\t\t\t\t\t\t\t\t\t\tif( thisKey !== ctx.next.node.name ){\n\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Expect:\", thisKey, ctx.next.node.name, ctx.next.node.elements );\n\t\t\t\t\t\t\t\t\t\t\t\t\tnextObj = ( ctx.next.node.elements[thisKey] );\n\t\t\t\t\t\t\t\t\t\t\t\t\t//throw new Error( \"Unexpected path-context relationship\" );\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\tlvl = p;\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Updating next object(NEW) to\", ctx.next.node, elements, thisKey)\n\t\t\t\t\t\t\t\t\t\t\t\t\tif( ctx.next.next )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnextObj = ctx.next.next.node.elements;\n\t\t\t\t\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Nothing after, so this is just THIS?\" );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnextObj = elements;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"using named element from\", ctx.next.node.elements, \"=\", nextObj )\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t//if( //_DEBUG_REFERENCES )  {\n\t\t\t\t\t\t\t\t\t\t\t//\tconst a = ctx.next.node.elements;\n\t\t\t\t\t\t\t\t\t\t\t//\tconsole.log( \"Stack Dump:\"\n\t\t\t\t\t\t\t\t\t\t\t//\t\t, a?a.length:a\n\t\t\t\t\t\t\t\t\t\t\t//\t\t, ctx.next.node.name\n\t\t\t\t\t\t\t\t\t\t\t//\t\t, thisKey\n\t\t\t\t\t\t\t\t\t\t\t//\t\t);\n\t\t\t\t\t\t\t\t\t\t\t//}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tnextObj = nextObj[thisKey];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Doing next context??\", p, context_stack.length, val.contains.length );\n\t\t\t\t\t\t\t\t\t\tctx = ctx.next;\n\t\t\t\t\t\t\t\t\t\tp++;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Done with context stack...level\", lvl, \"p\", p );\n\t\t\t\t\t\t\t\t\tif( p < pathlen )\n\t\t\t\t\t\t\t\t\t\tlvl = p-1;\n\t\t\t\t\t\t\t\t\telse lvl = p;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"End of processing level:\", lvl );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif( (\"object\" === typeof nextObj ) && !nextObj ) {\n\t\t\t\t\t\t\t\tthrow new Error( \"Path did not resolve properly:\" +  val.contains + \" at \" + idx + '(' + lvl + ')' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tobj = nextObj;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"Resulting resolved object:\", obj );\n\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"SETTING MODE TO -3 (resolved -2)\" );\n\t\t\t\t\t\tarrayType = -3;\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t}\n\t\t\t\t\tif( val.className ) { \n\t\t\t\t\t\tfp = localFromProtoTypes.get( val.className );\n\t\t\t\t\t\tif( !fp )\n\t\t\t\t\t\t\tfp = fromProtoTypes.get( val.className );\n\t\t\t\t\t\tval.className = null; \n\t\t\t\t\t\tif( fp && fp.cb ) return fp.cb.call( val.contains ); \n\t\t\t\t\t}\n\t\t\t\t\treturn val.contains;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log( \"Unhandled value conversion.\", val );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction arrayPush() {\n\t\t\t\t//_DEBUG_PARSING && console.log( \"PUSH TO ARRAY:\", val );\n\t\t\t\tif( arrayType == -3 )  {\n\t\t\t\t\t//_DEBUG_PARSING && console.log(\" Array type -3?\", val.value_type, elements );\n\t\t\t\t\tif( val.value_type === VALUE_OBJECT ) {\n\t\t\t\t\t\telements.push( val.contains );\n\t\t\t\t\t}\n\t\t\t\t\tarrayType = -1; // next one should be allowed?\n\t\t\t\t\treturn;\n\t\t\t\t} //else\n\t\t\t\t//\tconsole.log( \"Finally a push that's not already pushed!\", );\n\t\t\t\tswitch( val.value_type ){\n\t\t\t\tcase VALUE_EMPTY:\n\t\t\t\t\telements.push( undefined );\n\t\t\t\t\tdelete elements[elements.length-1];\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\telements.push( convertValue() );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tRESET_VAL();\n\t\t\t}\n\n\t\t\tfunction objectPush() {\n\t\t\t\tif( arrayType === -3 && val.value_type === VALUE_ARRAY ) {\n\t\t\t\t\t//console.log( \"Array has already been set in object.\" );\n\t\t\t\t\t//elements[val.name] = val.contains;\n\t\t\t\t\tRESET_VAL();\n\t\t\t\t\tarrayType = -1;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif( val.value_type === VALUE_EMPTY ) return;\n\t\t\t\tif( !val.name && current_class ) {\n\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"A Stepping current class field:\", current_class_field, val.name );\n\t\t\t\t\tval.name = current_class.fields[current_class_field++];\n\t\t\t\t}\n\t\t\t\tlet value = convertValue();\n\n\t\t\t\tif( current_proto && current_proto.protoDef && current_proto.protoDef.cb ) {\n\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"SOMETHING SHOULD AHVE BEEN REPLACED HERE??\", current_proto );\n\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"(need to do fromprototoypes here) object:\", val, value );\n\t\t\t\t\tvalue = current_proto.protoDef.cb.call( elements, val.name, value );\n\t\t\t\t\tif( value ) elements[val.name] = value;\n\t\t\t\t\t//elements = new current_proto.protoCon( elements );\n\t\t\t\t}else {\n\t\t\t\t        //_DEBUG_PARSING_DETAILS && console.log( \"Default no special class reviver\", val.name, value );\n\t\t\t\t\telements[val.name] = value;\n\t\t\t\t}\n\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"Updated value:\", current_class_field, val.name, elements[val.name] );\n\t\t\t\n\t\t\t\t//_DEBUG_PARSING && console.log( \"+++ Added object field:\", val.name, elements, elements[val.name], rootObject );\n\t\t\t\tRESET_VAL();\n\t\t\t}\n\n\t\t\tfunction recoverIdent(cInt) {\n\t\t\t\t//_DEBUG_PARSING&&console.log( \"Recover Ident char:\", cInt, val, String.fromCodePoint(cInt), \"word:\", word );\n\t\t\t\tif( word !== WORD_POS_RESET ) {\n\t\t\t\t\tif( negative ) { \n\t\t\t\t\t\t//val.string += \"-\"; negative = false; \n\t\t\t\t\t\tthrowError( \"Negative outside of quotes, being converted to a string (would lose count of leading '-' characters)\", cInt );\n\t\t\t\t\t}\n\t\t\t\t\tswitch( word ) {\n\t\t\t\t\tcase WORD_POS_END:\n\t\t\t\t\t\tswitch( val.value_type ) {\n\t\t\t\t\t\tcase VALUE_TRUE:  val.string += \"true\"; break\n\t\t\t\t\t\tcase VALUE_FALSE:  val.string += \"false\"; break\n\t\t\t\t\t\tcase VALUE_NULL:  val.string += \"null\"; break\n\t\t\t\t\t\tcase VALUE_INFINITY:  val.string += \"Infinity\"; break\n\t\t\t\t\t\tcase VALUE_NEG_INFINITY:  val.string += \"-Infinity\"; throwError( \"Negative outside of quotes, being converted to a string\", cInt ); break\n\t\t\t\t\t\tcase VALUE_NAN:  val.string += \"NaN\"; break\n\t\t\t\t\t\tcase VALUE_NEG_NAN:  val.string += \"-NaN\"; throwError( \"Negative outside of quotes, being converted to a string\", cInt ); break\n\t\t\t\t\t\tcase VALUE_UNDEFINED:  val.string += \"undefined\"; break\n\t\t\t\t\t\tcase VALUE_STRING: break;\n\t\t\t\t\t\tcase VALUE_UNSET: break;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.log( \"Value of type \" + val.value_type + \" is not restored...\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase WORD_POS_TRUE_1 :  val.string += \"t\"; break;\n\t\t\t\t\tcase WORD_POS_TRUE_2 :  val.string += \"tr\"; break;\n\t\t\t\t\tcase WORD_POS_TRUE_3 : val.string += \"tru\"; break;\n\t\t\t\t\tcase WORD_POS_FALSE_1 : val.string += \"f\"; break;\n\t\t\t\t\tcase WORD_POS_FALSE_2 : val.string += \"fa\"; break;\n\t\t\t\t\tcase WORD_POS_FALSE_3 : val.string += \"fal\"; break;\n\t\t\t\t\tcase WORD_POS_FALSE_4 : val.string += \"fals\"; break;\n\t\t\t\t\tcase WORD_POS_NULL_1 : val.string += \"n\"; break;\n\t\t\t\t\tcase WORD_POS_NULL_2 : val.string += \"nu\"; break;\n\t\t\t\t\tcase WORD_POS_NULL_3 : val.string += \"nul\"; break;\n\t\t\t\t\tcase WORD_POS_UNDEFINED_1 : val.string += \"u\"; break;\n\t\t\t\t\tcase WORD_POS_UNDEFINED_2 : val.string += \"un\"; break;\n\t\t\t\t\tcase WORD_POS_UNDEFINED_3 : val.string += \"und\"; break;\n\t\t\t\t\tcase WORD_POS_UNDEFINED_4 : val.string += \"unde\"; break;\n\t\t\t\t\tcase WORD_POS_UNDEFINED_5 : val.string += \"undef\"; break;\n\t\t\t\t\tcase WORD_POS_UNDEFINED_6 : val.string += \"undefi\"; break;\n\t\t\t\t\tcase WORD_POS_UNDEFINED_7 : val.string += \"undefin\"; break;\n\t\t\t\t\tcase WORD_POS_UNDEFINED_8 : val.string += \"undefine\"; break;\n\t\t\t\t\tcase WORD_POS_NAN_1 : val.string += \"N\"; break;\n\t\t\t\t\tcase WORD_POS_NAN_2 : val.string += \"Na\"; break;\n\t\t\t\t\tcase WORD_POS_INFINITY_1 : val.string += \"I\"; break;\n\t\t\t\t\tcase WORD_POS_INFINITY_2 : val.string += \"In\"; break;\n\t\t\t\t\tcase WORD_POS_INFINITY_3 : val.string += \"Inf\"; break;\n\t\t\t\t\tcase WORD_POS_INFINITY_4 : val.string += \"Infi\"; break;\n\t\t\t\t\tcase WORD_POS_INFINITY_5 : val.string += \"Infin\"; break;\n\t\t\t\t\tcase WORD_POS_INFINITY_6 : val.string += \"Infini\"; break;\n\t\t\t\t\tcase WORD_POS_INFINITY_7 : val.string += \"Infinit\"; break;\n\t\t\t\t\tcase WORD_POS_RESET : break;\n\t\t\t\t\tcase WORD_POS_FIELD : break;\n\t\t\t\t\tcase WORD_POS_AFTER_FIELD:\n\t\t\t\t\t    //throwError( \"String-keyword recovery fail (after whitespace)\", cInt);\n\t\t\t\t\t    break;\n\t\t\t\t\tcase WORD_POS_AFTER_FIELD_VALUE:\n\t\t\t\t\t    throwError( \"String-keyword recovery fail (after whitespace)\", cInt );\n\t\t\t\t\t    break;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t//console.log( \"Word context: \" + word + \" unhandled\" );\n\t\t\t\t\t}\n\t\t\t\t\tval.value_type = VALUE_STRING;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\tif( word < WORD_POS_FIELD)\n\t\t\t\t\t    word = WORD_POS_END;\n\t\t\t\t} else {\n\t\t\t\t\tword = WORD_POS_END;\n\t\t\t\t\t//if( val.value_type === VALUE_UNSET && val.string.length )\n\t\t\t\t\t\tval.value_type = VALUE_STRING\n\t\t\t\t}\n\t\t\t\tif( cInt == 123/*'{'*/ )\n\t\t\t\t\topenObject();\n\t\t\t\telse if( cInt == 91/*'['*/ )\n\t\t\t\t\topenArray();\n\t\t\t\telse if( cInt == 44/*','*/ ) {\n\t\t\t\t\t// comma separates the string, it gets consumed.\n\t\t\t\t} else {\n\t\t\t\t\t// ignore white space.\n\t\t\t\t\tif( cInt == 32/*' '*/ || cInt == 13 || cInt == 10 || cInt == 9 || cInt == 0xFEFF || cInt == 0x2028 || cInt == 0x2029 ) {\n\t\t\t\t\t\t//_DEBUG_WHITESPACE && console.log( \"IGNORE WHITESPACE\" );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif( cInt == 44/*','*/ || cInt == 125/*'}'*/ || cInt == 93/*']'*/ || cInt == 58/*':'*/ )\n\t\t\t\t\t\t;// just don't add these, they are the next token that caused a revive to happen\n\t\t\t\t\telse //if( typeof cInt === \"number\")\n\t\t\t\t\t\tval.string += str;\n\t\t\t\t}\n\t\t\t\t//console.log( \"VAL STRING IS:\", val.string, str );\n\t\t\t}\n\n\t\t\t// gather a string from an input stream; start_c is the opening quote to find a related close quote.\n\t\t\tfunction gatherString( start_c ) {\n\t\t\t\tlet retval = 0;\n\t\t\t\twhile( retval == 0 && ( n < buf.length ) ) {\n\t\t\t\t\tstr = buf.charAt(n);\n\t\t\t\t\tlet cInt = buf.codePointAt(n++);\n\t\t\t\t\tif( cInt >= 0x10000 ) { str += buf.charAt(n); n++; }\n\t\t\t\t\t//console.log( \"gathering....\", stringEscape, str, cInt, unicodeWide, stringHex, stringUnicode, hex_char_len );\n\t\t\t\t\tpos.col++;\n\t\t\t\t\tif( cInt == start_c ) { //( cInt == 34/*'\"'*/ ) || ( cInt == 39/*'\\''*/ ) || ( cInt == 96/*'`'*/ ) )\n\t\t\t\t\t\tif( stringEscape ) { \n\t\t\t\t\t\t\tif( stringHex )\n\t\t\t\t\t\t\t\tthrowError( \"Incomplete hexidecimal sequence\", cInt );\n\t\t\t\t\t\t\telse if( stringUnicode )\n\t\t\t\t\t\t\t\tthrowError( \"Incomplete long unicode sequence\", cInt );\n\t\t\t\t\t\t\telse if( unicodeWide )\n\t\t\t\t\t\t\t\tthrowError( \"Incomplete unicode sequence\", cInt );\n\t\t\t\t\t\t\tif( cr_escaped ) {\n\t\t\t\t\t\t\t\tcr_escaped = false;\n\t\t\t\t\t\t\t\tretval = 1; // complete string, escaped \\r\n\t\t\t\t\t\t\t} else val.string += str;\n\t\t\t\t\t\t\tstringEscape = false; }\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// quote matches, and is not processing an escape sequence.\n\t\t\t\t\t\t\tretval = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telse if( stringEscape ) {\n\t\t\t\t\t\tif( unicodeWide ) {\n\t\t\t\t\t\t\tif( cInt == 125/*'}'*/ ) {\n\t\t\t\t\t\t\t\tval.string += String.fromCodePoint( hex_char );\n\t\t\t\t\t\t\t\tunicodeWide = false;\n\t\t\t\t\t\t\t\tstringUnicode = false;\n\t\t\t\t\t\t\t\tstringEscape = false;\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thex_char *= 16;\n\t\t\t\t\t\t\tif( cInt >= 48/*'0'*/ && cInt <= 57/*'9'*/ )      hex_char += cInt - 0x30;\n\t\t\t\t\t\t\telse if( cInt >= 65/*'A'*/ && cInt <= 70/*'F'*/ ) hex_char += ( cInt - 65 ) + 10;\n\t\t\t\t\t\t\telse if( cInt >= 97/*'a'*/ && cInt <= 102/*'f'*/ ) hex_char += ( cInt - 97 ) + 10;\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tthrowError( \"(escaped character, parsing hex of \\\\u)\", cInt );\n\t\t\t\t\t\t\t\tretval = -1;\n\t\t\t\t\t\t\t\tunicodeWide = false;\n\t\t\t\t\t\t\t\tstringEscape = false;\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if( stringHex || stringUnicode ) {\n\t\t\t\t\t\t\tif( hex_char_len === 0 && cInt === 123/*'{'*/ ) {\n\t\t\t\t\t\t\t\tunicodeWide = true;\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif( hex_char_len < 2 || ( stringUnicode && hex_char_len < 4 ) ) {\n\t\t\t\t\t\t\t\thex_char *= 16;\n\t\t\t\t\t\t\t\tif( cInt >= 48/*'0'*/ && cInt <= 57/*'9'*/ )      hex_char += cInt - 0x30;\n\t\t\t\t\t\t\t\telse if( cInt >= 65/*'A'*/ && cInt <= 70/*'F'*/ ) hex_char += ( cInt - 65 ) + 10;\n\t\t\t\t\t\t\t\telse if( cInt >= 97/*'a'*/ && cInt <= 102/*'f'*/ ) hex_char += ( cInt - 97 ) + 10;\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tthrowError( stringUnicode?\"(escaped character, parsing hex of \\\\u)\":\"(escaped character, parsing hex of \\\\x)\", cInt );\n\t\t\t\t\t\t\t\t\tretval = -1;\n\t\t\t\t\t\t\t\t\tstringHex = false;\n\t\t\t\t\t\t\t\t\tstringEscape = false;\n\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\thex_char_len++;\n\t\t\t\t\t\t\t\tif( stringUnicode ) {\n\t\t\t\t\t\t\t\t\tif( hex_char_len == 4 ) {\n\t\t\t\t\t\t\t\t\t\tval.string += String.fromCodePoint( hex_char );\n\t\t\t\t\t\t\t\t\t\tstringUnicode = false;\n\t\t\t\t\t\t\t\t\t\tstringEscape = false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if( hex_char_len == 2 ) {\n\t\t\t\t\t\t\t\t\tval.string += String.fromCodePoint( hex_char );\n\t\t\t\t\t\t\t\t\tstringHex = false;\n\t\t\t\t\t\t\t\t\tstringEscape = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tswitch( cInt ) {\n\t\t\t\t\t\tcase 13/*'\\r'*/:\n\t\t\t\t\t\t\tcr_escaped = true;\n\t\t\t\t\t\t\tpos.col = 1;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\tcase 0x2028: // LS (Line separator)\n\t\t\t\t\t\tcase 0x2029: // PS (paragraph separate)\n\t\t\t\t\t\t\tpos.col = 1;\n\t\t\t\t\t\t\t// falls through\n\t\t\t\t\t\tcase 10/*'\\n'*/:\n\t\t\t\t\t\t\tif( !cr_escaped ) { // \\\\ \\n\n\t\t\t\t\t\t\t\tpos.col = 1;\n\t\t\t\t\t\t\t} else { // \\\\ \\r \\n\n\t\t\t\t\t\t\t\tcr_escaped = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpos.line++;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 116/*'t'*/:\n\t\t\t\t\t\t\tval.string += '\\t';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 98/*'b'*/:\n\t\t\t\t\t\t\tval.string += '\\b';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 110/*'n'*/:\n\t\t\t\t\t\t\tval.string += '\\n';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 114/*'r'*/:\n\t\t\t\t\t\t\tval.string += '\\r';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 102/*'f'*/:\n\t\t\t\t\t\t\tval.string += '\\f';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 118/*'v'*/:\n\t\t\t\t\t\t\tval.string += '\\v';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 48/*'0'*/: \n\t\t\t\t\t\t\tval.string += '\\0';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 120/*'x'*/:\n\t\t\t\t\t\t\tstringHex = true;\n\t\t\t\t\t\t\thex_char_len = 0;\n\t\t\t\t\t\t\thex_char = 0;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\tcase 117/*'u'*/:\n\t\t\t\t\t\t\tstringUnicode = true;\n\t\t\t\t\t\t\thex_char_len = 0;\n\t\t\t\t\t\t\thex_char = 0;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t//case 47/*'/'*/:\n\t\t\t\t\t\t//case 92/*'\\\\'*/:\n\t\t\t\t\t\t//case 34/*'\"'*/:\n\t\t\t\t\t\t//case 39/*\"'\"*/:\n\t\t\t\t\t\t//case 96/*'`'*/:\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//console.log( \"other...\" );\n\t\t\t\t\t\tstringEscape = false;\n\t\t\t\t\t}\n\t\t\t\t\telse if( cInt === 92/*'\\\\'*/ ) {\n\t\t\t\t\t\tif( stringEscape ) {\n\t\t\t\t\t\t\tval.string += '\\\\';\n\t\t\t\t\t\t\tstringEscape = false\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tstringEscape = true;\n\t\t\t\t\t\t\thex_char = 0;\n\t\t\t\t\t\t\thex_char_len = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse { /* any other character */\n\t\t\t\t\t\tif( cr_escaped ) {\n\t\t\t\t\t\t\t// \\\\ \\r <any char>\n\t\t\t\t\t\t\tcr_escaped = false;\n\t\t\t\t\t\t\tpos.line++;\n\t\t\t\t\t\t\tpos.col = 2; // this character is pos 1; and increment to be after it.\n\t\t\t\t\t\t}\n\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn retval;\n\t\t\t}\n\n\t\t\t// gather a number from the input stream.\n\t\t\tfunction collectNumber() {\n\t\t\t\tlet _n;\n\t\t\t\twhile( (_n = n) < buf.length ) {\n\t\t\t\t\tstr = buf.charAt(_n);\n\t\t\t\t\tlet cInt = buf.codePointAt(n++);\n\t\t\t\t\tif( cInt >= 256 ) { \n\t\t\t\t\t\t\tpos.col -= n - _n;\n\t\t\t\t\t\t\tn = _n; // put character back in queue to process.\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//_DEBUG_PARSING_NUMBERS  && console.log( \"in getting number:\", n, cInt, String.fromCodePoint(cInt) );\n\t\t\t\t\t\tif( cInt == 95 /*_*/ )\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\tpos.col++;\n\t\t\t\t\t\t// leading zeros should be forbidden.\n\t\t\t\t\t\tif( cInt >= 48/*'0'*/ && cInt <= 57/*'9'*/ ) {\n\t\t\t\t\t\t\tif( exponent ) {\n\t\t\t\t\t\t\t\texponent_digit = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t} else if( cInt == 45/*'-'*/ || cInt == 43/*'+'*/ ) {\n\t\t\t\t\t\t\tif( val.string.length == 0 || ( exponent && !exponent_sign && !exponent_digit ) ) {\n\t\t\t\t\t\t\t\tif( cInt == 45/*'-'*/ && !exponent ) negative = !negative;\n\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\texponent_sign = true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif( negative ) { val.string = '-' + val.string; negative = false; }\n\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\tdate_format = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if( cInt == 78/*'N'*/ ) {\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET ) {\n\t\t\t\t\t\t\t\tgatheringNumber = false;\n\t\t\t\t\t\t\t\tword = WORD_POS_NAN_1;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthrowError( \"fault while parsing number;\", cInt );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else if( cInt == 73/*'I'*/ ) {\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET ) {\n\t\t\t\t\t\t\t\tgatheringNumber = false;\n\t\t\t\t\t\t\t\tword = WORD_POS_INFINITY_1;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthrowError( \"fault while parsing number;\", cInt );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else if( cInt == 58/*':'*/ && date_format ) {\n\t\t\t\t\t\t\tif( negative ) { val.string = '-' + val.string; negative = false; }\n\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\tdate_format = true;\n\t\t\t\t\t\t} else if( cInt == 84/*'T'*/ && date_format ) {\n\t\t\t\t\t\t\tif( negative ) { val.string = '-' + val.string; negative = false; }\n\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\tdate_format = true;\n\t\t\t\t\t\t} else if( cInt == 90/*'Z'*/ && date_format ) {\n\t\t\t\t\t\t\tif( negative ) { val.string = '-' + val.string; negative = false; }\n\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\tdate_format = true;\n\t\t\t\t\t\t} else if( cInt == 46/*'.'*/ ) {\n\t\t\t\t\t\t\tif( !decimal && !fromHex && !exponent ) {\n\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\tdecimal = true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\t\tthrowError( \"fault while parsing number;\", cInt );\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if( cInt == 110/*'n'*/ ) {\n\t\t\t\t\t\t\tisBigInt = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else if( fromHex && ( ( ( cInt >= 95/*'a'*/ ) && ( cInt <= 102/*'f'*/ ) ) ||\n\t\t\t\t\t\t           ( ( cInt >= 65/*'A'*/ ) && ( cInt <= 70/*'F'*/ ) ) ) ) {\n\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t} else if( cInt == 120/*'x'*/ || cInt == 98/*'b'*/ || cInt == 111/*'o'*/\n\t\t\t\t\t\t\t\t|| cInt == 88/*'X'*/ || cInt == 66/*'B'*/ || cInt == 79/*'O'*/ ) {\n\t\t\t\t\t\t\t// hex conversion.\n\t\t\t\t\t\t\tif( !fromHex && val.string == '0' ) {\n\t\t\t\t\t\t\t\tfromHex = true;\n\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\t\tthrowError( \"fault while parsing number;\", cInt );\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if( ( cInt == 101/*'e'*/ ) || ( cInt == 69/*'E'*/ ) ) {\n\t\t\t\t\t\t\tif( !exponent ) {\n\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\texponent = true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\t\tthrowError( \"fault while parsing number;\", cInt );\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( cInt == 32/*' '*/ || cInt == 13 || cInt == 10 || cInt == 9 || cInt == 47/*'/'*/ || cInt ==  35/*'#'*/\n\t\t\t\t\t\t\t || cInt == 44/*','*/ || cInt == 125/*'}'*/ || cInt == 93/*']'*/\n\t\t\t\t\t\t\t || cInt == 123/*'{'*/ || cInt == 91/*'['*/ || cInt == 34/*'\"'*/ || cInt == 39/*'''*/ || cInt == 96/*'`'*/\n\t\t\t\t\t\t\t || cInt == 58/*':'*/ ) {\n\t\t\t\t\t\t\t\tpos.col -= n - _n;\n\t\t\t\t\t\t\t\tn = _n; // put character back in queue to process.\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tif( complete_at_end ) {\n\t\t\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\t\t\tthrowError( \"fault while parsing number;\", cInt );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( (!complete_at_end) && n == buf.length ) {\n\t\t\t\t\tgatheringNumber = true;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tgatheringNumber = false;\n\t\t\t\t\tval.value_type = VALUE_NUMBER;\n\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN ) {\n\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// begin parsing an object type\n\t\t\tfunction openObject() {\n\t\t\t\tlet nextMode = CONTEXT_OBJECT_FIELD;\n\t\t\t\tlet cls = null;\n\t\t\t\tlet tmpobj = {};\n\t\t\t\t//_DEBUG_PARSING && console.log( \"opening object:\", val.string, val.value_type, word, parse_context );\n\t\t\t\tif( word > WORD_POS_RESET && word < WORD_POS_FIELD )\n\t\t\t\t\trecoverIdent( 123 /* '{' */ );\n\t\t\t\tlet protoDef;\n\t\t\t\tprotoDef = getProto(); // lookup classname using val.string and get protodef(if any)\n\t\t\t\tif( parse_context == CONTEXT_UNKNOWN ) {\n\t\t\t\t\tif( word == WORD_POS_FIELD /*|| word == WORD_POS_AFTER_FIELD*/ \n\t\t\t\t\t   || word == WORD_POS_END\n\t\t\t\t\t     && ( protoDef || val.string.length ) ) {\n\t\t\t\t\t\t\tif( protoDef && protoDef.protoDef && protoDef.protoDef.protoCon ) {\n\t\t\t\t\t\t\t\ttmpobj = new protoDef.protoDef.protoCon();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tif( !protoDef || !protoDef.protoDef && val.string ) // class creation is redundant...\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcls = classes.find( cls=>cls.name===val.string );\n\t\t\t\t\t\t\t//console.log( \"Probably creating the Macro-Tag here?\", cls )\n\t\t\t\t\t\t\tif( !cls ) {\n\t\t\t\t\t\t\t\t/* eslint-disable no-inner-declarations */\n\t\t\t\t\t\t\t\tfunction privateProto() {} \n\t\t\t\t\t\t\t\t// this just uses the tmpobj {} container to store the values collected for this class...\n\t\t\t\t\t\t\t\t// this does not generate the instance of the class.\n\t\t\t\t\t\t\t\t// if this tag type is also a prototype, use that prototype, else create a unique proto\n\t\t\t\t\t\t\t\t// for this tagged class type.\n\t\t\t\t\t\t\t\tclasses.push( cls = { name : val.string\n\t\t\t\t\t\t\t\t, protoCon: (protoDef && protoDef.protoDef && protoDef.protoDef.protoCon) || privateProto.constructor\n\t\t\t\t\t\t\t\t , fields : [] } );\n\t\t\t\t\t\t\t\t nextMode = CONTEXT_CLASS_FIELD;\n\t\t\t\t\t\t\t} else if( redefineClass ) {\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"redefine class...\" );\n\t\t\t\t\t\t\t\t// redefine this class\n\t\t\t\t\t\t\t\tcls.fields.length = 0;\n\t\t\t\t\t\t\t\tnextMode = CONTEXT_CLASS_FIELD;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"found existing class, using it....\");\n\t\t\t\t\t\t\t\ttmpobj = new cls.protoCon();\n\t\t\t\t\t\t\t\t//tmpobj = Object.assign( tmpobj, cls.protoObject );\n\t\t\t\t\t\t\t\t//Object.setPrototypeOf( tmpobj, Object.getPrototypeOf( cls.protoObject ) );\n\t\t\t\t\t\t\t\tnextMode = CONTEXT_CLASS_VALUE;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tredefineClass = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcurrent_class = cls\n\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tword = WORD_POS_FIELD;\n\t\t\t\t\t}\n\t\t\t\t} else if( word == WORD_POS_FIELD /*|| word == WORD_POS_AFTER_FIELD*/ \n\t\t\t\t\t\t|| parse_context === CONTEXT_IN_ARRAY \n\t\t\t\t\t\t|| parse_context === CONTEXT_OBJECT_FIELD_VALUE \n\t\t\t\t\t\t|| parse_context == CONTEXT_CLASS_VALUE ) {\n\t\t\t\t\tif( word != WORD_POS_RESET || val.value_type == VALUE_STRING ) {\n\t\t\t\t\t\tif( protoDef && protoDef.protoDef ) {\n\t\t\t\t\t\t\t// need to collect the object,\n\t\t\t\t\t\t\ttmpobj = new protoDef.protoDef.protoCon();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// look for a class type (shorthand) to recover.\n\t\t\t\t\t\t\tcls = classes.find( cls=>cls.name === val.string );\n\t\t\t\t\t\t\tif( !cls )\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t/* eslint-disable no-inner-declarations */\n\t\t\t\t\t\t\t   function privateProto(){}\n\t\t\t\t\t\t\t\t//sconsole.log( \"privateProto has no proto?\", privateProto.prototype.constructor.name );\n\t\t\t\t\t\t\t\tlocalFromProtoTypes.set( val.string,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ protoCon:privateProto.prototype.constructor\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, cb: null }\n\t\t\t\t\t\t\t\t\t\t\t\t\t   );\n\t\t\t\t\t\t\t\ttmpobj = new privateProto();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tnextMode = CONTEXT_CLASS_VALUE;\n\t\t\t\t\t\t\t\ttmpobj = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//nextMode = CONTEXT_CLASS_VALUE;\n\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t}\n\t\t\t\t} else if( ( parse_context == CONTEXT_OBJECT_FIELD && word == WORD_POS_RESET ) ) {\n\t\t\t\t\tthrowError( \"fault while parsing; getting field name unexpected \", cInt );\n\t\t\t\t\tstatus = false;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// common code to push into next context\n\t\t\t\tlet old_context = getContext();\n\t\t\t\t//_DEBUG_PARSING && console.log( \"Begin a new object; previously pushed into elements; but wait until trailing comma or close previously \", val.value_type, val.className );\n\n\t\t\t\tval.value_type = VALUE_OBJECT;\n\t\t\t\tif( parse_context === CONTEXT_UNKNOWN ){\n\t\t\t\t\telements = tmpobj;\n\t\t\t\t} else if( parse_context == CONTEXT_IN_ARRAY ) {\n\t\t\t\t\tif( arrayType == -1 ) {\n\t\t\t\t\t\t// this is pushed later... \n\t\t\t\t\t\t//console.log( \"PUSHING OPEN OBJECT INTO EXISTING ARRAY - THIS SHOULD BE RE-SET?\", JSOX.stringify(context_stack.first.node) );\n\t\t\t\t\t\t//elements.push( tmpobj );\n\t\t\t\t\t}\n\t\t\t\t\tval.name = elements.length;\n\t\t\t\t\t//else if( //_DEBUG_PARSING && arrayType !== -3 )\n\t\t\t\t\t//\tconsole.log( \"This is an invalid parsing state, typed array with sub-object elements\" );\n\t\t\t\t} else if( parse_context == CONTEXT_OBJECT_FIELD_VALUE || parse_context == CONTEXT_CLASS_VALUE ) {\n\t\t\t\t\tif( !val.name && current_class ){\n\t\t\t\t\t\tval.name = current_class.fields[current_class_field++];\n\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"B Stepping current class field:\", val, current_class_field, val.name );\n\t\t\t\t\t}\n\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"Setting element:\", val.name, tmpobj );\n\t\t\t\t\telements[val.name] = tmpobj;\n\t\t\t\t}\n\n\t\t\t\told_context.context = parse_context;\n\t\t\t\told_context.elements = elements;\n\t\t\t\t//old_context.element_array = element_array;\n\t\t\t\told_context.name = val.name;\n\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"pushing val.name:\", val.name, arrayType );\n\t\t\t\told_context.current_proto = current_proto;\n\t\t\t\told_context.current_class = current_class;\n\t\t\t\told_context.current_class_field = current_class_field;\n\t\t\t\told_context.valueType = val.value_type;\n\t\t\t\told_context.arrayType = arrayType; // pop that we don't want to have this value re-pushed.\n\t\t\t\told_context.className = val.className;\n\t\t\t\t//arrayType = -3; // this doesn't matter, it's an object state, and a new array will reset to -1\n\t\t\t\tval.className = null;\n\t\t\t\tval.name = null;\n\t\t\t\tcurrent_proto = protoDef;\n\t\t\t\tcurrent_class = cls;\n\t\t\t\t//console.log( \"Setting current class:\", current_class.name );\n\t\t\t\tcurrent_class_field = 0;\n\t\t\t\telements = tmpobj;\n\t\t\t\tif( !rootObject ) rootObject = elements;\n\t\t\t\t//_DEBUG_PARSING_STACK && console.log( \"push context (open object): \", context_stack.length, \" new mode:\", nextMode );\n\t\t\t\tcontext_stack.push( old_context );\n\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"RESET OBJECT FIELD\", old_context, context_stack );\n\t\t\t\tRESET_VAL();\n\t\t\t\tparse_context = nextMode;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tfunction openArray() {\n\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"openArray()...\" );\n\t\t\t\tif( word > WORD_POS_RESET && word < WORD_POS_FIELD )\n\t\t\t\t\trecoverIdent( 91 );\n\n\t\t\t\tif( word == WORD_POS_END && val.string.length ) {\n\t\t\t\t\t//_DEBUG_PARSING && console.log( \"recover arrayType:\", arrayType, val.string );\n\t\t\t\t\tlet typeIndex = knownArrayTypeNames.findIndex( type=>(type === val.string) );\n\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\tif( typeIndex >= 0 ) {\n\t\t\t\t\t\tarrayType = typeIndex;\n\t\t\t\t\t\tval.className = val.string;\n\t\t\t\t\t\tval.string = null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif( val.string === \"ref\" ) {\n\t\t\t\t\t\t\tval.className = null;\n\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"This will be a reference recovery for key:\", val );\n\t\t\t\t\t\t\tarrayType = -2;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( localFromProtoTypes.get( val.string ) ) {\n\t\t\t\t\t\t\t\tval.className = val.string;\n\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\telse if( fromProtoTypes.get( val.string ) ) {\n\t\t\t\t\t\t\t\tval.className = val.string;\n\t\t\t\t\t\t\t} else\n\t\t\t\t\t\t\t\tthrowError( `Unknown type '${val.string}' specified for array`, cInt );\n\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \" !!!!!A Set Classname:\", val.className );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if( parse_context == CONTEXT_OBJECT_FIELD || word == WORD_POS_FIELD || word == WORD_POS_AFTER_FIELD ) {\n\t\t\t\t\tthrowError( \"Fault while parsing; while getting field name unexpected\", cInt );\n\t\t\t\t\tstatus = false;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tlet old_context = getContext();\n\t\t\t\t\t//_DEBUG_PARSING && console.log( \"Begin a new array; previously pushed into elements; but wait until trailing comma or close previously \", val.value_type );\n\n\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"Opening array:\", val, parse_context );\n\t\t\t\t\tval.value_type = VALUE_ARRAY;\n\t\t\t\t\tlet tmparr = [];\n\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN )\n\t\t\t\t\t\telements = tmparr;\n\t\t\t\t\telse if( parse_context == CONTEXT_IN_ARRAY ) {\n\t\t\t\t\t\tif( arrayType == -1 ){\n\t\t\t\t\t\t\t//console.log( \"Pushing new opening array into existing array already RE-SET\" );\n\t\t\t\t\t\t\telements.push( tmparr );\n\t\t\t\t\t\t} //else if( //_DEBUG_PARSING && arrayType !== -3 )\n\t\t\t\t\t\tval.name = elements.length;\n\t\t\t\t\t\t//\tconsole.log( \"This is an invalid parsing state, typed array with sub-array elements\" );\n\t\t\t\t\t} else if( parse_context == CONTEXT_OBJECT_FIELD_VALUE ) {\n\t\t\t\t\t\tif( !val.name ) {\n\t\t\t\t\t\t\tconsole.log( \"This says it's resolved.......\" );\n\t\t\t\t\t\t\tarrayType = -3;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif( current_proto && current_proto.protoDef ) {\n\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"SOMETHING SHOULD HAVE BEEN REPLACED HERE??\", current_proto );\n\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"(need to do fromprototoypes here) object:\", val, value );\n\t\t\t\t\t\t\tif( current_proto.protoDef.cb ){\n\t\t\t\t\t\t\t\tconst newarr = current_proto.protoDef.cb.call( elements, val.name, tmparr );\n\t\t\t\t\t\t\t\tif( newarr !== undefined ) tmparr = elements[val.name] = newarr;\n\t\t\t\t\t\t\t\t//else console.log( \"Warning: Received undefined for an array; keeping original array, not setting field\" );\n\t\t\t\t\t\t\t}else\n\t\t\t\t\t\t\t\telements[val.name] = tmparr;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\telements[val.name] = tmparr;\n\t\t\t\t\t}\n\t\t\t\t\told_context.context = parse_context;\n\t\t\t\t\told_context.elements = elements;\n\t\t\t\t\t//old_context.element_array = element_array;\n\t\t\t\t\told_context.name = val.name;\n\t\t\t\t\told_context.current_proto = current_proto;\n\t\t\t\t\told_context.current_class = current_class;\n\t\t\t\t\told_context.current_class_field = current_class_field;\n\t\t\t\t\t// already pushed?\n\t\t\t\t\told_context.valueType = val.value_type;\n\t\t\t\t\told_context.arrayType = (arrayType==-1)?-3:arrayType; // pop that we don't want to have this value re-pushed.\n\t\t\t\t\told_context.className = val.className;\n\t\t\t\t\tarrayType = -1;\n\t\t\t\t\tval.className = null;\n\n\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \" !!!!!B Clear Classname:\", old_context, val.className, old_context.className, old_context.name );\n\t\t\t\t\tval.name = null;\n\t\t\t\t\tcurrent_proto = null;\n\t\t\t\t\tcurrent_class = null;\n\t\t\t\t\tcurrent_class_field = 0;\n\t\t\t\t\t//element_array = tmparr;\n\t\t\t\t\telements = tmparr;\n\t\t\t\t\tif( !rootObject ) rootObject = tmparr;\n\t\t\t\t\t//_DEBUG_PARSING_STACK && console.log( \"push context (open array): \", context_stack.length );\n\t\t\t\t\tcontext_stack.push( old_context );\n\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"RESET ARRAY FIELD\", old_context, context_stack );\n\n\t\t\t\t\tRESET_VAL();\n\t\t\t\t\tparse_context = CONTEXT_IN_ARRAY;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tfunction getProto() {\n\t\t\t\tconst result = {protoDef:null,cls:null};\n\t\t\t\tif( ( result.protoDef = localFromProtoTypes.get( val.string ) ) ) {\n\t\t\t\t\tif( !val.className ){\n\t\t\t\t\t\tval.className = val.string;\n\t\t\t\t\t\tval.string = null;\n\t\t\t\t\t}\n\t\t\t\t\t// need to collect the object, \n\t\t\t\t}\n\t\t\t\telse if( ( result.protoDef = fromProtoTypes.get( val.string ) ) ) {\n\t\t\t\t\tif( !val.className ){\n\t\t\t\t\t\tval.className = val.string;\n\t\t\t\t\t\tval.string = null;\n\t\t\t\t\t}\n\t\t\t\t} \n\t\t\t\tif( val.string )\n\t\t\t\t{\n\t\t\t\t\tresult.cls = classes.find( cls=>cls.name === val.string );\n\t\t\t\t\tif( !result.protoDef && !result.cls ) {\n\t\t\t\t\t    // this will creaet a class def with a new proto to cover when we don't KNOW.\n\t\t\t\t\t    //throwError( \"Referenced class \" + val.string + \" has not been defined\", cInt );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn (result.protoDef||result.cls)?result:null;\n\t\t\t}\n\n\t\t\tif( !status )\n\t\t\t\treturn -1;\n\n\t\t\tif( msg && msg.length ) {\n\t\t\t\tinput = getBuffer();\n\t\t\t\tinput.buf = msg;\n\t\t\t\tinQueue.push( input );\n\t\t\t} else {\n\t\t\t\tif( gatheringNumber ) {\n\t\t\t\t\t//console.log( \"Force completed.\")\n\t\t\t\t\tgatheringNumber = false;\n\t\t\t\t\tval.value_type = VALUE_NUMBER;\n\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN ) {\n\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t}\n\t\t\t\t\tretval = 1;  // if returning buffers, then obviously there's more in this one.\n\t\t\t\t}\n\t\t\t\tif( parse_context !== CONTEXT_UNKNOWN )\n\t\t\t\t\tthrowError( \"Unclosed object at end of stream.\", cInt );\n\t\t\t}\n\n\t\t\twhile( status && ( input = inQueue.shift() ) ) {\n\t\t\t\tn = input.n;\n\t\t\t\tbuf = input.buf;\n\t\t\t\tif( gatheringString ) {\n\t\t\t\t\tlet string_status = gatherString( gatheringStringFirstChar );\n\t\t\t\t\tif( string_status < 0 )\n\t\t\t\t\t\tstatus = false;\n\t\t\t\t\telse if( string_status > 0 ) {\n\t\t\t\t\t\tgatheringString = false;\n\t\t\t\t\t\tif( status ) val.value_type = VALUE_STRING;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( gatheringNumber ) {\n\t\t\t\t\tcollectNumber();\n\t\t\t\t}\n\n\t\t\t\twhile( !completed && status && ( n < buf.length ) ) {\n\t\t\t\t\tstr = buf.charAt(n);\n\t\t\t\t\tcInt = buf.codePointAt(n++);\n\t\t\t\t\tif( cInt >= 0x10000 ) { str += buf.charAt(n); n++; }\n\t\t\t\t\t//_DEBUG_PARSING && console.log( \"parsing at \", cInt, str );\n\t\t\t\t\t//_DEBUG_LL && console.log( \"processing: \", cInt, n, str, pos, comment, parse_context, word );\n\t\t\t\t\tpos.col++;\n\t\t\t\t\tif( comment ) {\n\t\t\t\t\t\tif( comment == 1 ) {\n\t\t\t\t\t\t\tif( cInt == 42/*'*'*/ ) comment = 3;\n\t\t\t\t\t\t\telse if( cInt != 47/*'/'*/ ) return throwError( \"fault while parsing;\", cInt );\n\t\t\t\t\t\t\telse comment = 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if( comment == 2 ) {\n\t\t\t\t\t\t\tif( cInt == 10/*'\\n'*/ || cInt == 13/*'\\r'*/  ) comment = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if( comment == 3 ) {\n\t\t\t\t\t\t\tif( cInt == 42/*'*'*/ ) comment = 4;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif( cInt == 47/*'/'*/ ) comment = 0;\n\t\t\t\t\t\t\telse comment = 3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tswitch( cInt ) {\n\t\t\t\t\tcase 35/*'#'*/:\n\t\t\t\t\t\tcomment = 2; // pretend this is the second slash.\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 47/*'/'*/:\n\t\t\t\t\t\tcomment = 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 123/*'{'*/:\n\t\t\t\t\t\topenObject();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 91/*'['*/:\n\t\t\t\t\t\topenArray();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 58/*':'*/:\n\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"colon received...\")\n\t\t\t\t\t\tif( parse_context == CONTEXT_CLASS_VALUE ) {\n\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t\tval.name = val.string;\n\t\t\t\t\t\t\tval.string = '';\n\t\t\t\t\t\t\tval.value_type = VALUE_UNSET;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t} else if( parse_context == CONTEXT_OBJECT_FIELD\n\t\t\t\t\t\t\t|| parse_context == CONTEXT_CLASS_FIELD  ) {\n\t\t\t\t\t\t\tif( parse_context == CONTEXT_CLASS_FIELD ) {\n\t\t\t\t\t\t\t\tif( !Object.keys( elements).length ) {\n\t\t\t\t\t\t\t\t\t console.log( \"This is a full object, not a class def...\", val.className );\n\t\t\t\t\t\t\t\tconst privateProto = ()=>{} \n\t\t\t\t\t\t\t\tlocalFromProtoTypes.set( context_stack.last.node.current_class.name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ protoCon:privateProto.prototype.constructor\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, cb: null }\n\t\t\t\t\t\t\t\t\t\t\t\t\t   );\n\t\t\t\t\t\t\t\telements = new privateProto();\n\t\t\t\t\t\t\t\tparse_context = CONTEXT_OBJECT_FIELD_VALUE\n\t\t\t\t\t\t\t\tval.name = val.string;\n\t\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t\t\tval.string = ''\n\t\t\t\t\t\t\t\tval.value_type = VALUE_UNSET;\n\t\t\t\t\t\t\t\tconsole.log( \"don't do default;s do a revive...\" );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif( word != WORD_POS_RESET\n\t\t\t\t\t\t\t\t   && word != WORD_POS_END\n\t\t\t\t\t\t\t\t   && word != WORD_POS_FIELD\n\t\t\t\t\t\t\t\t   && word != WORD_POS_AFTER_FIELD ) {\n\t\t\t\t\t\t\t\t\trecoverIdent( 32 );\n\t\t\t\t\t\t\t\t\t// allow starting a new word\n\t\t\t\t\t\t\t\t\t//status = false;\n\t\t\t\t\t\t\t\t\t//throwError( `fault while parsing; unquoted keyword used as object field name (state:${word})`, cInt );\n\t\t\t\t\t\t\t\t\t//break;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t\t\tval.name = val.string;\n\t\t\t\t\t\t\t\tval.string = '';\n\t\t\t\t\t\t\t\tparse_context = (parse_context===CONTEXT_OBJECT_FIELD)?CONTEXT_OBJECT_FIELD_VALUE:CONTEXT_CLASS_FIELD_VALUE;\n\t\t\t\t\t\t\t\tval.value_type = VALUE_UNSET;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if( parse_context == CONTEXT_UNKNOWN ){\n\t\t\t\t\t\t\tconsole.log( \"Override colon found, allow class redefinition\", parse_context );\n\t\t\t\t\t\t\tredefineClass = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( parse_context == CONTEXT_IN_ARRAY )\n\t\t\t\t\t\t\t\tthrowError(  \"(in array, got colon out of string):parsing fault;\", cInt );\n\t\t\t\t\t\t\telse if( parse_context == CONTEXT_OBJECT_FIELD_VALUE ){\n\t\t\t\t\t\t\t\tthrowError( \"String unexpected\", cInt );\n\t\t\t\t\t\t\t} else\n\t\t\t\t\t\t\t\tthrowError( \"(outside any object, got colon out of string):parsing fault;\", cInt );\n\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 125/*'}'*/:\n\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"close bracket context:\", word, parse_context, val.value_type, val.string );\n\t\t\t\t\t\tif( word == WORD_POS_END ) {\n\t\t\t\t\t\t\t// allow starting a new word\n\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// coming back after pushing an array or sub-object will reset the contxt to FIELD, so an end with a field should still push value.\n\t\t\t\t\t\tif( parse_context == CONTEXT_CLASS_FIELD ) {\n\t\t\t\t\t\t\tif( current_class ) {\n\t\t\t\t\t\t\t\t// allow blank comma at end to not be a field\n\t\t\t\t\t\t\t\tif(val.string) { current_class.fields.push( val.string ); }\n\n\t\t\t\t\t\t\t\tRESET_VAL();\n\t\t\t\t\t\t\t\tlet old_context = context_stack.pop();\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"close object:\", old_context, context_stack );\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_STACK && console.log( \"object pop stack (close obj)\", context_stack.length, old_context );\n\t\t\t\t\t\t\t\tparse_context = CONTEXT_UNKNOWN; // this will restore as IN_ARRAY or OBJECT_FIELD\n\t\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t\t\tval.name = old_context.name;\n\t\t\t\t\t\t\t\telements = old_context.elements;\n\t\t\t\t\t\t\t\t//element_array = old_context.element_array;\n\t\t\t\t\t\t\t\tcurrent_class = old_context.current_class;\n\t\t\t\t\t\t\t\tcurrent_class_field = old_context.current_class_field;\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"A Pop old class field counter:\", current_class_field, val.name );\n\t\t\t\t\t\t\t\tarrayType = old_context.arrayType;\n\t\t\t\t\t\t\t\tval.value_type = old_context.valueType;\n\t\t\t\t\t\t\t\tval.className = old_context.className;\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \" !!!!!C Pop Classname:\", val.className );\n\t\t\t\t\t\t\t\trootObject = null;\n\n\t\t\t\t\t\t\t\tdropContext( old_context );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthrowError( \"State error; gathering class fields, and lost the class\", cInt );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if( ( parse_context == CONTEXT_OBJECT_FIELD ) || ( parse_context == CONTEXT_CLASS_VALUE ) ) {\n\t\t\t\t\t\t\tif( val.value_type != VALUE_UNSET ) {\n\t\t\t\t\t\t\t\tif( current_class ) {\n\t\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"C Stepping current class field:\", current_class_field, val.name, arrayType );\n\t\t\t\t\t\t\t\t\tval.name = current_class.fields[current_class_field++];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"Closing object; set value name, and push...\", current_class_field, val );\n\t\t\t\t\t\t\t\tobjectPush();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"close object; empty object\", val, elements );\n\n\t\t\t\t\t\t\t\tval.value_type = VALUE_OBJECT;\n\t\t\t\t\t\t\t\tif( current_proto && current_proto.protoDef ) {\n\t\t\t\t\t\t\t\t\tconsole.log( \"SOMETHING SHOULD AHVE BEEN REPLACED HERE??\", current_proto );\n\t\t\t\t\t\t\t\t\tconsole.log( \"The other version only revives on init\" );\n\t\t\t\t\t\t\t\t\telements = new current_proto.protoDef.cb( elements, undefined, undefined );\n\t\t\t\t\t\t\t\t\t//elements = new current_proto.protoCon( elements );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tval.contains = elements;\n\t\t\t\t\t\t\t\tval.string = \"\";\n\n\t\t\t\t\t\t\tlet old_context = context_stack.pop();\n\t\t\t\t\t\t\t//_DEBUG_PARSING_STACK && console.log( \"object pop stack (close obj)\", context_stack.length, old_context );\n\t\t\t\t\t\t\tparse_context = old_context.context; // this will restore as IN_ARRAY or OBJECT_FIELD\n\t\t\t\t\t\t\tval.name = old_context.name;\n\t\t\t\t\t\t\telements = old_context.elements;\n\t\t\t\t\t\t\t//element_array = old_context.element_array;\n\t\t\t\t\t\t\tcurrent_class = old_context.current_class;\n\t\t\t\t\t\t\tcurrent_proto = old_context.current_proto;\n\t\t\t\t\t\t\tcurrent_class_field = old_context.current_class_field;\n\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"B Pop old class field counter:\", context_stack, current_class_field, val.name );\n\t\t\t\t\t\t\tarrayType = old_context.arrayType;\n\t\t\t\t\t\t\tval.value_type = old_context.valueType;\n\t\t\t\t\t\t\tval.className = old_context.className;\n\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \" !!!!!D Pop Classname:\", val.className );\n\t\t\t\t\t\t\tdropContext( old_context );\n\n\t\t\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN ) {\n\t\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if( ( parse_context == CONTEXT_OBJECT_FIELD_VALUE ) ) {\n\t\t\t\t\t\t\t// first, add the last value\n\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"close object; push item '%s' %d\", val.name, val.value_type );\n\t\t\t\t\t\t\tif( val.value_type === VALUE_UNSET ) {\n\t\t\t\t\t\t\t\tif( word == WORD_POS_RESET )\n\t\t\t\t\t\t\t\t\tthrowError( \"Fault while parsing; unexpected\", cInt );\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\trecoverIdent(cInt);\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tobjectPush();\n\t\t\t\t\t\t\tval.value_type = VALUE_OBJECT;\n\t\t\t\t\t\t\tval.contains = elements;\n\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\n\t\t\t\t\t\t\t//let old_context = context_stack.pop();\n\t\t\t\t\t\t\tlet old_context = context_stack.pop();\n\t\t\t\t\t\t\t//_DEBUG_PARSING_STACK  && console.log( \"object pop stack (close object)\", context_stack.length, old_context );\n\t\t\t\t\t\t\tparse_context = old_context.context; // this will restore as IN_ARRAY or OBJECT_FIELD\n\t\t\t\t\t\t\tval.name = old_context.name;\n\t\t\t\t\t\t\telements = old_context.elements;\n\t\t\t\t\t\t\tcurrent_proto = old_context.current_proto;\n\t\t\t\t\t\t\tcurrent_class = old_context.current_class;\n\t\t\t\t\t\t\tcurrent_class_field = old_context.current_class_field;\n\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"C Pop old class field counter:\", context_stack, current_class_field, val.name );\n\t\t\t\t\t\t\tarrayType = old_context.arrayType;\n\t\t\t\t\t\t\tval.value_type = old_context.valueType;\n\t\t\t\t\t\t\tval.className = old_context.className;\n\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \" !!!!!E Pop Classname:\", val.className );\n\t\t\t\t\t\t\t//element_array = old_context.element_array;\n\t\t\t\t\t\t\tdropContext( old_context );\n\t\t\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN ) {\n\t\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthrowError( \"Fault while parsing; unexpected\", cInt );\n\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnegative = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 93/*']'*/:\n\t\t\t\t\t\tif( word >= WORD_POS_AFTER_FIELD ) {\n\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif( parse_context == CONTEXT_IN_ARRAY ) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//_DEBUG_PARSING  && console.log( \"close array, push last element: %d\", val.value_type );\n\t\t\t\t\t\t\tif( val.value_type != VALUE_UNSET ) {\n\t\t\t\t\t\t\t\t// name is set when saving a context.\n\t\t\t\t\t\t\t\t// a better sanity check would be val.name === elements.length;\n\t\t\t\t\t\t\t\t//if( val.name ) if( val.name !== elements.length ) console.log( \"Ya this should blow up\" );\n\t\t\t\t\t\t\t\tarrayPush();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif( word !== WORD_POS_RESET ) {\n\t\t\t\t\t\t\t\t\trecoverIdent(cInt);\n\t\t\t\t\t\t\t\t\tarrayPush();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tval.contains = elements;\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet old_context = context_stack.pop();\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_STACK  && console.log( \"object pop stack (close array)\", context_stack.length );\n\t\t\t\t\t\t\t\tval.name = old_context.name;\n\t\t\t\t\t\t\t\tval.className = old_context.className;\n\t\t\t\t\t\t\t\tparse_context = old_context.context;\n\t\t\t\t\t\t\t\telements = old_context.elements;\n\t\t\t\t\t\t\t\t//element_array = old_context.element_array;\n\t\t\t\t\t\t\t\tcurrent_proto = old_context.current_proto;\n\t\t\t\t\t\t\t\tcurrent_class = old_context.current_class;\n\t\t\t\t\t\t\t\tcurrent_class_field = old_context.current_class_field;\n\t\t\t\t\t\t\t\tarrayType = old_context.arrayType;\n\t\t\t\t\t\t\t\tval.value_type = old_context.valueType;\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"close array:\", old_context );\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"D Pop old class field counter:\", context_stack, current_class_field, val );\n\t\t\t\t\t\t\t\tdropContext( old_context );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tval.value_type = VALUE_ARRAY;\n\t\t\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN ) {\n\t\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthrowError( `bad context ${parse_context}; fault while parsing`, cInt );// fault\n\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnegative = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 44/*','*/:\n\t\t\t\t\t\tif( word < WORD_POS_AFTER_FIELD && word != WORD_POS_RESET ) {\n\t\t\t\t\t\t\trecoverIdent(cInt);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif( word == WORD_POS_END || word == WORD_POS_FIELD ) word = WORD_POS_RESET;  // allow collect new keyword\n\t\t\t\t\t\t//if(//_DEBUG_PARSING) \n\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"comma context:\", parse_context, val );\n\t\t\t\t\t\tif( parse_context == CONTEXT_CLASS_FIELD ) {\n\t\t\t\t\t\t\tif( current_class ) {\n\t\t\t\t\t\t\t\t//console.log( \"Saving field name(set word to IS A FIELD):\", val.string );\n\t\t\t\t\t\t\t\tcurrent_class.fields.push( val.string );\n\t\t\t\t\t\t\t\tval.string = '';\n\t\t\t\t\t\t\t\tword = WORD_POS_FIELD;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthrowError( \"State error; gathering class fields, and lost the class\", cInt );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if( parse_context == CONTEXT_OBJECT_FIELD ) {\n\t\t\t\t\t\t\tif( current_class ) {\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"D Stepping current class field:\", current_class_field, val.name );\n\t\t\t\t\t\t\t\tval.name = current_class.fields[current_class_field++];\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"should have a completed value at a comma.:\", current_class_field, val );\n\t\t\t\t\t\t\t\tif( val.value_type != VALUE_UNSET ) {\n\t\t\t\t\t\t\t\t\t//_DEBUG_PARSING  && console.log( \"pushing object field:\", val );\n\t\t\t\t\t\t\t\t\tobjectPush();\n\t\t\t\t\t\t\t\t\tRESET_VAL();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// this is an empty comma...\n\t\t\t\t\t\t\t\tif( val.string || val.value_type )\n\t\t\t\t\t\t\t\t\tthrowError( \"State error; comma in field name and/or lost the class\", cInt );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if( parse_context == CONTEXT_CLASS_VALUE ) {\n\t\t\t\t\t\t\tif( current_class ) {\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"reviving values in class...\", arrayType, current_class.fields[current_class_field ], val );\n\t\t\t\t\t\t\t\tif( arrayType != -3 && !val.name ) {\n\t\t\t\t\t\t\t\t\t// this should have still had a name....\n\t\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"E Stepping current class field:\", current_class_field, val, arrayType );\n\t\t\t\t\t\t\t\t\tval.name = current_class.fields[current_class_field++];\n\t\t\t\t\t\t\t\t\t//else val.name = current_class.fields[current_class_field++];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"should have a completed value at a comma.:\", current_class_field, val );\n\t\t\t\t\t\t\t\tif( val.value_type != VALUE_UNSET ) {\n\t\t\t\t\t\t\t\t\tif( arrayType != -3 )\n\t\t\t\t\t\t\t\t\t\tobjectPush();\n\t\t\t\t\t\t\t\t\tRESET_VAL();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif( val.value_type != VALUE_UNSET ) {\n\t\t\t\t\t\t\t\t\tobjectPush();\n\t\t\t\t\t\t\t\t\tRESET_VAL();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//throwError( \"State error; gathering class values, and lost the class\", cInt );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tval.name = null;\n\t\t\t\t\t\t} else if( parse_context == CONTEXT_IN_ARRAY ) {\n\t\t\t\t\t\t\tif( val.value_type == VALUE_UNSET )\n\t\t\t\t\t\t\t\tval.value_type = VALUE_EMPTY; // in an array, elements after a comma should init as undefined...\n\n\t\t\t\t\t\t\t//_DEBUG_PARSING  && console.log( \"back in array; push item %d\", val.value_type );\n\t\t\t\t\t\t\tarrayPush();\n\t\t\t\t\t\t\tRESET_VAL();\n\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t\t// undefined allows [,,,] to be 4 values and [1,2,3,] to be 4 values with an undefined at end.\n\t\t\t\t\t\t} else if( parse_context == CONTEXT_OBJECT_FIELD_VALUE && val.value_type != VALUE_UNSET ) {\n\t\t\t\t\t\t\t// after an array value, it will have returned to OBJECT_FIELD anyway\n\t\t\t\t\t\t\t//_DEBUG_PARSING  && console.log( \"comma after field value, push field to object: %s\", val.name, val.value_type );\n\t\t\t\t\t\t\tparse_context = CONTEXT_OBJECT_FIELD;\n\t\t\t\t\t\t\tif( val.value_type != VALUE_UNSET ) {\n\t\t\t\t\t\t\t\tobjectPush();\n\t\t\t\t\t\t\t\tRESET_VAL();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\tthrowError( \"bad context; excessive commas while parsing;\", cInt );// fault\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnegative = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tswitch( cInt ) {\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\tif( ( parse_context == CONTEXT_UNKNOWN )\n\t\t\t\t\t\t  || ( parse_context == CONTEXT_OBJECT_FIELD_VALUE && word == WORD_POS_FIELD )\n\t\t\t\t\t\t  || ( ( parse_context == CONTEXT_OBJECT_FIELD ) || word == WORD_POS_FIELD )\n\t\t\t\t\t\t  || ( parse_context == CONTEXT_CLASS_FIELD ) ) {\n\t\t\t\t\t\t\tswitch( cInt ) {\n\t\t\t\t\t\t\tcase 96://'`':\n\t\t\t\t\t\t\tcase 34://'\"':\n\t\t\t\t\t\t\tcase 39://'\\'':\n\t\t\t\t\t\t\t\tif( word == WORD_POS_RESET || word == WORD_POS_FIELD ) {\n\t\t\t\t\t\t\t\t\tif( val.string.length ) {\n\t\t\t\t\t\t\t\t\t\tconsole.log( \"IN ARRAY AND FIXING?\" );\n\t\t\t\t\t\t\t\t\t\tval.className = val.string;\n\t\t\t\t\t\t\t\t\t\tval.string = '';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tlet string_status = gatherString(cInt );\n\t\t\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"string gather for object field name :\", val.string, string_status );\n\t\t\t\t\t\t\t\t\tif( string_status ) {\n\t\t\t\t\t\t\t\t\t\tval.value_type = VALUE_STRING;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tgatheringStringFirstChar = cInt;\n\t\t\t\t\t\t\t\t\t\tgatheringString = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthrowError( \"fault while parsing; quote not at start of field name\", cInt );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 10://'\\n':\n\t\t\t\t\t\t\t\tpos.line++;\n\t\t\t\t\t\t\t\tpos.col = 1;\n\t\t\t\t\t\t\t\t// fall through to normal space handling - just updated line/col position\n\t\t\t\t\t\t\tcase 13://'\\r':\n\t\t\t\t\t\t\tcase 32://' ':\n\t\t\t\t\t\t\tcase 0x2028://' ':\n\t\t\t\t\t\t\tcase 0x2029://' ':\n\t\t\t\t\t\t\tcase 9://'\\t':\n\t\t\t\t\t\t\tcase 0xFEFF: // ZWNBS is WS though\n\t\t\t\t\t\t\t\t //_DEBUG_WHITESPACE  && console.log( \"THIS SPACE\", word, parse_context, val );\n\t\t\t\t\t\t\t\tif( parse_context === CONTEXT_UNKNOWN && word === WORD_POS_END ) { // allow collect new keyword\n\t\t\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t\t\t\tif( parse_context === CONTEXT_UNKNOWN ) {\n\t\t\t\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif( word === WORD_POS_RESET || word === WORD_POS_AFTER_FIELD ) { // ignore leading and trailing whitepsace\n\t\t\t\t\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN && val.value_type ) {\n\t\t\t\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if( word === WORD_POS_FIELD ) {\n\t\t\t\t\t\t\t\t\tif( parse_context === CONTEXT_UNKNOWN ) {\n\t\t\t\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif( val.string.length )\n\t\t\t\t\t\t\t\t\t\tconsole.log( \"STEP TO NEXT TOKEN.\" );\n\t\t\t\t\t\t\t\t\t\tword = WORD_POS_AFTER_FIELD;\n\t\t\t\t\t\t\t\t\t\t//val.className = val.string; val.string = '';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\t\t\tthrowError( \"fault while parsing; whitepsace unexpected\", cInt );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// skip whitespace\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t//if( /((\\n|\\r|\\t)|s|S|[ \\{\\}\\(\\)\\<\\>\\!\\+-\\*\\/\\.\\:\\, ])/.\n\t\t\t\t\t\t\t\tif( testNonIdentifierCharacters ) {\n\t\t\t\t\t\t\t\tlet identRow = nonIdent.find( row=>(row.firstChar >= cInt )&& (row.lastChar > cInt) )\n\t\t\t\t\t\t\t\tif( identRow && ( identRow.bits[(cInt - identRow.firstChar) / 24]\n\t\t\t\t\t\t\t\t    & (1 << ((cInt - identRow.firstChar) % 24)))) {\n\t\t\t\t\t\t\t\t//if( nonIdent[(cInt/(24*16))|0] && nonIdent[(cInt/(24*16))|0][(( cInt % (24*16) )/24)|0] & ( 1 << (cInt%24)) ) {\n\t\t\t\t\t\t\t\t\t// invalid start/continue\n\t\t\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\t\t\tthrowError( `fault while parsing object field name; \\\\u${cInt}`, cInt );\t// fault\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//console.log( \"TICK\" );\n\t\t\t\t\t\t\t\tif( word == WORD_POS_RESET && ( ( cInt >= 48/*'0'*/ && cInt <= 57/*'9'*/ ) || ( cInt == 43/*'+'*/ ) || ( cInt == 46/*'.'*/ ) || ( cInt == 45/*'-'*/ ) ) ) {\n\t\t\t\t\t\t\t\t\tfromHex = false;\n\t\t\t\t\t\t\t\t\texponent = false;\n\t\t\t\t\t\t\t\t\tdate_format = false;\n\t\t\t\t\t\t\t\t\tisBigInt = false;\n\n\t\t\t\t\t\t\t\t\texponent_sign = false;\n\t\t\t\t\t\t\t\t\texponent_digit = false;\n\t\t\t\t\t\t\t\t\tdecimal = false;\n\t\t\t\t\t\t\t\t\tval.string = str;\n\t\t\t\t\t\t\t\t\tinput.n = n;\n\t\t\t\t\t\t\t\t\tcollectNumber();\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif( word === WORD_POS_AFTER_FIELD ) {\n\t\t\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\t\t\tthrowError( \"fault while parsing; character unexpected\", cInt );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif( word === WORD_POS_RESET ) {\n\t\t\t\t\t\t\t\t\tword = WORD_POS_FIELD;\n\t\t\t\t\t\t\t\t\tval.value_type = VALUE_STRING;\n\t\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\t\t//_DEBUG_PARSING  && console.log( \"START/CONTINUE IDENTIFER\" );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}     \n\t\t\t\t\t\t\t\tif( val.value_type == VALUE_UNSET ) {\n\t\t\t\t\t\t\t\t\tif( word !== WORD_POS_RESET && word !== WORD_POS_END )\n\t\t\t\t\t\t\t\t\t\trecoverIdent( cInt );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif( word === WORD_POS_END || word === WORD_POS_FIELD ) {\n\t\t\t\t\t\t\t\t\t\t// final word of the line... \n\t\t\t\t\t\t\t\t\t\t// whispace changes the 'word' state to not 'end'\n\t\t\t\t\t\t\t\t\t\t// until the next character, which may restore it to\n\t\t\t\t\t\t\t\t\t\t// 'end' and this will resume collecting the same string.\n\t\t\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif( parse_context == CONTEXT_OBJECT_FIELD ) {\n\t\t\t\t\t\t\t\t\t\tif( word == WORD_POS_FIELD ) {\n\t\t\t\t\t\t\t\t\t\t\tval.string+=str;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tthrowError( \"Multiple values found in field name\", cInt );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif( parse_context == CONTEXT_OBJECT_FIELD_VALUE ) {\n\t\t\t\t\t\t\t\t\t\tthrowError( \"String unexpected\", cInt );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak; // default\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET && ( ( cInt >= 48/*'0'*/ && cInt <= 57/*'9'*/ ) || ( cInt == 43/*'+'*/ ) || ( cInt == 46/*'.'*/ ) || ( cInt == 45/*'-'*/ ) ) ) {\n\t\t\t\t\t\t\t\tfromHex = false;\n\t\t\t\t\t\t\t\texponent = false;\n\t\t\t\t\t\t\t\tdate_format = false;\n\t\t\t\t\t\t\t\tisBigInt = false;\n\n\t\t\t\t\t\t\t\texponent_sign = false;\n\t\t\t\t\t\t\t\texponent_digit = false;\n\t\t\t\t\t\t\t\tdecimal = false;\n\t\t\t\t\t\t\t\tval.string = str;\n\t\t\t\t\t\t\t\tinput.n = n;\n\t\t\t\t\t\t\t\tcollectNumber();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t//console.log( \"TICK\")\n\t\t\t\t\t\t\t\tif( val.value_type == VALUE_UNSET ) {\n\t\t\t\t\t\t\t\t\tif( word != WORD_POS_RESET ) {\n\t\t\t\t\t\t\t\t\t\trecoverIdent( cInt );\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tword = WORD_POS_END;\n\t\t\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\t\t\tval.value_type = VALUE_STRING;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif( parse_context == CONTEXT_OBJECT_FIELD ) {\n\t\t\t\t\t\t\t\t\t\tthrowError( \"Multiple values found in field name\", cInt );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if( parse_context == CONTEXT_OBJECT_FIELD_VALUE ) {\n\n\t\t\t\t\t\t\t\t\t\tif( val.value_type != VALUE_STRING ) {\n\t\t\t\t\t\t\t\t\t\t\tif( val.value_type == VALUE_OBJECT || val.value_type == VALUE_ARRAY ){\n\t\t\t\t\t\t\t\t\t\t\t\tthrowError( \"String unexpected\", cInt );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\trecoverIdent(cInt);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif( word == WORD_POS_AFTER_FIELD ){\n\t\t\t\t\t\t\t\t\t\t\tconst  protoDef = getProto();\n\t\t\t\t\t\t\t\t\t\t\tif( protoDef){\n\t\t\t\t\t\t\t\t\t\t\t\tword == WORD_POS_END; // last string.\n\t\t\t\t\t\t\t\t\t\t\t\tval.string = str;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\telse \n\t\t\t\t\t\t\t\t\t\t\t\tthrowError( \"String unexpected\", cInt );\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tif( word == WORD_POS_END ) {\n\t\t\t\t\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\t\t\t\t}else\n\t\t\t\t\t\t\t\t\t\t\t\tthrowError( \"String unexpected\", cInt );\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if( parse_context == CONTEXT_IN_ARRAY ) {\n\t\t\t\t\t\t\t\t\t\tif( word == WORD_POS_AFTER_FIELD ){\n\t\t\t\t\t\t\t\t\t\t\tif( !val.className ){\n\t\t\t\t\t\t\t\t\t\t\t\t//\tgetProto()\n\t\t\t\t\t\t\t\t\t\t\t\tval.className = val.string;\n\t\t\t\t\t\t\t\t\t\t\t\tval.string = '';\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tif( word == WORD_POS_END )\n\t\t\t\t\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t//recoverIdent(cInt);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak; // default\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 96://'`':\n\t\t\t\t\t\tcase 34://'\"':\n\t\t\t\t\t\tcase 39://'\\'':\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif( val.string ) val.className = val.string; val.string = '';\n\t\t\t\t\t\t\tlet string_status = gatherString( cInt );\n\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"string gather for object field value :\", val.string, string_status, completed, input.n, buf.length );\n\t\t\t\t\t\t\tif( string_status ) {\n\t\t\t\t\t\t\t\tval.value_type = VALUE_STRING;\n\t\t\t\t\t\t\t\tword = WORD_POS_END;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tgatheringStringFirstChar = cInt;\n\t\t\t\t\t\t\t\tgatheringString = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 10://'\\n':\n\t\t\t\t\t\t\tpos.line++;\n\t\t\t\t\t\t\tpos.col = 1;\n\t\t\t\t\t\t\t//falls through\n\t\t\t\t\t\tcase 32://' ':\n\t\t\t\t\t\tcase 9://'\\t':\n\t\t\t\t\t\tcase 13://'\\r':\n\t\t\t\t\t\tcase 0x2028: // LS (Line separator)\n\t\t\t\t\t\tcase 0x2029: // PS (paragraph separate)\n\t\t\t\t\t\tcase 0xFEFF://'\\uFEFF':\n\t\t\t\t\t\t\t//_DEBUG_WHITESPACE && console.log( \"Whitespace...\", word, parse_context );\n\t\t\t\t\t\t\tif( word == WORD_POS_END ) {\n\t\t\t\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN ) {\n\t\t\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t} else if( parse_context == CONTEXT_OBJECT_FIELD_VALUE ) {\n\t\t\t\t\t\t\t\t\tword = WORD_POS_AFTER_FIELD_VALUE;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t} else if( parse_context == CONTEXT_OBJECT_FIELD ) {\n\t\t\t\t\t\t\t\t\tword = WORD_POS_AFTER_FIELD;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t} else if( parse_context == CONTEXT_IN_ARRAY ) {\n\t\t\t\t\t\t\t\t\tword = WORD_POS_AFTER_FIELD;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET || ( word == WORD_POS_AFTER_FIELD ))\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\telse if( word == WORD_POS_FIELD ) {\n\t\t\t\t\t\t\t\tif( val.string.length )\n\t\t\t\t\t\t\t\t\tword = WORD_POS_AFTER_FIELD;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tif( word < WORD_POS_END ) \n\t\t\t\t\t\t\t\t\trecoverIdent( cInt );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t//----------------------------------------------------------\n\t\t\t\t\t//  catch characters for true/false/null/undefined which are values outside of quotes\n\t\t\t\t\t\tcase 116://'t':\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET ) word = WORD_POS_TRUE_1;\n\t\t\t\t\t\t\telse if( word == WORD_POS_INFINITY_6 ) word = WORD_POS_INFINITY_7;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 114://'r':\n\t\t\t\t\t\t\tif( word == WORD_POS_TRUE_1 ) word = WORD_POS_TRUE_2;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 117://'u':\n\t\t\t\t\t\t\tif( word == WORD_POS_TRUE_2 ) word = WORD_POS_TRUE_3;\n\t\t\t\t\t\t\telse if( word == WORD_POS_NULL_1 ) word = WORD_POS_NULL_2;\n\t\t\t\t\t\t\telse if( word == WORD_POS_RESET ) word = WORD_POS_UNDEFINED_1;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 101://'e':\n\t\t\t\t\t\t\tif( word == WORD_POS_TRUE_3 ) {\n\t\t\t\t\t\t\t\tval.value_type = VALUE_TRUE;\n\t\t\t\t\t\t\t\tword = WORD_POS_END;\n\t\t\t\t\t\t\t} else if( word == WORD_POS_FALSE_4 ) {\n\t\t\t\t\t\t\t\tval.value_type = VALUE_FALSE;\n\t\t\t\t\t\t\t\tword = WORD_POS_END;\n\t\t\t\t\t\t\t} else if( word == WORD_POS_UNDEFINED_3 ) word = WORD_POS_UNDEFINED_4;\n\t\t\t\t\t\t\telse if( word == WORD_POS_UNDEFINED_7 ) word = WORD_POS_UNDEFINED_8;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 110://'n':\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET ) word = WORD_POS_NULL_1;\n\t\t\t\t\t\t\telse if( word == WORD_POS_UNDEFINED_1 ) word = WORD_POS_UNDEFINED_2;\n\t\t\t\t\t\t\telse if( word == WORD_POS_UNDEFINED_6 ) word = WORD_POS_UNDEFINED_7;\n\t\t\t\t\t\t\telse if( word == WORD_POS_INFINITY_1 ) word = WORD_POS_INFINITY_2;\n\t\t\t\t\t\t\telse if( word == WORD_POS_INFINITY_4 ) word = WORD_POS_INFINITY_5;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 100://'d':\n\t\t\t\t\t\t\tif( word == WORD_POS_UNDEFINED_2 ) word = WORD_POS_UNDEFINED_3;\n\t\t\t\t\t\t\telse if( word == WORD_POS_UNDEFINED_8 ) { val.value_type=VALUE_UNDEFINED; word = WORD_POS_END; }\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 105://'i':\n\t\t\t\t\t\t\tif( word == WORD_POS_UNDEFINED_5 ) word = WORD_POS_UNDEFINED_6;\n\t\t\t\t\t\t\telse if( word == WORD_POS_INFINITY_3 ) word = WORD_POS_INFINITY_4;\n\t\t\t\t\t\t\telse if( word == WORD_POS_INFINITY_5 ) word = WORD_POS_INFINITY_6;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 108://'l':\n\t\t\t\t\t\t\tif( word == WORD_POS_NULL_2 ) word = WORD_POS_NULL_3;\n\t\t\t\t\t\t\telse if( word == WORD_POS_NULL_3 ) {\n\t\t\t\t\t\t\t\tval.value_type = VALUE_NULL;\n\t\t\t\t\t\t\t\tword = WORD_POS_END;\n\t\t\t\t\t\t\t} else if( word == WORD_POS_FALSE_2 ) word = WORD_POS_FALSE_3;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 102://'f':\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET ) word = WORD_POS_FALSE_1;\n\t\t\t\t\t\t\telse if( word == WORD_POS_UNDEFINED_4 ) word = WORD_POS_UNDEFINED_5;\n\t\t\t\t\t\t\telse if( word == WORD_POS_INFINITY_2 ) word = WORD_POS_INFINITY_3;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 97://'a':\n\t\t\t\t\t\t\tif( word == WORD_POS_FALSE_1 ) word = WORD_POS_FALSE_2;\n\t\t\t\t\t\t\telse if( word == WORD_POS_NAN_1 ) word = WORD_POS_NAN_2;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 115://'s':\n\t\t\t\t\t\t\tif( word == WORD_POS_FALSE_3 ) word = WORD_POS_FALSE_4;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 73://'I':\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET ) word = WORD_POS_INFINITY_1;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 78://'N':\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET ) word = WORD_POS_NAN_1;\n\t\t\t\t\t\t\telse if( word == WORD_POS_NAN_2 ) { val.value_type = negative ? VALUE_NEG_NAN : VALUE_NAN; negative = false; word = WORD_POS_END; }\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 121://'y':\n\t\t\t\t\t\t\tif( word == WORD_POS_INFINITY_7 ) { val.value_type = negative ? VALUE_NEG_INFINITY : VALUE_INFINITY; negative = false; word = WORD_POS_END; }\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 45://'-':\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET ) negative = !negative;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 43://'+':\n\t\t\t\t\t\t\tif( word !== WORD_POS_RESET ) { recoverIdent(cInt); }\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak; // default of high level switch\n\t\t\t\t\t//\n\t\t\t\t\t//----------------------------------------------------------\n\t\t\t\t\t}\n\t\t\t\t\tif( completed ) {\n\t\t\t\t\t\tif( word == WORD_POS_END ) {\n\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif( n == buf.length ) {\n\t\t\t\t\tdropBuffer( input );\n\t\t\t\t\tif( val.value_type == VALUE_UNSET && ( complete_at_end && word != WORD_POS_RESET ) ) {\n\t\t\t\t\t\trecoverIdent( 32 ); // whitespace isn't appended...\n\t\t\t\t\t}\n\t\t\t\t\tif( gatheringString || gatheringNumber || parse_context == CONTEXT_OBJECT_FIELD ) {\n\t\t\t\t\t\tretval = 0;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN && ( val.value_type != VALUE_UNSET || result ) ) {\n\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\tretval = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// put these back into the stack.\n\t\t\t\t\tinput.n = n;\n\t\t\t\t\tinQueue.unshift( input );\n\t\t\t\t\tretval = 2;  // if returning buffers, then obviously there's more in this one.\n\t\t\t\t}\n\t\t\t\tif( completed ) {\n\t\t\t\t\trootObject = null;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif( !status ) return -1;\n\t\t\tif( completed && val.value_type != VALUE_UNSET ) {\n\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\tresult = convertValue();\n\t\t\t\t//_DEBUG_PARSING && console.log( \"Result(3):\", result );\n\t\t\t\tnegative = false;\n\t\t\t\tval.string = '';\n\t\t\t\tval.value_type = VALUE_UNSET;\n\t\t\t}\n\t\t\tcompleted = false;\n\t\t\treturn retval;\n\t\t}\n\t}\n}\n\n\n\nconst _parser = [Object.freeze( JSOX.begin() )];\nlet _parse_level = 0;\n/**\n * parse a string resulting with one value from it.\n *\n * @template T\n * @param {string} msg \n * @param {(this: any, key: string, value: any) => any} [reviver] \n * @returns {T}\n */\nJSOX.parse = function( msg, reviver ) {\n\tlet parse_level = _parse_level++;\n\tlet parser;\n\tif( _parser.length <= parse_level )\n\t\t_parser.push( Object.freeze( JSOX.begin() ) );\n\tparser = _parser[parse_level];\n\tif (typeof msg !== \"string\") msg = String(msg);\n\tparser.reset();\n\tconst writeResult = parser._write( msg, true );\n\tif( writeResult > 0 ) {\n\t\tif( writeResult > 1 ){\n\t\t\t// probably a carriage return.\n\t\t\t//console.log( \"Extra data at end of message\");\n\t\t}\n\t\tlet result = parser.value();\n\t\tif( ( \"undefined\" === typeof result ) && writeResult > 1 ){\n\t\t\tthrow new Error( \"Pending value could not complete\");\n\t\t}\n\n\t\tresult = typeof reviver === 'function' ? (function walk(holder, key) {\n\t\t\tlet k, v, value = holder[key];\n\t\t\tif (value && typeof value === 'object') {\n\t\t\t\tfor (k in value) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(value, k)) {\n\t\t\t\t\t\tv = walk(value, k);\n\t\t\t\t\t\tif (v !== undefined) {\n\t\t\t\t\t\t\tvalue[k] = v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdelete value[k];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn reviver.call(holder, key, value);\n\t\t}({'': result}, '')) : result;\n\t\t_parse_level--;\n\t\treturn result;\n\t}\n\tparser.finalError();\n\treturn undefined;\n}\n\n\nfunction this_value() {/*//_DEBUG_STRINGIFY&&console.log( \"this:\", this, \"valueof:\", this&&this.valueOf() );*/ \n\treturn this&&this.valueOf();\n}\n\n/**\n * Define a class to be used for serialization; the class allows emitting the class fields ahead of time, and just provide values later.\n * @param {string} name \n * @param {object} obj \n */\nJSOX.defineClass = function( name, obj ) {\n\tlet cls;\n\tlet denormKeys = Object.keys(obj);\n\tfor( let i = 1; i < denormKeys.length; i++ ) {\n\t\tlet a, b;\n\t\tif( ( a = denormKeys[i-1] ) > ( b = denormKeys[i] ) ) {\n\t\t\tdenormKeys[i-1] = b;\n\t\t\tdenormKeys[i] = a;\n\t\t\tif( i ) i-=2; // go back 2, this might need to go further pack.\n\t\t\telse i--; // only 1 to check.\n\t\t}\n\t}\n\t//console.log( \"normalized:\", denormKeys );\n\tcommonClasses.push( cls = { name : name\n\t\t   , tag:denormKeys.toString()\n\t\t   , proto : Object.getPrototypeOf(obj)\n\t\t   , fields : Object.keys(obj) } );\n\tfor(let n = 1; n < cls.fields.length; n++) {\n\t\tif( cls.fields[n] < cls.fields[n-1] ) {\n\t\t\tlet tmp = cls.fields[n-1];\n\t\t\tcls.fields[n-1] = cls.fields[n];\n\t\t\tcls.fields[n] = tmp;\n\t\t\tif( n > 1 )\n\t\t\t\tn-=2;\n\t\t}\n\t}\n\tif( cls.proto === Object.getPrototypeOf( {} ) ) cls.proto = null;\n}\n\n/**\n * deprecated; define a class to be used for serialization\n *\n * @param {string} named\n * @param {class} ptype\n * @param {(any)=>any} f\n */\nJSOX.registerToJSOX = function( name, ptype, f ) {\n\tthrow new Error( \"registerToJSOX deprecated; please use toJSOX:\" + prototypeName + prototype.toString() );\n}\n\n/**\n * define a class with special serialization rules.\n *\n * @param {string} named\n * @param {class} ptype\n * @param {(any)=>any} f\n */\nJSOX.toJSOX = function( name, ptype, f ) {\n\t//console.log( \"SET OBJECT TYPE:\", ptype, ptype.prototype, Object.prototype, ptype.constructor );\n\tif( !ptype.prototype || ptype.prototype !== Object.prototype ) {\n\t\tif( toProtoTypes.get(ptype.prototype) ) throw new Error( \"Existing toJSOX has been registered for prototype\" );\n\t\t//_DEBUG_PARSING && console.log( \"PUSH PROTOTYPE\" );\n\t\ttoProtoTypes.set( ptype.prototype, { external:true, name:name||f.constructor.name, cb:f } );\n\t} else {\n\t\tlet key = Object.keys( ptype ).toString();\n\t\tif( toObjectTypes.get(key) ) throw new Error( \"Existing toJSOX has been registered for object type\" );\n\t\t//console.log( \"TEST SET OBJECT TYPE:\", key );\n\t\ttoObjectTypes.set( key, { external:true, name:name, cb:f } );\n\t}\n}\n\n/**\n * define a class to be used for deserialization\n * @param {string} prototypeName \n * @param {class} o \n * @param {(any)=>any} f \n */\nJSOX.fromJSOX = function( prototypeName, o, f ) {\n\tfunction privateProto() { }\n\t\tif( !o ) o = privateProto.prototype;\n\t\tif( fromProtoTypes.get(prototypeName) ) throw new Error( \"Existing fromJSOX has been registered for prototype\" );\n\t\tif( o && !(\"constructor\" in o )){\n\t\t\tthrow new Error( \"Please pass a prototype like thing...\");\n\t}\n\tfromProtoTypes.set( prototypeName, {protoCon: o.prototype.constructor, cb:f } );\n\n}\n\n\n/**\n * deprecated; use fromJSOX instead\n */\nJSOX.registerFromJSOX = function( prototypeName, o /*, f*/ ) {\n\tthrow new Error( \"deprecated; please adjust code to use fromJSOX:\" + prototypeName + o.toString() );\n}\n\n/**\n * Define serialization and deserialization methods for a class.\n * This is the same as registering separately with toJSOX and fromJSOX methods.\n * \n * @param {string} name - Name used to prefix objects of this type encoded in JSOX\n * @param {class} prototype - prototype to match when serializing, and to create instaces of when deserializing.\n * @param {(stringifier:JSOXStringifier)=>{string}} to - `this` is the value to convert; function to call to encode JSOX from an object\n * @param {(field:string,val:any)=>{any}} from - handle storing revived value in class\n */\nJSOX.addType = function( prototypeName, prototype, to, from ) {\n\tJSOX.toJSOX( prototypeName, prototype, to );\n\tJSOX.fromJSOX( prototypeName, prototype, from );\n}\n\nJSOX.registerToFrom = function( prototypeName, prototype/*, to, from*/ ) {\n\tthrow new Error( \"registerToFrom deprecated; please use addType:\" + prototypeName + prototype.toString() );\n}\n\n/**\n * Create a stringifier to convert objects to JSOX text.  Allows defining custom serialization for objects.\n * @returns {JSOXStringifier}\n */\nJSOX.stringifier = function() {\n\tlet classes = [];\n\tlet useQuote = '\"';\n\n\tlet fieldMap = new WeakMap();\n\tconst path = [];\n\tlet encoding = [];\n\tconst localToProtoTypes = new WeakMap();\n\tconst localToObjectTypes = new Map();\n\tlet objectToJSOX = null;\n\tconst stringifying = []; // things that have been stringified through external toJSOX; allows second pass to skip this toJSOX pass and encode 'normally'\n\tlet ignoreNonEnumerable = false;\n\tfunction getIdentifier(s) {\n\t\n\t\tif( ( \"string\" === typeof s ) && s === '' ) return '\"\"';\n\t\tif( ( \"number\" === typeof s ) && !isNaN( s ) ) {\n\t\t\treturn [\"'\",s.toString(),\"'\"].join('');\n\t\t}\n\t\t// should check also for if any non ident in string...\n\t\tif( s.includes( \"\\u{FEFF}\" ) ) return (useQuote + JSOX.escape(s) +useQuote);\n\t\treturn ( ( s in keywords /* [ \"true\",\"false\",\"null\",\"NaN\",\"Infinity\",\"undefined\"].find( keyword=>keyword===s )*/\n\t\t\t|| /[0-9\\-]/.test(s[0])\n\t\t\t|| /[\\n\\r\\t #\\[\\]{}()<>\\~!+*/.:,\\-\"'`]/.test( s ) )?(useQuote + JSOX.escape(s) +useQuote):s )\n\t}\n\n\n\t/* init prototypes */\n\tif( !toProtoTypes.get( Object.prototype ) )\n\t{\n\t\ttoProtoTypes.set( Object.prototype, { external:false, name:Object.prototype.constructor.name, cb:null } );\n\t   \n\t\t// function https://stackoverflow.com/a/17415677/4619267\n\t\ttoProtoTypes.set( Date.prototype, { external:false,\n\t\t\tname : \"Date\",\n\t\t\tcb : function () {\n\t\t\t\t\tif( this.getTime()=== -62167219200000) \n\t\t\t\t\t{\n\t\t\t\t\t\treturn \"0000-01-01T00:00:00.000Z\";\n\t\t\t\t\t}\n\t\t\t\t\tlet tzo = -this.getTimezoneOffset(),\n\t\t\t\t\tdif = tzo >= 0 ? '+' : '-',\n\t\t\t\t\tpad = function(num) {\n\t\t\t\t\t\tlet norm = Math.floor(Math.abs(num));\n\t\t\t\t\t\treturn (norm < 10 ? '0' : '') + norm;\n\t\t\t\t\t},\n\t\t\t\t\tpad3 = function(num) {\n\t\t\t\t\t\tlet norm = Math.floor(Math.abs(num));\n\t\t\t\t\t\treturn (norm < 100 ? '0' : '') + (norm < 10 ? '0' : '') + norm;\n\t\t\t\t\t};\n\t\t\t\treturn [this.getFullYear() ,\n\t\t\t\t\t'-' , pad(this.getMonth() + 1) ,\n\t\t\t\t\t'-' , pad(this.getDate()) ,\n\t\t\t\t\t'T' , pad(this.getHours()) ,\n\t\t\t\t\t':' , pad(this.getMinutes()) ,\n\t\t\t\t\t':' , pad(this.getSeconds()) ,\n\t\t\t\t\t'.' + pad3(this.getMilliseconds()) +\n\t\t\t\t\tdif , pad(tzo / 60) ,\n\t\t\t\t\t':' , pad(tzo % 60)].join(\"\");\n\t\t\t} \n\t\t} );\n\t\ttoProtoTypes.set( DateNS.prototype, { external:false,\n\t\t\tname : \"DateNS\",\n\t\t\tcb : function () {\n\t\t\t\tlet tzo = -this.getTimezoneOffset(),\n\t\t\t\t\tdif = tzo >= 0 ? '+' : '-',\n\t\t\t\t\tpad = function(num) {\n\t\t\t\t\t\tlet norm = Math.floor(Math.abs(num));\n\t\t\t\t\t\treturn (norm < 10 ? '0' : '') + norm;\n\t\t\t\t\t},\n\t\t\t\t\tpad3 = function(num) {\n\t\t\t\t\t\tlet norm = Math.floor(Math.abs(num));\n\t\t\t\t\t\treturn (norm < 100 ? '0' : '') + (norm < 10 ? '0' : '') + norm;\n\t\t\t\t\t},\n\t\t\t\t\tpad6 = function(num) {\n\t\t\t\t\t\tlet norm = Math.floor(Math.abs(num));\n\t\t\t\t\t\treturn (norm < 100000 ? '0' : '') + (norm < 10000 ? '0' : '') + (norm < 1000 ? '0' : '') + (norm < 100 ? '0' : '') + (norm < 10 ? '0' : '') + norm;\n\t\t\t\t\t};\n\t\t\t\treturn [this.getFullYear() ,\n\t\t\t\t\t'-' , pad(this.getMonth() + 1) ,\n\t\t\t\t\t'-' , pad(this.getDate()) ,\n\t\t\t\t\t'T' , pad(this.getHours()) ,\n\t\t\t\t\t':' , pad(this.getMinutes()) ,\n\t\t\t\t\t':' , pad(this.getSeconds()) ,\n\t\t\t\t\t'.' + pad3(this.getMilliseconds()) + pad6(this.ns) +\n\t\t\t\t\tdif , pad(tzo / 60) ,\n\t\t\t\t\t':' , pad(tzo % 60)].join(\"\");\n\t\t\t} \n\t\t} );\n\t\ttoProtoTypes.set( Boolean.prototype, { external:false, name:\"Boolean\", cb:this_value  } );\n\t\ttoProtoTypes.set( Number.prototype, { external:false, name:\"Number\"\n\t\t    , cb:function(){ \n\t\t\t\tif( isNaN(this) )  return \"NaN\";\n\t\t\t\treturn (isFinite(this))\n\t\t\t\t\t? String(this)\n\t\t\t\t\t: (this<0)?\"-Infinity\":\"Infinity\";\n\t\t    }\n\t\t} );\n\t\ttoProtoTypes.set( String.prototype, { external:false\n\t\t    , name : \"String\"\n\t\t    , cb:function(){ return '\"' + JSOX.escape(this_value.apply(this)) + '\"' } } );\n\t\tif( typeof BigInt === \"function\" )\n\t\t\ttoProtoTypes.set( BigInt.prototype\n\t\t\t     , { external:false, name:\"BigInt\", cb:function() { return this + 'n' } } );\n\t   \n\t\ttoProtoTypes.set( ArrayBuffer.prototype, { external:true, name:\"ab\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this))+\"]\" }\n\t\t} );\n\t   \n\t\ttoProtoTypes.set( Uint8Array.prototype, { external:true, name:\"u8\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\ttoProtoTypes.set( Uint8ClampedArray.prototype, { external:true, name:\"uc8\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\ttoProtoTypes.set( Int8Array.prototype, { external:true, name:\"s8\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\ttoProtoTypes.set( Uint16Array.prototype, { external:true, name:\"u16\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\ttoProtoTypes.set( Int16Array.prototype, { external:true, name:\"s16\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\ttoProtoTypes.set( Uint32Array.prototype, { external:true, name:\"u32\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\ttoProtoTypes.set( Int32Array.prototype, { external:true, name:\"s32\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\t/*\n\t\tif( typeof Uint64Array != \"undefined\" )\n\t\t\ttoProtoTypes.set( Uint64Array.prototype, { external:true, name:\"u64\"\n\t\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t\t} );\n\t\tif( typeof Int64Array != \"undefined\" )\n\t\t\ttoProtoTypes.set( Int64Array.prototype, { external:true, name:\"s64\"\n\t\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t\t} );\n\t\t*/\n\t\ttoProtoTypes.set( Float32Array.prototype, { external:true, name:\"f32\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\ttoProtoTypes.set( Float64Array.prototype, { external:true, name:\"f64\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\ttoProtoTypes.set( Float64Array.prototype, { external:true, name:\"f64\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t   \n\t\ttoProtoTypes.set( RegExp.prototype, mapToJSOX = { external:true, name:\"regex\"\n\t\t    , cb:function(o,stringifier){\n\t\t\t\treturn \"'\"+escape(this.source)+\"'\";\n\t\t\t}\n\t\t} );\n\t\tfromProtoTypes.set( \"regex\", { protoCon:RegExp, cb:function (field,val){\n\t\t\treturn new RegExp( this );\n\t\t} } );\n\n\t\ttoProtoTypes.set( Map.prototype, mapToJSOX = { external:true, name:\"map\"\n\t\t    , cb:null\n\t\t} );\n\t\tfromProtoTypes.set( \"map\", { protoCon:Map, cb:function (field,val){\n\t\t\tif( field ) {\n\t\t\t\tthis.set( field, val );\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn this;\n\t\t} } );\n\t   \n\t\ttoProtoTypes.set( Array.prototype, arrayToJSOX = { external:false, name:Array.prototype.constructor.name\n\t\t    , cb: null\t\t    \n\t\t} );\n\n\t}\n\n\tconst stringifier = {\n\t\tdefineClass(name,obj) { \n\t\t\tlet cls; \n\t\t\tlet denormKeys = Object.keys(obj);\n\t\t\tfor( let i = 1; i < denormKeys.length; i++ ) {\n\t\t\t\t// normalize class key order\n\t\t\t\tlet a, b;\n\t\t\t\tif( ( a = denormKeys[i-1] ) > ( b = denormKeys[i] ) ) {\n\t\t\t\t\tdenormKeys[i-1] = b;\n\t\t\t\t\tdenormKeys[i] = a;\n\t\t\t\t\tif( i ) i-=2; // go back 2, this might need to go further pack.\n\t\t\t\t\telse i--; // only 1 to check.\n\t\t\t\t}\n\t\t\t}\n\t\t\tclasses.push( cls = { name : name\n\t\t\t       , tag:denormKeys.toString()\n\t\t\t       , proto : Object.getPrototypeOf(obj)\n\t\t\t       , fields : Object.keys(obj) } );\n\n\t\t\tfor(let n = 1; n < cls.fields.length; n++) {\n\t\t\t\tif( cls.fields[n] < cls.fields[n-1] ) {\n\t\t\t\t\tlet tmp = cls.fields[n-1];\n\t\t\t\t\tcls.fields[n-1] = cls.fields[n];\n\t\t\t\t\tcls.fields[n] = tmp;\n\t\t\t\t\tif( n > 1 )\n\t\t\t\t\t\tn-=2;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( cls.proto === Object.getPrototypeOf( {} ) ) cls.proto = null;\n\t\t},\n\t\tsetDefaultObjectToJSOX( cb ) { objectToJSOX = cb },\n\t\tisEncoding(o) {\n\t\t\t//console.log( \"is object encoding?\", encoding.length, o, encoding );\n\t\t\treturn !!encoding.find( (eo,i)=>eo===o && i < (encoding.length-1) )\n\t\t},\n\t\tencodeObject(o) {\n\t\t\tif( objectToJSOX ) \n\t\t\t\treturn objectToJSOX.apply(o, [this]);\n\t\t\treturn o;\n\t\t},\n\t\tstringify(o,r,s) { return stringify(o,r,s) },\n\t\tsetQuote(q) { useQuote = q; },\n\t\tregisterToJSOX(n,p,f) { return this.toJSOX( n,p,f ) },\n\t\ttoJSOX( name, ptype, f ) {\n\t\t\tif( ptype.prototype && ptype.prototype !== Object.prototype ) {\n\t\t\t\tif( localToProtoTypes.get(ptype.prototype) ) throw new Error( \"Existing toJSOX has been registered for prototype\" );\n\t\t\t\tlocalToProtoTypes.set( ptype.prototype, { external:true, name:name||f.constructor.name, cb:f } );\n\t\t\t} else {\n\t\t\t\tlet key = Object.keys( ptype ).toString();\n\t\t\t\tif( localToObjectTypes.get(key) ) throw new Error( \"Existing toJSOX has been registered for object type\" );\n\t\t\t\tlocalToObjectTypes.set( key, { external:true, name:name, cb:f } );\n\t\t\t}\n\t\t},\n\t\tget ignoreNonEnumerable() { return ignoreNonEnumerable; },\n\t\tset ignoreNonEnumerable(val) { ignoreNonEnumerable = val; },\n\t}\n\treturn stringifier;\n\n\t/**\n\t * get a reference to a previously seen object\n\t * @param {any} here \n\t * @returns reference to existing object, or undefined if not found.\n\t */\n\tfunction getReference( here ) {\n\t\tif( here === null ) return undefined;\n\t\tlet field = fieldMap.get( here );\n\t\t//_DEBUG_STRINGIFY && console.log( \"path:\", _JSON.stringify(path), field );\n\t\tif( !field ) {\n\t\t\tfieldMap.set( here, _JSON.stringify(path) );\n\t\t\treturn undefined;\n\t\t}\n\t\treturn \"ref\"+field;\n\t}\n\n\n\t/**\n\t * find the prototype definition for a class\n\t * @param {object} o \n\t * @param {map} useK \n\t * @returns object\n\t */\n\tfunction matchObject(o,useK) {\n\t\tlet k;\n\t\tlet cls;\n\t\tlet prt = Object.getPrototypeOf(o);\n\t\tcls = classes.find( cls=>{\n\t\t\tif( cls.proto && cls.proto === prt ) return true;\n\t\t} );\n\t\tif( cls ) return cls;\n\n\t\tif( classes.length || commonClasses.length ) {\n\t\t\tif( useK )  {\n\t\t\t\tuseK = useK.map( v=>{ if( typeof v === \"string\" ) return v; else return undefined; } );\n\t\t\t\tk = useK.toString();\n\t\t\t} else {\n\t\t\t\tlet denormKeys = Object.keys(o);\n\t\t\t\tfor( let i = 1; i < denormKeys.length; i++ ) {\n\t\t\t\t\tlet a, b;\n\t\t\t\t\tif( ( a = denormKeys[i-1] ) > ( b = denormKeys[i] ) ) {\n\t\t\t\t\t\tdenormKeys[i-1] = b;\n\t\t\t\t\t\tdenormKeys[i] = a;\n\t\t\t\t\t\tif( i ) i-=2; // go back 2, this might need to go further pack.\n\t\t\t\t\t\telse i--; // only 1 to check.\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tk = denormKeys.toString();\n\t\t\t}\n\t\t\tcls = classes.find( cls=>{\n\t\t\t\tif( cls.tag === k ) return true;\n\t\t\t} );\n\t\t\tif( !cls )\n\t\t\t\tcls = commonClasses.find( cls=>{\n\t\t\t\t\tif( cls.tag === k ) return true;\n\t\t\t\t} );\n\t\t}\n\t\treturn cls;\n\t}\n\n\t/**\n\t * Serialize an object to JSOX text.\n\t * @param {any} object \n\t * @param {(key:string,value:any)=>string} replacer \n\t * @param {string|number} space \n\t * @returns \n\t */\n\tfunction stringify( object, replacer, space ) {\n\t\tif( object === undefined ) return \"undefined\";\n\t\tif( object === null ) return;\n\t\tlet gap;\n\t\tlet indent;\n\t\tlet rep;\n\n\t\tlet i;\n\t\tconst spaceType = typeof space;\n\t\tconst repType = typeof replacer;\n\t\tgap = \"\";\n\t\tindent = \"\";\n\n\t\t// If the space parameter is a number, make an indent string containing that\n\t\t// many spaces.\n\n\t\tif (spaceType === \"number\") {\n\t\t\tfor (i = 0; i < space; i += 1) {\n\t\t\t\tindent += \" \";\n\t\t\t}\n\n\t\t// If the space parameter is a string, it will be used as the indent string.\n\t\t} else if (spaceType === \"string\") {\n\t\t\tindent = space;\n\t\t}\n\n\t\t// If there is a replacer, it must be a function or an array.\n\t\t// Otherwise, throw an error.\n\n\t\trep = replacer;\n\t\tif( replacer && repType !== \"function\"\n\t\t    && ( repType !== \"object\"\n\t\t       || typeof replacer.length !== \"number\"\n\t\t   )) {\n\t\t\tthrow new Error(\"JSOX.stringify\");\n\t\t}\n\n\t\tpath.length = 0;\n\t\tfieldMap = new WeakMap();\n\n\t\tconst finalResult = str( \"\", {\"\":object} );\n\t\tcommonClasses.length = 0;\n\t\treturn finalResult;\n\n\t\t// from https://github.com/douglascrockford/JSON-js/blob/master/json2.js#L181\n\t\tfunction str(key, holder) {\n\t\t\tvar mind = gap;\n\t\t\tconst doArrayToJSOX_ = arrayToJSOX.cb;\n\t\t\tconst mapToObject_ = mapToJSOX.cb;\t\t \n\t\t\tarrayToJSOX.cb = doArrayToJSOX;\n\t\t\tmapToJSOX.cb = mapToObject;\n\t\t\tconst v = str_(key,holder);\n\t\t\tarrayToJSOX.cb = doArrayToJSOX_;\n\t\t\tmapToJSOX.cb = mapToObject_;\n\t\t\treturn v;\n\n\t\t\tfunction doArrayToJSOX() {\n\t\t\t\tlet v;\n\t\t\t\tlet partial = [];\n\t\t\t\tlet thisNodeNameIndex = path.length;\n\n\t\t\t\t// The value is an array. Stringify every element. Use null as a placeholder\n\t\t\t\t// for non-JSOX values.\n\t\t\t\n\t\t\t\tfor (let i = 0; i < this.length; i += 1) {\n\t\t\t\t\tpath[thisNodeNameIndex] = i;\n\t\t\t\t\tpartial[i] = str(i, this) || \"null\";\n\t\t\t\t}\n\t\t\t\tpath.length = thisNodeNameIndex;\n\t\t\t\t//console.log( \"remove encoding item\", thisNodeNameIndex, encoding.length);\n\t\t\t\tencoding.length = thisNodeNameIndex;\n\t\t\t\n\t\t\t\t// Join all of the elements together, separated with commas, and wrap them in\n\t\t\t\t// brackets.\n\t\t\t\tv = ( partial.length === 0\n\t\t\t\t\t? \"[]\"\n\t\t\t\t\t: gap\n\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\"[\\n\"\n\t\t\t\t\t\t\t, gap\n\t\t\t\t\t\t\t, partial.join(\",\\n\" + gap)\n\t\t\t\t\t\t\t, \"\\n\"\n\t\t\t\t\t\t\t, mind\n\t\t\t\t\t\t\t, \"]\"\n\t\t\t\t\t\t].join(\"\")\n\t\t\t\t\t\t: \"[\" + partial.join(\",\") + \"]\" );\n\t\t\t\treturn v;\n\t\t\t} \n\t\t\tfunction mapToObject(){\n\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"---------- NEW MAP -------------\" );\n\t\t\t\tlet tmp = {tmp:null};\n\t\t\t\tlet out = '{'\n\t\t\t\tlet first = true;\n\t\t\t\t//console.log( \"CONVERT:\", map);\n\t\t\t\tfor (let [key, value] of this) {\n\t\t\t\t\t//console.log( \"er...\", key, value )\n\t\t\t\t\ttmp.tmp = value;\n\t\t\t\t\tlet thisNodeNameIndex = path.length;\n\t\t\t\t\tpath[thisNodeNameIndex] = key;\n\t\t\t\t\t\t\t\n\t\t\t\t\tout += (first?\"\":\",\") + getIdentifier(key) +':' + str(\"tmp\", tmp);\n\t\t\t\t\tpath.length = thisNodeNameIndex;\n\t\t\t\t\tfirst = false;\n\t\t\t\t}\n\t\t\t\tout += '}';\n\t\t\t\t//console.log( \"out is:\", out );\n\t\t\t\treturn out;\n\t\t\t}\n\n\t\t// Produce a string from holder[key].\n\t\tfunction str_(key, holder) {\n\n\t\t\tlet i;          // The loop counter.\n\t\t\tlet k;          // The member key.\n\t\t\tlet v;          // The member value.\n\t\t\tlet length;\n\t\t\tlet partialClass;\n\t\t\tlet partial;\n\t\t\tlet thisNodeNameIndex = path.length;\n\t\t\tlet isValue = true;\n\t\t\tlet value = holder[key];\n\t\t\tlet isObject = (typeof value === \"object\");\n\t\t\tlet c;\n\n\t\t\tif( isObject && ( value !== null ) ) {\n\t\t\t\tif( objectToJSOX ){\n\t\t\t\t\tif( !stringifying.find( val=>val===value ) ) {\n\t\t\t\t\t\tstringifying.push( value );\n\t\t\t\t\t\tencoding[thisNodeNameIndex] = value;\n\t\t\t\t\t\tisValue = false;\n\t\t\t\t\t\tvalue = objectToJSOX.apply(value, [stringifier]);\n\t\t\t\t\t\t//console.log( \"Converted by object lookup -it's now a different type\"\n\t\t\t\t\t\t//\t, protoConverter, objectConverter );\n\t\t\t\t\t\tisObject = ( typeof value === \"object\" );\n\t\t\t\t\t\tstringifying.pop();\n\t\t\t\t\t\tencoding.length = thisNodeNameIndex;\n\t\t\t\t\t\tisObject = (typeof value === \"object\");\n\t\t\t\t\t}\n\t\t\t\t\t//console.log( \"Value convereted to:\", key, value );\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst objType = (value !== undefined && value !== null) && Object.getPrototypeOf( value );\n\t\t\t\n\t\t\tlet protoConverter = objType\n\t\t\t\t&& ( localToProtoTypes.get( objType ) \n\t\t\t\t|| toProtoTypes.get( objType ) \n\t\t\t\t|| null )\n\t\t\tlet objectConverter = !protoConverter && (value !== undefined && value !== null) \n\t\t\t\t&& ( localToObjectTypes.get( Object.keys( value ).toString() ) \n\t\t\t\t|| toObjectTypes.get( Object.keys( value ).toString() ) \n\t\t\t\t|| null )\n\n\t\t\t// If we were called with a replacer function, then call the replacer to\n\t\t\t// obtain a replacement value.\n\n\t\t\tif (typeof rep === \"function\") {\n\t\t\t\tisValue = false;\n\t\t\t\tvalue = rep.call(holder, key, value);\n\t\t\t}\n\t\t\t\t//console.log( \"PROTOTYPE:\", Object.getPrototypeOf( value ) )\n\t\t\t\t//console.log( \"PROTOTYPE:\", toProtoTypes.get(Object.getPrototypeOf( value )) )\n\t\t\t\t//if( protoConverter )\n\t\t\t//_DEBUG_STRINGIFY && console.log( \"TEST()\", value, protoConverter, objectConverter );\n\n\t\t\tlet toJSOX = ( protoConverter && protoConverter.cb ) \n\t\t\t          || ( objectConverter && objectConverter.cb );\n\t\t\t// If the value has a toJSOX method, call it to obtain a replacement value.\n\t\t\t//_DEBUG_STRINGIFY && console.log( \"type:\", typeof value, protoConverter, !!toJSOX, path );\n\n\t\t\tif( value !== undefined\n\t\t\t    && value !== null\n\t\t\t\t&& typeof value === \"object\"\n\t\t\t    && typeof toJSOX === \"function\"\n\t\t\t) {\n\t\t\t\tif( !stringifying.find( val=>val===value ) ) {\n\t\t\t\t\tif( typeof value === \"object\" ) {\n\t\t\t\t\t\tv = getReference( value );\n\t\t\t\t\t\tif( v )\treturn v;\n\t\t\t\t\t}\n\n\t\t\t\t\tstringifying.push( value );\n\t\t\t\t\tencoding[thisNodeNameIndex] = value;\n\t\t\t\t\tvalue = toJSOX.call(value, stringifier);\n\t\t\t\t\tisValue = false;\n\t\t\t\t\tstringifying.pop();\n\t\t\t\t\tif( protoConverter && protoConverter.name ) {\n\t\t\t\t\t\t// stringify may return a unquoted string\n\t\t\t\t\t\t// which needs an extra space betwen its tag and value.\n\t\t\t\t\t\tif( \"string\" === typeof value \n\t\t\t\t\t\t\t&& value[0] !== '-'\n\t\t\t\t\t\t\t&& (value[0] < '0' || value[0] > '9' )\n\t\t\t\t\t\t\t&& value[0] !== '\"'\n\t\t\t\t\t\t\t&& value[0] !== '\\'' \n\t\t\t\t\t\t\t&& value[0] !== '`' \n\t\t\t\t\t\t\t&& value[0] !== '[' \n\t\t\t\t\t\t\t&& value[0] !== '{' \n\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\tvalue = ' ' + value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//console.log( \"Value converted:\", value );\n\t\t\t\t\tencoding.length = thisNodeNameIndex;\n\t\t\t\t} else {\n\t\t\t\t\tv = getReference( value );\n\t\t\t\t}\n\t\t} else \n\t\t\t\tif( typeof value === \"object\" ) {\n\t\t\t\t\tv = getReference( value );\n\t\t\t\t\tif( v ) return v;\n\t\t\t\t}\n\n\t\t\t// What happens next depends on the value's type.\n\t\t\tswitch (typeof value) {\n\t\t\tcase \"bigint\":\n\t\t\t\treturn value + 'n';\n\t\t\tcase \"string\":\n\t\t\t\t{\n\t\t\t\t\t//console.log( `Value was converted before?  [${value}]`);\n\t\t\t\t\tvalue = isValue?getIdentifier(value):value;\n\t\t\t\t\tlet c = '';\n\t\t\t\t\tif( key===\"\" )\n\t\t\t\t\t\tc = classes.map( cls=> cls.name+\"{\"+cls.fields.join(\",\")+\"}\" ).join(gap?\"\\n\":\"\")+\n\t\t\t\t\t\t    commonClasses.map( cls=> cls.name+\"{\"+cls.fields.join(\",\")+\"}\" ).join(gap?\"\\n\":\"\")\n\t\t\t\t\t\t\t\t+(gap?\"\\n\":\"\");\n\t\t\t\t\tif( protoConverter && protoConverter.external ) \n\t\t\t\t\t\treturn c + protoConverter.name + value;\n\t\t\t\t\tif( objectConverter && objectConverter.external ) \n\t\t\t\t\t\treturn c + objectConverter.name + value;\n\t\t\t\t\treturn c + value;//useQuote+JSOX.escape( value )+useQuote;\n\t\t\t\t}\n\t\t\tcase \"number\":\n\t\t\tcase \"boolean\":\n\t\t\tcase \"null\":\n\n\t\t\t\t// If the value is a boolean or null, convert it to a string. Note:\n\t\t\t\t// typeof null does not produce \"null\". The case is included here in\n\t\t\t\t// the remote chance that this gets fixed someday.\n\n\t\t\t\treturn String(value);\n\n\t\t\t\t// If the type is \"object\", we might be dealing with an object or an array or\n\t\t\t\t// null.\n\n\t\t\tcase \"object\":\n\t\t\t\t//_DEBUG_STRINGIFY && console.log( \"ENTERINT OBJECT EMISSION WITH:\", v );\n\t\t\t\tif( v ) return v;\n\n\t\t\t\t// Due to a specification blunder in ECMAScript, typeof null is \"object\",\n\t\t\t\t// so watch out for that case.\n\t\t\t\tif (!value) {\n\t\t\t\t\treturn \"null\";\n\t\t\t\t}\n\n\t\t\t\t// Make an array to hold the partial results of stringifying this object value.\n\t\t\t\tgap += indent;\n\t\t\t\tpartialClass = null;\n\t\t\t\tpartial = [];\n\n\t\t\t\t// If the replacer is an array, use it to select the members to be stringified.\n\t\t\t\tif (rep && typeof rep === \"object\") {\n\t\t\t\t\tlength = rep.length;\n\t\t\t\t\tpartialClass = matchObject( value, rep );\n\t\t\t\t\tfor (i = 0; i < length; i += 1) {\n\t\t\t\t\t\tif (typeof rep[i] === \"string\") {\n\t\t\t\t\t\t\tk = rep[i];\n\t\t\t\t\t\t\tpath[thisNodeNameIndex] = k;\n\t\t\t\t\t\t\tv = str(k, value);\n\n\t\t\t\t\t\t\tif (v !== undefined ) {\n\t\t\t\t\t\t\t\tif( partialClass ) {\n\t\t\t\t\t\t\t\t\tpartial.push(v);\n\t\t\t\t\t\t\t\t} else\n\t\t\t\t\t\t\t\t\tpartial.push( getIdentifier(k) \n\t\t\t\t\t\t\t\t\t+ (\n\t\t\t\t\t\t\t\t\t\t(gap)\n\t\t\t\t\t\t\t\t\t\t\t? \": \"\n\t\t\t\t\t\t\t\t\t\t\t: \":\"\n\t\t\t\t\t\t\t\t\t) + v);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpath.splice( thisNodeNameIndex, 1 );\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise, iterate through all of the keys in the object.\n\t\t\t\t\tpartialClass = matchObject( value );\n\t\t\t\t\tlet keys = [];\n\t\t\t\t\tfor (k in value) {\n\t\t\t\t\t\tif( ignoreNonEnumerable )\n\t\t\t\t\t\t\tif( !Object.prototype.propertyIsEnumerable.call( value, k ) ){\n\t\t\t\t\t\t\t\t//_DEBUG_STRINGIFY && console.log( \"skipping non-enuerable?\", k );\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(value, k)) {\n\t\t\t\t\t\t\tlet n;\n\t\t\t\t\t\t\tfor( n = 0; n < keys.length; n++ ) \n\t\t\t\t\t\t\t\tif( keys[n] > k ) {\t\n\t\t\t\t\t\t\t\t\tkeys.splice(n,0,k );\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif( n == keys.length )\n\t\t\t\t\t\t\t\tkeys.push(k);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor(let n = 0; n < keys.length; n++) {\n\t\t\t\t\t\tk = keys[n];\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(value, k)) {\n\t\t\t\t\t\t\tpath[thisNodeNameIndex] = k;\n\t\t\t\t\t\t\tv = str(k, value);\n\n\t\t\t\t\t\t\tif (v !== undefined ) {\n\t\t\t\t\t\t\t\tif( partialClass ) {\n\t\t\t\t\t\t\t\t\tpartial.push(v);\n\t\t\t\t\t\t\t\t} else\n\t\t\t\t\t\t\t\t\tpartial.push(getIdentifier(k) + (\n\t\t\t\t\t\t\t\t\t\t(gap)\n\t\t\t\t\t\t\t\t\t\t\t? \": \"\n\t\t\t\t\t\t\t\t\t\t\t: \":\"\n\t\t\t\t\t\t\t\t\t) + v);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpath.splice( thisNodeNameIndex, 1 );\n\t\t\t\t}\n\n\t\t\t\t// Join all of the member texts together, separated with commas,\n\t\t\t\t// and wrap them in braces.\n\t\t\t\t//_DEBUG_STRINGIFY && console.log( \"partial:\", partial )\n\n\t\t\t\t//let c;\n\t\t\t\tif( key===\"\" )\n\t\t\t\t\tc = ( classes.map( cls=> cls.name+\"{\"+cls.fields.join(\",\")+\"}\" ).join(gap?\"\\n\":\"\")\n\t\t\t\t\t\t|| commonClasses.map( cls=> cls.name+\"{\"+cls.fields.join(\",\")+\"}\" ).join(gap?\"\\n\":\"\"))+(gap?\"\\n\":\"\");\n\t\t\t\telse\n\t\t\t\t\tc = '';\n\n\t\t\t\tif( protoConverter && protoConverter.external ) \n\t\t\t\t\tc = c + getIdentifier(protoConverter.name);\n\n\t\t\t\t//_DEBUG_STRINGIFY && console.log( \"PREFIX FOR THIS FIELD:\", c );\n\t\t\t\tlet ident = null;\n\t\t\t\tif( partialClass )\n\t\t\t\t\tident = getIdentifier( partialClass.name ) ;\n\t\t\t\tv = c +\n\t\t\t\t\t( partial.length === 0\n\t\t\t\t\t? \"{}\"\n\t\t\t\t\t: gap\n\t\t\t\t\t\t\t? (partialClass?ident:\"\")+\"{\\n\" + gap + partial.join(\",\\n\" + gap) + \"\\n\" + mind + \"}\"\n\t\t\t\t\t\t\t: (partialClass?ident:\"\")+\"{\" + partial.join(\",\") + \"}\"\n\t\t\t\t\t);\n\n\t\t\t\tgap = mind;\n\t\t\t\treturn v;\n\t\t\t}\n\t\t}\n\t}\n\n\t}\n}\n\n\t// Converts an ArrayBuffer directly to base64, without any intermediate 'convert to string then\n\t// use window.btoa' step. According to my tests, this appears to be a faster approach:\n\t// http://jsperf.com/encoding-xhr-image-data/5\n\t// doesn't have to be reversable....\n\tconst encodings = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$_'\n\tconst decodings = { '~':-1\n\t\t,'=':-1\n\t\t,'$':62\n\t\t,'_':63\n\t\t,'+':62\n\t\t,'-':62\n\t\t,'.':62\n\t\t,'/':63\n\t\t,',':63\n\t};\n\t\n\tfor( let x = 0; x < encodings.length; x++ ) {\n\t\tdecodings[encodings[x]] = x;\n\t}\n\tObject.freeze( decodings );\n\t\n\tfunction base64ArrayBuffer(arrayBuffer) {\n\t\tlet base64    = ''\n\t\n\t\tlet bytes         = new Uint8Array(arrayBuffer)\n\t\tlet byteLength    = bytes.byteLength\n\t\tlet byteRemainder = byteLength % 3\n\t\tlet mainLength    = byteLength - byteRemainder\n\t\n\t\tlet a, b, c, d\n\t\tlet chunk\n\t\t//throw \"who's using this?\"\n\t\t//console.log( \"buffer..\", arrayBuffer )\n\t\t// Main loop deals with bytes in chunks of 3\n\t\tfor (let i = 0; i < mainLength; i = i + 3) {\n\t\t\t// Combine the three bytes into a single integer\n\t\t\tchunk = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2]\n\n\t\t\t// Use bitmasks to extract 6-bit segments from the triplet\n\t\t\ta = (chunk & 16515072) >> 18 // 16515072 = (2^6 - 1) << 18\n\t\t\tb = (chunk & 258048)   >> 12 // 258048   = (2^6 - 1) << 12\n\t\t\tc = (chunk & 4032)     >>  6 // 4032     = (2^6 - 1) << 6\n\t\t\td = chunk & 63               // 63       = 2^6 - 1\n\t\n\t\t\t// Convert the raw binary segments to the appropriate ASCII encoding\n\t\t\tbase64 += encodings[a] + encodings[b] + encodings[c] + encodings[d]\n\t\t}\n\t\n\t// Deal with the remaining bytes and padding\n\t\tif (byteRemainder == 1) {\n\t\t\tchunk = bytes[mainLength]\n\t\t\ta = (chunk & 252) >> 2 // 252 = (2^6 - 1) << 2\n\t\t\t// Set the 4 least significant bits to zero\n\t\t\tb = (chunk & 3)   << 4 // 3   = 2^2 - 1\n\t\t\tbase64 += encodings[a] + encodings[b] + '=='\n\t\t} else if (byteRemainder == 2) {\n\t\t\tchunk = (bytes[mainLength] << 8) | bytes[mainLength + 1]\n\t\t\ta = (chunk & 64512) >> 10 // 64512 = (2^6 - 1) << 10\n\t\t\tb = (chunk & 1008)  >>  4 // 1008  = (2^6 - 1) << 4\n\t\t\t// Set the 2 least significant bits to zero\n\t\t\tc = (chunk & 15)    <<  2 // 15    = 2^4 - 1\n\t\t\tbase64 += encodings[a] + encodings[b] + encodings[c] + '='\n\t\t}\n\t\t//console.log( \"dup?\", base64)\n\t\treturn base64\n\t}\n\t\n\t\n\tfunction DecodeBase64( buf ) {\t\n\t\tlet outsize;\n\t\tif( buf.length % 4 == 1 )\n\t\t\toutsize = ((((buf.length + 3) / 4)|0) * 3) - 3;\n\t\telse if( buf.length % 4 == 2 )\n\t\t\toutsize = ((((buf.length + 3) / 4)|0) * 3) - 2;\n\t\telse if( buf.length % 4 == 3 )\n\t\t\toutsize = ((((buf.length + 3) / 4)|0) * 3) - 1;\n\t\telse if( decodings[buf[buf.length - 3]] == -1 )\n\t\t\toutsize = ((((buf.length + 3) / 4)|0) * 3) - 3;\n\t\telse if( decodings[buf[buf.length - 2]] == -1 ) \n\t\t\toutsize = ((((buf.length + 3) / 4)|0) * 3) - 2;\n\t\telse if( decodings[buf[buf.length - 1]] == -1 ) \n\t\t\toutsize = ((((buf.length + 3) / 4)|0) * 3) - 1;\n\t\telse\n\t\t\toutsize = ((((buf.length + 3) / 4)|0) * 3);\n\t\tlet ab = new ArrayBuffer( outsize );\n\t\tlet out = new Uint8Array(ab);\n\n\t\tlet n;\n\t\tlet l = (buf.length+3)>>2;\n\t\tfor( n = 0; n < l; n++ ) {\n\t\t\tlet index0 = decodings[buf[n*4]];\n\t\t\tlet index1 = (n*4+1)<buf.length?decodings[buf[n*4+1]]:-1;\n\t\t\tlet index2 = (index1>=0) && (n*4+2)<buf.length?decodings[buf[n*4+2]]:-1 || -1;\n\t\t\tlet index3 = (index2>=0) && (n*4+3)<buf.length?decodings[buf[n*4+3]]:-1 || -1;\n\t\t\tif( index1 >= 0 )\n\t\t\t\tout[n*3+0] = (( index0 ) << 2 | ( index1 ) >> 4);\n\t\t\tif( index2 >= 0 )\n\t\t\t\tout[n*3+1] = (( index1 ) << 4 | ( ( ( index2 ) >> 2 ) & 0x0f ));\n\t\t\tif( index3 >= 0 )\n\t\t\t\tout[n*3+2] = (( index2 ) << 6 | ( ( index3 ) & 0x3F ));\n\t\t}\n\n\t\treturn ab;\n\t}\n\t\n/**\n * @param {unknown} object \n * @param {(this: unknown, key: string, value: unknown)} [replacer] \n * @param {string | number} [space] \n * @returns {string}\n */\t\nJSOX.stringify = function( object, replacer, space ) {\n\tlet stringifier = JSOX.stringifier();\n\treturn stringifier.stringify( object, replacer, space );\n}\n\nconst nonIdent = \n[ [ 0,256,[ 0xffd9ff,0xff6aff,0x1fc00,0x380000,0x0,0xfffff8,0xffffff,0x7fffff] ]\n].map( row=>{ return{ firstChar : row[0], lastChar: row[1], bits : row[2] }; } );\n//return JSOX;\n//})(exports || {})\nexport {JSOX}\nexport default JSOX;\n","export type FieldType = \"text\" | \"password\" | \"select\" | \"color-palette\" | \"shape-palette\" | \"number-select\" | \"textarea\";\n\nexport type FieldOption = {\n    value: string;\n    label: string;\n    color?: string;\n    shape?: string;\n};\n\nexport type FieldConfig = {\n    path: string;\n    label: string;\n    type: FieldType;\n    placeholder?: string;\n    helper?: string;\n    options?: FieldOption[];\n};\n\nexport type GroupConfig = {\n    key?: string;\n    label: string;\n    description?: string;\n    collapsible?: boolean;\n    startOpen?: boolean;\n    fields: FieldConfig[];\n};\n\nexport type SectionKey = \"runtime\" | \"core\" | \"app\" | \"ai\" | \"mcp\" | \"webdav\" | \"timeline\" | \"additional\";\n\nexport type SectionConfig = {\n    key: SectionKey;\n    title: string;\n    icon: string;\n    description: string;\n    groups: GroupConfig[];\n};\n\nexport type CoreMode = \"native\" | \"endpoint\";\n\nexport type RemoteTarget = {\n    id: string;\n    label?: string;\n    url: string;\n    method?: string;\n    headers?: Record<string, string>;\n    unencrypted?: boolean;\n};\n\nexport type MCPConfig = {\n    id: string;\n    serverLabel: string;\n    origin: string;\n    clientKey: string;\n    secretKey: string;\n};\n\nexport type GridShape =\n    | \"square\" | \"squircle\" | \"circle\" | \"rounded\" | \"blob\"     // Border-radius based\n    | \"hexagon\" | \"diamond\" | \"star\" | \"badge\" | \"heart\"        // Clip-path polygonal\n    | \"clover\" | \"flower\"                                        // Clip-path decorative\n    | \"egg\" | \"tear\" | \"wavy\";                                           // Asymmetric / procedural\n\nexport type CustomInstruction = {\n    id: string;\n    label: string;\n    instruction: string;\n    enabled?: boolean;\n    order?: number;\n};\n\nexport type ResponseLanguage = \"en\" | \"ru\" | \"auto\";\n\nexport type AppSettings = {\n    core?: {\n        mode?: CoreMode;\n        endpointUrl?: string;\n        userId?: string;\n        userKey?: string;\n        encrypt?: boolean;\n        preferBackendSync?: boolean;\n        ntpEnabled?: boolean;\n        ops?: {\n            allowUnencrypted?: boolean;\n            httpTargets?: RemoteTarget[];\n            wsTargets?: RemoteTarget[];\n            syncTargets?: RemoteTarget[];\n        };\n    };\n    ai?: {\n        apiKey?: string;\n        baseUrl?: string;\n        model?: string;\n        customModel?: string;\n        mcp?: MCPConfig[];\n        shareTargetMode?: \"analyze\" | \"recognize\";\n        /** When true (default), share-target / launch-queue will auto run AI and copy result to clipboard. */\n        autoProcessShared?: boolean;\n        customInstructions?: CustomInstruction[];\n        activeInstructionId?: string;\n        // Language and translation settings\n        responseLanguage?: ResponseLanguage;\n        translateResults?: boolean;\n        // Graphics generation settings\n        generateSvgGraphics?: boolean;\n        // Request timeout settings (in seconds)\n        requestTimeout?: {\n            low?: number;    // Default: 60\n            medium?: number; // Default: 300\n            high?: number;   // Default: 900\n        };\n        maxRetries?: number; // Default: 2\n    };\n    webdav?: {\n        url?: string;\n        username?: string;\n        password?: string;\n        token?: string;\n    };\n    timeline?: {\n        source?: string;\n    };\n    appearance?: {\n        theme?: \"light\" | \"dark\" | \"auto\";\n        fontSize?: \"small\" | \"medium\" | \"large\";\n        color?: string;\n    };\n    speech?: {\n        language?: string;\n    };\n    grid?: {\n        columns?: number;\n        rows?: number;\n        shape?: GridShape;\n    };\n};\n\nexport const DEFAULT_SETTINGS: AppSettings = {\n    core: {\n        mode: \"native\",\n        endpointUrl: \"http://localhost:6065\",\n        userId: \"\",\n        userKey: \"\",\n        encrypt: false,\n        preferBackendSync: true,\n        ntpEnabled: false,\n        ops: {\n            allowUnencrypted: false,\n            httpTargets: [],\n            wsTargets: [],\n            syncTargets: []\n        }\n    },\n    ai: {\n        apiKey: \"\",\n        baseUrl: \"\",\n        model: \"gpt-5.2\",\n        customModel: \"\",\n        mcp: [],\n        shareTargetMode: \"recognize\",\n        autoProcessShared: true,\n        customInstructions: [],\n        activeInstructionId: \"\",\n        responseLanguage: \"auto\",\n        translateResults: false,\n        generateSvgGraphics: false,\n        requestTimeout: {\n            low: 60,      // 1 minute\n            medium: 300,  // 5 minutes\n            high: 900     // 15 minutes\n        },\n        maxRetries: 2\n    },\n    webdav: {\n        url: \"http://localhost:6065\",\n        username: \"\",\n        password: \"\",\n        token: \"\"\n    },\n    timeline: {\n        source: \"\"\n    },\n    appearance: {\n        theme: \"auto\",\n        fontSize: \"medium\",\n        color: \"\"\n    },\n    speech: {\n        language: typeof navigator !== \"undefined\" ? navigator.language : \"en-US\"\n    },\n    grid: {\n        columns: 4,\n        rows: 8,\n        shape: \"square\"\n    }\n};\n","import { readFile, writeFile } from \"fest/lure\";\nimport { JSOX } from \"jsox\";\n\n//\nexport const sanitizeFileName = (name: string, fallbackExt = \"\") => {\n    const parts = String(name || \"\").split(\"/\").pop() || \"\";\n    const base = parts.replace(/\\s+/g, '-').replace(/[^a-zA-Z0-9_.\\-+#&]/g, '-');\n    if (fallbackExt && !base.includes('.')) return `${base || Date.now()}${fallbackExt.startsWith('.') ? '' : '.'}${fallbackExt}`;\n    return base || `${Date.now()}`;\n}\n\n\n\n//\n// Unified file/path helpers\n//\n\n// sanitize one path/token to safe slug\nconst toSlug = (input: string, toLower = true) => {\n    let s = String(input || \"\").trim();\n    if (toLower) s = s.toLowerCase();\n    // replace whitespace with '-'\n    s = s.replace(/\\s+/g, '-');\n    // keep only safe chars\n    s = s.replace(/[^a-z0-9_.\\-+#&]/g, '-');\n    // collapse repeats\n    s = s.replace(/-+/g, '-');\n    return s;\n};\n\n//\nconst inferExtFromMime = (mime = \"\") => {\n    if (!mime) return \"\";\n    if (mime.includes(\"json\")) return \"json\";\n    if (mime.includes(\"markdown\")) return \"md\";\n    if (mime.includes(\"plain\")) return \"txt\";\n    if (mime === \"image/jpeg\" || mime === \"image/jpg\") return \"jpg\";\n    if (mime === \"image/png\") return \"png\";\n    if (mime.startsWith(\"image/\")) return mime.split('/').pop() || \"\";\n    if (mime.includes(\"html\")) return \"html\";\n    return \"\";\n};\n\n//\nconst splitPath = (path: string) => String(path || \"\").split('/').filter(Boolean);\nconst ensureDir = (p: string) => (p.endsWith('/') ? p : p + '/');\nconst joinPath = (parts: string[], absolute = true) => (absolute ? '/' : '') + parts.filter(Boolean).join('/') + '';\n\n//\nconst sanitizePathSegments = (path: string) => {\n    const parts = splitPath(path);\n    return joinPath(parts.map((p) => toSlug(p)));\n};\n\ntype MergeArrayStrategy = 'union' | 'replace' | 'concat';\n\nexport interface WriteSmartOptions {\n    forceExt?: string;\n    ensureJson?: boolean;\n    toLower?: boolean;\n    sanitize?: boolean;\n    //  \n    mergeJson?: boolean;                  //  merge JSON (  true  .json)\n    arrayStrategy?: MergeArrayStrategy;   // 'union' ( ), 'replace', 'concat'\n    arrayKey?: string | string[];         // ()      ( 'id')\n    jsonSpace?: number | string;          //  JSON   ( 2)\n}\n\nconst DEFAULT_ARRAY_KEYS = ['id', '_id', 'key', 'slug', 'name'];\n\nconst isPlainObject = (v: any) => Object.prototype.toString.call(v) === '[object Object]';\n\nfunction dedupeArray(items: any[], opts: { arrayKey?: string | string[] }) {\n    const keys = Array.isArray(opts.arrayKey) ? opts.arrayKey : (opts.arrayKey ? [opts.arrayKey] : DEFAULT_ARRAY_KEYS);\n    const result: any[] = [];\n    const primitiveSet = new Set<any>();\n    const objMap = new Map<string, any>();\n    const stringifiedSet = new Set<string>();\n\n    for (const it of items) {\n        if (it == null) continue;\n\n        if (isPlainObject(it)) {\n            //   \n            let dedupeKey: string | undefined;\n            for (const k of keys) {\n                if (k in it && it[k] != null) {\n                    dedupeKey = String(it[k]);\n                    break;\n                }\n            }\n            if (dedupeKey != null) {\n                if (!objMap.has(dedupeKey)) {\n                    objMap.set(dedupeKey, it);\n                    result.push(it);\n                }\n            } else {\n                //    JSOX.stringify\n                const sig = safeStableStringify(it);\n                if (!stringifiedSet.has(sig)) {\n                    stringifiedSet.add(sig);\n                    result.push(it);\n                }\n            }\n        } else if (Array.isArray(it)) {\n            //        \n            const sig = safeStableStringify(it);\n            if (!stringifiedSet.has(sig)) {\n                stringifiedSet.add(sig);\n                result.push(it);\n            }\n        } else {\n            // \n            if (!primitiveSet.has(it)) {\n                primitiveSet.add(it);\n                result.push(it);\n            }\n        }\n    }\n\n    return result;\n}\n\nfunction mergeDeepUnique(a: any, b: any, opts: { arrayStrategy: MergeArrayStrategy; arrayKey?: string | string[] }): any {\n    if (Array.isArray(a) && Array.isArray(b)) {\n        switch (opts.arrayStrategy) {\n            case 'replace':\n                return b.slice();\n            case 'concat':\n                return a.concat(b);\n            case 'union':\n            default:\n                return dedupeArray(a.concat(b), { arrayKey: opts.arrayKey });\n        }\n    }\n\n    if (isPlainObject(a) && isPlainObject(b)) {\n        const out: any = { ...a };\n        for (const k of Object.keys(b)) {\n            if (k in a) {\n                out[k] = mergeDeepUnique(a[k], b[k], opts);\n            } else {\n                out[k] = b[k];\n            }\n        }\n        return out;\n    }\n\n    //     \n    return b;\n}\n\nfunction safeStableStringify(obj: any): string {\n    //    ( . )    \n    if (!isPlainObject(obj)) return JSON.stringify(obj);\n    const keys = Object.keys(obj).sort();\n    const o: any = {};\n    for (const k of keys) o[k] = obj[k];\n    return JSON.stringify(o);\n}\n\nasync function blobToText(blob: Blob): Promise<string> {\n    return await blob.text();\n}\n\nasync function readFileAsJson(root: any | null, fullPath: string): Promise<any | null> {\n    try {\n        // ,  readFile    Blob/File\n        const existing: any = await readFile(root, fullPath)?.catch?.(console.warn.bind(console));\n        if (!existing) return null;\n        const text = await blobToText(existing);\n        if (!text?.trim()) return null;\n        return JSOX.parse(text);\n    } catch {\n        return null;\n    }\n}\n\n// Always writes by full sanitized path. Accepts a directory or a full path.\nexport const writeFileSmart = async (\n    root: any | null,\n    dirOrPath: string,\n    file: File | Blob,\n    options: WriteSmartOptions = {}\n) => {\n    const {\n        forceExt,\n        ensureJson,\n        toLower = true,\n        sanitize = true,\n        mergeJson,\n        arrayStrategy = 'union',\n        arrayKey,\n        jsonSpace = 2,\n    } = options;\n\n    // Determine desired base name and directory\n    let raw = String(dirOrPath || \"\").trim();\n    const isDirHint = raw.endsWith('/');\n    const hasFileToken = !isDirHint && splitPath(raw).length > 0 && raw.includes('.');\n\n    let dirPath = isDirHint ? raw : (hasFileToken ? raw.split('/').slice(0, -1).join('/') : raw);\n    let desiredName = hasFileToken ? raw.split('/').pop() || '' : (file as any)?.name || '';\n\n    // Fallbacks\n    dirPath = dirPath || '/';\n    desiredName = desiredName || (Date.now() + '');\n\n    // Extract name/ext\n    const lastDot = desiredName.lastIndexOf('.');\n    let base = lastDot > 0 ? desiredName.slice(0, lastDot) : desiredName;\n    let ext = (forceExt || (ensureJson ? 'json' : (lastDot > 0 ? desiredName.slice(lastDot + 1) : inferExtFromMime((file as any)?.type || '')))) || '';\n\n    if (sanitize) {\n        dirPath = sanitizePathSegments(dirPath);\n        base = toSlug(base, toLower);\n    }\n\n    const finalName = ext ? `${base}.${ext}` : base;\n    const fullPath = ensureDir(dirPath) + finalName;\n\n    // Try JSON merge if applicable\n    const shouldMergeJson = (mergeJson !== false) && (ensureJson || ext.toLowerCase() === 'json' || ((file as any)?.type === 'application/json'));\n\n    if (shouldMergeJson) {\n        try {\n            //   ()\n            let incomingJson: any;\n            if (file instanceof File || file instanceof Blob) {\n                const txt = await blobToText(file);\n                incomingJson = txt?.trim() ? JSOX.parse(txt) : {};\n            } else {\n                incomingJson = file; // ,  \n            }\n\n            //  JSON ( )\n            const existingJson = await readFileAsJson(root, fullPath)?.catch?.(console.warn.bind(console));\n\n            let merged = existingJson != null\n                ? mergeDeepUnique(existingJson, incomingJson, { arrayStrategy, arrayKey })\n                : incomingJson;\n\n            //  undefined -> null/  (JSOX.stringify   undefined)\n            const jsonString = JSON.stringify(merged, undefined, jsonSpace);\n\n            //\n            const toWrite = new File([jsonString], finalName, { type: 'application/json' });\n            const rs = await writeFile(root, fullPath, toWrite)?.catch?.(console.warn.bind(console));\n            if (typeof document !== \"undefined\")\n                document?.dispatchEvent?.(new CustomEvent(\"rs-fs-changed\", {\n                    detail: rs,\n                    bubbles: true, composed: true, cancelable: true,\n                }));\n            return rs;\n        } catch (err) {\n            console.warn('writeFileSmart JSON merge failed, falling back to raw write:', err);\n            //    /     \n        }\n    }\n\n    // Ensure File object with correct name ( )\n    let toWrite: File;\n    if (file instanceof File) {\n        if (file.name === finalName) {\n            toWrite = file;\n        } else {\n            const type = (file as any).type || (ext ? `application/${ext}` : 'application/octet-stream');\n            const buf = await file.arrayBuffer();\n            toWrite = new File([buf], finalName, { type });\n        }\n    } else {\n        const type = (file as any).type || (ext ? `application/${ext}` : 'application/octet-stream');\n        const blob = file as Blob;\n        toWrite = new File([await blob.arrayBuffer()], finalName, { type });\n    }\n\n    const rs = await writeFile(root, fullPath, toWrite)?.catch?.(console.warn.bind(console));\n    if (typeof document !== \"undefined\")\n        document?.dispatchEvent?.(new CustomEvent(\"rs-fs-changed\", {\n            detail: rs,\n            bubbles: true, composed: true, cancelable: true,\n        }));\n    return rs;\n};\n","import type { FileStat } from \"webdav/web\"\nimport { getDirectoryHandle, readFile } from \"fest/lure\"\nimport { JSOX } from \"jsox\";\n\n//\nimport type { AppSettings } from \"@rs-com/config/SettingsTypes\";\nimport { DEFAULT_SETTINGS } from \"@rs-com/config/SettingsTypes\";\nimport { writeFileSmart } from \"@rs-core/storage/WriteFileSmart-v2\";\n\n//\nexport const SETTINGS_KEY = \"rs-settings\";\n\n//\nexport const splitPath = (path: string) => path.split(\".\");\nexport const getByPath = (source: any, path: string) => splitPath(path).reduce<any>((acc, key) => (acc == null ? acc : acc[key]), source);\nexport const slugify = (value: string) => value.replace(/[^a-z0-9]+/gi, \"-\").replace(/^-+|-+$/g, \"\").toLowerCase();\n\n//\nexport const DB_NAME = 'req-store';\nexport const STORE = 'settings';\n\ntype WebDavCreateClient = (remoteURL: string, options?: Record<string, unknown>) => any;\nlet createWebDavClient: WebDavCreateClient | null = null;\n\nconst getWebDavCreateClient = async (): Promise<WebDavCreateClient | null> => {\n    if (createWebDavClient) return createWebDavClient;\n    try {\n        const mod = await import(\"webdav/web\");\n        if (typeof mod?.createClient === \"function\") {\n            createWebDavClient = mod.createClient as WebDavCreateClient;\n            return createWebDavClient;\n        }\n    } catch {\n        // WebDAV is optional and not required in service-worker-only flows.\n    }\n    return null;\n};\n\n// Check if we're in a content script context (restricted storage access)\n// Content scripts are extension scripts injected into third-party pages\n// They have chrome.runtime but run on http/https pages (not chrome-extension://)\nconst isContentScriptContext = (): boolean => {\n    try {\n        // Must have chrome.runtime to be a content script (extensions only)\n        // Regular PWA/web apps don't have chrome.runtime\n        if (typeof chrome === \"undefined\" || !chrome?.runtime) return false;\n\n        // Content scripts run on http/https pages but have chrome.runtime\n        // Extension pages run on chrome-extension:// protocol\n        if (typeof window !== \"undefined\" && globalThis?.location?.protocol?.startsWith(\"http\")) {\n            // This is a content script - extension code running on a web page\n            return true;\n        }\n\n        return false;\n    } catch {\n        return false; // If we can't determine, assume NOT a content script (allow access)\n    }\n};\n\n//\nconst hasChromeStorage = () => typeof chrome !== \"undefined\" && chrome?.storage?.local;\n\n//\nasync function idbOpen(): Promise<IDBDatabase> {\n    // Check if indexedDB is available and accessible\n    if (typeof indexedDB === \"undefined\") {\n        throw new Error(\"IndexedDB not available\");\n    }\n\n    // In content scripts on some pages, indexedDB access throws DOMException\n    if (isContentScriptContext()) {\n        throw new Error(\"IndexedDB not accessible in content script context\");\n    }\n\n    return new Promise<IDBDatabase>((res, rej) => {\n        try {\n            const req = indexedDB.open(DB_NAME, 1);\n            req.onupgradeneeded = () => req.result.createObjectStore(STORE, { keyPath: 'key' });\n            req.onsuccess = () => res(req.result);\n            req.onerror = () => rej(req.error);\n        } catch (e) {\n            rej(e);\n        }\n    });\n}\n\n//\nexport const idbGetSettings = async (key: string = SETTINGS_KEY): Promise<any> => {\n    try {\n        if (hasChromeStorage()) {\n            console.log(\"[Settings] Using chrome.storage.local for get\");\n            return new Promise((res) => {\n                try {\n                    chrome.storage.local.get([key], (result) => {\n                        if (chrome.runtime.lastError) {\n                            console.warn(\"[Settings] chrome.storage.local.get error:\", chrome.runtime.lastError);\n                            res(null);\n                        } else {\n                            console.log(\"[Settings] chrome.storage.local.get success, has data:\", !!result[key]);\n                            res(result[key]);\n                        }\n                    });\n                } catch (e) {\n                    console.warn(\"[Settings] chrome.storage access failed:\", e);\n                    res(null);\n                }\n            });\n        }\n\n        // Check if indexedDB is available\n        if (typeof indexedDB === \"undefined\") {\n            console.warn(\"[Settings] IndexedDB not available\");\n            return null;\n        }\n\n        console.log(\"[Settings] Using IndexedDB for get\");\n        const db = await idbOpen();\n        return new Promise((res, rej) => {\n            const tx = db.transaction(STORE, 'readonly');\n            const req = tx.objectStore(STORE).get(key);\n            req.onsuccess = () => {\n                console.log(\"[Settings] IndexedDB get success, has data:\", !!req.result?.value);\n                res(req.result?.value);\n                db.close();\n            }\n            req.onerror = () => {\n                console.warn(\"[Settings] IndexedDB get error:\", req.error);\n                rej(req.error);\n                db.close();\n            };\n        });\n    } catch (e) {\n        console.warn(\"[Settings] Settings storage access failed:\", e);\n        return null;\n    }\n}\n\n//\nexport const idbPutSettings = async (value: any, key: string = SETTINGS_KEY): Promise<void> => {\n    try {\n        if (hasChromeStorage()) {\n            return new Promise((res, rej) => {\n                try {\n                    chrome.storage.local.set({ [key]: value }, () => {\n                        if (chrome.runtime.lastError) {\n                            rej(chrome.runtime.lastError);\n                        } else {\n                            res();\n                        }\n                    });\n                } catch (e) {\n                    console.warn(\"chrome.storage write failed:\", e);\n                    rej(e);\n                }\n            });\n        }\n\n        // Check if indexedDB is available\n        if (typeof indexedDB === \"undefined\") {\n            console.warn(\"IndexedDB not available\");\n            return;\n        }\n\n        const db = await idbOpen();\n        return new Promise((res, rej) => {\n            const tx = db.transaction(STORE, 'readwrite');\n            tx.objectStore(STORE).put({ key, value });\n            tx.oncomplete = () => { res(void 0); db.close(); };\n            tx.onerror = () => { rej(tx.error); db.close(); };\n        });\n    } catch (e) {\n        console.warn(\"Settings storage write failed:\", e);\n    }\n}\n\n//\nexport const loadSettings = async (): Promise<AppSettings> => {\n    try {\n        const raw = await idbGetSettings();\n        const stored = typeof raw === \"string\" ? JSOX.parse(raw) as any : raw;\n\n        console.log(\"[Settings] loadSettings - raw type:\", typeof raw, \"stored type:\", typeof stored);\n\n        if (stored && typeof stored === \"object\") {\n            const result = {\n                core: {\n                    ...DEFAULT_SETTINGS.core,\n                    ...(stored as any)?.core\n                },\n                ai: {\n                    ...DEFAULT_SETTINGS.ai, ...(stored as any)?.ai,\n                    mcp: (stored as any)?.ai?.mcp || [],\n                    customInstructions: (stored as any)?.ai?.customInstructions || [],\n                    activeInstructionId: (stored as any)?.ai?.activeInstructionId || \"\"\n                },\n                webdav: { ...DEFAULT_SETTINGS.webdav, ...(stored as any)?.webdav },\n                timeline: { ...DEFAULT_SETTINGS.timeline, ...(stored as any)?.timeline },\n                appearance: { ...DEFAULT_SETTINGS.appearance, ...(stored as any)?.appearance },\n                speech: { ...DEFAULT_SETTINGS.speech, ...(stored as any)?.speech },\n                grid: { ...DEFAULT_SETTINGS.grid, ...(stored as any)?.grid }\n            };\n\n            console.log(\"[Settings] loadSettings result:\", {\n                hasApiKey: !!result.ai?.apiKey,\n                instructionCount: result.ai?.customInstructions?.length || 0,\n                activeInstructionId: result.ai?.activeInstructionId || \"(none)\"\n            });\n\n            return result;\n        }\n\n        console.log(\"[Settings] loadSettings - no stored data, returning defaults\");\n    } catch (e) {\n        console.warn(\"[Settings] loadSettings error:\", e);\n    }\n    return JSOX.parse(JSOX.stringify(DEFAULT_SETTINGS as any) as string) as unknown as AppSettings;\n};\n\n//\nexport const saveSettings = async (settings: AppSettings) => {\n    const current = await loadSettings();\n\n    // For arrays and special fields, prefer explicit values from settings,\n    // then fall back to current, then to defaults.\n    // Use explicit undefined check (not nullish coalescing) to preserve empty arrays/strings\n    const getMcp = () => {\n        if (settings.ai?.mcp !== undefined) return settings.ai.mcp;\n        if (current.ai?.mcp !== undefined) return current.ai.mcp;\n        return [];\n    };\n\n    const getCustomInstructions = () => {\n        if (settings.ai?.customInstructions !== undefined) return settings.ai.customInstructions;\n        if (current.ai?.customInstructions !== undefined) return current.ai.customInstructions;\n        return [];\n    };\n\n    const getActiveInstructionId = () => {\n        // Check if activeInstructionId is explicitly set (including empty string)\n        if (Object.prototype.hasOwnProperty.call(settings.ai || {}, 'activeInstructionId')) {\n            return settings.ai?.activeInstructionId ?? \"\";\n        }\n        // Fall back to current value\n        if (current.ai?.activeInstructionId !== undefined) {\n            return current.ai.activeInstructionId;\n        }\n        return \"\";\n    };\n\n    const merged: AppSettings = {\n        core: {\n            ...(DEFAULT_SETTINGS.core || {}),\n            ...(current.core || {}),\n            ...(settings.core || {})\n        },\n        ai: {\n            ...(DEFAULT_SETTINGS.ai || {}),\n            ...(current.ai || {}),\n            ...(settings.ai || {}),\n            mcp: getMcp(),\n            customInstructions: getCustomInstructions(),\n            activeInstructionId: getActiveInstructionId()\n        },\n        webdav: {\n            ...(DEFAULT_SETTINGS.webdav || {}),\n            ...(current.webdav || {}),\n            ...(settings.webdav || {})\n        },\n        timeline: {\n            ...(DEFAULT_SETTINGS.timeline || {}),\n            ...(current.timeline || {}),\n            ...(settings.timeline || {})\n        },\n        appearance: {\n            ...(DEFAULT_SETTINGS.appearance || {}),\n            ...(current.appearance || {}),\n            ...(settings.appearance || {})\n        },\n        speech: {\n            ...(DEFAULT_SETTINGS.speech || {}),\n            ...(current.speech || {}),\n            ...(settings.speech || {})\n        },\n        grid: {\n            ...(DEFAULT_SETTINGS.grid || {}),\n            ...(current.grid || {}),\n            ...(settings.grid || {})\n        }\n    };\n    await idbPutSettings(merged);\n    updateWebDavSettings(merged)?.catch?.(console.warn.bind(console));\n    return merged;\n};\n\n//       \nconst joinPath = (base: string, name?: string, addTrailingSlash = false) => {\n    const b = (base || \"/\").replace(/\\/+$/g, \"\") || \"/\";\n    const n = (name || \"\").replace(/^\\/+/g, \"\");\n    let out = b === \"/\" ? `/${n}` : `${b}/${n}`;\n    if (addTrailingSlash) out = out.replace(/\\/?$/g, \"/\");\n    return out.replace(/\\/{2,}/g, \"/\");\n};\n\nconst isDirHandle = (h: any) => (h?.kind === 'directory');\nconst safeTime = (v: any) => {\n    const t = new Date(v as any).getTime();\n    return Number.isFinite(t) ? t : 0;\n};\n\ntype SyncOptions = {\n    //  download:   ,    \n    pruneLocal?: boolean;\n    //  upload:    ,   \n    pruneRemote?: boolean;\n};\n\n// DOWNLOAD:   path  filename   filename  \nconst downloadContentsToOPFS = async (\n    webDavClient,\n    path = \"/\",\n    opts: SyncOptions = {},\n    rootHandle: FileSystemDirectoryHandle | null = null\n) => {\n    const files = await webDavClient\n        ?.getDirectoryContents?.(path || \"/\")\n        ?.catch?.((e) => { console.warn(e); return []; }) as FileStat[];\n\n    //      ,    \n    if (opts.pruneLocal && files?.length > 0) {\n        try {\n            const dirHandle = await getDirectoryHandle(rootHandle, path)?.catch?.(() => null);\n            if (dirHandle?.entries) {\n                const localEntries = await Array.fromAsync(dirHandle.entries());\n                const remoteNames = new Set(files?.map?.((f) => f?.basename).filter(Boolean));\n                await Promise.all(\n                    (localEntries as [string, FileSystemDirectoryHandle | FileSystemFileHandle][])\n                        .filter(([name]) => !remoteNames.has(name))\n                        .map(([name]) =>\n                            dirHandle.removeEntry(name, { recursive: true })?.catch?.(console.warn.bind(console))\n                        )\n                );\n            }\n        } catch (e) {\n            console.warn(e);\n        }\n    }\n\n    return Promise.all(\n        files.map(async (file) => {\n            const isDir = file?.type === \"directory\";\n            // : filename       base-URL \n            const fullPath = isDir ? joinPath(file.filename, \"\", true) : file.filename;\n\n            if (isDir) {\n                return downloadContentsToOPFS(webDavClient, fullPath, opts, rootHandle);\n            }\n\n            if (file?.type === \"file\") {\n                const localMeta = await readFile(rootHandle, fullPath).catch(() => null);\n                const localMtime = safeTime(localMeta?.lastModified);\n                const remoteMtime = safeTime(file?.lastmod);\n\n                if (remoteMtime > localMtime) {\n                    const contents = await webDavClient\n                        .getFileContents(fullPath)\n                        .catch((e) => { console.warn(e); return null; });\n\n                    if (!contents || contents.byteLength === 0) return;\n\n                    // mime      \n                    const mime = (file as any)?.mime || \"application/octet-stream\";\n                    return writeFileSmart(rootHandle, fullPath, new File([contents], file.basename, { type: mime }));\n                }\n            }\n        })\n    );\n};\n\n// UPLOAD:   ;   \nconst uploadOPFSToWebDav = async (\n    webDavClient,\n    dirHandle: FileSystemDirectoryHandle | null = null,\n    path = \"/\",\n    opts: SyncOptions = {}\n) => {\n    const effectiveDirHandle = dirHandle ?? (await getDirectoryHandle(null, path, { create: true })?.catch?.(console.warn.bind(console)));\n    const entries = await Array.fromAsync(effectiveDirHandle?.entries?.() ?? []);\n\n    //\n    if (path != \"/\") {\n        //  :   entries  handle\n        //       ,      \n        if (opts.pruneRemote && entries?.length >= 0) {\n            const remoteItems = await webDavClient\n                .getDirectoryContents(path || '/')\n                .catch((e) => { console.warn(e); return []; }) as FileStat[];\n\n            //   (  )\n            const localSet = new Set(\n                (entries as [string, FileSystemDirectoryHandle | FileSystemFileHandle][])\n                    .map(([name]) => name.toLowerCase())\n            );\n\n            //   ,       ( includes)\n            const extra = remoteItems.filter((r) => {\n                const base = (r?.basename || '').toLowerCase();\n                return base && !localSet.has(base);\n            });\n\n            //  ,  \n            const filesFirst = [\n                ...extra.filter((x) => x.type !== 'directory'),\n                //...extra.filter((x) => x.type === 'directory'),\n            ];\n\n            for (const r of filesFirst) {\n                const remotePath = r.filename || joinPath(path, r.basename, r.type === 'directory');\n                try {\n                    await webDavClient.deleteFile(remotePath);\n                } catch (e) {\n                    console.warn('delete failed:', remotePath, e);\n                }\n            }\n        }\n    }\n\n    //\n    await Promise.all(\n        (entries as [string, FileSystemDirectoryHandle | FileSystemFileHandle][])\n            .map(async ([name, fileOrDir]) => {\n                const isDir = isDirHandle(fileOrDir);\n                const remotePath = joinPath(path, name, isDir);\n\n                if (isDir) {\n                    const dirPathNoSlash = joinPath(path, name, false);\n                    const exists = await webDavClient.exists(dirPathNoSlash).catch((_e) => { return false; });\n                    if (!exists) {\n                        await webDavClient.createDirectory(dirPathNoSlash, { recursive: true }).catch(console.warn);\n                    }\n                    return uploadOPFSToWebDav(webDavClient, fileOrDir as FileSystemDirectoryHandle, remotePath, opts);\n                }\n\n                // File\n                const fileHandle = fileOrDir as FileSystemFileHandle;\n                const fileContent = await fileHandle.getFile();\n                if (!fileContent || fileContent.size === 0) return;\n\n                //\n                const fullFilePath = joinPath(path, name, false);\n                const remoteStat = await webDavClient.stat(fullFilePath).catch(() => null);\n                const remoteMtime = safeTime(remoteStat?.lastmod);\n                const localMtime = safeTime(fileContent.lastModified);\n\n                //\n                if (!remoteStat || localMtime > remoteMtime) {\n                    await webDavClient.putFileContents(fullFilePath, await fileContent.arrayBuffer(), { overwrite: true })\n                        .catch((_e) => { return null; });\n                }\n            })\n    );\n\n};\n\n//\nconst getHostOnly = (address: string) => {\n    const url = new URL(address);\n    return url.protocol + url.hostname + \":\" + url.port;\n}\n\n//\nexport const WebDavSync = async (address: string, options: any = {}) => {\n    const createClient = await getWebDavCreateClient();\n    if (!createClient) return null;\n    const client = createClient(getHostOnly(address), options);\n    const status = currentWebDav?.sync?.getDAVCompliance?.()?.catch?.(console.warn.bind(console)) ?? null;\n    return {\n        status,\n        client,\n        upload(withPrune = false) { if (this.status != null) { return uploadOPFSToWebDav(client, null, \"/\", { pruneRemote: withPrune })?.catch?.((e) => { console.warn(e); return []; }) } },\n        download(withPrune = false) { if (this.status != null) { return downloadContentsToOPFS(client, \"/\", { pruneLocal: withPrune })?.catch?.((e) => { console.warn(e); return []; }) } },\n    }\n}\n\n//\nexport const currentWebDav: { sync: any } = { sync: null };\n\n// Only initialize WebDAV in extension contexts (not content scripts)\nif (!isContentScriptContext()) {\n    (async () => {\n        try {\n            const settings = await loadSettings();\n            if (settings?.core?.mode === \"endpoint\" && settings?.core?.preferBackendSync) {\n                return;\n            }\n            if (!settings?.webdav?.url) return;\n            const client = await WebDavSync(settings.webdav.url, {\n                //authType: AuthType.Digest,\n                withCredentials: true,\n                username: settings.webdav.username,\n                password: settings.webdav.password,\n                token: settings.webdav.token\n            });\n            currentWebDav.sync = client ?? currentWebDav.sync;\n            await currentWebDav?.sync?.upload?.(true);\n            await currentWebDav?.sync?.download?.(true);\n        } catch (e) {\n            // Silently fail - storage may not be available in all contexts\n        }\n    })();\n}\n\n//\nexport const updateWebDavSettings = async (settings: any) => {\n    settings ||= await loadSettings();\n    if (settings?.core?.mode === \"endpoint\" && settings?.core?.preferBackendSync) {\n        currentWebDav.sync = null;\n        return;\n    }\n    if (!settings?.webdav?.url) return;\n    currentWebDav.sync = await WebDavSync(settings.webdav.url, {\n        //authType: AuthType.Digest,\n        withCredentials: true,\n        username: settings.webdav.username,\n        password: settings.webdav.password,\n        token: settings.webdav.token\n    }) ?? currentWebDav.sync;\n    await currentWebDav?.sync?.upload?.();\n    await currentWebDav?.sync?.download?.(true);\n}\n\n// WebDAV sync on page lifecycle events (only in extension context, not content scripts)\nif (!isContentScriptContext()) {\n    try {\n        if (typeof window !== \"undefined\" && typeof addEventListener === \"function\") {\n            addEventListener(\"pagehide\", () => {\n                currentWebDav?.sync?.upload?.()?.catch?.(() => {});\n            });\n            addEventListener(\"beforeunload\", () => {\n                currentWebDav?.sync?.upload?.()?.catch?.(() => {});\n            });\n        }\n    } catch {\n        // Ignore - may not be in appropriate context\n    }\n\n    // Periodic WebDAV sync (only when sync is configured)\n    (async () => {\n        try {\n            while (true) {\n                await currentWebDav?.sync?.upload?.()?.catch?.(() => {});\n                await new Promise((resolve) => setTimeout(resolve, 3000));\n            }\n        } catch {\n            // Silently fail\n        }\n    })();\n}\n\n//\nexport default WebDavSync;\n"],"file":"Settings.js"}