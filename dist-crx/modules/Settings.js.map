{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDO,MAAM,oBAA6C;AAAA,EAQtD,YACY,QACA,gBACV;AAFU;AACA;AAER,SAAK,UAAU,OAAO,WAAW;AAAA,EACrC;AAAA,EAZQ,oBAA0C;AAAA,EAC1C,cAAc;AAAA,EACd,eAAgC,EAAC;AAAA,EACjC,oBAA0C;AAAA,EAC1C,qBAA0C;AAAA,EAC1C;AAAA;AAAA;AAAA;AAAA,EAYR,MAAM,QAAQ,oBAA0C,MAAqB;AACzE,SAAK,oBAAoB;AAAA,EAC7B;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,QAAQ,QAAgB,OAAc,EAAC,EAAiB;AAC1D,QAAI,KAAK,eAAe,KAAK,mBAAmB;AAC5C,aAAO,KAAK,kBAAkB,QAAQ,QAAQ,IAAI;AAAA,IACtD;AAGA,WAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpC,YAAM,gBAA+B;AAAA,QACjC,IAAI,QAAO;AAAA,QACX;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,WAAW,KAAK;AAAI,OACxB;AAEA,WAAK,aAAa,KAAK,aAAa;AAGpC,UAAI,CAAC,KAAK,mBAAmB;AACzB,aAAK,SAAQ,CAAE,MAAM,CAAC,UAAU;AAC5B,eAAK,gBAAgB,KAAK;AAAA,QAC9B,CAAC;AAAA,MACL;AAAA,IACJ,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,aAA4B;AACtC,QAAI,CAAC,KAAK,mBAAmB;AAE7B,UAAM,YAAY,CAAC,GAAG,KAAK,YAAY;AACvC,SAAK,eAAe,EAAC;AAErB,eAAW,iBAAiB,WAAW;AACnC,UAAI;AACA,cAAM,SAAS,MAAM,KAAK,kBAAkB,QAAQ,cAAc,QAAQ,cAAc,IAAI;AAC5F,sBAAc,QAAQ,MAAM;AAAA,MAChC,SAAS,OAAO;AACZ,sBAAc,OAAO,KAAK;AAAA,MAC9B;AAAA,IACJ;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKQ,gBAAgB,OAAoB;AACxC,UAAM,YAAY,CAAC,GAAG,KAAK,YAAY;AACvC,SAAK,eAAe,EAAC;AAErB,eAAW,iBAAiB,WAAW;AACnC,oBAAc,OAAO,KAAK;AAAA,IAC9B;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKA,iBAAiB;AACb,WAAO;AAAA,MACH,aAAa,KAAK;AAAA,MAClB,gBAAgB,KAAK,aAAa;AAAA,MAClC,cAAc,CAAC,CAAC,KAAK,qBAAqB,CAAC,KAAK;AAAA,KACpD;AAAA,EACJ;AAAA,EAEA,QAAc;AACV,SAAK,gBAAgB,IAAI,MAAM,gBAAgB,CAAC;AAChD,SAAK,mBAAmB,OAAM;AAC9B,SAAK,oBAAoB;AACzB,SAAK,cAAc;AACnB,SAAK,oBAAoB;AAAA,EAC7B;AACJ;AAyFO,MAAM,uBAAuB;AAAA,EACxB,UAAgC;AAAA,EAChC,iBAAiB;AAAA,EACjB,sCAAsB,KAI3B;AAAA,EACK,eAAkC,EAAC;AAAA,EACnC,iBAAkC,EAAC;AAAA,EACnC;AAAA,EACA;AAAA,EACA;AAAA,EAER,YACI,UAAgC,MAChC,UAA2B,IAC3B,gBACF;AACE,SAAK,UAAU;AACf,SAAK,iBAAiB,CAAC,CAAC;AACxB,SAAK,iBAAiB;AACtB,SAAK,UAAU;AAAA,MACX,SAAS;AAAA,MACT,SAAS;AAAA,MACT,aAAa;AAAA,MACb,UAAU;AAAA,MACV,GAAG;AAAA,KACP;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKA,WAAW,SAA8B;AACrC,SAAK,UAAU;AACf,SAAK,iBAAiB;AACtB,SAAK,iBAAiB,OAAO;AAC7B,SAAK,qBAAoB;AAAA,EAC7B;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,QAAQ,MAAc,SAAc,SAAkD;AAExF,QAAI,CAAC,KAAK,kBAAkB,CAAC,KAAK,SAAS;AACvC,aAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpC,cAAM,gBAA+B;AAAA,UACjC,IAAI,QAAO;AAAA,UACX,QAAQ;AAAA,UACR,MAAM,CAAC,OAAO;AAAA,UACd;AAAA,UACA;AAAA,UACA,WAAW,KAAK;AAAI,SACxB;AACA,aAAK,eAAe,KAAK,aAAa;AAAA,MAC1C,CAAC;AAAA,IACL;AAEA,UAAM,OAAO,EAAE,GAAG,KAAK,SAAS,GAAG,SAAQ;AAC3C,UAAM,YAAY,QAAO;AAEzB,WAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpC,YAAM,UAAU,WAAW,MAAM;AAC7B,aAAK,gBAAgB,OAAO,SAAS;AACrC,eAAO,IAAI,MAAM,oBAAoB,IAAI,EAAE,CAAC;AAAA,MAChD,GAAG,KAAK,OAAO;AAEf,WAAK,gBAAgB,IAAI,WAAW,EAAE,SAAS,QAAQ,SAAS;AAEhE,YAAM,WAA4B;AAAA,QAC9B,IAAI;AAAA,QACJ;AAAA,QACA;AAAA,QACA,WAAW,KAAK;AAAI,OACxB;AAEA,UAAI,KAAK,UAAU;AACf,aAAK,aAAa,QAAQ;AAAA,MAC9B,OAAO;AACH,aAAK,YAAY,QAAQ;AAAA,MAC7B;AAAA,IACJ,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,sBAAqC;AAC/C,QAAI,CAAC,KAAK,WAAW,KAAK,eAAe,WAAW,GAAG;AAEvD,UAAM,YAAY,CAAC,GAAG,KAAK,cAAc;AACzC,SAAK,iBAAiB,EAAC;AAEvB,eAAW,iBAAiB,WAAW;AACnC,UAAI;AACA,cAAM,SAAS,MAAM,KAAK,QAAQ,cAAc,QAAQ,GAAK,eAAe,QAAQ,EAAW;AAC/F,sBAAc,QAAQ,MAAM;AAAA,MAChC,SAAS,OAAO;AACZ,sBAAc,OAAO,KAAK;AAAA,MAC9B;AAAA,IACJ;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKA,OAAO,MAAc,SAAoB;AACrC,UAAM,WAA4B;AAAA,MAC9B,IAAI,QAAO;AAAA,MACX;AAAA,MACA;AAAA,MACA,WAAW,KAAK;AAAI,KACxB;AAEA,QAAI,KAAK,QAAQ,UAAU;AACvB,WAAK,aAAa,QAAQ;AAAA,IAC9B,OAAO;AACH,WAAK,YAAY,QAAQ;AAAA,IAC7B;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKA,OAAO,OAAO,MAAc,MAAkC;AAC1D,eAAW,SAAS,MAAM;AACtB,YAAM,SAAS,MAAM,KAAK,QAAQ,GAAG,IAAI,UAAU,KAAK;AACxD,YAAM;AAAA,IACV;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKQ,aAAa,UAAiC;AAClD,SAAK,aAAa,KAAK,QAAQ;AAE/B,QAAI,CAAC,KAAK,YAAY;AAClB,WAAK,aAAa,WAAW,MAAM;AAC/B,aAAK,YAAW;AAAA,MACpB,GAAG,EAAE;AAAA,IACT;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKQ,aAAmB;AACvB,QAAI,KAAK,aAAa,WAAW,GAAG;AAEpC,UAAM,gBAAiC;AAAA,MACnC,IAAI,QAAO;AAAA,MACX,MAAM;AAAA,MACN,SAAS,KAAK;AAAA,MACd,WAAW,KAAK;AAAI,KACxB;AAEA,SAAK,YAAY,aAAa;AAC9B,SAAK,eAAe,EAAC;AACrB,SAAK,aAAa;AAAA,EACtB;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,YAAY,UAA0C;AAChE,QAAI;AACA,YAAM,SAAS,MAAM,KAAK,SAAS,UAAU,kBAAkB,CAAC,QAAQ,CAAC;AAGzE,UAAI,SAAS,WAAW,KAAK,gBAAgB,IAAI,SAAS,OAAO,GAAG;AAChE,cAAM,EAAE,SAAS,SAAQ,GAAI,KAAK,gBAAgB,IAAI,SAAS,OAAO;AACtE,qBAAa,OAAO;AACpB,aAAK,gBAAgB,OAAO,SAAS,OAAO;AAC5C,gBAAQ,MAAM;AAAA,MAClB;AAAA,IACJ,SAAS,OAAO;AAEZ,UAAI,KAAK,gBAAgB,IAAI,SAAS,EAAE,GAAG;AACvC,cAAM,EAAE,QAAQ,SAAQ,GAAI,KAAK,gBAAgB,IAAI,SAAS,EAAE;AAChE,qBAAa,OAAO;AACpB,aAAK,gBAAgB,OAAO,SAAS,EAAE;AACvC,eAAO,KAAK;AAAA,MAChB;AAAA,IACJ;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKA,QAAc;AACV,QAAI,KAAK,YAAY;AACjB,mBAAa,KAAK,UAAU;AAAA,IAChC;AAGA,eAAW,CAAC,IAAI,EAAE,QAAQ,SAAS,KAAK,KAAK,iBAAiB;AAC1D,mBAAa,OAAO;AACpB,aAAO,IAAI,MAAM,gBAAgB,CAAC;AAAA,IACtC;AAGA,SAAK,gBAAgB,OAAM;AAC3B,SAAK,SAAS,SAAQ;AAAA,EAC1B;AACJ;;AChcA,MAAM,8CAA8B,KAA8B;AAClE,IAAI,2BAA2B;AAE/B,MAAM,wBAAwB,MAAM;AAChC,MAAI,0BAA0B;AAC9B,6BAA2B;AAE3B,UAAQ,SAAS,WAAW,cAAc,CAAC,SAAc,QAAmB,iBAAkC;AAC1G,UAAM,cAAe,SAAS,eAAe,SAAS;AACtD,QAAI,CAAC,aAAa;AAElB,UAAM,YAAY,wBAAwB,IAAI,WAAW;AACzD,QAAI,CAAC,aAAa,UAAU,SAAS,GAAG;AAExC,UAAM,QAAQ;AAAA,MACV,MAAM;AAAA,MACN,QAAQ,QAAQ,OAAO;AAAA,MACvB,QAAQ;AAAA,KACZ;AAGA,eAAW,YAAY,WAAW;AAC9B,UAAI;AACA,cAAM,MAAM,SAAS,OAAO,QAAQ,YAAY;AAEhD,YAAI,OAAO,OAAQ,KAAa,UAAU,YAAY;AAClD,UAAC,IAAsB,MAAM,CAAC,UAAU,QAAQ,MAAM,qDAAqD,KAAK,CAAC;AAAA,QACrH;AAAA,MACJ,SAAS,OAAO;AACZ,gBAAQ,MAAM,qDAAqD,KAAK;AAAA,MAC5E;AAAA,IACJ;AAEA,WAAO;AAAA,EACX,CAAC;AACL;AAMO,MAAM,gCAAgC;AAAA,EAGzC,YAAoB,aAAqB;AAArB;AAChB,2BAAsB;AAAA,EAC1B;AAAA,EAJQ,gCAAkC,KAAI;AAAA,EAM9C,iBAAiB,MAAiB,UAAkG;AAChI,QAAI,SAAS,WAAW;AACxB,SAAK,UAAU,IAAI,QAAQ;AAC3B,QAAI,MAAM,wBAAwB,IAAI,KAAK,WAAW;AACtD,QAAI,CAAC,KAAK;AACN,gCAAU,KAAI;AACd,8BAAwB,IAAI,KAAK,aAAa,GAAG;AAAA,IACrD;AACA,QAAI,IAAI,QAAQ;AAAA,EACpB;AAAA,EAEA,oBAAoB,MAAiB,UAAkG;AACnI,QAAI,SAAS,WAAW;AACxB,SAAK,UAAU,OAAO,QAAQ;AAC9B,4BAAwB,IAAI,KAAK,WAAW,GAAG,OAAO,QAAQ;AAAA,EAClE;AAAA,EAEA,YAAY,SAAc;AACtB,UAAM,qBAAqB;AAAA,MACvB,GAAG;AAAA,MACH,aAAa,KAAK;AAAA,MAClB,QAAQ;AAAA,KACZ;AAGA,YAAQ,SAAS,cAAc,oBAAoB,MAAM,MAAM;AAAA,EACnE;AAAA,EAEA,QAAQ;AACJ,eAAW,YAAY,KAAK,WAAW;AACnC,8BAAwB,IAAI,KAAK,WAAW,GAAG,OAAO,QAAQ;AAAA,IAClE;AACA,SAAK,UAAU,OAAM;AAAA,EACzB;AACJ;;AChDO,MAAM,iCAAiC,CAAC,gBAA0C;AACrF,QAAM,SAAS,IAAI,gCAAgC,WAAW;AAC9D,SAAO;AACX;AAwEO,MAAM,6BAA6B,OAAO,WAAiD;AAK9F,SAAO;AAAA,IACH,MAAM,QAAQ,QAAgB,OAAc,EAAC,EAAG;AAQ5C,aAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpC,cAAM,UAAU,IAAI,iBAAiB,GAAG,OAAO,IAAI,aAAa;AAChE,cAAM,YAAY,QAAO;AAEzB,cAAM,UAAU,WAAW,MAAM;AAC7B,kBAAQ,OAAM;AACd,iBAAO,IAAI,MAAM,mCAAmC,MAAM,EAAE,CAAC;AAAA,QACjE,GAAG,GAAK;AAER,gBAAQ,YAAY,CAAC,UAAU;AAC3B,gBAAM,EAAE,IAAI,QAAQ,UAAU,MAAM;AACpC,cAAI,OAAO,WAAW;AAClB,yBAAa,OAAO;AACpB,oBAAQ,OAAM;AACd,gBAAI,OAAO;AACP,qBAAO,IAAI,MAAM,KAAK,CAAC;AAAA,YAC3B,OAAO;AACH,sBAAQ,MAAM;AAAA,YAClB;AAAA,UACJ;AAAA,QACJ;AAEA,gBAAQ,YAAY;AAAA,UAChB,IAAI;AAAA,UACJ,MAAM;AAAA,UACN;AAAA,UACA;AAAA,SACH;AAAA,MACL,CAAC;AAAA,IACL;AAAA,IAEA,QAAQ;AAAA,IAGR;AAAA,GACJ;AACJ;AAKO,MAAM,sBAAsB,OAAO,WAAiD;AACvF,QAAM,UAAU,OAAO;AAEvB,MAAI,YAAY,kBAAkB;AAG9B,WAAO,2BAA2B,MAAM;AAAA,EAC5C;AAGA,MAAI;AACJ,MAAI,OAAO,OAAO,WAAW,YAAY;AAErC,aAAS,OAAO,QAAO;AAAA,EAC3B,WAAW,OAAO,kBAAkB,QAAQ;AAExC,aAAS,OAAO;AAAA,EACpB,OAAO;AAEH,QAAI,YAAY,oBAAoB;AAEhC,UAAI;AACA,iBAAS,IAAI,OAAO,OAAO,QAAQ,OAAO,OAAO,MAAM,GAAG,OAAO,OAAO;AAAA,MAC5E,SAAS,OAAO;AAEZ,iBAAS,IAAI,OAAO,IAAI,IAAI,OAAO,QAAQ,YAAY,GAAG,GAAG,OAAO,OAAO;AAAA,MAC/E;AAAA,IACJ,OAAO;AACH,eAAS,IAAI,OAAO,IAAI,IAAI,OAAO,QAAQ,YAAY,GAAG,GAAG,OAAO,OAAO;AAAA,IAC/E;AAAA,EACJ;AAEA,QAAM,UAAU,MAAM,2BAA2B,OAAO,MAAM,IAAI,MAAM;AACxE,SAAO;AACX;AAgBO,MAAM,qCAAqC,CAC9C,QACA,SACA,mBACyB;AAEzB,QAAM,mBAAmB,IAAI,uBAAuB,MAAM,SAAS,cAAc;AAGjF,sBAAoB,MAAM,EAAE,KAAK,CAAC,gBAAgB;AAC9C,qBAAiB,WAAW,WAAW;AAAA,EAC3C,CAAC,EAAE,MAAM,CAAC,UAAU;AAChB,YAAQ,MAAM,uEAAuE,KAAK;AAE1F,qBAAiB,OAAM;AAAA,EAC3B,CAAC;AAED,SAAO;AACX;;AC5OA;AAAA;AAAA,EACI,EAAE,MAAM,kBAAkB,QAAQ,uBAAuB,UAAU,MAAM,cAAc,OAAM;AAAA,EAC7F,EAAE,MAAM,mBAAmB,QAAQ,uBAAuB,UAAU,MAAM,cAAc,OAAM;AAAA,EAC9F,EAAE,MAAM,kBAAkB,QAAQ,uBAAuB,UAAU,MAAM,cAAc,OAAM;AAAA,EAC7F,EAAE,MAAM,mBAAmB,QAAQ,uBAAuB,UAAU,MAAM,cAAc,OAAM;AAAA,EAC9F,EAAE,MAAM,eAAe,QAAQ,YAAY,UAAU,MAAM,cAAc,KAAI;AAAA,EAC7E,EAAE,MAAM,eAAe,QAAQ,YAAY,UAAU,MAAM,cAAc,KAAI;AAAA,EAC7E,EAAE,MAAM,iBAAiB,QAAQ,uBAAuB,UAAU,MAAM,cAAc,OAAM;AAAA,EAC5F,EAAE,MAAM,kBAAkB,QAAQ,uBAAuB,UAAU,MAAM,cAAc,OAAM;AAAA,EAC7F,EAAE,MAAM,iBAAiB,QAAQ,YAAY,UAAU,MAAM,cAAc,KAAI;AAAA,EAC/E,EAAE,MAAM,aAAa,QAAQ,YAAY,UAAU,MAAM,cAAc,KAAI;AAAA,EAC3E,EAAE,MAAM,eAAe,QAAQ,YAAY,UAAU,MAAM,cAAc,KAAI;AAAA,EAC7E,EAAE,MAAM,eAAe,QAAQ,YAAY,UAAU,MAAM,cAAc,KAAI;AAAA,EAC7E,EAAE,MAAM,iBAAiB,QAAQ,YAAY,UAAU,MAAM,cAAc,KAAI;AAAA,EAC/E,EAAE,MAAM,gBAAgB,QAAQ,YAAY,UAAU,MAAM,cAAc,KAAI;AAAA,EAC9E,EAAE,MAAM,YAAY,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC3E,EAAE,MAAM,YAAY,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC3E,EAAE,MAAM,YAAY,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC3E,EAAE,MAAM,YAAY,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC3E,EAAE,MAAM,cAAc,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC7E,EAAE,MAAM,cAAc,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC7E,EAAE,MAAM,aAAa,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC5E,EAAE,MAAM,aAAa,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC5E,EAAE,MAAM,eAAe,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC9E,EAAE,MAAM,eAAe,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC9E,EAAE,MAAM,iBAAiB,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAChF,EAAE,MAAM,iBAAiB,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAChF,EAAE,MAAM,eAAe,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC9E,EAAE,MAAM,eAAe,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC9E,EAAE,MAAM,eAAe,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC9E,EAAE,MAAM,eAAe,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC9E,EAAE,MAAM,YAAY,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC3E,EAAE,MAAM,YAAY,QAAQ,YAAY,UAAU,OAAO,cAAc;AAC3E,EAAE,QAAQ,CAAC,YAAiB;AACxB,MAAI,OAAO,OAAO,aAAa;AAC3B,QAAI;AAAE,WAAK,mBAAmB,OAAO;AAAA,IAAG,SAAS,GAAG;AAAE,cAAQ,KAAK,CAAC;AAAA,IAAG;AAAA,EAC3E;AACJ,CAAC;;ACVM,MAAM,eAAe,MAAM;AAC9B,QAAM,UAAe;AAAA,IACjB,UAAU;AAAA,IACV,0BAAU,KAAS;AAAA,IACnB,MAAM;AAAA,IACN,SAAS;AAAE,WAAK,WAAW;AAAM,2BAAqB,KAAK,IAAI;AAAG,aAAO;AAAA,IAAM;AAAA,IAC/E,QAAQ,IAAS;AAAE,WAAK,KAAK,IAAI,EAAE;AAAG,aAAO;AAAA,IAAM;AAAA,GACvD;AACA,GAAC,YAAY;AACT,WAAO,IAAU,EAAU;AACvB,YAAM,QAAQ,KAAK,SAAS,MAAM,UAAS,IAAK,EAAC,GAAI,MAAM,CAAC,QAAQ,QAAQ,IAAI,GAAG,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC,CAAC,CAAC;AAAG,cAAQ,MAAM,SAAQ;AACnJ,UAAI,OAAO,yBAAyB,aAAa;AAC7C,cAAM,IAAI,QAAQ,CAAC,QAAQ;AAAE,kBAAQ,OAAO,sBAAsB,GAAG;AAAA,QAAG,CAAC;AAAA,MAC7E,OAAO;AACH,cAAM,IAAI,QAAQ,CAAC,QAAQ;AAAE,qBAAW,KAAK,EAAE;AAAA,QAAG,CAAC;AAAA,MACvD;AAAA,IACJ;AAAA,EACJ,IAAG;AACH,SAAO;AACX;AASO,MAAMA,MAAA,GAAO,OAAO,YAAY,cAAc,UAAU,kBAAkB;AAC1E,MAAM,sBAAsB,CAAC,SAAS,QAAQ,EAAC,KAAI;AACtD,MAAI,CAAC,SAAU,OAAO,SAAS,YAAa,CAAC,SAAS;AACtD,SAAO,MAAM,KAAK,OAAO,QAAQ,KAAK,CAAC,EAAE,IAAI,CAAC,CAAC,MAAM,KAAK,MAAI;AAC1D,UAAM,MAAM,QAAQ,aAAa,IAAI;AACrC,QAAI,SAAS,MAAM;AACf,cAAQ,gBAAgB,IAAI;AAAA,IAChC,WACI,SAAS,KAAK;AACd,cAAQ,aAAa,MAAM,OAAO,KAAM,SAAS,MAAQ,OAAO,KAAM;AAAA,IAC1E;AAAA,EACJ,CAAC;AACL;AAcO,MAAM,kCAAkB,KAAiB;AACzC,MAAMC,iBAAA,GAAkB,CAAC,IAAI,UAAU,QAAS,SAAO;AAC1D,QAAM,SAAS,EAAE,SAAS,MAAM,QAAQ,MAAI;AAAE,WAAO,UAAU;AAAA,EAAO,GAAE;AACxE,sBAAoB,YAAU;AAC1B,QAAI,CAAC,MAAO,OAAO,MAAM,YAAa;AACtC,WAAO,OAAO,SAAS;AACnB,YAAM,QAAQ,IAAI;AAAA;AAAA,QACd,QAAQ,IAAI,IAAI,GAAG,IAAI;AAAA,QACvB,IAAI,QAAQ,CAAC,MAAI,WAAW,GAAG,OAAO,CAAC;AAAA,OAC1C,EAAE,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AAGrC,YAAM,QAAQ,IAAI;AAAA,QACd,IAAI,QAAQ,CAAC,MAAI,oBAAoB,GAAG,EAAE,SAAS,CAAC;AAAA,QACpD,IAAI,QAAQ,CAAC,MAAI,WAAW,GAAG,OAAO,CAAC;AAAA;AAAA,OAE1C;AAAA,IACL;AACA,WAAO,SAAS,MAAI;AAAA,IAAC;AAAA,EACzB,GAAG,EAAC,SAAQ;AACZ,SAAO,QAAQ;AACnB;AAGA,IAAI,OAAO,yBAAyB,aAAa;AAC7C,wBAAsB,YAAY;AAC9B,WAAO,MAAM;AACT,kBAAY,QAAQ,CAAC,OAAO,MAAM;AAClC,YAAM,IAAI,QAAQ,CAAC,MAAM,sBAAsB,CAAC,CAAC;AAAA,IACrD;AAAA,EACJ,CAAC;AACL;AAGO,MAAM,iBAAmB,OAAO,mBAAmB,GAAI,kBAAmB,OAAO,oBAAoB;AACrG,MAAM,kBAAmB,OAAO,oBAAoB,GAAG,mBAAmB,OAAO,qBAAqB;AACtG,MAAM,sCAAuB,SAAqC;AAClE,MAAM,uCAAuB,SAAqC;AAClE,MAAM,mBAAmB,CAAC,SAAS,KAAU,MAAI;AAAC,MAAM;AAC3D,MAAI,EAAE,mBAAmB,cAAc;AACvC,MAAI,CAAC,iBAAiB,IAAI,OAAO,GAAG;AAChC,YAAQ,eAAe,IAAM,QAAQ;AACrC,YAAQ,gBAAgB,IAAK,QAAQ;AAGrC,UAAM,WAAW,IAAI,eAAe,CAAC,YAAY;AAC7C,iBAAW,SAAS,SAAS;AACzB,YAAI,MAAM,gBAAgB;AACtB,gBAAM,iBAAiB,MAAM,eAAe,CAAC;AAC7C,cAAI,gBAAgB;AAChB,oBAAQ,eAAe,IAAK,KAAK,IAAI,eAAe,YAAY,QAAQ,WAAW;AACnF,oBAAQ,gBAAgB,IAAI,KAAK,IAAI,eAAe,WAAW,QAAQ,YAAY;AACnF,iBAAK,OAAO;AAAA,UAChB;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ,CAAC;AAGD,qBAAiB,IAAI,SAAS,QAAQ;AACtC,aAAS,QAAS,SAAiB,WAAW,SAAS,EAAC,KAAK,eAAc;AAAA,EAC/E;AACJ;AAGO,MAAM,kBAAkB,CAAC,SAAS,KAAU,MAAI;AAAC,MAAM;AAC1D,MAAI,EAAE,mBAAmB,cAAc;AACvC,MAAI,CAAC,gBAAgB,IAAI,OAAO,GAAG;AAC/B,YAAQ,cAAc,IAAK,QAAQ;AACnC,YAAQ,eAAe,IAAI,QAAQ;AACnC,UAAM,WAAW,IAAI,eAAe,CAAC,YAAY;AAC7C,iBAAW,SAAS,SAAS;AACzB,YAAI,MAAM,eAAe;AACrB,gBAAM,gBAAgB,MAAM,cAAc,CAAC;AAC3C,cAAI,eAAe;AACf,oBAAQ,cAAc,IAAK,KAAK,IAAI,cAAc,YAAY,QAAQ,WAAW;AACjF,oBAAQ,eAAe,IAAI,KAAK,IAAI,cAAc,WAAW,QAAQ,YAAY;AACjF,iBAAK,OAAO;AAAA,UAChB;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ,CAAC;AAGD,oBAAgB,IAAI,SAAS,QAAQ;AACrC,aAAS,QAAS,SAAiB,WAAW,SAAS,EAAC,KAAK,cAAa;AAAA,EAC9E;AACJ;AAUO,MAAM,aAAa,CAAC,OAAyB,OAAgB,OAAW;AAC3E,MAAI,SAAS,QAAQ,MAAM,WAAW,OAAO;AACzC,QACK,QAAQ,MAAM,KAAK,cACnB,QAAQ,MAAM,KAAK,WAAW,CAAC,OAAO,SACzC;AAAE,aAAO,SAAQ;AAAG,UAAI,kBAAiB;AAAA,IAAG,OAAO;AACjD,YAAM,UAAU,CAAC,CAAC;AAClB,aAAO,gBAAgB,IAAI,MAAM,UAAU,EAAE,SAAS,MAAM,YAAY,MAAO,CAAC;AAAA,IACpF;AAAA,EACJ;AACJ;AAKO,MAAMC,eAAA,GAAgB,CAAC,WAAwB;AAClD,SAAQ,UAAU,QAAQ,kBAAkB,eAAe,EAAE,kBAAkB,oBAAoB,kBAAkB,mBAAoB,SAAS;AACtJ;AAGO,MAAM,UAAU,CAAC,SAAsB,SAAsB;AAChE,MAAI,WAAW,QAAQ,QAAQ,MAAM,OAAO;AAC5C,SAAO,MAAM,KAAK,SAAS,cAAc,EAAE,GAAG,UAAW,IAAkB,KAAK;AACpF;AAGO,MACH,QAAQ,gCACR,QAAQ,SAAS,QAAQ,SAAS,QAAQ,UAAU,QAAQ,UAAU,QAAQ;AAG3E,MAAM,uBAAuB,CAAC,aAA6C;AAC9E,MAAI,YAAY,cAAc,OAAO,SAAS,wBAAuB;AACrE,QAAM,SAAS,SAAS,cAAc,KAAK,QAAQ;AACnD,WAAS,OAAY,OAAO,KAAK,GAAG,OAAO,YAAY,IAAI,aAAa,QAAQ,SAAS,MAAM,KAAK,MAAK;AACrG,QAAI,MAAM,CAAC,UAAU,OAAO,MAAM,CAAC,CAAC;AACpC,QAAI,MAAM,CAAC,GAAG,KAAK,KAAK,MAAM,CAAC;AAC/B,QAAI,MAAM,CAAC,GAAG,aAAa,MAAM,MAAM,CAAC;AACxC,QAAI,MAAM,CAAC,GAAG,KAAK,aAAa,MAAM,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE;AACxD,eAAW,SAAS,MAAM,MAAM,CAAC,EAAE,MAAM;AAAA,EAC7C;AACA,MAAI,WAAW,KAAK,YAAY,UAAU,MAAM,CAAC;AACjD,SAAO;AACX;AAGO,MAAM,YAAY,CAAC,OAAY;AAAE,SAAO,MAAM,SAAS,cAAc,QAAQ,cAAc,QAAQ,cAAc,WAAW,cAAc,WAAW,cAAc,eAAe,cAAc,oBAAoB,KAAK;AAAM;AAE/N,MAAM,YAAY,CAAC,SAAc,WAAgB;AAAE,SAAO,SAAS;AAAE,QAAI,EAAE,SAAS,WAAW,UAAU;AAAE,aAAO;AAAA,IAAO;AAAG,SAAK,SAAS,WAAW,cAAc,QAAQ,WAAW,SAAS,OAAO;AAAM,cAAU,QAAQ,kBAAkB,QAAQ,cAAc,SAAS,cAAc,EAAE,UAAU,MAAM,IAAI,SAAS,cAAc,EAAE,UAAU,MAAM,GAAG,OAAO,SAAS;AAAA,EAAa;AAAE;AAC9X,MAAM,cAAc,EAAC;AAGrB,SAAS,SAAS,QAAQ,MAAM,IAAI,OAAY,aAAkB;AACrE,UAAQ,mBAAmB,MAAM,IAAI,IAAI;AACzC,QAAM,KAAM,OAAO,UAAU,YAAY,OAAO,UAAU,cAAc,CAAC,QAAQ,QAAS,IAAI,QAAQ,MAAM,IAAI;AAChH,SAAO,MAAM,IAAI,WAAW,sBAAsB,MAAM,IAAI,IAAI;AAEpE;AAGO,SAAS,YAAY,QAAQ,MAAM,IAAI,OAAY,aAAkB;AACxE,UAAQ,sBAAsB,MAAM,IAAI,IAAI;AAChD;AAIO,MAAM,YAAY,CAAC,MAAM,aAAa;AACzC,SAAQ,gBAAgB,UAAU,KAAK,OAAM,GAAI;AACjD,SAAO,CAAC,GAAG,OAAO,QAAQ,QAAQ,CAAC,GAAG,MAAM,CAAC,CAAC,MAAM,EAAE,MAAO,MAAM,QAAQ,EAAE,IAAI,SAAS,MAAM,MAAM,GAAG,EAAS,IAAI,SAAS,MAAM,MAAM,EAAE,CAAE;AACnJ;AAKO,MAAM,gBAAgB,CAAC,IAAI,WAAW;AACzC,MAAI,QAAQ;AACR,QAAI,UAAiB;AACrB,QAAI,kBAAkB,KAAK;AACvB,gBAAU,CAAC,GAAG,OAAO,SAAS;AAAA,IAClC,OAAO;AACH,gBAAU,CAAC,GAAG,OAAO,QAAQ,MAAM,CAAC;AAAA,IACxC;AACA,WAAO,QAAQ,IAAI,CAAC,CAAC,MAAM,IAAI,QAAQ,kBAAkB,IAAI,IAAI,CAAC,GAAG,IAAW,IAAI,SAAS,EAAC,GAAI,MAAM,CAAC,QAAM;AAC3G,aAAO,SAAS,IAAI,MAAM,GAAG;AAAA,IACjC,CAAC,CAAC;AAAA,EACN;AACJ;AAkCO,MAAM,iBAAiB,CAAC,GAAQ,GAAQ,OAAa;AACxD,MAAI,KAAK,QAAQ,EAAE,aAAa,SAAS,GAAG,WAAW,MAAM,OAAO;AACpE,MAAK,KAAK,MAAQ,GAAG,WAAW,OAAO,GAAG,WAAW,IAAI,OAAO;AAGhE,MAAI,IAAI,gBAAgB,OAAO,GAAG,iBAAiB,YAAY;AAC3D,UAAM,OAAO,GAAG,cAAa;AAC7B,UAAM,MAAM,GAAG,WAAW;AAC1B,UAAM,MAAM,GAAG,WAAW;AAC1B,QAAI,KAAK,SAAS,GAAG,KAAK,KAAK,SAAS,GAAG,GAAG;AAE1C,YAAM,SAAS,KAAK,QAAQ,GAAG;AAC/B,YAAM,SAAS,KAAK,QAAQ,GAAG;AAC/B,UAAI,UAAU,KAAK,UAAU,KAAK,SAAS,QAAQ,OAAO;AAAA,IAC9D;AAAA,EACJ;AAEA,MAAI,GAAG,WAAW,GAAG,WAAW,CAAC,KAAK,GAAG,YAAY,EAAE,UAAU,MAAM,GAAG,SAAS,GAAG,WAAW,IAAI,OAAO;AAC5G,SAAO;AACX;AAGO,MAAM,aAAa,CAAC,SAA6B,UAAkB,OAAmC;AAEzG,MAAI,IAAI,gBAAgB,OAAO,GAAG,iBAAiB,YAAY;AAC3D,UAAM,OAAO,GAAG,cAAa;AAE7B,eAAW,QAAQ,MAAM;AACrB,UAAI,gBAAgB,eAAe,gBAAgB,SAAS;AACxD,YAAK,KAAqB,UAAU,QAAQ,GAAG;AAC3C,iBAAO;AAAA,QACX;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AAEA,QAAM,OAAQ,SAAS,UAAU,QAAQ,IAAI,UAAU;AACvD,QAAM,QAAQ,SAAS,YAAY,EAAE,UAAU,MAAM,KAAY,SAAS,eAAe,YAAY,EAAE,UAAU,MAAK,IAAW;AACjI,QAAM,cAAc,MAAM,UAAU,QAAQ,IAAI,OAAO;AACvD,QAAM,UAAW,SAAiB,UAAU,QAAQ,KAAM,MAAc,UAAU,QAAQ,KAAM,aAAqB,UAAU,QAAQ,KAAK;AAC5I,SAAQ,QAAQ,WAAW;AAC/B;AAMO,MAAM,YAAY,CAAC,SAA6B,mBAA0C,MAA0B,aAAsB;AAC7I,MAAI,CAAC,SAAS,OAAO;AAIrB,MAAI,QAAQ,mBAAmB,CAAC,QAAQ,gBAAgB,EAAE,cAAc,MAAM,oBAAoB,MAAM,GAAG,OAAO;AAElH,MAAI,CAAC,QAAQ,mBAAmB,QAAQ,iBAAiB,QAAQ,QAAQ,MAAM,aAAa,SAAS,OAAO;AAG5G,MAAI,SAAS,SAAS;AACtB,SAAO,UAAU,OAAO,cAAc,OAAO,WAAW,eAAe;AACnE,aAAS,OAAO,WAAW;AAAA,EAC/B;AAGA,QAAM,YAAa,WAAW,WAAY,UAAU,QAAQ,OAAO;AACnE,EAAkB,QAAQ,QAAQ,QAAQ;AAS1C,EAAuB;AACnB,IAA2C;AACvC,UAAI,QAAQ,UAAU;AAElB,eAAO,CAAC,CAAC,WAAW,SAAS,iBAAiB;AAAA,MAClD,OAAO;AAEH,cAAM,SAAS,YAAY,SAAU,QAAQ,cAAc,QAAQ,KAAK;AACxE,cAAM,SAAS,CAAC,CAAC,WAAW,QAAuB,iBAAiB;AACpE,eAAQ,SAAS,gBAAgB,iBAAiB,KAAK,QAAQ,SAAS,UAAU,iBAAiB,KAAK;AAAA,MAC5G;AAAA,IACJ;AAMA,EACJ;AAGJ;;AC5XA,MAAM,iCAAiB,SAA6B;AAG7C,MAAM,SAAS,CAAC,UAAU,SAAS,oBAAoB;AAE1D,SAAO,WAAW,oBAAoB,SAAS,MAAI;AAE/C,UAAM,aAAmB,SAAS,UAAU,eAAe,IAAI,UAAU,SAAS,SAAS,UAAU,eAAe,KAAK,SAAS;AAGlI,QAAI,WAAW,MAAM;AACjB,aAAQ,WAAW,QAAQ;AAAA,IAC/B;AAIA,QAAI,SAAS,gBAAgB;AAEzB,aAAO,SAAS,kBAAkB;AAAA,IACtC;AAAA,EACJ,CAAC;AACL;AAcO,MAAM,kBAAkB,CAAC,UAAU,SAAS,oBAAkB;AAEjE,UAAS,SAAS,kBAAkB,OAAO,IAAI,OAAO,OAAO,MAAO;AACxE;AASO,MAAM,WAAW,CAAC,UAAU,SAAS,oBAAoB;AAE5D,QAAM,aAAmB,SAAS,UAAU,uCAAyC,IAAI,UAAU,SAAS,SAAS,UAAU,uCAAyC,KAAK;AAC7K,MAAI,WAAW,eAAe,QAAQ,GAAG;AAAE,WAAO,SAAS,WAAW,eAAe,QAAQ,KAAK,GAAG,KAAK;AAAA,EAAG;AAC7G,SAAQ,WAAW,UAAU;AACjC;AA+BO,MAAM,MAAS,CAAC,IAAI,SAAS,UAAU,UAAQ,SAAS,EAAE,KAAG,IAAK,GAAG,eAAe,KAAK,IAAI,eAAiB,GAAG,cAAc,KAAK,IAAI;AACxI,MAAM,MAAS,CAAC,IAAI,SAAS,UAAU,UAAQ,SAAS,EAAE,KAAG,IAAK,GAAG,cAAc,KAAK,IAAI,cAAgB,GAAG,eAAe,KAAK,IAAI;AACvI,MAAM,MAAS,CAAC,IAAI,SAAS,UAAU,UAAQ,SAAS,EAAE,KAAG,IAAK,GAAG,gBAAgB,KAAK,IAAI,eAAiB,GAAG,eAAe,KAAK,IAAI;AAC1I,MAAM,MAAS,CAAC,IAAI,SAAS,UAAU,UAAQ,SAAS,EAAE,KAAG,IAAK,GAAG,eAAe,KAAK,IAAI,cAAgB,GAAG,gBAAgB,KAAK,IAAI;;AC9FzI,MAAM,eAAe,MAAM;AAC9B,QAAM,IAAI,OAAO,cAAc,cAAc,WAAW,0BAA0B,GAAG,UAAU;AAC/F,MAAI,OAAO,UAAU,aAAa;AAC9B,UAAM,KAAK,QAAQ,aAAa;AAChC,UAAM,KAAK,QAAQ,cAAc;AACjC,WAAO;AAAA,MACH,kBAAkB,KAAK,IAAI,QAAQ,OAAO,QAAQ,UAAU,IAAI;AAAA,MAChE,mBAAmB,KAAK,IAAI,QAAQ,QAAQ,QAAQ,WAAW,IAAI;AAAA,MACnE,iBAAiB,IAAI,KAAK;AAAA,MAC1B,kBAAkB,IAAI,KAAK;AAAA,MAC3B,iBAAkB,KAAK,IAAI,QAAQ,aAAa,QAAQ,WAAW,IAAI;AAAA,MACvE,iBAAiB,oBAAoB;AAAA,KACzC;AAAA,EACJ;AACA,SAAO;AAAA,IACH,kBAAkB;AAAA,IAClB,mBAAmB;AAAA,IACnB,iBAAiB;AAAA,IACjB,kBAAkB;AAAA,IAClB,iBAAiB;AAAA,IACjB,iBAAiB;AAAA,GACrB;AACJ;AAGyB;AAElB,MAAM,uBAAuB;AAAA,EAChC,oBAAoB;AAAA;AAAA,EACpB,qBAAqB;AAAA;AAAA,EACrB,sBAAsB;AAAA;AAAA,EACtB,uBAAuB;AAAA;AAC3B;AAkBO,MAAM,wBAAwB,MAAM;AACvC,MAAI,kBAA0B,OAAO,YAAY;AACjD,MAAI,CAAC,OAAO,WAAW,uGAAuG,EAAE,SAAS;AACrI,QAAI,WAAW,yBAAyB,EAAE,SAAS;AAAC,wBAAkB,gBAAgB,QAAQ,aAAa,UAAU;AAAA,IAAE,WAC/G,WAAW,0BAA0B,EAAE,SAAS;AAAC,wBAAkB,gBAAgB,QAAQ,YAAY,WAAW;AAAA,IAAE;AAAC,EACjI;AACA,SAAO;AACX;;AC1DA,MAAM,SAAS,IAAI,gBAAgB,GAAG,CAAC;AAC3B,OAAO,WAAW,IAAI;;ACHlC,MAAM,kBAAkB,CAAC,YAAiB;AAAE,MAAI,OAAO,SAAS,WAAW,UAAU;AAAE,cAAU,SAAS,WAAW,SAAS,YAAY,OAAO,SAAS,QAAQ,WAAW,SAAS,OAAO,SAAS;AAAA,EAAS;AAAG,SAAO;AAAS;AA+E3N,MAAM,mBAAmB,CAAC,SAAS,WAAW,OAAO;AACxD,MAAI,OAAO,SAAS,YAAY,UAAU;AAAE,WAAO,2BAA2B,SAAS,SAAS,UAAU,WAAW,EAAE;AAAA,EAAG;AAG1H,QAAM,gBAAgB,IAAI,KAAa,UAAU,MAAM,GAAG,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC;AAChG,QAAM,WAAW,IAAI,iBAAiB,CAAC,cAAcC,cAAa;AAC9D,eAAW,YAAY,cAAc;AACjC,UAAI,SAAS,iBAAiB,cAAc,IAAI,SAAS,aAAa,GAClE;AAAE,WAAG,UAAUA,SAAQ;AAAA,MAAG;AAAA,IAClC;AAAA,EACJ,CAAC;AAGD,OAAK,SAAS,WAAW,oBAAoB,MAAM;AAC/C,aAAS,QAAQ,UAAU,gBAAgB,OAAO,GAAG,EAAE,YAAY,MAAM,mBAAmB,MAAM,iBAAiB,CAAC,GAAG,aAAa,GAAG;AAAA,EAC3I;AACA,gBAAc,QAAQ,CAACC,eAAY,GAAG,EAAE,QAAQ,SAAS,MAAM,cAAc,eAAeA,YAAW,UAAW,SAAyB,eAAeA,UAAS,GAAE,EAAG,QAAQ,CAAC;AACjL,SAAO;AACX;AAGO,MAAM,6BAA6B,CAAC,SAAS,UAAU,WAAW,OAAO;AAC5E,QAAM,gBAAgB,IAAI,IAAY,CAAC,GAAI,UAAU,MAAM,GAAG,KAAK,CAAC,SAAS,CAAE,EAAE,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC;AACrG,QAAM,WAAW,IAAI,iBAAiB,CAAC,cAAcD,cAAa;AAC9D,eAAW,YAAY,cAAc;AACjC,UAAI,SAAS,QAAQ,aAAa;AAC9B,cAAM,aAAe,MAAM,KAAK,SAAS,UAAU,KAAO,EAAC;AAC3D,cAAM,eAAe,MAAM,KAAK,SAAS,YAAY,KAAK,EAAC;AAG3D,mBAAW,KAAK,GAAG,MAAM,KAAK,SAAS,cAAc,EAAE,EAAE,QAAQ,CAAC,OAAK,MAAM,KAAM,IAAoB,mBAAmB,QAAQ,KAAK,EAAE,CAAc,CAAC;AACxJ,qBAAa,KAAK,GAAG,MAAM,KAAK,SAAS,gBAAgB,EAAE,EAAE,QAAQ,CAAC,OAAK,MAAM,KAAM,IAAoB,mBAAmB,QAAQ,KAAK,EAAE,CAAc,CAAC;AAG5J,SAAC,GAAG,IAAI,IAAI,UAAU,CAAC,GAAG,OAAO,CAAC,OAAU,IAAI,UAAU,QAAQ,CAAC,GAAG,MAAM,CAAC,WAAS;AAClF,wBAAc,QAAQ,CAACC,eAAY;AAC/B,eAAG,EAAE,QAAQ,MAAM,cAAc,eAAeA,YAAW,UAAW,QAAwB,eAAeA,UAAS,GAAE,EAAGD,SAAQ;AAAA,UACvI,CAAC;AAAA,QACL,CAAC;AAAA,MACL,WACK,SAAS,QAAwB,UAAU,QAAQ,MAAM,SAAS,iBAAiB,cAAc,IAAI,SAAS,aAAa,IAAI;AAChI,WAAG,UAAUA,SAAQ;AAAA,MACzB;AAAA,IACJ;AAAA,EACJ,CAAC;AAGD,WAAS,QAAQ,UAAU,gBAAgB,OAAO,GAAG;AAAA,IACjD,mBAAmB;AAAA,IACnB,YAAY;AAAA,IACZ,iBAAiB,CAAC,GAAG,aAAa;AAAA,IAClC,WAAW;AAAA,IACX,SAAS;AAAA,IACT,eAAe;AAAA,GAClB;AAGD,GAAC,GAAG,QAAQ,iBAAiB,QAAQ,CAAC,EAAE,IAAI,CAAC,WAAS,cAAc,QAAQ,CAACC,eAAY,GAAG,EAAE,QAAQ,MAAM,cAAc,eAAeA,YAAW,UAAW,QAAwB,eAAeA,UAAS,GAAE,EAAG,QAAQ,CAAC,CAAC;AAC9N,SAAO;AACX;AAGO,MAAM,oBAAoB,CAAC,SAAS,WAAW,KAAK,KAAK,CAAC,KAAK,QAAM;AAAC,MAAM;AAC/E,QAAM,wBAAwB,CAAC,UAAwC;AACnE,UAAM,SAAS,MAAM,KAAK,SAAS,EAAE,KAAK,EAAC;AAC3C,WAAO,KAAK,GAAG,MAAM,KAAK,SAAS,EAAE,EAAE,QAAQ,CAAC,OAAM,MAAM,KAAM,IAAoB,mBAAmB,QAAQ,KAAK,EAAE,CAAc,CAAC;AACvI,WAAO,CAAC,GAAG,MAAM,KAAM,IAAI,IAAI,MAAM,EAAG,QAAQ,CAAC,EAAE,OAAO,CAAC,OAAqB,IAAK,UAAU,QAAQ,CAAC;AAAA,EAC5G;AAGA,QAAM,iBAAiB,CAAC,aAAW;AAC/B,UAAMD,YAAgB,OAAO,SAAQ;AACrC,UAAM,aAAe,sBAAsB,SAAS,UAAU;AAC9D,UAAM,eAAe,sBAAsB,SAAS,YAAY;AAGhE,QAAI,WAAW,SAAS,KAAK,aAAa,SAAS,GAAG;AAClD,WAAK;AAAA,QACD,MAAM,SAAS;AAAA,QACf,QAAQ,SAAS;AAAA,QACjB,eAAe,SAAS;AAAA,QACxB,oBAAoB,SAAS;AAAA,QAC7B,aAAa,SAAS;AAAA,QACtB,UAAU,SAAS;AAAA,QACnB,iBAAiB,SAAS;AAAA,QAC1B;AAAA,QAAY;AAAA,SACbA,SAAQ;AAAA,IACf;AAAA,EACJ;AAGA,QAAM,aAAa,CAAC,OAAK;AACrB,mBAAe;AAAA,MACX,YAAY,CAAC,IAAI,MAAM,EAAE,OAAO,CAAC,OAAK,CAAC,CAAC,EAAE;AAAA,MAC1C,cAAc,CAAC,IAAI,aAAa,EAAE,OAAO,CAAC,OAAK,CAAC,CAAC,EAAE;AAAA,MACnD,MAAM;AAAA,MACN,QAAQ,IAAI;AAAA,KACf;AAAA,EACL;AAGA,QAAM,gBAAgB,CAAC,OAAK;AACxB,mBAAe;AAAA,MACX,YAAY,CAAC,IAAI,aAAa,EAAE,OAAO,CAAC,OAAK,CAAC,CAAC,EAAE;AAAA,MACjD,cAAc,CAAC,IAAI,MAAM,EAAE,OAAO,CAAC,OAAK,CAAC,CAAC,EAAE;AAAA,MAC5C,MAAM;AAAA,MACN,QAAQ,IAAI;AAAA,KACf;AAAA,EACL;AAGA,QAAM,mBAAmB,CAAC,OAAK;AAC3B,mBAAe;AAAA,MACX,YAAY,CAAC,IAAI,MAAM,EAAE,OAAO,CAAC,OAAK,CAAC,CAAC,EAAE;AAAA,MAC1C,cAAc,CAAC,IAAI,iBAAiB,UAAU,aAAa,EAAE,OAAO,CAAC,OAAK,CAAC,CAAC,EAAE;AAAA,MAC9E,MAAM;AAAA,MACN,QAAQ,IAAI;AAAA,KACf;AAAA,EACL;AAIA,QAAM,UAAU;AAAA,IACZ,SAAS;AAAA,IACT,SAAS;AAAA,GACb;AAGA,MAAI,UAAU,WAAW,QAAQ,KAAK,UAAU,WAAW,SAAS,GAAG;AACnE,YAAQ,iBAAiB,eAAe,YAAY,OAAO;AAC3D,YAAQ,iBAAiB,cAAc,eAAe,OAAO;AAC7D,YAAQ,iBAAiB,eAAe,YAAY,OAAO;AAC3D,YAAQ,iBAAiB,aAAa,eAAe,OAAO;AAC5D,YAAQ,iBAAiB,iBAAiB,eAAe,OAAO;AAChE,WAAO,EAAE,YAAY,MAAI;AACrB,cAAQ,oBAAoB,eAAe,YAAY,OAAO;AAC9D,cAAQ,oBAAoB,cAAc,eAAe,OAAO;AAChE,cAAQ,oBAAoB,eAAe,YAAY,OAAO;AAC9D,cAAQ,oBAAoB,aAAa,eAAe,OAAO;AAC/D,cAAQ,oBAAoB,iBAAiB,eAAe,OAAO;AAAA,IACvE,GAAE;AAAA,EACN;AAGA,MAAI,UAAU,WAAW,QAAQ,GAAG;AAChC,YAAQ,iBAAiB,eAAe,YAAY,OAAO;AAC3D,YAAQ,iBAAiB,cAAc,eAAe,OAAO;AAC7D,WAAO,EAAE,YAAY,MAAI;AACrB,cAAQ,oBAAoB,eAAe,YAAY,OAAO;AAC9D,cAAQ,oBAAoB,cAAc,eAAe,OAAO;AAAA,IACpE,GAAE;AAAA,EACN;AAGA,MAAI,UAAU,WAAW,SAAS,GAAG;AACjC,YAAQ,iBAAiB,eAAe,YAAY,OAAO;AAC3D,YAAQ,iBAAiB,aAAa,eAAe,OAAO;AAC5D,YAAQ,iBAAiB,iBAAiB,eAAe,OAAO;AAChE,WAAO,EAAE,YAAY,MAAI;AACrB,cAAQ,oBAAoB,eAAe,YAAY,OAAO;AAC9D,cAAQ,oBAAoB,aAAa,eAAe,OAAO;AAC/D,cAAQ,oBAAoB,iBAAiB,eAAe,OAAO;AAAA,IACvE,GAAE;AAAA,EACN;AAGA,MAAI,UAAU,WAAW,QAAQ,KAAK,UAAU,WAAW,eAAe,KAAK,UAAU,WAAW,gBAAgB,GAAG;AACnH,YAAQ,iBAAiB,WAAW,YAAY,OAAO;AACvD,YAAQ,iBAAiB,YAAY,eAAe,OAAO;AAC3D,YAAQ,iBAAiB,SAAS,kBAAkB,OAAO;AAC3D,WAAO,EAAE,YAAY,MAAI;AACrB,cAAQ,oBAAoB,WAAW,YAAY,OAAO;AAC1D,cAAQ,oBAAoB,YAAY,eAAe,OAAO;AAC9D,cAAQ,oBAAoB,SAAS,kBAAkB,OAAO;AAAA,IAClE,GAAE;AAAA,EACN;AAGA,QAAM,WAAW,IAAI,iBAAiB,CAAC,cAAcA,cAAa;AAC9D,eAAW,YAAY,cAAc;AACjC,UAAI,SAAS,QAAQ,aAAa;AAC9B,uBAAe,QAAQ;AAAA,MAC3B;AAAA,IACJ;AAAA,EACJ,CAAC;AAGD,QAAM,QAAQ,IAAI,QAAQ,QAAQ;AAClC,OAAK,SAAS,WAAW,oBAAoB,MAAM;AAC/C,aAAS,QAAQ,UAAU,gBAAgB,OAAO,GAAG,EAAE,WAAW,MAAM,SAAU,MAAM;AAAA,EAC5F;AACA,QAAM,WAAW,MAAM,KAAK,QAAQ,iBAAiB,QAAQ,CAAC;AAC9D,MAAI,SAAS,SAAS,GAAG;AAAE,SAAK,EAAE,YAAY,UAAS,EAAG,QAAQ;AAAA,EAAG;AACrE,SAAO;AACX;;AC/QA,MAAM,mCAAmB,SAAQ;AACjC,MAAM,WAAW,cAAa;AAG9B,MAAM,cAAc,CAAC,QAAM;AACvB,SAAO,KAAK,gBAAgB,KAAK,SAAS;AAC9C;AAGA,MAAM,eAAe,CAAC,QAAM;AACxB,SAAO,KAAK,iBAAiB,KAAK,UAAU;AAChD;AAIO,MAAM,QAAQ,CAAC,KAAK,KAAK,QAAQ,GAAG,MAAM,SAAS,MAAM;AAC5D,QAAM,SAAS,IAAI;AACnB,MAAI,UAAU,OAAO,QAAQ,GAAG,OAAO,SAAS,CAAC;AACjD,MAAI,QAAQ,CAAC,UAAU,MAAM,KAAK,KAAK,IAAI;AAC3C,MAAI,QAAQ,IAAI,SAAS,KAAK,KAAK,EAAE;AACrC,MAAI,UAAU,EAAE,YAAY,GAAG,IAAI,KAAK,OAAO,EAAE,aAAa,GAAG,IAAI,KAAK,KAAK;AACnF;AAGO,MAAM,yBAAyB,CAAC,SAAO;AAC1C,MAAI,CAAC,aAAa,IAAI,IAAI,MAAM,gBAAgB,QAAQ,gBAAgB,QAAQ,gBAAgB,mBAAmB,gBAAgB,eAAe,gBAAgB,QAAQ;AACtK,iBAAa,IAAI,MAAM,kBAAkB,IAAI,CAAC;AAAA,EAClD;AACA,SAAO,aAAa,IAAI,IAAI;AAChC;AAGA,MAAM,gCAAgB,SAAQ;AAC9B,MAAM,aAAa,CAAC,IAAI,QAAM;AAE1B,SAAO,WAAW,sBAAsB,IAAI,MAAK,IAAI,OAAO,GAAG,CAAC;AACpE;AAGA,IAAI,WAAgB;AACpB,IAAI,OAAO,qBAAqB,aAAa;AACzC,aAAW,MAAM,iBAAiB,kBAAkB;AAAA,IAChD,OAAO,qBAAqB,CAAC,YAAY,aAAa;AAAA;AAAA,IAGtD,MAAuC;AAAA,IACvC,QAA4B;AAAA,IAC5B,QAA0B,CAAC,GAAG,CAAC;AAAA,IAC/B,WAAiC;AAAA,IACjC,SAA+B;AAAA;AAAA,IAG/B,IAAI,UAAU;AAAE,aAAO,SAAS,KAAK,aAAa,aAAa,KAAK,GAAG,KAAK;AAAA,IAAG;AAAA,IAC/E,IAAI,QAAQ,OAAe;AAAE,WAAK,aAAa,eAAe,MAAM,UAAU;AAAA,IAAG;AAAA;AAAA,IAGjF,yBAAyB,MAAM,GAAG,UAAU;AACxC,UAAI,QAAQ,YAAY;AAAE,aAAK,SAAS,QAAQ;AAAA,MAAG;AACnD,UAAI,QAAQ,eAAe;AAAE,aAAK,QAAQ,KAAK,MAAM;AAAA,MAAG;AAAC,IAC7D;AAAA;AAAA,IAGA,oBAAoB;AAChB,YAAM,SAAsB,KAAK;AACjC,WAAK,MAAM,YAAY,mBAAmB,gCAAgC;AAC1E,WAAK,MAAM,YAAY,kBAAkB,gCAAgC;AACzE,WAAK,QAAQ;AAAA;AAAA,QACT,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,eAAe,QAAQ,eAAe,GAAG,CAAC,GAAG,QAAQ,eAAe,CAAC,KAAK,KAAK,kBAAkB,IAAI,QAAQ,SAAS,CAAC,KAAK,oBAAoB;AAAA;AAAA,QAChL,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,gBAAgB,QAAQ,gBAAgB,GAAG,CAAC,GAAG,QAAQ,gBAAgB,CAAC,KAAK,KAAK,kBAAkB,IAAI,QAAQ,UAAU,CAAC,KAAK,oBAAoB;AAAA,OACxL;AACA,WAAK,SAAS,KAAK,WAAW,KAAK,QAAQ,OAAO,KAAK,QAAQ;AAAA,IACnE;AAAA;AAAA,IAGA,cAAc;AACV,aAAM;AAGN,YAAM,SAAS;AACf,YAAM,SAAS,KAAK;AAGpB,YAAM,UAAU,MAAM;AAClB,cAAM,MAAM,KAAK;AACjB,aAAK,QAAQ;AAAA;AAAA,UACT,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,eAAe,QAAQ,eAAe,GAAG,CAAC,GAAG,QAAQ,eAAe,CAAC,KAAK,KAAK,kBAAkB,IAAI,QAAQ,SAAS,CAAC,KAAK,oBAAoB;AAAA;AAAA,UAChL,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,gBAAgB,QAAQ,gBAAgB,GAAG,CAAC,GAAG,QAAQ,gBAAgB,CAAC,KAAK,KAAK,kBAAkB,IAAI,QAAQ,UAAU,CAAC,KAAK,oBAAoB;AAAA,SACxL;AAGA,YAAI,MAAM,CAAC,KAAK,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,KAAK,MAAM,CAAC,GAAG;AACxD,eAAK,QAAQ,KAAK,MAAM;AAAA,QAC5B;AAAA,MACJ;AAGA,gBAAU,UAAU,MAAM;AACtB,aAAK,MAAM,OAAO,WAAW,MAAM;AAAA,UAC/B,OAAO;AAAA,UACP,gBAAgB;AAAA,UAChB,iBAAiB;AAAA,UACjB,uBAAuB;AAAA,SAC1B;AAGD,aAAK,QAAQ;AACb,aAAK,MAAM,YAAY;AACvB,aAAK,MAAM,iBAAiB;AAC5B,aAAK,UAAU,IAAI,UAAU;AAC7B,aAAK,UAAU,IAAI,WAAW;AAC9B,aAAK,UAAU,IAAI,WAAW;AAG9B,aAAK,MAAM,YAAY,mBAAmB,gCAAgC;AAC1E,aAAK,MAAM,YAAY,kBAAkB,gCAAgC;AAGzE,iBAAQ;AAGR,YAAI,eAAe,CAAC,YAAY;AAC5B,qBAAW,SAAS,SAAS;AACzB,kBAAM,MAAM,OAAO,4BAA4B,CAAC;AAChD,gBAAI,KAAK;AACL,oBAAM,MAAM,KAAK;AACjB,mBAAK,QAAQ;AAAA;AAAA,gBACT,KAAK;AAAA;AAAA,kBAAgD,IAAI,cAAc,KAAK;AAAA,kBAAO;AAAA,iBAAC;AAAA,gBACpF,KAAK;AAAA;AAAA,kBAAgD,IAAI,aAAa,KAAK;AAAA,kBAAQ;AAAA;AAAC,eACxF;AACA,kBAAI,MAAM,CAAC,KAAK,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,KAAK,KAAK,MAAM,CAAC,GAAG;AACxD,qBAAK,QAAQ,KAAK,MAAM;AAAA,cAC5B;AAAA,YACJ;AAAA,UACJ;AAAA,QACJ,CAAC,EAAE,QAAQ,MAAM,EAAE,KAAK,4BAA4B;AAGpD,aAAK,SAAS,KAAK,WAAW,KAAK,QAAQ,OAAO,KAAK,QAAQ;AAAA,MACnE,CAAC;AAAA,IACL;AAAA;AAAA,IAGA,MAAM,kBAAkB,MAAM,OAAoB;AAC9C,gBAAU,KAAK;AACf,YAAM,MAAO,gBAAgB,cAAe,OAAQ,MAAM,uBAAuB,IAAI,EAAE,MAAM,QAAQ,KAAK,KAAK,OAAO,CAAC;AACvH,UAAI,OAAO,SAAS,KAAK,UAAU;AAAE,aAAK,QAAQ;AAAK,aAAK,QAAQ,KAAK;AAAA,MAAG;AAC5E,aAAO;AAAA,IACX;AAAA;AAAA,IAGA,YAAY,aAAoC;AAC5C,YAAM,SAAS,MAAM,MAAM,KAAK,KAAK,MAAM,KAAK;AAChD,UAAI,OAAO,QAAQ,eAAe,KAAK,YAAY,CAAC,cAAc;AAC9D,YAAI,aAAa;AAAE,eAAK,SAAS;AAAA,QAAa;AAC9C,YAAI,KAAK,SAAS,KAAK,MAAM,CAAC,GAAG;AAAE,eAAK,QAAQ,KAAK,MAAM,CAAC;AAAA,QAAG;AAC/D,YAAI,KAAK,UAAU,KAAK,MAAM,CAAC,GAAG;AAAE,eAAK,SAAS,KAAK,MAAM,CAAC;AAAA,QAAG;AACjE,aAAK,MAAM,cAAc,GAAG,KAAK,SAAS,CAAC,MAAM,KAAK,UAAU,CAAC;AAKjE,cAAM,KAAM,KAAK,UAAU,KAAM;AACjC,cAAM,OAAO,YAAY,GAAG,KAAK,aAAa,GAAG,IAAI,IAAI;AACzD,cAAM,QAAQ,KAAK;AAAA,UACf,OAAO,CAAC,UAAU,OAAO,EAAE,EAAE,CAAC,KAAK,OAAO,aAAa,GAAG,IAAI,YAAY,GAAG;AAAA,UAC7E,OAAO,CAAC,SAAS,QAAQ,EAAE,EAAE,CAAC,KAAK,OAAO,YAAY,GAAG,IAAI,aAAa,GAAG;AAAA,SACjF;AAGA,YAAI,MAAK;AACT,YAAI,UAAU,GAAG,GAAG,OAAO,OAAO,OAAO,MAAM;AAAG,cAAM,KAAK,KAAK,OAAO,MAAM,KAAK,OAAO;AAC3F,YAAI,UAAU,KAAK,GAAG,GAAG,IAAI,QAAQ,OAAO,IAAI,SAAS,KAAK;AAC9D,YAAI,SAAQ;AAAA,MAChB;AAAA,IACJ;AAAA;AAAA,IAGA,SAAS,KAAK;AACV,YAAM,QAAQ,OAAO,KAAK;AAAU,WAAK,WAAW;AAAO,aAAO,MAAM,KAAK;AAAA,QAC7E,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,OACb,GAAG,OAAO,OAAO,QAAQ,KAAK,kBAAkB,MAAM,IAAI,MAAK,EAAG,KAAK,GAAG,MAAM,QAAQ,KAAK,KAAK,OAAO,CAAC,CAAC,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AAAA,IAAG;AAAA,IACpJ,QAAQ,aAAoC;AACxC,YAAM,MAAM,KAAK,KAAK,MAAM,KAAK;AACjC,UAAI,OAAO,QAAQ,eAAe,KAAK,YAAY,CAAC,cAAc;AAAE,kBAAU,UAAU,WAAW,KAAK,aAAa,IAAI,CAAC;AAAA,MAAG;AAAA,IACjI;AAAA,GACJ;AACJ,OAAO;AACH,aAAW,MAAM,SAAS;AAAA,IACtB,cAAc;AAAA,IAAE;AAAA,IAChB,YAAY,aAAoC;AAAA,IAAE;AAAA,IAClD,kBAAkB,MAAM,OAAoB;AAAE,aAAO;AAAA,IAAM;AAAA,IAC3D,SAAS,KAAK;AAAE,aAAO,QAAQ,SAAQ;AAAA,IAAG;AAAA,IAC1C,QAAQ,aAAoC;AAAA,IAAE;AAAA,IAC9C,UAAkB;AAAA,IAClB,WAAiC;AAAA,IACjC,SAA+B;AAAA,IAC/B,QAA0B,CAAC,GAAG,CAAC;AAAA,IAC/B,MAAuC;AAAA,IACvC,QAA4B;AAAA,GAChC;AACJ;AAOA,IAAI;AAAE,iBAAe,OAAO,aAAa,UAAU,EAAC,SAAS,UAAS;AAAG,SAAQ,GAAG;AAAC;;ACjNrF,MAAM,QAAQ,OACV,eAAe,OAAO,YAAY,cAAc,SAAS,cAAc,OAAO,IAAI;AAGtF,IAAI,cAAc;AACd,SAAO,YAAY,cAAc,SAAS,cAAc,MAAM,GAAG,cAAc,YAAY,IAAI;AAAM,eAAa,QAAQ,QAAQ;AACtI;AAIO,MAAM,cAAgB,CAAC,MAAkB,KAAa,QAAgB,OAAK;AAAE,OAAK,CAAC,EAAE,KAAK,CAAC,CAAC,IAAK,KAAK,CAAC,KAAK,cAAe,gBAAgB,GAAG,MAAM,SAAU,OAAO,SAAS,WAAY,SAAS,KAAK,MAAM,EAAE,MAAM;AAAK;AAoDlO,MAAM,aACF,OAAO,kBAAkB,eACzB,OAAO,iBAAiB;AAE5B,MAAM,eAAe,CAAC,QAClB,cAAc,eAAe;AAEjC,MAAM,cAAc,CAAC,QACjB,cAAc,eAAe;AAEjC,MAAM,wBAAwB,CAC1B,UACA,OACA,OACA,aAAa,OACZ;AACD,MAAI,CAAC,YAAY,CAAC,OAAO;AAEzB,MAAI,SAAS,MAAM;AACf,QAAI,SAAS,iBAAiB,KAAK,MAAM,IAAI;AAC7C,eAAS,eAAe,KAAK;AAAA,IAC7B;AACA;AAAA,EACJ;AAEA,QAAM,MAAM,SAAS,iBAAiB,KAAK;AAC3C,MAAI,QAAQ,OAAO;AACf,aAAS,YAAY,OAAO,OAAO,UAAU;AAAA,EACjD;AACJ;AAGO,MAAM,wBAAwB,CACjC,SACA,MACA,OACA,aAAa,OACZ;AACD,MAAI,CAAC,WAAW,CAAC,MAAM,OAAO;AAE9B,QAAM,QAAQE,eAAa,IAAI;AAC/B,QAAM,WAAW,QAAQ;AACzB,QAAM,cACD,QAAgB,qBAAsB,QAAgB;AAG3D,MAAI,CAAC,cAAc,CAAC,aAAa;AAC7B,WAAO,yBAAyB,SAAS,MAAM,OAAO,UAAU;AAAA,EACpE;AAGA,MAAI,MAAW,SAAS,KAAK,KAAK,EAAE,aAAa,KAAK,KAAK,YAAY,KAAK,KAAK,OAAO,QAAQ;AAGhG,MAAI,OAAO,MAAM;AACb,gBAAY,SAAS,KAAK;AAE1B,QAAI,UAAU;AACV,4BAAsB,UAAU,OAAO,MAAM,UAAU;AAAA,IAC3D;AACA,WAAO;AAAA,EACX;AAGA,MAAI,aAAa,GAAG,GAAG;AACnB,UAAM,MAAM,YAAY,IAAI,KAAK;AAEjC,QAAI,YAAY,GAAG,KAAK,YAAY,GAAG,GAAG;AACtC,UAAI,IAAI,UAAU,IAAI,SAAS,IAAI,SAAS,IAAI,MAAM;AAClD,eAAO;AAAA,MACX;AAAA,IACJ,WAAW,QAAQ,KAAK;AACpB,aAAO;AAAA,IACX;AACA,gBAAY,IAAI,OAAO,GAAG;AAC1B,WAAO;AAAA,EACX;AAGA,MAAI,OAAO,QAAQ,UAAU;AAMzB,QAAK,KAAa,UAAU,CAAC,MAAM,WAAW,IAAI,GAAG;AACjD,YAAM,SAAwB,IAAY,OAAO,GAAG;AACpD,YAAM,MAAM,YAAY,IAAI,KAAK;AACjC,UAAI,YAAY,GAAG,KAAK,IAAI,UAAU,OAAO,SAAS,IAAI,SAAS,OAAO,MAAM;AAC5E,eAAO;AAAA,MACX;AACA,kBAAY,IAAI,OAAO,MAAM;AAC7B,aAAO;AAAA,IACX,OAAO;AAEH,4BAAsB,UAAU,OAAO,OAAO,GAAG,GAAG,UAAU;AAC9D,aAAO;AAAA,IACX;AAAA,EACJ;AAGA,MAAI,OAAO,QAAQ,YAAY,CAAC,aAAa,GAAG,GAAG;AAC/C,UAAM,WAAW,kBAAkB,GAAG;AACtC,QAAI,OAAO,aAAa,YAAa,KAAa,UAAU,CAAC,MAAM,WAAW,IAAI,GAAG;AACjF,YAAM,SAAwB,IAAY,OAAO,QAAQ;AACzD,YAAM,MAAM,YAAY,IAAI,KAAK;AACjC,UAAI,YAAY,GAAG,KAAK,IAAI,UAAU,OAAO,SAAS,IAAI,SAAS,OAAO,MAAM;AAC5E,eAAO;AAAA,MACX;AACA,kBAAY,IAAI,OAAO,MAAM;AAC7B,aAAO;AAAA,IACX,OAAO;AAEH,4BAAsB,UAAU,OAAO,KAAK,UAAU;AACtD,aAAO;AAAA,IACX;AAAA,EACJ;AAGA,wBAAsB,UAAU,OAAO,OAAO,GAAG,GAAG,UAAU;AAC9D,SAAO;AACX;AAGO,MAAM,2BAA2B,CACpC,SACA,MACA,OACA,aAAa,OACZ;AACD,MAAI,CAAC,WAAW,CAAC,MAAM,OAAO;AAE9B,QAAM,QAAQA,eAAa,IAAI;AAC/B,QAAM,WAAW,QAAQ;AACzB,MAAI,CAAC,UAAU,OAAO;AAGtB,MAAI,MAAY,SAAS,KAAK,KAAK,EAAE,aAAa,KAAK,KAAK,YAAY,KAAK,KAAM,OAAO,QAAQ;AAGlG,MAAI,OAAO,QAAQ,YAAY,CAAC,aAAa,GAAG,GAAG;AAC/C,UAAM,kBAAkB,GAAG,KAAK;AAAA,EACpC;AAGA,MAAI,OAAO,MAAM;AACb,0BAAsB,UAAU,OAAO,MAAM,UAAU;AACvD,WAAO;AAAA,EACX;AAGA,MAAI,aAAa,GAAG,GAAG;AACnB,0BAAsB,UAAU,OAAO,OAAO,GAAG,GAAG,UAAU;AAC9D,WAAO;AAAA,EACX;AAGA,MAAI,OAAO,QAAQ,UAAU;AACzB,0BAAsB,UAAU,OAAO,OAAO,GAAG,GAAG,UAAU;AAC9D,WAAO;AAAA,EACX;AAGA,wBAAsB,UAAU,OAAO,OAAO,GAAG,GAAG,UAAU;AAC9D,SAAO;AACX;AAGA,MAAM,kBAAkB,CAAC,SAA2B,OAAgC;AAChF,MAAI,OAAO,SAAS,QAAQ,YAAY;AAAE,WAAO,SAAS,OAAO,EAAE;AAAA,EAAG;AACtE,SAAO,GAAG,OAAO;AACrB;AAGA,MAAM,iCAAiB,SAA+C;AACtE,MAAM,+BAAe,KAAsC;AAGpD,MAAM,gBAAgB,CAAC,QAAmC;AAC7D,MAAI,CAAC,KAAK,OAAO;AAGjB,MAAI,SAAS,IAAI,GAAa,GAAG;AAAE,WAAO,SAAS,IAAI,GAAa;AAAA,EAAG;AAGvE,MAAI,eAAe,QAAS,eAAuB,MAAM;AACrD,QAAI,WAAW,IAAI,GAAkB,GAAG;AAAE,aAAO,WAAW,IAAI,GAAkB;AAAA,IAAG;AACrF,UAAM,OAAO,IAAI,gBAAgB,GAAkB;AACnD,eAAW,IAAI,KAAoB,IAAI;AACvC,aAAS,IAAI,MAAgB,IAAI;AACjC,WAAO;AAAA,EACX;AAGA,MAAI,IAAI,SAAS,GAAa,KAAK,KAAK,QAAO,EAAG,aAAa,IAAI,GAAG;AAClE,UAAM,WAAW,MAAM,KAAK,UAAU,QAAQ,MAAM,GAAG;AAAA,MACnD,OAAO;AAAA,MACP,MAAM;AAAA,MACN,UAAU;AAAA,KAEb,GAAG,OAAO,OAAO,QAAkB;AAChC,YAAM,OAAO,MAAM,IAAI,MAAK;AAC5B,YAAM,OAAO,IAAI,gBAAgB,IAAI;AACrC,iBAAW,IAAI,MAAqB,IAAI;AACxC,eAAS,IAAI,KAAe,IAAI;AAChC,eAAS,IAAI,MAAgB,IAAI;AACjC,aAAO;AAAA,IACX,CAAC;AAGD,aAAS,IAAI,KAAe,QAA2B;AACvD,WAAO;AAAA,EACX;AAGA,MAAI,OAAO,OAAO,UAAU;AACxB,UAAM,OAAO,IAAI,KAAK,CAAC,GAAG,GAAG,EAAE,MAAM,YAAY;AACjD,UAAM,OAAO,IAAI,gBAAgB,IAAI;AACrC,eAAW,IAAI,MAAqB,IAAI;AAExC,aAAS,IAAI,MAAgB,IAAI;AACjC,WAAO;AAAA,EACX;AAGA,SAAO;AACX;AAGA,MAAM,sCAAsB,KAAsC;AAClE,MAAM,0CAA0B,SAA+C;AACxE,MAAM,gBAAgB,CAAC,QAAsD;AAChF,MAAI,CAAC,KAAK,OAAO;AAGjB,MAAI,gBAAgB,IAAI,GAAa,GAAG;AAAE,WAAO,gBAAgB,IAAI,GAAa,KAAK;AAAA,EAAI;AAG3F,MAAI,eAAe,QAAS,eAAuB,MAAM;AACrD,QAAI,oBAAoB,IAAI,GAAkB,GAAG;AAAE,aAAO,oBAAoB,IAAI,GAAkB,KAAK;AAAA,IAAI;AAG7G,UAAM,WAAY,KAAa,QAAO,EAAG,OAAO,UAAQ;AACpD,0BAAoB,IAAI,KAAoB,IAAI;AAChD,aAAO;AAAA,IACX,CAAC;AACD,wBAAoB,IAAI,KAAoB,QAAQ;AACpD,WAAO;AAAA,EACX;AAGA,MAAI,IAAI,SAAS,GAAa,KAAK,KAAK,QAAO,EAAG,aAAa,IAAI,GAAG;AAClE,UAAM,WAAW,MAAM,KAAK,UAAU,QAAQ,MAAM,GAAG;AAAA,MACnD,OAAO;AAAA,MACP,MAAM;AAAA,MACN,UAAU;AAAA,KAEb,GAAG,OAAO,OAAO,QAAkB;AAChC,YAAM,OAAO,MAAM,IAAI,MAAK;AAC5B,sBAAgB,IAAI,KAAe,IAAI;AACvC,aAAO;AAAA,IACX,CAAC;AACD,oBAAgB,IAAI,KAAe,QAAQ;AAC3C,WAAO;AAAA,EACX;AAGA,MAAI,OAAO,OAAO,UAAU;AACxB,oBAAgB,IAAI,KAAe,GAAG;AACtC,WAAO;AAAA,EACX;AAGA,SAAO;AACX;AAGA,MAAM,yCAAyB,KAA2B;AAC1D,MAAM,+CAA+B,SAAgD;AACrF,MAAM,sCAAsB,KAA+B;AAC3D,MAAM,4CAA4B,SAAoD;AAG/E,MAAM,sBAAsB,CAAC,UAAkB,YAA2B,YAAY,QAAa,SAAS;AAC/G,MAAI,CAAC,UAAU,OAAO;AAEtB,QAAM,OAAO,iBAAiB,aAAa,QAAS,OAAO,cAAc,MAAM,YAAY,EAAE,UAAU,MAAM,IAAI;AACjH,QAAM,eAAe,gBAAgB;AACrC,QAAM,sBAAsB,eAAe,KAAK,qBAAsB,OAAO,YAAY,cAAc,SAAS,qBAAqB;AAErI,MAAI,CAAC,qBAAqB,OAAO;AAEjC,QAAM,cAAc,GAAG,aAAa,EAAE,IAAI,QAAQ;AAClD,MAAI;AAEJ,MAAI,cAAc;AACd,QAAI,YAAY,yBAAyB,IAAI,IAAI;AACjD,QAAI,CAAC,WAAW;AACZ,sCAAgB,KAAI;AACpB,+BAAyB,IAAI,MAAM,SAAS;AAAA,IAChD;AACA,YAAQ,UAAU,IAAI,WAAW;AAEjC,QAAI,CAAC,OAAO;AACR,cAAQ,IAAI,eAAc;AAC1B,gBAAU,IAAI,aAAa,KAAK;AAEhC,UAAI,CAAC,oBAAoB,SAAS,KAAK,GAAG;AACtC,4BAAoB,KAAK,KAAK;AAAA,MAClC;AAAA,IACJ;AAAA,EACJ,OAAO;AACH,YAAQ,mBAAmB,IAAI,WAAW;AAE1C,QAAI,CAAC,OAAO;AACR,cAAQ,IAAI,eAAc;AAC1B,yBAAmB,IAAI,aAAa,KAAK;AAEzC,UAAI,CAAC,oBAAoB,SAAS,KAAK,GAAG;AACtC,4BAAoB,KAAK,KAAK;AAAA,MAClC;AAAA,IACJ;AAAA,EACJ;AAEA,MAAI,WAAW;AACX,QAAI;AAEJ,QAAI,cAAc;AACd,UAAI,iBAAiB,sBAAsB,IAAI,IAAI;AACnD,UAAI,CAAC,gBAAgB;AACjB,6CAAqB,KAAI;AACzB,8BAAsB,IAAI,MAAM,cAAc;AAAA,MAClD;AACA,kBAAY,eAAe,IAAI,SAAS;AAAA,IAC5C,OAAO;AACH,kBAAY,gBAAgB,IAAI,SAAS;AAAA,IAC7C;AAEA,QAAI,CAAC,WAAW;AACZ,YAAMC,SAAQ,MAAM,KAAK,MAAM,YAAY,EAAE;AAC7C,YAAM,aAAaA,OAAM;AAAA,QAAU,CAACC,UAChCA,iBAAgB,qBAAqBA,MAAK,SAAS;AAAA,OACvD;AACA,UAAI,eAAe,IAAI;AACnB,YAAI;AACA,gBAAM,WAAW,UAAU,SAAS,OAAO,MAAM,SAAS,MAAM;AAChE,gBAAM,UAAU,MAAM,SAAS,MAAM,SAAS,SAAS,CAAC;AACxD,cAAI,mBAAmB,mBAAmB;AACtC,wBAAY;AAAA,UAChB;AAAA,QACJ,SAAS,GAAG;AACR,sBAAY;AAAA,QAChB;AAAA,MACJ,OAAO;AACH,oBAAYD,OAAM,UAAU;AAAA,MAChC;AACA,UAAI,WAAW;AACX,YAAI,cAAc;AACd,cAAI,iBAAiB,sBAAsB,IAAI,IAAI;AACnD,cAAI,CAAC,gBAAgB;AACjB,iDAAqB,KAAI;AACzB,kCAAsB,IAAI,MAAM,cAAc;AAAA,UAClD;AACA,yBAAe,IAAI,WAAW,SAAS;AAAA,QAC3C,OAAO;AACH,0BAAgB,IAAI,WAAW,SAAS;AAAA,QAC5C;AAAA,MACJ;AAAA,IACJ;AAEA,QAAI,WAAW;AACX,YAAM,aAAa,MAAM,KAAK,UAAU,YAAY,EAAE;AACtD,UAAI,iBAAiB,WAAW;AAAA,QAAU,CAAC,MACvC,aAAa,gBAAgB,EAAE,cAAc,QAAO,KAAM,UAAU;AAAO,OAC/E;AACA,UAAI,mBAAmB,IAAI;AACvB,YAAI;AACA,2BAAiB,UAAU,WAAW,GAAG,QAAQ,OAAO,UAAU,SAAS,MAAM;AAAA,QACrF,SAAS,GAAG;AACR,iBAAO;AAAA,QACX;AAAA,MACJ;AACA,aAAO,UAAU,SAAS,cAAc;AAAA,IAC5C;AAAA,EACJ;AAEA,QAAM,QAAQ,MAAM,KAAK,MAAM,YAAY,EAAE;AAC7C,MAAI,YAAY,MAAM;AAAA,IAAU,CAACC,UAC7BA,iBAAgB,gBAAgBA,MAAK,cAAc,QAAO,KAAM,UAAU;AAAO,GACrF;AAEA,MAAI,cAAc,IAAI;AAClB,QAAI;AACA,kBAAY,MAAM,WAAW,GAAG,QAAQ,OAAO,MAAM,SAAS,MAAM;AAAA,IACxE,SAAS,GAAG;AACR,aAAO;AAAA,IACX;AAAA,EACJ;AAEA,QAAM,OAAO,MAAM,SAAS,SAAS;AACrC,MAAI,gBAAgB,cAAc;AAC9B,WAAO;AAAA,EACX;AAEA,SAAO;AACX;AAGO,MAAM,mBAAmB,CAAC,SAA8B,MAAe,OAAa,aAAa,OAAO;AAC3G,SAAO,aAAa,sBAAsB,SAAS,MAAM,OAAO,UAAU,IAAI,yBAAyB,SAAS,MAAM,OAAO,UAAU;AAC3I;AAqBO,MAAM,iBAAiB,CAAC,QAA0B,MAAmB,QAAgB,IAAI,cAAqC;AACjI,QAAM,OAAO,cAAc,MAAM;AACjC,QAAM,MAAM,OAAO,UAAU,WAAY,IAAI,SAAS,MAAM,IAAI,SAAS,OAAQ;AAGjF,MAAI,OAAO,CAAC,GAAG,KAAK,CAAC,EAAE,gBAAgB;AACvC,MAAI,QAAQ,OAAO,OAAO,OAAO,UAAU;AAAE,gBAAY,MAAM,KAAK,KAAK;AAAA,EAAG;AAC5E,MAAI,OAAO,CAAC,MAAM,CAAC,IAAI,SAAS,MAAgB,KAAK,cAAc,OAAO,CAAC,aAAa,iBAAiB;AAOzG,SAAO,gBAAgB,MAAM,CAAC,QAAqB;AAC/C,QAAI,OAAO,CAAC,KAAK,KAAK;AAClB,kBAAY,MAAM,KAAK,KAAK;AAC5B,aAAO,CAAC,EAAE,aAAa,UAAU,EAAE;AAAA,IACvC;AAAA,EACJ,CAAC,GAAG,QAAQ,CAAC,UAAe;AAAE,YAAQ,KAAK,+BAA+B,KAAK;AAAA,EAAG,CAAC;AAIvF;AAGO,MAAM,gBAAgB,CAAC,WAAmB;AAC7C,QAAM,QAAQ,OAAO,YAAY,cAAc,SAAS,cAAc,MAAM,IAAI;AAChF,MAAI,aAAa,gBAAgB;AACjC,MAAI,OAAO;AACP,WAAO,OAAO,OAAO,EAAE,KAAK,cAAc,MAAM,YAAY,aAAa,eAAe;AAAG,UAAM,QAAQ,QAAQ;AAAO,mBAAe,QAAQ,CAAC,OAAO,MAAM,CAAC;AAAG,WAAO,YAAY,cAAc,SAAS,KAAK,OAAO,KAAK,IAAI;AAAM,WAAO;AAAA,EACjP;AACA,SAAO;AACX;AAGO,MAAM,kBAAkB,CAAC,QAAgB,cAAmB,OAAO,YAAY,cAAc,UAAU,OAAO,MAAM,QAAgB,OAAO;AAE9I,QAAM,QAAS,aAAa,gBAAgB,MAAM,KAAK;AAAc,MAAI,OAAO,mBAAmB,eAAe,iBAAiB,iBAAiB;AAAE,WAAO,cAAc,MAAM;AAAA,EAAG;AACpL,QAAM,QAAQ,OAAO,YAAY,cAAc,SAAS,cAAc,OAAO,IAAI;AAAM,MAAI,OAAO;AAAE,UAAM,QAAQ,QAAQ;AAAO,mBAAe,QAAQ,CAAC,OAAO,WAAW,GAAG,KAAK;AAAG,WAAO,UAAU,KAAK;AAAG,WAAO;AAAA,EAAO;AAC7N,SAAO;AACX;AAQO,MAAM,eAAe,CAAC,WAAiB;AAE1C,SAAO,cAAc,QAAQ,UAAU;AAC3C;AAGO,MAAM,iCAAiB,KAA2B;AAClD,MAAM,qCAAqB,SAAoC;AAI/D,MAAM,gBAAgB,CAAC,QAA8B,YAA2B,SAAS;AAC5F,MAAI,OAAO,UAAU,YAAY,YAAY,MAAM,MAAM,GAAG;AAAE,WAAO,WAAW,IAAI,MAAM;AAAA,EAAG;AAC7F,OAAK,kBAAkB,QAAS,kBAA0B,SAAS,gBAAgB,MAAM,MAAqB,GAAG;AAAE,WAAO,eAAe,IAAI,MAAqB;AAAA,EAAG;AAGrK,MAAI,CAAC,QAAQ,OAAO;AACpB,QAAM,QAAS,OAAO,UAAU;AAAA;AAAA,IAC5B,WAAW,oBAAoB,QAAQ,CAACC,YAAW,IAAI,eAAgC;AAAA;AAAA;AAAA,IACvF,eAAe,oBAAoB,QAAuB,CAACA,YAAW,IAAI,eAAgC;AAAA;AAI9G,MAAI,OAAO,YAAY,eAAe,SAAS,sBAAsB,CAAC,SAAS,mBAAmB,SAAS,KAAiC,GAAG;AAC/I,aAAS,mBAAmB,KAAK,KAAiC;AAAA,EAClE;AAGA,MAAI,OAAO,UAAU,YAAY,CAAC,IAAI,SAAS,MAAM,GAAG;AACpD,UAAM,eAAe,YAAY,UAAU,SAAS,MAAM,MAAM,OAAO;AACvE,eAAW,IAAI,QAAQ,KAAK;AAE5B,QAAI,aAAa,SAAS,OAAU,OAAQ,MAAc,YAAY,YAAY;AAC9E,MAAC,MAAc,QAAQ,YAAY,EAAE,QAAQ,MAAM;AAAA,MAAC,CAAC;AAAA,IACzD,OAAO;AACP,YAAM,YAAY,YAAY;AAAA,IAC9B;AACA,WAAO;AAAA,EACX,OAAO;AACH,oBAAgB,cAAc,MAAM,GAAG,CAAC,WAAmB;AACvD,iBAAW,IAAI,QAAQ,KAAK;AAC5B,UAAI,QAAQ;AACR,cAAM,eAAe,YAAY,UAAU,SAAS,MAAM,MAAM,OAAO;AACvE,YAAI,aAAa,SAAS,OAAU,OAAQ,MAAc,YAAY,YAAY;AAC9E,UAAC,MAAc,QAAQ,YAAY,EAAE,QAAQ,MAAM;AAAA,UAAC,CAAC;AAAA,QACzD,OAAO;AACP,gBAAM,YAAY,YAAY;AAAA,QAC9B;AACA,eAAO;AAAA,MACX;AAAC,IACL,CAAC;AAAA,EACL;AAGA,SAAO;AACX;AAGO,MAAM,gBAAgB,CAAC,UAA8D;AACxF,MAAI,CAAC,OAAO,OAAO;AACnB,QAAM,SAAS,OAAO,UAAU,WAAW,WAAW,IAAI,KAAK,IAAI;AACnE,MAAI,CAAC,UAAU,OAAO,aAAa,aAAa,OAAO;AACvD,QAAM,SAAS,SAAS;AACxB,QAAM,MAAM,OAAO,QAAQ,MAAM;AACjC,MAAI,QAAQ,IAAI;AACZ,WAAO,OAAO,KAAK,CAAC;AACpB,WAAO;AAAA,EACX;AACA,SAAO;AACX;AA0BO,MAAM,mBAAmB,CAAC,KAAK,SAAO;AACzC,MAAI,sBAAsB,KAAK;AAC3B,UAAM,MAAM,KAAK,oBAAmB,EAAG,IAAI,IAAI;AAC/C,WAAO,eAAe,eAAgB,KAAK,SAAS,IAAK,KAAK,YAAW;AAAA,EAC7E;AAEA,MAAI,eAAe,aAAa;AAAE,UAAM,KAAK,mBAAmB,KAAK,EAAE;AAAG,WAAQ,WAAW,IAAI,mBAAmB,IAAI,GAAG,UAAU,MAAM,EAAE,CAAC,KAAK;AAAA,EAAI;AACvJ,SAAQ,YAAY,KAAK,SAAS,KAAK,mBAAmB,IAAI,GAAG,UAAU,MAAM,EAAE,CAAC,KAAK,KAAM;AACnG;AAsBO,MAAM,aAAa,CAAC,KAAK,SAAO;AACnC,MAAI,QAAQ,UAAU;AAAE,WAAQ,iBAAiB,KAAK,sBAAsB,IAAI,iBAAiB,KAAK,oBAAoB;AAAA,EAAI;AAC9H,SAAQ,iBAAiB,KAAK,qBAAqB,IAAI,iBAAiB,KAAK,mBAAmB;AACpG;;ACjqBO,MAAM,qCAAqB,SAAQ;AAGnC,MAAM,eAAe,CAAC,SAAS,QAAQ,aAAW;AACrD,EAAa,IAAI,QAAQ,OAAO;AAChC,MAAI,CAAC,OAAO,IAAI,QAAQ,GAAG;AAAE,WAAO,IAAI,QAAQ;AAAA,EAAG;AACnD,SAAO;AACX;AAGO,MAAM,mBAAmB,CAAC,SAAS,cAAY;AAClD,MAAI,CAAC,SAAS;AACd,MAAI,WAAW;AAGX,UAAM,SAAS,eAAe,YAAY,yBAAS,IAAI,KAAK;AAC5D,KAAC,GAAI,WAAW,UAAS,IAAK,EAAG,EAAE,IAAI,CAAC,MAAI,aAAa,SAAS,QAAQ,CAAC,CAAC;AAAA,EAChF;AACA,SAAO;AACX;;ACnBO,MAAM,qCAAqB,KAA+B;AAG1D,MAAM,qBAAqB,CAAE,KAAkC,YAAgC;AAClG,QAAM,IAAI,CAAC,GAAG,IAAI,SAAQ,IAAG,EAAE;AAC/B,SAAO,IAAI,IAAe,GAAG,MAAM,CAAC,CAAC,GAAE,CAAC,MAAI,CAAC,GAAE,GAAG,MAAM,OAAO,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,GAAE,CAAC,MAAI,CAAC,CAAC,CAAC,KAAG,EAAU;AAC1G;AAGO,MAAM,YAAY,CAAC,SAAS,MAAM,QAAQ;AAC7C,MAAI,UAAU,eAAe,IAAI,IAAI;AACrC,MAAI,CAAC,SAAS;AACV,kCAAc,SAAQ;AACtB,mBAAe,IAAI,MAAM,OAAO;AAAA,EACpC;AACA,MAAI,CAAC,QAAQ,IAAI,OAAO,GAAG;AACvB,YAAQ,IAAI,SAAS,GAAG;AAAA,EAE5B;AACA,SAAO;AACX;AAGO,MAAM,gBAAgB,CAAC,SAAS,WAAW;AAC9C,MAAI,CAAC,WAAW,CAAC,QAAQ;AACzB,aAAW,CAAC,MAAM,GAAG,KAAK,OAAO,SAAQ,EAAG;AACxC,cAAU,SAAS,MAAM,GAAG;AAAA,EAChC;AACA,SAAO;AACX;;ACxBO,MAAM,gBAAgB,CAAC,SAAS,WAAS;AAC5C,MAAI,CAAC,SAAS;AACd,MAAI,QAAQ;AACR,UAAM,WAAW,eAAe,MAAM,OAAO,yBAAS,SAAQ;AAC9D,QAAI,CAAC,eAAe,MAAM,OAAO,GAAG;AAAE,qBAAe,MAAM,SAAS,QAAQ;AAAA,IAAG;AAC/E,KAAC,GAAI,QAAQ,UAAS,IAAK,EAAG,EAAE,IAAI,CAAC,MAAI,WAAW,SAAS,GAAG,QAAQ,CAAC;AAAA,EAC7E;AACA,SAAO;AACX;AAGO,MAAM,oBAAoB,CAAC,YAAU;AACxC,SAAO;AAAA,IACH,UAAU,mBAAmB,gBAAgB,OAAO;AAAA,IACpD,UAAU,eAAe,MAAM,OAAO;AAAA,IACtC,aAAa,gBAAgB,MAAM,OAAO;AAAA,GAC9C;AACJ;AAGO,MAAM,aAAa,CAAC,SAAS,OAAO,WAAU;AACjD,QAAM,MAAM,IAAI,QAAQ,OAAO;AAAG,aAAW,eAAe,MAAM,OAAO;AACzE,MAAI,CAAC,QAAQ,MAAM,KAAK,GAAG;AAAE,YAAQ,MAAM,KAAK;AAAG,mBAAe,MAAM,KAAK,GAAG,MAAM,OAAO;AACzF,QAAI,MAAM,MAAM;AAAE,eAAS,eAAe,cAAc,CAAC,GAAI,SAAS,eAAe,YAAY,GAAG,QAAQ,GAAG,KAAK,IAAK,MAAM,IAAI,EAAE,OAAO,CAAC,MAAI,CAAC,CAAC,CAAC,EAAE,KAAK,GAAG,CAAC;AAAA,IAAG;AAClK,WAAO,UAAU,KAAK,OAAO,kBAAkB,OAAO,CAAC;AAAA,EAC3D;AACA,SAAO;AACX;AAGO,MAAM,oCAAqB,SAA2B;AACtD,MAAM,oCAAqB,SAAkB;AAG7C,MAAM,oCAAqB,KAAiB;AAC5C,MAAM,iCAAiB,IAAI;AAG3B,MAAM,wBAAwB,CAAC,SAAS,UAAQ;AACnD,MAAI,OAAO,SAAS,UAAU;AAAE,YAAQ,eAAe,MAAM,KAAK;AAAA,EAAG;AACrE,QAAM,wBAAS,IAAI,IAAI,CAAC,GAAI,SAAS,eAAe,YAAY,GAAG,QAAQ,GAAG,KAAK,EAAG,CAAC;AACvF,QAAM,SAAS,IAAI,IAAI,CAAC,GAAG,KAAK,EAAE,IAAI,CAAC,MAAI,eAAe,MAAM,CAAC,CAAC,EAAE,OAAO,CAAC,MAAI,CAAC,CAAC,CAAC,CAAC;AACpF,QAAM,WAAW,eAAe,MAAM,OAAO,yBAAS,SAAQ;AAG9D,MAAI,CAAC,eAAe,MAAM,KAAK,GAAG;AAAE,mBAAe,MAAM,uBAAO,IAAI,SAAS;AAAA,EAAG;AAChF,MAAI,CAAC,eAAe,MAAM,OAAO,GAAG;AAAE,mBAAe,MAAM,SAAS,QAAQ;AAAA,EAAG;AAG/E,QAAM,MAAM,IAAI,QAAQ,OAAO;AAC/B,MAAI,CAAC,UAAU,MAAM,KAAK,GAAG;AACzB,QAAI,CAAC,OAAO,IAAI,KAAK,GAAG;AAAE,aAAO,aAAa,KAAK,OAAO,kBAAkB,OAAO,CAAC;AAAA,IAAG;AACvF,QAAK,OAAO,IAAI,KAAK,KAAK,CAAC,eAAe,MAAM,KAAK,GAAG,MAAM,OAAO,GAAG;AAAE,aAAO,UAAU,KAAK,OAAO,kBAAkB,OAAO,CAAC;AAC7H,YAAM,IAAI,gBAAgB,MAAM,KAAK,CAAC;AAAG,gBAAU,MAAM,KAAK;AAC9D,eAAS,eAAe,cAAc,CAAC,GAAG,KAAK,EAAE,OAAO,CAAC,MAAI,CAAC,CAAC,CAAC,EAAE,KAAK,GAAG,CAAC;AAAA,IAC/E;AACA,mBAAe,MAAM,KAAK,GAAG,MAAM,OAAO;AAAA,EAC9C;AACA,MAAI,UAAU,MAAM,KAAK,GAAG;AACxB,QAAI,CAAC,OAAO,IAAI,KAAK,GAAG;AAAE,gBAAU,SAAS,KAAK;AAAG,aAAO,aAAa,KAAK,OAAO,kBAAkB,OAAO,CAAC;AAAA,IAAG;AAAA,EACtH;AACJ;AAGO,MAAM,4BAAc,KAAS;AAC7B,MAAM,UAAU,CAAC,OAAY,OAAO,YAAY,cAAc,WAAW,SAAS;AACrF,MAAI,CAAC,MAAM;AACX,MAAI,CAAC,OAAO,MAAM,IAAI,GAAG;AACrB,WAAO,MAAM,IAAI;AAGjB,+BAA2B,MAAM,KAAK,cAAc,CAAC,aAAa,gBAAgB,SAAS,MAAM,CAAC;AAGlG,sBAAkB,MAAM,gBAAgB,CAAC,aAAa;AAClD,iBAAW,WAAW,SAAS,YAAY;AACvC,YAAI,mBAAmB,aAAa;AAChC,0BAAgB,OAAO;AAAA,QAC3B;AAAA,MACJ;AAAA,IACJ,CAAC;AAAA,EACL;AACA,SAAO;AACX;AAGO,MAAM,kBAAkB,CAAC,YAAU;AACtC,QAAM,wBAAS,IAAI,IAAI,CAAC,GAAI,SAAS,eAAe,YAAY,GAAG,QAAQ,GAAG,KAAK,EAAG,CAAC;AACvF,QAAM,SAAS,IAAI,IAAI,CAAC,GAAG,KAAK,EAAE,IAAI,CAAC,MAAI,eAAe,MAAM,CAAC,CAAC,EAAE,OAAO,CAAC,MAAI,CAAC,CAAC,CAAC,CAAC;AACpF,GAAC,GAAG,MAAM,GAAG,MAAM,CAAC,MAAI,sBAAsB,SAAS,CAAC,CAAC;AAC7D;AAGO,MAAM,2BAA2B,CAAC,UAAU,UAAQ;AAAE,WAAS,QAAQ,CAAC,MAAK,QAAQ,sBAAsB,GAAG,KAAK,IAAI,gBAAgB,CAAC,CAAE;AAAE;AAC5I,MAAM,kCAAkC,CAAC,UAAU;AACtD,aAAW,QAAQ,OAAO;AAAE,6BAAyB,MAAM,mBAAmB,cAAc,GAAG,KAAK;AAAA,EAAG;AAC3G;AAGO,MAAM,gBAAgB,IAAI,qBAAqB,CAAC,QAAW;AAAE,iBAAe,SAAS,GAAG;AAAG,CAAC;AAC5F,MAAM,gBAAgB,CAAC,MAAM,UAAU;AAC1C,MAAI,CAAC,gBAAgB,MAAM,KAAK,GAAG;AAC/B,UAAM,MAAM,MAAM,QAAO;AACzB,QAAI,KAAK;AACL,sBAAgB,MAAM,OAAO,GAAG;AAChC,qBAAe,MAAM,KAAK,KAAK;AAC/B,qBAAe,WAAW,OAAO,GAAG;AACpC,sCAAgC,KAAK;AAAA,IACzC;AAAA,EACJ;AACJ;AAGA,QAAQ,OAAO,YAAY,cAAc,WAAW,IAAI;AAGjD,MAAM,SAAS;AAAA,EAClB,YAAY,OAAoB,MAAM;AAAE,QAAI,MAAM;AAAE,oBAAc,MAAM,IAAI;AAAA,IAAG;AAAA,EAAE;AAAA;AAAA,EAG1E,QAAQ,UAAU,OAAO,SAAS;AAAE,WAAO;AAAA,EAAM;AAAA,EACjD,WAAW,UAAU,OAAO,SAAS;AAAE,WAAO;AAAA,EAAM;AAAA;AAAA,EAGpD,gBAAgB,SAAS;AAAE,WAAO,eAAe,IAAI,KAAK,QAAQ,EAAE,GAAG,MAAM,OAAO;AAAA,EAAG;AAAA,EACvF,kBAAkB,SAAS;AAAE,WAAO,kBAAkB,OAAO;AAAA,EAAG;AAAA;AAAA,EAGvE,IAAI,WAAW;AAAE,WAAO,eAAe,MAAM,IAAI;AAAA,EAAG;AAAA,EACpD,IAAI,UAAU;AAAE,WAAO,gBAAgB,MAAM,KAAK,QAAQ,EAAE;AAAA,EAAG;AAAA,EAC/D,IAAI,OAAO;AAAE,WAAO,gBAAgB,MAAM,IAAI;AAAA,EAAG;AACrD;;ACpIO,MAAM,eAAe,CAAC,SAAS,GAAG,YAAY;AACjD,QAAM,OAAY;AAClB,MAAI,SAAS,OAAO,GAAG;AAAE,cAAU,QAAQ;AAAA,EAAM;AACjD,QAAM,aAAa,UAAU,mBAAmB,OAAO,MAAM,QAAQ,YAAY;AAGjF,gBAAc,MAAM,MAAI;AACpB,QAAI,mBAAmB,kBAAkB;AAAE,cAAQ,SAAS,CAAC;AAAA,IAAW,OACpE;AAAE,UAAI,WAAW;AAAE,iBAAS,kBAAkB,aAAa;AAAA,MAAG,OAAO;AAAE,iBAAS,eAAe,eAAe,EAAE;AAAA,MAAG;AAAA,IAAE;AAAA,EAC7H,CAAC;AAGD,SAAO;AACX;AAGO,MAAM,iBAAiB,CAAC,IAAuB,MAAoB,QAAY;AAClF,MAAI,EAAE,OAAO,OAAO,QAAQ,WAAW,aAAa,IAAI,IAAI,SAAS,CAAC,MAAM,CAAC,SAAS,WAAW,qBAAqB,YAAY,kBAAkB,EAAE,QAAQ,QAAQ,EAAE,KAAK,IAAI,OAAO;AACxL,QAAM,OAAY;AAGlB,MAAI,SAAS,GAAG,GAAG;AAAE,UAAM,IAAI;AAAA,EAAO;AAGtC,MAAI,KAAK,IAAI,MAAM,KAAK;AAAE,WAAO;AAAA,EAAI;AACrC,MAAI,KAAK,IAAI,MAAM,KAAK;AACpB,kBAAc,MAAM,MAAI;AACpB,UAAI,OAAO,MAAM;AAAE,WAAG,IAAI,IAAI;AAAA,MAAK,OAAO;AAAE,eAAO,GAAG,IAAI;AAAA,MAAG;AAAC;AAAA,IAClE,CAAC;AAAA,EACL;AACA,SAAO;AACX;AAGO,MAAM,gBAAgB,CAAC,IAAuB,MAAe,QAAuB;AACvF,QAAM,aAAa,IAAI;AAAS,MAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,OAAO;AACxE,QAAM,OAAY;AAClB,MAAI,SAAS,GAAG,GAAG,MAAM,KAAK;AAAO,SAAO,aAAa,IAAI;AAC7D,MAAI,aAAa,IAAI,OAAO,MAAM,mBAAmB,GAAG,IAAI,OAAO;AACnE,MAAI,OAAO,QAAQ,QAAQ,OAAO;AAAE,WAAO,WAAW,IAAI;AAAA,EAAG,OAAO;AAChE,kBAAc,MAAM,MAAI;AACpB,UAAI,OAAO,OAAO,YAAY,OAAO,OAAO,YAAY;AACpD,mBAAW,IAAI,IAAI,OAAO,GAAG;AAAA,MACjC,OAAO;AACH,eAAO,WAAW,IAAI;AAAA,MAC1B;AAAA,IACJ,CAAC;AAAA,EACL;AACA,SAAO;AACX;AAGO,MAAM,sBAAsB,CAAC,IAAiB,SAAiB,GAAG,MAAM,eAAeH,cAAA,CAAa,IAAI,CAAC;AAGzG,MAAM,oBAAoB,CAAC,IAAyB,MAAe,QAAc;AACpF,QAAM,WAAW,IAAI;AACrB,MAAI,CAAC,QAAQ,OAAO,QAAQ,YAAY,CAAC,MAAM,CAAC,UAAU,OAAO;AAIjE,QAAM,OAAY;AAClB,gBAAc,MAAM,MAAI;AAEpB,QAAI,MAAM,GAAG,KAAK,SAAS,GAAG,KAAK,YAAY,GAAG,GAC9C;AAAE,uBAAiB,IAAI,MAAM,GAAG;AAAA,IAAG,WAAW,OAAO,MACrD;AAAE,0BAAoB,IAAI,IAAI;AAAA,IAAG;AAAA,EACzC,CAAC;AAGD,SAAO;AACX;AAGO,MAAM,kBAAkB,CAAC,IAAyB,MAAe,QAAc;AAClF,MAAI,CAAC,QAAQ,CAAC,IAAI,OAAO;AAGzB,QAAM,OAAY;AAClB,MAAI,SAAS,GAAG,GAAG,MAAM,IAAI;AAAO,SAAOA,eAAa,IAAI;AAC5D,MAAI,IAAI,eAAe,IAAI,OAAO,MAAM,mBAAmB,GAAG,IAAI;AAC9D,WAAO;AAAA,EACX;AAGA,gBAAc,MAAM,MAAI;AACpB,QAAK,OAAO,OAAO,YAAY,OAAO,OAAO,cAAe,OAAO,SAAS,OAAO,OAAO,YAAY,OAAO,OAAO,OAAO;AACvH,UAAI,eAAe,MAAM,OAAO,GAAG,CAAC;AAAA,IACxC,OAAO;AACH,UAAI,kBAAkB,IAAI;AAAA,IAC9B;AAAA,EACJ,CAAC;AAGD,SAAO;AACX;;;ACnGA;AACA,IAAI,IAAE,EAAC,GAAE,CAAAI,OAAG;AAAC,WAASC,GAAED,IAAEC,IAAEC,IAAE;AAAC,IAAAF,cAAa,WAASA,KAAEG,GAAEH,IAAEE,EAAC,IAAGD,cAAa,WAASA,KAAEE,GAAEF,IAAEC,EAAC;AAAG,QAAIE,KAAEC,GAAEL,IAAEC,IAAEC,EAAC;AAAE,WAAOE,MAAG,EAAC,OAAMA,GAAE,CAAC,GAAE,KAAIA,GAAE,CAAC,GAAE,KAAIF,GAAE,MAAM,GAAEE,GAAE,CAAC,CAAC,GAAE,MAAKF,GAAE,MAAME,GAAE,CAAC,IAAEJ,GAAE,QAAOI,GAAE,CAAC,CAAC,GAAE,MAAKF,GAAE,MAAME,GAAE,CAAC,IAAEH,GAAE,MAAM,GAAC;AAAA,EAAC;AAAC,WAASE,GAAEH,IAAEC,IAAE;AAAC,QAAIE,KAAEF,GAAE,MAAMD,EAAC;AAAE,WAAOG,KAAEA,GAAE,CAAC,IAAE;AAAA,EAAI;AAAC,WAASE,GAAEL,IAAEC,IAAEE,IAAE;AAAC,QAAIE,IAAEH,IAAEE,IAAEE,IAAEC,IAAEC,KAAEL,GAAE,QAAQH,EAAC,GAAES,KAAEN,GAAE,QAAQF,IAAEO,KAAE,CAAC,GAAEE,KAAEF;AAAE,QAAGA,MAAG,KAAGC,KAAE,GAAE;AAAC,WAAIJ,KAAE,EAAC,EAAED,KAAED,GAAE,QAAOO,MAAG,KAAG,CAACH,MAAGG,MAAGF,MAAGH,GAAE,KAAKK,EAAC,GAAEF,KAAEL,GAAE,QAAQH,IAAEU,KAAE,CAAC,KAAG,KAAGL,GAAE,SAAOE,KAAE,CAACF,GAAE,KAAI,EAAEI,EAAC,MAAIP,KAAEG,GAAE,KAAI,IAAGD,OAAIA,KAAEF,IAAEI,KAAEG,KAAGA,KAAEN,GAAE,QAAQF,IAAES,KAAE,CAAC,IAAGA,KAAEF,KAAEC,MAAGD,MAAG,IAAEA,KAAEC;AAAE,MAAAJ,GAAE,WAASE,KAAE,CAACH,IAAEE,EAAC;AAAA,IAAE;AAAC,WAAOC;AAAA,EAAC;AAAC,EAAAP,GAAE,UAAQC,IAAEA,GAAE,QAAMI;AAAC,GAAE,KAAI,SAASL,IAAEC,IAAEE,IAAE;AAAC,MAAIE;AAAE,EAAAL,KAAEG,GAAE,IAAIH,EAAC,IAAE,SAASE,IAAE;AAAC,QAAIE,MAAGJ,MAAGA,GAAE,SAAQ,YAAU,OAAO,UAAQ;AAAQ,IAAAI,GAAE,WAASA,MAAGA,GAAE;AAAO,QAAIE,KAAE,SAASN,IAAE;AAAC,WAAK,UAAQA;AAAA,IAAC;AAAE,KAACM,GAAE,YAAU,IAAI,SAAO,OAAK;AAAwB,QAAIC,KAAE,SAASP,IAAE;AAAC,YAAM,IAAIM,GAAEN,EAAC;AAAA,IAAC,GAAEQ,KAAE,oEAAmEC,KAAE,gBAAeC,KAAE,EAAC,QAAO,SAASV,IAAE;AAAC,MAAAA,KAAE,OAAOA,EAAC,GAAE,aAAa,KAAKA,EAAC,KAAGO,GAAE,2EAA2E;AAAE,eAAQN,IAAEE,IAAEE,IAAEH,IAAEE,KAAEJ,GAAE,SAAO,GAAEM,KAAE,IAAGG,KAAE,IAAGC,KAAEV,GAAE,SAAOI,IAAE,EAAEK,KAAEC,MAAGT,KAAED,GAAE,WAAWS,EAAC,KAAG,IAAGN,KAAEH,GAAE,WAAW,EAAES,EAAC,KAAG,GAAEJ,KAAEL,GAAE,WAAW,EAAES,EAAC,GAAEH,MAAGE,GAAE,QAAQN,KAAED,KAAEE,KAAEE,OAAI,KAAG,EAAE,IAAEG,GAAE,OAAON,MAAG,KAAG,EAAE,IAAEM,GAAE,OAAON,MAAG,IAAE,EAAE,IAAEM,GAAE,OAAO,KAAGN,EAAC;AAAE,aAAO,KAAGE,MAAGH,KAAED,GAAE,WAAWS,EAAC,KAAG,GAAEN,KAAEH,GAAE,WAAW,EAAES,EAAC,GAAEH,MAAGE,GAAE,QAAQN,KAAED,KAAEE,OAAI,EAAE,IAAEK,GAAE,OAAON,MAAG,IAAE,EAAE,IAAEM,GAAE,OAAON,MAAG,IAAE,EAAE,IAAE,OAAK,KAAGE,OAAIF,KAAEF,GAAE,WAAWS,EAAC,GAAEH,MAAGE,GAAE,OAAON,MAAG,CAAC,IAAEM,GAAE,OAAON,MAAG,IAAE,EAAE,IAAE,OAAMI;AAAA,IAAC,GAAE,QAAO,SAASN,IAAE;AAAC,UAAIC,MAAGD,KAAE,OAAOA,EAAC,EAAE,QAAQS,IAAE,EAAE,GAAG;AAAO,MAAAR,KAAE,KAAG,MAAIA,MAAGD,KAAEA,GAAE,QAAQ,QAAO,EAAE,GAAG,UAASC,KAAE,KAAG,KAAG,iBAAiB,KAAKD,EAAC,MAAIO,GAAE,uEAAuE;AAAE,eAAQJ,IAAEE,IAAEH,KAAE,GAAEE,KAAE,IAAGE,KAAE,IAAG,EAAEA,KAAEL,MAAGI,KAAEG,GAAE,QAAQR,GAAE,OAAOM,EAAC,CAAC,GAAEH,KAAED,KAAE,IAAE,KAAGC,KAAEE,KAAEA,IAAEH,OAAI,MAAIE,MAAG,OAAO,aAAa,MAAID,OAAI,KAAGD,KAAE,EAAE;AAAG,aAAOE;AAAA,IAAC,GAAE,SAAQ,SAAO;AAAE,gBAAUC,KAAE,WAAU;AAAC,aAAOK;AAAA,IAAC,EAAE,KAAKT,IAAEE,IAAEF,IAAED,EAAC,OAAKA,GAAE,UAAQK;AAAA,EAAE,IAAE;AAAC,GAAE,KAAI,CAACL,IAAEC,OAAI;AAAC,EAAAA,GAAE,IAAE,SAASD,IAAE;AAAC,QAAG,CAACA,IAAE,OAAO;AAAE,aAAQC,MAAGD,KAAEA,GAAE,YAAY,QAAOG,KAAEH,GAAE,QAAOG,QAAK;AAAC,UAAIE,KAAEL,GAAE,WAAWG,EAAC;AAAE,eAAOE,MAAGA,MAAG,SAAOF,MAAI,MAAIE,MAAGA,MAAG,OAAKJ,OAAI,OAAKI,MAAGA,MAAG,UAAQJ,MAAG;AAAA,IAAE;AAAC,WAAOA;AAAA,EAAC;AAAC,GAAE,KAAI,CAAAD,OAAG;AAAC,MAAIC,KAAE,EAAC,MAAK,EAAC,eAAc,SAASD,IAAE;AAAC,WAAOC,GAAE,IAAI,cAAc,SAAS,mBAAmBD,EAAC,CAAC,CAAC;AAAA,EAAC,GAAE,eAAc,SAASA,IAAE;AAAC,WAAO,mBAAmB,OAAOC,GAAE,IAAI,cAAcD,EAAC,CAAC,CAAC;AAAA,EAAC,GAAC,EAAE,KAAI,EAAC,eAAc,SAASA,IAAE;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAEH,GAAE,QAAOG,MAAIF,GAAE,KAAK,MAAID,GAAE,WAAWG,EAAC,CAAC;AAAE,WAAOF;AAAA,EAAC,GAAE,eAAc,SAASD,IAAE;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAEH,GAAE,QAAOG,MAAIF,GAAE,KAAK,OAAO,aAAaD,GAAEG,EAAC,CAAC,CAAC;AAAE,WAAOF,GAAE,KAAK,EAAE;AAAA,EAAC,GAAC,EAAC;AAAE,EAAAD,GAAE,UAAQC;AAAC,GAAE,KAAI,CAAAD,OAAG;AAAC,MAAIC,IAAEE;AAAE,EAAAF,KAAE,oEAAmEE,KAAE,EAAC,MAAK,SAASH,IAAEC,IAAE;AAAC,WAAOD,MAAGC,KAAED,OAAI,KAAGC;AAAA,EAAC,GAAE,MAAK,SAASD,IAAEC,IAAE;AAAC,WAAOD,MAAG,KAAGC,KAAED,OAAIC;AAAA,EAAC,GAAE,QAAO,SAASD,IAAE;AAAC,QAAGA,GAAE,eAAa,QAAO,OAAO,WAASG,GAAE,KAAKH,IAAE,CAAC,IAAE,aAAWG,GAAE,KAAKH,IAAE,EAAE;AAAE,aAAQC,KAAE,GAAEA,KAAED,GAAE,QAAOC,MAAID,GAAEC,EAAC,IAAEE,GAAE,OAAOH,GAAEC,EAAC,CAAC;AAAE,WAAOD;AAAA,EAAC,GAAE,aAAY,SAASA,IAAE;AAAC,aAAQC,KAAE,EAAC,EAAED,KAAE,GAAEA,MAAIC,GAAE,KAAK,KAAK,MAAM,MAAI,KAAK,QAAQ,CAAC;AAAE,WAAOA;AAAA,EAAC,GAAE,cAAa,SAASD,IAAE;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEE,KAAE,GAAEF,KAAEH,GAAE,QAAOG,MAAIE,MAAG,GAAEJ,GAAEI,OAAI,CAAC,KAAGL,GAAEG,EAAC,KAAG,KAAGE,KAAE;AAAG,WAAOJ;AAAA,EAAC,GAAE,cAAa,SAASD,IAAE;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAE,KAAGH,GAAE,QAAOG,MAAG,GAAEF,GAAE,KAAKD,GAAEG,OAAI,CAAC,MAAI,KAAGA,KAAE,KAAG,GAAG;AAAE,WAAOF;AAAA,EAAC,GAAE,YAAW,SAASD,IAAE;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAEH,GAAE,QAAOG,MAAIF,GAAE,MAAMD,GAAEG,EAAC,MAAI,GAAG,SAAS,EAAE,CAAC,GAAEF,GAAE,MAAM,KAAGD,GAAEG,EAAC,GAAG,SAAS,EAAE,CAAC;AAAE,WAAOF,GAAE,KAAK,EAAE;AAAA,EAAC,GAAE,YAAW,SAASD,IAAE;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAEH,GAAE,QAAOG,MAAG,GAAEF,GAAE,KAAK,SAASD,GAAE,OAAOG,IAAE,CAAC,GAAE,EAAE,CAAC;AAAE,WAAOF;AAAA,EAAC,GAAE,eAAc,SAASD,IAAE;AAAC,aAAQG,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAEL,GAAE,QAAOK,MAAG,GAAE,SAAQH,KAAEF,GAAEK,EAAC,KAAG,KAAGL,GAAEK,KAAE,CAAC,KAAG,IAAEL,GAAEK,KAAE,CAAC,GAAED,KAAE,GAAEA,KAAE,GAAEA,MAAI,IAAEC,KAAE,IAAED,MAAG,IAAEJ,GAAE,SAAOG,GAAE,KAAKF,GAAE,OAAOC,OAAI,KAAG,IAAEE,MAAG,EAAE,CAAC,IAAED,GAAE,KAAK,GAAG;AAAE,WAAOA,GAAE,KAAK,EAAE;AAAA,EAAC,GAAE,eAAc,SAASH,IAAE;AAAC,IAAAA,KAAEA,GAAE,QAAQ,kBAAiB,EAAE;AAAE,aAAQG,KAAE,EAAC,EAAEE,KAAE,GAAEH,KAAE,GAAEG,KAAEL,GAAE,QAAOE,KAAE,EAAEG,KAAE,GAAE,KAAGH,MAAGC,GAAE,MAAMF,GAAE,QAAQD,GAAE,OAAOK,KAAE,CAAC,CAAC,IAAE,KAAK,IAAI,GAAE,KAAGH,KAAE,CAAC,IAAE,MAAI,IAAEA,KAAED,GAAE,QAAQD,GAAE,OAAOK,EAAC,CAAC,MAAI,IAAE,IAAEH,EAAC;AAAE,WAAOC;AAAA,EAAC,GAAC,EAAEH,GAAE,UAAQG;AAAC,GAAE,KAAI,CAACH,IAAEC,IAAEE,OAAI;AAAC,QAAME,KAAEF,GAAE,EAAE,GAAED,KAAEC,GAAE,GAAG,GAAEC,KAAED,GAAE,GAAG;AAAE,EAAAH,GAAE,UAAQ,EAAC,WAAUE,IAAE,cAAaG,IAAE,YAAWD,IAAC;AAAC,GAAE,KAAI,CAAAJ,OAAG;AAAC,EAAAA,GAAE,UAAQ,SAASA,IAAE;AAAC,WAAM,cAAY,OAAOA,KAAEA,KAAE,MAAM,QAAQA,EAAC,IAAE,CAAAC,OAAG;AAAC,iBAAUE,MAAKH,IAAE;AAAC,YAAG,YAAU,OAAOG,MAAGF,OAAIE,IAAE,OAAM;AAAG,YAAGA,cAAa,UAAQA,GAAE,KAAKF,EAAC,GAAE,OAAM;AAAA,MAAE;AAAA,IAAC,IAAE,MAAI;AAAA,EAAE;AAAC,GAAE,KAAI,CAACD,IAAEC,OAAI;AAAC,QAAME,KAAE,iLAAgLE,KAAE,MAAIF,KAAE,OAAKA,KAAE,kDAAiDD,KAAE,IAAI,OAAO,MAAIG,KAAE,GAAG;AAAE,EAAAJ,GAAE,UAAQ,SAASD,IAAE;AAAC,WAAO,WAASA;AAAA,EAAC,GAAEC,GAAE,gBAAc,SAASD,IAAE;AAAC,WAAO,MAAI,OAAO,KAAKA,EAAC,EAAE;AAAA,EAAM,GAAEC,GAAE,QAAM,SAASD,IAAEC,IAAEE,IAAE;AAAC,QAAGF,IAAE;AAAC,YAAMI,KAAE,OAAO,KAAKJ,EAAC,GAAEC,KAAEG,GAAE;AAAO,eAAQD,KAAE,GAAEA,KAAEF,IAAEE,MAAIJ,GAAEK,GAAED,EAAC,CAAC,IAAE,aAAWD,KAAE,CAACF,GAAEI,GAAED,EAAC,CAAC,CAAC,IAAEH,GAAEI,GAAED,EAAC,CAAC;AAAA,IAAC;AAAA,EAAC,GAAEH,GAAE,WAAS,SAASD,IAAE;AAAC,WAAOC,GAAE,QAAQD,EAAC,IAAEA,KAAE;AAAA,EAAE,GAAEC,GAAE,SAAO,SAASD,IAAE;AAAC,WAAM,EAAE,QAAME,GAAE,KAAKF,EAAC;AAAA,EAAE,GAAEC,GAAE,gBAAc,SAASD,IAAEC,IAAE;AAAC,UAAME,KAAE,EAAC;AAAE,QAAIE,KAAEJ,GAAE,KAAKD,EAAC;AAAE,WAAKK,MAAG;AAAC,YAAMH,KAAE,EAAC;AAAE,MAAAA,GAAE,aAAWD,GAAE,YAAUI,GAAE,CAAC,EAAE;AAAO,YAAMD,KAAEC,GAAE;AAAO,eAAQL,KAAE,GAAEA,KAAEI,IAAEJ,MAAIE,GAAE,KAAKG,GAAEL,EAAC,CAAC;AAAE,MAAAG,GAAE,KAAKD,EAAC,GAAEG,KAAEJ,GAAE,KAAKD,EAAC;AAAA,IAAC;AAAC,WAAOG;AAAA,EAAC,GAAEF,GAAE,aAAWI;AAAC,GAAE,IAAG,CAACL,IAAEC,IAAEE,OAAI;AAAC,QAAME,KAAEF,GAAE,GAAG,GAAED,KAAE,EAAC,wBAAuB,OAAG,cAAa,EAAC,EAAC;AAAE,WAASE,GAAEJ,IAAE;AAAC,WAAM,QAAMA,MAAG,QAAOA,MAAG,SAAOA,MAAG,SAAOA;AAAA,EAAC;AAAC,WAASM,GAAEN,IAAEC,IAAE;AAAC,UAAME,KAAEF;AAAE,WAAKA,KAAED,GAAE,QAAOC,MAAI,IAAG,OAAKD,GAAEC,EAAC,KAAG,OAAKD,GAAEC,EAAC,GAAE;AAAA,SAAK;AAAC,YAAMI,KAAEL,GAAE,OAAOG,IAAEF,KAAEE,EAAC;AAAE,UAAGF,KAAE,KAAG,UAAQI,IAAE,OAAOM,GAAE,cAAa,8DAA6DC,GAAEZ,IAAEC,EAAC,CAAC;AAAE,UAAG,OAAKD,GAAEC,EAAC,KAAG,OAAKD,GAAEC,KAAE,CAAC,GAAE;AAAC,QAAAA;AAAI;AAAA,MAAK;AAAA,IAAC;AAAC,WAAOA;AAAA,EAAC;AAAC,WAASM,GAAEP,IAAEC,IAAE;AAAC,QAAGD,GAAE,SAAOC,KAAE,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,GAAE;AAAC,WAAIA,MAAG,GAAEA,KAAED,GAAE,QAAOC,MAAI,IAAG,QAAMD,GAAEC,EAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,GAAE;AAAC,QAAAA,MAAG;AAAE;AAAA,MAAK;AAAA,IAAC,WAASD,GAAE,SAAOC,KAAE,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,GAAE;AAAC,UAAIE,KAAE;AAAE,WAAIF,MAAG,GAAEA,KAAED,GAAE,QAAOC,MAAI,IAAG,QAAMD,GAAEC,EAAC,GAAEE;AAAA,eAAY,QAAMH,GAAEC,EAAC,MAAIE,MAAI,MAAIA,KAAG;AAAA,IAAK,WAASH,GAAE,SAAOC,KAAE,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC;AAAE,WAAIA,MAAG,GAAEA,KAAED,GAAE,QAAOC,MAAI,IAAG,QAAMD,GAAEC,EAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,GAAE;AAAC,QAAAA,MAAG;AAAE;AAAA,MAAK;AAAA;AAAC,WAAOA;AAAA,EAAC;AAAC,EAAAA,GAAE,WAAS,SAASD,IAAEC,IAAE;AAAC,IAAAA,KAAE,OAAO,OAAO,EAAC,EAAEC,IAAED,EAAC;AAAE,UAAME,KAAE,EAAC;AAAE,QAAIK,KAAE,OAAGC,KAAE;AAAG,iBAAWT,GAAE,CAAC,MAAIA,KAAEA,GAAE,OAAO,CAAC;AAAG,aAAQE,KAAE,GAAEA,KAAEF,GAAE,QAAOE,MAAI,IAAG,QAAMF,GAAEE,EAAC,KAAG,QAAMF,GAAEE,KAAE,CAAC,GAAE;AAAC,UAAGA,MAAG,GAAEA,KAAEI,GAAEN,IAAEE,EAAC,GAAEA,GAAE,KAAI,OAAOA;AAAA,IAAC,OAAK;AAAC,UAAG,QAAMF,GAAEE,EAAC,GAAE;AAAC,YAAGE,GAAEJ,GAAEE,EAAC,CAAC,GAAE;AAAS,eAAOS,GAAE,eAAc,WAASX,GAAEE,EAAC,IAAE,sBAAqBU,GAAEZ,IAAEE,EAAC,CAAC;AAAA,MAAC;AAAC;AAAC,YAAIW,KAAEX;AAAE,YAAGA,MAAI,QAAMF,GAAEE,EAAC,GAAE;AAAC,UAAAA,KAAEK,GAAEP,IAAEE,EAAC;AAAE;AAAA,QAAQ;AAAC;AAAC,cAAIY,KAAE;AAAG,kBAAMd,GAAEE,EAAC,MAAIY,KAAE,MAAGZ;AAAK,cAAIa,KAAE;AAAG,iBAAKb,KAAEF,GAAE,UAAQ,QAAMA,GAAEE,EAAC,KAAG,QAAMF,GAAEE,EAAC,KAAG,QAAOF,GAAEE,EAAC,KAAG,SAAOF,GAAEE,EAAC,KAAG,SAAOF,GAAEE,EAAC,GAAEA,MAAIa,MAAGf,GAAEE,EAAC;AAAE,cAAGa,KAAEA,GAAE,MAAK,EAAE,QAAMA,GAAEA,GAAE,SAAO,CAAC,MAAIA,KAAEA,GAAE,UAAU,GAAEA,GAAE,SAAO,CAAC,GAAEb,OAAKc,KAAED,IAAE,CAACV,GAAE,OAAOW,EAAC,GAAE;AAAC,gBAAIf;AAAE,mBAAOA,KAAE,MAAIc,GAAE,MAAK,CAAE,SAAO,6BAA2B,UAAQA,KAAE,yBAAwBJ,GAAE,cAAaV,IAAEW,GAAEZ,IAAEE,EAAC,CAAC;AAAA,UAAC;AAAC,gBAAMe,KAAEP,GAAEV,IAAEE,EAAC;AAAE,cAAG,UAAKe,IAAE,OAAON,GAAE,eAAc,qBAAmBI,KAAE,sBAAqBH,GAAEZ,IAAEE,EAAC,CAAC;AAAE,cAAIgB,KAAED,GAAE;AAAM,cAAGf,KAAEe,GAAE,OAAM,QAAMC,GAAEA,GAAE,SAAO,CAAC,GAAE;AAAC,kBAAMf,KAAED,KAAEgB,GAAE;AAAO,YAAAA,KAAEA,GAAE,UAAU,GAAEA,GAAE,SAAO,CAAC;AAAE,kBAAMb,KAAEc,GAAED,IAAEjB,EAAC;AAAE,gBAAG,SAAKI,IAAE,OAAOM,GAAEN,GAAE,IAAI,MAAKA,GAAE,IAAI,KAAIO,GAAEZ,IAAEG,KAAEE,GAAE,IAAI,IAAI,CAAC;AAAE,YAAAG,KAAE;AAAA,UAAE,WAASM,IAAE;AAAC,gBAAG,CAACG,GAAE,WAAU,OAAON,GAAE,cAAa,kBAAgBI,KAAE,kCAAiCH,GAAEZ,IAAEE,EAAC,CAAC;AAAE,gBAAGgB,GAAE,MAAK,CAAE,SAAO,GAAE,OAAOP,GAAE,cAAa,kBAAgBI,KAAE,gDAA+CH,GAAEZ,IAAEa,EAAC,CAAC;AAAE,gBAAG,MAAIV,GAAE,QAAO,OAAOQ,GAAE,cAAa,kBAAgBI,KAAE,0BAAyBH,GAAEZ,IAAEa,EAAC,CAAC;AAAE;AAAC,oBAAMZ,KAAEE,GAAE,KAAI;AAAE,kBAAGY,OAAId,GAAE,SAAQ;AAAC,oBAAIE,KAAES,GAAEZ,IAAEC,GAAE,WAAW;AAAE,uBAAOU,GAAE,cAAa,2BAAyBV,GAAE,UAAQ,uBAAqBE,GAAE,OAAK,WAASA,GAAE,MAAI,+BAA6BY,KAAE,MAAKH,GAAEZ,IAAEa,EAAC,CAAC;AAAA,cAAC;AAAC,mBAAGV,GAAE,WAASM,KAAE;AAAA,YAAG;AAAA,UAAC,OAAK;AAAC,kBAAMJ,KAAEc,GAAED,IAAEjB,EAAC;AAAE,gBAAG,SAAKI,IAAE,OAAOM,GAAEN,GAAE,IAAI,MAAKA,GAAE,IAAI,KAAIO,GAAEZ,IAAEE,KAAEgB,GAAE,SAAOb,GAAE,IAAI,IAAI,CAAC;AAAE,gBAAG,SAAKI,IAAE,OAAOE,GAAE,cAAa,uCAAsCC,GAAEZ,IAAEE,EAAC,CAAC;AAAE,mBAAKD,GAAE,aAAa,QAAQc,EAAC,KAAGZ,GAAE,KAAK,EAAC,SAAQY,IAAE,aAAYF,IAAE,GAAEL,KAAE;AAAA,UAAE;AAAC,eAAIN,MAAIA,KAAEF,GAAE,QAAOE,MAAI,IAAG,QAAMF,GAAEE,EAAC,GAAE;AAAC,gBAAG,QAAMF,GAAEE,KAAE,CAAC,GAAE;AAAC,cAAAA,MAAIA,KAAEK,GAAEP,IAAEE,EAAC;AAAE;AAAA,YAAQ;AAAC,gBAAG,QAAMF,GAAEE,KAAE,CAAC,GAAE;AAAM,gBAAGA,KAAEI,GAAEN,IAAE,EAAEE,EAAC,GAAEA,GAAE,KAAI,OAAOA;AAAA,UAAC,WAAS,QAAMF,GAAEE,EAAC,GAAE;AAAC,kBAAMD,KAAEmB,GAAEpB,IAAEE,EAAC;AAAE,gBAAG,MAAID,IAAE,OAAOU,GAAE,eAAc,6BAA4BC,GAAEZ,IAAEE,EAAC,CAAC;AAAE,YAAAA,KAAED;AAAA,UAAC,WAAS,SAAKQ,MAAG,CAACL,GAAEJ,GAAEE,EAAC,CAAC,GAAE,OAAOS,GAAE,cAAa,yBAAwBC,GAAEZ,IAAEE,EAAC,CAAC;AAAE,kBAAMF,GAAEE,EAAC,KAAGA;AAAA,QAAG;AAAA,MAAC;AAAA,IAAC;AAAC,QAAIc;AAAE,WAAOR,KAAE,KAAGL,GAAE,SAAOQ,GAAE,cAAa,mBAAiBR,GAAE,CAAC,EAAE,UAAQ,MAAKS,GAAEZ,IAAEG,GAAE,CAAC,EAAE,WAAW,CAAC,IAAE,EAAEA,GAAE,SAAO,MAAIQ,GAAE,cAAa,cAAY,KAAK,UAAUR,GAAE,KAAK,CAAAH,OAAGA,GAAE,SAAQ,EAAE,MAAK,CAAC,EAAE,QAAQ,UAAS,EAAE,IAAE,YAAW,EAAC,MAAK,GAAE,KAAI,GAAE,IAAEW,GAAE,cAAa,uBAAsB,CAAC;AAAA,EAAC;AAAE,QAAMH,KAAE,KAAIC,KAAE;AAAI,WAASC,GAAEV,IAAEC,IAAE;AAAC,QAAIE,KAAE,IAAGE,KAAE,IAAGH,KAAE;AAAG,WAAKD,KAAED,GAAE,QAAOC,MAAI;AAAC,UAAGD,GAAEC,EAAC,MAAIO,MAAGR,GAAEC,EAAC,MAAIQ,IAAE,OAAKJ,KAAEA,KAAEL,GAAEC,EAAC,IAAEI,OAAIL,GAAEC,EAAC,MAAII,KAAE;AAAA,eAAY,QAAML,GAAEC,EAAC,KAAG,OAAKI,IAAE;AAAC,QAAAH,KAAE;AAAG;AAAA,MAAK;AAAC,MAAAC,MAAGH,GAAEC,EAAC;AAAA,IAAC;AAAC,WAAM,OAAKI,MAAG,EAAC,OAAMF,IAAE,OAAMF,IAAE,WAAUC,IAAC;AAAA,EAAC;AAAC,QAAMc,KAAE,IAAI,OAAO,0DAA0D,GAAG;AAAE,WAASG,GAAEnB,IAAEC,IAAE;AAAC,UAAME,KAAEE,GAAE,cAAcL,IAAEgB,EAAC,GAAEd,KAAE,EAAC;AAAE,aAAQF,KAAE,GAAEA,KAAEG,GAAE,QAAOH,MAAI;AAAC,UAAG,MAAIG,GAAEH,EAAC,EAAE,CAAC,EAAE,eAAcW,GAAE,eAAc,gBAAcR,GAAEH,EAAC,EAAE,CAAC,IAAE,+BAA8Bc,GAAEX,GAAEH,EAAC,CAAC,CAAC;AAAE,UAAG,WAASG,GAAEH,EAAC,EAAE,CAAC,KAAG,WAASG,GAAEH,EAAC,EAAE,CAAC,GAAE,OAAOW,GAAE,eAAc,gBAAcR,GAAEH,EAAC,EAAE,CAAC,IAAE,uBAAsBc,GAAEX,GAAEH,EAAC,CAAC,CAAC;AAAE,UAAG,WAASG,GAAEH,EAAC,EAAE,CAAC,KAAG,CAACC,GAAE,wBAAuB,OAAOU,GAAE,eAAc,wBAAsBR,GAAEH,EAAC,EAAE,CAAC,IAAE,qBAAoBc,GAAEX,GAAEH,EAAC,CAAC,CAAC;AAAE,YAAMK,KAAEF,GAAEH,EAAC,EAAE,CAAC;AAAE,UAAG,CAACa,GAAER,EAAC,UAASM,GAAE,eAAc,gBAAcN,KAAE,yBAAwBS,GAAEX,GAAEH,EAAC,CAAC,CAAC;AAAE,UAAGE,GAAE,eAAeG,EAAC,UAASM,GAAE,eAAc,gBAAcN,KAAE,kBAAiBS,GAAEX,GAAEH,EAAC,CAAC,CAAC;AAAE,MAAAE,GAAEG,EAAC,IAAE;AAAA,IAAC;AAAC,WAAM;AAAA,EAAE;AAAC,WAASe,GAAEpB,IAAEC,IAAE;AAAC,QAAG,QAAMD,GAAE,EAAEC,EAAC,GAAE,OAAM;AAAG,QAAG,QAAMD,GAAEC,EAAC,GAAE,QAAO,SAASD,IAAEC,IAAE;AAAC,UAAIE,KAAE;AAAK,WAAI,QAAMH,GAAEC,EAAC,MAAIA,MAAIE,KAAE,eAAcF,KAAED,GAAE,QAAOC,MAAI;AAAC,YAAG,QAAMD,GAAEC,EAAC,GAAE,OAAOA;AAAE,YAAG,CAACD,GAAEC,EAAC,EAAE,MAAME,EAAC,GAAE;AAAA,MAAK;AAAC,aAAM;AAAA,IAAE,GAAEH,IAAE,EAAEC,EAAC;AAAE,QAAIE,KAAE;AAAE,WAAKF,KAAED,GAAE,QAAOC,MAAIE,MAAI,IAAG,EAAEH,GAAEC,EAAC,EAAE,MAAM,IAAI,KAAGE,KAAE,KAAI;AAAC,UAAG,QAAMH,GAAEC,EAAC,GAAE;AAAM,aAAM;AAAA,IAAE;AAAC,WAAOA;AAAA,EAAC;AAAC,WAASU,GAAEX,IAAEC,IAAEE,IAAE;AAAC,WAAM,EAAC,KAAI,EAAC,MAAKH,IAAE,KAAIC,IAAE,MAAKE,GAAE,QAAMA,IAAE,KAAIA,GAAE,KAAG,EAAC;AAAA,EAAC;AAAC,WAASU,GAAEb,IAAE;AAAC,WAAOK,GAAE,OAAOL,EAAC;AAAA,EAAC;AAAC,WAASY,GAAEZ,IAAEC,IAAE;AAAC,UAAME,KAAEH,GAAE,UAAU,GAAEC,EAAC,EAAE,MAAM,OAAO;AAAE,WAAM,EAAC,MAAKE,GAAE,QAAO,KAAIA,GAAEA,GAAE,SAAO,CAAC,EAAE,SAAO,GAAC;AAAA,EAAC;AAAC,WAASW,GAAEd,IAAE;AAAC,WAAOA,GAAE,aAAWA,GAAE,CAAC,EAAE;AAAA,EAAM;AAAC,GAAE,KAAI,CAACA,IAAEC,IAAEE,OAAI;AAAC,QAAME,KAAEF,GAAE,EAAE,GAAED,KAAEC,GAAE,GAAG,GAAEC,KAAE,EAAC,qBAAoB,MAAK,qBAAoB,OAAG,cAAa,SAAQ,kBAAiB,MAAG,eAAc,OAAG,QAAO,OAAG,UAAS,MAAK,mBAAkB,OAAG,sBAAqB,MAAG,2BAA0B,MAAG,mBAAkB,SAASJ,IAAEC,IAAE;AAAC,WAAOA;AAAA,EAAC,GAAE,yBAAwB,SAASD,IAAEC,IAAE;AAAC,WAAOA;AAAA,EAAC,GAAE,eAAc,OAAG,iBAAgB,OAAG,cAAa,EAAC,EAAE,UAAS,CAAC,EAAC,OAAM,IAAI,OAAO,KAAI,GAAG,GAAE,KAAI,SAAO,EAAE,EAAC,OAAM,IAAI,OAAO,KAAI,GAAG,GAAE,KAAI,QAAM,EAAE,EAAC,OAAM,IAAI,OAAO,KAAI,GAAG,GAAE,KAAI,UAAQ,EAAC,OAAM,IAAI,OAAO,KAAI,GAAG,GAAE,KAAI,UAAQ,EAAE,EAAC,OAAM,IAAI,OAAO,KAAI,GAAG,GAAE,KAAI,UAAS,GAAE,iBAAgB,MAAG,WAAU,EAAC,EAAE,cAAa,OAAE;AAAE,WAASK,GAAEN,IAAE;AAAC,SAAK,UAAQ,OAAO,OAAO,EAAC,EAAEI,IAAEJ,EAAC,GAAE,SAAK,KAAK,QAAQ,oBAAkB,KAAK,QAAQ,sBAAoB,KAAK,cAAY,WAAU;AAAC,aAAM;AAAA,IAAE,KAAG,KAAK,qBAAmBE,GAAE,KAAK,QAAQ,gBAAgB,GAAE,KAAK,gBAAc,KAAK,QAAQ,oBAAoB,QAAO,KAAK,cAAYO,KAAG,KAAK,uBAAqBF,IAAE,KAAK,QAAQ,UAAQ,KAAK,YAAUC,IAAE,KAAK,aAAW,OAAM,KAAK,UAAQ,SAAO,KAAK,YAAU,WAAU;AAAC,aAAM;AAAA,IAAE,GAAE,KAAK,aAAW,KAAI,KAAK,UAAQ;AAAA,EAAG;AAAC,WAASD,GAAEP,IAAEC,IAAEE,IAAEE,IAAE;AAAC,UAAMH,KAAE,KAAK,IAAIF,IAAEG,KAAE,GAAEE,GAAE,OAAOJ,EAAC,CAAC;AAAE,WAAO,WAASD,GAAE,KAAK,QAAQ,YAAY,KAAG,MAAI,OAAO,KAAKA,EAAC,EAAE,SAAO,KAAK,iBAAiBA,GAAE,KAAK,QAAQ,YAAY,GAAEC,IAAEC,GAAE,SAAQC,EAAC,IAAE,KAAK,gBAAgBD,GAAE,KAAID,IAAEC,GAAE,SAAQC,EAAC;AAAA,EAAC;AAAC,WAASK,GAAER,IAAE;AAAC,WAAO,KAAK,QAAQ,SAAS,OAAOA,EAAC;AAAA,EAAC;AAAC,WAASS,GAAET,IAAE;AAAC,WAAM,EAAE,CAACA,GAAE,WAAW,KAAK,QAAQ,mBAAmB,KAAGA,OAAI,KAAK,QAAQ,iBAAeA,GAAE,OAAO,KAAK,aAAa;AAAA,EAAC;AAAC,EAAAM,GAAE,UAAU,QAAM,SAASN,IAAE;AAAC,WAAO,KAAK,QAAQ,gBAAcK,GAAEL,IAAE,KAAK,OAAO,KAAG,MAAM,QAAQA,EAAC,KAAG,KAAK,QAAQ,iBAAe,KAAK,QAAQ,cAAc,SAAO,MAAIA,KAAE,EAAC,CAAC,KAAK,QAAQ,aAAa,GAAEA,IAAC,GAAG,KAAK,IAAIA,IAAE,GAAE,EAAE,EAAE;AAAA,EAAI,GAAEM,GAAE,UAAU,MAAI,SAASN,IAAEC,IAAEE,IAAE;AAAC,QAAIE,KAAE,IAAGH,KAAE;AAAG,UAAME,KAAED,GAAE,KAAK,GAAG;AAAE,aAAQG,MAAKN,IAAE,IAAG,OAAO,UAAU,eAAe,KAAKA,IAAEM,EAAC,GAAE,IAAG,WAASN,GAAEM,EAAC,QAAO,YAAYA,EAAC,MAAIJ,MAAG;AAAA,aAAY,SAAOF,GAAEM,EAAC,QAAO,YAAYA,EAAC,IAAEJ,MAAG,KAAG,QAAMI,GAAE,CAAC,IAAEJ,MAAG,KAAK,UAAUD,EAAC,IAAE,MAAIK,KAAE,MAAI,KAAK,aAAWJ,MAAG,KAAK,UAAUD,EAAC,IAAE,MAAIK,KAAE,MAAI,KAAK;AAAA,aAAmBN,GAAEM,EAAC,aAAY,MAAKJ,MAAG,KAAK,iBAAiBF,GAAEM,EAAC,GAAEA,IAAE,IAAGL,EAAC;AAAA,aAAU,YAAU,OAAOD,GAAEM,EAAC,GAAE;AAAC,YAAMH,KAAE,KAAK,YAAYG,EAAC;AAAE,UAAGH,MAAG,CAAC,KAAK,mBAAmBA,IAAEC,EAAC,GAAEC,MAAG,KAAK,iBAAiBF,IAAE,KAAGH,GAAEM,EAAC,CAAC;AAAA,eAAU,CAACH,IAAE,IAAGG,OAAI,KAAK,QAAQ,cAAa;AAAC,YAAIL,KAAE,KAAK,QAAQ,kBAAkBK,IAAE,KAAGN,GAAEM,EAAC,CAAC;AAAE,QAAAJ,MAAG,KAAK,qBAAqBD,EAAC;AAAA,MAAC,OAAMC,MAAG,KAAK,iBAAiBF,GAAEM,EAAC,GAAEA,IAAE,IAAGL,EAAC;AAAA,IAAC,WAAS,MAAM,QAAQD,GAAEM,EAAC,CAAC,GAAE;AAAC,YAAMD,KAAEL,GAAEM,EAAC,EAAE;AAAO,UAAIF,KAAE,IAAGG,KAAE;AAAG,eAAQC,KAAE,GAAEA,KAAEH,IAAEG,MAAI;AAAC,cAAMH,KAAEL,GAAEM,EAAC,EAAEE,EAAC;AAAE,YAAG,WAASH,IAAE;AAAA,iBAAS,SAAOA,IAAE,QAAMC,GAAE,CAAC,IAAEJ,MAAG,KAAK,UAAUD,EAAC,IAAE,MAAIK,KAAE,MAAI,KAAK,aAAWJ,MAAG,KAAK,UAAUD,EAAC,IAAE,MAAIK,KAAE,MAAI,KAAK;AAAA,iBAAmB,YAAU,OAAOD,IAAE,IAAG,KAAK,QAAQ,cAAa;AAAC,gBAAML,KAAE,KAAK,IAAIK,IAAEJ,KAAE,GAAEE,GAAE,OAAOG,EAAC,CAAC;AAAE,UAAAF,MAAGJ,GAAE,KAAI,KAAK,QAAQ,uBAAqBK,GAAE,eAAe,KAAK,QAAQ,mBAAmB,MAAIE,MAAGP,GAAE;AAAA,QAAQ,OAAMI,MAAG,KAAK,qBAAqBC,IAAEC,IAAEL,IAAEE,EAAC;AAAA,iBAAU,KAAK,QAAQ,cAAa;AAAC,cAAIH,KAAE,KAAK,QAAQ,kBAAkBM,IAAED,EAAC;AAAE,UAAAL,KAAE,KAAK,qBAAqBA,EAAC,GAAEI,MAAGJ;AAAA,QAAC,OAAMI,MAAG,KAAK,iBAAiBC,IAAEC,IAAE,IAAGL,EAAC;AAAA,MAAC;AAAC,WAAK,QAAQ,iBAAeG,KAAE,KAAK,gBAAgBA,IAAEE,IAAEC,IAAEN,EAAC,IAAGC,MAAGE;AAAA,IAAC,WAAS,KAAK,QAAQ,uBAAqBE,OAAI,KAAK,QAAQ,qBAAoB;AAAC,YAAML,KAAE,OAAO,KAAKD,GAAEM,EAAC,CAAC,GAAEH,KAAEF,GAAE;AAAO,eAAQC,KAAE,GAAEA,KAAEC,IAAED,MAAIG,MAAG,KAAK,iBAAiBJ,GAAEC,EAAC,GAAE,KAAGF,GAAEM,EAAC,EAAEL,GAAEC,EAAC,CAAC,CAAC;AAAA,IAAC,OAAMA,MAAG,KAAK,qBAAqBF,GAAEM,EAAC,GAAEA,IAAEL,IAAEE,EAAC;AAAE,WAAM,EAAC,SAAQE,IAAE,KAAIH,IAAC;AAAA,EAAC,GAAEI,GAAE,UAAU,mBAAiB,SAASN,IAAEC,IAAE;AAAC,WAAOA,KAAE,KAAK,QAAQ,wBAAwBD,IAAE,KAAGC,EAAC,GAAEA,KAAE,KAAK,qBAAqBA,EAAC,GAAE,KAAK,QAAQ,6BAA2B,WAASA,KAAE,MAAID,KAAE,MAAIA,KAAE,OAAKC,KAAE;AAAA,EAAG,GAAEK,GAAE,UAAU,kBAAgB,SAASN,IAAEC,IAAEE,IAAEE,IAAE;AAAC,QAAG,OAAKL,IAAE,OAAM,QAAMC,GAAE,CAAC,IAAE,KAAK,UAAUI,EAAC,IAAE,MAAIJ,KAAEE,KAAE,MAAI,KAAK,aAAW,KAAK,UAAUE,EAAC,IAAE,MAAIJ,KAAEE,KAAE,KAAK,SAASF,EAAC,IAAE,KAAK;AAAW;AAAC,UAAIC,KAAE,OAAKD,KAAE,KAAK,YAAWG,KAAE;AAAG,aAAM,QAAMH,GAAE,CAAC,MAAIG,KAAE,KAAIF,KAAE,KAAI,CAACC,MAAG,OAAKA,MAAG,OAAKH,GAAE,QAAQ,GAAG,IAAE,UAAK,KAAK,QAAQ,mBAAiBC,OAAI,KAAK,QAAQ,mBAAiB,MAAIG,GAAE,SAAO,KAAK,UAAUC,EAAC,IAAE,OAAUL,EAAC,QAAS,KAAK,UAAQ,KAAK,UAAUK,EAAC,IAAE,MAAIJ,KAAEE,KAAEC,KAAE,KAAK,aAAWJ,KAAE,KAAK,UAAUK,EAAC,IAAEH,KAAE,KAAK,UAAUG,EAAC,IAAE,MAAIJ,KAAEE,KAAEC,KAAE,MAAIJ,KAAEE;AAAA,IAAC;AAAA,EAAC,GAAEI,GAAE,UAAU,WAAS,SAASN,IAAE;AAAC,QAAIC,KAAE;AAAG,WAAM,OAAK,KAAK,QAAQ,aAAa,QAAQD,EAAC,IAAE,KAAK,QAAQ,yBAAuBC,KAAE,OAAKA,KAAE,KAAK,QAAQ,oBAAkB,MAAI,MAAMD,EAAC,IAAGC;AAAA,EAAC,GAAEK,GAAE,UAAU,mBAAiB,SAASN,IAAEC,IAAEE,IAAEE,IAAE;AAAC,QAAG,UAAK,KAAK,QAAQ,iBAAeJ,OAAI,KAAK,QAAQ,eAAc,OAAO,KAAK,UAAUI,EAAC,IAAE,YAAYL,EAAC,QAAM,KAAK;AAAQ,QAAG,UAAK,KAAK,QAAQ,mBAAiBC,OAAI,KAAK,QAAQ,iBAAgB,OAAO,KAAK,UAAUI,EAAC,IAAE,OAAUL,EAAC,QAAS,KAAK;AAAQ,QAAG,QAAMC,GAAE,CAAC,GAAE,OAAO,KAAK,UAAUI,EAAC,IAAE,MAAIJ,KAAEE,KAAE,MAAI,KAAK;AAAW;AAAC,UAAID,KAAE,KAAK,QAAQ,kBAAkBD,IAAED,EAAC;AAAE,aAAOE,KAAE,KAAK,qBAAqBA,EAAC,GAAE,OAAKA,KAAE,KAAK,UAAUG,EAAC,IAAE,MAAIJ,KAAEE,KAAE,KAAK,SAASF,EAAC,IAAE,KAAK,aAAW,KAAK,UAAUI,EAAC,IAAE,MAAIJ,KAAEE,KAAE,MAAID,KAAE,OAAKD,KAAE,KAAK;AAAA,IAAU;AAAA,EAAC,GAAEK,GAAE,UAAU,uBAAqB,SAASN,IAAE;AAAC,QAAGA,MAAGA,GAAE,SAAO,KAAG,KAAK,QAAQ,iBAAgB,SAAQC,KAAE,GAAEA,KAAE,KAAK,QAAQ,SAAS,QAAOA,MAAI;AAAC,YAAME,KAAE,KAAK,QAAQ,SAASF,EAAC;AAAE,MAAAD,KAAEA,GAAE,QAAQG,GAAE,OAAMA,GAAE,GAAG;AAAA,IAAC;AAAC,WAAOH;AAAA,EAAC,GAAEA,GAAE,UAAQM;AAAC,GAAE,IAAG,CAAAN,OAAG;AAAC,WAASC,GAAED,IAAEM,IAAEC,IAAEC,IAAE;AAAC,QAAIC,KAAE,IAAGC,KAAE;AAAG,aAAQM,KAAE,GAAEA,KAAEhB,GAAE,QAAOgB,MAAI;AAAC,YAAMG,KAAEnB,GAAEgB,EAAC,GAAEI,KAAEjB,GAAEgB,EAAC;AAAE,UAAG,WAASC,IAAE;AAAS,UAAIT,KAAE;AAAG,UAAGA,KAAE,MAAIJ,GAAE,SAAOa,KAAE,GAAGb,EAAC,IAAIa,EAAC,IAAGA,OAAId,GAAE,cAAa;AAAC,YAAIN,KAAEmB,GAAEC,EAAC;AAAE,QAAAlB,GAAES,IAAEL,EAAC,MAAIN,KAAEM,GAAE,kBAAkBc,IAAEpB,EAAC,GAAEA,KAAEI,GAAEJ,IAAEM,EAAC,IAAGI,OAAID,MAAGD,KAAGC,MAAGT,IAAEU,KAAE;AAAG;AAAA,MAAQ;AAAC,UAAGU,OAAId,GAAE,eAAc;AAAC,QAAAI,OAAID,MAAGD,KAAGC,MAAG,YAAYU,GAAEC,EAAC,EAAE,CAAC,EAAEd,GAAE,YAAY,CAAC,OAAMI,KAAE;AAAG;AAAA,MAAQ;AAAC,UAAGU,OAAId,GAAE,iBAAgB;AAAC,QAAAG,MAAGD,KAAE,OAAUW,GAAEC,EAAC,EAAE,CAAC,EAAEd,GAAE,YAAY,CAAC,OAASI,KAAE;AAAG;AAAA,MAAQ;AAAC,UAAG,QAAMU,GAAE,CAAC,GAAE;AAAC,cAAMpB,KAAEK,GAAEc,GAAE,IAAI,GAAEb,EAAC,GAAEL,KAAE,WAASmB,KAAE,KAAGZ;AAAE,YAAIL,KAAEgB,GAAEC,EAAC,EAAE,CAAC,EAAEd,GAAE,YAAY;AAAE,QAAAH,KAAE,MAAIA,GAAE,SAAO,MAAIA,KAAE,IAAGM,MAAGR,KAAE,IAAImB,EAAC,GAAGjB,EAAC,GAAGH,EAAC,MAAKU,KAAE;AAAG;AAAA,MAAQ;AAAC,UAAIG,KAAEL;AAAE,aAAKK,OAAIA,MAAGP,GAAE;AAAU,YAAMM,KAAEJ,KAAE,IAAIY,EAAC,GAAGf,GAAEc,GAAE,IAAI,GAAEb,EAAC,CAAC,IAAGQ,KAAEb,GAAEkB,GAAEC,EAAC,GAAEd,IAAEK,IAAEE,EAAC;AAAE,aAAKP,GAAE,aAAa,QAAQc,EAAC,IAAEd,GAAE,uBAAqBG,MAAGG,KAAE,MAAIH,MAAGG,KAAE,OAAKE,MAAG,MAAIA,GAAE,UAAQ,CAACR,GAAE,oBAAkBQ,MAAGA,GAAE,SAAS,GAAG,IAAEL,MAAGG,KAAE,IAAIE,EAAC,GAAGN,EAAC,KAAKY,EAAC,OAAKX,MAAGG,KAAE,KAAIE,MAAG,OAAKN,OAAIM,GAAE,SAAS,IAAI,KAAGA,GAAE,SAAS,IAAI,KAAGL,MAAGD,KAAEF,GAAE,WAASQ,KAAEN,KAAEC,MAAGK,IAAEL,MAAG,KAAKW,EAAC,OAAKX,MAAGG,KAAE,MAAKF,KAAE;AAAA,IAAE;AAAC,WAAOD;AAAA,EAAC;AAAC,WAASN,GAAEH,IAAE;AAAC,UAAMC,KAAE,OAAO,KAAKD,EAAC;AAAE,aAAQG,KAAE,GAAEA,KAAEF,GAAE,QAAOE,MAAI;AAAC,YAAME,KAAEJ,GAAEE,EAAC;AAAE,UAAGH,GAAE,eAAeK,EAAC,KAAG,SAAOA,IAAE,OAAOA;AAAA,IAAC;AAAA,EAAC;AAAC,WAASA,GAAEL,IAAEC,IAAE;AAAC,QAAIE,KAAE;AAAG,QAAGH,MAAG,CAACC,GAAE,kBAAiB,SAAQI,MAAKL,IAAE;AAAC,UAAG,CAACA,GAAE,eAAeK,EAAC,GAAE;AAAS,UAAIH,KAAED,GAAE,wBAAwBI,IAAEL,GAAEK,EAAC,CAAC;AAAE,MAAAH,KAAEE,GAAEF,IAAED,EAAC,GAAE,SAAKC,MAAGD,GAAE,4BAA0BE,MAAG,IAAIE,GAAE,OAAOJ,GAAE,oBAAoB,MAAM,CAAC,KAAGE,MAAG,IAAIE,GAAE,OAAOJ,GAAE,oBAAoB,MAAM,CAAC,KAAKC,EAAC;AAAA,IAAG;AAAC,WAAOC;AAAA,EAAC;AAAC,WAASD,GAAEF,IAAEC,IAAE;AAAC,QAAIE,MAAGH,KAAEA,GAAE,OAAO,GAAEA,GAAE,SAAOC,GAAE,aAAa,SAAO,CAAC,GAAG,OAAOD,GAAE,YAAY,GAAG,IAAE,CAAC;AAAE,aAAQK,MAAKJ,GAAE,WAAU,IAAGA,GAAE,UAAUI,EAAC,MAAIL,MAAGC,GAAE,UAAUI,EAAC,MAAI,OAAKF,IAAE,OAAM;AAAG,WAAM;AAAA,EAAE;AAAC,WAASC,GAAEJ,IAAEC,IAAE;AAAC,QAAGD,MAAGA,GAAE,SAAO,KAAGC,GAAE,iBAAgB,SAAQE,KAAE,GAAEA,KAAEF,GAAE,SAAS,QAAOE,MAAI;AAAC,YAAME,KAAEJ,GAAE,SAASE,EAAC;AAAE,MAAAH,KAAEA,GAAE,QAAQK,GAAE,OAAMA,GAAE,GAAG;AAAA,IAAC;AAAC,WAAOL;AAAA,EAAC;AAAC,EAAAA,GAAE,UAAQ,SAASA,IAAEG,IAAE;AAAC,QAAIE,KAAE;AAAG,WAAOF,GAAE,UAAQA,GAAE,SAAS,SAAO,MAAIE,KAAE,OAAMJ,GAAED,IAAEG,IAAE,IAAGE,EAAC;AAAA,EAAC;AAAC,GAAE,KAAI,CAACL,IAAEC,IAAEE,OAAI;AAAC,QAAME,KAAEF,GAAE,GAAG;AAAE,WAASD,GAAEF,IAAEC,IAAE;AAAC,QAAIE,KAAE;AAAG,WAAKF,KAAED,GAAE,UAAQ,QAAMA,GAAEC,EAAC,KAAG,QAAMD,GAAEC,EAAC,GAAEA,MAAIE,MAAGH,GAAEC,EAAC;AAAE,QAAGE,KAAEA,GAAE,MAAK,EAAE,OAAKA,GAAE,QAAQ,GAAG,GAAE,MAAM,IAAI,MAAM,oCAAoC;AAAE,UAAME,KAAEL,GAAEC,IAAG;AAAE,QAAIC,KAAE;AAAG,WAAKD,KAAED,GAAE,UAAQA,GAAEC,EAAC,MAAII,IAAEJ,MAAIC,MAAGF,GAAEC,EAAC;AAAE,WAAM,CAACE,IAAED,IAAED,EAAC;AAAA,EAAC;AAAC,WAASG,GAAEJ,IAAEC,IAAE;AAAC,WAAM,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC;AAAA,EAAC;AAAC,WAASK,GAAEN,IAAEC,IAAE;AAAC,WAAM,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC;AAAA,EAAC;AAAC,WAASM,GAAEP,IAAEC,IAAE;AAAC,WAAM,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC;AAAA,EAAC;AAAC,WAASO,GAAER,IAAEC,IAAE;AAAC,WAAM,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC;AAAA,EAAC;AAAC,WAASQ,GAAET,IAAEC,IAAE;AAAC,WAAM,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC;AAAA,EAAC;AAAC,WAASS,GAAEV,IAAE;AAAC,QAAGK,GAAE,OAAOL,EAAC,GAAE,OAAOA;AAAE,UAAM,IAAI,MAAM,uBAAuBA,EAAC,EAAE;AAAA,EAAC;AAAC,EAAAA,GAAE,UAAQ,SAASA,IAAEC,IAAE;AAAC,UAAME,KAAE,EAAC;AAAE,QAAG,QAAMH,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,GAAE,MAAM,IAAI,MAAM,gCAAgC;AAAE;AAAC,MAAAA,MAAG;AAAE,UAAII,KAAE,GAAEW,KAAE,OAAGG,KAAE,OAAGC,KAAE;AAAG,aAAKnB,KAAED,GAAE,QAAOC,UAAO,QAAMD,GAAEC,EAAC,KAAGkB,IAAE,IAAG,QAAMnB,GAAEC,EAAC,GAAE;AAAC,YAAGkB,KAAE,QAAMnB,GAAEC,KAAE,CAAC,KAAG,QAAMD,GAAEC,KAAE,CAAC,MAAIkB,KAAE,OAAGd,QAAKA,MAAI,MAAIA,IAAE;AAAA,MAAK,eAAWL,GAAEC,EAAC,IAAEe,KAAE,OAAGI,MAAGpB,GAAEC,EAAC;AAAA,WAAM;AAAC,YAAGe,MAAGV,GAAEN,IAAEC,EAAC,GAAE;AAAC,cAAII,IAAED;AAAE,UAAAH,MAAG,GAAE,CAACI,IAAED,IAAEH,EAAC,IAAEC,GAAEF,IAAEC,KAAE,CAAC,GAAE,OAAKG,GAAE,QAAQ,GAAG,MAAID,GAAEO,GAAEL,EAAC,CAAC,IAAE,EAAC,MAAK,OAAO,IAAIA,EAAC,KAAI,GAAG,GAAE,KAAID,IAAC;AAAA,QAAE,WAASY,MAAGT,GAAEP,IAAEC,EAAC,GAAEA,MAAG;AAAA,iBAAUe,MAAGR,GAAER,IAAEC,EAAC,GAAEA,MAAG;AAAA,iBAAUe,MAAGP,GAAET,IAAEC,EAAC,GAAEA,MAAG;AAAA,aAAM;AAAC,cAAG,CAACG,IAAE,MAAM,IAAI,MAAM,iBAAiB;AAAE,UAAAe,KAAE;AAAA,QAAE;AAAC,QAAAd,MAAIe,KAAE;AAAA,MAAE;AAAC,UAAG,MAAIf,IAAE,MAAM,IAAI,MAAM,kBAAkB;AAAA,IAAC;AAAC,WAAM,EAAC,UAASF,IAAE,GAAEF,IAAC;AAAA,EAAC;AAAC,GAAE,IAAG,CAACD,IAAEC,OAAI;AAAC,QAAME,KAAE,EAAC,eAAc,OAAG,qBAAoB,MAAK,qBAAoB,OAAG,cAAa,SAAQ,kBAAiB,MAAG,gBAAe,OAAG,wBAAuB,OAAG,eAAc,MAAG,qBAAoB,OAAG,YAAW,MAAG,eAAc,OAAG,oBAAmB,EAAC,KAAI,MAAG,cAAa,MAAG,WAAU,MAAE,EAAE,mBAAkB,SAASH,IAAEC,IAAE;AAAC,WAAOA;AAAA,EAAC,GAAE,yBAAwB,SAASD,IAAEC,IAAE;AAAC,WAAOA;AAAA,EAAC,GAAE,WAAU,EAAC,EAAE,sBAAqB,OAAG,SAAQ,MAAI,OAAG,iBAAgB,OAAG,cAAa,EAAC,EAAE,iBAAgB,MAAG,cAAa,OAAG,mBAAkB,OAAG,cAAa,OAAG,kBAAiB,OAAG,wBAAuB,OAAG,WAAU,SAASD,IAAEC,IAAEE,IAAE;AAAC,WAAOH;AAAA,EAAC,GAAC;AAAE,EAAAC,GAAE,eAAa,SAASD,IAAE;AAAC,WAAO,OAAO,OAAO,EAAC,EAAEG,IAAEH,EAAC;AAAA,EAAC,GAAEC,GAAE,iBAAeE;AAAC,GAAE,KAAI,CAACH,IAAEC,IAAEE,OAAI;AAAC,QAAME,KAAEF,GAAE,GAAG,GAAED,KAAEC,GAAE,GAAG,GAAEC,KAAED,GAAE,GAAG,GAAEG,KAAEH,GAAE,GAAG,GAAEI,KAAEJ,GAAE,GAAG;AAAE,WAASK,GAAER,IAAE;AAAC,UAAMC,KAAE,OAAO,KAAKD,EAAC;AAAE,aAAQG,KAAE,GAAEA,KAAEF,GAAE,QAAOE,MAAI;AAAC,YAAME,KAAEJ,GAAEE,EAAC;AAAE,WAAK,aAAaE,EAAC,IAAE,EAAC,OAAM,IAAI,OAAO,MAAIA,KAAE,KAAI,GAAG,GAAE,KAAIL,GAAEK,EAAC,GAAC;AAAA,IAAC;AAAA,EAAC;AAAC,WAASI,GAAET,IAAEC,IAAEE,IAAEE,IAAEH,IAAEE,IAAEE,IAAE;AAAC,QAAG,WAASN,OAAI,KAAK,QAAQ,cAAY,CAACK,OAAIL,KAAEA,GAAE,MAAK,GAAGA,GAAE,SAAO,IAAG;AAAC,MAAAM,OAAIN,KAAE,KAAK,qBAAqBA,EAAC;AAAG,YAAMK,KAAE,KAAK,QAAQ,kBAAkBJ,IAAED,IAAEG,IAAED,IAAEE,EAAC;AAAE,aAAO,QAAMC,KAAEL,KAAE,OAAOK,MAAG,OAAOL,MAAGK,OAAIL,KAAEK,KAAE,KAAK,QAAQ,cAAYL,GAAE,MAAK,KAAIA,KAAEqB,GAAErB,IAAE,KAAK,QAAQ,eAAc,KAAK,QAAQ,kBAAkB,IAAEA;AAAA,IAAC;AAAA,EAAC;AAAC,WAASU,GAAEV,IAAE;AAAC,QAAG,KAAK,QAAQ,gBAAe;AAAC,YAAMC,KAAED,GAAE,MAAM,GAAG,GAAEG,KAAE,QAAMH,GAAE,OAAO,CAAC,IAAE,MAAI;AAAG,UAAG,YAAUC,GAAE,CAAC,GAAE,OAAM;AAAG,YAAIA,GAAE,WAASD,KAAEG,KAAEF,GAAE,CAAC;AAAA,IAAE;AAAC,WAAOD;AAAA,EAAC;AAAC,QAAMgB,KAAE,IAAI,OAAO,+CAA+C,IAAI;AAAE,WAASG,GAAEnB,IAAEC,IAAEE,IAAE;AAAC,QAAG,SAAK,KAAK,QAAQ,oBAAkB,YAAU,OAAOH,IAAE;AAAC,YAAMG,KAAEE,GAAE,cAAcL,IAAEgB,EAAC,GAAEd,KAAEC,GAAE,QAAOC,KAAE,EAAC;AAAE,eAAQJ,KAAE,GAAEA,KAAEE,IAAEF,MAAI;AAAC,cAAMK,KAAE,KAAK,iBAAiBF,GAAEH,EAAC,EAAE,CAAC,CAAC;AAAE,YAAG,KAAK,mBAAmBK,IAAEJ,EAAC,GAAE;AAAS,YAAIC,KAAEC,GAAEH,EAAC,EAAE,CAAC,GAAEM,KAAE,KAAK,QAAQ,sBAAoBD;AAAE,YAAGA,GAAE,QAAO,IAAG,KAAK,QAAQ,2BAAyBC,KAAE,KAAK,QAAQ,uBAAuBA,EAAC,IAAG,gBAAcA,OAAIA,KAAE,eAAc,WAASJ,IAAE;AAAC,eAAK,QAAQ,eAAaA,KAAEA,GAAE,MAAK,GAAGA,KAAE,KAAK,qBAAqBA,EAAC;AAAE,gBAAMF,KAAE,KAAK,QAAQ,wBAAwBK,IAAEH,IAAED,EAAC;AAAE,UAAAG,GAAEE,EAAC,IAAE,QAAMN,KAAEE,KAAE,OAAOF,MAAG,OAAOE,MAAGF,OAAIE,KAAEF,KAAEqB,GAAEnB,IAAE,KAAK,QAAQ,qBAAoB,KAAK,QAAQ,kBAAkB;AAAA,QAAC,OAAM,KAAK,QAAQ,2BAAyBE,GAAEE,EAAC,IAAE;AAAA,MAAG;AAAC,UAAG,CAAC,OAAO,KAAKF,EAAC,EAAE,QAAO;AAAO,UAAG,KAAK,QAAQ,qBAAoB;AAAC,cAAMJ,KAAE,EAAC;AAAE,eAAOA,GAAE,KAAK,QAAQ,mBAAmB,IAAEI,IAAEJ;AAAA,MAAC;AAAC,aAAOI;AAAA,IAAC;AAAA,EAAC;AAAC,QAAMgB,KAAE,SAASpB,IAAE;AAAC,IAAAA,KAAEA,GAAE,QAAQ,UAAS,IAAI;AAAE,UAAMC,KAAE,IAAIC,GAAE,MAAM;AAAE,QAAIC,KAAEF,IAAEI,KAAE,IAAGC,KAAE;AAAG,aAAQC,KAAE,GAAEA,KAAEP,GAAE,QAAOO,MAAI,IAAG,QAAMP,GAAEO,EAAC,GAAE,IAAG,QAAMP,GAAEO,KAAE,CAAC,GAAE;AAAC,YAAMN,KAAEc,GAAEf,IAAE,KAAIO,IAAE,4BAA4B;AAAE,UAAIL,KAAEF,GAAE,UAAUO,KAAE,GAAEN,EAAC,EAAE,MAAK;AAAE,UAAG,KAAK,QAAQ,gBAAe;AAAC,cAAMD,KAAEE,GAAE,QAAQ,GAAG;AAAE,eAAKF,OAAIE,KAAEA,GAAE,OAAOF,KAAE,CAAC;AAAA,MAAE;AAAC,WAAK,QAAQ,qBAAmBE,KAAE,KAAK,QAAQ,iBAAiBA,EAAC,IAAGC,OAAIE,KAAE,KAAK,oBAAoBA,IAAEF,IAAEG,EAAC;AAAG,YAAMF,KAAEE,GAAE,UAAUA,GAAE,YAAY,GAAG,IAAE,CAAC;AAAE,UAAGJ,MAAG,OAAK,KAAK,QAAQ,aAAa,QAAQA,EAAC,GAAE,MAAM,IAAI,MAAM,kDAAkDA,EAAC,GAAG;AAAE,UAAIM,KAAE;AAAE,MAAAJ,MAAG,OAAK,KAAK,QAAQ,aAAa,QAAQA,EAAC,KAAGI,KAAEF,GAAE,YAAY,KAAIA,GAAE,YAAY,GAAG,IAAE,CAAC,GAAE,KAAK,cAAc,KAAI,IAAGE,KAAEF,GAAE,YAAY,GAAG,GAAEA,KAAEA,GAAE,UAAU,GAAEE,EAAC,GAAEL,KAAE,KAAK,cAAc,KAAI,EAAEE,KAAE,IAAGE,KAAEN;AAAA,IAAC,WAAS,QAAMD,GAAEO,KAAE,CAAC,GAAE;AAAC,UAAIN,KAAEgB,GAAEjB,IAAEO,IAAE,OAAG,IAAI;AAAE,UAAG,CAACN,IAAE,MAAM,IAAI,MAAM,uBAAuB;AAAE,UAAGI,KAAE,KAAK,oBAAoBA,IAAEF,IAAEG,EAAC,GAAE,KAAK,QAAQ,qBAAmB,WAASL,GAAE,WAAS,KAAK,QAAQ,cAAa;AAAA,WAAK;AAAC,cAAMD,KAAE,IAAIE,GAAED,GAAE,OAAO;AAAE,QAAAD,GAAE,IAAI,KAAK,QAAQ,cAAa,EAAE,GAAEC,GAAE,YAAUA,GAAE,UAAQA,GAAE,mBAAiBD,GAAE,IAAI,IAAE,KAAK,mBAAmBC,GAAE,QAAOK,IAAEL,GAAE,OAAO,IAAG,KAAK,SAASE,IAAEH,IAAEM,EAAC;AAAA,MAAC;AAAC,MAAAC,KAAEN,GAAE,aAAW;AAAA,IAAC,WAAS,UAAQD,GAAE,OAAOO,KAAE,GAAE,CAAC,GAAE;AAAC,YAAMN,KAAEc,GAAEf,IAAE,OAASO,KAAE,GAAE,wBAAwB;AAAE,UAAG,KAAK,QAAQ,iBAAgB;AAAC,cAAML,KAAEF,GAAE,UAAUO,KAAE,GAAEN,KAAE,CAAC;AAAE,QAAAI,KAAE,KAAK,oBAAoBA,IAAEF,IAAEG,EAAC,GAAEH,GAAE,IAAI,KAAK,QAAQ,iBAAgB,CAAC,EAAC,CAAC,KAAK,QAAQ,YAAY,GAAED,IAAE,CAAC;AAAA,MAAC;AAAC,MAAAK,KAAEN;AAAA,IAAC,WAAS,SAAOD,GAAE,OAAOO,KAAE,GAAE,CAAC,GAAE;AAAC,YAAMN,KAAEG,GAAEJ,IAAEO,EAAC;AAAE,WAAK,kBAAgBN,GAAE,UAASM,KAAEN,GAAE;AAAA,IAAC,WAAS,SAAOD,GAAE,OAAOO,KAAE,GAAE,CAAC,GAAE;AAAC,YAAMN,KAAEc,GAAEf,IAAE,OAAMO,IAAE,sBAAsB,IAAE,GAAEL,KAAEF,GAAE,UAAUO,KAAE,GAAEN,EAAC;AAAE,MAAAI,KAAE,KAAK,oBAAoBA,IAAEF,IAAEG,EAAC;AAAE,UAAIF,KAAE,KAAK,cAAcF,IAAEC,GAAE,SAAQG,IAAE,MAAG,OAAG,MAAG,IAAE;AAAE,cAAMF,OAAIA,KAAE,KAAI,KAAK,QAAQ,gBAAcD,GAAE,IAAI,KAAK,QAAQ,eAAc,CAAC,EAAC,CAAC,KAAK,QAAQ,YAAY,GAAED,IAAE,CAAC,IAAEC,GAAE,IAAI,KAAK,QAAQ,cAAaC,EAAC,GAAEG,KAAEN,KAAE;AAAA,IAAC,OAAK;AAAC,UAAIG,KAAEa,GAAEjB,IAAEO,IAAE,KAAK,QAAQ,cAAc,GAAEC,KAAEJ,GAAE;AAAQ,YAAMK,KAAEL,GAAE;AAAW,UAAIM,KAAEN,GAAE,QAAOY,KAAEZ,GAAE,gBAAee,KAAEf,GAAE;AAAW,WAAK,QAAQ,qBAAmBI,KAAE,KAAK,QAAQ,iBAAiBA,EAAC,IAAGL,MAAGE,MAAG,WAASF,GAAE,YAAUE,KAAE,KAAK,oBAAoBA,IAAEF,IAAEG,IAAE,KAAE;AAAG,YAAMc,KAAEjB;AAAE,UAAGiB,MAAG,OAAK,KAAK,QAAQ,aAAa,QAAQA,GAAE,OAAO,MAAIjB,KAAE,KAAK,cAAc,OAAMG,KAAEA,GAAE,UAAU,GAAEA,GAAE,YAAY,GAAG,CAAC,IAAGE,OAAIP,GAAE,YAAUK,MAAGA,KAAE,MAAIE,KAAEA,KAAG,KAAK,aAAa,KAAK,QAAQ,WAAUF,IAAEE,EAAC,GAAE;AAAC,YAAIP,KAAE;AAAG,YAAGS,GAAE,SAAO,KAAGA,GAAE,YAAY,GAAG,MAAIA,GAAE,SAAO,GAAE,QAAMF,GAAEA,GAAE,SAAO,CAAC,KAAGA,KAAEA,GAAE,OAAO,GAAEA,GAAE,SAAO,CAAC,GAAEF,KAAEA,GAAE,OAAO,GAAEA,GAAE,SAAO,CAAC,GAAEI,KAAEF,MAAGE,KAAEA,GAAE,OAAO,GAAEA,GAAE,SAAO,CAAC,GAAEH,KAAEH,GAAE;AAAA,iBAAmB,OAAK,KAAK,QAAQ,aAAa,QAAQI,EAAC,GAAED,KAAEH,GAAE;AAAA,aAAe;AAAC,gBAAMD,KAAE,KAAK,iBAAiBH,IAAES,IAAEU,KAAE,CAAC;AAAE,cAAG,CAAChB,IAAE,MAAM,IAAI,MAAM,qBAAqBM,EAAC,EAAE;AAAE,UAAAF,KAAEJ,GAAE,GAAEF,KAAEE,GAAE;AAAA,QAAU;AAAC,cAAME,KAAE,IAAIH,GAAEM,EAAC;AAAE,QAAAA,OAAIE,MAAGM,OAAIX,GAAE,IAAI,IAAE,KAAK,mBAAmBK,IAAEJ,IAAEE,EAAC,IAAGP,OAAIA,KAAE,KAAK,cAAcA,IAAEO,IAAEF,IAAE,MAAGU,IAAE,MAAG,IAAE,IAAGV,KAAEA,GAAE,OAAO,GAAEA,GAAE,YAAY,GAAG,CAAC,GAAED,GAAE,IAAI,KAAK,QAAQ,cAAaJ,EAAC,GAAE,KAAK,SAASE,IAAEE,IAAEC,EAAC;AAAA,MAAC,OAAK;AAAC,YAAGI,GAAE,SAAO,KAAGA,GAAE,YAAY,GAAG,MAAIA,GAAE,SAAO,GAAE;AAAC,kBAAMF,GAAEA,GAAE,SAAO,CAAC,KAAGA,KAAEA,GAAE,OAAO,GAAEA,GAAE,SAAO,CAAC,GAAEF,KAAEA,GAAE,OAAO,GAAEA,GAAE,SAAO,CAAC,GAAEI,KAAEF,MAAGE,KAAEA,GAAE,OAAO,GAAEA,GAAE,SAAO,CAAC,GAAE,KAAK,QAAQ,qBAAmBF,KAAE,KAAK,QAAQ,iBAAiBA,EAAC;AAAG,gBAAMR,KAAE,IAAIE,GAAEM,EAAC;AAAE,UAAAA,OAAIE,MAAGM,OAAIhB,GAAE,IAAI,IAAE,KAAK,mBAAmBU,IAAEJ,IAAEE,EAAC,IAAG,KAAK,SAASL,IAAEH,IAAEM,EAAC,GAAEA,KAAEA,GAAE,OAAO,GAAEA,GAAE,YAAY,GAAG,CAAC;AAAA,QAAC,OAAK;AAAC,gBAAMN,KAAE,IAAIE,GAAEM,EAAC;AAAE,eAAK,cAAc,KAAKL,EAAC,GAAEK,OAAIE,MAAGM,OAAIhB,GAAE,IAAI,IAAE,KAAK,mBAAmBU,IAAEJ,IAAEE,EAAC,IAAG,KAAK,SAASL,IAAEH,IAAEM,EAAC,GAAEH,KAAEH;AAAA,QAAC;AAAC,QAAAK,KAAE,IAAGE,KAAEY;AAAA,MAAC;AAAA,IAAC;AAAA,SAAMd,MAAGL,GAAEO,EAAC;AAAE,WAAON,GAAE;AAAA,EAAK;AAAE,WAASU,GAAEX,IAAEC,IAAEE,IAAE;AAAC,UAAME,KAAE,KAAK,QAAQ,UAAUJ,GAAE,SAAQE,IAAEF,GAAE,IAAI,CAAC;AAAE,cAAKI,OAAI,YAAU,OAAOA,MAAGJ,GAAE,UAAQI,IAAEL,GAAE,SAASC,EAAC,KAAGD,GAAE,SAASC,EAAC;AAAA,EAAE;AAAC,QAAMY,KAAE,SAASb,IAAE;AAAC,QAAG,KAAK,QAAQ,iBAAgB;AAAC,eAAQC,MAAK,KAAK,iBAAgB;AAAC,cAAME,KAAE,KAAK,gBAAgBF,EAAC;AAAE,QAAAD,KAAEA,GAAE,QAAQG,GAAE,MAAKA,GAAE,GAAG;AAAA,MAAC;AAAC,eAAQF,MAAK,KAAK,cAAa;AAAC,cAAME,KAAE,KAAK,aAAaF,EAAC;AAAE,QAAAD,KAAEA,GAAE,QAAQG,GAAE,OAAMA,GAAE,GAAG;AAAA,MAAC;AAAC,UAAG,KAAK,QAAQ,cAAa,SAAQF,MAAK,KAAK,cAAa;AAAC,cAAME,KAAE,KAAK,aAAaF,EAAC;AAAE,QAAAD,KAAEA,GAAE,QAAQG,GAAE,OAAMA,GAAE,GAAG;AAAA,MAAC;AAAC,MAAAH,KAAEA,GAAE,QAAQ,KAAK,UAAU,OAAM,KAAK,UAAU,GAAG;AAAA,IAAC;AAAC,WAAOA;AAAA,EAAC;AAAE,WAASY,GAAEZ,IAAEC,IAAEE,IAAEE,IAAE;AAAC,WAAOL,OAAI,WAASK,OAAIA,KAAE,MAAI,OAAO,KAAKJ,GAAE,KAAK,EAAE,SAAQ,YAAUD,KAAE,KAAK,cAAcA,IAAEC,GAAE,SAAQE,IAAE,OAAG,CAAC,CAACF,GAAE,IAAI,KAAG,MAAI,OAAO,KAAKA,GAAE,IAAI,CAAC,EAAE,QAAOI,EAAC,MAAI,OAAKL,MAAGC,GAAE,IAAI,KAAK,QAAQ,cAAaD,EAAC,GAAEA,KAAE,KAAIA;AAAA,EAAC;AAAC,WAASc,GAAEd,IAAEC,IAAEE,IAAE;AAAC,UAAME,KAAE,OAAKF;AAAE,eAAUA,MAAKH,IAAE;AAAC,YAAME,KAAEF,GAAEG,EAAC;AAAE,UAAGE,OAAIH,MAAGD,OAAIC,IAAE,OAAM;AAAA,IAAE;AAAC,WAAM;AAAA,EAAE;AAAC,WAASa,GAAEf,IAAEC,IAAEE,IAAEE,IAAE;AAAC,UAAMH,KAAEF,GAAE,QAAQC,IAAEE,EAAC;AAAE,QAAG,OAAKD,IAAE,MAAM,IAAI,MAAMG,EAAC;AAAE,WAAOH,KAAED,GAAE,SAAO;AAAA,EAAC;AAAC,WAASgB,GAAEjB,IAAEC,IAAEE,IAAE;AAAC,UAAME,MAAE,SAASL,IAAEC,IAAE;AAAC,UAAIE,IAAEE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,KAAIH,KAAE;AAAG,eAAQE,KAAEH,IAAEG,KAAEJ,GAAE,QAAOI,MAAI;AAAC,YAAIH,KAAED,GAAEI,EAAC;AAAE,YAAGD,IAAEF,OAAIE,OAAIA,KAAE;AAAA,iBAAY,QAAMF,MAAG,QAAMA,IAAEE,KAAEF;AAAA,iBAAUA,OAAII,GAAE,CAAC,GAAE;AAAC,cAAG,CAACA,GAAE,CAAC,UAAQ,EAAC,MAAKH,IAAE,OAAME,IAAC;AAAE,cAAGJ,GAAEI,KAAE,CAAC,MAAIC,GAAE,CAAC,GAAE,OAAM,EAAC,MAAKH,IAAE,OAAME,IAAC;AAAA,QAAC,OAAK,QAAOH,OAAIA,KAAE;AAAK,QAAAC,MAAGD;AAAA,MAAC;AAAA,IAAC,GAAED,IAAEC,KAAE,GAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,GAAG;AAAE,QAAG,CAACI,IAAE;AAAO,QAAIH,KAAEG,GAAE;AAAK,UAAMD,KAAEC,GAAE,OAAMC,KAAEJ,GAAE,OAAO,IAAI;AAAE,QAAIK,KAAEL,IAAEM,KAAE;AAAG,WAAKF,OAAIC,KAAEL,GAAE,UAAU,GAAEI,EAAC,GAAEJ,KAAEA,GAAE,UAAUI,KAAE,CAAC,EAAE,WAAU;AAAG,UAAMG,KAAEF;AAAE,QAAGJ,IAAE;AAAC,YAAMH,KAAEO,GAAE,QAAQ,GAAG;AAAE,aAAKP,OAAIO,KAAEA,GAAE,OAAOP,KAAE,CAAC,GAAEQ,KAAED,OAAIF,GAAE,KAAK,OAAOL,KAAE,CAAC;AAAA,IAAE;AAAC,WAAM,EAAC,SAAQO,IAAE,QAAOL,IAAE,YAAWE,IAAE,gBAAeI,IAAE,YAAWC,IAAC;AAAA,EAAC;AAAC,WAASS,GAAElB,IAAEC,IAAEE,IAAE;AAAC,UAAME,KAAEF;AAAE,QAAID,KAAE;AAAE,WAAKC,KAAEH,GAAE,QAAOG,UAAO,QAAMH,GAAEG,EAAC,GAAE,IAAG,QAAMH,GAAEG,KAAE,CAAC,GAAE;AAAC,YAAMC,KAAEW,GAAEf,IAAE,KAAIG,IAAE,GAAGF,EAAC,gBAAgB;AAAE,UAAGD,GAAE,UAAUG,KAAE,GAAEC,EAAC,EAAE,WAASH,OAAIC,MAAI,MAAIA,KAAG,OAAM,EAAC,YAAWF,GAAE,UAAUK,IAAEF,EAAC,GAAE,GAAAC,IAAC;AAAE,MAAAD,KAAEC;AAAA,IAAC,WAAS,QAAMJ,GAAEG,KAAE,CAAC,GAAEA,KAAEY,GAAEf,IAAE,MAAKG,KAAE,GAAE,yBAAyB;AAAA,aAAU,UAAQH,GAAE,OAAOG,KAAE,GAAE,CAAC,GAAEA,KAAEY,GAAEf,IAAE,OAASG,KAAE,GAAE,yBAAyB;AAAA,aAAU,SAAOH,GAAE,OAAOG,KAAE,GAAE,CAAC,GAAEA,KAAEY,GAAEf,IAAE,OAAMG,IAAE,yBAAyB,IAAE;AAAA,SAAM;AAAC,YAAME,KAAEY,GAAEjB,IAAEG,IAAE,GAAG;AAAE,MAAAE,QAAKA,MAAGA,GAAE,aAAWJ,MAAG,QAAMI,GAAE,OAAOA,GAAE,OAAO,SAAO,CAAC,KAAGH,MAAIC,KAAEE,GAAE;AAAA,IAAW;AAAA,EAAC;AAAC,WAASgB,GAAErB,IAAEC,IAAEE,IAAE;AAAC,QAAGF,MAAG,YAAU,OAAOD,IAAE;AAAC,YAAMC,KAAED,GAAE,MAAK;AAAE,aAAM,WAASC,MAAG,YAAUA,MAAGK,GAAEN,IAAEG,EAAC;AAAA,IAAC;AAAC,WAAOE,GAAE,QAAQL,EAAC,IAAEA,KAAE;AAAA,EAAE;AAAC,EAAAA,GAAE,UAAQ,MAAK;AAAA,IAAC,YAAYA,IAAE;AAAC,WAAK,UAAQA,IAAE,KAAK,cAAY,MAAK,KAAK,gBAAc,EAAC,EAAE,KAAK,kBAAgB,IAAG,KAAK,eAAa,EAAC,MAAK,EAAC,OAAM,sBAAqB,KAAI,KAAG,EAAE,IAAG,EAAC,OAAM,oBAAmB,KAAI,OAAK,IAAG,EAAC,OAAM,oBAAmB,KAAI,KAAG,EAAE,MAAK,EAAC,OAAM,sBAAqB,KAAI,KAAG,EAAC,EAAE,KAAK,YAAU,EAAC,OAAM,qBAAoB,KAAI,OAAK,KAAK,eAAa,EAAC,OAAM,EAAC,OAAM,kBAAiB,KAAI,KAAG,EAAE,MAAK,EAAC,OAAM,kBAAiB,KAAI,KAAG,EAAE,OAAM,EAAC,OAAM,mBAAkB,KAAI,OAAK,KAAI,EAAC,OAAM,iBAAgB,KAAI,KAAG,EAAE,MAAK,EAAC,OAAM,mBAAkB,KAAI,KAAG,EAAE,WAAU,EAAC,OAAM,kBAAiB,KAAI,KAAG,EAAE,KAAI,EAAC,OAAM,iBAAgB,KAAI,KAAG,EAAE,KAAI,EAAC,OAAM,kBAAiB,KAAI,OAAK,SAAQ,EAAC,OAAM,oBAAmB,KAAI,CAACA,IAAEC,OAAI,OAAO,aAAa,OAAO,SAASA,IAAE,EAAE,CAAC,KAAG,SAAQ,EAAC,OAAM,2BAA0B,KAAI,CAACD,IAAEC,OAAI,OAAO,aAAa,OAAO,SAASA,IAAE,EAAE,CAAC,KAAE,EAAE,KAAK,sBAAoBO,IAAE,KAAK,WAASY,IAAE,KAAK,gBAAcX,IAAE,KAAK,mBAAiBC,IAAE,KAAK,qBAAmBS,IAAE,KAAK,eAAaL,IAAE,KAAK,uBAAqBD,IAAE,KAAK,mBAAiBK,IAAE,KAAK,sBAAoBN,IAAE,KAAK,WAASD,IAAE,KAAK,qBAAmBJ,GAAE,KAAK,QAAQ,gBAAgB;AAAA,IAAC;AAAA,GAAC;AAAC,GAAE,KAAI,CAACP,IAAEC,IAAEE,OAAI;AAAC,QAAK,EAAC,cAAaE,IAAC,GAAEF,GAAE,EAAE,GAAED,KAAEC,GAAE,GAAG,GAAE,EAAC,UAASC,IAAC,GAAED,GAAE,GAAG,GAAEG,KAAEH,GAAE,EAAE;AAAE,EAAAH,GAAE,UAAQ,MAAK;AAAA,IAAC,YAAYA,IAAE;AAAC,WAAK,mBAAiB,EAAC,EAAE,KAAK,UAAQK,GAAEL,EAAC;AAAA,IAAC;AAAA,IAAC,MAAMA,IAAEC,IAAE;AAAC,UAAG,YAAU,OAAOD,IAAE;AAAA,WAAK;AAAC,YAAG,CAACA,GAAE,UAAS,MAAM,IAAI,MAAM,iDAAiD;AAAE,QAAAA,KAAEA,GAAE,UAAS;AAAA,MAAC;AAAC,UAAGC,IAAE;AAAC,iBAAKA,OAAIA,KAAE,EAAC;AAAG,cAAME,KAAEG,GAAE,SAASN,IAAEC,EAAC;AAAE,YAAG,SAAKE,IAAE,MAAM,MAAM,GAAGA,GAAE,IAAI,GAAG,IAAIA,GAAE,IAAI,IAAI,IAAIA,GAAE,IAAI,GAAG,EAAE;AAAA,MAAC;AAAC,YAAMA,KAAE,IAAID,GAAE,KAAK,OAAO;AAAE,MAAAC,GAAE,oBAAoB,KAAK,gBAAgB;AAAE,YAAME,KAAEF,GAAE,SAASH,EAAC;AAAE,aAAO,KAAK,QAAQ,iBAAe,WAASK,KAAEA,KAAED,GAAEC,IAAE,KAAK,OAAO;AAAA,IAAC;AAAA,IAAC,UAAUL,IAAEC,IAAE;AAAC,UAAG,OAAKA,GAAE,QAAQ,GAAG,GAAE,MAAM,IAAI,MAAM,6BAA6B;AAAE,UAAG,OAAKD,GAAE,QAAQ,GAAG,KAAG,OAAKA,GAAE,QAAQ,GAAG,GAAE,MAAM,IAAI,MAAM,sEAAsE;AAAE,UAAG,QAAMC,IAAE,MAAM,IAAI,MAAM,2CAA2C;AAAE,WAAK,iBAAiBD,EAAC,IAAEC;AAAA,IAAC;AAAA,GAAC;AAAC,GAAE,KAAI,CAACD,IAAEC,OAAI;AAAC,WAASE,GAAEH,IAAEC,IAAEK,IAAE;AAAC,QAAIC;AAAE,UAAMC,KAAE,EAAC;AAAE,aAAQC,KAAE,GAAEA,KAAET,GAAE,QAAOS,MAAI;AAAC,YAAMC,KAAEV,GAAES,EAAC,GAAEO,KAAEX,GAAEK,EAAC;AAAE,UAAIS,KAAE;AAAG,UAAGA,KAAE,WAASb,KAAEU,KAAEV,KAAE,MAAIU,IAAEA,OAAIf,GAAE,cAAa,WAASM,KAAEA,KAAEG,GAAEM,EAAC,IAAET,MAAG,KAAGG,GAAEM,EAAC;AAAA,WAAM;AAAC,YAAG,WAASA,IAAE;AAAS,YAAGN,GAAEM,EAAC,GAAE;AAAC,cAAIhB,KAAEG,GAAEO,GAAEM,EAAC,GAAEf,IAAEkB,EAAC;AAAE,gBAAMd,KAAED,GAAEJ,IAAEC,EAAC;AAAE,UAAAS,GAAE,IAAI,IAAER,GAAEF,IAAEU,GAAE,IAAI,GAAES,IAAElB,EAAC,IAAE,MAAI,OAAO,KAAKD,EAAC,EAAE,UAAQ,WAASA,GAAEC,GAAE,YAAY,KAAGA,GAAE,uBAAqB,MAAI,OAAO,KAAKD,EAAC,EAAE,WAASC,GAAE,uBAAqBD,GAAEC,GAAE,YAAY,IAAE,KAAGD,KAAE,MAAIA,KAAEA,GAAEC,GAAE,YAAY,GAAE,WAASO,GAAEQ,EAAC,KAAGR,GAAE,eAAeQ,EAAC,KAAG,MAAM,QAAQR,GAAEQ,EAAC,CAAC,MAAIR,GAAEQ,EAAC,IAAE,CAACR,GAAEQ,EAAC,CAAC,IAAGR,GAAEQ,EAAC,EAAE,KAAKhB,EAAC,KAAGC,GAAE,QAAQe,IAAEG,IAAEd,EAAC,IAAEG,GAAEQ,EAAC,IAAE,CAAChB,EAAC,IAAEQ,GAAEQ,EAAC,IAAEhB;AAAA,QAAC;AAAA,MAAC;AAAA,IAAC;AAAC,WAAM,YAAU,OAAOO,KAAEA,GAAE,SAAO,MAAIC,GAAEP,GAAE,YAAY,IAAEM,MAAG,WAASA,OAAIC,GAAEP,GAAE,YAAY,IAAEM,KAAGC;AAAA,EAAC;AAAC,WAASH,GAAEL,IAAE;AAAC,UAAMC,KAAE,OAAO,KAAKD,EAAC;AAAE,aAAQA,KAAE,GAAEA,KAAEC,GAAE,QAAOD,MAAI;AAAC,YAAMG,KAAEF,GAAED,EAAC;AAAE,UAAG,SAAOG,IAAE,OAAOA;AAAA,IAAC;AAAA,EAAC;AAAC,WAASD,GAAEF,IAAEC,IAAEE,IAAEE,IAAE;AAAC,QAAGJ,IAAE;AAAC,YAAMC,KAAE,OAAO,KAAKD,EAAC,GAAEG,KAAEF,GAAE;AAAO,eAAQI,KAAE,GAAEA,KAAEF,IAAEE,MAAI;AAAC,cAAMF,KAAEF,GAAEI,EAAC;AAAE,QAAAD,GAAE,QAAQD,IAAED,KAAE,MAAIC,IAAE,MAAG,IAAE,IAAEJ,GAAEI,EAAC,IAAE,CAACH,GAAEG,EAAC,CAAC,IAAEJ,GAAEI,EAAC,IAAEH,GAAEG,EAAC;AAAA,MAAC;AAAA,IAAC;AAAA,EAAC;AAAC,WAASA,GAAEJ,IAAEC,IAAE;AAAC,UAAK,EAAC,cAAaE,IAAC,GAAEF,IAAEI,KAAE,OAAO,KAAKL,EAAC,EAAE;AAAO,WAAO,MAAIK,MAAG,EAAE,MAAIA,MAAG,CAACL,GAAEG,EAAC,KAAG,aAAW,OAAOH,GAAEG,EAAC,KAAG,MAAIH,GAAEG,EAAC;AAAA,EAAE;AAAC,EAAAF,GAAE,WAAS,SAASD,IAAEC,IAAE;AAAC,WAAOE,GAAEH,IAAEC,EAAC;AAAA,EAAC;AAAC,GAAE,KAAI,CAAAD,OAAG;AAAC,EAAAA,GAAE,UAAQ,MAAK;AAAA,IAAC,YAAYA,IAAE;AAAC,WAAK,UAAQA,IAAE,KAAK,QAAM,EAAC,EAAE,KAAK,IAAI,IAAE,EAAC;AAAA,IAAC;AAAA,IAAC,IAAIA,IAAEC,IAAE;AAAC,sBAAcD,OAAIA,KAAE,eAAc,KAAK,MAAM,KAAK,EAAC,CAACA,EAAC,GAAEC,IAAE;AAAA,IAAC;AAAA,IAAC,SAASD,IAAE;AAAC,sBAAcA,GAAE,YAAUA,GAAE,UAAQ,eAAcA,GAAE,IAAI,KAAG,OAAO,KAAKA,GAAE,IAAI,CAAC,EAAE,SAAO,IAAE,KAAK,MAAM,KAAK,EAAC,CAACA,GAAE,OAAO,GAAEA,GAAE,OAAM,MAAKA,GAAE,IAAI,GAAE,IAAE,KAAK,MAAM,KAAK,EAAC,CAACA,GAAE,OAAO,GAAEA,GAAE,OAAM;AAAA,IAAC;AAAA,GAAC;AAAC,GAAE,KAAI,CAAAA,OAAG;AAAC,WAASC,GAAED,IAAE;AAAC,WAAM,CAAC,CAACA,GAAE,eAAa,cAAY,OAAOA,GAAE,YAAY,YAAUA,GAAE,YAAY,SAASA,EAAC;AAAA,EAAC;AAAC,EAAAA,GAAE,UAAQ,SAASA,IAAE;AAAC,WAAO,QAAMA,OAAIC,GAAED,EAAC,MAAG,SAASA,IAAE;AAAC,aAAM,cAAY,OAAOA,GAAE,eAAa,cAAY,OAAOA,GAAE,SAAOC,GAAED,GAAE,MAAM,GAAE,CAAC,CAAC;AAAA,IAAC,GAAEA,EAAC,KAAG,CAAC,CAACA,GAAE;AAAA,EAAU;AAAC,GAAE,KAAI,CAACA,IAAEC,IAAEE,OAAI;AAAC,IAAC,WAAU;AAAC,QAAIF,KAAEE,GAAE,GAAG,GAAEE,KAAEF,GAAE,GAAG,EAAE,MAAKD,KAAEC,GAAE,GAAG,GAAEC,KAAED,GAAE,GAAG,EAAE,KAAIG,KAAE,SAASN,IAAEG,IAAE;AAAC,MAAAH,GAAE,eAAa,SAAOA,KAAEG,MAAG,aAAWA,GAAE,WAASC,GAAE,cAAcJ,EAAC,IAAEK,GAAE,cAAcL,EAAC,IAAEE,GAAEF,EAAC,IAAEA,KAAE,MAAM,UAAU,MAAM,KAAKA,IAAE,CAAC,IAAE,MAAM,QAAQA,EAAC,KAAGA,GAAE,gBAAc,eAAaA,KAAEA,GAAE,UAAS;AAAG,eAAQO,KAAEN,GAAE,aAAaD,EAAC,GAAEQ,KAAE,IAAER,GAAE,QAAOS,KAAE,YAAWC,KAAE,YAAWM,KAAE,aAAYG,KAAE,WAAUC,KAAE,GAAEA,KAAEb,GAAE,QAAOa,MAAIb,GAAEa,EAAC,IAAE,YAAUb,GAAEa,EAAC,KAAG,IAAEb,GAAEa,EAAC,MAAI,MAAI,cAAYb,GAAEa,EAAC,KAAG,KAAGb,GAAEa,EAAC,MAAI;AAAG,MAAAb,GAAEC,OAAI,CAAC,KAAG,OAAKA,KAAE,IAAGD,GAAE,MAAIC,KAAE,OAAK,KAAG,EAAE,IAAEA;AAAE,UAAIG,KAAEL,GAAE,KAAIO,KAAEP,GAAE,KAAIM,KAAEN,GAAE,KAAIQ,KAAER,GAAE;AAAI,WAAIc,KAAE,GAAEA,KAAEb,GAAE,QAAOa,MAAG,IAAG;AAAC,YAAIL,KAAEN,IAAEQ,KAAEP,IAAEQ,KAAEF,IAAEK,KAAEF;AAAE,QAAAV,KAAEE,GAAEF,IAAEC,IAAEM,IAAEG,IAAEZ,GAAEa,KAAE,CAAC,GAAE,GAAE,UAAU,GAAED,KAAER,GAAEQ,IAAEV,IAAEC,IAAEM,IAAET,GAAEa,KAAE,CAAC,GAAE,IAAG,UAAU,GAAEJ,KAAEL,GAAEK,IAAEG,IAAEV,IAAEC,IAAEH,GAAEa,KAAE,CAAC,GAAE,IAAG,SAAS,GAAEV,KAAEC,GAAED,IAAEM,IAAEG,IAAEV,IAAEF,GAAEa,KAAE,CAAC,GAAE,IAAG,WAAW,GAAEX,KAAEE,GAAEF,IAAEC,IAAEM,IAAEG,IAAEZ,GAAEa,KAAE,CAAC,GAAE,GAAE,UAAU,GAAED,KAAER,GAAEQ,IAAEV,IAAEC,IAAEM,IAAET,GAAEa,KAAE,CAAC,GAAE,IAAG,UAAU,GAAEJ,KAAEL,GAAEK,IAAEG,IAAEV,IAAEC,IAAEH,GAAEa,KAAE,CAAC,GAAE,IAAG,WAAW,GAAEV,KAAEC,GAAED,IAAEM,IAAEG,IAAEV,IAAEF,GAAEa,KAAE,CAAC,GAAE,IAAG,SAAS,GAAEX,KAAEE,GAAEF,IAAEC,IAAEM,IAAEG,IAAEZ,GAAEa,KAAE,CAAC,GAAE,GAAE,UAAU,GAAED,KAAER,GAAEQ,IAAEV,IAAEC,IAAEM,IAAET,GAAEa,KAAE,CAAC,GAAE,IAAG,WAAW,GAAEJ,KAAEL,GAAEK,IAAEG,IAAEV,IAAEC,IAAEH,GAAEa,KAAE,EAAE,GAAE,IAAG,MAAM,GAAEV,KAAEC,GAAED,IAAEM,IAAEG,IAAEV,IAAEF,GAAEa,KAAE,EAAE,GAAE,IAAG,WAAW,GAAEX,KAAEE,GAAEF,IAAEC,IAAEM,IAAEG,IAAEZ,GAAEa,KAAE,EAAE,GAAE,GAAE,UAAU,GAAED,KAAER,GAAEQ,IAAEV,IAAEC,IAAEM,IAAET,GAAEa,KAAE,EAAE,GAAE,IAAG,SAAS,GAAEJ,KAAEL,GAAEK,IAAEG,IAAEV,IAAEC,IAAEH,GAAEa,KAAE,EAAE,GAAE,IAAG,WAAW,GAAEX,KAAEI,GAAEJ,IAAEC,KAAEC,GAAED,IAAEM,IAAEG,IAAEV,IAAEF,GAAEa,KAAE,EAAE,GAAE,IAAG,UAAU,GAAEJ,IAAEG,IAAEZ,GAAEa,KAAE,CAAC,GAAE,GAAE,UAAU,GAAED,KAAEN,GAAEM,IAAEV,IAAEC,IAAEM,IAAET,GAAEa,KAAE,CAAC,GAAE,GAAE,WAAW,GAAEJ,KAAEH,GAAEG,IAAEG,IAAEV,IAAEC,IAAEH,GAAEa,KAAE,EAAE,GAAE,IAAG,SAAS,GAAEV,KAAEG,GAAEH,IAAEM,IAAEG,IAAEV,IAAEF,GAAEa,KAAE,CAAC,GAAE,IAAG,UAAU,GAAEX,KAAEI,GAAEJ,IAAEC,IAAEM,IAAEG,IAAEZ,GAAEa,KAAE,CAAC,GAAE,GAAE,UAAU,GAAED,KAAEN,GAAEM,IAAEV,IAAEC,IAAEM,IAAET,GAAEa,KAAE,EAAE,GAAE,GAAE,QAAQ,GAAEJ,KAAEH,GAAEG,IAAEG,IAAEV,IAAEC,IAAEH,GAAEa,KAAE,EAAE,GAAE,IAAG,UAAU,GAAEV,KAAEG,GAAEH,IAAEM,IAAEG,IAAEV,IAAEF,GAAEa,KAAE,CAAC,GAAE,IAAG,UAAU,GAAEX,KAAEI,GAAEJ,IAAEC,IAAEM,IAAEG,IAAEZ,GAAEa,KAAE,CAAC,GAAE,GAAE,SAAS,GAAED,KAAEN,GAAEM,IAAEV,IAAEC,IAAEM,IAAET,GAAEa,KAAE,EAAE,GAAE,GAAE,WAAW,GAAEJ,KAAEH,GAAEG,IAAEG,IAAEV,IAAEC,IAAEH,GAAEa,KAAE,CAAC,GAAE,IAAG,UAAU,GAAEV,KAAEG,GAAEH,IAAEM,IAAEG,IAAEV,IAAEF,GAAEa,KAAE,CAAC,GAAE,IAAG,UAAU,GAAEX,KAAEI,GAAEJ,IAAEC,IAAEM,IAAEG,IAAEZ,GAAEa,KAAE,EAAE,GAAE,GAAE,WAAW,GAAED,KAAEN,GAAEM,IAAEV,IAAEC,IAAEM,IAAET,GAAEa,KAAE,CAAC,GAAE,GAAE,SAAS,GAAEJ,KAAEH,GAAEG,IAAEG,IAAEV,IAAEC,IAAEH,GAAEa,KAAE,CAAC,GAAE,IAAG,UAAU,GAAEX,KAAEG,GAAEH,IAAEC,KAAEG,GAAEH,IAAEM,IAAEG,IAAEV,IAAEF,GAAEa,KAAE,EAAE,GAAE,IAAG,WAAW,GAAEJ,IAAEG,IAAEZ,GAAEa,KAAE,CAAC,GAAE,GAAE,OAAO,GAAED,KAAEP,GAAEO,IAAEV,IAAEC,IAAEM,IAAET,GAAEa,KAAE,CAAC,GAAE,IAAG,WAAW,GAAEJ,KAAEJ,GAAEI,IAAEG,IAAEV,IAAEC,IAAEH,GAAEa,KAAE,EAAE,GAAE,IAAG,UAAU,GAAEV,KAAEE,GAAEF,IAAEM,IAAEG,IAAEV,IAAEF,GAAEa,KAAE,EAAE,GAAE,IAAG,SAAS,GAAEX,KAAEG,GAAEH,IAAEC,IAAEM,IAAEG,IAAEZ,GAAEa,KAAE,CAAC,GAAE,GAAE,WAAW,GAAED,KAAEP,GAAEO,IAAEV,IAAEC,IAAEM,IAAET,GAAEa,KAAE,CAAC,GAAE,IAAG,UAAU,GAAEJ,KAAEJ,GAAEI,IAAEG,IAAEV,IAAEC,IAAEH,GAAEa,KAAE,CAAC,GAAE,IAAG,UAAU,GAAEV,KAAEE,GAAEF,IAAEM,IAAEG,IAAEV,IAAEF,GAAEa,KAAE,EAAE,GAAE,IAAG,WAAW,GAAEX,KAAEG,GAAEH,IAAEC,IAAEM,IAAEG,IAAEZ,GAAEa,KAAE,EAAE,GAAE,GAAE,SAAS,GAAED,KAAEP,GAAEO,IAAEV,IAAEC,IAAEM,IAAET,GAAEa,KAAE,CAAC,GAAE,IAAG,UAAU,GAAEJ,KAAEJ,GAAEI,IAAEG,IAAEV,IAAEC,IAAEH,GAAEa,KAAE,CAAC,GAAE,IAAG,UAAU,GAAEV,KAAEE,GAAEF,IAAEM,IAAEG,IAAEV,IAAEF,GAAEa,KAAE,CAAC,GAAE,IAAG,QAAQ,GAAEX,KAAEG,GAAEH,IAAEC,IAAEM,IAAEG,IAAEZ,GAAEa,KAAE,CAAC,GAAE,GAAE,UAAU,GAAED,KAAEP,GAAEO,IAAEV,IAAEC,IAAEM,IAAET,GAAEa,KAAE,EAAE,GAAE,IAAG,UAAU,GAAEJ,KAAEJ,GAAEI,IAAEG,IAAEV,IAAEC,IAAEH,GAAEa,KAAE,EAAE,GAAE,IAAG,SAAS,GAAEX,KAAEK,GAAEL,IAAEC,KAAEE,GAAEF,IAAEM,IAAEG,IAAEV,IAAEF,GAAEa,KAAE,CAAC,GAAE,IAAG,UAAU,GAAEJ,IAAEG,IAAEZ,GAAEa,KAAE,CAAC,GAAE,GAAE,UAAU,GAAED,KAAEL,GAAEK,IAAEV,IAAEC,IAAEM,IAAET,GAAEa,KAAE,CAAC,GAAE,IAAG,UAAU,GAAEJ,KAAEF,GAAEE,IAAEG,IAAEV,IAAEC,IAAEH,GAAEa,KAAE,EAAE,GAAE,IAAG,WAAW,GAAEV,KAAEI,GAAEJ,IAAEM,IAAEG,IAAEV,IAAEF,GAAEa,KAAE,CAAC,GAAE,IAAG,SAAS,GAAEX,KAAEK,GAAEL,IAAEC,IAAEM,IAAEG,IAAEZ,GAAEa,KAAE,EAAE,GAAE,GAAE,UAAU,GAAED,KAAEL,GAAEK,IAAEV,IAAEC,IAAEM,IAAET,GAAEa,KAAE,CAAC,GAAE,IAAG,WAAW,GAAEJ,KAAEF,GAAEE,IAAEG,IAAEV,IAAEC,IAAEH,GAAEa,KAAE,EAAE,GAAE,IAAG,QAAQ,GAAEV,KAAEI,GAAEJ,IAAEM,IAAEG,IAAEV,IAAEF,GAAEa,KAAE,CAAC,GAAE,IAAG,WAAW,GAAEX,KAAEK,GAAEL,IAAEC,IAAEM,IAAEG,IAAEZ,GAAEa,KAAE,CAAC,GAAE,GAAE,UAAU,GAAED,KAAEL,GAAEK,IAAEV,IAAEC,IAAEM,IAAET,GAAEa,KAAE,EAAE,GAAE,IAAG,SAAS,GAAEJ,KAAEF,GAAEE,IAAEG,IAAEV,IAAEC,IAAEH,GAAEa,KAAE,CAAC,GAAE,IAAG,WAAW,GAAEV,KAAEI,GAAEJ,IAAEM,IAAEG,IAAEV,IAAEF,GAAEa,KAAE,EAAE,GAAE,IAAG,UAAU,GAAEX,KAAEK,GAAEL,IAAEC,IAAEM,IAAEG,IAAEZ,GAAEa,KAAE,CAAC,GAAE,GAAE,UAAU,GAAED,KAAEL,GAAEK,IAAEV,IAAEC,IAAEM,IAAET,GAAEa,KAAE,EAAE,GAAE,IAAG,WAAW,GAAEJ,KAAEF,GAAEE,IAAEG,IAAEV,IAAEC,IAAEH,GAAEa,KAAE,CAAC,GAAE,IAAG,SAAS,GAAEV,KAAEI,GAAEJ,IAAEM,IAAEG,IAAEV,IAAEF,GAAEa,KAAE,CAAC,GAAE,IAAG,UAAU,GAAEX,KAAEA,KAAEM,OAAI,GAAEL,KAAEA,KAAEO,OAAI,GAAED,KAAEA,KAAEE,OAAI,GAAEC,KAAEA,KAAEE,OAAI;AAAA,MAAC;AAAC,aAAOpB,GAAE,OAAO,CAACQ,IAAEC,IAAEM,IAAEG,EAAC,CAAC;AAAA,IAAC;AAAE,IAAAb,GAAE,MAAI,SAASN,IAAEC,IAAEE,IAAEE,IAAEH,IAAEE,IAAEE,IAAE;AAAC,UAAIC,KAAEP,MAAGC,KAAEE,KAAE,CAACF,KAAEI,OAAIH,OAAI,KAAGI;AAAE,cAAOC,MAAGH,KAAEG,OAAI,KAAGH,MAAGH;AAAA,IAAC,GAAEK,GAAE,MAAI,SAASN,IAAEC,IAAEE,IAAEE,IAAEH,IAAEE,IAAEE,IAAE;AAAC,UAAIC,KAAEP,MAAGC,KAAEI,KAAEF,KAAE,CAACE,OAAIH,OAAI,KAAGI;AAAE,cAAOC,MAAGH,KAAEG,OAAI,KAAGH,MAAGH;AAAA,IAAC,GAAEK,GAAE,MAAI,SAASN,IAAEC,IAAEE,IAAEE,IAAEH,IAAEE,IAAEE,IAAE;AAAC,UAAIC,KAAEP,MAAGC,KAAEE,KAAEE,OAAIH,OAAI,KAAGI;AAAE,cAAOC,MAAGH,KAAEG,OAAI,KAAGH,MAAGH;AAAA,IAAC,GAAEK,GAAE,MAAI,SAASN,IAAEC,IAAEE,IAAEE,IAAEH,IAAEE,IAAEE,IAAE;AAAC,UAAIC,KAAEP,MAAGG,MAAGF,KAAE,CAACI,QAAKH,OAAI,KAAGI;AAAE,cAAOC,MAAGH,KAAEG,OAAI,KAAGH,MAAGH;AAAA,IAAC,GAAEK,GAAE,aAAW,IAAGA,GAAE,cAAY,IAAGN,GAAE,UAAQ,SAASA,IAAEG,IAAE;AAAC,UAAG,QAAMH,IAAE,MAAM,IAAI,MAAM,sBAAoBA,EAAC;AAAE,UAAIK,KAAEJ,GAAE,aAAaK,GAAEN,IAAEG,EAAC,CAAC;AAAE,aAAOA,MAAGA,GAAE,UAAQE,KAAEF,MAAGA,GAAE,WAASC,GAAE,cAAcC,EAAC,IAAEJ,GAAE,WAAWI,EAAC;AAAA,IAAC;AAAA,EAAC,IAAE;AAAC,GAAE,KAAI,CAACL,IAAEC,IAAEE,OAAI;AAAC,MAAIE,KAAEF,GAAE,CAAC;AAAE,EAAAH,GAAE,UAAQ,SAASA,IAAE;AAAC,WAAOA,MAAG,SAAOA,GAAE,OAAO,GAAE,CAAC,MAAIA,KAAE,WAASA,GAAE,OAAO,CAAC,IAAGY,IAAE,SAASZ,IAAE;AAAC,aAAOA,GAAE,MAAM,MAAM,EAAE,KAAKE,EAAC,EAAE,MAAM,KAAK,EAAE,KAAKE,EAAC,EAAE,MAAM,KAAK,EAAE,KAAKE,EAAC,EAAE,MAAM,KAAK,EAAE,KAAKC,EAAC,EAAE,MAAM,KAAK,EAAE,KAAKC,EAAC;AAAA,IAAC,GAAER,EAAC,GAAE,IAAE,EAAE,IAAIU,EAAC,KAAG,EAAC;AAAA,EAAC;AAAE,MAAIR,KAAE,YAAU,KAAK,QAAO,GAAE,MAAKE,KAAE,WAAS,KAAK,QAAO,GAAE,MAAKE,KAAE,YAAU,KAAK,QAAO,GAAE,MAAKC,KAAE,YAAU,KAAK,QAAO,GAAE,MAAKC,KAAE,aAAW,KAAK,QAAO,GAAE;AAAK,WAASC,GAAET,IAAE;AAAC,WAAO,SAASA,IAAE,EAAE,KAAGA,KAAE,SAASA,IAAE,EAAE,IAAEA,GAAE,WAAW,CAAC;AAAA,EAAC;AAAC,WAASU,GAAEV,IAAE;AAAC,WAAOA,GAAE,MAAME,EAAC,EAAE,KAAK,IAAI,EAAE,MAAME,EAAC,EAAE,KAAK,GAAG,EAAE,MAAME,EAAC,EAAE,KAAK,GAAG,EAAE,MAAMC,EAAC,EAAE,KAAK,GAAG,EAAE,MAAMC,EAAC,EAAE,KAAK,GAAG;AAAA,EAAC;AAAC,WAASQ,GAAEhB,IAAE;AAAC,QAAG,CAACA,IAAE,OAAM,CAAC,EAAE;AAAE,QAAIC,KAAE,EAAC,EAAEE,KAAEE,GAAE,KAAI,KAAIL,EAAC;AAAE,QAAG,CAACG,IAAE,OAAOH,GAAE,MAAM,GAAG;AAAE,QAAIE,KAAEC,GAAE,KAAIC,KAAED,GAAE,MAAKG,KAAEH,GAAE,MAAKI,KAAEL,GAAE,MAAM,GAAG;AAAE,IAAAK,GAAEA,GAAE,SAAO,CAAC,KAAG,MAAIH,KAAE;AAAI,QAAII,KAAEQ,GAAEV,EAAC;AAAE,WAAOA,GAAE,WAASC,GAAEA,GAAE,SAAO,CAAC,KAAGC,GAAE,OAAM,EAAED,GAAE,KAAK,MAAMA,IAAEC,EAAC,IAAGP,GAAE,KAAK,MAAMA,IAAEM,EAAC,GAAEN;AAAA,EAAC;AAAC,WAASkB,GAAEnB,IAAE;AAAC,WAAM,MAAIA,KAAE;AAAA,EAAG;AAAC,WAASoB,GAAEpB,IAAE;AAAC,WAAM,SAAS,KAAKA,EAAC;AAAA,EAAC;AAAC,WAASW,GAAEX,IAAEC,IAAE;AAAC,WAAOD,MAAGC;AAAA,EAAC;AAAC,WAASY,GAAEb,IAAEC,IAAE;AAAC,WAAOD,MAAGC;AAAA,EAAC;AAAC,WAASW,GAAEZ,IAAEC,IAAE;AAAC,QAAIE,KAAE,EAAC,EAAED,KAAEG,GAAE,KAAI,KAAIL,EAAC;AAAE,QAAG,CAACE,IAAE,OAAM,CAACF,EAAC;AAAE,QAAII,KAAEF,GAAE,KAAIK,KAAEL,GAAE,KAAK,SAAOU,GAAEV,GAAE,MAAK,KAAE,IAAE,CAAC,EAAE;AAAE,QAAG,MAAM,KAAKA,GAAE,GAAG,GAAE,SAAQM,KAAE,GAAEA,KAAED,GAAE,QAAOC,MAAI;AAAC,UAAIE,KAAEN,KAAE,MAAIF,GAAE,OAAK,MAAIK,GAAEC,EAAC;AAAE,MAAAL,GAAE,KAAKO,EAAC;AAAA,IAAC;AAAA,SAAK;AAAC,UAAII,IAAEC,IAAEE,KAAE,iCAAiC,KAAKf,GAAE,IAAI,GAAEgB,KAAE,uCAAuC,KAAKhB,GAAE,IAAI,GAAEmB,KAAEJ,MAAGC,IAAEI,KAAEpB,GAAE,KAAK,QAAQ,GAAG,KAAG;AAAE,UAAG,CAACmB,MAAG,CAACC,WAASpB,GAAE,KAAK,MAAM,OAAO,IAAEU,GAAEZ,KAAEE,GAAE,MAAI,MAAIA,GAAE,OAAKI,KAAEJ,GAAE,IAAI,IAAE,CAACF,EAAC;AAAE,UAAGqB,IAAEP,KAAEZ,GAAE,KAAK,MAAM,MAAM;AAAA,eAAU,OAAKY,KAAEE,GAAEd,GAAE,IAAI,GAAG,UAAQ,OAAKY,KAAEF,GAAEE,GAAE,CAAC,GAAE,KAAE,EAAE,IAAIK,EAAC,GAAG,QAAO,OAAOZ,GAAE,KAAK,SAASP,IAAE;AAAC,eAAOE,GAAE,MAAIY,GAAE,CAAC,IAAEd;AAAA,MAAC,GAAE;AAAE,UAAGqB,IAAE;AAAC,YAAIE,KAAEd,GAAEK,GAAE,CAAC,CAAC,GAAEU,KAAEf,GAAEK,GAAE,CAAC,CAAC,GAAEW,KAAE,KAAK,IAAIX,GAAE,CAAC,EAAE,QAAOA,GAAE,CAAC,EAAE,MAAM,GAAEY,KAAE,KAAGZ,GAAE,SAAO,KAAK,IAAIL,GAAEK,GAAE,CAAC,CAAC,CAAC,IAAE,GAAEa,KAAEhB;AAAE,QAAAa,KAAED,OAAIG,MAAG,IAAGC,KAAEd;AAAG,YAAIe,KAAEd,GAAE,KAAKM,EAAC;AAAE,QAAAL,KAAE,EAAC;AAAE,iBAAQc,KAAEN,IAAEI,GAAEE,IAAEL,EAAC,GAAEK,MAAGH,IAAE;AAAC,cAAII;AAAE,cAAGZ,IAAE,UAAQY,KAAE,OAAO,aAAaD,EAAC,OAAKC,KAAE;AAAA,mBAAYA,KAAE,OAAOD,EAAC,GAAED,IAAE;AAAC,gBAAIG,KAAEN,KAAEK,GAAE;AAAO,gBAAGC,KAAE,GAAE;AAAC,kBAAIC,KAAE,IAAI,MAAMD,KAAE,CAAC,EAAE,KAAK,GAAG;AAAE,cAAAD,KAAED,KAAE,IAAE,MAAIG,KAAEF,GAAE,MAAM,CAAC,IAAEE,KAAEF;AAAA,YAAC;AAAA,UAAC;AAAC,UAAAf,GAAE,KAAKe,EAAC;AAAA,QAAC;AAAA,MAAC,OAAK;AAAC,QAAAf,KAAE,EAAC;AAAE,iBAAQkB,KAAE,GAAEA,KAAEnB,GAAE,QAAOmB,MAAIlB,GAAE,KAAK,MAAMA,IAAEH,GAAEE,GAAEmB,EAAC,GAAE,KAAE,CAAC;AAAA,MAAC;AAAC,WAAIA,KAAE,GAAEA,KAAElB,GAAE,QAAOkB,MAAI,KAAIzB,KAAE,GAAEA,KAAED,GAAE,QAAOC,MAAIE,KAAEN,KAAEW,GAAEkB,EAAC,IAAE1B,GAAEC,EAAC,IAAG,CAACP,MAAGoB,MAAGX,OAAIP,GAAE,KAAKO,EAAC;AAAA,IAAC;AAAC,WAAOP;AAAA,EAAC;AAAC,GAAE,KAAI,CAAAH,OAAG;AAAC,WAASC,GAAED,IAAE;AAAC,WAAOC,KAAE,cAAY,OAAO,UAAQ,YAAU,OAAO,OAAO,WAAS,SAASD,IAAE;AAAC,aAAO,OAAOA;AAAA,IAAC,IAAE,SAASA,IAAE;AAAC,aAAOA,MAAG,cAAY,OAAO,UAAQA,GAAE,gBAAc,UAAQA,OAAI,OAAO,YAAU,WAAS,OAAOA;AAAA,IAAC,GAAEC,GAAED,EAAC;AAAA,EAAC;AAAC,WAASG,GAAEH,IAAE;AAAC,QAAIC,KAAE,cAAY,OAAO,0BAAQ,QAAI;AAAO,WAAOE,KAAE,SAASH,IAAE;AAAC,UAAG,SAAOA,OAAIG,KAAEH,IAAE,OAAK,SAAS,SAAS,KAAKG,EAAC,EAAE,QAAQ,eAAe,IAAG,OAAOH;AAAE,UAAIG;AAAE,UAAG,cAAY,OAAOH,IAAE,MAAM,IAAI,UAAU,oDAAoD;AAAE,UAAG,WAASC,IAAE;AAAC,YAAGA,GAAE,IAAID,EAAC,GAAE,OAAOC,GAAE,IAAID,EAAC;AAAE,QAAAC,GAAE,IAAID,IAAEM,EAAC;AAAA,MAAC;AAAC,eAASA,KAAG;AAAC,eAAOD,GAAEL,IAAE,WAAUI,GAAE,IAAI,EAAE,WAAW;AAAA,MAAC;AAAC,aAAOE,GAAE,YAAU,OAAO,OAAON,GAAE,WAAU,EAAC,aAAY,EAAC,OAAMM,IAAE,YAAW,OAAG,UAAS,MAAG,cAAa,QAAI,GAAEJ,GAAEI,IAAEN,EAAC;AAAA,IAAC,GAAEG,GAAEH,EAAC;AAAA,EAAC;AAAC,WAASK,GAAEL,IAAEC,IAAEE,IAAE;AAAC,WAAOE,MAAE,WAAU;AAAC,UAAG,eAAa,OAAO,WAAS,CAAC,QAAQ,WAAU,OAAM;AAAG,UAAG,QAAQ,UAAU,MAAK,OAAM;AAAG,UAAG,cAAY,OAAO,OAAM,OAAM;AAAG,UAAG;AAAC,eAAO,KAAK,UAAU,SAAS,KAAK,QAAQ,UAAU,MAAK,EAAC,GAAG,WAAU;AAAA,QAAC,GAAG,GAAE;AAAA,MAAE,SAAOL,IAAE;AAAC,eAAM;AAAA,MAAE;AAAA,IAAC,IAAE,GAAE,QAAQ,YAAU,SAASA,IAAEC,IAAEE,IAAE;AAAC,UAAIE,KAAE,CAAC,IAAI;AAAE,MAAAA,GAAE,KAAK,MAAMA,IAAEJ,EAAC;AAAE,UAAIG,KAAE,KAAI,SAAS,KAAK,MAAMJ,IAAEK,EAAC;AAAG,aAAOF,MAAGD,GAAEE,IAAED,GAAE,SAAS,GAAEC;AAAA,IAAC,GAAEC,GAAE,MAAM,MAAK,SAAS;AAAA,EAAC;AAAC,WAASH,GAAEF,IAAEC,IAAE;AAAC,WAAOC,KAAE,OAAO,kBAAgB,SAASF,IAAEC,IAAE;AAAC,aAAOD,GAAE,YAAUC,IAAED;AAAA,IAAC,GAAEE,GAAEF,IAAEC,EAAC;AAAA,EAAC;AAAC,WAASG,GAAEJ,IAAE;AAAC,WAAOI,KAAE,OAAO,iBAAe,OAAO,iBAAe,SAASJ,IAAE;AAAC,aAAOA,GAAE,aAAW,OAAO,eAAeA,EAAC;AAAA,IAAC,GAAEI,GAAEJ,EAAC;AAAA,EAAC;AAAC,MAAIM,MAAE,SAASN,IAAE;AAAC,aAASG,GAAEH,IAAE;AAAC,UAAIK;AAAE,cAAO,SAASL,IAAEC,IAAE;AAAC,YAAG,EAAED,cAAaC,KAAG,MAAM,IAAI,UAAU,mCAAmC;AAAA,MAAC,GAAE,MAAKE,EAAC,IAAGE,MAAE,SAASL,IAAEG,IAAE;AAAC,eAAM,CAACA,MAAG,aAAWF,GAAEE,EAAC,KAAG,cAAY,OAAOA,MAAE,SAASH,IAAE;AAAC,cAAG,WAASA,IAAE,MAAM,IAAI,eAAe,2DAA2D;AAAE,iBAAOA;AAAA,QAAC,GAAEA,EAAC,IAAEG;AAAA,MAAC,GAAE,MAAKC,GAAED,EAAC,EAAE,KAAK,MAAKH,EAAC,CAAC,GAAG,OAAK,gCAA+BK;AAAA,IAAC;AAAC,YAAO,SAASL,IAAEC,IAAE;AAAC,UAAG,cAAY,OAAOA,MAAG,SAAOA,IAAE,MAAM,IAAI,UAAU,oDAAoD;AAAE,MAAAD,GAAE,YAAU,OAAO,OAAOC,MAAGA,GAAE,WAAU,EAAC,aAAY,EAAC,OAAMD,IAAE,UAAS,MAAG,cAAa,MAAE,EAAE,GAAEC,MAAGC,GAAEF,IAAEC,EAAC;AAAA,IAAC,GAAEE,IAAEH,EAAC,GAAEG;AAAA,EAAC,GAAEA,GAAE,KAAK,CAAC;AAAE,WAASI,GAAEP,IAAEG,IAAE;AAAC,aAAQE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,WAAU;AAAA,IAAC,GAAEH,KAAEC,GAAE,MAAM,GAAG,GAAEC,KAAEF,GAAE,QAAOI,KAAE,SAASL,IAAE;AAAC,UAAIE,KAAED,GAAED,EAAC;AAAE,UAAG,CAACD,IAAE,OAAM,EAAC,GAAE,QAAM;AAAE,UAAG,QAAMG,IAAE;AAAC,YAAG,MAAM,QAAQH,EAAC,GAAE,OAAM,EAAC,GAAEA,GAAE,KAAK,SAASG,IAAEC,IAAE;AAAC,cAAIE,KAAEJ,GAAE,MAAMD,KAAE,CAAC;AAAE,iBAAOK,GAAE,SAAO,IAAEC,GAAEJ,IAAEG,GAAE,KAAK,GAAG,GAAED,EAAC,IAAEA,GAAEL,IAAEI,IAAEF,IAAED,EAAC;AAAA,QAAC,GAAE,EAAC;AAAE,YAAIG,KAAEF,GAAE,MAAM,GAAED,EAAC,EAAE,KAAK,GAAG;AAAE,cAAM,IAAI,MAAM,uBAAuB,OAAOG,IAAE,mBAAmB,CAAC;AAAA,MAAC;AAAC,MAAAJ,KAAEK,GAAEL,IAAEG,IAAED,IAAED,EAAC;AAAA,IAAC,GAAEO,KAAE,GAAEA,KAAEJ,IAAEI,MAAI;AAAC,UAAIC,KAAEH,GAAEE,EAAC;AAAE,UAAG,aAAWP,GAAEQ,EAAC,UAASA,GAAE;AAAA,IAAC;AAAC,WAAOT;AAAA,EAAC;AAAC,WAASQ,GAAER,IAAEC,IAAE;AAAC,WAAOD,GAAE,WAASC,KAAE;AAAA,EAAC;AAAC,EAAAD,GAAE,UAAQ,EAAC,KAAI,SAASA,IAAEG,IAAEE,IAAE;AAAC,QAAG,YAAUJ,GAAED,EAAC,KAAG,SAAOA,IAAE,OAAOA;AAAE,QAAG,WAASG,IAAE,OAAOH;AAAE,QAAG,YAAU,OAAOG,IAAE,OAAOH,GAAEG,EAAC,IAAEE,IAAEL,GAAEG,EAAC;AAAE,QAAG;AAAC,aAAOI,GAAEP,IAAEG,KAAG,SAASH,IAAEC,IAAEE,IAAED,IAAE;AAAC,YAAGF,OAAI,QAAQ,eAAe,EAAE,GAAE,MAAM,IAAIM,GAAE,uCAAuC;AAAE,YAAG,CAACN,GAAEC,EAAC,GAAE;AAAC,cAAIG,KAAE,OAAO,UAAU,OAAOD,GAAED,KAAE,CAAC,CAAC,CAAC,GAAEK,KAAE,QAAMJ,GAAED,KAAE,CAAC;AAAE,UAAAF,GAAEC,EAAC,IAAEG,MAAGG,KAAE,KAAG,EAAC;AAAA,QAAC;AAAC,eAAOC,GAAEL,IAAED,EAAC,MAAIF,GAAEC,EAAC,IAAEI,KAAGL,GAAEC,EAAC;AAAA,MAAC,GAAE;AAAA,IAAC,SAAOA,IAAE;AAAC,UAAGA,cAAaK,IAAE,MAAML;AAAE,aAAOD;AAAA,IAAC;AAAA,EAAC,GAAE,KAAI,SAASA,IAAEG,IAAE;AAAC,QAAG,YAAUF,GAAED,EAAC,KAAG,SAAOA,IAAE,OAAOA;AAAE,QAAG,WAASG,IAAE,OAAOH;AAAE,QAAG,YAAU,OAAOG,IAAE,OAAOH,GAAEG,EAAC;AAAE,QAAG;AAAC,aAAOI,GAAEP,IAAEG,KAAG,SAASH,IAAEC,IAAE;AAAC,eAAOD,GAAEC,EAAC;AAAA,MAAC,GAAE;AAAA,IAAC,SAAOA,IAAE;AAAC,aAAOD;AAAA,IAAC;AAAA,EAAC,GAAE,KAAI,SAASA,IAAEG,IAAE;AAAC,QAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAG,YAAUJ,GAAED,EAAC,KAAG,SAAOA,IAAE,OAAM;AAAG,QAAG,WAASG,IAAE,OAAM;AAAG,QAAG,YAAU,OAAOA,IAAE,OAAOA,MAAKH;AAAE,QAAG;AAAC,UAAIE,KAAE;AAAG,aAAOK,GAAEP,IAAEG,KAAG,SAASH,IAAEC,IAAEE,IAAEC,IAAE;AAAC,YAAG,CAACI,GAAEL,IAAEC,EAAC,GAAE,OAAOJ,MAAGA,GAAEC,EAAC;AAAE,QAAAC,KAAEG,GAAE,MAAIL,GAAE,eAAeC,EAAC,IAAEA,MAAKD;AAAA,MAAC,GAAE,EAAEE;AAAA,IAAC,SAAOF,IAAE;AAAC,aAAM;AAAA,IAAE;AAAA,EAAC,GAAE,QAAO,SAASA,IAAEC,IAAEE,IAAE;AAAC,WAAO,KAAK,IAAIH,IAAEC,IAAEE,MAAG,EAAC,KAAI,MAAG;AAAA,EAAC,GAAE,MAAK,SAASH,IAAEG,IAAEE,IAAE;AAAC,QAAIH,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAG,YAAUD,GAAED,EAAC,KAAG,SAAOA,IAAE,OAAM;AAAG,QAAG,WAASG,IAAE,OAAM;AAAG,QAAG;AAAC,UAAIC,KAAE,OAAGE,KAAE;AAAG,aAAOC,GAAEP,IAAEG,KAAG,SAASH,IAAEG,IAAED,IAAEK,IAAE;AAAC,eAAOH,KAAEA,MAAGJ,OAAIK,MAAG,CAAC,CAACL,MAAGA,GAAEG,EAAC,MAAIE,IAAEC,KAAEE,GAAEN,IAAEK,EAAC,KAAG,aAAWN,GAAED,EAAC,KAAGG,MAAKH,IAAEA,MAAGA,GAAEG,EAAC;AAAA,MAAC,GAAE,EAAED,GAAE,YAAUE,MAAGE,KAAEF;AAAA,IAAC,SAAOJ,IAAE;AAAC,aAAM;AAAA,IAAE;AAAA,EAAC,GAAE,8BAA6BM,IAAC;AAAC,GAAE,IAAG,CAACN,IAAEC,IAAEE,OAAI;AAAC,MAAIE,KAAEF,GAAE,GAAG,GAAED,KAAE,SAASF,IAAE;AAAC,WAAM,YAAU,OAAOA;AAAA,EAAC;AAAE,WAASI,GAAEJ,IAAEC,IAAE;AAAC,aAAQE,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAEL,GAAE,QAAOK,MAAI;AAAC,UAAIH,KAAEF,GAAEK,EAAC;AAAE,MAAAH,MAAG,QAAMA,OAAI,SAAOA,KAAEC,GAAE,UAAQ,SAAOA,GAAEA,GAAE,SAAO,CAAC,IAAEA,GAAE,KAAI,GAAEF,MAAGE,GAAE,KAAK,IAAI,IAAEA,GAAE,KAAKD,EAAC;AAAA,IAAE;AAAC,WAAOC;AAAA,EAAC;AAAC,MAAIG,KAAE,iEAAgEC,KAAE,EAAC;AAAE,WAASC,GAAER,IAAE;AAAC,WAAOM,GAAE,KAAKN,EAAC,EAAE,MAAM,CAAC;AAAA,EAAC;AAAC,EAAAO,GAAE,UAAQ,WAAU;AAAC,aAAQP,KAAE,IAAGC,KAAE,OAAGE,KAAE,UAAU,SAAO,GAAEA,MAAG,MAAI,CAACF,IAAEE,MAAI;AAAC,UAAIE,KAAEF,MAAG,IAAE,UAAUA,EAAC,IAAE,QAAQ,KAAI;AAAE,UAAG,CAACD,GAAEG,EAAC,GAAE,MAAM,IAAI,UAAU,2CAA2C;AAAE,MAAAA,OAAIL,KAAEK,KAAE,MAAIL,IAAEC,KAAE,QAAMI,GAAE,OAAO,CAAC;AAAA,IAAE;AAAC,YAAOJ,KAAE,MAAI,OAAKD,KAAEI,GAAEJ,GAAE,MAAM,GAAG,GAAE,CAACC,EAAC,EAAE,KAAK,GAAG,MAAI;AAAA,EAAG,GAAEM,GAAE,YAAU,SAASP,IAAE;AAAC,QAAIC,KAAEM,GAAE,WAAWP,EAAC,GAAEG,KAAE,QAAMH,GAAE,OAAO,EAAE;AAAE,YAAOA,KAAEI,GAAEJ,GAAE,MAAM,GAAG,GAAE,CAACC,EAAC,EAAE,KAAK,GAAG,MAAIA,OAAID,KAAE,MAAKA,MAAGG,OAAIH,MAAG,OAAMC,KAAE,MAAI,MAAID;AAAA,EAAC,GAAEO,GAAE,aAAW,SAASP,IAAE;AAAC,WAAM,QAAMA,GAAE,OAAO,CAAC;AAAA,EAAC,GAAEO,GAAE,OAAK,WAAU;AAAC,aAAQP,KAAE,IAAGC,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAI;AAAC,UAAIE,KAAE,UAAUF,EAAC;AAAE,UAAG,CAACC,GAAEC,EAAC,GAAE,MAAM,IAAI,UAAU,wCAAwC;AAAE,MAAAA,OAAIH,MAAGA,KAAE,MAAIG,KAAEA;AAAA,IAAE;AAAC,WAAOI,GAAE,UAAUP,EAAC;AAAA,EAAC,GAAEO,GAAE,WAAS,SAASP,IAAEC,IAAE;AAAC,aAASE,GAAEH,IAAE;AAAC,eAAQC,KAAE,GAAEA,KAAED,GAAE,UAAQ,OAAKA,GAAEC,EAAC,GAAEA,MAAI;AAAC,eAAQE,KAAEH,GAAE,SAAO,GAAEG,MAAG,KAAG,OAAKH,GAAEG,EAAC,GAAEA,MAAI;AAAC,aAAOF,KAAEE,KAAE,EAAC,GAAEH,GAAE,MAAMC,IAAEE,KAAE,CAAC;AAAA,IAAC;AAAC,IAAAH,KAAEO,GAAE,QAAQP,EAAC,EAAE,OAAO,CAAC,GAAEC,KAAEM,GAAE,QAAQN,EAAC,EAAE,OAAO,CAAC;AAAE,aAAQI,KAAEF,GAAEH,GAAE,MAAM,GAAG,CAAC,GAAEE,KAAEC,GAAEF,GAAE,MAAM,GAAG,CAAC,GAAEG,KAAE,KAAK,IAAIC,GAAE,QAAOH,GAAE,MAAM,GAAEI,KAAEF,IAAEI,KAAE,GAAEA,KAAEJ,IAAEI,UAAOH,GAAEG,EAAC,MAAIN,GAAEM,EAAC,GAAE;AAAC,MAAAF,KAAEE;AAAE;AAAA,IAAK;AAAC,QAAIC,KAAE,EAAC;AAAE,SAAID,KAAEF,IAAEE,KAAEH,GAAE,QAAOG,MAAIC,GAAE,KAAK,IAAI;AAAE,YAAOA,KAAEA,GAAE,OAAOP,GAAE,MAAMI,EAAC,CAAC,GAAG,KAAK,GAAG;AAAA,EAAC,GAAEC,GAAE,YAAU,SAASP,IAAE;AAAC,WAAOA;AAAA,EAAC,GAAEO,GAAE,UAAQ,SAASP,IAAE;AAAC,QAAIC,KAAEO,GAAER,EAAC,GAAEG,KAAEF,GAAE,CAAC,GAAEI,KAAEJ,GAAE,CAAC;AAAE,WAAOE,MAAGE,MAAGA,OAAIA,KAAEA,GAAE,OAAO,GAAEA,GAAE,SAAO,CAAC,IAAGF,KAAEE,MAAG;AAAA,EAAG,GAAEE,GAAE,WAAS,SAASP,IAAEC,IAAE;AAAC,QAAIE,KAAEK,GAAER,EAAC,EAAE,CAAC;AAAE,WAAOC,MAAGE,GAAE,OAAO,KAAGF,GAAE,MAAM,MAAIA,OAAIE,KAAEA,GAAE,OAAO,GAAEA,GAAE,SAAOF,GAAE,MAAM,IAAGE;AAAA,EAAC,GAAEI,GAAE,UAAQ,SAASP,IAAE;AAAC,WAAOQ,GAAER,EAAC,EAAE,CAAC;AAAA,EAAC,GAAEO,GAAE,SAAO,SAASP,IAAE;AAAC,QAAG,CAACK,GAAE,SAASL,EAAC,SAAQ,IAAI,UAAU,mDAAiD,OAAOA,EAAC;AAAE,QAAIC,KAAED,GAAE,QAAM;AAAG,QAAG,CAACE,GAAED,EAAC,GAAE,MAAM,IAAI,UAAU,0DAAwD,OAAOD,GAAE,IAAI;AAAE,YAAOA,GAAE,MAAIA,GAAE,MAAIO,GAAE,MAAI,OAAKP,GAAE,QAAM;AAAA,EAAG,GAAEO,GAAE,QAAM,SAASP,IAAE;AAAC,QAAG,CAACE,GAAEF,EAAC,SAAQ,IAAI,UAAU,kDAAgD,OAAOA,EAAC;AAAE,QAAIC,KAAEO,GAAER,EAAC;AAAE,QAAG,CAACC,MAAG,MAAIA,GAAE,cAAa,IAAI,UAAU,mBAAiBD,KAAE,GAAG;AAAE,WAAOC,GAAE,CAAC,IAAEA,GAAE,CAAC,KAAG,IAAGA,GAAE,CAAC,IAAEA,GAAE,CAAC,KAAG,IAAGA,GAAE,CAAC,IAAEA,GAAE,CAAC,KAAG,IAAG,EAAC,MAAKA,GAAE,CAAC,GAAE,KAAIA,GAAE,CAAC,IAAEA,GAAE,CAAC,EAAE,MAAM,GAAEA,GAAE,CAAC,EAAE,SAAO,CAAC,GAAE,MAAKA,GAAE,CAAC,GAAE,KAAIA,GAAE,CAAC,GAAE,MAAKA,GAAE,CAAC,EAAE,MAAM,GAAEA,GAAE,CAAC,EAAE,SAAOA,GAAE,CAAC,EAAE,MAAM,GAAC;AAAA,EAAC,GAAEM,GAAE,MAAI,KAAIA,GAAE,YAAU,KAAIP,GAAE,UAAQO;AAAC,GAAE,KAAI,CAACP,IAAEC,OAAI;AAAC,MAAIE,KAAE,OAAO,UAAU;AAAe,WAASE,GAAEL,IAAE;AAAC,QAAG;AAAC,aAAO,mBAAmBA,GAAE,QAAQ,OAAM,GAAG,CAAC;AAAA,IAAC,SAAOA,IAAE;AAAC,aAAO;AAAA,IAAI;AAAA,EAAC;AAAC,WAASE,GAAEF,IAAE;AAAC,QAAG;AAAC,aAAO,mBAAmBA,EAAC;AAAA,IAAC,SAAOA,IAAE;AAAC,aAAO;AAAA,IAAI;AAAA,EAAC;AAAC,EAAAC,GAAE,YAAU,SAASD,IAAEC,IAAE;AAAC,IAAAA,KAAEA,MAAG;AAAG,QAAII,IAAED,IAAEE,KAAE,EAAC;AAAE,SAAIF,MAAI,YAAU,OAAOH,OAAIA,KAAE,MAAKD,IAAE,IAAGG,GAAE,KAAKH,IAAEI,EAAC,GAAE;AAAC,WAAIC,KAAEL,GAAEI,EAAC,MAAI,QAAMC,MAAG,CAAC,MAAMA,EAAC,MAAIA,KAAE,KAAID,KAAEF,GAAEE,EAAC,GAAEC,KAAEH,GAAEG,EAAC,GAAE,SAAOD,MAAG,SAAOC,IAAE;AAAS,MAAAC,GAAE,KAAKF,KAAE,MAAIC,EAAC;AAAA,IAAC;AAAC,WAAOC,GAAE,SAAOL,KAAEK,GAAE,KAAK,GAAG,IAAE;AAAA,EAAE,GAAEL,GAAE,QAAM,SAASD,IAAE;AAAC,aAAQC,IAAEE,KAAE,wBAAuBD,KAAE,IAAGD,KAAEE,GAAE,KAAKH,EAAC,KAAG;AAAC,UAAII,KAAEC,GAAEJ,GAAE,CAAC,CAAC,GAAEK,KAAED,GAAEJ,GAAE,CAAC,CAAC;AAAE,eAAOG,MAAG,SAAOE,MAAGF,MAAKF,OAAIA,GAAEE,EAAC,IAAEE;AAAA,IAAE;AAAC,WAAOJ;AAAA,EAAC;AAAC,GAAE,KAAI,CAAAF,OAAG;AAAC,EAAAA,GAAE,UAAQ,SAASA,IAAEC,IAAE;AAAC,QAAGA,KAAEA,GAAE,MAAM,GAAG,EAAE,CAAC,GAAE,EAAED,KAAE,CAACA,KAAG,OAAM;AAAG,YAAOC;AAAE,MAAC,KAAI;AAAA,MAAO,KAAI;AAAK,eAAO,OAAKD;AAAA,MAAE,KAAI;AAAA,MAAQ,KAAI;AAAM,eAAO,QAAMA;AAAA,MAAE,KAAI;AAAM,eAAO,OAAKA;AAAA,MAAE,KAAI;AAAS,eAAO,OAAKA;AAAA,MAAE,KAAI;AAAO,eAAM;AAAA;AAAG,WAAO,MAAIA;AAAA,EAAC;AAAC,GAAE,KAAI,CAAAA,OAAG;AAAC,QAAMC,KAAE,yBAAwBE,KAAE;AAA8E,GAAC,OAAO,YAAU,OAAO,aAAW,OAAO,WAAS,OAAO,WAAU,CAAC,OAAO,cAAY,OAAO,eAAa,OAAO,aAAW,OAAO;AAAY,QAAME,KAAE,EAAC,KAAI,MAAG,cAAa,MAAG,cAAa,KAAI,WAAU,MAAE;AAAE,EAAAL,GAAE,UAAQ,SAASA,IAAE;AAAC,QAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAGA,KAAE,OAAO,OAAO,EAAC,EAAEG,IAAEH,EAAC,GAAE,CAACF,MAAG,YAAU,OAAOA,IAAE,OAAOA;AAAE,QAAII,KAAEJ,GAAE,MAAK;AAAE,QAAG,WAASE,GAAE,YAAUA,GAAE,SAAS,KAAKE,EAAC,GAAE,OAAOJ;AAAE,QAAGE,GAAE,OAAKD,GAAE,KAAKG,EAAC,GAAE,OAAO,OAAO,SAASA,IAAE,EAAE;AAAE;AAAC,YAAMH,KAAEE,GAAE,KAAKC,EAAC;AAAE,UAAGH,IAAE;AAAC,cAAME,KAAEF,GAAE,CAAC,GAAEI,KAAEJ,GAAE,CAAC;AAAE,YAAIM,MAAGD,KAAEL,GAAE,CAAC,MAAI,OAAKK,GAAE,QAAQ,GAAG,KAAG,SAAOA,KAAEA,GAAE,QAAQ,OAAM,EAAE,KAAGA,KAAE,MAAI,QAAMA,GAAE,CAAC,IAAEA,KAAE,MAAIA,KAAE,QAAMA,GAAEA,GAAE,SAAO,CAAC,MAAIA,KAAEA,GAAE,OAAO,GAAEA,GAAE,SAAO,CAAC,IAAGA,MAAGA;AAAE,cAAME,KAAEP,GAAE,CAAC,KAAGA,GAAE,CAAC;AAAE,YAAG,CAACC,GAAE,gBAAcG,GAAE,SAAO,KAAGF,MAAG,QAAMC,GAAE,CAAC,GAAE,OAAOJ;AAAE,YAAG,CAACE,GAAE,gBAAcG,GAAE,SAAO,KAAG,CAACF,MAAG,QAAMC,GAAE,CAAC,GAAE,OAAOJ;AAAE;AAAC,gBAAMC,KAAE,OAAOG,EAAC,GAAEE,KAAE,KAAGL;AAAE,iBAAM,OAAKK,GAAE,OAAO,MAAM,KAAGE,KAAEN,GAAE,YAAUD,KAAED,KAAE,OAAKI,GAAE,QAAQ,GAAG,IAAE,QAAME,MAAG,OAAKC,MAAGD,OAAIC,MAAGJ,MAAGG,OAAI,MAAIC,KAAEN,KAAED,KAAEK,KAAEE,OAAID,MAAGH,KAAEI,OAAID,KAAEL,KAAED,KAAEI,OAAIE,MAAGF,OAAID,KAAEG,KAAEL,KAAED;AAAA,QAAC;AAAA,MAAC;AAAC,aAAOA;AAAA,IAAC;AAAC,QAAIM;AAAA,EAAC;AAAC,GAAE,KAAI,CAACN,IAAEC,IAAEE,OAAI;AAAC,MAAIE,KAAEF,GAAE,GAAG,GAAED,KAAEC,GAAE,GAAG,GAAEC,KAAE,8EAA6EE,KAAE,aAAYC,KAAE,iCAAgCC,KAAE,SAAQC,KAAE,oDAAmDC,KAAE;AAAa,WAASM,GAAEhB,IAAE;AAAC,YAAOA,MAAG,IAAI,UAAS,CAAE,QAAQI,IAAE,EAAE;AAAA,EAAC;AAAC,MAAIe,KAAE,CAAC,CAAC,KAAI,MAAM,GAAE,CAAC,KAAI,OAAO,GAAE,SAASnB,IAAEC,IAAE;AAAC,WAAOY,GAAEZ,GAAE,QAAQ,IAAED,GAAE,QAAQ,OAAM,GAAG,IAAEA;AAAA,EAAC,GAAE,CAAC,KAAI,UAAU,GAAE,CAAC,KAAI,QAAO,CAAC,GAAE,CAAC,KAAI,QAAO,QAAO,GAAE,CAAC,GAAE,CAAC,WAAU,QAAO,QAAO,CAAC,GAAE,CAAC,KAAI,YAAW,QAAO,GAAE,CAAC,CAAC,GAAEoB,KAAE,EAAC,MAAK,GAAE,OAAM,GAAC;AAAE,WAAST,GAAEX,IAAE;AAAC,QAAIC,IAAEE,MAAG,eAAa,OAAO,SAAO,SAAO,eAAa,OAAO,SAAO,SAAO,eAAa,OAAO,OAAK,OAAK,EAAC,EAAG,YAAU,EAAC,EAAEE,KAAE,EAAC,EAAEH,KAAE,QAAOF,KAAEA,MAAGG;AAAG,QAAG,YAAUH,GAAE,UAASK,KAAE,IAAIS,GAAE,SAASd,GAAE,QAAQ,GAAE,EAAE;AAAA,aAAU,aAAWE,IAAE,KAAID,MAAKI,KAAE,IAAIS,GAAEd,IAAE,EAAE,GAAEoB,IAAE,OAAOf,GAAEJ,EAAC;AAAA,aAAU,aAAWC,IAAE;AAAC,WAAID,MAAKD,IAAEC,MAAKmB,OAAIf,GAAEJ,EAAC,IAAED,GAAEC,EAAC;AAAG,iBAASI,GAAE,YAAUA,GAAE,UAAQE,GAAE,KAAKP,GAAE,IAAI;AAAA,IAAE;AAAC,WAAOK;AAAA,EAAC;AAAC,WAASQ,GAAEb,IAAE;AAAC,WAAM,YAAUA,MAAG,WAASA,MAAG,YAAUA,MAAG,aAAWA,MAAG,UAAQA,MAAG,WAASA;AAAA,EAAC;AAAC,WAASY,GAAEZ,IAAEC,IAAE;AAAC,IAAAD,MAAGA,KAAEgB,GAAEhB,EAAC,GAAG,QAAQM,IAAE,EAAE,GAAEL,KAAEA,MAAG,EAAC;AAAE,QAAIE,IAAEE,KAAEI,GAAE,KAAKT,EAAC,GAAEE,KAAEG,GAAE,CAAC,IAAEA,GAAE,CAAC,EAAE,aAAY,GAAE,IAAGD,KAAE,CAAC,CAACC,GAAE,CAAC,GAAEE,KAAE,CAAC,CAACF,GAAE,CAAC,GAAEG,KAAE;AAAE,WAAOJ,KAAEG,MAAGJ,KAAEE,GAAE,CAAC,IAAEA,GAAE,CAAC,IAAEA,GAAE,CAAC,GAAEG,KAAEH,GAAE,CAAC,EAAE,SAAOA,GAAE,CAAC,EAAE,WAASF,KAAEE,GAAE,CAAC,IAAEA,GAAE,CAAC,GAAEG,KAAEH,GAAE,CAAC,EAAE,UAAQE,MAAGJ,KAAEE,GAAE,CAAC,IAAEA,GAAE,CAAC,GAAEG,KAAEH,GAAE,CAAC,EAAE,UAAQF,KAAEE,GAAE,CAAC,GAAE,YAAUH,KAAEM,MAAG,MAAIL,KAAEA,GAAE,MAAM,CAAC,KAAGU,GAAEX,EAAC,IAAEC,KAAEE,GAAE,CAAC,IAAEH,KAAEE,OAAID,KAAEA,GAAE,MAAM,CAAC,KAAGK,MAAG,KAAGK,GAAEZ,GAAE,QAAQ,MAAIE,KAAEE,GAAE,CAAC,IAAG,EAAC,UAASH,IAAE,SAAQE,MAAGS,GAAEX,EAAC,GAAE,cAAaM,IAAE,MAAKL,IAAC;AAAA,EAAC;AAAC,WAASW,GAAEd,IAAEC,IAAEE,IAAE;AAAC,QAAGH,MAAGA,KAAEgB,GAAEhB,EAAC,GAAG,QAAQM,IAAE,EAAE,GAAE,EAAE,gBAAgBQ,KAAG,OAAO,IAAIA,GAAEd,IAAEC,IAAEE,EAAC;AAAE,QAAIC,IAAEG,IAAEC,IAAEC,IAAEW,IAAEL,IAAEE,KAAEE,GAAE,SAAQD,KAAE,OAAOjB,IAAEoB,KAAE,MAAKC,KAAE;AAAE,SAAI,aAAWJ,MAAG,aAAWA,OAAIf,KAAEF,IAAEA,KAAE,OAAME,MAAG,cAAY,OAAOA,OAAIA,KAAED,GAAE,QAAOE,KAAE,EAAEG,KAAEK,GAAEZ,MAAG,IAAGC,KAAEU,GAAEV,EAAC,CAAC,GAAG,YAAU,CAACM,GAAE,SAAQc,GAAE,UAAQd,GAAE,WAASH,MAAGH,GAAE,SAAQoB,GAAE,WAASd,GAAE,YAAUN,GAAE,YAAU,IAAGD,KAAEO,GAAE,OAAM,YAAUA,GAAE,aAAW,MAAIA,GAAE,gBAAcG,GAAE,KAAKV,EAAC,MAAI,CAACO,GAAE,YAAUA,GAAE,YAAUA,GAAE,eAAa,KAAG,CAACM,GAAEQ,GAAE,QAAQ,QAAMJ,GAAE,CAAC,IAAE,CAAC,QAAO,UAAU,IAAGK,KAAEL,GAAE,QAAOK,MAAI,cAAY,QAAOb,KAAEQ,GAAEK,EAAC,MAAId,KAAEC,GAAE,CAAC,GAAEM,KAAEN,GAAE,CAAC,GAAED,MAAGA,KAAEa,GAAEN,EAAC,IAAEf,KAAE,YAAU,OAAOQ,KAAE,EAAEY,KAAE,QAAMZ,KAAER,GAAE,YAAYQ,EAAC,IAAER,GAAE,QAAQQ,EAAC,OAAK,YAAU,OAAOC,GAAE,CAAC,KAAGY,GAAEN,EAAC,IAAEf,GAAE,MAAM,GAAEoB,EAAC,GAAEpB,KAAEA,GAAE,MAAMoB,KAAEX,GAAE,CAAC,CAAC,MAAIY,GAAEN,EAAC,IAAEf,GAAE,MAAMoB,EAAC,GAAEpB,KAAEA,GAAE,MAAM,GAAEoB,EAAC,OAAKA,KAAEZ,GAAE,KAAKR,EAAC,OAAKqB,GAAEN,EAAC,IAAEK,GAAE,CAAC,GAAEpB,KAAEA,GAAE,MAAM,GAAEoB,GAAE,KAAK,IAAGC,GAAEN,EAAC,IAAEM,GAAEN,EAAC,KAAGX,MAAGK,GAAE,CAAC,KAAGR,GAAEc,EAAC,KAAG,IAAGN,GAAE,CAAC,MAAIY,GAAEN,EAAC,IAAEM,GAAEN,EAAC,EAAE,aAAY,KAAIf,KAAES,GAAET,IAAEqB,EAAC;AAAE,IAAAlB,OAAIkB,GAAE,QAAMlB,GAAEkB,GAAE,KAAK,IAAGjB,MAAGH,GAAE,WAAS,QAAMoB,GAAE,SAAS,OAAO,CAAC,MAAI,OAAKA,GAAE,YAAU,OAAKpB,GAAE,cAAYoB,GAAE,YAAS,SAASrB,IAAEC,IAAE;AAAC,UAAG,OAAKD,IAAE,OAAOC;AAAE,eAAQE,MAAGF,MAAG,KAAK,MAAM,GAAG,EAAE,MAAM,GAAE,EAAE,EAAE,OAAOD,GAAE,MAAM,GAAG,CAAC,GAAEK,KAAEF,GAAE,QAAOD,KAAEC,GAAEE,KAAE,CAAC,GAAED,KAAE,OAAGE,KAAE,GAAED,QAAK,QAAMF,GAAEE,EAAC,IAAEF,GAAE,OAAOE,IAAE,CAAC,IAAE,SAAOF,GAAEE,EAAC,KAAGF,GAAE,OAAOE,IAAE,CAAC,GAAEC,QAAKA,OAAI,MAAID,OAAID,KAAE,OAAID,GAAE,OAAOE,IAAE,CAAC,GAAEC;AAAK,aAAOF,MAAGD,GAAE,QAAQ,EAAE,GAAE,QAAMD,MAAG,SAAOA,MAAGC,GAAE,KAAK,EAAE,GAAEA,GAAE,KAAK,GAAG;AAAA,IAAC,GAAEkB,GAAE,UAASpB,GAAE,QAAQ,IAAG,QAAMoB,GAAE,SAAS,OAAO,CAAC,KAAGR,GAAEQ,GAAE,QAAQ,MAAIA,GAAE,WAAS,MAAIA,GAAE,WAAUhB,GAAEgB,GAAE,MAAKA,GAAE,QAAQ,MAAIA,GAAE,OAAKA,GAAE,UAASA,GAAE,OAAK,KAAIA,GAAE,WAASA,GAAE,WAAS,IAAGA,GAAE,SAAO,EAAED,KAAEC,GAAE,KAAK,QAAQ,GAAG,MAAIA,GAAE,WAASA,GAAE,KAAK,MAAM,GAAED,EAAC,GAAEC,GAAE,WAAS,mBAAmB,mBAAmBA,GAAE,QAAQ,CAAC,GAAEA,GAAE,WAASA,GAAE,KAAK,MAAMD,KAAE,CAAC,GAAEC,GAAE,WAAS,mBAAmB,mBAAmBA,GAAE,QAAQ,CAAC,KAAGA,GAAE,WAAS,mBAAmB,mBAAmBA,GAAE,IAAI,CAAC,GAAEA,GAAE,OAAKA,GAAE,WAASA,GAAE,WAAS,MAAIA,GAAE,WAASA,GAAE,WAAUA,GAAE,SAAO,YAAUA,GAAE,YAAUR,GAAEQ,GAAE,QAAQ,KAAGA,GAAE,OAAKA,GAAE,WAAS,OAAKA,GAAE,OAAK,QAAOA,GAAE,OAAKA,GAAE,UAAS;AAAA,EAAC;AAAC,EAAAP,GAAE,YAAU,EAAC,KAAI,SAASd,IAAEC,IAAEE,IAAE;AAAC,QAAIC,KAAE;AAAK,YAAOJ;AAAE,MAAC,KAAI;AAAQ,oBAAU,OAAOC,MAAGA,GAAE,WAASA,MAAGE,MAAGD,GAAE,OAAOD,EAAC,IAAGG,GAAEJ,EAAC,IAAEC;AAAE;AAAA,MAAM,KAAI;AAAO,QAAAG,GAAEJ,EAAC,IAAEC,IAAEI,GAAEJ,IAAEG,GAAE,QAAQ,IAAEH,OAAIG,GAAE,OAAKA,GAAE,WAAS,MAAIH,OAAIG,GAAE,OAAKA,GAAE,UAASA,GAAEJ,EAAC,IAAE;AAAI;AAAA,MAAM,KAAI;AAAW,QAAAI,GAAEJ,EAAC,IAAEC,IAAEG,GAAE,SAAOH,MAAG,MAAIG,GAAE,OAAMA,GAAE,OAAKH;AAAE;AAAA,MAAM,KAAI;AAAO,QAAAG,GAAEJ,EAAC,IAAEC,IAAEO,GAAE,KAAKP,EAAC,KAAGA,KAAEA,GAAE,MAAM,GAAG,GAAEG,GAAE,OAAKH,GAAE,KAAI,EAAEG,GAAE,WAASH,GAAE,KAAK,GAAG,MAAIG,GAAE,WAASH,IAAEG,GAAE,OAAK;AAAI;AAAA,MAAM,KAAI;AAAW,QAAAA,GAAE,WAASH,GAAE,aAAY,EAAEG,GAAE,UAAQ,CAACD;AAAE;AAAA,MAAM,KAAI;AAAA,MAAW,KAAI;AAAO,YAAGF,IAAE;AAAC,cAAIK,KAAE,eAAaN,KAAE,MAAI;AAAI,UAAAI,GAAEJ,EAAC,IAAEC,GAAE,OAAO,CAAC,MAAIK,KAAEA,KAAEL,KAAEA;AAAA,QAAC,OAAMG,GAAEJ,EAAC,IAAEC;AAAE;AAAA,MAAM,KAAI;AAAA,MAAW,KAAI;AAAW,QAAAG,GAAEJ,EAAC,IAAE,mBAAmBC,EAAC;AAAE;AAAA,MAAM,KAAI;AAAO,YAAIM,KAAEN,GAAE,QAAQ,GAAG;AAAE,SAACM,MAAGH,GAAE,WAASH,GAAE,MAAM,GAAEM,EAAC,GAAEH,GAAE,WAAS,mBAAmB,mBAAmBA,GAAE,QAAQ,CAAC,GAAEA,GAAE,WAASH,GAAE,MAAMM,KAAE,CAAC,GAAEH,GAAE,WAAS,mBAAmB,mBAAmBA,GAAE,QAAQ,CAAC,KAAGA,GAAE,WAAS,mBAAmB,mBAAmBH,EAAC,CAAC;AAAA;AAAE,aAAQQ,KAAE,GAAEA,KAAEU,GAAE,QAAOV,MAAI;AAAC,UAAIC,KAAES,GAAEV,EAAC;AAAE,MAAAC,GAAE,CAAC,MAAIN,GAAEM,GAAE,CAAC,CAAC,IAAEN,GAAEM,GAAE,CAAC,CAAC,EAAE,aAAY;AAAA,IAAE;AAAC,WAAON,GAAE,OAAKA,GAAE,WAASA,GAAE,WAAS,MAAIA,GAAE,WAASA,GAAE,UAASA,GAAE,SAAO,YAAUA,GAAE,YAAUS,GAAET,GAAE,QAAQ,KAAGA,GAAE,OAAKA,GAAE,WAAS,OAAKA,GAAE,OAAK,QAAOA,GAAE,OAAKA,GAAE,UAAS,EAAEA;AAAA,EAAC,GAAE,UAAS,SAASJ,IAAE;AAAC,IAAAA,MAAG,cAAY,OAAOA,OAAIA,KAAEE,GAAE;AAAW,QAAID,IAAEE,KAAE,MAAKE,KAAEF,GAAE,MAAKC,KAAED,GAAE;AAAS,IAAAC,MAAG,QAAMA,GAAE,OAAOA,GAAE,SAAO,CAAC,MAAIA,MAAG;AAAK,QAAIE,KAAEF,MAAGD,GAAE,YAAUA,GAAE,WAASU,GAAEV,GAAE,QAAQ,IAAE,OAAK;AAAI,WAAOA,GAAE,YAAUG,MAAGH,GAAE,UAASA,GAAE,aAAWG,MAAG,MAAIH,GAAE,WAAUG,MAAG,OAAKH,GAAE,YAAUG,MAAG,MAAIH,GAAE,UAASG,MAAG,OAAK,YAAUH,GAAE,YAAUU,GAAEV,GAAE,QAAQ,KAAG,CAACE,MAAG,QAAMF,GAAE,aAAWG,MAAG,OAAM,QAAMD,GAAEA,GAAE,SAAO,CAAC,KAAGG,GAAE,KAAKL,GAAE,QAAQ,KAAG,CAACA,GAAE,UAAQE,MAAG,MAAKC,MAAGD,KAAEF,GAAE,WAAUF,KAAE,YAAU,OAAOE,GAAE,QAAMH,GAAEG,GAAE,KAAK,IAAEA,GAAE,WAASG,MAAG,QAAML,GAAE,OAAO,CAAC,IAAE,MAAIA,KAAEA,KAAGE,GAAE,SAAOG,MAAGH,GAAE,OAAMG;AAAA,EAAC,GAAC,EAAEQ,GAAE,kBAAgBF,IAAEE,GAAE,WAASH,IAAEG,GAAE,WAASE,IAAEF,GAAE,KAAGZ,IAAEF,GAAE,UAAQc;AAAC,GAAE,KAAI,MAAI;AAAC,GAAE,KAAI,MAAI;AAAC,GAAE,KAAI,MAAI;AAAC,GAAE,KAAI,MAAI;AAAC,GAAE,KAAI,MAAI;AAAC,GAAC,EAAE,IAAE,EAAC;AAAE,SAAS,EAAET,IAAE;AAAC,MAAIH,KAAE,EAAEG,EAAC;AAAE,MAAG,WAASH,IAAE,OAAOA,GAAE;AAAQ,MAAIE,KAAE,EAAEC,EAAC,IAAE,EAAC,IAAGA,IAAE,QAAO,OAAG,SAAQ,EAAC,EAAC;AAAE,SAAO,EAAEA,EAAC,EAAE,KAAKD,GAAE,SAAQA,IAAEA,GAAE,SAAQ,CAAC,GAAEA,GAAE,SAAO,MAAGA,GAAE;AAAO;AAAC,EAAE,IAAE,CAAAJ,OAAG;AAAC,MAAIC,KAAED,MAAGA,GAAE,aAAW,MAAIA,GAAE,UAAQ,MAAIA;AAAE,SAAO,EAAE,EAAEC,IAAE,EAAC,GAAEA,IAAE,GAAEA;AAAC,GAAE,EAAE,IAAE,CAACD,IAAEC,OAAI;AAAC,WAAQI,MAAKJ,IAAE,EAAE,EAAEA,IAAEI,EAAC,KAAG,CAAC,EAAE,EAAEL,IAAEK,EAAC,KAAG,OAAO,eAAeL,IAAEK,IAAE,EAAC,YAAW,MAAG,KAAIJ,GAAEI,EAAC,GAAE;AAAC,GAAE,EAAE,IAAE,CAACL,IAAEC,OAAI,OAAO,UAAU,eAAe,KAAKD,IAAEC,EAAC,GAAE,EAAE,MAAI,CAAAD,QAAIA,GAAE,QAAM,EAAC,EAAEA,GAAE,aAAWA,GAAE,WAAS,EAAC,GAAGA;AAAG,IAAI,IAAE,EAAC;AAAE,EAAE,EAAE,GAAE,EAAC,IAAG,MAAI+B,KAAE,IAAG,MAAI,GAAE,IAAG,MAAI,GAAE,IAAG,MAAI,GAAE,IAAG,MAAI,IAAG,IAAG,MAAI,GAAE,IAAG,MAAI,IAAG,IAAG,MAAI,IAAG,IAAG,MAAI,IAAG,IAAG,MAAI,IAAG,IAAG,MAAI,IAAG;AAAE,IAAI,IAAE,EAAE,GAAG,GAAE,IAAE,EAAE,EAAE,CAAC;AAAE,SAAS,EAAE/B,IAAE;AAAC,MAAG,CAAC,EAAEA,EAAC,GAAE,MAAM,IAAI,MAAM,4BAA4B;AAAC;AAAC,SAAS,EAAEA,IAAE;AAAC,SAAM,CAAC,CAACA,MAAG,YAAU,OAAOA,MAAG,sBAAoBC,KAAED,IAAE,OAAO,UAAU,SAAS,KAAKC,EAAC,MAAID,cAAa;AAAM,MAAIC;AAAC;AAAC,MAAM,UAAU,MAAK;AAAA,EAAC,YAAYD,IAAEC,IAAE;AAAC,UAAME,KAAE,CAAC,GAAG,SAAS,GAAE,EAAC,SAAQE,IAAE,cAAaH,IAAC,IAAE,SAASF,IAAE;AAAC,UAAIC,IAAEE,KAAE;AAAG,UAAG,MAAIH,GAAE,QAAOC,KAAE,EAAC;AAAA,eAAU,EAAED,GAAE,CAAC,CAAC,GAAEC,KAAE,EAAC,OAAMD,GAAE,CAAC,GAAC,EAAEG,KAAEH,GAAE,MAAM,CAAC,EAAE,KAAK,GAAG,KAAG;AAAA,eAAWA,GAAE,CAAC,KAAG,YAAU,OAAOA,GAAE,CAAC,GAAEC,KAAE,OAAO,OAAO,EAAC,EAAED,GAAE,CAAC,CAAC,GAAEG,KAAEH,GAAE,MAAM,CAAC,EAAE,KAAK,GAAG,KAAG;AAAA,WAAO;AAAC,YAAG,YAAU,OAAOA,GAAE,CAAC,GAAE,MAAM,IAAI,MAAM,oCAAoC;AAAE,QAAAC,KAAE,EAAC,EAAEE,KAAEA,KAAEH,GAAE,KAAK,GAAG,KAAG;AAAA,MAAE;AAAC,aAAM,EAAC,SAAQC,IAAE,cAAaE,IAAC;AAAA,IAAC,GAAEA,EAAC;AAAE,QAAIC,KAAEF;AAAE,QAAGG,GAAE,UAAQD,KAAE,GAAGA,EAAC,KAAKC,GAAE,MAAM,OAAO,KAAI,MAAMD,EAAC,GAAE,KAAK,UAAQA,IAAEC,GAAE,QAAM,YAAU,OAAOA,GAAE,OAAK,KAAK,OAAKA,GAAE,OAAK,KAAK,OAAK,UAASA,GAAE,SAAO,OAAO,eAAe,MAAK,UAAS,EAAC,OAAMA,GAAE,OAAM,GAAE,OAAO,eAAe,MAAK,SAAQ,EAAC,OAAM,EAAC,EAAE,GAAEA,GAAE,QAAM,YAAU,OAAOA,GAAE,QAAM,OAAO,OAAO,KAAK,OAAMA,GAAE,IAAI,GAAE,MAAM,mBAAkB;AAAC,YAAML,KAAEK,GAAE,kBAAgB,KAAK;AAAY,YAAM,kBAAkB,MAAKL,EAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,OAAO,MAAMA,IAAE;AAAC,WAAO,EAAEA,EAAC,GAAEA,GAAE,UAAQ,EAAEA,GAAE,MAAM,IAAEA,GAAE,SAAO;AAAA,EAAI;AAAA,EAAC,OAAO,UAAUA,IAAE;AAAC,MAAEA,EAAC;AAAE,UAAMC,KAAE,EAAE,MAAMD,EAAC;AAAE,WAAOC,KAAE,GAAGD,GAAE,KAAK;AAAA,aAAgB,EAAE,UAAUC,EAAC,CAAC,KAAGD,GAAE,SAAO;AAAA,EAAE;AAAA,EAAC,OAAO,KAAKA,IAAE;AAAC,MAAEA,EAAC;AAAE,UAAMC,KAAE,EAAC,EAAEE,KAAE,EAAE,MAAMH,EAAC;AAAE,WAAOG,MAAG,OAAO,OAAOF,IAAE,EAAE,KAAKE,EAAC,CAAC,GAAEH,GAAE,SAAO,OAAO,OAAOC,IAAED,GAAE,KAAK,GAAEC;AAAA,EAAC;AAAA,EAAC,WAAU;AAAC,QAAID,KAAE,KAAK,QAAM,KAAK,YAAY,QAAM,KAAK,YAAY,UAAU;AAAK,WAAO,KAAK,YAAUA,KAAE,GAAGA,EAAC,KAAK,KAAK,OAAO,KAAIA;AAAA,EAAC;AAAC;AAAC,IAAI,IAAE,EAAE,EAAE,GAAE,IAAE,EAAE,EAAE,CAAC;AAAE,MAAM,IAAE,4BAA2B,IAAE;AAA6B,SAAS,EAAEA,IAAE;AAAC,MAAG;AAAC,UAAMC,KAAED,GAAE,QAAQ,OAAM,CAAC,EAAE,QAAQ,SAAQ,CAAC;AAAE,WAAO,mBAAmBC,EAAC,EAAE,MAAM,CAAC,EAAE,KAAK,MAAM,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAAC,SAAOD,IAAE;AAAC,UAAM,IAAI,EAAEA,IAAE,sBAAsB;AAAA,EAAC;AAAC;AAAC,SAAS,EAAEA,IAAE;AAAC,SAAOA,GAAE,WAAW,GAAG,IAAEA,KAAE,MAAIA;AAAC;AAAC,SAAS,EAAEA,IAAE;AAAC,MAAIC,KAAED;AAAE,SAAM,QAAMC,GAAE,CAAC,MAAIA,KAAE,MAAIA,KAAG,SAAS,KAAKA,EAAC,MAAIA,KAAEA,GAAE,OAAO,GAAEA,GAAE,SAAO,CAAC,IAAGA;AAAC;AAAC,SAAS,EAAED,IAAE;AAAC,MAAIC,KAAE,KAAI,GAAE,EAAGD,EAAC,EAAE;AAAS,SAAOC,GAAE,UAAQ,MAAIA,KAAE,MAAK,EAAEA,EAAC;AAAC;AAAC,SAAS,IAAG;AAAC,WAAQD,KAAE,UAAU,QAAOC,KAAE,IAAI,MAAMD,EAAC,GAAEG,KAAE,GAAEA,KAAEH,IAAEG,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,UAAO,WAAU;AAAC,YAAO,SAASH,IAAE;AAAC,UAAIC,KAAE,EAAC;AAAE,UAAG,MAAID,GAAE,QAAO,OAAM;AAAG,UAAG,YAAU,OAAOA,GAAE,CAAC,GAAE,MAAM,IAAI,UAAU,oCAAkCA,GAAE,CAAC,CAAC;AAAE,UAAGA,GAAE,CAAC,EAAE,MAAM,cAAc,KAAGA,GAAE,SAAO,GAAE;AAAC,YAAIG,KAAEH,GAAE,OAAM;AAAE,QAAAA,GAAE,CAAC,IAAEG,KAAEH,GAAE,CAAC;AAAA,MAAC;AAAC,MAAAA,GAAE,CAAC,EAAE,MAAM,cAAc,IAAEA,GAAE,CAAC,IAAEA,GAAE,CAAC,EAAE,QAAQ,iBAAgB,QAAQ,IAAEA,GAAE,CAAC,IAAEA,GAAE,CAAC,EAAE,QAAQ,iBAAgB,OAAO;AAAE,eAAQK,KAAE,GAAEA,KAAEL,GAAE,QAAOK,MAAI;AAAC,YAAIH,KAAEF,GAAEK,EAAC;AAAE,YAAG,YAAU,OAAOH,UAAQ,IAAI,UAAU,oCAAkCA,EAAC;AAAE,eAAKA,OAAIG,KAAE,MAAIH,KAAEA,GAAE,QAAQ,UAAS,EAAE,IAAGA,KAAEG,KAAEL,GAAE,SAAO,IAAEE,GAAE,QAAQ,UAAS,EAAE,IAAEA,GAAE,QAAQ,UAAS,GAAG,GAAED,GAAE,KAAKC,EAAC;AAAA,MAAE;AAAC,UAAIE,KAAEH,GAAE,KAAK,GAAG,GAAEK,MAAGF,KAAEA,GAAE,QAAQ,mBAAkB,IAAI,GAAG,MAAM,GAAG;AAAE,aAAOE,GAAE,OAAM,IAAGA,GAAE,SAAO,IAAE,MAAI,MAAIA,GAAE,KAAK,GAAG;AAAA,IAAC,GAAE,YAAU,OAAO,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC,CAAE,MAAM,KAAK,SAAS,CAAC;AAAA,EAAC,GAAEL,GAAE,QAAQ,CAACD,IAAEC,IAAEE,SAAM,MAAIA,MAAG,QAAMF,MAAG,QAAMA,MAAG,QAAMD,GAAEA,GAAE,SAAO,CAAC,MAAIA,GAAE,KAAKC,EAAC,GAAED,MAAI,EAAE,CAAC;AAAC;AAAC,IAAI,IAAE,EAAE,GAAG,GAAE,IAAE,EAAE,EAAE,CAAC;AAAE,MAAM,IAAE;AAAmB,SAAS,EAAEA,IAAEC,IAAE;AAAC,QAAME,KAAEH,GAAE,IAAI,QAAQ,MAAK,EAAE,GAAEK,KAAE,MAAIF,GAAE,QAAQ,GAAG,IAAE,MAAIA,GAAE,MAAMA,GAAE,QAAQ,GAAG,CAAC,GAAED,KAAEF,GAAE,SAAOA,GAAE,OAAO,gBAAc,OAAMI,KAAE,CAAC,CAAC,uBAAuB,KAAKH,GAAE,GAAG,KAAG,QAAOK,KAAE,WAAWL,GAAE,EAAE,GAAG,MAAM,EAAE,GAAEM,MAAE,SAASP,IAAEC,IAAEE,IAAEE,IAAEH,IAAEE,IAAEE,IAAE;AAAC,UAAMC,KAAED,MAAG,GAAE,CAAE,GAAGL,EAAC,IAAIE,EAAC,IAAIE,EAAC,EAAE;AAAE,WAAOL,MAAG,eAAaA,GAAE,gBAAc,GAAE,CAAE,GAAGO,EAAC,IAAIL,EAAC,IAAIE,EAAC,EAAE,IAAEG;AAAA,EAAC,GAAEN,GAAE,WAAUA,GAAE,UAASA,GAAE,OAAMA,GAAE,UAASA,GAAE,OAAMA,GAAE,QAAOA,GAAE,GAAG,GAAEO,KAAE,GAAE,CAAE,GAAGN,EAAC,IAAIG,EAAC,EAAE,GAAEI,KAAEL,KAAE,IAAI,GAAGG,EAAC,IAAIN,GAAE,KAAK,IAAIK,EAAC,IAAIL,GAAE,MAAM,IAAIG,EAAC,IAAII,EAAC,EAAE,IAAE,GAAE,CAAE,GAAGD,EAAC,IAAIN,GAAE,KAAK,IAAIO,EAAC,EAAE,GAAEE,KAAE,EAAC,UAAST,GAAE,UAAS,OAAMA,GAAE,OAAM,OAAMA,GAAE,OAAM,KAAII,IAAE,KAAID,IAAE,UAASK,IAAE,IAAGH,IAAE,QAAOL,GAAE,QAAO,WAAUA,GAAE,WAAU,QAAOA,GAAE,QAAM,EAAEe,KAAE,EAAC;AAAE,aAAUhB,MAAKU,IAAEA,GAAEV,EAAC,MAAI,UAAQA,MAAG,SAAOA,MAAG,gBAAcA,KAAEgB,GAAE,KAAK,GAAGhB,EAAC,IAAIU,GAAEV,EAAC,CAAC,EAAE,IAAEgB,GAAE,KAAK,GAAGhB,EAAC,KAAKU,GAAEV,EAAC,CAAC,GAAG;AAAG,SAAM,UAAUgB,GAAE,KAAK,IAAI,CAAC;AAAE;AAAC,SAAS,EAAEhB,IAAE;AAAC,SAAM,cAAYA,GAAE,WAASA,GAAE,QAAQ,IAAI,kBAAkB,KAAG,IAAI,MAAM,IAAI,EAAE,CAAC,EAAE,aAAY;AAAC;AAAC,IAAI,IAAE,EAAE,GAAG,GAAE,IAAE,EAAE,EAAE,CAAC;AAAE,SAAS,EAAEA,IAAE;AAAC,SAAO,GAAE,CAAE,OAAOA,EAAC;AAAC;AAAC,SAAS0B,GAAA,CAAE1B,IAAEC,IAAE;AAAC,MAAIE;AAAE,SAAM,SAASA,KAAE,GAAGH,EAAC,IAAIC,EAAC,IAAG,GAAE,CAAE,OAAOE,EAAC,CAAC;AAAE;AAAC,MAAMwB,GAAA,GAAE,eAAa,OAAO,qBAAmB,gBAAgB,oBAAkB,OAAK,eAAa,OAAO,SAAO,SAAO,YAAW,IAAEA,GAAA,CAAE,MAAM,KAAKA,GAAC,GAAE,KAAaA,GAAA,CAAE,UAAS,IAAEA,GAAA,CAAE;AAAS,IAAII,GAAA,IAAE,SAAS/B,IAAE;AAAC,SAAOA,GAAE,OAAK,QAAOA,GAAE,SAAO,UAASA,GAAE,OAAK,QAAOA,GAAE,WAAS,YAAWA,GAAE,QAAM,SAAQA;AAAC,GAAE,EAAE,GAAE,KAAE,SAASA,IAAE;AAAC,SAAOA,GAAE,mBAAiB,uBAAsBA,GAAE,kBAAgB,qBAAoBA,GAAE,sBAAoB,yBAAwBA,GAAE,0BAAwB,yBAAwBA,GAAE,qBAAmB,wBAAuBA,GAAE,eAAa,iBAAgBA;AAAC,GAAE,EAAE;AAAE,SAAS,EAAEA,IAAEC,IAAEE,IAAEE,IAAEH,IAAE;AAAC,UAAOF,GAAE;AAAS,IAAC,KAAK+B,GAAA,CAAE;AAAK,MAAA9B,MAAGE,OAAIH,GAAE,QAAQ,gBAAc0B,GAAA,CAAEzB,IAAEE,EAAC;AAAG;AAAA,IAAM,KAAK4B,GAAA,CAAE;AAAO,MAAA/B,GAAE,yBAAO,UAASA,IAAEC,IAAEE,IAAE;AAAC,eAAM,EAAC,UAASH,IAAE,UAASC,IAAE,KAAIE,IAAE,IAAG,GAAE,WAAU,OAAM,eAAc,OAAE;AAAA,MAAC,GAAEF,IAAEE,IAAED,EAAC;AAAE;AAAA,IAAM,KAAK6B,GAAA,CAAE;AAAK;AAAA,IAAM,KAAKA,GAAA,CAAE;AAAS,MAAA/B,GAAE,QAAQ,gBAAc0B,GAAA,CAAEzB,IAAEE,EAAC;AAAE;AAAA,IAAM,KAAK4B,GAAA,CAAE;AAAM,MAAA/B,GAAE,QAAQ,gBAAc,IAAII,KAAEC,IAAG,UAAU,IAAID,GAAE,YAAY;AAAG;AAAA,IAAM;AAAQ,YAAM,IAAI,EAAE,EAAC,MAAK,EAAC,MAAK,EAAE,iBAAe,EAAC,EAAE,sBAAsBJ,GAAE,QAAQ,EAAE;AAAA;AAAE,MAAII;AAAC;AAAC,EAAE,GAAG,GAAE,EAAE,GAAG;AAAE,MAAM,IAAE,gBAAe,IAAE,MAAI;AAAC;AAAE,SAAS,EAAEJ,IAAE;AAAC,SAAM,EAAC,UAASA,IAAE,SAAQ,CAACA,EAAC,GAAE,OAAM,OAAE;AAAC;AAAC,gBAAM,EAAC;AAAA,EAAC,cAAa;AAAC,SAAK,iBAAe,EAAC,UAAS,IAAG,gBAAe,QAAM,EAAE,KAAK,WAAS;AAAA,EAAC;AAAA,EAAC,IAAI,gBAAe;AAAC,WAAO,KAAK;AAAA,EAAc;AAAA,EAAC,IAAI,iBAAgB;AAAC,WAAO,KAAK,cAAc;AAAA,EAAc;AAAA,EAAC,IAAI,eAAeA,IAAE;AAAC,SAAK,cAAc,iBAAeA;AAAA,EAAC;AAAA,EAAC,QAAQA,IAAE;AAAC,QAAIC,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,KAAG,UAAU,CAAC;AAAE,QAAG,CAACD,MAAGA,GAAE,aAAW,GAAE,MAAM,IAAI,MAAM,6EAA6E;AAAE,WAAO,OAAO,KAAKA,GAAE,cAAc,QAAQ,EAAE,SAAS,CAAAG,OAAG;AAAC,WAAK,cAAc,SAAS,eAAeA,EAAC,IAAEF,OAAI,KAAK,cAAc,SAASE,EAAC,IAAE,OAAO,OAAO,IAAGH,GAAE,cAAc,SAASG,EAAC,CAAC,KAAG,KAAK,cAAc,SAASA,EAAC,IAAE,OAAO,OAAO,EAAC,EAAEH,GAAE,cAAc,SAASG,EAAC,CAAC;AAAA,IAAC,GAAE,EAAEH,GAAE,iBAAe,KAAK,eAAc;AAAA,EAAI;AAAA,EAAC,QAAQA,IAAE;AAAC,UAAMC,KAAE,KAAK,IAAID,EAAC,KAAG;AAAE,aAAQG,KAAE,UAAU,QAAOE,KAAE,IAAI,MAAMF,KAAE,IAAEA,KAAE,IAAE,CAAC,GAAED,KAAE,GAAEA,KAAEC,IAAED,MAAIG,GAAEH,KAAE,CAAC,IAAE,UAAUA,EAAC;AAAE,WAAOD,GAAE,GAAGI,EAAC;AAAA,EAAC;AAAA,EAAC,IAAIL,IAAE;AAAC,UAAMC,KAAE,KAAK,cAAc,SAASD,EAAC;AAAE,QAAG,CAACC,IAAE,QAAO,KAAK;AAAe,MAAC,KAAI;AAAO,eAAO;AAAA,MAAK,KAAI;AAAQ,cAAM,IAAI,MAAM,oEAAoED,EAAC,EAAE;AAAA,MAAE;AAAQ,cAAM,IAAI,MAAM,8FAA8F,KAAK,cAAc,EAAE;AAAA;AAAE,YAAO,WAAU;AAAC,eAAQA,KAAE,UAAU,QAAOC,KAAE,IAAI,MAAMD,EAAC,GAAEG,KAAE,GAAEA,KAAEH,IAAEG,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,UAAG,MAAIF,GAAE,QAAO,MAAM,IAAI,MAAM,iDAAiD;AAAE,aAAO,WAAU;AAAC,iBAAQD,KAAE,UAAU,QAAOG,KAAE,IAAI,MAAMH,EAAC,GAAEK,KAAE,GAAEA,KAAEL,IAAEK,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,YAAIH,KAAEC;AAAE,cAAMC,KAAE;AAAK,eAAKH,GAAE,SAAO,KAAGC,KAAE,CAACD,GAAE,OAAM,CAAE,MAAMG,IAAEF,EAAC,CAAC;AAAE,eAAOA,GAAE,CAAC;AAAA,MAAC;AAAA,IAAC,GAAE,GAAGD,GAAE,OAAO;AAAA,EAAC;AAAA,EAAC,UAAUD,IAAE;AAAC,WAAM,CAAC,CAAC,KAAK,cAAc,SAASA,EAAC;AAAA,EAAC;AAAA,EAAC,MAAMA,IAAEC,IAAE;AAAC,QAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,UAAK,EAAC,OAAME,KAAE,OAAE,GAAEF;AAAE,QAAG,KAAK,cAAc,SAASH,EAAC,KAAG,KAAK,cAAc,SAASA,EAAC,EAAE,OAAM,MAAM,IAAI,MAAM,oBAAoBA,EAAC,iCAAiC;AAAE,QAAG,cAAY,OAAOC,IAAE,MAAM,IAAI,MAAM,oBAAoBD,EAAC,sCAAsC;AAAE,QAAGK,SAAO,cAAc,SAASL,EAAC,IAAE,KAAK,cAAc,SAASA,EAAC,EAAE,QAAQ,KAAKC,EAAC,IAAE,KAAK,cAAc,SAASD,EAAC,IAAE,EAAEC,EAAC;AAAA,aAAU,KAAK,UAAUD,EAAC,GAAE;AAAC,YAAK,EAAC,UAASG,OAAG,KAAK,cAAc,SAASH,EAAC;AAAE,WAAK,cAAc,SAASA,EAAC,IAAE,OAAO,OAAO,EAAEC,EAAC,GAAE,EAAC,UAASE,IAAE;AAAA,IAAC,OAAM,KAAK,cAAc,SAASH,EAAC,IAAE,EAAEC,EAAC;AAAE,WAAO;AAAA,EAAI;AAAA,EAAC,YAAYD,IAAEC,IAAE;AAAC,SAAK,UAAUD,EAAC,KAAG,KAAK,MAAMA,IAAEC,EAAC;AAAE,aAAQE,KAAE,UAAU,QAAOE,KAAE,IAAI,MAAMF,KAAE,IAAEA,KAAE,IAAE,CAAC,GAAED,KAAE,GAAEA,KAAEC,IAAED,MAAIG,GAAEH,KAAE,CAAC,IAAE,UAAUA,EAAC;AAAE,WAAO,KAAK,QAAQF,IAAE,GAAGK,EAAC;AAAA,EAAC;AAAA,EAAC,OAAOL,IAAE;AAAC,aAAQC,KAAE,UAAU,QAAOE,KAAE,IAAI,MAAMF,KAAE,IAAEA,KAAE,IAAE,CAAC,GAAEI,KAAE,GAAEA,KAAEJ,IAAEI,MAAIF,GAAEE,KAAE,CAAC,IAAE,UAAUA,EAAC;AAAE,WAAOF,GAAE,SAAS,CAAAF,OAAG;AAAC,WAAK,MAAMD,IAAEC,IAAE,EAAC,OAAM,MAAG;AAAA,IAAC,GAAE,EAAE;AAAA,EAAI;AAAA,EAAC,QAAQD,IAAE;AAAC,QAAG,CAAC,KAAK,UAAUA,EAAC,SAAQ,IAAI,MAAM,uDAAuDA,EAAC,EAAE;AAAE,QAAG,cAAY,OAAO,KAAK,cAAc,SAASA,EAAC,EAAE,UAAS,MAAM,IAAI,MAAM,kFAAkFA,EAAC,EAAE;AAAE,WAAO,KAAK,cAAc,SAASA,EAAC,EAAE,UAAQ,CAAC,KAAK,cAAc,SAASA,EAAC,EAAE,QAAQ,GAAE;AAAA,EAAI;AAAA,EAAC,SAASA,IAAE;AAAC,QAAG,CAAC,KAAK,cAAc,SAAS,eAAeA,EAAC,GAAE,MAAM,IAAI,MAAM,mBAAmBA,EAAC,qCAAqC;AAAE,WAAO,KAAK,cAAc,SAASA,EAAC,EAAE,QAAM,MAAG;AAAA,EAAI;AAAC;AAAC,IAAI,IAAE;AAAK,SAAS,IAAG;AAAC,SAAO,MAAI,IAAE,IAAIkC,GAAA,KAAG;AAAC;AAAC,SAAS,EAAElC,IAAE;AAAC,UAAO,SAASA,IAAE;AAAC,QAAG,YAAU,OAAOA,MAAG,SAAOA,MAAG,qBAAmB,OAAO,UAAU,SAAS,KAAKA,EAAC,GAAE,OAAM;AAAG,QAAG,SAAO,OAAO,eAAeA,EAAC,GAAE,OAAM;AAAG,QAAIC,KAAED;AAAE,WAAK,SAAO,OAAO,eAAeC,EAAC,KAAGA,KAAE,OAAO,eAAeA,EAAC;AAAE,WAAO,OAAO,eAAeD,EAAC,MAAIC;AAAA,EAAC,GAAED,EAAC,IAAE,OAAO,OAAO,EAAC,EAAEA,EAAC,IAAE,OAAO,eAAe,OAAO,OAAO,EAAC,EAAEA,EAAC,GAAE,OAAO,eAAeA,EAAC,CAAC;AAAC;AAAC,SAAS,IAAG;AAAC,WAAQA,KAAE,UAAU,QAAOC,KAAE,IAAI,MAAMD,EAAC,GAAEG,KAAE,GAAEA,KAAEH,IAAEG,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,MAAIE,KAAE,MAAKH,KAAE,CAAC,GAAGD,EAAC;AAAE,SAAKC,GAAE,SAAO,KAAG;AAAC,UAAMF,KAAEE,GAAE,OAAM;AAAE,IAAAG,KAAEA,KAAE,EAAEA,IAAEL,EAAC,IAAE,EAAEA,EAAC;AAAA,EAAC;AAAC,SAAOK;AAAC;AAAC,SAAS,EAAEL,IAAEC,IAAE;AAAC,QAAME,KAAE,EAAEH,EAAC;AAAE,SAAO,OAAO,KAAKC,EAAC,EAAE,SAAS,CAAAD,OAAG;AAAC,IAAAG,GAAE,eAAeH,EAAC,IAAE,MAAM,QAAQC,GAAED,EAAC,CAAC,IAAEG,GAAEH,EAAC,IAAE,MAAM,QAAQG,GAAEH,EAAC,CAAC,IAAE,CAAC,GAAGG,GAAEH,EAAC,GAAE,GAAGC,GAAED,EAAC,CAAC,IAAE,CAAC,GAAGC,GAAED,EAAC,CAAC,IAAE,YAAU,OAAOC,GAAED,EAAC,KAAGC,GAAED,EAAC,IAAEG,GAAEH,EAAC,IAAE,YAAU,OAAOG,GAAEH,EAAC,KAAGG,GAAEH,EAAC,IAAE,EAAEG,GAAEH,EAAC,GAAEC,GAAED,EAAC,CAAC,IAAE,EAAEC,GAAED,EAAC,CAAC,IAAEG,GAAEH,EAAC,IAAEC,GAAED,EAAC,IAAEG,GAAEH,EAAC,IAAEC,GAAED,EAAC;AAAA,EAAC,GAAE,EAAEG;AAAC;AAAC,SAAS,EAAEH,IAAE;AAAC,QAAMC,KAAE,EAAC;AAAE,aAAUE,MAAKH,GAAE,MAAK,EAAEC,GAAEE,EAAC,IAAEH,GAAE,IAAIG,EAAC;AAAE,SAAOF;AAAC;AAAC,SAAS,IAAG;AAAC,WAAQD,KAAE,UAAU,QAAOC,KAAE,IAAI,MAAMD,EAAC,GAAEG,KAAE,GAAEA,KAAEH,IAAEG,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,MAAG,MAAIF,GAAE,QAAO,OAAM,EAAC;AAAE,QAAMI,KAAE,EAAC;AAAE,SAAOJ,GAAE,QAAQ,CAACD,IAAEC,QAAK,OAAO,KAAKA,EAAC,EAAE,SAAS,CAAAE,OAAG;AAAC,UAAMD,KAAEC,GAAE,aAAY;AAAE,IAAAE,GAAE,eAAeH,EAAC,IAAEF,GAAEK,GAAEH,EAAC,CAAC,IAAED,GAAEE,EAAC,KAAGE,GAAEH,EAAC,IAAEC,IAAEH,GAAEG,EAAC,IAAEF,GAAEE,EAAC;AAAA,EAAE,GAAE,EAAEH,MAAI,EAAE;AAAC;AAAC,EAAE,GAAG;AAAE,MAAM,IAAE,cAAY,OAAO,aAAY,EAAC,UAAS,MAAG,OAAO;AAAU,SAASmC,IAAEnC,IAAE;AAAC,SAAO,MAAIA,cAAa,eAAa,2BAAyB,EAAE,KAAKA,EAAC;AAAE;AAAC,SAAS,EAAEA,IAAE;AAAC,SAAO,QAAMA,MAAG,QAAMA,GAAE,eAAa,cAAY,OAAOA,GAAE,YAAY,YAAUA,GAAE,YAAY,SAASA,EAAC;AAAC;AAAC,SAAS,EAAEA,IAAE;AAAC,SAAO,WAAU;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,QAAG;AAAC,aAAO,QAAQ,QAAQH,GAAE,MAAM,MAAKC,EAAC,CAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,aAAO,QAAQ,OAAOA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC;AAAC,SAAS,EAAEA,IAAEC,IAAEE,IAAE;AAAC,SAAOA,KAAEF,KAAEA,GAAED,EAAC,IAAEA,MAAGA,MAAGA,GAAE,SAAOA,KAAE,QAAQ,QAAQA,EAAC,IAAGC,KAAED,GAAE,KAAKC,EAAC,IAAED;AAAE;AAAC,MAAM,IAAE,GAAG,SAASA,IAAE;AAAC,QAAMC,KAAED,GAAE;AAAQ,SAAO,OAAOA,GAAE,SAAQC,GAAE,kBAAgBD,KAAE,EAAEA,IAAE,EAAC,SAAQ,EAAC,eAAc,EAAEA,IAAEC,EAAC,GAAC,EAAE,IAAG,EAAE,GAAGD,EAAC,IAAG,SAASG,IAAE;AAAC,QAAIE,KAAE;AAAG,WAAOH,KAAE,SAASF,IAAE;AAAC,aAAOK,KAAEL,KAAEG;AAAA,IAAC,IAAGC,MAAE,WAAU;AAAC,UAAG,OAAKD,GAAE,QAAO,OAAOF,GAAE,iBAAc,SAASD,IAAEC,IAAE;AAAC,YAAG,CAAC,EAAED,EAAC,GAAE,OAAM;AAAG,cAAMG,KAAE;AAA8C,mBAAO;AAAC,gBAAME,KAAEL,GAAE,WAASA,GAAE,QAAQ,IAAI,kBAAkB,KAAG,IAAGE,KAAEC,GAAE,KAAKE,EAAC;AAAE,cAAG,CAACH,IAAE;AAAM,UAAAD,GAAEC,GAAE,CAAC,CAAC,IAAEA,GAAE,CAAC,KAAGA,GAAE,CAAC;AAAA,QAAC;AAAC,eAAOD,GAAE,MAAI,GAAEA,GAAE,UAAO,WAAU;AAAC,cAAID,KAAE;AAAG,mBAAQC,KAAE,GAAEA,KAAE,IAAG,EAAEA,IAAED,KAAE,GAAGA,EAAC,GAAG,EAAE,KAAK,MAAM,KAAG,KAAK,QAAQ,CAAC,CAAC;AAAG,iBAAOA;AAAA,QAAC,IAAE,EAAE;AAAA,MAAE,GAAEG,IAAEF,EAAC,IAAE,WAAU;AAAC,YAAGA,GAAE,eAAc,OAAO,EAAE,GAAGD,KAAE,EAAEA,IAAE,EAAC,SAAQ,EAAC,eAAc,EAAEA,IAAEC,EAAC,KAAG,CAAC,IAAG,SAASD,IAAE;AAAC,iBAAO,OAAKA,GAAE,SAAOC,GAAE,gBAAc,QAAGA,GAAE,MAAKI,KAAE,MAAGL;AAAA,QAAC,GAAE;AAAA,MAAC,IAAE;AAAE,MAAAC,GAAE;AAAA,IAAI,SAAMG,GAAE,OAAKA,GAAE,KAAKF,EAAC,IAAEA,GAAEE,EAAC;AAAE,QAAIF,IAAEE;AAAA,EAAC,GAAE;AAAC,GAAE,EAAE,IAAE,GAAG,SAASJ,IAAEC,IAAE;AAAC,SAAO,EAAE,GAAGD,EAAC,IAAG,SAASG,IAAE;AAAC,WAAOA,GAAE,MAAIF,GAAE,WAAS8B,IAAE,UAAS5B,MAAG,OAAKA,GAAE,UAAQ,EAAEA,EAAC,KAAGF,GAAE,WAAS8B,GAAA,CAAE,QAAO,EAAE9B,IAAEA,GAAE,UAASA,GAAE,UAAS,QAAO,MAAM,GAAED,GAAE,UAAQC,GAAE,QAAO,EAAED,EAAC,KAAGG;AAAA,EAAC,GAAE;AAAC,GAAE,EAAEiC,GAAA,GAAE,GAAG,SAASpC,IAAEC,IAAE;AAAC,SAAOA,GAAE,aAAW8B,GAAA,CAAE,OAAK,EAAE/B,IAAEC,EAAC,IAAED,GAAE,UAAQ,EAAEA,EAAC,IAAE,GAAGA,EAAC;AAAC,GAAE;AAAE,SAAS,GAAGA,IAAEC,IAAEE,IAAE;AAAC,QAAME,KAAE,EAAEL,EAAC;AAAE,SAAOK,GAAE,UAAQ,EAAEJ,GAAE,SAAQI,GAAE,WAAS,EAAC,EAAEF,GAAE,WAAS,EAAE,GAAE,WAASA,GAAE,SAAOE,GAAE,OAAKF,GAAE,OAAMA,GAAE,WAASE,GAAE,SAAOF,GAAE,SAAQF,GAAE,cAAYI,GAAE,YAAUJ,GAAE,YAAWA,GAAE,eAAaI,GAAE,aAAWJ,GAAE,aAAYA,GAAE,WAASI,GAAE,UAAQJ,GAAE,SAAQ,aAAW,OAAOA,GAAE,oBAAkBI,GAAE,kBAAgBJ,GAAE,kBAAiBI;AAAC;AAAC,SAAS,GAAGL,IAAE;AAAC,QAAMC,KAAE,GAAE;AAAE,SAAOA,GAAE,YAAY,YAAW,CAAAD,OAAGC,GAAE,YAAY,SAAQ,GAAED,GAAE,MAAI,SAASA,IAAE;AAAC,QAAIC,KAAE,EAAC;AAAE,UAAME,KAAE,EAAC,QAAOH,GAAE,QAAM;AAAE,QAAGA,GAAE,YAAUC,KAAE,EAAEA,IAAED,GAAE,OAAO,IAAG,WAASA,GAAE,MAAK;AAAC,YAAK,CAACK,IAAEH,EAAC,KAAE,SAASF,IAAE;AAAC,YAAG,YAAU,OAAOA,WAAQ,CAACA,IAAE,EAAE;AAAE,YAAG,EAAEA,EAAC,UAAQ,CAACA,IAAE,EAAE;AAAE,YAAGmC,IAAEnC,EAAC,UAAQ,CAACA,IAAE,EAAE;AAAE,YAAGA,MAAG,YAAU,OAAOA,IAAE,OAAM,CAAC,KAAK,UAAUA,EAAC,GAAE,EAAC,gBAAe,oBAAmB;AAAE,cAAM,IAAI,MAAM,2DAAyD,OAAOA,EAAC;AAAA,MAAC,GAAEA,GAAE,IAAI;AAAE,MAAAG,GAAE,OAAKE,IAAEJ,KAAE,EAAEA,IAAEC,EAAC;AAAA,IAAC;AAAC,WAAOF,GAAE,WAASG,GAAE,SAAOH,GAAE,SAAQA,GAAE,oBAAkBG,GAAE,cAAY,YAAWA,GAAE,UAAQF,IAAEE;AAAA,EAAC,GAAEH,EAAC,CAAC,IAAGA,EAAC;AAAC;AAAC,IAAI,KAAG,EAAE,GAAG;AAAE,MAAM,KAAG,CAAAA,OAAG;AAAC,MAAG,YAAU,OAAOA,IAAE,MAAM,IAAI,UAAU,iBAAiB;AAAE,MAAGA,GAAE,SAAO,OAAM,MAAM,IAAI,UAAU,qBAAqB;AAAC,GAAE,KAAG,EAAC,aAAY,CAAC,wBAAuB,IAAE,GAAE,aAAY,CAAC,iBAAgB,IAAE,GAAE,aAAY,CAAC,eAAc,KAAE,GAAE,aAAY,CAAC,cAAa,IAAE,GAAE,aAAY,CAAC,WAAU,IAAE,GAAE,aAAY,CAAC,WAAU,IAAE,GAAE,aAAY,CAAC,gBAAe,MAAG,IAAE,GAAE,aAAY,CAAC,WAAU,IAAE,GAAE,aAAY,CAAC,UAAS,IAAE,GAAE,aAAY,CAAC,UAAS,IAAE,GAAE,aAAY,CAAC,yBAAwB,IAAE,GAAE,aAAY,CAAC,WAAU,IAAE,GAAE,YAAW,CAAC,+BAA8B,IAAE,GAAE,cAAa,CAAC,aAAY,KAAE,KAAG,KAAG,CAAAA,OAAGA,GAAE,QAAQ,aAAY,MAAM,GAAE,KAAG,CAAAA,OAAGA,GAAE,KAAK,EAAE,GAAE,KAAG,CAACA,IAAEC,OAAI;AAAC,QAAME,KAAEF;AAAE,MAAG,QAAMD,GAAE,OAAOG,EAAC,GAAE,MAAM,IAAI,MAAM,2BAA2B;AAAE,QAAME,KAAE,EAAC,EAAEH,KAAE,EAAC;AAAE,MAAIE,KAAED,KAAE,GAAEG,KAAE,OAAGC,KAAE,OAAGC,KAAE,OAAGC,KAAE,OAAGC,KAAEP,IAAEa,KAAE;AAAG,KAAE,OAAKZ,KAAEJ,GAAE,UAAQ;AAAC,UAAMC,KAAED,GAAE,OAAOI,EAAC;AAAE,QAAG,QAAMH,MAAG,QAAMA,MAAGG,OAAID,KAAE,GAAE;AAAC,UAAG,QAAMF,MAAGK,MAAG,CAACE,IAAE;AAAC,QAAAE,KAAEN,KAAE;AAAE;AAAA,MAAK;AAAC,UAAGE,KAAE,MAAG,SAAOL,MAAGO,IAAE;AAAC,YAAG,QAAMP,MAAG,CAACO;AAAE,qBAAS,CAACP,IAAE,CAACK,IAAEE,IAAEC,EAAC,CAAC,KAAI,OAAO,QAAQ,EAAE,GAAE,IAAGT,GAAE,WAAWC,IAAEG,EAAC,GAAE;AAAC,gBAAGY,WAAQ,CAAC,MAAK,OAAGhB,GAAE,SAAOG,IAAE,IAAE;AAAE,YAAAC,MAAGH,GAAE,QAAOQ,KAAEP,GAAE,KAAKI,EAAC,IAAED,GAAE,KAAKC,EAAC,GAAEC,KAAEA,MAAGC;AAAE,qBAAS;AAAA,UAAC;AAAA;AAAC,QAAAA,KAAE,OAAGQ,MAAGf,KAAEe,KAAEX,GAAE,KAAK,GAAGW,EAAC,IAAE,MAAI,GAAGf,EAAC,CAAC,IAAEA,OAAIe,MAAGX,GAAE,KAAK,GAAGJ,EAAC,CAAC,GAAEe,KAAE,IAAGZ,QAAKJ,GAAE,WAAW,MAAKI,KAAE,CAAC,KAAGC,GAAE,KAAK,GAAGJ,KAAE,GAAG,CAAC,GAAEG,MAAG,KAAGJ,GAAE,WAAW,KAAII,KAAE,CAAC,KAAGY,KAAEf,IAAEG,MAAG,MAAIC,GAAE,KAAK,GAAGJ,EAAC,CAAC,GAAEG;AAAA,MAAI,OAAMI,KAAE,MAAGJ;AAAA,IAAG,OAAMK,KAAE,MAAGL;AAAA,EAAG;AAAC,MAAGM,KAAEN,IAAE,OAAM,CAAC,IAAG,OAAG,GAAE,KAAE;AAAE,MAAG,CAACC,GAAE,UAAQ,CAACH,GAAE,QAAO,OAAM,CAAC,MAAK,OAAGF,GAAE,SAAOG,IAAE,IAAE;AAAE,MAAG,MAAID,GAAE,UAAQ,MAAIG,GAAE,UAAQ,SAAS,KAAKA,GAAE,CAAC,CAAC,KAAG,CAACI,IAAE;AAAC,WAAM,EAAEU,KAAE,MAAId,GAAE,CAAC,EAAE,SAAOA,GAAE,CAAC,EAAE,MAAM,EAAE,IAAEA,GAAE,CAAC,GAAEc,GAAE,QAAQ,4BAA2B,MAAM,IAAG,OAAGT,KAAEP,IAAE,KAAE;AAAA,EAAC;AAAC,MAAIgB;AAAE,QAAMC,KAAE,OAAKX,KAAE,MAAI,MAAI,GAAGJ,EAAC,IAAE,KAAIM,KAAE,OAAKF,KAAE,KAAG,OAAK,GAAGP,EAAC,IAAE;AAAI,SAAM,CAACG,GAAE,UAAQH,GAAE,SAAO,MAAIkB,KAAE,MAAIT,KAAE,MAAIN,GAAE,SAAOe,KAAET,IAAEJ,IAAEG,KAAEP,IAAE,IAAE;AAAC,GAAE,KAAG,SAASH,IAAE;AAAC,MAAG,EAAC,sBAAqBC,KAAE,UAAI,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,SAAOA,KAAED,GAAE,QAAQ,kBAAiB,IAAI,IAAEA,GAAE,QAAQ,6BAA4B,MAAM,EAAE,QAAQ,cAAa,IAAI;AAAC,GAAE,yBAAO,IAAI,CAAC,KAAI,KAAI,KAAI,KAAI,GAAG,CAAC,GAAE,KAAG,CAAAA,OAAG,GAAG,IAAIA,EAAC,GAAE,KAAG,WAAU,qBAAG,IAAI,IAAI,CAAC,KAAI,GAAG,CAAC,GAAE,yBAAO,IAAI,CAAC,MAAK,GAAG,CAAC,GAAE,KAAG,IAAI,IAAI,iBAAiB,GAAE,KAAG,QAAO,KAAG,KAAG,MAAK,KAAG,KAAG;AAAK,MAAM,GAAE;AAAA,EAAC;AAAA,EAAK;AAAA,EAAG;AAAA,EAAG,KAAG;AAAA,EAAG,KAAG,EAAC;AAAA,EAAE;AAAA,EAAG;AAAA,EAAG;AAAA,EAAG,KAAG;AAAA,EAAG;AAAA,EAAG;AAAA,EAAG,KAAG;AAAA,EAAG,YAAYA,IAAEC,IAAE;AAAC,QAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,SAAK,OAAKH,IAAEA,OAAI,KAAK,KAAG,OAAI,KAAK,KAAGC,IAAE,KAAK,KAAG,KAAK,KAAG,KAAK,GAAG,KAAG,MAAK,KAAK,KAAG,KAAK,OAAK,OAAKE,KAAE,KAAK,GAAG,IAAG,KAAK,KAAG,KAAK,OAAK,OAAK,EAAC,GAAE,KAAK,GAAG,IAAG,QAAMH,MAAG,KAAK,GAAG,MAAI,KAAK,GAAG,KAAK,IAAI,GAAE,KAAK,KAAG,KAAK,KAAG,KAAK,GAAG,GAAG,SAAO;AAAA,EAAC;AAAA,EAAC,IAAI,WAAU;AAAC,QAAG,WAAS,KAAK,IAAG,OAAO,KAAK;AAAG,eAAUA,MAAK,KAAK,IAAG,IAAG,YAAU,OAAOA,OAAIA,GAAE,QAAMA,GAAE,WAAU,OAAO,KAAK,KAAG;AAAG,WAAO,KAAK;AAAA,EAAE;AAAA,EAAC,WAAU;AAAC,WAAO,WAAS,KAAK,KAAG,KAAK,KAAG,KAAK,OAAK,KAAK,KAAG,KAAK,OAAK,MAAI,KAAK,GAAG,KAAK,CAAAA,OAAG,OAAOA,EAAC,IAAI,KAAK,GAAG,IAAE,MAAI,KAAK,KAAG,KAAK,GAAG,KAAK,CAAAA,OAAG,OAAOA,EAAC,GAAE,CAAE,KAAK,EAAE;AAAA,EAAC;AAAA,EAAC,KAAI;AAAC,QAAG,SAAO,KAAK,IAAG,MAAM,IAAI,MAAM,0BAA0B;AAAE,QAAG,KAAK,IAAG,OAAO;AAAK,QAAIA;AAAE,SAAI,KAAK,UAAS,EAAE,KAAK,KAAG,MAAGA,KAAE,KAAK,GAAG,KAAI,IAAG;AAAC,UAAG,QAAMA,GAAE,MAAK;AAAS,UAAIC,KAAED,IAAEG,KAAEF,GAAE;AAAG,aAAKE,MAAG;AAAC,iBAAQE,KAAEJ,GAAE,KAAG,GAAE,CAACE,GAAE,QAAME,KAAEF,GAAE,GAAG,QAAOE,MAAI,WAAUJ,MAAKD,GAAE,IAAG;AAAC,cAAG,YAAU,OAAOC,IAAE,MAAM,IAAI,MAAM,8BAA8B;AAAE,UAAAA,GAAE,OAAOE,GAAE,GAAGE,EAAC,CAAC;AAAA,QAAC;AAAC,QAAAJ,KAAEE,IAAEA,KAAEF,GAAE;AAAA,MAAE;AAAA,IAAC;AAAC,WAAO;AAAA,EAAI;AAAA,EAAC,OAAM;AAAC,aAAQD,KAAE,UAAU,QAAOC,KAAE,IAAI,MAAMD,EAAC,GAAEG,KAAE,GAAEA,KAAEH,IAAEG,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,eAAUH,MAAKC,IAAE,IAAG,OAAKD,IAAE;AAAC,UAAG,YAAU,OAAOA,MAAG,EAAEA,cAAa,MAAIA,GAAE,OAAK,OAAM,MAAM,IAAI,MAAM,mBAAiBA,EAAC;AAAE,WAAK,GAAG,KAAKA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,UAAMA,KAAE,SAAO,KAAK,OAAK,KAAK,GAAG,OAAM,CAAE,KAAK,CAAAA,OAAG,YAAU,OAAOA,KAAEA,KAAEA,GAAE,QAAO,EAAE,GAAE,CAAC,KAAK,MAAK,GAAG,KAAK,GAAG,KAAK,CAAAA,OAAGA,GAAE,UAAU;AAAE,WAAO,KAAK,SAAQ,IAAG,CAAC,KAAK,QAAMA,GAAE,QAAQ,EAAE,GAAE,KAAK,OAAM,KAAI,SAAO,KAAK,MAAI,KAAK,GAAG,MAAI,QAAM,KAAK,IAAI,SAAOA,GAAE,KAAK,EAAE,GAAEA;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,QAAG,KAAK,OAAK,MAAK,OAAM;AAAG,QAAG,CAAC,KAAK,IAAI,WAAU,OAAM;AAAG,QAAG,MAAI,KAAK,IAAG,OAAM;AAAG,UAAMA,KAAE,KAAK;AAAG,aAAQC,KAAE,GAAEA,KAAE,KAAK,IAAGA,MAAI;AAAC,YAAME,KAAEH,GAAE,GAAGC,EAAC;AAAE,UAAG,EAAEE,cAAa,MAAI,QAAMA,GAAE,OAAM,OAAM;AAAA,IAAE;AAAC,WAAM;AAAA,EAAE;AAAA,EAAC,QAAO;AAAC,QAAG,KAAK,OAAK,MAAK,OAAM;AAAG,QAAG,QAAM,KAAK,IAAI,MAAK,OAAM;AAAG,QAAG,CAAC,KAAK,IAAI,SAAQ,OAAM;AAAG,QAAG,CAAC,KAAK,MAAK,OAAO,KAAK,IAAI,OAAM;AAAE,UAAMH,KAAE,KAAK,KAAG,KAAK,GAAG,GAAG,SAAO;AAAE,WAAO,KAAK,OAAKA,KAAE;AAAA,EAAC;AAAA,EAAC,OAAOA,IAAE;AAAC,gBAAU,OAAOA,KAAE,KAAK,KAAKA,EAAC,IAAE,KAAK,KAAKA,GAAE,MAAM,IAAI,CAAC;AAAA,EAAC;AAAA,EAAC,MAAMA,IAAE;AAAC,UAAMC,KAAE,IAAI,GAAG,KAAK,MAAKD,EAAC;AAAE,eAAUA,MAAK,KAAK,IAAGC,GAAE,OAAOD,EAAC;AAAE,WAAOC;AAAA,EAAC;AAAA,EAAC,OAAM,GAAGD,IAAEC,IAAEE,IAAEE,IAAE;AAAC,QAAIH,KAAE,OAAGE,KAAE,OAAGE,KAAE,IAAGC,KAAE;AAAG,QAAG,SAAON,GAAE,MAAK;AAAC,UAAIO,KAAEL,IAAEM,KAAE;AAAG,aAAKD,KAAER,GAAE,UAAQ;AAAC,cAAMG,KAAEH,GAAE,OAAOQ,IAAG;AAAE,YAAGN,MAAG,SAAOC,IAAED,KAAE,CAACA,IAAEO,MAAGN;AAAA,iBAAUC,IAAEI,OAAIF,KAAE,IAAE,QAAMH,MAAG,QAAMA,OAAII,KAAE,QAAI,QAAMJ,MAAGK,OAAIF,KAAE,KAAGC,OAAIH,KAAE,QAAIK,MAAGN;AAAA,iBAAU,QAAMA,IAAE,IAAGE,GAAE,SAAO,CAAC,GAAGF,EAAC,KAAG,QAAMH,GAAE,OAAOQ,EAAC,GAAEC,MAAGN;AAAA,aAAM;AAAC,UAAAF,GAAE,KAAKQ,EAAC,GAAEA,KAAE;AAAG,gBAAMP,KAAE,IAAI,GAAGC,IAAEF,EAAC;AAAE,UAAAO,KAAE,GAAG,GAAGR,IAAEE,IAAEM,IAAEH,EAAC,GAAEJ,GAAE,KAAKC,EAAC;AAAA,QAAC;AAAA,aAAME,KAAE,MAAGE,KAAEE,IAAED,KAAE,OAAGE,MAAGN;AAAA,MAAC;AAAC,aAAOF,GAAE,KAAKQ,EAAC,GAAED;AAAA,IAAC;AAAC,QAAIA,KAAEL,KAAE,GAAEM,KAAE,IAAI,GAAG,MAAKR,EAAC;AAAE,UAAMS,KAAE,EAAC;AAAE,QAAIM,KAAE;AAAG,WAAKR,KAAER,GAAE,UAAQ;AAAC,YAAMG,KAAEH,GAAE,OAAOQ,IAAG;AAAE,UAAGN,MAAG,SAAOC,IAAED,KAAE,CAACA,IAAEc,MAAGb;AAAA,eAAUC,IAAEI,OAAIF,KAAE,IAAE,QAAMH,MAAG,QAAMA,OAAII,KAAE,QAAI,QAAMJ,MAAGK,OAAIF,KAAE,KAAGC,OAAIH,KAAE,QAAIY,MAAGb;AAAA,eAAU,QAAMA,IAAE,IAAG,GAAGA,EAAC,KAAG,QAAMH,GAAE,OAAOQ,EAAC,GAAE;AAAC,QAAAC,GAAE,KAAKO,EAAC,GAAEA,KAAE;AAAG,cAAMf,KAAE,IAAI,GAAGE,IAAEM,EAAC;AAAE,QAAAA,GAAE,KAAKR,EAAC,GAAEO,KAAE,GAAG,GAAGR,IAAEC,IAAEO,IAAEH,EAAC;AAAA,MAAC,WAAS,QAAMF,IAAE;AAAC,YAAG,QAAMA,IAAE,OAAM,OAAKa,MAAG,MAAIf,GAAE,GAAG,WAASA,GAAE,KAAG,OAAIQ,GAAE,KAAKO,EAAC,GAAEA,KAAE,IAAGf,GAAE,KAAK,GAAGS,IAAED,EAAC,GAAED;AAAE,QAAAQ,MAAGb;AAAA,MAAC,OAAMM,GAAE,KAAKO,EAAC,GAAEA,KAAE,IAAGN,GAAE,KAAKD,EAAC,GAAEA,KAAE,IAAI,GAAG,MAAKR,EAAC;AAAA,WAAOG,KAAE,MAAGE,KAAEE,IAAED,KAAE,OAAGS,MAAGb;AAAA,IAAC;AAAC,WAAOF,GAAE,OAAK,MAAKA,GAAE,KAAG,QAAOA,GAAE,KAAG,CAACD,GAAE,UAAUG,KAAE,CAAC,CAAC,GAAEK;AAAA,EAAC;AAAA,EAAC,OAAO,SAASR,IAAE;AAAC,QAAIC,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,UAAME,KAAE,IAAI,GAAG,MAAK,QAAOF,EAAC;AAAE,WAAO,GAAG,GAAGD,IAAEG,IAAE,GAAEF,EAAC,GAAEE;AAAA,EAAC;AAAA,EAAC,cAAa;AAAC,QAAG,SAAO,KAAK,IAAG,OAAO,KAAK,GAAG,aAAY;AAAE,UAAMH,KAAE,KAAK,UAAS,EAAE,CAACC,IAAEE,IAAEE,IAAEH,EAAC,IAAE,KAAK,gBAAe;AAAE,QAAG,EAAEG,MAAG,KAAK,MAAI,KAAK,GAAG,UAAQ,CAAC,KAAK,GAAG,mBAAiBL,GAAE,kBAAgBA,GAAE,gBAAe,OAAOG;AAAE,UAAMC,MAAG,KAAK,GAAG,SAAO,MAAI,OAAKF,KAAE,MAAI;AAAI,WAAO,OAAO,OAAO,IAAI,OAAO,IAAID,EAAC,KAAIG,EAAC,GAAE,EAAC,MAAKH,IAAE,OAAMD,IAAE;AAAA,EAAC;AAAA,EAAC,IAAI,UAAS;AAAC,WAAO,KAAK;AAAA,EAAE;AAAA,EAAC,eAAeA,IAAE;AAAC,UAAMC,KAAED,MAAG,CAAC,CAAC,KAAK,GAAG;AAAI,QAAG,KAAK,OAAK,QAAM,KAAK,IAAG,EAAE,CAAC,KAAK,MAAK;AAAC,YAAMG,KAAE,KAAK,SAAQ,IAAG,KAAK,OAAM,EAAEE,KAAE,KAAK,GAAG,KAAK,CAAAJ,OAAG;AAAC,cAAK,CAACI,IAAEH,IAAEE,IAAEE,EAAC,IAAE,YAAU,OAAOL,KAAE,GAAG,GAAGA,IAAE,KAAK,IAAGE,EAAC,IAAEF,GAAE,eAAeD,EAAC;AAAE,eAAO,KAAK,KAAG,KAAK,MAAII,IAAE,KAAK,KAAG,KAAK,MAAIE,IAAED;AAAA,MAAC,GAAE,CAAE,KAAK,EAAE;AAAE,UAAIH,KAAE;AAAG,UAAG,KAAK,SAAQ,IAAG,YAAU,OAAO,KAAK,GAAG,CAAC,MAAI,MAAI,KAAK,GAAG,UAAQ,CAAC,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC,IAAG;AAAC,cAAMC,KAAE,IAAGC,KAAEH,MAAGE,GAAE,IAAIE,GAAE,OAAO,CAAC,CAAC,KAAGA,GAAE,WAAW,KAAK,KAAGF,GAAE,IAAIE,GAAE,OAAO,CAAC,CAAC,KAAGA,GAAE,WAAW,QAAQ,KAAGF,GAAE,IAAIE,GAAE,OAAO,CAAC,CAAC,GAAEC,KAAE,CAACL,MAAG,CAACD,MAAGG,GAAE,IAAIE,GAAE,OAAO,CAAC,CAAC;AAAE,QAAAH,KAAEE,KAAE,8BAA4BE,KAAE,KAAG;AAAA,MAAE;AAAC,UAAIF,KAAE;AAAG,aAAO,KAAK,OAAM,IAAG,KAAK,GAAG,MAAI,QAAM,KAAK,IAAI,SAAOA,KAAE,cAAa,CAACF,KAAEG,KAAED,IAAE,GAAGC,EAAC,GAAE,KAAK,KAAG,CAAC,CAAC,KAAK,IAAG,KAAK,EAAE;AAAA,IAAC;AAAC,UAAMF,KAAE,QAAM,KAAK,QAAM,QAAM,KAAK,MAAKE,KAAE,QAAM,KAAK,OAAK,cAAY;AAAM,QAAIH,KAAE,KAAK,GAAGD,EAAC;AAAE,QAAG,KAAK,SAAQ,IAAG,KAAK,WAAS,CAACC,MAAG,QAAM,KAAK,MAAK;AAAC,YAAMF,KAAE,KAAK,UAAS;AAAE,aAAO,KAAK,KAAG,CAACA,EAAC,GAAE,KAAK,OAAK,MAAK,KAAK,KAAG,QAAO,CAACA,IAAE,GAAG,KAAK,UAAU,GAAE,OAAG,KAAE;AAAA,IAAC;AAAC,QAAII,KAAE,CAACD,MAAGH,MAAGC,KAAE,KAAG,KAAK,GAAG,IAAE;AAAE,IAAAG,OAAIF,OAAIE,KAAE,KAAIA,OAAIF,KAAE,MAAMA,EAAC,OAAOE,EAAC;AAAO,QAAIE,KAAE;AAAG,WAAOA,KAAE,QAAM,KAAK,QAAM,KAAK,MAAI,KAAK,SAAQ,IAAG,CAACL,KAAE,KAAG,MAAI,KAAGI,KAAEH,MAAG,QAAM,KAAK,OAAK,QAAM,CAAC,KAAK,SAAQ,IAAGD,MAAGD,KAAE,KAAG,MAAI,KAAG,MAAI,QAAM,KAAK,OAAK,MAAI,QAAM,KAAK,OAAK,OAAK,QAAM,KAAK,QAAMI,KAAE,MAAI,QAAM,KAAK,QAAMA,KAAE,OAAK,IAAI,KAAK,IAAI,KAAI,CAACE,IAAE,GAAGJ,EAAC,GAAE,KAAK,KAAG,CAAC,CAAC,KAAK,IAAG,KAAK,EAAE;AAAA,EAAC;AAAA,EAAC,GAAGF,IAAE;AAAC,WAAO,KAAK,GAAG,KAAK,CAAAC,OAAG;AAAC,UAAG,YAAU,OAAOA,IAAE,MAAM,IAAI,MAAM,8BAA8B;AAAE,YAAK,CAACE,IAAEE,IAAEH,IAAEE,EAAC,IAAEH,GAAE,eAAeD,EAAC;AAAE,aAAO,KAAK,KAAG,KAAK,MAAII,IAAED;AAAA,IAAC,GAAE,CAAE,QAAQ,CAAAH,OAAG,EAAE,KAAK,SAAQ,IAAG,KAAK,OAAM,IAAG,CAACA,KAAG,CAAE,KAAK,GAAG;AAAA,EAAC;AAAA,EAAC,OAAM,GAAGA,IAAEC,IAAE;AAAC,QAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,KAAG,UAAU,CAAC,GAAEE,KAAE,OAAGH,KAAE,IAAGE,KAAE;AAAG,aAAQE,KAAE,GAAEA,KAAEN,GAAE,QAAOM,MAAI;AAAC,YAAMC,KAAEP,GAAE,OAAOM,EAAC;AAAE,UAAGD,IAAEA,KAAE,OAAGH,OAAI,GAAG,IAAIK,EAAC,IAAE,OAAK,MAAIA;AAAA,eAAU,SAAOA,IAAE;AAAC,YAAG,QAAMA,IAAE;AAAC,gBAAK,CAACJ,IAAEE,IAAEE,IAAEC,EAAC,IAAE,GAAGR,IAAEM,EAAC;AAAE,cAAGC,IAAE;AAAC,YAAAL,MAAGC,IAAEC,KAAEA,MAAGC,IAAEC,MAAGC,KAAE,GAAEN,KAAEA,MAAGO;AAAE;AAAA,UAAQ;AAAA,QAAC;AAAC,gBAAMD,KAAE,QAAMA,KAAEL,MAAGK,GAAE,QAAQ,4BAA2B,MAAM,KAAGL,MAAG,IAAGD,KAAE,SAAKC,MAAGC,MAAG,QAAMH,KAAE,KAAG,IAAGC,KAAE;AAAA,MAAG,OAAMK,OAAIN,GAAE,SAAO,IAAEE,MAAG,SAAOG,KAAE;AAAA,IAAE;AAAC,WAAM,CAACH,IAAE,GAAGF,EAAC,GAAE,CAAC,CAACC,IAAEG,EAAC;AAAA,EAAC;AAAC;AAAC,MAAM,KAAG,SAASJ,IAAEC,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,SAAO,GAAGF,EAAC,GAAE,EAAE,CAACE,GAAE,aAAW,QAAMF,GAAE,OAAO,CAAC,MAAI,IAAI,GAAGA,IAAEE,EAAC,EAAE,MAAMH,EAAC;AAAC,GAAE,KAAG,yBAAwB,KAAG,CAAAA,OAAG,CAAAC,OAAG,CAACA,GAAE,WAAW,GAAG,KAAGA,GAAE,SAASD,EAAC,GAAE,KAAG,CAAAA,OAAG,CAAAC,OAAGA,GAAE,SAASD,EAAC,GAAE,KAAG,CAAAA,QAAIA,KAAEA,GAAE,aAAY,EAAE,CAAAC,OAAG,CAACA,GAAE,WAAW,GAAG,KAAGA,GAAE,aAAY,CAAE,SAASD,EAAC,IAAG,KAAG,CAAAA,QAAIA,KAAEA,GAAE,aAAY,EAAE,CAAAC,OAAGA,GAAE,aAAY,CAAE,SAASD,EAAC,IAAG,KAAG,cAAa,KAAG,CAAAA,OAAG,CAACA,GAAE,WAAW,GAAG,KAAGA,GAAE,SAAS,GAAG,GAAE,KAAG,CAAAA,OAAG,QAAMA,MAAG,SAAOA,MAAGA,GAAE,SAAS,GAAG,GAAE,KAAG,WAAU,KAAG,CAAAA,OAAG,QAAMA,MAAG,SAAOA,MAAGA,GAAE,WAAW,GAAG,GAAE,KAAG,SAAQ,KAAG,CAAAA,OAAG,MAAIA,GAAE,UAAQ,CAACA,GAAE,WAAW,GAAG,GAAE,KAAG,CAAAA,OAAG,MAAIA,GAAE,UAAQ,QAAMA,MAAG,SAAOA,IAAE,KAAG,0BAAyB,KAAG,CAAAA,OAAG;AAAC,MAAG,CAACC,IAAEE,KAAE,EAAE,IAAEH;AAAE,QAAMK,KAAE,GAAG,CAACJ,EAAC,CAAC;AAAE,SAAOE,MAAGA,KAAEA,GAAE,eAAc,CAAAH,OAAGK,GAAEL,EAAC,KAAGA,GAAE,aAAY,CAAE,SAASG,EAAC,KAAGE;AAAC,GAAE,KAAG,CAAAL,OAAG;AAAC,MAAG,CAACC,IAAEE,KAAE,EAAE,IAAEH;AAAE,QAAMK,KAAE,GAAG,CAACJ,EAAC,CAAC;AAAE,SAAOE,MAAGA,KAAEA,GAAE,eAAc,CAAAH,OAAGK,GAAEL,EAAC,KAAGA,GAAE,aAAY,CAAE,SAASG,EAAC,KAAGE;AAAC,GAAE,KAAG,CAAAL,OAAG;AAAC,MAAG,CAACC,IAAEE,KAAE,EAAE,IAAEH;AAAE,QAAMK,KAAE,GAAG,CAACJ,EAAC,CAAC;AAAE,SAAOE,KAAE,CAAAH,OAAGK,GAAEL,EAAC,KAAGA,GAAE,SAASG,EAAC,IAAEE;AAAC,GAAE,KAAG,CAAAL,OAAG;AAAC,MAAG,CAACC,IAAEE,KAAE,EAAE,IAAEH;AAAE,QAAMK,KAAE,GAAG,CAACJ,EAAC,CAAC;AAAE,SAAOE,KAAE,CAAAH,OAAGK,GAAEL,EAAC,KAAGA,GAAE,SAASG,EAAC,IAAEE;AAAC,GAAE,KAAG,CAAAL,OAAG;AAAC,MAAG,CAACC,EAAC,IAAED;AAAE,QAAMG,KAAEF,GAAE;AAAO,SAAO,CAAAD,OAAGA,GAAE,WAASG,MAAG,CAACH,GAAE,WAAW,GAAG;AAAC,GAAE,KAAG,CAAAA,OAAG;AAAC,MAAG,CAACC,EAAC,IAAED;AAAE,QAAMG,KAAEF,GAAE;AAAO,SAAO,CAAAD,OAAGA,GAAE,WAASG,MAAG,QAAMH,MAAG,SAAOA;AAAC,GAAE,KAAG,YAAU,OAAO,WAAS,UAAQ,YAAU,OAAO,8BAAa,8BAAa,2BAAY,kCAAgC,QAAQ,WAAS;AAAQ,GAAG,MAAI,YAAU,KAAG,OAAK;AAAI,MAAM,KAAG,OAAO,aAAa;AAAE,GAAG,WAAS,IAAG,GAAG,SAAO,SAASA,IAAE;AAAC,MAAIC,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,SAAO,CAAAE,OAAG,GAAGA,IAAEH,IAAEC,EAAC;AAAC;AAAE,MAAM,KAAG,SAASD,IAAE;AAAC,MAAIC,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,SAAO,OAAO,OAAO,EAAC,EAAED,IAAEC,EAAC;AAAC;AAAE,GAAG,WAAS,CAAAD,OAAG;AAAC,MAAG,CAACA,MAAG,YAAU,OAAOA,MAAG,CAAC,OAAO,KAAKA,EAAC,EAAE,QAAO,OAAO;AAAG,QAAMC,KAAE;AAAG,SAAO,OAAO,QAAQ,SAASE,IAAEE,IAAE;AAAC,WAAOJ,GAAEE,IAAEE,IAAE,GAAGL,IAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAE,CAAC;AAAA,EAAC,IAAG,EAAC,WAAU,cAAcC,GAAE,UAAS;AAAA,IAAC,YAAYA,IAAE;AAAC,YAAMA,IAAE,GAAGD,IAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAE,CAAC;AAAA,IAAC;AAAA,IAAC,OAAO,SAASG,IAAE;AAAC,aAAOF,GAAE,SAAS,GAAGD,IAAEG,EAAC,CAAC,EAAE;AAAA,IAAS;AAAA,GAAC,EAAE,KAAI,cAAcF,GAAE,IAAG;AAAA,IAAC,YAAYA,IAAEE,IAAE;AAAC,YAAMF,IAAEE,IAAE,GAAGH,IAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAE,CAAC;AAAA,IAAC;AAAA,IAAC,OAAO,SAASG,IAAE;AAAC,UAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,aAAOJ,GAAE,IAAI,SAASE,IAAE,GAAGH,IAAEK,EAAC,CAAC;AAAA,IAAC;AAAA,GAAC,EAAE,UAAS,SAASF,IAAE;AAAC,QAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,WAAOJ,GAAE,SAASE,IAAE,GAAGH,IAAEK,EAAC,CAAC;AAAA,EAAC,GAAE,QAAO,SAASF,IAAE;AAAC,QAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,WAAOJ,GAAE,OAAOE,IAAE,GAAGH,IAAEK,EAAC,CAAC;AAAA,EAAC,GAAE,QAAO,SAASF,IAAE;AAAC,QAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,WAAOJ,GAAE,OAAOE,IAAE,GAAGH,IAAEK,EAAC,CAAC;AAAA,EAAC,GAAE,UAAS,CAAAF,OAAGF,GAAE,SAAS,GAAGD,IAAEG,EAAC,CAAC,GAAE,QAAO,SAASA,IAAE;AAAC,QAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,WAAOJ,GAAE,OAAOE,IAAE,GAAGH,IAAEK,EAAC,CAAC;AAAA,EAAC,GAAE,aAAY,SAASF,IAAE;AAAC,QAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,WAAOJ,GAAE,YAAYE,IAAE,GAAGH,IAAEK,EAAC,CAAC;AAAA,EAAC,GAAE,OAAM,SAASF,IAAEE,IAAE;AAAC,QAAIH,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,WAAOD,GAAE,MAAME,IAAEE,IAAE,GAAGL,IAAEE,EAAC,CAAC;AAAA,EAAC,GAAE,KAAID,GAAE,KAAI,UAAS,IAAG;AAAC;AAAE,MAAM,KAAG,SAASD,IAAE;AAAC,MAAIC,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,SAAO,GAAGD,EAAC,GAAEC,GAAE,WAAS,CAAC,mBAAmB,KAAKD,EAAC,IAAE,CAACA,EAAC,IAAE,GAAGA,EAAC;AAAC;AAAE,GAAG,cAAY,IAAG,GAAG,SAAO,SAASA,IAAE;AAAC,SAAO,IAAI,GAAGA,IAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAE,EAAE,QAAO;AAAC,GAAE,GAAG,QAAM,SAASA,IAAEC,IAAE;AAAC,QAAME,KAAE,IAAI,GAAGF,IAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAE;AAAE,SAAOD,KAAEA,GAAE,QAAQ,CAAAA,OAAGG,GAAE,MAAMH,EAAC,KAAIG,GAAE,QAAQ,UAAQ,CAACH,GAAE,UAAQA,GAAE,KAAKC,EAAC,GAAED;AAAC;AAAE,MAAM,KAAG;AAA0B,MAAM,GAAE;AAAA,EAAC;AAAA,EAAQ;AAAA,EAAI;AAAA,EAAQ;AAAA,EAAqB;AAAA,EAAS;AAAA,EAAO;AAAA,EAAQ;AAAA,EAAM;AAAA,EAAwB;AAAA,EAAQ;AAAA,EAAQ;AAAA,EAAU;AAAA,EAAO;AAAA,EAAU;AAAA,EAAS;AAAA,EAAmB;AAAA,EAAO,YAAYA,IAAE;AAAC,QAAIC,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,OAAGD,EAAC,GAAEC,KAAEA,MAAG,EAAC,EAAE,KAAK,UAAQA,IAAE,KAAK,UAAQD,IAAE,KAAK,WAASC,GAAE,YAAU,IAAG,KAAK,YAAU,YAAU,KAAK,UAAS,KAAK,uBAAqB,CAAC,CAACA,GAAE,wBAAsB,UAAKA,GAAE,oBAAmB,KAAK,yBAAuB,KAAK,UAAQ,KAAK,QAAQ,QAAQ,OAAM,GAAG,IAAG,KAAK,0BAAwB,CAAC,CAACA,GAAE,yBAAwB,KAAK,SAAO,MAAK,KAAK,SAAO,OAAG,KAAK,WAAS,CAAC,CAACA,GAAE,UAAS,KAAK,UAAQ,OAAG,KAAK,QAAM,OAAG,KAAK,UAAQ,CAAC,CAACA,GAAE,SAAQ,KAAK,SAAO,CAAC,CAAC,KAAK,QAAQ,QAAO,KAAK,qBAAmB,WAASA,GAAE,qBAAmBA,GAAE,qBAAmB,EAAE,CAAC,KAAK,aAAW,CAAC,KAAK,SAAQ,KAAK,UAAQ,EAAC,EAAE,KAAK,YAAU,EAAC,EAAE,KAAK,MAAI,EAAC,EAAE,KAAK,MAAK;AAAA,EAAC;AAAA,EAAC,WAAU;AAAC,QAAG,KAAK,QAAQ,iBAAe,KAAK,IAAI,SAAO,GAAE,OAAM;AAAG,eAAUD,MAAK,KAAK,KAAI,WAAUC,MAAKD,IAAE,IAAG,YAAU,OAAOC,IAAE,OAAM;AAAG,WAAM;AAAA,EAAE;AAAA,EAAC,QAAO;AAAA,EAAC;AAAA,EAAC,OAAM;AAAC,UAAMD,KAAE,KAAK,SAAQC,KAAE,KAAK;AAAQ,QAAG,CAACA,GAAE,aAAW,QAAMD,GAAE,OAAO,CAAC,GAAE,OAAO,MAAK,KAAK,UAAQ;AAAI,QAAG,CAACA,IAAE,OAAO,MAAK,KAAK,QAAM;AAAI,SAAK,aAAY,EAAE,KAAK,UAAQ,CAAC,GAAG,IAAI,IAAI,KAAK,aAAa,CAAC,GAAEC,GAAE,UAAQ,KAAK,QAAM,WAAU;AAAC,aAAO,QAAQ,MAAM,GAAG,SAAS;AAAA,IAAC,IAAG,KAAK,MAAM,KAAK,SAAQ,KAAK,OAAO;AAAE,UAAME,KAAE,KAAK,QAAQ,KAAK,CAAAH,OAAG,KAAK,WAAWA,EAAC,GAAE;AAAE,SAAK,YAAU,KAAK,WAAWG,EAAC,GAAE,KAAK,MAAM,KAAK,SAAQ,KAAK,SAAS;AAAE,QAAIE,KAAE,KAAK,UAAU,KAAK,CAACL,IAAEC,IAAEE,OAAI;AAAC,UAAG,KAAK,aAAW,KAAK,oBAAmB;AAAC,cAAMF,KAAE,EAAE,OAAKD,GAAE,CAAC,KAAG,OAAKA,GAAE,CAAC,KAAG,QAAMA,GAAE,CAAC,KAAG,GAAG,KAAKA,GAAE,CAAC,CAAC,KAAG,GAAG,KAAKA,GAAE,CAAC,CAAC,IAAGG,KAAE,WAAW,KAAKH,GAAE,CAAC,CAAC;AAAE,YAAGC,WAAQ,CAAC,GAAGD,GAAE,MAAM,GAAE,CAAC,GAAE,GAAGA,GAAE,MAAM,CAAC,EAAE,KAAK,CAAAA,OAAG,KAAK,MAAMA,EAAC,GAAG;AAAE,YAAGG,IAAE,OAAM,CAACH,GAAE,CAAC,GAAE,GAAGA,GAAE,MAAM,CAAC,EAAE,KAAK,CAAAA,OAAG,KAAK,MAAMA,EAAC,GAAG;AAAA,MAAC;AAAC,aAAOA,GAAE,KAAK,CAAAA,OAAG,KAAK,MAAMA,EAAC,GAAE;AAAA,IAAC,GAAE;AAAE,QAAG,KAAK,MAAM,KAAK,SAAQK,EAAC,GAAE,KAAK,MAAIA,GAAE,QAAQ,CAAAL,OAAG,OAAKA,GAAE,QAAQ,KAAE,GAAE,EAAE,KAAK,WAAU,SAAQA,KAAE,GAAEA,KAAE,KAAK,IAAI,QAAOA,MAAI;AAAC,YAAMC,KAAE,KAAK,IAAID,EAAC;AAAE,aAAKC,GAAE,CAAC,KAAG,OAAKA,GAAE,CAAC,KAAG,QAAM,KAAK,UAAUD,EAAC,EAAE,CAAC,KAAG,YAAU,OAAOC,GAAE,CAAC,KAAG,YAAY,KAAKA,GAAE,CAAC,CAAC,MAAIA,GAAE,CAAC,IAAE;AAAA,IAAI;AAAC,SAAK,MAAM,KAAK,SAAQ,KAAK,GAAG;AAAA,EAAC;AAAA,EAAC,WAAWD,IAAE;AAAC,QAAG,KAAK,QAAQ,YAAW,SAAQC,KAAE,GAAEA,KAAED,GAAE,QAAOC,MAAI,SAAQE,KAAE,GAAEA,KAAEH,GAAEC,EAAC,EAAE,QAAOE,MAAI,SAAOH,GAAEC,EAAC,EAAEE,EAAC,MAAIH,GAAEC,EAAC,EAAEE,EAAC,IAAE;AAAK,UAAK,EAAC,mBAAkBF,KAAE,MAAG,KAAK;AAAQ,WAAOA,MAAG,KAAGD,KAAE,KAAK,qBAAqBA,EAAC,GAAEA,KAAE,KAAK,sBAAsBA,EAAC,KAAGA,KAAEC,MAAG,IAAE,KAAK,iBAAiBD,EAAC,IAAE,KAAK,0BAA0BA,EAAC,GAAEA;AAAA,EAAC;AAAA,EAAC,0BAA0BA,IAAE;AAAC,WAAOA,GAAE,KAAK,CAAAA,OAAG;AAAC,UAAIC,KAAE;AAAG,aAAK,QAAMA,KAAED,GAAE,QAAQ,MAAKC,KAAE,CAAC,MAAI;AAAC,YAAIE,KAAEF;AAAE,eAAK,SAAOD,GAAEG,KAAE,CAAC,KAAGA;AAAI,QAAAA,OAAIF,MAAGD,GAAE,OAAOC,IAAEE,KAAEF,EAAC;AAAA,MAAC;AAAC,aAAOD;AAAA,IAAC,GAAE;AAAA,EAAC;AAAA,EAAC,iBAAiBA,IAAE;AAAC,WAAOA,GAAE,KAAK,CAAAA,OAAG,OAAKA,KAAEA,GAAE,QAAQ,CAACA,IAAEC,OAAI;AAAC,YAAME,KAAEH,GAAEA,GAAE,SAAO,CAAC;AAAE,aAAM,SAAOC,MAAG,SAAOE,KAAEH,KAAE,SAAOC,MAAGE,MAAG,SAAOA,MAAG,QAAMA,MAAG,SAAOA,MAAGH,GAAE,OAAMA,OAAIA,GAAE,KAAKC,EAAC,GAAED;AAAA,IAAE,IAAG,EAAE,GAAG,SAAO,CAAC,EAAE,IAAEA,IAAE;AAAA,EAAC;AAAA,EAAC,qBAAqBA,IAAE;AAAC,UAAM,QAAQA,EAAC,MAAIA,KAAE,KAAK,WAAWA,EAAC;AAAG,QAAIC,KAAE;AAAG,OAAE;AAAC,UAAGA,KAAE,OAAG,CAAC,KAAK,yBAAwB;AAAC,iBAAQE,KAAE,GAAEA,KAAEH,GAAE,SAAO,GAAEG,MAAI;AAAC,gBAAME,KAAEL,GAAEG,EAAC;AAAE,gBAAIA,MAAG,OAAKE,MAAG,OAAKL,GAAE,CAAC,KAAG,QAAMK,MAAG,OAAKA,OAAIJ,KAAE,MAAGD,GAAE,OAAOG,IAAE,CAAC,GAAEA;AAAA,QAAI;AAAC,gBAAMH,GAAE,CAAC,KAAG,MAAIA,GAAE,UAAQ,QAAMA,GAAE,CAAC,KAAG,OAAKA,GAAE,CAAC,MAAIC,KAAE,MAAGD,GAAE,KAAI;AAAA,MAAE;AAAC,UAAIG,KAAE;AAAE,aAAK,QAAMA,KAAEH,GAAE,QAAQ,MAAKG,KAAE,CAAC,MAAI;AAAC,cAAME,KAAEL,GAAEG,KAAE,CAAC;AAAE,QAAAE,MAAG,QAAMA,MAAG,SAAOA,MAAG,SAAOA,OAAIJ,KAAE,MAAGD,GAAE,OAAOG,KAAE,GAAE,CAAC,GAAEA,MAAG;AAAA,MAAE;AAAA,IAAC,SAAOF;AAAG,WAAO,MAAID,GAAE,SAAO,CAAC,EAAE,IAAEA;AAAA,EAAC;AAAA,EAAC,qBAAqBA,IAAE;AAAC,QAAIC,KAAE;AAAG,OAAE;AAAC,MAAAA,KAAE;AAAG,eAAQE,MAAKH,IAAE;AAAC,YAAIK,KAAE;AAAG,eAAK,QAAMA,KAAEF,GAAE,QAAQ,MAAKE,KAAE,CAAC,MAAI;AAAC,cAAIH,KAAEG;AAAE,iBAAK,SAAOF,GAAED,KAAE,CAAC,KAAGA;AAAI,UAAAA,KAAEG,MAAGF,GAAE,OAAOE,KAAE,GAAEH,KAAEG,EAAC;AAAE,cAAID,KAAED,GAAEE,KAAE,CAAC;AAAE,gBAAMC,KAAEH,GAAEE,KAAE,CAAC,GAAEE,KAAEJ,GAAEE,KAAE,CAAC;AAAE,cAAG,SAAOD,IAAE;AAAS,cAAG,CAACE,MAAG,QAAMA,MAAG,SAAOA,MAAG,CAACC,MAAG,QAAMA,MAAG,SAAOA,IAAE;AAAS,UAAAN,KAAE,MAAGE,GAAE,OAAOE,IAAE,CAAC;AAAE,gBAAMG,KAAEL,GAAE,MAAM,CAAC;AAAE,UAAAK,GAAEH,EAAC,IAAE,MAAKL,GAAE,KAAKQ,EAAC,GAAEH;AAAA,QAAG;AAAC,YAAG,CAAC,KAAK,yBAAwB;AAAC,mBAAQL,KAAE,GAAEA,KAAEG,GAAE,SAAO,GAAEH,MAAI;AAAC,kBAAMK,KAAEF,GAAEH,EAAC;AAAE,kBAAIA,MAAG,OAAKK,MAAG,OAAKF,GAAE,CAAC,KAAG,QAAME,MAAG,OAAKA,OAAIJ,KAAE,MAAGE,GAAE,OAAOH,IAAE,CAAC,GAAEA;AAAA,UAAI;AAAC,kBAAMG,GAAE,CAAC,KAAG,MAAIA,GAAE,UAAQ,QAAMA,GAAE,CAAC,KAAG,OAAKA,GAAE,CAAC,MAAIF,KAAE,MAAGE,GAAE,KAAI;AAAA,QAAE;AAAC,YAAID,KAAE;AAAE,eAAK,QAAMA,KAAEC,GAAE,QAAQ,MAAKD,KAAE,CAAC,MAAI;AAAC,gBAAMF,KAAEG,GAAED,KAAE,CAAC;AAAE,cAAGF,MAAG,QAAMA,MAAG,SAAOA,MAAG,SAAOA,IAAE;AAAC,YAAAC,KAAE;AAAG,kBAAMD,KAAE,MAAIE,MAAG,SAAOC,GAAED,KAAE,CAAC,IAAE,CAAC,GAAG,IAAE,EAAC;AAAE,YAAAC,GAAE,OAAOD,KAAE,GAAE,GAAE,GAAGF,EAAC,GAAE,MAAIG,GAAE,UAAQA,GAAE,KAAK,EAAE,GAAED,MAAG;AAAA,UAAC;AAAA,QAAC;AAAA,MAAC;AAAA,IAAC,SAAOD;AAAG,WAAOD;AAAA,EAAC;AAAA,EAAC,sBAAsBA,IAAE;AAAC,aAAQC,KAAE,GAAEA,KAAED,GAAE,SAAO,GAAEC,MAAI,SAAQE,KAAEF,KAAE,GAAEE,KAAEH,GAAE,QAAOG,MAAI;AAAC,YAAME,KAAE,KAAK,WAAWL,GAAEC,EAAC,GAAED,GAAEG,EAAC,GAAE,CAAC,KAAK,uBAAuB;AAAE,UAAGE,IAAE;AAAC,QAAAL,GAAEC,EAAC,IAAE,EAAC,EAAED,GAAEG,EAAC,IAAEE;AAAE;AAAA,MAAK;AAAA,IAAC;AAAC,WAAOL,GAAE,QAAQ,CAAAA,OAAGA,GAAE,QAAO;AAAA,EAAC;AAAA,EAAC,WAAWA,IAAEC,IAAE;AAAC,QAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,KAAG,UAAU,CAAC,GAAEE,KAAE,GAAEH,KAAE,GAAEE,KAAE,IAAGE,KAAE;AAAG,WAAKD,KAAEL,GAAE,UAAQE,KAAED,GAAE,UAAQ,IAAGD,GAAEK,EAAC,MAAIJ,GAAEC,EAAC,GAAEE,GAAE,KAAK,QAAME,KAAEL,GAAEC,EAAC,IAAEF,GAAEK,EAAC,CAAC,GAAEA,MAAIH;AAAA,aAAYC,MAAG,SAAOH,GAAEK,EAAC,KAAGJ,GAAEC,EAAC,MAAIF,GAAEK,KAAE,CAAC,GAAED,GAAE,KAAKJ,GAAEK,EAAC,CAAC,GAAEA;AAAA,aAAYF,MAAG,SAAOF,GAAEC,EAAC,KAAGF,GAAEK,EAAC,MAAIJ,GAAEC,KAAE,CAAC,GAAEE,GAAE,KAAKH,GAAEC,EAAC,CAAC,GAAEA;AAAA,aAAY,QAAMF,GAAEK,EAAC,KAAG,CAACJ,GAAEC,EAAC,KAAG,CAAC,KAAK,QAAQ,OAAKD,GAAEC,EAAC,EAAE,WAAW,GAAG,KAAG,SAAOD,GAAEC,EAAC,GAAE;AAAC,UAAG,QAAMD,GAAEC,EAAC,KAAG,CAACF,GAAEK,EAAC,KAAG,CAAC,KAAK,QAAQ,OAAKL,GAAEK,EAAC,EAAE,WAAW,GAAG,KAAG,SAAOL,GAAEK,EAAC,GAAE,OAAM;AAAG,UAAG,QAAMC,IAAE,OAAM;AAAG,MAAAA,KAAE,KAAIF,GAAE,KAAKH,GAAEC,EAAC,CAAC,GAAEG,MAAIH;AAAA,IAAG,OAAK;AAAC,UAAG,QAAMI,IAAE,OAAM;AAAG,MAAAA,KAAE,KAAIF,GAAE,KAAKJ,GAAEK,EAAC,CAAC,GAAEA,MAAIH;AAAA,IAAG;AAAC,WAAOF,GAAE,WAASC,GAAE,UAAQG;AAAA,EAAC;AAAA,EAAC,cAAa;AAAC,QAAG,KAAK,UAAS;AAAO,UAAMJ,KAAE,KAAK;AAAQ,QAAIC,KAAE,OAAGE,KAAE;AAAE,aAAQE,KAAE,GAAEA,KAAEL,GAAE,UAAQ,QAAMA,GAAE,OAAOK,EAAC,GAAEA,MAAIJ,KAAE,CAACA,IAAEE;AAAI,IAAAA,OAAI,KAAK,UAAQH,GAAE,MAAMG,EAAC,IAAG,KAAK,SAAOF;AAAA,EAAC;AAAA,EAAC,SAASD,IAAEC,IAAE;AAAC,QAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,KAAG,UAAU,CAAC;AAAE,UAAME,KAAE,KAAK;AAAQ,QAAG,KAAK,WAAU;AAAC,YAAMF,KAAE,YAAU,OAAOH,GAAE,CAAC,KAAG,YAAY,KAAKA,GAAE,CAAC,CAAC,GAAEK,KAAE,CAACF,MAAG,OAAKH,GAAE,CAAC,KAAG,OAAKA,GAAE,CAAC,KAAG,QAAMA,GAAE,CAAC,KAAG,YAAY,KAAKA,GAAE,CAAC,CAAC,GAAEE,KAAE,YAAU,OAAOD,GAAE,CAAC,KAAG,YAAY,KAAKA,GAAE,CAAC,CAAC,GAAEG,KAAEC,KAAE,IAAEF,KAAE,IAAE,QAAOG,KAAE,CAACJ,MAAG,OAAKD,GAAE,CAAC,KAAG,OAAKA,GAAE,CAAC,KAAG,QAAMA,GAAE,CAAC,KAAG,YAAU,OAAOA,GAAE,CAAC,KAAG,YAAY,KAAKA,GAAE,CAAC,CAAC,IAAE,IAAEC,KAAE,IAAE;AAAO,UAAG,YAAU,OAAOE,MAAG,YAAU,OAAOE,IAAE;AAAC,cAAK,CAACH,IAAEE,EAAC,IAAE,CAACL,GAAEI,EAAC,GAAEH,GAAEK,EAAC,CAAC;AAAE,QAAAH,GAAE,aAAY,KAAIE,GAAE,aAAY,KAAIJ,GAAEK,EAAC,IAAEH,IAAEG,KAAEF,KAAEH,KAAEA,GAAE,MAAMK,EAAC,IAAEF,KAAEE,OAAIN,KAAEA,GAAE,MAAMI,EAAC;AAAA,MAAG;AAAA,IAAC;AAAC,UAAK,EAAC,mBAAkBF,KAAE,MAAG,KAAK;AAAQ,IAAAA,MAAG,MAAIF,KAAE,KAAK,qBAAqBA,EAAC,IAAG,KAAK,MAAM,YAAW,MAAK,EAAC,MAAKA,IAAE,SAAQC,IAAE,GAAE,KAAK,MAAM,YAAWD,GAAE,QAAOC,GAAE,MAAM;AAAE,aAAQG,KAAE,GAAEE,KAAE,GAAEC,KAAEP,GAAE,QAAOQ,KAAEP,GAAE,QAAOG,KAAEG,MAAGD,KAAEE,IAAEJ,MAAIE,MAAI;AAAC,WAAK,MAAM,eAAe;AAAE,UAAIG,KAAER,GAAEK,EAAC,GAAEI,KAAEV,GAAEI,EAAC;AAAE,UAAG,KAAK,MAAMH,IAAEQ,IAAEC,EAAC,GAAE,UAAKD,IAAE,OAAM;AAAG,UAAGA,OAAI,IAAG;AAAC,aAAK,MAAM,YAAW,CAACR,IAAEQ,IAAEC,EAAC,CAAC;AAAE,YAAIM,KAAEZ,IAAEe,KAAEb,KAAE;AAAE,YAAGa,OAAIX,IAAE;AAAC,eAAI,KAAK,MAAM,eAAe,GAAEJ,KAAEG,IAAEH,MAAI,IAAG,QAAMJ,GAAEI,EAAC,KAAG,SAAOJ,GAAEI,EAAC,KAAG,CAACC,GAAE,OAAK,QAAML,GAAEI,EAAC,EAAE,OAAO,CAAC,GAAE,OAAM;AAAG,iBAAM;AAAA,QAAE;AAAC,eAAKY,KAAET,MAAG;AAAC,cAAIa,KAAEpB,GAAEgB,EAAC;AAAE,cAAG,KAAK,MAAM,oBAAmBhB,IAAEgB,IAAEf,IAAEkB,IAAEC,EAAC,GAAE,KAAK,SAASpB,GAAE,MAAMgB,EAAC,GAAEf,GAAE,MAAMkB,EAAC,GAAEhB,EAAC,GAAE,OAAO,KAAK,MAAM,yBAAwBa,IAAET,IAAEa,EAAC,GAAE;AAAG,cAAG,QAAMA,MAAG,SAAOA,MAAG,CAACf,GAAE,OAAK,QAAMe,GAAE,OAAO,CAAC,GAAE;AAAC,iBAAK,MAAM,iBAAgBpB,IAAEgB,IAAEf,IAAEkB,EAAC;AAAE;AAAA,UAAK;AAAC,eAAK,MAAM,0CAA0C,GAAEH;AAAA,QAAG;AAAC,eAAM,EAAE,CAACb,OAAI,KAAK,MAAM,4BAA2BH,IAAEgB,IAAEf,IAAEkB,EAAC,GAAEH,OAAIT;AAAA,MAAG;AAAC,UAAIL;AAAE,UAAG,YAAU,OAAOO,MAAGP,KAAEQ,OAAID,IAAE,KAAK,MAAM,gBAAeA,IAAEC,IAAER,EAAC,MAAIA,KAAEO,GAAE,KAAKC,EAAC,GAAE,KAAK,MAAM,iBAAgBD,IAAEC,IAAER,EAAC,IAAG,CAACA,IAAE,OAAM;AAAA,IAAE;AAAC,QAAGE,OAAIG,MAAGD,OAAIE,IAAE,OAAM;AAAG,QAAGJ,OAAIG,IAAE,OAAOJ;AAAE,QAAGG,OAAIE,IAAE,OAAOJ,OAAIG,KAAE,KAAG,OAAKP,GAAEI,EAAC;AAAE,UAAM,IAAI,MAAM,MAAM;AAAA,EAAC;AAAA,EAAC,cAAa;AAAC,WAAO,GAAG,KAAK,SAAQ,KAAK,OAAO;AAAA,EAAC;AAAA,EAAC,MAAMJ,IAAE;AAAC,OAAGA,EAAC;AAAE,UAAMC,KAAE,KAAK;AAAQ,QAAG,SAAOD,IAAE,OAAO;AAAG,QAAG,OAAKA,IAAE,OAAM;AAAG,QAAIG,IAAEE,KAAE;AAAK,KAACF,KAAEH,GAAE,MAAM,EAAE,KAAGK,KAAEJ,GAAE,MAAI,KAAG,MAAIE,KAAEH,GAAE,MAAM,EAAE,KAAGK,MAAGJ,GAAE,SAAOA,GAAE,MAAI,KAAG,KAAGA,GAAE,MAAI,KAAG,IAAIE,GAAE,CAAC,CAAC,KAAGA,KAAEH,GAAE,MAAM,EAAE,KAAGK,MAAGJ,GAAE,SAAOA,GAAE,MAAI,KAAG,KAAGA,GAAE,MAAI,KAAG,IAAIE,EAAC,KAAGA,KAAEH,GAAE,MAAM,EAAE,KAAGK,KAAEJ,GAAE,MAAI,KAAG,MAAIE,KAAEH,GAAE,MAAM,EAAE,OAAKK,KAAE;AAAI,UAAMH,KAAE,GAAG,SAASF,IAAE,KAAK,OAAO,EAAE,aAAY;AAAE,WAAOK,MAAG,YAAU,OAAOH,MAAG,QAAQ,eAAeA,IAAE,QAAO,EAAC,OAAMG,IAAE,GAAEH;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,QAAG,KAAK,UAAQ,UAAK,KAAK,eAAc,KAAK;AAAO,UAAMF,KAAE,KAAK;AAAI,QAAG,CAACA,GAAE,eAAc,KAAK,SAAO,OAAG,KAAK;AAAO,UAAMC,KAAE,KAAK,SAAQE,KAAEF,GAAE,aAAW,WAASA,GAAE,MAAI,4CAA0C,2BAA0BI,KAAE,IAAI,IAAIJ,GAAE,SAAO,CAAC,GAAG,IAAE,EAAE;AAAE,QAAIC,KAAEF,GAAE,KAAK,CAAAA,OAAG;AAAC,YAAMC,KAAED,GAAE,KAAK,CAAAA,OAAG;AAAC,YAAGA,cAAa,QAAO,WAAUC,MAAKD,GAAE,MAAM,MAAM,EAAE,GAAEK,GAAE,IAAIJ,EAAC;AAAE,eAAM,YAAU,OAAOD,KAAEA,GAAE,QAAQ,4BAA2B,MAAM,IAAEA,OAAI,KAAG,KAAGA,GAAE;AAAA,MAAI,GAAE;AAAE,aAAOC,GAAE,SAAS,CAACD,IAAEK,OAAI;AAAC,cAAMH,KAAED,GAAEI,KAAE,CAAC,GAAED,KAAEH,GAAEI,KAAE,CAAC;AAAE,QAAAL,OAAI,MAAII,OAAI,OAAK,WAASA,KAAE,WAASF,MAAGA,OAAI,KAAGD,GAAEI,KAAE,CAAC,IAAE,YAAUF,KAAE,UAAQD,KAAED,GAAEI,EAAC,IAAEF,KAAE,WAASD,KAAED,GAAEI,KAAE,CAAC,IAAED,KAAE,YAAUD,KAAE,OAAKD,OAAI,OAAKD,GAAEI,KAAE,CAAC,IAAED,KAAE,eAAaD,KAAE,SAAOD,IAAED,GAAEI,KAAE,CAAC,IAAE;AAAA,MAAI,GAAE,EAAEJ,GAAE,QAAQ,CAAAD,OAAGA,OAAI,IAAG,CAAE,KAAK,GAAG;AAAA,IAAC,GAAE,CAAE,KAAK,GAAG;AAAE,UAAK,CAACI,IAAEE,EAAC,IAAEN,GAAE,SAAO,IAAE,CAAC,OAAM,GAAG,IAAE,CAAC,IAAG,EAAE;AAAE,IAAAE,KAAE,MAAIE,KAAEF,KAAEI,KAAE,KAAI,KAAK,WAASJ,KAAE,SAAOA,KAAE;AAAQ,QAAG;AAAC,WAAK,SAAO,IAAI,OAAOA,IAAE,CAAC,GAAGG,EAAC,EAAE,KAAK,EAAE,CAAC;AAAA,IAAC,SAAOL,IAAE;AAAC,WAAK,SAAO;AAAA,IAAE;AAAC,WAAO,KAAK;AAAA,EAAM;AAAA,EAAC,WAAWA,IAAE;AAAC,WAAO,KAAK,0BAAwBA,GAAE,MAAM,GAAG,IAAE,KAAK,aAAW,cAAc,KAAKA,EAAC,IAAE,CAAC,IAAG,GAAGA,GAAE,MAAM,KAAK,CAAC,IAAEA,GAAE,MAAM,KAAK;AAAA,EAAC;AAAA,EAAC,MAAMA,IAAE;AAAC,QAAIC,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,KAAK;AAAQ,QAAG,KAAK,MAAM,SAAQD,IAAE,KAAK,OAAO,GAAE,KAAK,SAAQ,OAAM;AAAG,QAAG,KAAK,OAAM,OAAM,OAAKA;AAAE,QAAG,QAAMA,MAAGC,IAAE,OAAM;AAAG,UAAME,KAAE,KAAK;AAAQ,SAAK,cAAYH,KAAEA,GAAE,MAAM,IAAI,EAAE,KAAK,GAAG;AAAG,UAAMK,KAAE,KAAK,WAAWL,EAAC;AAAE,SAAK,MAAM,KAAK,SAAQ,SAAQK,EAAC;AAAE,UAAMH,KAAE,KAAK;AAAI,SAAK,MAAM,KAAK,SAAQ,OAAMA,EAAC;AAAE,QAAIE,KAAEC,GAAEA,GAAE,SAAO,CAAC;AAAE,QAAG,CAACD,IAAE,SAAQJ,KAAEK,GAAE,SAAO,GAAE,CAACD,MAAGJ,MAAG,GAAEA,MAAII,KAAEC,GAAEL,EAAC;AAAE,aAAQA,KAAE,GAAEA,KAAEE,GAAE,QAAOF,MAAI;AAAC,YAAMM,KAAEJ,GAAEF,EAAC;AAAE,UAAIO,KAAEF;AAAE,UAAGF,GAAE,aAAW,MAAIG,GAAE,WAASC,KAAE,CAACH,EAAC,IAAG,KAAK,SAASG,IAAED,IAAEL,EAAC,GAAE,OAAM,CAAC,CAACE,GAAE,cAAY,CAAC,KAAK;AAAA,IAAM;AAAC,WAAM,CAACA,GAAE,cAAY,KAAK;AAAA,EAAM;AAAA,EAAC,OAAO,SAASH,IAAE;AAAC,WAAO,GAAG,SAASA,EAAC,EAAE;AAAA,EAAS;AAAC;AAAC,SAAS,GAAGA,IAAE;AAAC,QAAMC,KAAE,IAAI,MAAM,GAAG,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAE,qBAAqBD,GAAE,MAAM,IAAIA,GAAE,UAAU,EAAE;AAAE,SAAOC,GAAE,SAAOD,GAAE,QAAOC,GAAE,WAASD,IAAEC;AAAC;AAAC,SAAS,GAAGD,IAAEC,IAAE;AAAC,QAAK,EAAC,QAAOE,IAAC,GAAEF;AAAE,MAAG,QAAME,MAAGH,GAAE,QAAO,OAAOC;AAAE,MAAGE,MAAG,KAAI,MAAM,GAAGF,EAAC;AAAE,SAAOA;AAAC;AAAC,SAAS,GAAGD,IAAEC,IAAE;AAAC,SAAO,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,KAAG,UAAU,CAAC,IAAE,EAAC,MAAKA,IAAE,SAAQD,GAAE,UAAQ,EAAEA,GAAE,OAAO,IAAE,EAAC,EAAE,QAAOA,GAAE,QAAO,YAAWA,GAAE,YAAU,GAAEC;AAAC;AAAC,GAAG,MAAI,IAAG,GAAG,YAAU,IAAG,GAAG,SAAO,SAASD,IAAE;AAAC,MAAG,EAAC,sBAAqBC,KAAE,UAAI,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,SAAOA,KAAED,GAAE,QAAQ,cAAa,MAAM,IAAEA,GAAE,QAAQ,gBAAe,MAAM;AAAC,GAAE,GAAG,WAAS;AAAG,MAAM,MAAI,KAAG,SAASA,IAAEC,IAAEE,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAMH,KAAE,GAAG,EAAC,KAAI,EAAEF,GAAE,WAAU,EAAEC,EAAC,CAAC,GAAE,QAAO,QAAO,SAAQ,EAAC,aAAY,EAAED,GAAE,WAAU,EAAEG,EAAC,CAAC,GAAE,WAAU,UAAKE,GAAE,YAAU,MAAI,KAAI,OAAMA,GAAE,UAAQ,MAAI,YAAU,EAAC,EAAEL,IAAEK,EAAC;AAAE,SAAOC,KAAE,SAASL,IAAE;AAAC,OAAGD,IAAEC,EAAC;AAAA,EAAC,IAAGG,KAAEgC,GAAA,CAAElC,IAAEF,EAAC,MAAII,GAAE,SAAOA,KAAE,QAAQ,QAAQA,EAAC,IAAGE,KAAEF,GAAE,KAAKE,EAAC,IAAEF;AAAE,MAAIA,IAAEE;AAAC,GAAE,WAAU;AAAC,WAAQN,KAAE,EAAC,EAAEC,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAID,GAAEC,EAAC,IAAE,UAAUA,EAAC;AAAE,MAAG;AAAC,WAAO,QAAQ,QAAQ,GAAG,MAAM,MAAKD,EAAC,CAAC;AAAA,EAAC,SAAOA,IAAE;AAAC,WAAO,QAAQ,OAAOA,EAAC;AAAA,EAAC;AAAC;AAAG,IAAI,IAAG,KAAG,EAAE,GAAG,GAAE,KAAG,EAAE,GAAG,GAAE,KAAG,EAAE,EAAE,EAAE,GAAE,MAAG,SAASA,IAAE;AAAC,SAAOA,GAAE,QAAM,SAAQA,GAAE,SAAO,UAASA,GAAE,WAAS,YAAWA;AAAC,GAAE,MAAI,EAAE;AAAE,SAAS,GAAGA,IAAEC,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,GAAG;AAAS,QAAME,KAAE,IAAG,CAAE,IAAIL,IAAEC,EAAC;AAAE,SAAM,YAAUE,MAAG,UAAK,MAAM,QAAQE,EAAC,IAAE,CAACA,EAAC,IAAE,aAAWF,MAAG,MAAM,QAAQE,EAAC,IAAEA,GAAE,CAAC,IAAEA;AAAC;AAAC,SAAS,GAAGL,IAAE;AAAC,SAAO,IAAI,SAAS,CAAAC,OAAG;AAAC,IAAAA,IAAE,SAASD,IAAE;AAAC,YAAK,EAAC,aAAYC,IAAC,GAAED;AAAE,UAAG,OAAKC,IAAE,OAAM,EAAC,aAAY,EAAC,UAAS,EAAC,EAAC,EAAC;AAAE,UAAG,CAACA,IAAE,MAAM,IAAI,MAAM,6CAA6C;AAAE,YAAME,KAAE,EAAC,aAAY,MAAM,QAAQF,EAAC,IAAEA,GAAE,CAAC,IAAEA,IAAC;AAAE,aAAO,IAAG,CAAE,IAAIE,IAAE,wBAAuB,GAAGA,IAAE,wBAAuB,GAAG,KAAK,CAAC,GAAE,IAAG,CAAE,IAAIA,IAAE,wBAAuB,IAAG,CAAE,IAAIA,IAAE,sBAAsB,EAAE,KAAK,CAAAH,QAAG,SAASA,IAAE;AAAC,cAAMC,KAAE,OAAO,OAAO,IAAGD,EAAC;AAAE,eAAOC,GAAE,SAAO,IAAG,CAAE,IAAIA,IAAE,UAAS,GAAGA,IAAE,UAAS,GAAG,MAAM,CAAC,KAAG,KAAK,IAAIA,IAAE,YAAW,GAAGA,IAAE,YAAW,GAAG,MAAM,CAAC,GAAE,IAAG,CAAE,IAAIA,IAAE,iBAAgB,GAAGA,IAAE,iBAAgB,GAAG,MAAM,CAAC,IAAGA;AAAA,MAAC,GAAED,EAAC,GAAG,GAAEG;AAAA,IAAC,GAAE,IAAI,GAAG,UAAU,EAAC,wBAAuB,MAAG,qBAAoB,IAAG,cAAa,QAAO,kBAAiB,OAAG,gBAAe,MAAG,oBAAmB,EAAC,KAAI,MAAG,cAAa,OAAE,EAAE,yBAAwB,CAACH,IAAEC,IAAEE,OAAI,WAASF,MAAG,YAAUA,KAAE,WAASA,KAAEA,IAAE,kBAAkBD,IAAEC,IAAEE,IAAE;AAAC,UAAG,CAACA,GAAE,SAAS,2BAA2B,GAAE,OAAOF;AAAA,IAAC,GAAE,EAAE,MAAMD,EAAC,CAAC,CAAC;AAAA,EAAC,GAAE;AAAC;AAAC,SAAS,GAAGA,IAAEC,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,KAAG,UAAU,CAAC;AAAE,QAAK,EAAC,iBAAgBE,KAAE,MAAK,kBAAiBH,KAAE,KAAI,cAAaE,KAAE,MAAK,gBAAeE,KAAE,MAAK,SAAQC,KAAE,MAAI,GAAEP,IAAEQ,KAAEJ,MAAG,YAAU,OAAOA,MAAG,WAASA,GAAE,aAAW,cAAY,QAAOK,KAAE,EAAC,UAASR,IAAE,UAAS,GAAE,CAAE,SAASA,EAAC,GAAE,SAAQI,IAAE,MAAK,SAASH,IAAE,EAAE,GAAE,MAAKM,IAAE,MAAK,YAAU,OAAOD,KAAEA,GAAE,QAAQ,MAAK,EAAE,IAAE,MAAI;AAAE,SAAM,WAASC,OAAIC,GAAE,OAAKH,MAAG,YAAU,OAAOA,KAAEA,GAAE,MAAM,GAAG,EAAE,CAAC,IAAE,KAAIH,OAAI,WAASH,GAAE,gBAAcA,GAAE,cAAY,OAAOA,GAAE,WAAW,IAAGS,GAAE,QAAMT,KAAGS;AAAC;AAAC,SAAS,GAAGT,IAAEC,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,KAAG,UAAU,CAAC,GAAEE,KAAE;AAAK,MAAG;AAAC,IAAAL,GAAE,YAAY,SAAS,CAAC,EAAE,aAAWK,KAAEL,GAAE,YAAY,SAAS,CAAC;AAAA,EAAE,SAAOA,IAAE;AAAA,EAAC;AAAC,MAAG,CAACK,IAAE,MAAM,IAAI,MAAM,wCAAwC;AAAE,QAAK,EAAC,UAAS,EAAC,MAAKH,IAAE,QAAOE,IAAC,EAAC,GAAEC,IAAE,CAACC,IAAEC,IAAEC,EAAC,IAAEJ,GAAE,MAAM,KAAI,CAAC,GAAEK,KAAE,SAASF,IAAE,EAAE;AAAE,MAAGE,MAAG,KAAI;AAAC,UAAMT,KAAE,IAAI,MAAM,qBAAqBS,EAAC,IAAID,EAAC,EAAE;AAAE,UAAMR,GAAE,SAAOS,IAAET;AAAA,EAAC;AAAC,SAAO,GAAGE,IAAE,EAAED,EAAC,GAAEE,EAAC;AAAC;AAAC,SAAS,GAAGH,IAAE;AAAC,UAAO,OAAOA,EAAC;AAAE,IAAC,KAAI;AAAK,aAAM;AAAA,IAAY,KAAI;AAAA,IAAK,KAAI;AAAK,aAAM;AAAA,IAAU;AAAQ,aAAO,SAAS,OAAOA,EAAC,GAAE,EAAE;AAAA;AAAE;AAAC,SAAS,GAAGA,IAAEC,IAAEE,IAAE;AAAC,SAAOA,KAAEF,KAAEA,GAAED,EAAC,IAAEA,MAAGA,MAAGA,GAAE,SAAOA,KAAE,QAAQ,QAAQA,EAAC,IAAGC,KAAED,GAAE,KAAKC,EAAC,IAAED;AAAE;AAAC,MAAM,+BAAYA,IAAE;AAAC,SAAO,WAAU;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,QAAG;AAAC,aAAO,QAAQ,QAAQH,GAAE,MAAM,MAAKC,EAAC,CAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,aAAO,QAAQ,OAAOA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC,IAAG,SAASA,IAAEC,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAK,EAAC,SAAQE,KAAE,OAAE,GAAEF,IAAED,KAAE,GAAG,EAAC,KAAI,EAAEF,GAAE,WAAU,EAAEC,EAAC,CAAC,GAAE,QAAO,YAAW,SAAQ,EAAC,QAAO,8BAA6B,OAAM,KAAG,EAAC,EAAED,IAAEG,EAAC;AAAE,SAAO,GAAGiC,GAAA,CAAElC,IAAEF,EAAC,IAAG,SAASG,IAAE;AAAC,WAAO,GAAGH,IAAEG,EAAC,GAAE,GAAGA,GAAE,MAAK,GAAG,SAASH,IAAE;AAAC,aAAO,GAAG,GAAGA,EAAC,IAAG,SAASA,IAAE;AAAC,cAAME,KAAE,GAAGF,IAAEC,IAAEI,EAAC;AAAE,eAAO,GAAGF,IAAED,IAAEG,EAAC;AAAA,MAAC,GAAE;AAAA,IAAC,GAAE;AAAA,EAAC,GAAE;AAAC,GAAE;AAAE,SAAS,GAAGL,IAAEC,IAAEE,IAAE;AAAC,SAAOA,KAAEF,KAAEA,GAAED,EAAC,IAAEA,MAAGA,MAAGA,GAAE,SAAOA,KAAE,QAAQ,QAAQA,EAAC,IAAGC,KAAED,GAAE,KAAKC,EAAC,IAAED;AAAE;AAAC,MAAM,KAAG,IAAI,SAASA,IAAEC,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAME,MAAE,SAASL,IAAE;AAAC,QAAG,CAACA,MAAG,QAAMA,WAAQ,EAAC;AAAE,QAAIC,KAAED;AAAE,UAAMG,KAAE,EAAC;AAAE,OAAE;AAAC,MAAAA,GAAE,KAAKF,EAAC,GAAEA,KAAE,GAAE,CAAE,QAAQA,EAAC;AAAA,IAAC,SAAOA,MAAG,QAAMA;AAAG,WAAOE;AAAA,EAAC,GAAE,EAAEF,EAAC,CAAC;AAAE,EAAAI,GAAE,MAAM,CAACL,IAAEC,OAAID,GAAE,SAAOC,GAAE,SAAO,IAAEA,GAAE,SAAOD,GAAE,SAAO,KAAG,GAAE;AAAE,MAAIE,KAAE;AAAG,UAAO,SAASF,IAAEC,IAAEE,IAAE;AAAC,QAAG,cAAY,OAAOH,GAAE,EAAE,GAAE;AAAqB,UAASU,KAAT,SAAWV,IAAE;AAAC,YAAG;AAAC,iBAAK,EAAEK,KAAEC,GAAE,MAAK,EAAG,QAAM,KAAIN,KAAEC,GAAEI,GAAE,KAAK,MAAIL,GAAE,MAAK;AAAC,gBAAG,CAAC,GAAGA,EAAC,GAAE,OAAO,KAAKA,GAAE,KAAKU,IAAEN,OAAIA,KAAE,GAAG,KAAK,MAAKF,KAAE,IAAI,MAAG,CAAC,EAAE;AAAE,YAAAF,KAAEA,GAAE;AAAA,UAAC;AAAC,UAAAE,KAAE,GAAGA,IAAE,GAAEF,EAAC,IAAEE,KAAEF;AAAA,QAAC,SAAOA,IAAE;AAAC,aAAGE,OAAIA,KAAE,IAAI,OAAI,GAAEF,EAAC;AAAA,QAAC;AAAA,MAAC;AAA/M,UAAIK,IAAEH,IAAEE,IAAEE,KAAEN,GAAE,EAAE,GAAE;AAA8L,UAAGU,IAAE,EAAEJ,GAAE,QAAO;AAAC,YAAIC,KAAE,SAASP,IAAE;AAAC,cAAG;AAAC,YAAAK,GAAE,QAAMC,GAAE,QAAO;AAAA,UAAC,SAAON,IAAE;AAAA,UAAC;AAAC,iBAAOA;AAAA,QAAC;AAAE,YAAGE,MAAGA,GAAE,MAAK,OAAOA,GAAE,KAAKK,KAAG,SAASP,IAAE;AAAC,gBAAMO,GAAEP,EAAC;AAAA,QAAC,GAAE;AAAE,QAAAO,IAAE;AAAA,MAAC;AAAC,aAAOL;AAAA,IAAC;AAAC,QAAG,EAAE,YAAWF,KAAG,MAAM,IAAI,UAAU,wBAAwB;AAAE,aAAQQ,KAAE,EAAC,EAAEC,KAAE,GAAEA,KAAET,GAAE,QAAOS,MAAID,GAAE,KAAKR,GAAES,EAAC,CAAC;AAAE,YAAO,SAAST,IAAEC,IAAEE,IAAE;AAAC,UAAIE,IAAEH,IAAEE,KAAE;AAAG,cAAO,SAASE,GAAEC,IAAE;AAAC,YAAG;AAAC,iBAAK,EAAEH,KAAEJ,GAAE,WAAS,CAACG,MAAG,CAACA,IAAE,UAAQI,KAAEN,GAAEG,EAAC,MAAIG,GAAE,MAAK;AAAC,gBAAG,CAAC,GAAGA,EAAC,GAAE,OAAO,KAAKA,GAAE,KAAKD,IAAEJ,OAAIA,KAAE,GAAG,KAAK,MAAKG,KAAE,IAAI,MAAG,CAAC,EAAE;AAAE,YAAAE,KAAEA,GAAE;AAAA,UAAC;AAAC,UAAAF,KAAE,GAAGA,IAAE,GAAEE,EAAC,IAAEF,KAAEE;AAAA,QAAC,SAAOP,IAAE;AAAC,aAAGK,OAAIA,KAAE,IAAI,OAAI,GAAEL,EAAC;AAAA,QAAC;AAAA,MAAC,IAAE,EAAEK;AAAA,IAAC,GAAEG,KAAG,SAASR,IAAE;AAAC,aAAOC,GAAEO,GAAER,EAAC,CAAC;AAAA,IAAC,IAAGG,EAAC;AAAA,EAAC,GAAEE,KAAG,SAASA,IAAE;AAAC,WAAOD,KAAE,WAAU;AAAC,cAAO,SAASD,IAAED,IAAE;AAAC,YAAG;AAAC,cAAIE,KAAE,GAAG,GAAGJ,IAAEK,EAAC,IAAG,SAASL,IAAE;AAAC,gBAAG,gBAAcA,GAAE,MAAK,MAAM,IAAI,MAAM,yBAAyBC,EAAC,EAAE;AAAA,UAAC,GAAE;AAAA,QAAC,SAAOD,IAAE;AAAC,iBAAOE,GAAEF,EAAC;AAAA,QAAC;AAAC,eAAOI,MAAGA,GAAE,OAAKA,GAAE,KAAK,QAAOF,EAAC,IAAEE;AAAA,MAAC,GAAE,IAAG,SAASH,IAAE;AAAC,cAAMG,KAAEH;AAAE,gBAAO,WAAU;AAAC,cAAG,QAAMG,GAAE,QAAO,OAAOF,KAAE,MAAG,GAAG,GAAGF,IAAEK,IAAE,EAAC,GAAGF,IAAE,WAAU,OAAG,CAAC;AAAE,gBAAMF;AAAA,QAAC,IAAE;AAAA,MAAC,GAAE;AAAA,IAAC,IAAGK,MAAE,WAAU;AAAC,UAAGJ,IAAE,OAAO,GAAG,GAAGF,IAAEK,IAAE,EAAC,GAAGF,IAAE,WAAU,OAAG,CAAC;AAAA,IAAC,SAAMG,GAAE,OAAKA,GAAE,KAAKF,EAAC,IAAEA,IAAE;AAAE,QAAIA,IAAEE;AAAA,EAAC,KAAI,WAAU;AAAC,WAAM;AAAA,EAAE,GAAE;AAAC,GAAE;AAAE,SAAS,GAAGN,IAAE;AAAC,SAAO,WAAU;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,QAAG;AAAC,aAAO,QAAQ,QAAQH,GAAE,MAAM,MAAKC,EAAC,CAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,aAAO,QAAQ,OAAOA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC;AAAC,SAAS,KAAI;AAAC;AAAC,SAAS,GAAGA,IAAEC,IAAE;AAAC,EAAM,OAAOD,MAAGA,GAAE,OAAKA,GAAE,KAAK,EAAE,IAAE,QAAQ,SAAQ;AAAC;AAAC,MAAM,KAAG,eAAa,OAAO,SAAO,OAAO,aAAW,OAAO,WAAS,OAAO,iBAAiB,KAAG;AAAa,SAAS,GAAGA,IAAEC,IAAEE,IAAE;AAAC,MAAG,CAACH,GAAE,GAAE;AAAC,QAAGG,cAAa,IAAG;AAAC,UAAG,CAACA,GAAE,GAAE,OAAO,MAAKA,GAAE,IAAE,GAAG,KAAK,MAAKH,IAAEC,EAAC;AAAG,UAAEA,OAAIA,KAAEE,GAAE,IAAGA,KAAEA,GAAE;AAAA,IAAC;AAAC,QAAGA,MAAGA,GAAE,aAAY,KAAKA,GAAE,KAAK,GAAG,KAAK,MAAKH,IAAEC,EAAC,GAAE,GAAG,KAAK,MAAKD,IAAE,CAAC,CAAC;AAAE,IAAAA,GAAE,IAAEC,IAAED,GAAE,IAAEG;AAAE,UAAME,KAAEL,GAAE;AAAE,IAAAK,MAAGA,GAAEL,EAAC;AAAA,EAAC;AAAC;AAAC,MAAM,MAAG,WAAU;AAAC,WAASA,KAAG;AAAA,EAAC;AAAC,SAAOA,GAAE,UAAU,OAAK,SAASC,IAAEE,IAAE;AAAC,UAAME,KAAE,IAAIL,MAAEE,KAAE,KAAK;AAAE,QAAGA,IAAE;AAAC,YAAMF,KAAE,IAAEE,KAAED,KAAEE;AAAE,UAAGH,IAAE;AAAC,YAAG;AAAC,aAAGK,IAAE,GAAEL,GAAE,KAAK,CAAC,CAAC;AAAA,QAAC,SAAOA,IAAE;AAAC,aAAGK,IAAE,GAAEL,EAAC;AAAA,QAAC;AAAC,eAAOK;AAAA,MAAC;AAAC,aAAO;AAAA,IAAI;AAAC,WAAO,KAAK,IAAE,SAASL,IAAE;AAAC,UAAG;AAAC,cAAME,KAAEF,GAAE;AAAE,YAAEA,GAAE,IAAE,GAAGK,IAAE,GAAEJ,KAAEA,GAAEC,EAAC,IAAEA,EAAC,IAAEC,KAAE,GAAGE,IAAE,GAAEF,GAAED,EAAC,CAAC,IAAE,GAAGG,IAAE,GAAEH,EAAC;AAAA,MAAC,SAAOF,IAAE;AAAC,WAAGK,IAAE,GAAEL,EAAC;AAAA,MAAC;AAAA,IAAC,GAAEK;AAAA,EAAC,GAAEL;AAAC,IAAE;AAAE,SAAS,GAAGA,IAAE;AAAC,SAAOA,cAAa,MAAI,IAAEA,GAAE;AAAC;AAAC,MAAM,KAAG,IAAI,SAASA,IAAEC,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,MAAG,SAAKA,GAAE,kBAAiB,GAAGH,IAAEC,IAAEE,EAAC;AAAE,QAAME,KAAE,GAAG,EAAC,KAAI,EAAEL,GAAE,YAAWE,KAAE,EAAED,EAAC,GAAEC,GAAE,SAAS,GAAG,IAAEA,KAAEA,KAAE,OAAM,QAAO,SAAO,EAAEF,IAAEG,EAAC;AAAE,MAAID;AAAE,SAAO,GAAGkC,GAAA,CAAE/B,IAAEL,EAAC,IAAG,SAASC,IAAE;AAAC,OAAGD,IAAEC,EAAC;AAAA,EAAC,GAAE;AAAC,GAAE;AAAE,IAAI,KAAG,EAAE,GAAG,GAAE,KAAG,EAAE,EAAE,EAAE;AAAE,MAAM,+BAAYD,IAAE;AAAC,SAAO,WAAU;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,QAAG;AAAC,aAAO,QAAQ,QAAQH,GAAE,MAAM,MAAKC,EAAC,CAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,aAAO,QAAQ,OAAOA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC,IAAG,SAASA,IAAEC,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAME,KAAE,EAAC;AAAE,MAAG,YAAU,OAAOF,GAAE,SAAO,YAAU,OAAOA,GAAE,MAAM,OAAM;AAAC,QAAIH,KAAE,SAASG,GAAE,MAAM,KAAK;AAAI,gBAAU,OAAOA,GAAE,MAAM,QAAMH,KAAE,GAAGA,EAAC,GAAGG,GAAE,MAAM,GAAG,KAAIE,GAAE,QAAML;AAAA,EAAC;AAAC,QAAME,KAAE,GAAG,EAAC,KAAI,EAAEF,GAAE,WAAU,EAAEC,EAAC,CAAC,GAAE,QAAO,OAAM,SAAQI,IAAC,EAAEL,IAAEG,EAAC;AAAE,SAAOG,KAAE,SAASL,IAAE;AAAC,QAAG,GAAGD,IAAEC,EAAC,GAAEI,GAAE,SAAO,QAAMJ,GAAE,QAAO;AAAC,YAAMD,KAAE,IAAI,MAAM,8CAA8CC,GAAE,MAAM,EAAE;AAAE,YAAMD,GAAE,SAAOC,GAAE,QAAOD;AAAA,IAAC;AAAC,WAAOG,GAAE,YAAU,YAAY,MAAI;AAAC,MAAAA,GAAE,SAASF,EAAC;AAAA,IAAC,IAAG,CAAC,GAAEA,GAAE;AAAA,EAAI,IAAGG,KAAEgC,GAAA,CAAElC,IAAEF,EAAC,MAAII,GAAE,SAAOA,KAAE,QAAQ,QAAQA,EAAC,IAAGE,KAAEF,GAAE,KAAKE,EAAC,IAAEF;AAAE,MAAIA,IAAEE;AAAC,GAAE,EAAE,KAAG,MAAI;AAAC,GAAE,+BAAYN,IAAE;AAAC,SAAO,WAAU;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,QAAG;AAAC,aAAO,QAAQ,QAAQH,GAAE,MAAM,MAAKC,EAAC,CAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,aAAO,QAAQ,OAAOA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC,IAAG,SAASA,IAAEC,IAAEE,IAAE;AAAC,EAAAA,GAAE,QAAMA,GAAE,MAAI,EAAEH,GAAE,WAAU,EAAEC,EAAC,CAAC;AAAG,QAAMI,KAAE,GAAGF,IAAEH,IAAE,EAAE;AAAE,SAAOI,KAAE,SAASH,IAAE;AAAC,WAAO,GAAGD,IAAEC,EAAC,GAAEA;AAAA,EAAC,IAAGC,KAAEkC,GAAA,CAAE/B,IAAEL,EAAC,MAAIE,GAAE,SAAOA,KAAE,QAAQ,QAAQA,EAAC,IAAGE,KAAEF,GAAE,KAAKE,EAAC,IAAEF;AAAE,MAAIA,IAAEE;AAAC,GAAE,EAAE,qBAAG,UAASJ,IAAE;AAAC,SAAO,WAAU;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,QAAG;AAAC,aAAO,QAAQ,QAAQH,GAAE,MAAM,MAAKC,EAAC,CAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,aAAO,QAAQ,OAAOA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC,IAAG,SAASA,IAAEC,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAME,KAAE,GAAG,EAAC,KAAI,EAAEL,GAAE,WAAU,EAAEC,EAAC,CAAC,GAAE,QAAO,UAAQ,EAAED,IAAEG,EAAC;AAAE,SAAOC,KAAE,SAASH,IAAE;AAAC,OAAGD,IAAEC,EAAC;AAAA,EAAC,IAAGC,KAAEkC,GAAA,CAAE/B,IAAEL,EAAC,MAAIE,GAAE,SAAOA,KAAE,QAAQ,QAAQA,EAAC,IAAGE,KAAEF,GAAE,KAAKE,EAAC,IAAEF;AAAE,MAAIA,IAAEE;AAAC,GAAE,EAAE,qBAAG,UAASJ,IAAE;AAAC,SAAO,WAAU;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,QAAG;AAAC,aAAO,QAAQ,QAAQH,GAAE,MAAM,MAAKC,EAAC,CAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,aAAO,QAAQ,OAAOA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC,IAAG,SAASA,IAAEC,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,UAAO,SAASE,IAAEH,IAAE;AAAC,QAAG;AAAC,UAAIE,MAAGE,KAAE,GAAGN,IAAEC,IAAEE,EAAC,GAAEI,KAAE,WAAU;AAAC,eAAM;AAAA,MAAE,GAAEC,KAAED,KAAEA,GAAED,EAAC,IAAEA,MAAGA,MAAGA,GAAE,SAAOA,KAAE,QAAQ,QAAQA,EAAC,IAAGC,KAAED,GAAE,KAAKC,EAAC,IAAED;AAAA,IAAG,SAAON,IAAE;AAAC,aAAOE,GAAEF,EAAC;AAAA,IAAC;AAAC,QAAIM,IAAEC,IAAEC;AAAE,WAAOJ,MAAGA,GAAE,OAAKA,GAAE,KAAK,QAAOF,EAAC,IAAEE;AAAA,EAAC,GAAE,IAAG,SAASJ,IAAE;AAAC,QAAG,QAAMA,GAAE,QAAO,OAAM;AAAG,UAAMA;AAAA,EAAC,GAAE;AAAC,GAAE;AAAE,SAAS,GAAGA,IAAEC,IAAEE,IAAE;AAAC,SAAOA,KAAEF,KAAEA,GAAED,EAAC,IAAEA,MAAGA,MAAGA,GAAE,SAAOA,KAAE,QAAQ,QAAQA,EAAC,IAAGC,KAAED,GAAE,KAAKC,EAAC,IAAED;AAAE;AAAC,MAAM,+BAAYA,IAAE;AAAC,SAAO,WAAU;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,QAAG;AAAC,aAAO,QAAQ,QAAQH,GAAE,MAAM,MAAKC,EAAC,CAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,aAAO,QAAQ,OAAOA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC,IAAG,SAASA,IAAEC,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAME,KAAE,GAAG,EAAC,KAAI,EAAEL,GAAE,WAAU,EAAEC,EAAC,GAAE,GAAG,GAAE,QAAO,YAAW,SAAQ,EAAC,QAAO,8BAA6B,OAAME,GAAE,OAAK,aAAW,KAAG,EAAC,EAAEH,IAAEG,EAAC;AAAE,SAAO,GAAGiC,GAAA,CAAE/B,IAAEL,EAAC,IAAG,SAASK,IAAE;AAAC,WAAO,GAAGL,IAAEK,EAAC,GAAE,GAAGA,GAAE,MAAK,GAAG,SAASH,IAAE;AAAC,UAAG,CAACA,IAAE,MAAM,IAAI,MAAM,mDAAmD;AAAE,aAAO,GAAG,GAAGA,EAAC,IAAG,SAASA,IAAE;AAAC,cAAME,KAAE,EAAEH,EAAC;AAAE,YAAIK,MAAE,SAASN,IAAEC,IAAEE,IAAE;AAAC,cAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,KAAG,UAAU,CAAC,GAAEH,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,KAAG,UAAU,CAAC;AAAE,gBAAME,KAAE,GAAE,CAAE,KAAKH,IAAE,GAAG,GAAE,EAAC,aAAY,EAAC,UAASK,MAAE,GAAEN,IAAEO,KAAED,GAAE,KAAK,CAAAN,OAAG;AAAC,kBAAMC,MAAE,SAASD,IAAE;AAAC,kBAAG;AAAC,uBAAOA,GAAE,QAAQ,sBAAqB,EAAE;AAAA,cAAC,SAAOA,IAAE;AAAC,sBAAM,IAAI,EAAEA,IAAE,yBAAyB;AAAA,cAAC;AAAA,YAAC,GAAEA,GAAE,IAAI,GAAE,EAAC,UAAS,EAAC,MAAKG,IAAC,EAAC,GAAEH;AAAE,mBAAO,GAAGG,IAAE,QAAMC,KAAE,mBAAmB,EAAEH,EAAC,CAAC,IAAE,EAAE,GAAE,CAAE,SAAS,mBAAmBG,EAAC,GAAE,mBAAmBH,EAAC,CAAC,CAAC,GAAEI,EAAC;AAAA,UAAC,GAAE;AAAE,iBAAOH,KAAEK,KAAEA,GAAE,QAAQ,CAAAP,OAAGA,GAAE,aAAW,WAASA,GAAE,QAAMA,GAAE,aAAWG,GAAE,QAAQ,OAAM,EAAE,IAAG;AAAA,QAAC,GAAED,IAAE,EAAEF,GAAE,kBAAgBA,GAAE,UAAU,GAAEI,IAAED,GAAE,SAAQA,GAAE,WAAW;AAAE,eAAOA,GAAE,SAAOG,MAAE,SAASN,IAAEC,IAAE;AAAC,iBAAOD,GAAE,QAAQ,CAAAA,OAAG,GAAGA,GAAE,UAASC,IAAE,EAAC,WAAU,MAAG,GAAE;AAAA,QAAC,GAAEK,IAAEH,GAAE,IAAI,IAAG,GAAGE,IAAEC,IAAEH,GAAE,OAAO;AAAA,MAAC,GAAE;AAAA,IAAC,GAAE;AAAA,EAAC,GAAE;AAAC,GAAE;AAAE,SAAS,GAAGH,IAAE;AAAC,SAAO,WAAU;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,QAAG;AAAC,aAAO,QAAQ,QAAQH,GAAE,MAAM,MAAKC,EAAC,CAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,aAAO,QAAQ,OAAOA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC;AAAC,MAAM,KAAG,IAAI,SAASA,IAAEC,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAME,KAAE,GAAG,EAAC,KAAI,EAAEL,GAAE,WAAU,EAAEC,EAAC,CAAC,GAAE,QAAO,OAAM,SAAQ,EAAC,QAAO,cAAY,EAAE,mBAAkB,CAAC,EAAE,GAAC,EAAED,IAAEG,EAAC;AAAE,SAAO,GAAGiC,GAAA,CAAE/B,IAAEL,EAAC,IAAG,SAASC,IAAE;AAAC,WAAO,GAAGD,IAAEC,EAAC,GAAE,GAAGA,GAAE,MAAK,GAAG,SAASD,IAAE;AAAC,aAAO,GAAGC,IAAED,IAAEG,GAAE,OAAO;AAAA,IAAC,GAAE;AAAA,EAAC,GAAE;AAAC,GAAE;AAAE,SAAS,GAAGH,IAAEC,IAAEE,IAAE;AAAC,SAAOA,KAAEF,KAAEA,GAAED,EAAC,IAAEA,MAAGA,MAAGA,GAAE,SAAOA,KAAE,QAAQ,QAAQA,EAAC,IAAGC,KAAED,GAAE,KAAKC,EAAC,IAAED;AAAE;AAAC,MAAM,KAAG,IAAI,SAASA,IAAEC,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAME,KAAE,GAAG,EAAC,KAAI,EAAEL,GAAE,WAAU,EAAEC,EAAC,CAAC,GAAE,QAAO,OAAK,EAAED,IAAEG,EAAC;AAAE,SAAO,GAAGiC,GAAA,CAAE/B,IAAEL,EAAC,IAAG,SAASC,IAAE;AAAC,QAAII;AAAE,WAAO,GAAGL,IAAEC,EAAC,IAAE,SAASD,IAAEC,IAAE;AAAC,UAAIE,KAAEH,IAAE;AAAE,aAAOG,MAAGA,GAAE,OAAKA,GAAE,KAAKF,EAAC,IAAEA,IAAE;AAAA,IAAC,IAAG,WAAU;AAAC,aAAO,GAAGA,GAAE,aAAY,GAAG,SAASD,IAAE;AAAC,QAAAK,KAAEL;AAAA,MAAC,GAAE;AAAA,IAAC,KAAI,WAAU;AAAC,aAAO,GAAGC,IAAEI,IAAEF,GAAE,OAAO;AAAA,IAAC,GAAE;AAAA,EAAC,GAAE;AAAC,GAAE,EAAE,KAAG,IAAI,SAASH,IAAEC,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAK,EAAC,QAAOE,KAAE,UAAQ,GAAEF;AAAE,MAAG,aAAWE,MAAG,WAASA,IAAE,MAAM,IAAI,EAAE,EAAC,MAAK,EAAC,MAAK,EAAE,uBAAoB,EAAE,0BAA0BA,EAAC,EAAE;AAAE,SAAM,WAASA,KAAE,GAAGL,IAAEC,IAAEE,EAAC,IAAE,GAAGH,IAAEC,IAAEE,EAAC;AAAC,GAAE,EAAE,KAAG,CAAAH,OAAGA;AAAE,SAAS,GAAGA,IAAE;AAAC,SAAO,IAAI,GAAG,WAAW,EAAC,qBAAoB,MAAK,QAAO,MAAG,kBAAiB,OAAG,mBAAkB,MAAG,EAAE,MAAM,GAAG,EAAC,UAAS,EAAC,aAAY,QAAO,WAAU,EAAC,WAAU,IAAE,EAAE,UAAS,EAAC,OAAM,IAAE,EAAE,OAAM,EAAC,MAAKA,MAAE,EAAC,EAAE,GAAG,CAAC;AAAC;AAAC,SAAS,GAAGA,IAAEC,IAAE;AAAC,QAAME,KAAE,EAAC,GAAGH,IAAC;AAAE,aAAUA,MAAKG,IAAEA,GAAE,eAAeH,EAAC,MAAIG,GAAEH,EAAC,KAAG,YAAU,OAAOG,GAAEH,EAAC,KAAG,OAAKA,GAAE,QAAQ,GAAG,KAAGG,GAAE,GAAGF,EAAC,IAAID,EAAC,EAAE,IAAE,GAAGG,GAAEH,EAAC,GAAEC,EAAC,GAAE,OAAOE,GAAEH,EAAC,KAAG,UAAK,MAAM,KAAKA,EAAC,MAAIG,GAAE,GAAGF,EAAC,IAAID,EAAC,EAAE,IAAEG,GAAEH,EAAC,GAAE,OAAOG,GAAEH,EAAC;AAAI,SAAOG;AAAC;AAAC,SAAS,GAAGH,IAAEC,IAAEE,IAAE;AAAC,SAAOA,KAAEF,KAAEA,GAAED,EAAC,IAAEA,MAAGA,MAAGA,GAAE,SAAOA,KAAE,QAAQ,QAAQA,EAAC,IAAGC,KAAED,GAAE,KAAKC,EAAC,IAAED;AAAE;AAAC,SAAS,GAAGA,IAAE;AAAC,SAAO,WAAU;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,QAAG;AAAC,aAAO,QAAQ,QAAQH,GAAE,MAAM,MAAKC,EAAC,CAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,aAAO,QAAQ,OAAOA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC;AAAC,MAAM,KAAG,IAAI,SAASA,IAAEC,IAAEE,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAMH,KAAE,GAAG,EAAC,KAAI,EAAEF,GAAE,WAAU,EAAEC,EAAC,CAAC,GAAE,QAAO,UAAS,SAAQ,EAAC,cAAaE,IAAC,EAAC,EAAEH,IAAEK,EAAC;AAAE,SAAO,GAAG+B,GAAA,CAAElC,IAAEF,EAAC,IAAG,SAASC,IAAE;AAAC,QAAG,GAAGD,IAAEC,EAAC,GAAE,QAAMA,GAAE,UAAQ,QAAMA,GAAE,QAAO,MAAM,GAAGA,EAAC;AAAA,EAAC,GAAE;AAAC,GAAE,EAAE,KAAG,IAAI,SAASD,IAAEC,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAK,EAAC,cAAaE,IAAE,SAAQH,KAAE,IAAE,GAAEC,IAAEC,KAAE,EAAC,QAAO,8BAA6B,SAAQF,IAAC;AAAE,EAAAG,OAAID,GAAE,KAAGC;AAAG,QAAMC,KAAE,GAAG,EAAC,KAAI,EAAEN,GAAE,WAAU,EAAEC,EAAC,CAAC,GAAE,QAAO,QAAO,SAAQG,IAAE,MAAK,GAAGJ,GAAE,WAAW,GAAC,EAAEA,IAAEG,EAAC;AAAE,SAAO,GAAGiC,GAAA,CAAE9B,IAAEN,EAAC,IAAG,SAASC,IAAE;AAAC,WAAO,GAAGD,IAAEC,EAAC,GAAE,GAAGA,GAAE,MAAK,GAAG,SAASD,IAAE;AAAC,YAAMG,MAAGC,KAAEJ,IAAE,IAAI,GAAG,UAAU,EAAC,gBAAe,MAAG,qBAAoB,MAAG,eAAc,MAAG,EAAE,MAAMI,EAAC,IAAGC,KAAE,IAAG,CAAE,IAAIF,IAAE,8CAA8C,GAAED,KAAE,IAAG,CAAE,IAAIC,IAAE,uCAAuC;AAAE,UAAIC;AAAE,UAAG,CAACC,IAAE,MAAM,GAAGJ,IAAE,0BAA0B;AAAE,aAAM,EAAC,OAAMI,IAAE,eAAcH,IAAC;AAAA,IAAC,GAAE;AAAA,EAAC,GAAE;AAAC,KAAI,KAAG;AAA8B,SAAS,GAAGF,IAAEC,IAAEE,IAAE;AAAC,SAAOA,KAAEF,KAAEA,GAAED,EAAC,IAAEA,MAAGA,MAAGA,GAAE,SAAOA,KAAE,QAAQ,QAAQA,EAAC,IAAGC,KAAED,GAAE,KAAKC,EAAC,IAAED;AAAE;AAAC,MAAM,+BAAYA,IAAE;AAAC,SAAO,WAAU;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,QAAG;AAAC,aAAO,QAAQ,QAAQH,GAAE,MAAM,MAAKC,EAAC,CAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,aAAO,QAAQ,OAAOA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC,IAAG,SAASA,IAAE;AAAC,MAAIC,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAME,KAAEF,GAAE,QAAM,KAAII,KAAE,GAAG,EAAC,KAAI,EAAEL,GAAE,WAAUG,EAAC,GAAE,QAAO,YAAW,SAAQ,EAAC,QAAO,8BAA6B,OAAM,KAAG,EAAC,EAAEH,IAAEC,EAAC;AAAE,SAAO,GAAGmC,GAAA,CAAE/B,IAAEL,EAAC,IAAG,SAASG,IAAE;AAAC,WAAO,GAAGH,IAAEG,EAAC,GAAE,GAAGA,GAAE,MAAK,GAAG,SAASH,IAAE;AAAC,aAAO,GAAG,GAAGA,EAAC,IAAG,SAASA,IAAE;AAAC,cAAMK,MAAE,SAASL,IAAE;AAAC,cAAG;AAAC,kBAAK,CAACC,EAAC,IAAED,GAAE,YAAY,UAAS,EAAC,UAAS,EAAC,MAAK,EAAC,oBAAmBG,IAAE,yBAAwBE,IAAC,IAAE,GAAEJ;AAAE,mBAAO,WAASE,MAAG,WAASE,KAAE,EAAC,MAAK,SAAS,OAAOF,EAAC,GAAE,EAAE,GAAE,WAAU,GAAGE,EAAC,GAAC,GAAE;AAAA,UAAI,SAAOL,IAAE;AAAA,UAAC;AAAC,iBAAO;AAAA,QAAI,GAAEA,EAAC;AAAE,eAAO,GAAGG,IAAEE,IAAEJ,GAAE,OAAO;AAAA,MAAC,GAAE;AAAA,IAAC,GAAE;AAAA,EAAC,GAAE;AAAC,GAAE;AAAE,SAAS,GAAGD,IAAEC,IAAEE,IAAE;AAAC,SAAOA,KAAEF,KAAEA,GAAED,EAAC,IAAEA,MAAGA,MAAGA,GAAE,SAAOA,KAAE,QAAQ,QAAQA,EAAC,IAAGC,KAAED,GAAE,KAAKC,EAAC,IAAED;AAAE;AAAC,MAAM,+BAAYA,IAAE;AAAC,SAAO,WAAU;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,QAAG;AAAC,aAAO,QAAQ,QAAQH,GAAE,MAAM,MAAKC,EAAC,CAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,aAAO,QAAQ,OAAOA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC,IAAG,SAASA,IAAEC,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAK,EAAC,SAAQE,KAAE,UAAIF,IAAED,KAAE,GAAG,EAAC,KAAI,EAAEF,GAAE,WAAU,EAAEC,EAAC,CAAC,GAAE,QAAO,UAAS,SAAQ,EAAC,QAAO,8BAA6B,gBAAeD,GAAE,QAAQ,cAAc,KAAG,kCAAgC,EAAC,EAAEA,IAAEG,EAAC;AAAE,SAAO,GAAGiC,GAAA,CAAElC,IAAEF,EAAC,IAAG,SAASG,IAAE;AAAC,WAAO,GAAGH,IAAEG,EAAC,GAAE,GAAGA,GAAE,MAAK,GAAG,SAASH,IAAE;AAAC,aAAO,GAAG,GAAGA,EAAC,IAAG,SAASA,IAAE;AAAC,cAAME,MAAE,SAASF,IAAEC,IAAEE,IAAE;AAAC,gBAAME,KAAE,EAAC,WAAU,OAAG,SAAQ,EAAC,EAAC;AAAE,iBAAOA,GAAE,YAAUL,GAAE,YAAY,SAAS,MAAM,CAAAA,OAAG,WAASA,GAAE,UAAQA,GAAE,UAAU,QAAQ,MAAM,KAAI,CAAC,IAAI,CAAC,KAAGA,GAAE,KAAK,QAAQ,OAAM,EAAE,EAAE,SAAS,EAAEC,EAAC,EAAE,QAAQ,OAAM,EAAE,CAAC,GAAE,EAAED,GAAE,YAAY,SAAS,SAAS,CAAAA,OAAG;AAAC,gBAAG,WAASA,GAAE,UAAS;AAAO,kBAAMC,KAAED,GAAE,KAAK,MAAM,GAAG,EAAE,IAAI,kBAAkB,EAAE,KAAK,GAAG;AAAE,YAAAK,GAAE,QAAQ,KAAK,GAAGL,GAAE,SAAS,MAAKC,IAAEE,EAAC,CAAC;AAAA,UAAC,GAAE,EAAEE;AAAA,QAAC,GAAEL,IAAEC,IAAEI,EAAC;AAAE,eAAO,GAAGF,IAAED,IAAEG,EAAC;AAAA,MAAC,GAAE;AAAA,IAAC,GAAE;AAAA,EAAC,GAAE;AAAC,GAAE,EAAE,qBAAG,UAASL,IAAE;AAAC,SAAO,WAAU;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,QAAG;AAAC,aAAO,QAAQ,QAAQH,GAAE,MAAM,MAAKC,EAAC,CAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,aAAO,QAAQ,OAAOA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC,IAAG,SAASA,IAAEC,IAAEE,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAMH,KAAE,GAAG,EAAC,KAAI,EAAEF,GAAE,WAAU,EAAEC,EAAC,CAAC,GAAE,QAAO,QAAO,SAAQ,EAAC,aAAY,EAAED,GAAE,WAAU,EAAEG,EAAC,CAAC,GAAE,WAAU,UAAKE,GAAE,YAAU,MAAI,KAAG,EAAC,EAAEL,IAAEK,EAAC;AAAE,SAAOC,KAAE,SAASL,IAAE;AAAC,OAAGD,IAAEC,EAAC;AAAA,EAAC,IAAGG,KAAEgC,GAAA,CAAElC,IAAEF,EAAC,MAAII,GAAE,SAAOA,KAAE,QAAQ,QAAQA,EAAC,IAAGE,KAAEF,GAAE,KAAKE,EAAC,IAAEF;AAAE,MAAIA,IAAEE;AAAC,GAAE;AAAE,IAAI,KAAG,EAAE,GAAG;AAAE,MAAM,+BAAYN,IAAE;AAAC,SAAO,WAAU;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,QAAG;AAAC,aAAO,QAAQ,QAAQH,GAAE,MAAM,MAAKC,EAAC,CAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,aAAO,QAAQ,OAAOA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC,IAAG,SAASA,IAAEC,IAAEE,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAK,EAAC,eAAcH,KAAE,MAAG,WAAUE,KAAE,MAAE,GAAEC,IAAEC,KAAE,EAAC,gBAAe,4BAA0B;AAAE,YAAKJ,OAAII,GAAE,gBAAgB,IAAE,YAAU,OAAOJ,KAAE,GAAGA,EAAC,KAAG,IAAG,SAASF,IAAE;AAAC,QAAGmC,GAAA,CAAEnC,EAAC,GAAE,OAAOA,GAAE;AAAW,QAAG,EAAEA,EAAC,GAAE,OAAOA,GAAE;AAAO,QAAG,YAAU,OAAOA,eAAW,GAAG,GAAGA,EAAC;AAAE,UAAM,IAAI,EAAE,EAAC,MAAK,EAAC,MAAK,EAAE,kBAAgB,EAAC,EAAE,4CAA4C;AAAA,EAAC,GAAEG,EAAC,CAAC,KAAIC,OAAIE,GAAE,eAAe,IAAE;AAAK,QAAMC,KAAE,GAAG,EAAC,KAAI,EAAEP,GAAE,WAAU,EAAEC,EAAC,CAAC,GAAE,QAAO,OAAM,SAAQK,IAAE,MAAKH,IAAC,EAAEH,IAAEK,EAAC;AAAE,SAAOK,KAAE,SAAST,IAAE;AAAC,QAAG;AAAC,SAAGD,IAAEC,EAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,YAAMC,KAAED;AAAE,UAAG,QAAMC,GAAE,UAAQG,IAAE,MAAMH;AAAE,aAAM;AAAA,IAAE;AAAC,WAAM;AAAA,EAAE,IAAGQ,KAAE2B,GAAA,CAAE7B,IAAEP,EAAC,MAAIS,GAAE,SAAOA,KAAE,QAAQ,QAAQA,EAAC,IAAGC,KAAED,GAAE,KAAKC,EAAC,IAAED;AAAE,MAAIA,IAAEC;AAAC,GAAE,EAAE,qBAAG,UAASV,IAAE;AAAC,SAAO,WAAU;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,QAAG;AAAC,aAAO,QAAQ,QAAQH,GAAE,MAAM,MAAKC,EAAC,CAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,aAAO,QAAQ,OAAOA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC,IAAG,SAASA,IAAEC,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAME,KAAE,GAAG,EAAC,KAAI,EAAEL,GAAE,WAAU,EAAEC,EAAC,CAAC,GAAE,QAAO,WAAS,EAAED,IAAEG,EAAC;AAAE,SAAOC,KAAE,SAASH,IAAE;AAAC,QAAG;AAAC,SAAGD,IAAEC,EAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,YAAMA;AAAA,IAAC;AAAC,WAAM,EAAC,aAAYC,GAAE,QAAQ,IAAI,KAAK,KAAG,IAAI,MAAM,GAAG,EAAE,KAAK,CAAAD,OAAGA,GAAE,MAAK,EAAE,EAAE,QAAOC,GAAE,QAAQ,IAAI,QAAQ,KAAG,IAAE;AAAA,EAAC,IAAGC,KAAEkC,GAAA,CAAE/B,IAAEL,EAAC,MAAIE,GAAE,SAAOA,KAAE,QAAQ,QAAQA,EAAC,IAAGE,KAAEF,GAAE,KAAKE,EAAC,IAAEF;AAAE,MAAIA,IAAEE;AAAC,GAAE;AAAE,SAAS,GAAGJ,IAAEC,IAAEE,IAAE;AAAC,SAAOA,KAAEF,KAAEA,GAAED,EAAC,IAAEA,MAAGA,MAAGA,GAAE,SAAOA,KAAE,QAAQ,QAAQA,EAAC,IAAGC,KAAED,GAAE,KAAKC,EAAC,IAAED;AAAE;AAAC,MAAM,KAAG,IAAI,SAASA,IAAEC,IAAEE,IAAEE,IAAEH,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,MAAGD,KAAEE,MAAGF,KAAE,GAAE,MAAM,IAAI,EAAE,EAAC,MAAK,EAAC,MAAK,EAAE,sBAAmB,EAAE,wBAAwBA,EAAC,qBAAqB;AAAE,QAAMG,KAAE,EAAC,gBAAe,4BAA2B,kBAAiB,MAAID,KAAEF,KAAE,IAAG,iBAAgB,SAASA,EAAC,IAAIE,EAAC,MAAI,EAAEE,KAAE,GAAG,EAAC,KAAI,EAAEP,GAAE,WAAU,EAAEC,EAAC,CAAC,GAAE,QAAO,OAAM,SAAQK,IAAE,MAAKJ,IAAC,EAAEF,IAAEI,EAAC;AAAE,SAAO,GAAGgC,GAAA,CAAE7B,IAAEP,EAAC,IAAG,SAASC,IAAE;AAAC,OAAGD,IAAEC,EAAC;AAAA,EAAC,GAAE;AAAC,GAAE;AAAE,SAAS,GAAGD,IAAEC,IAAE;AAAC,MAAIE,KAAEH,IAAE;AAAE,SAAOG,MAAGA,GAAE,OAAKA,GAAE,KAAKF,EAAC,IAAEA,GAAEE,EAAC;AAAC;AAAC,MAAM,KAAG,IAAI,SAASH,IAAEC,IAAEE,IAAEE,IAAEH,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,MAAGD,KAAEE,MAAGF,KAAE,GAAE,MAAM,IAAI,EAAE,EAAC,MAAK,EAAC,MAAK,EAAE,sBAAmB,EAAE,wBAAwBA,EAAC,qBAAqB;AAAE,QAAMG,KAAE,EAAC,gBAAe,wCAAuC,kBAAiB,MAAID,KAAEF,KAAE,IAAG,kBAAiB,SAASA,EAAC,IAAIE,EAAC,IAAE,EAAEE,KAAE,GAAG,EAAC,KAAI,EAAEP,GAAE,WAAU,EAAEC,EAAC,CAAC,GAAE,QAAO,SAAQ,SAAQK,IAAE,MAAKJ,IAAC,EAAEF,IAAEI,EAAC;AAAE,SAAO,GAAGgC,GAAA,CAAE7B,IAAEP,EAAC,IAAG,SAASC,IAAE;AAAC,OAAGD,IAAEC,EAAC;AAAA,EAAC,GAAE;AAAC,GAAE;AAAE,SAAS,GAAGD,IAAE;AAAC,SAAO,WAAU;AAAC,aAAQC,KAAE,EAAC,EAAEE,KAAE,GAAEA,KAAE,UAAU,QAAOA,MAAIF,GAAEE,EAAC,IAAE,UAAUA,EAAC;AAAE,QAAG;AAAC,aAAO,QAAQ,QAAQH,GAAE,MAAM,MAAKC,EAAC,CAAC;AAAA,IAAC,SAAOD,IAAE;AAAC,aAAO,QAAQ,OAAOA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC;AAAC,MAAM,KAAG,IAAI,SAASA,IAAEC,IAAEE,IAAEE,IAAEH,IAAE;AAAC,MAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,SAAO,GAAG,GAAGJ,IAAEC,IAAEG,EAAC,IAAG,SAASE,IAAE;AAAC,QAAIC,KAAE;AAAG,WAAO,IAAI,WAAU;AAAC,UAAGD,GAAE,WAAW,SAAS,wBAAwB,UAAS,GAAG,GAAGN,IAAEC,IAAEE,IAAEE,IAAEH,IAAEE,EAAC,IAAG,SAASJ,IAAE;AAAC,eAAOO,KAAE,MAAGP;AAAA,MAAC,GAAE;AAAA,IAAC,KAAI,SAASS,IAAE;AAAC,UAAIC,KAAE;AAAG,aAAOH,KAAEE,KAAE,IAAI,WAAU;AAAC,YAAGH,GAAE,OAAO,SAAS,QAAQ,KAAGA,GAAE,WAAW,SAAS,sCAAsC,UAAS,GAAG,GAAGN,IAAEC,IAAEE,IAAEE,IAAEH,IAAEE,EAAC,IAAG,SAASJ,IAAE;AAAC,iBAAOU,KAAE,MAAGV;AAAA,QAAC,GAAE;AAAA,MAAC,KAAI,SAASA,IAAE;AAAC,YAAGU,IAAE,OAAOV;AAAE,cAAM,IAAI,EAAE,EAAC,MAAK,EAAC,MAAK,EAAE,cAAY,EAAC,EAAE,eAAe;AAAA,MAAC,GAAE;AAAA,IAAC,GAAE;AAAA,EAAC,GAAE;AAAC,KAAI,KAAG;AAA8E,SAAS,GAAGA,IAAE;AAAC,MAAIC,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,QAAK,EAAC,UAASE,KAAE,MAAK,gBAAeE,IAAE,aAAYH,KAAE,IAAG,KAAIE,IAAE,SAAQE,KAAE,EAAC,EAAE,WAAUC,IAAE,YAAWE,IAAE,UAASC,IAAE,OAAMM,IAAE,UAASG,IAAE,iBAAgBR,IAAC,GAAEV;AAAE,MAAIY,KAAEV;AAAE,EAAAU,OAAIA,KAAEM,MAAGT,KAAEqB,GAAA,CAAE,WAASA,GAAA,CAAE;AAAM,QAAMhB,KAAE,EAAC,UAASF,IAAE,gBAAeR,IAAE,aAAYH,IAAE,KAAIE,IAAE,SAAQ,OAAO,OAAO,IAAGE,EAAC,GAAE,WAAUC,IAAE,YAAWE,IAAE,UAASC,IAAE,YAAW,EAAEV,EAAC,GAAE,WAAUA,IAAE,OAAMgB,IAAE,UAASG,IAAE,iBAAgBR,IAAC;AAAE,SAAO,EAAEI,IAAEI,IAAET,IAAEM,IAAEZ,EAAC,GAAE,EAAC,UAAS,CAACJ,IAAEC,IAAEE,OAAI,GAAGY,IAAEf,IAAEC,IAAEE,EAAC,GAAE,iBAAgB,CAACH,IAAEC,OAAI,GAAGc,IAAEf,IAAEC,EAAC,GAAE,kBAAiB,CAACD,IAAEC,QAAI,SAASD,IAAEC,IAAE;AAAC,QAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC;AAAE,UAAME,KAAE,KAAM,IAAG,CAAE;AAAa,WAAO,GAAGL,IAAEC,IAAEE,EAAC,EAAE,MAAM,CAAAH,OAAG;AAAC,MAAAA,GAAE,KAAKK,EAAC;AAAA,IAAC,GAAE,CAAE,OAAO,CAAAL,OAAG;AAAC,MAAAK,GAAE,KAAK,SAAQL,EAAC;AAAA,IAAC,GAAE,EAAEK;AAAA,EAAC,GAAEU,IAAEf,IAAEC,EAAC,GAAE,mBAAkB,CAACD,IAAEC,IAAEE,QAAI,SAASH,IAAEC,IAAE;AAAC,QAAIE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE,EAAC,EAAEE,KAAE,UAAU,SAAO,KAAG,WAAS,UAAU,CAAC,IAAE,UAAU,CAAC,IAAE;AAAG,UAAMH,KAAE,KAAM,IAAG,CAAE,gBAAaE,KAAE,EAAC;AAAE,cAAKD,GAAE,cAAYC,GAAE,eAAe,IAAE;AAAK,UAAME,KAAE,GAAG,EAAC,KAAI,EAAEN,GAAE,WAAU,EAAEC,EAAC,CAAC,GAAE,QAAO,OAAM,SAAQG,IAAE,MAAKF,IAAE,cAAa,GAAC,EAAEF,IAAEG,EAAC;AAAE,WAAOiC,GAAA,CAAE9B,IAAEN,EAAC,EAAE,MAAM,CAAAC,OAAG,GAAGD,IAAEC,EAAC,GAAE,CAAE,MAAM,CAAAD,OAAG;AAAC,kBAAY,MAAI;AAAC,QAAAK,GAAEL,EAAC;AAAA,MAAC,IAAG,CAAC;AAAA,IAAC,GAAE,CAAE,OAAO,CAAAA,OAAG;AAAC,MAAAE,GAAE,KAAK,SAAQF,EAAC;AAAA,IAAC,GAAE,EAAEE;AAAA,EAAC,GAAEa,IAAEf,IAAEC,IAAEE,EAAC,GAAE,eAAc,CAACH,IAAEC,OAAI,GAAGc,IAAEf,IAAEC,EAAC,GAAE,YAAW,CAACD,IAAEC,OAAI,GAAGc,IAAEf,IAAEC,EAAC,GAAE,QAAO,CAACD,IAAEC,OAAI,GAAGc,IAAEf,IAAEC,EAAC,GAAE,sBAAqB,CAACD,IAAEC,OAAI,GAAGc,IAAEf,IAAEC,EAAC,GAAE,iBAAgB,CAACD,IAAEC,OAAI,GAAGc,IAAEf,IAAEC,EAAC,GAAE,qBAAoB,CAAAD,QAAG,SAASA,IAAEC,IAAE;AAAC,QAAIE,KAAE,EAAEH,GAAE,WAAU,EAAEC,EAAC,CAAC;AAAE,UAAMI,KAAE,WAAW,KAAKF,EAAC,IAAE,UAAQ;AAAO,YAAOH,GAAE;AAAS,MAAC,KAAK+B,GAAA,CAAE;AAAK;AAAA,MAAM,KAAKA,IAAE,UAAS;AAAC,cAAM9B,KAAE,EAAED,GAAE,QAAQ,cAAc,QAAQ,YAAW,EAAE,EAAE,MAAM;AAAE,QAAAG,KAAEA,GAAE,QAAQ,gBAAe,GAAGE,EAAC,MAAMJ,EAAC,GAAG;AAAE;AAAA,MAAK;AAAA,MAAC;AAAQ,cAAM,IAAI,EAAE,EAAC,MAAK,EAAC,MAAK,EAAE,yBAAuB,EAAC,EAAE,wCAAwCD,GAAE,QAAQ,EAAE;AAAA;AAAE,WAAOG;AAAA,EAAC,GAAEY,IAAEf,EAAC,GAAE,mBAAkB,CAAAA,QAAG,SAASA,IAAEC,IAAE;AAAC,QAAIE,KAAE,GAAG,EAAEH,GAAE,WAAU,EAAEC,EAAC,CAAC,CAAC;AAAyC,UAAMI,KAAE,WAAW,KAAKF,EAAC,IAAE,UAAQ;AAAO,YAAOH,GAAE;AAAS,MAAC,KAAK+B,GAAA,CAAE;AAAK;AAAA,MAAM,KAAKA,IAAE,UAAS;AAAC,cAAM9B,KAAE,EAAED,GAAE,QAAQ,cAAc,QAAQ,YAAW,EAAE,EAAE,MAAM;AAAE,QAAAG,KAAEA,GAAE,QAAQ,gBAAe,GAAGE,EAAC,MAAMJ,EAAC,GAAG;AAAE;AAAA,MAAK;AAAA,MAAC;AAAQ,cAAM,IAAI,EAAE,EAAC,MAAK,EAAC,MAAK,EAAE,yBAAuB,EAAC,EAAE,wCAAwCD,GAAE,QAAQ,EAAE;AAAA;AAAE,WAAOG;AAAA,EAAC,GAAEY,IAAEf,EAAC,GAAE,YAAW,MAAI,OAAO,OAAO,EAAC,EAAEe,GAAE,OAAO,GAAE,UAAS,CAAAf,OAAG,GAAGe,IAAEf,EAAC,GAAE,MAAK,CAACA,IAAEC,OAAI,GAAGc,IAAEf,IAAEC,EAAC,GAAE,UAAS,CAACD,IAAEC,IAAEE,OAAI,GAAGY,IAAEf,IAAEC,IAAEE,EAAC,GAAE,iBAAgB,CAACH,IAAEC,IAAEE,OAAI,GAAGY,IAAEf,IAAEC,IAAEE,EAAC,GAAE,2BAA0B,CAACH,IAAEC,IAAEE,IAAEE,IAAEH,OAAI,GAAGa,IAAEf,IAAEC,IAAEE,IAAEE,IAAEH,EAAC,GAAE,kBAAiB,CAAAF,OAAG,GAAGe,IAAEf,EAAC,GAAE,QAAO,CAACA,IAAEC,OAAI,GAAGc,IAAEf,IAAEC,EAAC,GAAE,YAAW,CAAAD,OAAG;AAAC,IAAAe,GAAE,UAAQ,OAAO,OAAO,IAAGf,EAAC;AAAA,EAAC,GAAE,MAAK,CAACA,IAAEC,OAAI,GAAGc,IAAEf,IAAEC,EAAC,GAAE,QAAO,CAACD,IAAEC,IAAEE,OAAI,GAAGY,IAAEf,IAAEC,IAAEE,EAAC,GAAC;AAAC;AAAQ,EAAE,IAAM,EAAE,IAAM,EAAE,IAAM,EAAE,QAAG,KAAG,EAAE,IAAM,EAAE,IAAM,EAAE,IAAM,EAAE,IAAM,EAAE,IAAM,EAAE,IAAM,EAAE;;ACAz1nG,OAAO,eAAgB,OAAO,IAAI,YAAY;AAC9C,OAAO,cAAgB,OAAO,IAAI,WAAW;AAC7C,OAAO,gBAAgB,OAAO,IAAI,aAAa;AAIxC,MAAM,SAAgB,OAAO,IAAI,QAAQ;AACzC,MAAM,eAAgB,OAAO,IAAI,UAAU;AAC3C,MAAM,gBAAgB,OAAO,IAAI,SAAS;AAC1C,MAAM,gBAAgB,OAAO,IAAI,WAAW;AAI5C,MAAMkC,WAAA,GAAgB,OAAO,IAAI,WAAW;AAC5C,MAAM,WAAgB,OAAO,IAAI,UAAU;AAC3C,MAAM,eAAgB,OAAO,IAAI,eAAe;AAChD,MAAM,eAAgB,OAAO,IAAI,eAAe;AAChD,MAAM,WAAgB,OAAO,IAAI,UAAU;AAC3C,MAAM,YAAe,OAAO,IAAI,YAAY;AAC5C,MAAM,cAAgB,OAAO,IAAI,aAAa;;ACmE9C,MAAM,wCAAwB;AAG9B,MAAM,OAAO,CAAC,WAAS;AAC1B,QAAMC,UAAe,OAAO,UAAU,YAAY,OAAO,UAAU,aAAe,SAAS,YAAY,KAAK,SAAU,QAAQ,SAAS,CAAC,MAAI,KAAK,CAAC;AAClJ,MAAI,MAAM,QAAQA,OAAM,GAAG;AAAE,WAAOA,SAAQ,MAAM,MAAM,KAAK,MAAM,KAAKA,WAAU,EAAE,GAAG,MAAM,MAAM,KAAK,EAAC;AAAA,EAAG,WACxGA,mBAAkB,OAAOA,mBAAkB,SAAS;AAAE,WAAO,IAAI,IAAI,MAAM,KAAKA,SAAQ,WAAU,IAAK,EAAE,GAAG,MAAM,CAAC,CAAC,GAAE,CAAC,MAAI,CAAC,GAAE,KAAK,CAAC,CAAC,CAAC,CAAC;AAAA,EAAG,WAC1IA,mBAAkB,OAAOA,mBAAkB,SAAS;AAAE,WAAO,IAAI,IAAI,MAAM,KAAKA,SAAQ,UAAS,IAAK,EAAE,GAAG,MAAM,MAAM,CAAC;AAAA,EAAG,WAC3HA,WAAU,QAAQ,OAAOA,WAAU,cAAc,OAAOA,WAAU,UAAU;AAAE,WAAO,OAAO,YAAY,MAAM,KAAK,OAAO,QAAQA,WAAU,EAAE,KAAK,EAAE,GAAG,SAAS,CAAC,CAAC,CAAC,MAAK,KAAK,gBAAgB,KAAK,iBAAiB,KAAK,aAAc,GAAG,MAAM,CAAC,CAAC,GAAE,CAAC,MAAI,CAAC,GAAE,KAAK,CAAC,CAAC,CAAC,CAAC;AAAA,EAAG;AAC5Q,SAAOA;AACX;AAGO,MAAM,SAAS,CAAC,QAAM;AAAE,SAAO,MAAM,YAAY,KAAK,MAAM,SAAS,KAAK;AAAK;AAC/E,MAAM,QAAS,CAAC,QAAc,gBAA8B,UAAQ;AACvE,QAAM,WAAW;AACjB,MAAI,YAAY,MAAM,KAAK,OAAO,UAAU,UAAU,OAAO;AAC7D,MAAI,UAAU,SAAS,kBAAkB,WAAY,WAAW,UAAU,OAAO,QAAQ,SAAS,aAAc;AAAE,aAAS,QAAQ,SAAQ;AAAA,EAAG;AAC9I,MAAI,UAAU,SAAS,OAAO,UAAU,YAAY,OAAO,UAAU,aAAa;AAC9E,aAAS,OAAO,MAAM;AACtB,UAAM,OAAO,iBAAiB,SAAS,MAAM,KAAK,QAAQ;AAC1D,QAAI,QAAQ,SAAS,OAAO,QAAQ,YAAY,OAAO,QAAQ,aAC3D;AAAE,eAAS;AAAA,IAAM;AACrB,QAAI,YAAY,QACZ;AAAE,aAAO,MAAM,QAAQ,aAAa;AAAA,IAAG;AAAA,EAC/C;AACA,SAAO;AACX;AAGO,MAAM,aAAa,CAAC,QAAsC,OAAO,QAAQ,OAAO,IAAI,SAAS;AAC7F,MAAM,cAAc,CAAC,QAAQ,OAAO;AACvC,MAAI,YAAY,MAAM,KAAK,OAAO,UAAU,YAAY;AAAE,WAAO,KAAK,MAAM;AAAA,EAAG;AAC/E,MAAI,WAAW,MAAM,GAAG,OAAO,OAAO,KAAK,EAAE;AAC7C,MAAI,QAAQ,WAAW,WAAW,OAAO,OAAO,GAAG,OAAO,OAAO,QAAQ,KAAK,EAAE;AAChF,SAAO,KAAK,MAAM;AACtB;AAGA,MAAM,iCAAiB,SAAQ;AAC/B,MAAM,kBAAkB,IAAI,qBAAqB,CAAC,cAAiB;AAAE,aAAW,UAAU,CAAC,OAAU,MAAM;AAAG,CAAC;AAGxG,SAAS,eAAe,KAAK,WAAW,UAAqB;AAChE,MAAI,CAAC,YAAY,OAAO,YAAY,cAAe,OAAO,OAAO,YAAY,OAAO,OAAO,YAAa;AACxG,MAAI,aAAa,OAAO,SAAS;AAE7B,gBAAY,sBAAsB,KAAK,MAAI;AACvC,YAAM,gCAAgB,KAAI;AAC1B,UAAI,OAAO,OAAO,YAAY,OAAO,OAAO,YAAY;AACpD,wBAAgB,SAAS,KAAK,SAAS;AACvC,mBAAW,IAAI,KAAK,SAAS;AAC7B,YAAI,OAAO,OAAO,MAAM,MAAI,UAAU,QAAQ,CAAC,OAAU;AAAE,gBAAK;AAAA,QAAG,CAAC;AAAA,MACxE;AACA,aAAO;AAAA,IACX,CAAC,GAAG,MAAM,QAAQ;AAAA,EACtB,OAAO;AACH,QAAI,SAAS,IAAI,YAAY,MAAM;AAAE,YAAM,WAAW,MAAM,SAAS;AAAG,UAAI,OAAO,YAAY,YAAY;AAAE,iBAAS,MAAM,MAAM,IAAI;AAAA,MAAG;AAAG,eAAS,MAAM,MAAM,IAAI;AAAA,IAAG;AAAA,EAC5K;AACJ;;AC7IA,MAAM,gCAAgB,SAAQ;AAC9B,MAAM,oBAAoB,CAAC,YAAY,MAA8B,YAAuB;AAExF,SAAO,UAAU,YAAY,YAAY,MAAM;AAC3C,UAAM,WAAW,MAAM,SAAQ;AAAG,cAAU,WAAW,OAAO;AAC9D,UAAM,cAAc,YAAY,UAAU,OAAO,UAAU;AAC3D,UAAM,aAAa,MAAM;AAAE,YAAM,IAAI,eAAc;AAAG,gBAAU,aAAa,OAAO;AAAG,aAAO;AAAA,IAAG;AACjG,eAAW,WAAW;AACtB,WAAO;AAAA,MACH;AAAA,MACA,CAAC,OAAO,OAAO,GAAG;AAAA,MAClB,CAAC,OAAO,YAAY,GAAG;AAAA,KAC3B;AAAA,EACJ,CAAC;AACL;AAGO,MAAM,wCAAwB,SAAwB;AAG7D,MAAM,8BAAc,SAAQ;AAGrB,MAAM,WAAW,CAAC,MAAW,WAAqB;AACrD,QAAM,SAAS,OAAO,YAAY,KAAK;AACvC,oBAAkB,YAAY,QAAQ,IAAI,WAAW;AACrD,SAAO;AACX;AAGO,MAAM,WAAW,CAAC,MAAW,WAAqB;AACrD,SAAO,MAAM,OAAO,YAAY,KAAK,IAAI;AACzC,MAAI,OAAO,QAAQ,YAAY,EAAE,OAAO,QAAQ,YAAY,OAAO,QAAQ,eAAe,QAAQ,MAAM,OAAO;AAC/G,SAAO,QAAQ,oBAAoB,MAAM,MAAM,IAAI,MAAM,MAAM,SAAS,MAAM,MAAM,CAAC,CAAC;AAC1F;AAGA,MAAM,SAAS,OAAO,IAAI,WAAW;AAG9B,MAAM,UAAU;AAAA,EACnB;AAAA,EACA;AAAA,EACA,6BAAa,SAAQ;AAAA,EACrB;AAAA,EACA;AAAA,EACA,kCAAkB,KAAa;AAAA;AAAA,EAG/B,+BAAe,KAAuD;AAAA,EACtE,qCAAqB,KAAqF;AAAA,EAC1G,kBAAkB;AAAA;AAAA,EAGlB,mCAAmB,SAA0B;AAAA;AAAA,EAG7C,OAAO;AAEH,WAAQ,WAAW,aAAa,OAAM,IAAK,KAAK,KAAI;AAAA,EACxD;AAAA,EAEA,cAAc;AACV,SAAK,iCAAiB,KAAI;AAC1B,SAAK,6BAAa,SAAQ;AAE1B,SAAK,YAAY;AAAA,MACb,MAAM,CAAC,SAAc;AACjB,YAAI,MAAM;AACN,gBAAM,QAAQ,IAAI,IAAI,KAAK,UAAU,GAAI,IAA6B,IAAI,KAAK,UAAU,IAAI;AAAA,QACjG;AAAA,MACJ;AAAA,KACJ;AAEA,UAAM,OAAO,IAAI,QAAQ,IAAI;AAC7B,UAAM,aAAa,SAAU,YAAY;AACrC,YAAM,UAAU,YAAY,MAAM,OAAO,UAAU;AACnD,aAAO,kBAAkB,YAAY,MAAM,OAAO;AAAA,IACtD;AAGA,SAAK,UAAW,OAAO,cAAc,cAAe,IAAI,WAAW,UAAU,IAAK;AAClF,SAAK,aAAa,MAAM,KAAK;AAAA,EACjC;AAAA,EAEA,UAAU,OAAO,MAAM;AACnB,QAAI,CAAC,MAAM,KAAK,OAAO,IAAI,EAAE,GAAG;AAChC,SAAK,OAAO,IAAI,EAAE;AAGlB,QAAI,KAAK,aAAa,IAAI,EAAE,MAAM,KAAK,MAAK,EAAG;AAC/C,SAAK,aAAa,IAAI,IAAI,KAAK,MAAM;AAGrC,QAAI;AACA,YAAM,MAAM,GAAG,GAAG,IAAI;AACtB,UAAI,OAAO,OAAQ,IAAY,SAAS,YAAY,OAAQ,IAAqB,MAAM,QAAQ,IAAI;AACnG,aAAO;AAAA,IACX,SAAS,GAAG;AACR,cAAQ,KAAK,CAAC;AAAA,IAClB,UAAE;AACE,WAAK,OAAO,OAAO,EAAE;AAAA,IACzB;AAAA,EACJ;AAAA,EAEA,UAAU,MAAM,QAAQ,MAAM,aAAmB,KAAY;AACzD,UAAM,YAAY,KAAK;AACvB,QAAI,CAAC,WAAW,MAAM;AAEtB,UAAM,WAA2B,MAAM,KAAK,UAAU,SAAS,EAC1D,IAAI,CAAC,CAAC,IAAI,IAAI,MAAM;AACjB,UAAI,SAAS,QAAQ,SAAS,UAAU,SAAS,MAAM;AACnD,eAAO,KAAK,UAAU,IAAI,OAAO,MAAM,UAAU,GAAG,GAAG;AAAA,MAC3D;AACA,aAAO;AAAA,IACX,CAAC,EACA,OAAO,CAAC,QAAa,OAAO,OAAO,IAAI,SAAS,UAAU;AAE/D,WAAO,SAAS,SAAS,QAAQ,WAAW,QAAQ,IAAI;AAAA,EAC5D;AAAA,EAEA,KAAK,IAAqB;AAAE,QAAI,MAAM,QAAQ,EAAE,GAAG,OAAO,SAAS,IAAI,IAAI;AAAG,WAAO;AAAA,EAAI;AAAA,EAEzF,SAAS,IAAyC,MAAuB;AACrE,QAAI,MAAM,QAAQ,OAAO,MAAM,YAAY;AAC3C,SAAK,WAAW,IAAI,IAAI,QAAQ,MAAM;AACtC,WAAO,MAAM,KAAK,WAAW,IAAI,QAAQ,MAAM;AAAA,EACnD;AAAA,EAEA,WAAW,IAA0C,MAAuB;AACxE,QAAI,MAAM,QAAQ,OAAO,MAAM,YAAY;AACvC,YAAM,YAAY,KAAK;AACvB,UAAI,WAAW,IAAI,EAAE,MAAM,UAAU,IAAI,EAAE,KAAK,QAAQ,QAAQ,QAAQ,QAAQ,SAAS;AACrF,kBAAU,OAAO,EAAE;AACnB,eAAO,MAAM,KAAK,SAAS,IAAI,QAAQ,MAAM;AAAA,MACjD;AAAA,IACJ;AACA,WAAO,KAAK,WAAW,OAAM;AAAA,EACjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,QAAQ,MAAsB,OAAoB,UAAgB,YAA2B,SAAS,KAAY;AAC9G,QAAI,OAAO,SAAS,UAAU;AAG9B,QAAI,cAAc,QAAW,YAAY;AAIzC,UAAM,QAAQ,aAAa;AAI3B,QAAI,OAAO,KAAK,eAAe,IAAI,IAAI;AACvC,QAAI,CAAC,MAAM;AACP,iCAAW,KAAI;AACf,WAAK,eAAe,IAAI,MAAM,IAAI;AAAA,IACtC;AAGA,SAAK,IAAI,OAAO,CAAC,MAAM,OAAO,UAAU,WAAW,GAAG,CAAC;AAGvD,QAAI,KAAK,iBAAiB;AAC1B,SAAK,kBAAkB;AAEvB,mBAAe,MAAM;AACjB,WAAK,kBAAkB;AAGvB,YAAM,QAAQ,KAAK;AACnB,WAAK,qCAAqB,KAAI;AAI9B,iBAAW,CAAC,MAAM,KAAK,KAAK,OAAO;AAC/B,YAAI,QAAQ,QAAQ,KAAK,YAAY,IAAI,IAAI,GAAG;AAEhD,YAAI,QAAQ,MAAM,KAAK,YAAY,IAAI,IAAI;AAC3C,YAAI;AACA,qBAAW,GAAG,IAAI,KAAK,OAAO;AAC1B,kBAAM,CAAC,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI;AAC9B,gBAAI;AAEA,mBAAK,UAAU,IAAI,GAAG,IAAI,IAAI,GAAI,QAAQ,EAAG;AAAA,YACjD,SAAS,GAAG;AACR,sBAAQ,KAAK,CAAC;AAAA,YAClB;AAAA,UACJ;AAAA,QACJ,UAAE;AACE,cAAI,QAAQ,MAAM,KAAK,YAAY,OAAO,IAAI;AAAA,QAClD;AAAA,MACJ;AAAA,IACJ,CAAC;AAAA,EACL;AAAA,EAEA,IAAI,WAAW;AAAE,WAAO,KAAK;AAAA,EAAW;AAC5C;;ACxMA,MAAM,mCAAmB,IAAS;AAAA,EAC9B,OAAO;AAAA,EACP,OAAO;AAAA,EACP,OAAO;AAAA,EACP,OAAO;AAAA,EAEP;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ,CAAC;AAGD,MAAM,gBAAgB,CAAC,QAAa,SAAc;AAC9C,MAAI,CAAC,aAAa,IAAI,IAAI,GAAG,OAAO;AAGpC,QAAM,MAAM,QAAQ,QAAQ,IAAI;AAChC,SAAQ,OAAO,QAAQ,aAAc,QAAQ,QAAQ,GAAG,IAAI;AAChE;AAGA,MAAM,qCAAqB,SAAuB;AAClD,SAAS,SAAS,KAAK,UAAU;AAC7B,MAAI,MAAM;AACV,MAAI;AACA,oBAAgB,cAAc,qBAAK,IAAI,KAAK,GAAG,MAAM,QAAQ;AAC7D,QAAI,gBAAgB,MAAM,GAAG,GAAG,MAAM,QAAQ,GAAG;AAAE,YAAM;AAAA,IAAM;AAC/D,UAAM,aAAa,QAAQ,yBAAyB,KAAK,QAAQ;AACjE,UAAO,OAAO,YAAY,OAAO;AAAA,EACrC,SAAS,GAAG;AACR,UAAM;AAAA,EACV,UAAE;AACE,oBAAgB,MAAM,GAAG,GAAG,SAAS,QAAQ;AAAA,EACjD;AACA,SAAO;AACX;AAGO,MAAM,cAAc,CAAC,KAAU,QAAa;AAC/C,MAAI,YAAY,GAAG,GAAG,OAAO;AAG7B,QAAM,QAAQ,QAAQ,KAAK,GAAG;AAC9B,MAAI,SAAS,QAAQ,OAAO,SAAS;AACjC,UAAM,MAAM,QAAQ,KAAK,OAAO;AAChC,QAAI,OAAO,QAAQ,CAAC,YAAY,GAAG,GAC/B;AAAE,aAAO,YAAY,KAAK,GAAG;AAAA,IAAG,OAChC;AAAE,aAAO;AAAA,IAAO;AAAC,EACzB,WAEQ,OAAO,WAAW,SAAS,QAAQ,CAAC,YAAY,KAAK,KAAM,OAAO,SAAS,YAAa;AACxF,WAAO,YAAY,OAAO,GAAG,KAAK,SAAS;AAAA,EAC/C;AACJ,SAAO,SAAS;AACpB;AAGO,MAAM,UAAU,CAAC,KAAU,KAAU,QAAc;AAKtD,MAAI,SAAS;AACb,MAAI,OAAO,MAAM;AAAE,WAAO;AAAA,EAAK;AAG/B,MAAI,SAAS,eAAe,YAAY,qBAAK,IAAI,KAAK;AACtD,MAAI,QAAQ,MAAM,GAAG,GAAG;AAAE,WAAO;AAAA,EAAM;AAGvC,MAAI,CAAC,SAAS,KAAK,GAAG,GAAG;AACrB,eAAW,QAAQ,IAAI,KAAK,KAAyB,GAAG;AAAA,EAC5D,OAAO;AACH,YAAQ,MAAM,GAAG;AAGjB,QAAI;AACA,eAAS,QAAQ,IAAI,KAAK,KAAK,OAAO,OAAO,MAAM,GAAG;AAAA,IAC1D,SAAS,IAAI;AACT,eAAS;AAAA,IACb,UAAE;AACE,aAAO,OAAO,GAAG;AACjB,UAAI,QAAQ,SAAS,GAAG;AAAE,wBAAgB,SAAS,GAAG;AAAA,MAAG;AAAA,IAC7D;AAAA,EACJ;AAGA,SAAO,OAAO,UAAU,aAAa,QAAQ,KAAK,MAAM,IAAI;AAChE;AAGA,MAAM,YAAY,CAAC,QAAa,MAAW,aAAgB;AACvD,MAAI,UAAU,QAAQ,YAAY,MAAM,GAAG;AAAE,WAAO;AAAA,EAAQ;AAG5D,QAAM,SAAS,CAAC,SAAS,QAAQ,WAAW,eAAe,cAAc,aAAa,GAAG,QAAQ,IAAW,IAAI,IAAI,QAAQ,QAAQ,IAAW,GAAG,OAAO,MAAM,IAAI;AACnK,MAAI,UAAU,MAAM,OAAO;AAG3B,QAAM,QAAQ,CAAC,cAAc,aAAa;AAG1C,MAAI,MAAM,QAAQ,IAAW,KAAK,GAAG;AAAE,WAAO,QAAQ,QAAQ,IAAW,KAAK;AAAA,EAAQ;AACtF,MAAI,QAAQ,QAAsB;AAAE,WAAO,QAAQ,QAAQ,IAAI,KAAK,QAAQ,QAAQ,OAAO;AAAA,EAAG;AAC9F,MAAI,QAAQ,eAAsB;AAAE,WAAO;AAAA,EAAU;AACrD,MAAI,QAAQ,OAAO,YAAe;AAAE,WAAO,UAAU;AAAA,EAAY;AACjE,MAAI,QAAQ,OAAO,WAAe;AAAE,WAAO,CAAC,IAAI,SAAQ,SAAS,QAAQ,OAAO,CAAC,QAAQ,IAAI,IAAI,QAAQ,EAAE;AAAA,EAAG;AAC9G,MAAI,QAAQ,OAAO,UAAe;AAAE,WAAO,QAAQ,QAAQ,IAAW;AAAA,EAAG;AACzE,MAAI,QAAQ,OAAO,eAAe;AAAE,WAAO,QAAQ,QAAQ,IAAW;AAAA,EAAG;AACzE,MAAI,QAAQ,OAAO,SAAe;AAAE,WAAO,CAAC,SAAQ;AAAE,cAAQ,QAAQ,OAAO,OAAO,IAAI,IAAI;AAAG,iBAAW,QAAQ,OAAO,CAAC,QAAQ,IAAI,IAAI,MAAM;AAAA,IAAC;AAAA,EAAG;AACpJ,MAAI,QAAQ,OAAO,cAAe;AAAE,WAAO,CAAC,SAAQ;AAAE,cAAQ,QAAQ,OAAO,YAAY,IAAI,IAAI;AAAG,iBAAW,QAAQ,OAAO,CAAC,QAAQ,IAAI,IAAI,MAAM;AAAA,IAAG;AAAA,EAAE;AAC1J,MAAI,QAAQ,OAAO,aAAe;AAAE,WAAO,CAAC,SAAQ,WAAW,QAAQ,OAAO,CAAC,QAAQ,IAAI,IAAI,MAAM;AAAA,EAAG;AACxG,MAAI,OAAO,QAAQ,aAAa,QAAQ,UAAU,QAAQ,QAAQ,IAAI,KAAK,OAAO;AAAE,WAAO,QAAQ,QAAQ,IAAI;AAAA,EAAG;AAYtH;AAGA,MAAM,uBAAuB,CAAC,QAAQ,MAAM,aAAW;AACnD,MAAI,QAAQ,aAAa;AACrB,WAAO,UAAU,aAAa,IAAI,MAAM,CAAC,YAAU;AAC/C,UAAI,OAAO,WAAW,YAAY;AAC9B,eAAO,SAAS,QAAQ,OAAO;AAAA,MACnC,WACI,UAAU,WAAW,SAAS,QAAQ,MAAM;AAC5C,cAAM,OAAO,SAAS,QAAQ,SAAS,IAAI,GAAG,OAAO,UAAU,UAAU;AACzE,gBAAQ,UAAU,IAAI,IAAI,SAAO;AAAE,kBAAO;AAAG,iBAAO,OAAO,GAAG,IAAI;AAAA,QAAG;AACrE,eAAO,QAAQ,UAAU;AAAA,MAC7B;AAAA,IACJ;AAAA,EACJ;AACJ;AAGO,MAAM,mBAAmB;AAAA,EAC5B;AAAA,EAAe;AAAA,EAAY;AAAA,EAC3B,YAAY,MAAM,MAAM,QAAQ;AAC5B,SAAK,QAAQ;AACb,SAAK,QAAQ;AACb,SAAK,UAAU;AAAA,EACnB;AAAA;AAAA,EAGA,IAAI,QAAQ,MAAM,KAAK;AACnB,UAAM,OAAO,cAAc,QAAQ,IAAI;AACvC,QAAI,SAAS,MAAM;AAAE,aAAO;AAAA,IAAM;AAClC,WAAO,QAAQ,IAAI,QAAQ,MAAM,GAAG;AAAA,EACxC;AAAA;AAAA,EAGA,MAAM,QAAQ,KAAK,MAAM;AACrB,QAAI,QAA8B,EAAC,EAAG,UAAgC,EAAC;AACvE,QAAI,WAAiC,EAAC;AACtC,QAAI,WAAkB,CAAC,GAAG,KAAK,KAAK;AACpC,QAAI,MAAc;AAGlB,UAAM,SAAS,QAAQ,MAAM,QAAQ,OAAO,KAAK,OAAO,IAAI;AAC5D,QAAI,KAAK,UAAU,YAAY,GAAG;AAC9B,UAAI,MAAM,QAAQ,MAAM,GAAG;AAAE,eAAO,aAAa,MAAM;AAAA,MAAG;AAC1D,aAAO;AAAA,IACX;AAGA,YAAQ,KAAK;AAAO,MAChB,KAAK;AAAW,cAAM,UAAU;AAAQ,gBAAQ;AAAM;AAAA,MACtD,KAAK;AAAW,cAAM;AAAG,gBAAQ;AAAM;AAAA,MACvC,KAAK;AACD,cAAM,UAAU,SAAS;AACzB,YAAI,SAAS,SAAS,GAAG;AAAE,oBAAU,CAAC,CAAC,MAAM,GAAG,SAAS,MAAM,CAAC,GAAG,IAAI,CAAC;AAAA,QAAG;AAC3E;AAAA,MACJ,KAAK;AACD,cAAM;AACN,YAAI,SAAS,SAAS,GAAG,UAAU,CAAC,CAAC,KAAK,SAAS,GAAG,GAAG,IAAI,CAAC;AAC9D;AAAA,MACJ,KAAK;AACD,cAAM,CAAC,OAAO,aAAa,GAAG,KAAK,IAAI;AAAM,cAAM;AACnD,gBAAQ,cAAc,IAAI,MAAM,MAAM,WAAW,IAAI,EAAC;AAGtD,kBAAU,cAAc,IAAI,UAAU,QAAQ,OAAO,SAAS,OAAO,SAAS,eAAe,OAAO,UAAU,GAAG,IAAI,EAAC;AAGtH,gBAAQ,eAAe,MAAM,OAAO,UAAU;AAG9C,YAAI,cAAc,KAAK,OAAO,SAAS,GAAG;AACtC,mBAAS,IAAI,GAAG,IAAI,KAAK,IAAI,aAAa,OAAO,UAAU,CAAC,GAAG,KAAK;AAChE,qBAAS,KAAK,CAAC,QAAQ,GAAG,MAAM,CAAC,GAAG,WAAW,QAAQ,CAAC,KAAK,IAAI,CAAC;AAAA,UACtE;AAAA,QACJ;AACA;AAAA,MACJ,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAED,cAAM;AAAG,iBAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK;AAC/C,cAAI,WAAW,SAAS,CAAC,GAAG,KAAK,MAAM,CAAC,CAAC,GACrC;AACI,qBAAS,KAAK,CAAC,MAAI,GAAG,KAAK,MAAM,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,UACrD;AAAA,QACR;AACA;AAAA;AAAA,MAEJ,KAAK;AAAO,cAAM,KAAK,CAAC;AACxB,iBAAS,KAAK,CAAC,KAAK,KAAK,CAAC,GAAG,WAAW,GAAG,KAAK,IAAI,CAAC;AAAG;AAAA;AAI5D,UAAM,MAAM,kBAAkB,IAAI,KAAK,KAAK;AAC5C,QAAI,OAAO,UAAU,GAAG;AACpB,WAAK,UAAU,KAAK,MAAM,CAAC,GAAG,MAAM,MAAM,CAAC,KAAK,OAAO,SAAS,MAAM;AAAA,IAC1E,WAAW,OAAO,SAAS,GAAG;AAC1B,WAAK,UAAU,KAAK,OAAO,MAAM,SAAS;AAC1C,YAAM,QAAQ,CAAC,MAAM,MAAI,KAAK,UAAU,MAAI,GAAG,MAAM,MAAM,QAAQ,OAAO,SAAS,MAAM,CAAC;AAAA,IAC9F;AAGA,QAAI,UAAU,UAAU,GAAG;AACvB,WAAK,UAAU,SAAS,CAAC,IAAI,CAAC,KAAK,KAAK,SAAS,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,KAAK,OAAO,SAAS,MAAM;AAAA,IAC1H,WAAW,UAAU,SAAS,GAAG;AAC7B,WAAK,UAAU,KAAK,UAAU,UAAU,SAAS;AACjD,eAAS,QAAQ,CAAC,MAAM,MAAI,KAAK,UAAU,OAAO,CAAC,KAAK,MAAI,GAAG,OAAO,CAAC,GAAG,OAAO,CAAC,GAAG,OAAO,CAAC,KAAK,OAAO,SAAS,MAAM,CAAC;AAAA,IAC7H;AAGA,QAAI,SAAS,UAAU,GAAG;AACtB,WAAK,UAAU,KAAK,MAAM,QAAQ,CAAC,GAAG,QAAQ,CAAC,KAAK,OAAO,SAAS,SAAS;AAAA,IACjF,WAAW,SAAS,SAAS,GAAG;AAC5B,WAAK,UAAU,KAAK,MAAM,SAAS,QAAQ;AAC3C,cAAQ,QAAQ,CAAC,MAAM,MAAI,KAAK,UAAU,MAAI,GAAG,MAAM,MAAM,QAAQ,OAAO,SAAS,SAAS,CAAC;AAAA,IACnG;AAGA,QAAI,UAAU,QAAQ;AAAE,aAAO,IAAI,MAAM,QAAe,KAAK,OAAO;AAAA,IAAG;AACvE,QAAI,MAAM,QAAQ,MAAM,GAAG;AAAE,aAAO,aAAa,MAAM;AAAA,IAAG;AAC1D,WAAO;AAAA,EACX;AACJ;AAKA,MAAM,0BAA0B,CAAC,MAAM,QAAQ,QAAQ,WAAS;AAC5D,QAAM,eAAgB,OAAO,UAAU,MAAM,KAAK,OAAO,UAAU,MAAM,KAAK,SAAS,SAAU,OAAO,MAAM,QAAQ,MAAM,IAAI,EAAC;AACjI,MAAI,CAAC,KAAK,YAAY,KAAK,WAAW,QAAQ;AAC1C,UAAM,WAAY,kBAAmB,IAAI,MAAM;AAG/C,QAAI,aAAa,WAAW,GAAG;AAC3B,gBAAU,UAAU,QAAQ,MAAM,aAAa,CAAC,GAAG,SAAS;AAAA,IAChE,WAAW,aAAa,SAAS,GAAG;AAChC,gBAAU,UAAU,QAAQ,MAAM,cAAc,QAAQ;AACxD,mBAAa,QAAQ,CAAC,MAAM,MAAM,UAAU,UAAU,SAAS,GAAG,MAAM,MAAM,SAAS,CAAC;AAAA,IAC5F;AAGA,UAAM,aAAc,OAAO,UAAU,MAAM,KAAK,OAAO,UAAU,MAAM,KAAK,SAAS,SAC9E,SAAS,SAAU;AAC1B,QAAI,eAAe,GAAG;AAClB,gBAAU,UAAU,QAAQ,QAAW,MAAM,MAAM;AAAA,IACvD,WAAW,aAAa,GAAG;AACvB,YAAM,QAAQ,MAAM,UAAU,EAAE,KAAK,MAAS;AAC9C,gBAAU,UAAU,QAAQ,OAAO,MAAM,SAAS;AAClD,YAAM,QAAQ,CAAC,GAAG,MAAM,UAAU,UAAU,SAAS,GAAG,QAAW,MAAM,MAAM,CAAC;AAAA,IACpF;AAAA,EACJ;AACJ;AAKO,MAAM,oBAAoB;AAAA,EAC7B,CAAC,YAAY;AAAA,EACb,cAAc;AAAA,EACd;AAAA;AAAA,EAGA,IAAI,QAAQ,MAAM;AAAE,WAAO,QAAQ,IAAI,QAAQ,IAAI;AAAA,EAAG;AAAA;AAAA;AAAA,EAItD,IAAI,QAAQ,MAAM,KAAK;AACnB,UAAM,OAAO,cAAc,QAAQ,IAAI;AACvC,QAAI,SAAS,MAAM;AAAE,aAAO;AAAA,IAAM;AAGlC,QAAI,CAAC,cAAc,eAAe,WAAW,OAAO,EAAE,QAAQ,IAAW,KAAK,KAAK,QAAQ,QAAQ,IAAI,KAAK,QAAQ,QAAQ,QAAQ,IAAI,KAAK,QAAQ;AACjJ,aAAO,OAAO,QAAQ,QAAQ,IAAI,KAAK,aAAa,QAAQ,QAAQ,IAAI,GAAG,OAAO,MAAM,IAAI,QAAQ,QAAQ,IAAI;AAAA,IACpH;AAGA,UAAM,WAAY,mBAAoB,MAAM,MAAM;AAClD,UAAM,MAAM,UAAU,QAAQ,MAAM,QAAQ;AAAG,QAAI,OAAO,MAAM,OAAO;AACvE,UAAM,MAAM,qBAAqB,QAAQ,MAAM,QAAQ;AAAG,QAAI,OAAO,MAAM,OAAO;AAGlF,QAAI,QAAQ,cAAc;AAAE,aAAO,gBAAgB,KAAK,MAAM,IAAI;AAAA,IAAG;AACrE,QAAI,QAAQ,UAAU;AAClB,aAAO,CAAC,MAAW,MAAM;AACrB,cAAM,IAAI,QAAQ,QAAQ,GAAG;AAC7B,eAAO,kBAAkB,IAAI,MAAM,GAAG,UAAU,KAAK,GAAG,QAAW,aAAa;AAAA,MACpF;AAAA,IACJ;AAGA,QAAI,QAAQ,aAAa,QAAQ,cAAc,OAAO;AAGtD,QAAI,QAAQ,KAAK;AAAE,aAAO,MAAM;AAAE,eAAO,QAAQ,KAAK,SAAS,CAAC;AAAA,MAAG;AAAA,IAAG;AACtE,QAAI,QAAQ,KAAK;AAAE,aAAO,MAAM;AAAE,eAAO,QAAQ,KAAK,SAAS,CAAC;AAAA,MAAG;AAAA,IAAG;AACtE,QAAI,QAAQ,KAAK;AAAE,aAAO,MAAM;AAAE,eAAO,QAAQ,KAAK,SAAS,CAAC;AAAA,MAAG;AAAA,IAAG;AACtE,QAAI,QAAQ,KAAK;AAAE,aAAO,MAAM;AAAE,eAAO,QAAQ,KAAK,SAAS,CAAC;AAAA,MAAG;AAAA,IAAG;AAGtE,QAAI,QAAQ,KAAK;AAAE,aAAO,MAAM;AAAE,eAAO,QAAQ,KAAK,SAAS,CAAC;AAAA,MAAG;AAAA,IAAG;AACtE,QAAI,QAAQ,KAAK;AAAE,aAAO,MAAM;AAAE,eAAO,QAAQ,KAAK,SAAS,CAAC;AAAA,MAAG;AAAA,IAAG;AACtE,QAAI,QAAQ,KAAK;AAAE,aAAO,MAAM;AAAE,eAAO,QAAQ,KAAK,SAAS,CAAC;AAAA,MAAG;AAAA,IAAG;AACtE,QAAI,QAAQ,KAAK;AAAE,aAAO,MAAM;AAAE,eAAO,QAAQ,KAAK,SAAS,CAAC;AAAA,MAAG;AAAA,IAAG;AAGtE,UAAM,MAAM,QAAQ,QAAQ,IAAI,MAAM,QAAQ,UAAU,QAAQ,QAAQ,MAAM,IAAI;AAClF,QAAI,OAAO,OAAO,YAAY;AAAE,aAAO,IAAI,MAAM,OAAO,OAAO,aAAa,KAAK,OAAO,MAAM,IAAI,KAAK,IAAI,mBAAmB,MAAM,QAAQ,IAAI,CAAC;AAAA,IAAG;AACpJ,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,IAAI,QAAQ,MAAM,OAAO;AACrB,QAAI,OAAO,QAAQ,UAAU;AAEzB,UAAI,OAAO,UAAU,SAAS,IAAI,CAAC,GAAG;AAAE,eAAO,SAAS,IAAI,KAAK;AAAA,MAAM;AAAC,IAC5E;AAGA,QAAI,QAAQ,gBAAgB,OAAO;AAAE,WAAK,YAAY,IAAI,CAAC,CAAC;AAAO,aAAO;AAAA,IAAM;AAChF,QAAI,QAAQ,gBAAgB,CAAC,OAAO;AAAE,aAAO,KAAK,YAAY;AAAG,aAAO;AAAA,IAAM;AAG9E,UAAM,MAAM,QAAQ,QAAQ,IAAI;AAGhC,UAAM,OAAO,CAAC,KAAK,KAAK,KAAK,GAAG;AAChC,UAAM,OAAO,CAAC,KAAK,KAAK,KAAK,GAAG;AAGhC,UAAM,WAAW,KAAK,QAAQ,IAAI;AAClC,UAAM,WAAW,KAAK,QAAQ,IAAI;AAGlC,QAAI,MAAM;AACV,QAAI,YAAY,GAAG;AAAE,YAAM,QAAQ,IAAI,QAAQ,UAAU,KAAK;AAAA,IAAG,WAC7D,YAAY,GAAG;AAAE,YAAM,QAAQ,IAAI,QAAQ,UAAU,KAAK;AAAA,IAAG,OACjE;AAAE,YAAM,QAAQ,IAAI,QAAQ,MAAM,KAAK;AAAA,IAAG;AAG1C,QAAI,QAAQ,UAAU;AAClB,UAAI,WAAW,KAAK,KAAK,GAAG;AACxB,gCAAwB,MAAM,QAAQ,KAAK,KAAK;AAAA,MACpD;AAAA,IACJ;AAGA,QAAI,CAAC,KAAK,YAAY,KAAK,OAAO,QAAQ,YAAY,WAAW,KAAK,KAAK,GAAG;AAC1E,MAAC,mBAAoB,MAAM,MAAM,GAAG,UAAU,MAAM,OAAO,KAAK,OAAO,QAAQ,WAAW,SAAS,IAAI;AAAA,IAC3G;AAGA,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,eAAe,QAAQ,MAAM;AACzB,QAAI,OAAO,QAAQ,UAAU;AAEzB,UAAI,OAAO,UAAU,SAAS,IAAI,CAAC,GAAG;AAAE,eAAO,SAAS,IAAI,KAAK;AAAA,MAAM;AAAC,IAC5E;AAGA,QAAI,QAAQ,cAAc;AAAE,aAAO,KAAK,YAAY;AAAG,aAAO;AAAA,IAAM;AAGpE,UAAM,MAAM,QAAQ,QAAQ,IAAI;AAChC,UAAM,MAAM,QAAQ,eAAe,QAAQ,IAAI;AAG/C,QAAI,CAAC,KAAK,YAAY,MAAM,QAAQ,YAAY,QAAQ,gBAAgB,OAAO,QAAQ,WAAW;AAC9F,UAAI,OAAO,MAAM;AACb,QAAC,kBAAmB,IAAI,MAAM,GAAG,UAAU,MAAM,MAAM,KAAK,OAAO,QAAQ,WAAW,YAAY,IAAI;AAAA,MAC1G;AAAA,IACJ;AAGA,WAAO;AAAA,EACX;AACJ;AAGO,MAAM,qBAA4B;AAAA,EACrC,CAAC,YAAY;AAAA,EACb,cAAc;AAAA,EAAC;AAAA;AAAA,EAGf,IAAI,QAAQ,MAAe,KAAK;AAC5B,QAAI,CAAC,cAAc,eAAe,WAAW,SAAS,QAAQ,SAAS,SAAS,EAAE,QAAQ,IAAW,KAAK,KAAK,QAAQ,QAAQ,IAAI,KAAK,QAAQ,QAAQ,QAAQ,IAAI,KAAK,QAAQ;AAC7K,aAAO,OAAO,QAAQ,QAAQ,IAAI,KAAK,aAAa,QAAQ,QAAQ,QAAQ,QAAQ,IAAI,CAAC,IAAI,QAAQ,QAAQ,IAAI;AAAA,IACrH;AAGA,UAAM,WAAY,kBAAmB,IAAI,MAAM,KAAK,kBAAkB,IAAI,QAAQ,QAAQ,OAAO,KAAK,MAAM;AAC5G,UAAM,MAAM,UAAU,QAAQ,MAAM,QAAQ;AAAG,QAAI,OAAO,MAAM,OAAO;AAGvE,QAAI,QAAQ,QAAQ,IAAI,KAAK,QACzB,QAAQ,WAAW,SAAS,MAAM,KAClC,QAAQ,QAAQ,OAAO,KAAK,SAExB,OAAO,QAAQ,QAAQ,OAAO,KAAK,YACnC,OAAO,QAAQ,QAAQ,OAAO,KAAK,eAEvC,QAAQ,QAAQ,QAAQ,OAAO,GAAG,IAAI,KAAK,MAC7C;AACE,eAAS,QAAQ,QAAQ,OAAO,KAAK;AAAA,IACzC;AAGA,UAAM,MAAM,qBAAqB,QAAQ,MAAM,QAAQ;AAAG,QAAI,OAAO,MAAM,OAAO;AAIlF,QAAI,QAAQ,cAAc;AAAE,aAAO,gBAAgB,KAAK,MAAM,IAAI;AAAA,IAAG;AACrE,QAAI,QAAQ,UAAU;AAClB,aAAO,CAAC,MAAW,YAAY;AAC3B,cAAM,IAAI,QAAQ,QAAQ,GAAG;AAC7B,cAAM,MAAO,OAAO,UAAW,QAAQ,QAAQ,MAAM,IAAI;AACzD,eAAO,kBAAkB,IAAI,MAAM,GAAG,UAAU,KAAK,GAAG,KAAK,aAAa;AAAA,MAC9E;AAAA,IACJ;AAGA,QAAI,QAAQ,OAAO,aAAa;AAC5B,aAAO,CAAC,SAAU;AACd,cAAM,KAAK,YAAY,QAAQ,IAAI;AACnC,YAAI,QAAQ,IAAI,IAAI,UAAU,QAAQ,IAAI,IAAI,IAAI,IAAI;AACtD,YAAI,YAAY,EAAE,GAAG,OAAO,eAAe,IAAI,IAAI;AACnD,YAAI,YAAY,QAAQ,IAAI,OAAO,CAAC,GAAG,OAAO,eAAe,QAAQ,IAAI,OAAO,GAAG,IAAI;AACvF,eAAO,eAAe,QAAQ,IAAI,OAAO,KAAK,IAAI,IAAI;AAAA,MAC1D;AAAA,IACJ;AAGA,QAAI,QAAQ,OAAO,aAAa;AAC5B,aAAO,MAAM;AACT,cAAM,KAAK,YAAY,QAAQ,IAAI;AACnC,YAAI,QAAQ,IAAI,IAAI,UAAU,QAAQ,IAAI,IAAI,KAAI;AAClD,YAAI,YAAY,EAAE,UAAU,OAAO,MAAM,EAAE,KAAK;AAChD,YAAI,YAAY,QAAQ,IAAI,OAAO,CAAC,GAAG,OAAO,OAAO,QAAQ,IAAI,OAAO,KAAK,EAAE,KAAK;AACpF,eAAO,OAAO,QAAQ,IAAI,OAAO,KAAK,MAAM,EAAE,KAAK;AAAA,MACvD;AAAA,IACJ;AAGA,QAAI,QAAQ,YAAY;AACpB,aAAO,MAAM;AACT,cAAM,KAAK,YAAY,QAAQ,IAAI;AACnC,YAAI,QAAQ,IAAI,IAAI,UAAU,QAAQ,IAAI,IAAI,KAAI;AAClD,YAAI,QAAQ,IAAI,OAAO,WAAW,UAAU,QAAQ,IAAI,OAAO,WAAW,KAAI;AAC9E,YAAI,YAAY,EAAE,UAAU,OAAO,MAAM,EAAE,KAAK;AAChD,YAAI,YAAY,QAAQ,IAAI,OAAO,CAAC,GAAG,OAAO,OAAO,QAAQ,IAAI,OAAO,KAAK,EAAE,KAAK;AACpF,eAAO,OAAO,QAAQ,IAAI,OAAO,KAAK,MAAM,EAAE,KAAK;AAAA,MACvD;AAAA,IACJ;AAGA,QAAI,QAAQ,WAAW;AACnB,aAAO,MAAM;AACT,cAAM,KAAK,YAAY,QAAQ,IAAI;AACnC,YAAI,QAAQ,IAAI,IAAI,UAAU,QAAQ,IAAI,IAAI,KAAI;AAClD,YAAI,QAAQ,IAAI,OAAO,WAAW,UAAU,QAAQ,IAAI,OAAO,WAAW,KAAI;AAC9E,YAAI,YAAY,EAAE,GAAG,OAAO;AAC5B,YAAI,YAAY,QAAQ,IAAI,OAAO,CAAC,GAAG,OAAO,QAAQ,IAAI,OAAO;AACjE,eAAO,QAAQ,IAAI,OAAO,KAAK;AAAA,MACnC;AAAA,IACJ;AAGA,QAAI,OAAO,QAAQ,aAAa,QAAQ,UAAU,QAAQ,QAAQ,IAAI,KAAK,OAAO;AAAE,aAAO,QAAQ,QAAQ,IAAI;AAAA,IAAG;AAGlH,WAAO,YAAY,QAAQ,IAAI;AAAA,EACnC;AAAA;AAAA,EAGA,MAAM,QAAQ,KAAK,MAAM;AAAE,WAAO,QAAQ,MAAM,QAAQ,KAAK,IAAI;AAAA,EAAG;AAAA,EACpE,QAAQ,QAAQ;AAAE,WAAO,QAAQ,QAAQ,MAAM;AAAA,EAAG;AAAA,EAClD,UAAU,QAAQ,MAAM,MAAM;AAAE,WAAO,QAAQ,UAAU,QAAQ,MAAM,IAAI;AAAA,EAAG;AAAA,EAC9E,aAAa,QAAQ;AAAE,WAAO,QAAQ,aAAa,MAAM;AAAA,EAAG;AAAA;AAAA,EAG5D,yBAAyB,QAAQ,KAAK;AAClC,QAAI,MAAgD;AACpD,QAAI;AACA,sBAAgB,cAAc,wBAAQ,IAAI,KAAK,GAAG,MAAM,GAAG;AAC3D,UAAI,gBAAgB,MAAM,MAAM,GAAG,MAAM,GAAG,GAAG;AAAE,cAAM;AAAA,MAAW;AAClE,YAAM,QAAQ,yBAAyB,QAAQ,GAAG;AAAA,IACtD,SAAS,GAAG;AACR,YAAM;AAAA,IACV,UAAE;AACE,sBAAgB,MAAM,MAAM,GAAG,SAAS,GAAG;AAAA,IAC/C;AACA,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,IAAI,QAAQ,MAAe;AAAE,WAAQ,QAAQ;AAAA,EAAS;AAAA,EACtD,IAAI,QAAQ,MAAe,OAAO;AAC9B,UAAM,OAAO,cAAc,QAAQ,IAAI;AACvC,QAAI,SAAS,MAAM,OAAO;AAG1B,WAAO,iBAAiB,OAAO,CAAC,MAAM;AAClC,YAAMC,QAAO,cAAc,GAAG,IAAI;AAClC,UAAIA,UAAS,MAAM,OAAOA;AAG1B,UAAI,QAAQ,gBAAgB,OAAO;AAAE,aAAK,YAAY,IAAI,CAAC,CAAC;AAAO,eAAO;AAAA,MAAM;AAChF,UAAI,QAAQ,gBAAgB,CAAC,OAAO;AAAE,eAAO,KAAK,YAAY;AAAG,eAAO;AAAA,MAAM;AAG9E,YAAM,YAAY;AAGlB,UAAI,QAAQ,QAAQ,IAAI,KAAK,QACzB,QAAQ,WAAW,SAAS,MAAM,KAClC,QAAQ,QAAQ,OAAO,KAAK,SAExB,OAAO,QAAQ,QAAQ,OAAO,KAAK,YACnC,OAAO,QAAQ,QAAQ,OAAO,KAAK,eAEvC,QAAQ,QAAQ,QAAQ,OAAO,GAAG,IAAI,KAAK,MAC7C;AACE,iBAAS,QAAQ,QAAQ,OAAO,KAAK;AAAA,MACzC;AAGA,UAAI,OAAO,QAAQ,YAAY,EAAE,QAAQ,QAAQ,IAAI,KAAK,QAAQ,QAAQ,SAAS;AACnF,YAAM,WAAW,QAAQ,UAAW,QAAQ,QAAQ,MAAM,KAAK,QAAQ,QAAQ,IAAI,IAAK,QAAQ,QAAQ,IAAI;AAAG,aAAO,IAAI,IAAI;AAAG,YAAM,WAAW,QAAQ,QAAQ,IAAI,KAAK;AAC3K,UAAI,CAAC,KAAK,YAAY,KAAK,OAAO,QAAQ,aAAa,QAAQ,QAAQ,WAAW,KAAK,cAAc,UAAU,QAAQ,GAAG;AACtH,cAAM,YAAY,kBAAkB,IAAI,MAAM,KAAK,kBAAkB,IAAI,SAAS;AAClF,mBAAW,UAAU,MAAM,GAAG,QAAQ;AAAA,MAC1C;AACA,aAAO;AAAA,IACX,CAAC;AAAA,EACL;AAAA;AAAA,EAGA,eAAe,QAAQ,MAAe;AAClC,QAAI,QAAQ,cAAc;AAAE,aAAO,KAAK,YAAY;AAAG,aAAO;AAAA,IAAM;AAGpE,QAAI,QAAQ,QAAQ,IAAI,KAAK,QACzB,QAAQ,WAAW,SAAS,MAAM,KAClC,QAAQ,QAAQ,OAAO,KAAK,SAExB,OAAO,QAAQ,QAAQ,OAAO,KAAK,YACnC,OAAO,QAAQ,QAAQ,OAAO,KAAK,eAEvC,QAAQ,QAAQ,QAAQ,OAAO,GAAG,IAAI,KAAK,MAC7C;AACE,eAAS,QAAQ,QAAQ,OAAO,KAAK;AAAA,IACzC;AAGA,UAAM,WAAW,QAAQ,QAAQ,IAAI;AACrC,UAAM,SAAS,QAAQ,eAAe,QAAQ,IAAI;AAGlD,QAAI,CAAC,KAAK,YAAY,MAAM,QAAQ,gBAAgB,OAAO,QAAQ,WAAW;AAAE,MAAC,kBAAmB,IAAI,MAAM,GAAG,UAAU,MAAM,MAAM,QAAQ;AAAA,IAAG;AAClJ,WAAO;AAAA,EACX;AACJ;AAKO,MAAM,kBAAgC;AAAA,EACzC,CAAC,YAAY;AAAA,EACb,cAAc;AAAA,EAAE;AAAA;AAAA,EAGhB,IAAI,QAAQ,MAAe,KAAK;AAC5B,QAAI,CAAC,cAAc,eAAe,WAAW,OAAO,EAAE,QAAQ,IAAW,KAAK,KAAK,QAAQ,QAAQ,IAAI,KAAK,QAAQ,QAAQ,QAAQ,IAAI,KAAK,QAAQ;AACjJ,aAAO,OAAO,QAAQ,QAAQ,IAAI,KAAK,aACnC,QAAQ,QAAQ,QAAQ,QAAQ,IAAI,CAAC,IAAI,QAAQ,QAAQ,IAAI;AAAA,IACrE;AAGA,UAAM,WAAY,kBAAmB,IAAI,MAAM;AAC/C,UAAM,MAAM,UAAU,QAAQ,MAAM,QAAQ;AAAG,QAAI,OAAO,MAAM,OAAO;AACvE,UAAM,MAAM,qBAAqB,QAAQ,MAAM,QAAQ;AAAG,QAAI,OAAO,MAAM,OAAO;AAGlF,aAAU,QAAQ,QAAQ,YAAY,KAAK,QAAQ,QAAQ,aAAa,KAAK;AAC7E,UAAM,YAAY;AAAA,MAAQ;AAAA;AAAA,MAAoC,QAAQ,QAAQ,IAAI;AAAA,KAAC;AACnF,QAAI,OAAO,QAAQ,aAAa,QAAQ,UAAU,QAAQ,QAAQ,IAAI,KAAK,OAAO;AAAE,aAAO;AAAA,IAAW;AAGtG,QAAI,QAAQ,cAAc;AAAE,aAAO,gBAAgB,KAAK,MAAM,IAAI;AAAA,IAAG;AACrE,QAAI,QAAQ,UAAU;AAClB,aAAO,CAAC,QAAa;AACjB,YAAI,OAAO,MAAM;AAAE;AAAA,QAAQ;AAC3B,cAAM,IAAI,OAAO,IAAI,GAAG;AAAG,YAAI,KAAK,MAAM;AAAE;AAAA,QAAQ;AACpD,eAAO,kBAAkB,IAAI,MAAM,GAAG,UAAU,KAAK,GAAG,QAAW,MAAM;AAAA,MAC7E;AAAA,IACJ;AAGA,QAAI,QAAQ,SAAS;AACjB,aAAO,MAAM;AACT,cAAM,YAAiB,MAAM,KAAK,QAAQ,eAAe,EAAE,GAAG,SAAS,WAAU;AACjF,kBAAU,QAAQ,CAAC,CAAC,MAAM,QAAQ,MAAI;AAClC,cAAI,CAAC,KAAK,YAAY,KAAK,UAAU;AAAE,YAAC,kBAAmB,IAAI,MAAM,GAAG,UAAU,MAAM,MAAM,UAAU,SAAS;AAAA,UAAG;AAAA,QACxH,CAAC;AACD,eAAO;AAAA,MACX;AAAA,IACJ;AAGA,QAAI,QAAQ,UAAU;AAClB,aAAO,CAAC,MAAM,IAAI,SAAS;AACvB,cAAM,WAAW,OAAO,IAAI,IAAI,GAAG,SAAS,UAAU,IAAI;AAC1D,YAAI,CAAC,KAAK,YAAY,KAAK,UAAU;AAAE,UAAC,kBAAmB,IAAI,MAAM,GAAG,UAAU,MAAM,MAAM,UAAU,SAAS;AAAA,QAAG;AACpH,eAAO;AAAA,MACX;AAAA,IACJ;AAGA,QAAI,QAAQ,OAAO;AACf,aAAO,CAAC,MAAM,UAAU,oBAAoB,OAAO,CAAC,MAAI;AACpD,cAAM,WAAW,OAAO,IAAI,IAAI,GAAG,SAAS,UAAU,MAAM,KAAK;AACjE,YAAI,WAAW,UAAU,MAAM,GAAG;AAAE,cAAI,CAAC,KAAK,YAAY,GAAG;AAAE,YAAC,kBAAmB,IAAI,MAAM,GAAG,UAAU,MAAM,QAAQ,UAAU,YAAY,OAAO,SAAS,MAAM;AAAA,UAAG;AAAA,QAAE;AACzK,eAAO;AAAA,MACX,CAAC;AAAA,IACL;AAGA,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,IAAI,QAAQ,MAAe,OAAO;AAC9B,QAAI,QAAQ,cAAc;AAAE,WAAK,YAAY,IAAI,CAAC,CAAC;AAAO,aAAO;AAAA,IAAM;AACvE,QAAI,QAAQ,gBAAgB,CAAC,OAAO;AAAE,aAAO,KAAK,YAAY;AAAG,aAAO;AAAA,IAAM;AAC9E,WAAO,QAAQ,IAAI,QAAQ,MAAM,KAAK;AAAA,EAC1C;AAAA;AAAA,EAGA,IAAI,QAAQ,MAAe;AAAE,WAAO,QAAQ,IAAI,QAAQ,IAAI;AAAA,EAAG;AAAA,EAC/D,MAAM,QAAQ,KAAK,MAAM;AAAE,WAAO,QAAQ,MAAM,QAAQ,KAAK,IAAI;AAAA,EAAG;AAAA,EACpE,UAAU,QAAQ,MAAM,MAAM;AAAE,WAAO,QAAQ,UAAU,QAAQ,MAAM,IAAI;AAAA,EAAG;AAAA,EAC9E,QAAQ,QAAQ;AAAE,WAAO,QAAQ,QAAQ,MAAM;AAAA,EAAG;AAAA,EAClD,aAAa,QAAQ;AAAE,WAAO,QAAQ,aAAa,MAAM;AAAA,EAAG;AAAA;AAAA,EAG5D,yBAAyB,QAAQ,KAAK;AAClC,QAAI,MAAgD;AACpD,QAAI;AACA,sBAAgB,cAAc,wBAAQ,IAAI,KAAK,GAAG,MAAM,GAAG;AAC3D,UAAI,gBAAgB,MAAM,MAAM,GAAG,MAAM,GAAG,GAAG;AAAE,cAAM;AAAA,MAAW;AAClE,YAAM,QAAQ,yBAAyB,QAAQ,GAAG;AAAA,IACtD,SAAS,GAAG;AACR,YAAM;AAAA,IACV,UAAE;AACE,sBAAgB,MAAM,MAAM,GAAG,SAAS,GAAG;AAAA,IAC/C;AACA,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,eAAe,QAAQ,MAAe;AAClC,QAAI,QAAQ,cAAc;AAAE,aAAO,KAAK,YAAY;AAAG,aAAO;AAAA,IAAM;AACpE,UAAM,SAAS,QAAQ,eAAe,QAAQ,IAAI;AAClD,WAAO;AAAA,EACX;AACJ;AAGO,MAAM,kBAAyB;AAAA,EAClC,CAAC,YAAY,IAAc;AAAA,EAC3B,cAAc;AAAA,EAAC;AAAA;AAAA,EAGf,IAAI,QAAQ,MAAe,KAAK;AAC5B,QAAI,CAAC,cAAc,eAAe,WAAW,OAAO,EAAE,QAAQ,IAAW,KAAK,KAAK,QAAQ,QAAQ,IAAI,KAAK,QAAQ,QAAQ,QAAQ,IAAI,KAAK,QAAQ;AACjJ,aAAO,OAAO,QAAQ,QAAQ,IAAI,KAAK,aAAa,QAAQ,QAAQ,QAAQ,QAAQ,IAAI,CAAC,IAAI,QAAQ,QAAQ,IAAI;AAAA,IACrH;AAGA,UAAM,WAAY,kBAAmB,IAAI,MAAM;AAC/C,UAAM,MAAM,UAAU,QAAQ,MAAM,QAAQ;AAAG,QAAI,OAAO,MAAM,OAAO;AACvE,UAAM,MAAM,qBAAqB,QAAQ,MAAM,QAAQ;AAAG,QAAI,OAAO,MAAM,OAAO;AAGlF,aAAU,QAAQ,QAAQ,YAAY,KAAK,QAAQ,QAAQ,aAAa,KAAK;AAC7E,UAAM,YAAY,QAAQ,QAAQ,QAAQ,QAAQ,IAAI,CAAC;AACvD,QAAI,OAAO,QAAQ,aAAa,QAAQ,UAAU,QAAQ,QAAQ,IAAI,KAAK,OAAO;AAAE,aAAO;AAAA,IAAW;AAGtG,QAAI,QAAQ,cAAc;AAAE,aAAO,gBAAgB,KAAK,MAAM,IAAI;AAAA,IAAG;AACrE,QAAI,QAAQ,UAAU;AAClB,aAAO,CAAC,QAAa;AACjB,YAAI,OAAO,MAAM;AACjB,cAAM,IAAI,OAAO,IAAI,GAAG;AACxB,eAAO,kBAAkB,IAAI,MAAM,GAAG,UAAU,KAAK,GAAG,QAAW,aAAa;AAAA,MACpF;AAAA,IACJ;AAGA,QAAI,QAAQ,SAAS;AACjB,aAAO,MAAM;AACT,cAAM,YAAY,MAAM,KAAK,QAAQ,cAAc,EAAE,GAAG,SAAS,WAAU;AAC3E,kBAAU,QAAQ,CAAC,aAAW;AAAE,cAAI,CAAC,KAAK,YAAY,KAAK,UAAU;AAAE,YAAC,kBAAmB,IAAI,MAAM,GAAG,UAAU,MAAM,MAAM,UAAU,SAAS;AAAA,UAAG;AAAA,QAAE,CAAC;AACvJ,eAAO;AAAA,MACX;AAAA,IACJ;AAGA,QAAI,QAAQ,UAAU;AAClB,aAAO,CAAC,UAAU;AACd,cAAM,WAAW,OAAO,IAAI,KAAK,IAAI,QAAQ,MAAM,SAAS,UAAU,KAAK;AAC3E,YAAI,CAAC,KAAK,YAAY,KAAK,UAAU;AAAE,UAAC,kBAAmB,IAAI,MAAM,GAAG,UAAU,OAAO,MAAM,UAAU,SAAS;AAAA,QAAG;AACrH,eAAO;AAAA,MACX;AAAA,IACJ;AAGA,QAAI,QAAQ,OAAO;AAEf,aAAO,CAAC,UAAU;AACd,cAAM,WAAW,OAAO,IAAI,KAAK,IAAI,QAAQ,MAAM,SAAS,UAAU,KAAK;AAC3E,YAAI,WAAW,UAAU,KAAK,GAAG;AAAE,cAAI,CAAC,KAAK,YAAY,KAAK,CAAC,UAAU;AAAE,YAAC,kBAAmB,IAAI,MAAM,GAAG,UAAU,OAAO,OAAO,UAAU,MAAM;AAAA,UAAG;AAAA,QAAE;AACzJ,eAAO;AAAA,MACX;AAAA,IACJ;AAGA,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,IAAI,QAAQ,MAAe,OAAO;AAC9B,QAAI,QAAQ,gBAAgB,OAAO;AAAE,WAAK,YAAY,IAAI,CAAC,CAAC;AAAO,aAAO;AAAA,IAAM;AAChF,QAAI,QAAQ,gBAAgB,CAAC,OAAO;AAAE,aAAO,KAAK,YAAY;AAAG,aAAO;AAAA,IAAM;AAC9E,WAAO,QAAQ,IAAI,QAAQ,MAAM,KAAK;AAAA,EAC1C;AAAA;AAAA,EAGA,IAAI,QAAQ,MAAe;AAAE,WAAO,QAAQ,IAAI,QAAQ,IAAI;AAAA,EAAG;AAAA,EAC/D,MAAM,QAAQ,KAAK,MAAM;AAAE,WAAO,QAAQ,MAAM,QAAQ,KAAK,IAAI;AAAA,EAAG;AAAA,EACpE,UAAU,QAAQ,MAAM,MAAM;AAAE,WAAO,QAAQ,UAAU,QAAQ,MAAM,IAAI;AAAA,EAAG;AAAA,EAC9E,QAAQ,QAAQ;AAAE,WAAO,QAAQ,QAAQ,MAAM;AAAA,EAAG;AAAA,EAClD,aAAa,QAAQ;AAAE,WAAO,QAAQ,aAAa,MAAM;AAAA,EAAG;AAAA;AAAA,EAG5D,yBAAyB,QAAQ,KAAK;AAClC,QAAI,MAAgD;AACpD,QAAI;AACA,sBAAgB,cAAc,wBAAQ,IAAI,KAAK,GAAG,MAAM,GAAG;AAC3D,UAAI,gBAAgB,MAAM,MAAM,GAAG,MAAM,GAAG,GAAG;AAAE,cAAM;AAAA,MAAW;AAClE,YAAM,QAAQ,yBAAyB,QAAQ,GAAG;AAAA,IACtD,SAAS,GAAG;AACR,YAAM;AAAA,IACV,UAAE;AACE,sBAAgB,MAAM,MAAM,GAAG,SAAS,GAAG;AAAA,IAC/C;AACA,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,eAAe,QAAQ,MAAe;AAClC,QAAI,QAAQ,cAAc;AAAE,aAAO,KAAK,YAAY;AAAG,aAAO;AAAA,IAAM;AACpE,UAAM,SAAS,QAAQ,eAAe,QAAQ,IAAI;AAClD,WAAO;AAAA,EACX;AACJ;AAGO,MAAM,gBAAgB,CAAC,WAAgB;AAC1C,SAAO,CAAC,GAAG,OAAO,UAAU,YAAY,OAAO,UAAU,eAAe,UAAU,SAAS,SAAS,YAAY,KAAK,SAAS,SAAS;AAC3I;AAGO,MAAM,eAAgB,CAAU,QAAgC;AAAE,SAAQ,cAAc,GAAG,IAAI,MAAM,SAAS,KAAK,IAAI,qBAAqB;AAAI;AAChJ,MAAM,gBAAgB,CAAU,QAA4B;AAAE,SAAQ,cAAc,GAAG,IAAK,MAA0B,SAAS,KAAK,IAAI,sBAAsB;AAAI;AAClK,MAAM,aAAgB,CAAwD,QAA4B;AAAE,SAAQ,cAAc,GAAG,IAAI,MAAM,SAAS,KAAK,IAAI,mBAAmB;AAAI;AACxL,MAAM,aAAgB,CAAqD,QAA4B;AAAE,SAAQ,cAAc,GAAG,IAAI,MAAM,SAAS,KAAK,IAAI,mBAAmB;AAAI;;AC1xBrL,MAAM,YAAY,CAAC,SAAiD,aAAoC;AAC3G,QAAM,YAAY,mBAAmB,WAAW,OAAQ,SAAwC,QAAQ;AACxG,QAAM,MAAuB;AAAA,IACzB,CAAC,QAAQ,GAAG,YAAa,UAAyC;AAAA,IAClE,CAAC,MAAM,GAAG,YAAY,IAAK,OAAO,MAAM,OAAO,KAAK,CAAC,KAAK;AAAA,IAC1D,CAACF,WAAS,GAAG;AAAA,IACb,CAAC,QAAQ,WAAW,IAAI;AAAE,aAAO,OAAO,OAAO,MAAM,KAAK,EAAE,KAAK;AAAA,IAAI;AAAA,IACrE,CAAC,QAAQ,WAAW,EAAE,MAAW;AAAE,aAAO,gBAAgB,OAAO,OAAO,MAAM,KAAK,WAAW,OAAO,MAAM,IAAK,OAAO,MAAM,GAAG,SAAS,MAAO,GAAG,IAAI;AAAA,IAAG;AAAA,IAC1J,IAAI,MAAM,GAAQ;AAAE,WAAK,MAAM,KAAM,KAAK,QAAQ,CAAC,OAAO,MAAM,CAAC,IAAK,OAAO,CAAC,IAAI,KAAK,MAAM,MAAM;AAAA,IAAG;AAAA,IACtG,IAAI,QAAQ;AAAE,aAAO,OAAO,KAAK,MAAM,KAAK,CAAC,KAAK;AAAA,IAAG;AAAA,GACzD;AACA,QAAM,KAAK,QAAQ,GAAG;AAAoC,EAAC,SAAwC,OAAO,CAAC,MAAI,GAAG,QAAQ,CAAC;AAAG,SAAO;AACzI;AAGO,MAAM,YAAY,CAAC,SAAiD,aAAoC;AAC3G,QAAM,YAAY,mBAAmB,WAAW,OAAQ,SAAwC,QAAQ;AACxG,QAAM,MAAuB;AAAA,IACzB,CAAC,QAAQ,GAAG,YAAa,UAAyC;AAAA,IAClE,CAAC,MAAM,IAAI,YAAY,KAAK,OAAO,MAAM,OAAO,WAAW,WAAW,OAAO,OAAO,IAAK,WAAW,EAAG,CAAC,MAAM;AAAA,IAC9G,CAACA,WAAS,GAAG;AAAA,IACb,CAAC,QAAQ,WAAW,IAAI;AAAE,aAAO,OAAO,OAAO,MAAM,KAAK,EAAE,KAAK;AAAA,IAAI;AAAA,IACrE,CAAC,QAAQ,WAAW,EAAE,MAAW;AAAE,aAAO,eAAe,OAAO,MAAM,KAAK,IAAI,IAAI;AAAA,IAAG;AAAA,IACtF,IAAI,MAAM,GAAQ;AAAE,WAAK,MAAM,IAAI,OAAO,OAAO,KAAK,WAAW,OAAO,CAAC,IAAK,KAAK,EAAG,KAAK;AAAA,IAAI;AAAA,IAC/F,IAAI,QAAQ;AAAE,aAAO,OAAO,KAAK,MAAM,KAAK,EAAE,KAAK;AAAA,IAAI;AAAA,GAC3D;AACA,QAAM,KAAK,QAAQ,GAAG;AAAoC,EAAC,SAAwC,OAAO,CAAC,MAAI,GAAG,QAAQ,CAAC;AAAG,SAAO;AACzI;AAGO,MAAM,aAAa,CAAC,SAAmD,aAAqC;AAC/G,QAAM,YAAY,mBAAmB,WAAW,OAAQ,SAAyC,QAAQ;AACzG,QAAM,MAAwB;AAAA,IAC1B,CAAC,QAAQ,GAAG,YAAa,UAA0C;AAAA,IACnE,CAAC,MAAM,IAAI,YAAY,SAAU,MAAM,OAAO,KAAK,OAAQ,OAAO,MAAM,OAAO,KAAK,WAAW,OAAO,CAAC,CAAC,MAAM,OAAO,IAAK,UAAU,UAAW;AAAA,IAC/I,CAACA,WAAS,GAAG;AAAA,IACb,CAAC,QAAQ,WAAW,IAAI;AAAE,aAAO,OAAO,OAAO,MAAM,KAAK,EAAE,KAAK;AAAA,IAAI;AAAA,IACrE,CAAC,QAAQ,WAAW,EAAE,MAAW;AAAE,aAAO,eAAe,CAAC,CAAC,OAAO,MAAM,KAAK,OAAO,IAAI;AAAA,IAAG;AAAA,IAC3F,IAAI,MAAM,GAAQ;AAAE,WAAK,MAAM,KAAK,KAAK,OAAQ,OAAO,KAAK,WAAW,OAAO,CAAC,CAAC,IAAK,KAAK,MAAM,MAAM;AAAA,IAAO;AAAA,IAC9G,IAAI,QAAQ;AAAE,aAAO,KAAK,MAAM,KAAK;AAAA,IAAO;AAAA,GAChD;AACA,QAAM,KAAK,QAAQ,GAAG;AAAqC,EAAC,SAAyC,OAAO,CAAC,MAAI,GAAG,QAAQ,CAAC;AAAG,SAAO;AAC3I;AAGO,MAAM,UAAU,CAAU,SAAuC,aAA6C;AACjH,QAAM,YAAY,mBAAmB,WAAW,OAAQ,SAAmC,QAAQ;AACnG,QAAM,MAAkB;AAAA,IACpB,CAAC,QAAQ,GAAG,YAAa,UAAoC;AAAA,IAC7D,CAACA,WAAS,GAAG;AAAA,IACb,CAAC,QAAQ,WAAW,IAAI;AAAE,aAAO,OAAO,KAAK,SAAS,EAAE,KAAK;AAAA,IAAI;AAAA,IACjE,CAAC,QAAQ,WAAW,EAAE,MAAW;AAAE,aAAO,eAAe,KAAK,OAAO,IAAI;AAAA,IAAG;AAAA,IAC5E,OAAO,YAAY,OAAO,MAAM,OAAO;AAAA,GAC3C;AACA,QAAM,KAAK,QAAQ,GAAG;AACtB,EAAC,SAAmC,OAAO,CAAC,MAAM,GAAG,QAAQ,CAAC;AAC9D,WAAS,SAAS,CAAC,MAAM;AAAmB,SAAK,QAAQ,KAAI;AAAA,EAAG,CAAC;AACjE,SAAO;AACX;AAGO,MAAM,UAAU,CAAU,KAAsB,UAA0B,SAAS,SAAe,aAAwB;AAC7H,MAAI,YAAY,GAAG,KAAK,CAAC,KAAK,OAAO;AAGrC,MAAI,MAAM,QAAQ,GAAG,KAAK,CAAC,kBAAkB,MAAM,CAAC,GAAG,GAAG,MAAM,MAAM,QAAQ,MAAM,CAAC,CAAC,KAAK,OAAO,MAAM,CAAC,KAAK,YAAY,OAAO,MAAM,CAAC,KAAK,aAAa;AAAE,UAAM,MAAM,CAAC;AAAA,EAAG;AAG5K,OAAK,YAAY,MAAM,QAAQ,GAAG,IAAI,OAAO,YAAY,QAAQ,kBAAkB,SAAS,GAAG,GAAG;AAAE;AAAA,EAAQ;AAG5G,MAAI,WAAW,SAAS,MAAM,OAAO,CAAC,KAAK,aAAa,MAAM,OAAO,CAAC,GAAG;AACrE,WAAO,gBAAgB,MAAM,OAAO,CAAC;AAAA,EACzC;AAGA,MAAI,WAAW,OAAO,KAAK,eAAe,cAAc,aAAa,KAAK,cAAc,OAAO,CAAC,GAAG;AAC/F,WAAO,KAAK,cAAc,OAAO;AAAA,EACrC;AAOA,QAAM,IAAS,QAAQ;AAAA,IACnB,CAAC,MAAM,GAAK,IAAY,OAAO,MAAM,WAAY,IAAY,OAAO;AAAA,IACpE,CAACA,WAAS,GAAG;AAAA,IACb,CAAC,QAAQ,WAAW,IAAI;AAAE,aAAO,OAAO,MAAM,OAAO,KAAK,KAAK,MAAM,KAAK,EAAE,KAAK;AAAA,IAAI;AAAA,IACrF,CAAC,QAAQ,WAAW,EAAE,MAAW;AAAE,aAAO,eAAe,MAAM,OAAO,GAAG,IAAI;AAAA,IAAG;AAAA,IAChF,IAAI,MAAM,GAAG;AAAE,QAAEG,cAAY,IAAI;AAAM,MAAC,IAAY,OAAO,IAAK,KAAK,MAAM,IAAI,KAAK,cAAe,IAAY,OAAO,CAAC;AAAI,QAAEA,cAAY,IAAI;AAAA,IAAO;AAAA,IACpJ,IAAI,QAAQ;AAAE,aAAQ,KAAK,MAAM,IAAI,MAAM,OAAO,KAAK,KAAK,MAAM;AAAA,IAAI;AAAA,GACzE;AAID,QAAM,MAAM,SAAS,KAAK,CAAC,MAAM;AAAE,QAAI,QAAQ,KAAI;AAAA,EAAgD,CAAC;AACpG,iBAAe,GAAG,OAAO,SAAS,GAAG;AACrC,SAAO;AACX;AAGO,MAAM,OAAO,CAAU,OAAoC,aAAiG;AAC/J,UAAQ,OAAO;AAAO,IAClB,KAAK;AAAW,aAAO,WAAW,OAAO,QAAQ;AAAA,IACjD,KAAK;AAAW,aAAO,UAAU,OAAO,QAAQ;AAAA,IAChD,KAAK;AAAW,aAAO,UAAU,OAAO,QAAQ;AAAA,IAChD,KAAK;AAAW,UAAI,SAAS,MAAM;AAAE,eAAO,QAAQ,QAAQ,KAAK,GAAG,QAAQ;AAAA,MAAU;AAAA,IACtF;AAAS,aAAO,QAAQ,OAAO,QAAQ;AAAA;AAE/C;AAGO,MAAM,MAAM,CACf,OACA,OAAuB,SACvB,aAKC;AAED,QAAM,KAAK,aAAa,KAAK,IACtB,QACA,KAAK,OAAO,QAAQ;AAG3B,MAAI,QAAQ,MAAM;AAGd,WAAO;AAAA,MACH;AAAA,MACA;AAAA,MACA;AAAA,KACJ;AAAA,EACJ,OAAO;AACH,WAAO;AAAA,EACX;AACJ;AAuBO,MAAM,UAAU,CAAU,QAAW,cAAwC;AAChF,MAAI,UAAU,QAAQ,OAAO,UAAU,YAAY,EAAE,OAAO,UAAU,YAAY,OAAO,UAAU,eAAe,cAAc,MAAM,GAAG;AACrI,WAAO;AAAA,EACX;AAGA,OAAK,SAAS,QAAQ,MAAM,MAAM,QAAQ,kBAAkB,WAAW,kBAAkB,WAAW,cAAc,MAAM,GAAG;AACvH,WAAO;AAAA,EACX;AAGA,QAAM,SAAc;AACpB,MAAI,UAAU,QACV,OAAO,UAAU,YAAY,EAAE,OAAO,UAAU,YAAY,OAAO,UAAU,eAC7E,kBAAkB,WAAW,kBAAkB,SACjD;AAAE,WAAO;AAAA,EAA2B;AAGtC,MAAI,WAAW;AACf,MAAI,MAAM,QAAQ,MAAM,GAAG;AAAE,eAAW,aAAa,MAAM;AAAG,WAAO;AAAA,EAAU,WAC3E,kBAAkB,KAAK;AAAE,eAAW,WAAW,MAAM;AAAG,WAAO;AAAA,EAAU,WACzE,kBAAkB,KAAK;AAAE,eAAW,WAAW,MAAM;AAAG,WAAO;AAAA,EAAU,WACzE,OAAO,UAAU,cAAc,OAAO,UAAU,UAAU;AAAE,eAAW,cAAc,MAAM;AAAG,WAAO;AAAA,EAAU;AACnH,SAAO;AACX;AAGO,MAAM,eAAe,CAAC,WAAgB;AACzC,MAAI,OAAO,oBAAoB,eAAe,kBAAkB,kBAAkB;AAAE,WAAO;AAAA,EAAM;AACjG,SAAO,CAAC,GAAG,OAAO,UAAU,YAAY,OAAO,UAAU,eAAe,UAAU,SAAS,SAAS,YAAY,KAAK,SAAS,SAAS,KAAK,mBAAmB,MAAM,MAAM;AAC/K;AAGO,MAAM,kBAAkB,CAAC,WAAqB;AACjD,SAAO,aAAa,MAAM,IAAI,QAAQ,MAAM,IAAI;AACpD;;ACvMO,MAAM,2CAA2B,SAAwB;AAGhE,MAAM,gBAAgB,CAAC,QAAa;AAChC,MAAI,OAAO,OAAO,YAAY,OAAO,QAAQ,EAAE,OAAO,OAAO,YAAY,OAAO,OAAO,aAAa;AACpG,SAAO;AACX;AAGO,MAAM,oBAA+B,CAAC,QAAa,MAAsB,IAA6E,MAAkB,SAAS;AAAE,MAAI,CAAC,QAAQ;AACnM,MAAI,CAAC,cAAc,MAAM,GAAG;AAC5B,QAAM,QAAS,QAAQ,OAAO,WAAY,OAAO;AAGjD,MAAI,WAAW,SAAS,aAAa,KAAM,kBAAmB,IAAI,MAAM;AAGxE,WAAS,SAAS,YAAY,KAAK;AAGnC,iBAAe,MAAM;AACjB,QAAI,SAAS,QAAQ,SAAS,OAAO,UAAU;AAAE,iBAAW,QAAQ,OAAO,EAAO;AAAA,IAAG,OAAO;AAAE,oBAAc,QAAQ,EAAO;AAAA,IAAG;AAAA,EAClI,CAAC;AAGD,MAAI,QAAa,UAAU,WAAW,IAAI,KAAK;AAC/C,MAAI,SAAS,OAAO,OAAO,GAAG,OAAO;AAGrC,iBAAe,OAAO,OAAO,SAAS,KAAK;AAC3C,iBAAe,OAAO,OAAO,cAAc,KAAK;AAChD,iBAAe,QAAQ,OAAO,SAAS,KAAK;AAC5C,iBAAe,QAAQ,OAAO,cAAc,KAAK;AACjD,SAAO;AACX;AAGO,MAAM,iBAA4B,CAAC,IAAsB,GAAmB,IAA0E,MAAkB,SAAS;AAEpL,QAAM,OAAY,EAAE;AAAG,MAAI,WAAW,IAAI;AAC1C,QAAM,MAAM,CAAC,OAAY;AAAE,SAAK,IAAI,QAAQ,OAAO,SAAS,QAAQ;AAAG,eAAW,IAAI,QAAQ;AAAA,EAAO;AACrG,EAAC,IAAY,mBAAmB,UAAU,KAAK,IAAI;AACnD,SAAO,MAAO,IAAY,sBAAsB,UAAU,KAAK,IAAI;AACvE;AAGA,MAAM,gBAAgB,CAAC,OAAY;AAC/B,SAAQ,MAAM,QAAQ,EAAE,KAAK,IAAI,UAAU,KAAK,cAAc,KAAK,CAAC,CAAC,MAAO,UAAU,KAAK,CAAC,CAAC,KAAK,KAAK,CAAC,KAAK,OAAO;AACxH;AAGO,MAAM,kBAA6B,CAAc,IAAqB,GAAmB,IAA6E,MAAkB,SAAS;AACpM,QAAM,OAAO,UAAU,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,IAAI;AAC5C,SAAO,SAAS,KAAK,CAAC,GAAG,MAAM,IAAI,GAAG;AAC1C;AAGO,MAAM,oBAA+B,CAAC,KAAU,MAAsB,IAA6E,MAAkB,SAAS;AACjL,SAAO,KAAK,OAAO,CAACC,SAAa,WAAWA,MAAK,MAAM,IAAI,GAAG,CAAC,GAAG,QAAQ,CAAC,MAAW;AAAE,YAAQ,KAAK,CAAC;AAAG,WAAO;AAAA,EAAM,CAAC;AAC3H;AAGO,MAAM,WAAW,CAAC,KAAU,MAAiC,KAAe,MAAI;AAAC,GAAG,QAAc;AACrG,MAAI,OAAO,QAAQ,YAAY;AAAE,SAAK;AAAM,WAAO;AAAA,EAAM;AAGzD,MAAI,YAAY,GAAG,KAAK,OAAO,OAAO,UAAU;AAAE,WAAO,eAAe,MAAM;AAAE,aAAO,KAAK,KAAK,MAAa,MAAM,IAAI;AAAA,IAAG,CAAC;AAAA,EAAG;AAC/H,MAAI,OAAO,MAAM,SAAS,KAAK,YAAY;AACvC,WAAO,MAAM,SAAS,IAAI,IAAI,MAAM,GAAG;AAAA,EAC3C,WACI,cAAc,GAAG,GAAG;AACpB,UAAM,UAAU;AAChB,UAAM,MAAM,YAAY,KAAK;AAC7B,QAAI,sBAAsB,MAAM,GAAG,GAAG;AAClC,aAAO,sBAAsB,MAAM,GAAG,IAAI,SAAS,MAAM,IAAI,GAAG;AAAA,IACpE;AAGA,QAAI,aAAa,OAAO,KAAM,cAAc,GAAG,KAAK,aAAa,MAAM,CAAC,CAAC,GAAI;AAEzE,UAAI,WAAW,GAAG,GACd;AAAE,eAAO,sBAAsB,cAAc,KAAK,iBAAiB,IAAI,KAAK,MAAM,IAAI,GAAG;AAAA,MAAG,WAC5F,cAAc,GAAG,GACjB;AAAE,eAAO,sBAAsB,cAAc,KAAK,eAAe,IAAI,KAAK,MAAM,IAAI,GAAG;AAAA,MAAG,WAC1F,OAAO,oBAAoB,eAAe,eAAe,kBACzD;AAAE,eAAO,sBAAsB,cAAc,KAAK,cAAc,IAAI,KAAK,MAAM,IAAI,GAAG;AAAA,MAAG,OACzF;AAAE,eAAO,sBAAsB,cAAc,KAAK,iBAAiB,IAAI,SAAS,MAAM,IAAI,GAAG;AAAA,MAAG;AAAA,IACxG,OAAO;AACH,aAAO,eAAe,MAAM;AACxB,YAAI,cAAc,GAAG,GAAG;AAAE,iBAAO,aAAa,MAAM,CAAC,GAAG,MAAM,CAAC,GAAU,EAAO;AAAA,QAAG;AACnF,YAAI,QAAQ,QAAQ,QAAQ,OAAO,UAAU;AAAE,iBAAO,aAAa,KAAK,MAAM,EAAO;AAAA,QAAG;AACxF,eAAO,gBAAgB,KAAK,EAAO;AAAA,MACvC,CAAC;AAAA,IACL;AAAA,EACJ;AACJ;AAUO,MAAM,cAAc;AAAA,EACvB,2BAAW,SAAQ;AAAA;AAAA,EAEnB,aAAa,MAAM;AACf,QAAI,QAAQ,KAAK,KAAK,IAAI,IAAI;AAC9B,QAAI,CAAC,OAAO;AACR,kCAAY,SAAQ;AACpB,WAAK,KAAK,IAAI,MAAM,KAAK;AAAA,IAC7B;AACA,WAAO;AAAA,EACX;AAAA,EAEA,WAAW,MAAM;AACb,QAAI,CAAC,MAAM,QAAQ,IAAI,KAAK,KAAK,WAAW,GAAG;AAE3C,aAAO,CAAC,MAAM,IAAI;AAAA,IACtB;AACA,WAAO;AAAA,EACX;AAAA,EAEA,MAAM,MAAM;AACR,WAAO,KAAK,KAAK,IAAI,IAAI;AAAA,EAC7B;AAAA,EAEA,IAAI,MAAM,OAAO;AACb,UAAM,CAAC,MAAM,IAAI,IAAI,KAAK,WAAW,IAAI;AACzC,SAAK,aAAa,IAAI,EAAE,IAAI,MAAM,KAAK;AACvC,WAAO;AAAA,EACX;AAAA,EAEA,IAAI,MAAM;AACN,UAAM,CAAC,MAAM,IAAI,IAAI,KAAK,WAAW,IAAI;AACzC,WAAO,KAAK,KAAK,IAAI,IAAI,GAAG,IAAI,IAAI;AAAA,EACxC;AAAA,EAEA,IAAI,MAAM;AACN,UAAM,CAAC,MAAM,IAAI,IAAI,KAAK,WAAW,IAAI;AACzC,WAAO,KAAK,KAAK,IAAI,IAAI,GAAG,IAAI,IAAI,KAAK;AAAA,EAC7C;AAAA,EAEA,OAAO,MAAM;AACT,UAAM,CAAC,MAAM,IAAI,IAAI,KAAK,WAAW,IAAI;AACzC,UAAM,QAAQ,KAAK,KAAK,IAAI,IAAI;AAChC,WAAO,QAAQ,MAAM,OAAO,IAAI,IAAI;AAAA,EACxC;AAAA,EAEA,UAAU,MAAM;AACZ,WAAO,KAAK,KAAK,OAAO,IAAI;AAAA,EAChC;AAAA;AAAA,EAGA,YAAY,MAAM,SAAS;AACvB,UAAM,CAAC,MAAM,IAAI,IAAI,KAAK,WAAW,IAAI;AACzC,UAAM,QAAQ,KAAK,aAAa,IAAI;AAEpC,QAAI,MAAM,IAAI,IAAI,GAAG,OAAO,MAAM,IAAI,IAAI;AAE1C,UAAM,QAAQ,SAAQ;AACtB,UAAM,IAAI,MAAM,KAAK;AACrB,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,YAAY,MAAM,OAAO;AACrB,UAAM,CAAC,MAAM,IAAI,IAAI,KAAK,WAAW,IAAI;AACzC,UAAM,QAAQ,KAAK,aAAa,IAAI;AAEpC,QAAI,MAAM,IAAI,IAAI,GAAG,OAAO,MAAM,IAAI,IAAI;AAE1C,UAAM,IAAI,MAAM,KAAK;AACrB,WAAO;AAAA,EACX;AAAA;AAAA;AAAA,EAIA,oBAAoB,MAAM,SAAS;AAC/B,UAAM,CAAC,MAAM,IAAI,IAAI,KAAK,WAAW,IAAI;AACzC,UAAM,QAAQ,KAAK,aAAa,IAAI;AAEpC,QAAI,MAAM,IAAI,IAAI,GAAG,OAAO,MAAM,IAAI,IAAI;AAE1C,UAAM,QAAQ,QAAQ,CAAC,MAAM,IAAI,CAAC;AAClC,UAAM,IAAI,MAAM,KAAK;AACrB,WAAO;AAAA,EACX;AACJ;AAGA,MAAM,qBAAqB,IAAI,eAAc;AAGtC,MAAM,WAAW,CAAU,IAAiB,IAA6E,MAAkB,SAAO;AACrJ,MAAI,CAAC,IAAI;AAGT,MAAI,mBAAmB,IAAI,CAAC,IAAI,EAAE,CAAC,GAAG;AAAE,WAAO,mBAAmB,IAAI,CAAC,IAAI,EAAE,CAAC;AAAA,EAAG;AAGjF,QAAM,OAAO,CAAC,OAAY,MAAe,QAAc;AACnD,QAAI,QAAQ,SAAS;AAEjB,YAAM,WAAW,KAAK,SAAS,MAAM,WAAU;AAC/C,YAAM,QAAS,IAAY,SAAS,OAAO,SAAS;AAGpD,UAAI,SAAS;AACT,mBAAW,CAAC,KAAK,IAAI,KAAK,SAAS;AAC/B,gBAAM,QAAQ,UAAU,KAAK,SAAS,OAAO,GAAG,KAAK;AACrD,gBAAM,QAAQ,QAAQ,GAAG;AACzB,cAAI,SAAS,QAAQ,SAAS,MAAM;AAChC,eAAG,OAAO,KAAK,MAAM,MAAM;AAAA,UAC/B,WAAW,SAAS,QAAQ,SAAS,MAAM;AACvC,eAAG,MAAM,KAAK,OAAO,SAAS;AAAA,UAClC,WAAW,WAAW,OAAO,KAAK,GAAG;AACjC,eAAG,OAAO,KAAK,OAAO,MAAM;AAAA,UAChC;AAAA,QACJ;AAAA,MACJ;AAGA,aAAO,SAAS,SAAU,IAAY,OAAO,CAACC,QAAO,MAAMC,MAAK,cAAc;AAC1E,WAAGD,QAAO,MAAMC,MAAK,SAAS;AAAA,MAClC,CAAC;AAAA,IACL;AACA,WAAO,GAAG,IAAI;AAAA,EAClB;AAGA,SAAO,mBAAmB,oBAAoB,CAAC,IAAI,EAAE,GAAG,MAAM;AAC1D,QAAI,cAAc,KAAK;AAAE,aAAO,SAAS,CAAC,gBAAgB,EAAE,GAAQ,OAAO,QAAQ,GAAG,IAAI,GAAG;AAAA,IAAG;AAChG,QAAI,cAAc,KAAK;AAAE,aAAO,SAAS,IAAI,IAAI,GAAG;AAAA,IAAG;AACvD,QAAI,SAAS,EAAE,GAAG;AAAE,aAAO,SAAS,IAAI,MAAM,GAAG;AAAA,IAAG;AACpD,QAAI,MAAM,QAAQ,EAAE,KAAK,EAAE,IAAI,UAAU,KAAK,UAAU,KAAK,CAAC,CAAC,KAAK,aAAa,KAAK,CAAC,CAAC,IAAI;AAAE,aAAO,SAAS,CAAC,IAAI,OAAO,QAAQ,GAAG,IAAI,GAAG;AAAA,IAAG;AAC/I,WAAO,SAAS,IAAI,IAAI,GAAG;AAAA,EAC/B,CAAC;AACL;AAGO,MAAM,aAAa,CAAU,IAAO,IAAqD,MAAkB,SAAS;AACvH,SAAO,YAAY,IAAI,CAAC,WAAgB;AACpC,UAAM,SAAS,MAAM,QAAQ,MAAM,KAAK,QAAQ,UAAU,KAAK,CAAC,UAAU,UAAU,EAAE,QAAQ,OAAO,SAAS,CAAC,CAAC,KAAK,KAAK,UAAU,SAAS,CAAC,CAAC;AAC/I,UAAM,OAAO,SAAS,SAAS,CAAC,IAAI;AAAM,aAAU,UAAU,QAAQ,OAAS,SAAS,CAAC,KAAK,SAAU;AACxG,UAAM,SAAe,OAAO,UAAU,YAAY,OAAO,UAAU,aAAe,SAAS,YAAY,KAAK,SAAU;AACtH,QAAIC,QAAO,SAAS,aAAa,KAAM,kBAAmB,IAAI,MAAM;AACpE,IAAAA,OAAM,aAAa,IAAI,IAAI;AAAA,EAC/B,CAAC;AACL;;AC/PO,MAAM,iBAAiB,CAAU,MAAW,QAAa,SAAc,aAAoC;AAC9G,MAAI,YAAY,IAAI,GAAG,OAAO,OAAO,SAAS;AAG9C,QAAM,UAAU,MAAI;AAAE,WAAO;AAAA,EAAQ;AACrC,QAAM,WAAW,MAAI;AAAE,WAAO;AAAA,EAAS;AAGvC,QAAM,UAAU,CAAC,MAAU;AACvB,QAAI,KAAK,MAAM;AAAE,WAAK,QAAQ,SAAS,CAAC,IAAI,GAAG,QAAQ;AAAA,IAAG;AAC1D,UAAM,MAAM,SAAS,IAAI,IAAI,MAAM,QAAQ;AAC3C,WAAO,MAAM,SAAQ,GAAI,UAAS;AAAA,EACtC;AAGA,QAAM,IAAI,QAAQ;AAAA,IACd,CAAC,MAAM,GAAG,SAAQ;AAAA,IAClB,CAACP,WAAS,GAAG;AAAA,IACb,CAAC,QAAQ,WAAW,IAAI;AAAE,aAAO,OAAO,SAAQ,IAAK,KAAK,MAAM,KAAK,EAAE,KAAK;AAAA,IAAI;AAAA,IAChF,CAAC,QAAQ,WAAW,EAAE,MAAW;AAAE,aAAO,eAAe,SAAQ,IAAK,KAAK,MAAM,GAAG,IAAI;AAAA,IAAG;AAAA,IAC3F,IAAI,MAAM,GAAG;AAAE,WAAK,MAAM,IAAI,QAAQ,CAAC;AAAA,IAAG;AAAA,IAC1C,IAAI,QAAQ;AAAE,aAAQ,KAAK,MAAM,IAAI,SAAQ,IAAK,KAAK,MAAM;AAAA,IAAI;AAAA,GACpE;AAGD,QAAM,MAAM,SAAS,CAAC,MAAM,OAAO,GAAG,CAAC,QAAM;AAAE,QAAI,QAAQ,KAAI;AAAA,EAAG,CAAC;AACnE,iBAAe,GAAG,OAAO,SAAS,GAAG;AAAG,SAAO;AACnD;AAGO,MAAM,cAAc;AAyBpB,MAAM,kBAAkB,CAAU,QAAmC;AACxE,QAAM,MAAW,QAAa,EAAE;AAEhC,MAAI,KAAK,GAAG,MAAM,KAAK,KAAK,UAAS,IAAK,EAAE,CAAC;AAC7C,iBAAe,KAAK,OAAO,SAAS,SAAS,KAAK,CAAC,OAAO,GAAG,QAAQ;AACjE,QAAI,WAAW,OAAO,GAAG,GAAG;AACxB,UAAI,OAAO,QAAQ,SAAS,MAAM;AAC9B,YAAI,KAAK,KAAK;AAAA,MAClB,WACQ,OAAO,QAAQ,SAAS,MAAM;AAC9B,cAAM,MAAM,IAAI,QAAQ,GAAG;AAC3B,YAAI,OAAO,GAAG,IAAI,OAAO,KAAK,CAAC;AAAA,MACnC,OAAO;AACH,cAAM,MAAM,IAAI,QAAQ,GAAG;AAC3B,YAAI,OAAO,KAAK,WAAW,IAAI,GAAG,GAAG,KAAK,GAAG,IAAI,GAAG,IAAI;AAAA,MAC5D;AAAA,IACR;AAAA,EACJ,CAAC,CAAC;AACF,SAAO;AACX;AAGO,MAAM,kBAAkB,CAAU,QAA+C;AACpF,QAAM,MAAkB,QAAoB,EAAE;AAG9C,QAAM,iBAA6B,MAAM,KAAK,IAAI,SAAS;AAC3D,MAAI,KAAK,GAAG,cAAc;AAG1B,iBAAe,KAAK,OAAO,SAAS,SAAS,KAAK,CAAC,OAAO,MAAM,QAAQ;AACpE,QAAI,WAAW,OAAO,GAAG,KAAM,OAAO,QAAQ,SAAS,QAAU,OAAO,QAAQ,SAAS,MAAO;AAC5F,UAAI,OAAO,QAAQ,SAAS,MAAM;AAE9B,YAAI,MAAM,IAAI,UAAU,CAAC,CAAC,MAAM,CAAC,MAAO,QAAQ,IAAK;AAGrD,YAAI,MAAM,GAAG,MAAM,IAAI,cAAc,CAAC,CAAC,GAAG,GAAG,MAAO,QAAQ,GAAI;AAGhE,YAAI,OAAO,GAAG,IAAI,OAAO,KAAK,CAAC;AAAA,MACnC,OAAO;AAEH,YAAI,MAAM,IAAI,UAAU,CAAC,CAAC,MAAM,CAAC,MAAO,QAAQ,IAAK;AAMrD,YAAI,OAAO,KAAK,MAAM,IAAI,QAAQ;AAE9B,cAAI,WAAW,IAAI,GAAG,IAAI,CAAC,GAAG,KAAK,GAAG;AAElC,gBAAI,GAAG,IAAI,CAAC,MAAM,KAAK;AAAA,UAC3B;AAAA,QACJ,OAAO;AAEH,cAAI,KAAK,CAAC,MAAM,KAAK,CAAC;AAAA,QAC1B;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ,CAAC,CAAC;AAGF,SAAO;AACX;AAYO,MAAM,gCAAgB,SAAkC;AACxD,MAAM,SAAS,CAAU,GAAgB,GAAgB,OAAuB,YAAY;AAC/F,QAAM,aAAa,OAAO,IAAI,CAAC,KAAK,cAAe,GAAsB,UAAU,GAAG,aAAa,OAAO,IAAI,CAAC,KAAK,cAAe,GAAsB,UAAU,GAAG,UAAU,aAAa,IAAI,CAAC,IAAI;AACtM,QAAM,WAAW,UAAU,IAAI,CAAC,CAAC,KAAK,IAAI,CAAC,KAAK,OAAO,aAAc,GAAsB,UAAU;AAAG,MAAI,SAAU,WAAW,CAAC,aAAc,IAAI,CAAC,IAAK,MAAM,QAAQ,CAAC,IAAI,OAAO;AAAO,MAAI,CAAC,WAAW,CAAC,YAAY;AAAE,QAAI,CAAC,GAAG,MAAM;AAAA,EAAkB;AAAG,MAAI,YAAY;AAAE,MAAE,CAAC,IAAI;AAAA,EAAQ;AAC9R,QAAM,WAAW,UAAU,IAAI,CAAC,CAAC,KAAK,IAAI,CAAC,KAAK,OAAO,aAAc,GAAsB,UAAU;AAAG,MAAI,SAAU,WAAW,CAAC,aAAc,IAAI,CAAC,IAAK,MAAM,QAAQ,CAAC,IAAI,OAAO;AAAO,MAAI,CAAC,WAAW,CAAC,YAAY;AAAE,QAAI,CAAC,GAAG,MAAM;AAAA,EAAkB;AAAG,MAAI,YAAY;AAAE,MAAE,CAAC,IAAI;AAAA,EAAQ;AAG9R,MAAI,UAAU,QAAQ,UAAU,QAAQ,kBAAkB,QAAQ,IAAI,CAAC,CAAC,KAAK,kBAAkB,QAAQ,IAAI,CAAC,CAAC,GAAG;AAAE;AAAA,EAAQ;AAC1H,MAAI,GAAG,OAAO,IAAI,CAAC,KAAK,YAAY,OAAO,IAAI,CAAC,KAAK,eAAe,IAAI,CAAC,KAAK,SAAS,CAAC,MAAM,QAAQ,EAAE,CAAC,CAAC,GACtG;AAAE,kBAAc,GAAG,MAAI;AAAE,QAAE,CAAC,EAAE,MAAM,IAAI,IAAI,CAAC;AAAA,IAAG,CAAC;AAAG,WAAO,MAAM;AAAA,IAAE;AAAA,EAAG;AAG1E,QAAM,UAAU,CAAC,GAAG,MAAM;AACtB,UAAMQ,SAAQ,MAAM,SAAQ;AAC5B,UAAMC,SAAQ,MAAM,SAAQ;AAC5B,QAAI,WAAW,MAAMD,MAAK,GAAG,MAAM,MAAM,GAAG,SAASC,QAAO;AACxD,UAAI,MAAW;AACf,YAAM,QAAQ,WAAW,MAAMD,MAAK,GAAG,MAAM,MAAM,GAAG;AACtD,oBAAcC,QAAO,MAAI;AACrB,YAAI,OAAO,SAAS,YAAY;AAAE,gBAAM,QAAQ,UAAUA,MAAK,KAAK,GAAG,GAAG,IAAI;AAAA,QAAG,OAAO;AAAE,gBAAMA,SAAQ,CAAC,KAAK;AAAA,QAAG;AAAC;AAAA,MACtH,CAAC;AAGD,YAAM,KAAK,UAAU,GAAG;AACxB,UAAI,WAAWD,OAAM,MAAM,GAAG,EAAE,GAAG;AAC/B,sBAAcC,QAAO,MAAI;AAAE,UAAAD,OAAM,MAAM,IAAI;AAAA,QAAI,CAAC;AAAA,MACpD;AAAC,IACL,OAAO;AACH,YAAM,MAAM,WAAW,MAAMA,MAAK;AAClC,YAAME,SAAQ,KAAK,MAAM,MAAM;AAC/B,MAAAA,QAAO,WAAU;AAAA,IACrB;AAAA,EACJ;AAGA,QAAM,UAAU,MAAM;AAClB,UAAMF,SAAQ,MAAM,SAAQ;AAC5B,UAAM,MAAM,WAAW,MAAMA,MAAK;AAClC,UAAME,SAAQ,KAAK,MAAM,MAAM;AAC/B,SAAK,SAAS,MAAM;AACpB,IAAAA,QAAO,SAAQ;AAAA,EACnB;AAGA,QACI,OAAO,IAAI,CAAC,KAAK,SAAS,OAAO,IAAI,CAAC,KAAK,YAAY,OAAO,IAAI,CAAC,KAAK,eAAe,EAAE,IAAI,CAAC,aAAa,WAAW,OAAO,IAAI,CAAC,GAAG,SAAS,cAAc,IAAI,QAAQ,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,GACvL,OAAO,IAAI,CAAC,KAAK,SAAS,OAAO,IAAI,CAAC,KAAK,YAAY,OAAO,IAAI,CAAC,KAAK,eAAe,EAAE,IAAI,CAAC,aAAa,WAAW,OAAO,IAAI,CAAC,GAAG,SAAS,cAAc,IAAI,QAAQ,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC;AAG3L,MAAI,QAAmB,EAAW,SAAS,OAAO,SAAQ;AAG1D,QAAM,QAAQ,MAAM,SAAQ,EAAG,QAAQ,MAAM,SAAQ;AACrD,MAAI,gBAAgB,SAAS;AACzB,QAAI,WAAW,MAAM,KAAK,GAAG,MAAM,MAAM,GAAG,SAAS,OAAO;AACxD,iBAAW,MAAM,KAAK,GAAG,SAAS,MAAM;AAAA,IAC5C;AAGA,UAAM,MAAM,WAAW,cAAc,uBAAO,IAAI,KAAK;AACrD,YAAQ,KAAK,sBAAsB,QAAQ,OAAO;AAAA,MAC9C,OAAO;AAAA,MACP,OAAO;AAAA,MACP,OAAO;AAAA,MACP;AAAA,MACA;AAAA,KACJ,CAAE;AAGF,UAAM,QAAQ,SAAS,GAAG,OAAO;AACjC,UAAM,QAAQ;AACd,mBAAe,OAAO,OAAO,SAAS,OAAO,OAAO;AACpD,mBAAe,OAAO,OAAO,SAAS,OAAO,OAAO;AAAA,EACxD;AAGA,MAAI,SAAS,CAAC,MAAM,QAAQ,KAAK,GAAG;AAChC,kBAAc,OAAO,MAAI;AACrB,YAAM,MAAM,MAAM,QAAQ,MAAM,KAAK,MAAM,MAAM;AAAA,IACrD,CAAC;AAAA,EACL;AAGA,SAAO,OAAO;AAClB;AAaO,MAAM,WAAW,CAAkB,KAAkB,IAAsB,UAAgB,OAAuB,YAA8B;AACnJ,QAAM,aAAa,OAAO,MAAM,CAAC,KAAK,cAAe,KAAwB,UAAU;AACvF,QAAM,WAAW,UAAU,MAAM,CAAC,CAAC,KAAK,MAAM,CAAC,KAAK,OAAO,aAAc,KAAwB,UAAU;AAC3G,MAAI,SAAU,WAAW,CAAC,aAAc,MAAM,CAAC,IAAK,MAAM,QAAQ,GAAG,IAAI,OAAO;AAChF,MAAI,CAAC,WAAW,CAAC,YAAY;AAAE,UAAM,CAAE,UAAU,MAAM,CAAC,IAAI,KAAM,MAAM;AAAA,EAAkB;AAAG,MAAI,YAAY;AAAE,QAAI,CAAC,IAAI;AAAA,EAAQ;AAChI,MAAI,UAAU,QAAQ,kBAAkB,QAAQ,MAAM,CAAC,CAAC,GAAG;AAAE,WAAO;AAAA,EAAkB;AAGtF,QAAM,MAAM,CAAC,MAAU;AACnB,QAAI,WAAgB;AACpB,QAAI,KAAK,QAAW;AAChB,iBAAW,IAAI,CAAC,EAAE,MAAM;AACxB,UAAI,CAAC,EAAE,MAAM,IAAI;AAAA,IACrB;AACA,WAAO,KAAK,MAAM,CAAC,IAAI,MAAM,GAAG,QAAQ,QAAQ;AAAA,EACpD;AAGyB,QAAM,UAAU,KAAI;AAC7C,QAAM,KAAU,QAAQ;AAAA,IACpB,CAAC,QAAQ,GAAyB;AAAA,IAClC,CAAC,MAAM,GAAG;AAAA,IACV,CAACV,WAAS,GAAG;AAAA,IACb,CAAC,QAAQ,WAAW,IAAI;AAAE,aAAO,OAAO,KAAI,IAAK,KAAK,MAAM,KAAK,EAAE,KAAK;AAAA,IAAI;AAAA,IAC5E,CAAC,QAAQ,WAAW,EAAE,MAAW;AAAE,aAAO,eAAe,KAAI,IAAK,KAAK,MAAM,GAAG,IAAI;AAAA,IAAG;AAAA,IACvF,IAAI,MAAM,GAAG;AAAE,WAAK,MAAM,IAAI,IAAI,CAAC;AAAA,IAAG;AAAA,IACtC,IAAI,QAAQ;AAAE,aAAQ,KAAK,MAAM,IAAI,KAAI,IAAK,KAAK,MAAM;AAAA,IAAI;AAAA,GAChE;AAGD,QAAM,MAAM,SAAS,CAAC,MAAM,CAAC,KAAK,KAAK,UAAU,OAAO,GAAG;AAAA;AAAA,IAAqB,KAAK,QAAQ;AAAI,GAAC;AAElG,iBAAe,IAAI,OAAO,SAAS,GAAG;AAAG,SAAO;AACpD;;AC9FO,MAAM,iBAAiB;AAAA,EAC1B,OAAO,QAAsC,UAAU,OAAO,UAAU,cAAc,QAAQ,aAAa,CAAC;AAAA,EAC5G,OAAO,SAAuC,UAAU,OAAO,UAAU,cAAc,QAAQ,cAAc,CAAC;AAAA,EAE9G,OAAO,OAAa;AAChB,UAAM,aAAa,MAAM;AACrB,WAAK,MAAM,QAAQ,QAAQ;AAC3B,WAAK,OAAO,QAAQ,QAAQ;AAAA,IAChC;AAEA,QAAI,OAAO,UAAU,aAAa;AAC9B,cAAQ,mBAAmB,UAAU,UAAU;AAAA,IACnD;AAAA,EACJ;AAAA;AAAA,EAGA,OAAO,SAA+E;AAClF,WAAO;AAAA,MACH,GAAG,QAAQ,OAAO,KAAK,OAAO,UAAU,CAAC,CAAC;AAAA,MAC1C,GAAG,QAAQ,OAAO,KAAK,QAAQ,UAAU,CAAC,CAAC;AAAA,KAC/C;AAAA,EACJ;AACJ;AAGA,iBAAiB,MAAK;AAGf,MAAM,oBAAoB;AAAA,EACrB;AAAA,EACA;AAAA,EACA;AAAA,EAER,YAAY,SAAsB;AAC9B,SAAK,UAAU;AACf,SAAK,OAAO;AAAA,MACR,OAAO,UAAU,QAAQ,WAAW;AAAA,MACpC,QAAQ,UAAU,QAAQ,YAAY;AAAA,KAC1C;AAEA,SAAK,WAAW,IAAI,eAAe,CAAC,YAAY;AAC5C,iBAAW,SAAS,SAAS;AACzB,YAAI,MAAM,WAAW,SAAS;AAC1B,eAAK,KAAK,MAAM,QAAQ,MAAM,YAAY;AAC1C,eAAK,KAAK,OAAO,QAAQ,MAAM,YAAY;AAAA,QAC/C;AAAA,MACJ;AAAA,IACJ,CAAC;AAED,SAAK,SAAS,QAAQ,OAAO;AAAA,EACjC;AAAA,EAEA,IAAI,QAAsC;AAAE,WAAO,KAAK,KAAK;AAAA,EAAO;AAAA,EACpE,IAAI,SAAuC;AAAE,WAAO,KAAK,KAAK;AAAA,EAAQ;AAAA;AAAA,EAGtE,SAA+E;AAC3E,WAAO;AAAA,MACH,GAAG,QAAQ,OAAO,KAAK,KAAK,OAAO,UAAU,CAAC,CAAC;AAAA,MAC/C,GAAG,QAAQ,OAAO,KAAK,KAAK,QAAQ,UAAU,CAAC,CAAC;AAAA,KACpD;AAAA,EACJ;AAAA,EAEA,UAAgB;AACZ,SAAK,SAAS,YAAW;AAAA,EAC7B;AACJ;;ACzNA,MAAM,eAAe;AAAA,EACT,iCAAiB,KAAuB;AAAA,EACxC,kCAAkB,KAAoB;AAAA,EAE9C,aAAa,UAAkB,WAAsB;AACjD,SAAK,WAAW,IAAI,UAAU,SAAS;AAAA,EAC3C;AAAA,EAEA,aAAa,UAAyC;AAClD,WAAO,KAAK,WAAW,IAAI,QAAQ;AAAA,EACvC;AAAA,EAEA,gBAAgB,UAAkB;AAC9B,UAAM,YAAY,KAAK,WAAW,IAAI,QAAQ;AAC9C,QAAI,WAAW;AACX,gBAAU,QAAO;AACjB,WAAK,WAAW,OAAO,QAAQ;AAAA,IACnC;AAAA,EACJ;AAAA,EAEA,cAAc,SAAsB,UAAkB,SAA4B;AAC9E,UAAM,WAAW,QAAQ,YAAY;AACrC,UAAM,SAAS,QAAQ,UAAU;AACjC,UAAM,QAAQ,QAAQ,SAAS;AAE/B,UAAM,kBAAkB,GAAG,QAAQ,IAAI,QAAQ,MAAM,MAAM,IAAI,KAAK;AACpE,UAAM,qBAAqB,KAAK,YAAY,IAAI,QAAQ;AAExD,QAAI,uBAAuB,iBAAiB;AACxC,WAAK,YAAY,IAAI,UAAU,eAAe;AAC9C,WAAK,yBAAyB,OAAO;AAAA,IACzC;AAAA,EACJ;AAAA,EAEQ,yBAAyB,SAAsB;AACnD,UAAM,cAAc,MAAM,KAAK,KAAK,YAAY,QAAQ,EAAE,KAAK,IAAI;AACnE,YAAQ,MAAM,aAAa;AAAA,EAC/B;AAAA,EAEA,iBAAiB,SAAsB;AACnC,SAAK,YAAY,OAAM;AACvB,YAAQ,MAAM,aAAa;AAAA,EAC/B;AAAA,EAEA,UAAU,SAAsB;AAE5B,UAAM,kBAAkB,MAAM,KAAK,KAAK,WAAW,QAAQ;AAC3D,eAAW,aAAa,iBAAiB;AACrC,gBAAU,QAAO;AAAA,IACrB;AACA,SAAK,WAAW,OAAM;AACtB,SAAK,iBAAiB,OAAO;AAAA,EACjC;AAAA,EAEA,gBAAwC;AACpC,WAAO,KAAK;AAAA,EAChB;AACJ;AAGA,MAAM,sCAAsB,SAAqC;AAKjE,SAAS,kBAAkB,SAAsC;AAC7D,MAAI,QAAQ,gBAAgB,IAAI,OAAO;AACvC,MAAI,CAAC,OAAO;AACR,YAAQ,IAAI,gBAAe;AAC3B,oBAAgB,IAAI,SAAS,KAAK;AAAA,EACtC;AACA,SAAO;AACX;AAgBO,SAAS,0BACZ,SACA,UACA,OACA,UAA4B,EAAC,EACzB;AACJ,MAAI,CAAC,WAAW,CAAC,UAAU;AAE3B,QAAM,QAAQ,kBAAkB,OAAO;AACvC,QAAM,eAAe,QAAQ,MAAM,iBAAiB,QAAQ,KAAK,iBAAiB,OAAO,EAAE,QAAe;AAC1G,QAAM,cAAc,UAAU,KAAK;AAGnC,MAAI,iBAAiB,aAAa;AAGlC,QAAM,gBAAgB,QAAQ;AAG9B,QAAM,YAAY;AAAA,IACd,EAAE,CAAC,QAAQ,GAAG,cAAa;AAAA,IAC3B,EAAE,CAAC,QAAQ,GAAG;AAAY,GAC9B;AAGA,QAAM,mBAA6C;AAAA,IAC/C,UAAU,QAAQ,YAAY;AAAA,IAC9B,QAAQ,QAAQ,UAAU;AAAA,IAC1B,OAAO,QAAQ,SAAS;AAAA,IACxB,WAAW,QAAQ,aAAa;AAAA,IAChC,YAAY,QAAQ,cAAc;AAAA,IAClC,MAAM,QAAQ,QAAQ;AAAA,GAC1B;AAGA,QAAM,YAAY,QAAQ,QAAQ,WAAW,gBAAgB;AAC7D,QAAM,aAAa,UAAU,SAAS;AAGtC,YAAU,iBAAiB,UAAU,MAAM;AACvC,UAAM,gBAAgB,QAAQ;AAE9B,YAAQ,MAAM,YAAY,UAAU,WAAW;AAAA,EACnD,CAAC;AACL;AAMO,SAAS,4BACZ,SACA,UACA,OACA,UAA6B,EAAC,EAC1B;AACJ,MAAI,CAAC,WAAW,CAAC,UAAU;AAE3B,QAAM,QAAQ,kBAAkB,OAAO;AACvC,QAAM,cAAc,UAAU,KAAK;AAGnC,QAAM,cAAc,SAAS,UAAU,OAAO;AAG9C,UAAQ,MAAM,YAAY,UAAU,WAAW;AACnD;AAMO,SAAS,wBACZ,SACA,UACA,OACA,UAKI,EAAC,EACD;AACJ,MAAI,CAAC,WAAW,CAAC,UAAU;AAE3B,QAAM,QAAQ,kBAAkB,OAAO;AACvC,QAAM,cAAc,UAAU,KAAK;AACnC,QAAM,eAAe,WAAW,QAAQ,MAAM,iBAAiB,QAAQ,CAAC,KACpD,WAAW,iBAAiB,OAAO,EAAE,QAAe,CAAC,KAAK;AAG9E,MAAI,KAAK,IAAI,eAAe,WAAW,IAAI,MAAM;AAGjD,QAAM,gBAAgB,QAAQ;AAG9B,QAAM,YAAY,QAAQ,aAAa;AACvC,QAAM,UAAU,QAAQ,WAAW;AACnC,QAAM,OAAO,QAAQ,QAAQ;AAC7B,QAAM,kBAAkB,QAAQ,YAAY;AAE5C,MAAI,kBAAkB;AACtB,MAAI,kBAAkB;AACtB,MAAI;AAEJ,QAAM,UAAU,MAAM;AAClB,UAAM,cAAc,CAAC,aAAa,kBAAkB;AACpD,UAAM,eAAe,CAAC,UAAU;AAChC,UAAM,aAAa,cAAc;AACjC,UAAM,eAAe,aAAa;AAElC,uBAAmB,eAAe;AAClC,uBAAmB,kBAAkB;AAGrC,UAAM,WAAW,SAAS,SAAS,OAAO,KAAK,SAAS,SAAS,SAAS,IACtE,gBAAgB,UAAS,GACzB,GAAG,eAAe;AACtB,YAAQ,MAAM,YAAY,UAAU,QAAQ;AAG5C,QAAI,KAAK,IAAI,kBAAkB,WAAW,IAAI,QAAQ,KAAK,IAAI,eAAe,IAAI,MAAM;AACpF,oBAAc,sBAAsB,OAAO;AAAA,IACvC,OAAO;AAEH,cAAQ,MAAM,YAAY,UAAU,SAAS,SAAS,OAAO,KAAK,SAAS,SAAS,SAAS,IACzF,YAAY,UAAS,GAAI,GAAG,WAAW,IAAI;AAC/C,YAAM,gBAAgB,QAAQ;AAAA,IAClC;AAAA,EACZ;AAGA,QAAM,gBAAgB;AAAA,IAClB,QAAQ,MAAM,qBAAqB,WAAW;AAAA,GAClD;AACA,QAAM,aAAa,UAAU,aAAa;AAG1C,gBAAc,sBAAsB,OAAO;AAC/C;AAMO,SAAS,uBACZ,SACA,YACA,UAAmD,EAAC,EAChD;AACJ,MAAI,CAAC,WAAW,CAAC,YAAY;AAE7B,QAAM,QAAQ,kBAAkB,OAAO;AACvC,QAAM,YAAwB,CAAC,EAAC,EAAG,EAAE;AAGrC,aAAW,CAAC,UAAU,KAAK,KAAK,OAAO,QAAQ,UAAU,GAAG;AACxD,UAAM,eAAe,QAAQ,MAAM,iBAAiB,QAAQ,KACzC,iBAAiB,OAAO,EAAE,QAAe;AAC5D,UAAM,cAAc,UAAU,KAAK;AAEnC,cAAU,CAAC,EAAE,QAAQ,IAAI;AACzB,cAAU,CAAC,EAAE,QAAQ,IAAI;AAAA,EAC7B;AAGA,aAAW,YAAY,OAAO,KAAK,UAAU,GAAG;AAC5C,UAAM,gBAAgB,QAAQ;AAAA,EAClC;AAEA,QAAM,mBAA6C;AAAA,IAC/C,UAAU,QAAQ,YAAY;AAAA,IAC9B,QAAQ,QAAQ,UAAU;AAAA,IAC1B,OAAO,QAAQ,SAAS;AAAA,IACxB,WAAW,QAAQ,aAAa;AAAA,IAChC,YAAY,QAAQ,cAAc;AAAA,IAClC,MAAM,QAAQ,QAAQ;AAAA,GAC1B;AAEA,QAAM,YAAY,QAAQ,QAAQ,WAAW,gBAAgB;AAG7D,aAAW,YAAY,OAAO,KAAK,UAAU,GAAG;AAC5C,UAAM,aAAa,UAAU,SAAS;AAAA,EAC1C;AAEA,YAAU,iBAAiB,UAAU,MAAM;AACvC,eAAW,YAAY,OAAO,KAAK,UAAU,GAAG;AAC5C,YAAM,gBAAgB,QAAQ;AAE9B,YAAM,cAAc,UAAU,WAAW,QAAQ,CAAC;AAClD,cAAQ,MAAM,YAAY,UAAU,WAAW;AAAA,IACnD;AAAA,EACJ,CAAC;AACL;AAKO,SAAS,kBACZ,SACA,sBACA,eACA,gBAA+D,WAC/D,UAAgD,EAAC,EACvC;AACV,QAAM,MAAM,MAAM,OAAO;AACzB,QAAM,KAAK,MAAM,aAAa;AAE9B,MAAI,kBAAkB,SAAS;AAE3B,UAAM,aAAa;AAGnB,2BAAuBW,OAAA,CAAM,GAAG,GAAG,YAAY,OAAO;AAGtD,IAAmB,SAAS,eAAe,CAAC,aAAa;AACrD,6BAAuBA,OAAA,CAAM,GAAG,GAAG,YAAY,OAAO;AAAA,IAC1D,CAAC;AAED,WAAO;AAAA,EACX,OAAO;AAEH,UAAM,WAAW;AAEjB,UAAM,UAAW,kBAAkB,YAAa,4BAChC,kBAAkB,eAAgB,8BACnC;AAGf,YAAQA,OAAA,CAAM,GAAG,GAAG,UAAU,UAAUA,OAAA,CAAM,EAAE,CAAC,GAAG,OAAO;AAG3D,IAAmB,SAAS,eAAe,CAAC,aAAa;AACrD,cAAQA,OAAA,CAAM,GAAG,GAAG,UAAU,UAAU,OAAO;AAAA,IACnD,CAAC;AAED,WAAO;AAAA,EACX;AACJ;;AC3TO,MAAMC,OAAA,GAAQ,IAAI,eAAc;AAChC,MAAM,SAAS,IAAI,qBAAqB,CAAC,UAAe,SAAS;AAGjE,MAAM,UAAU,OAAO,IAAI,SAAS;AACpC,MAAM,WAAW,OAAO,IAAI,UAAU;AACtC,MAAM,YAAY,OAAO,IAAI,WAAW;AAmBxC,MAAM,WAAW,CAAC,SAAc,WAAgB;AACnD,QAAM,MAAM,EAAE,OAAO,QAAQ,OAAO,QAAQ,QAAQ,QAAO;AAC3D,WAAS,EAAE,QAAQ,SAAS;AAC5B,QAAM,QAAQ,kBAAkB,SAAS,oBAAoB,GAAG;AAChE,iBAAe,SAAS,OAAO,SAAS,KAAK;AAC7C,SAAO;AACX;AAGO,MAAM,qBAAqB,CAAC,SAAc,UAAe;AAC5D,MAAI,OAAO,SAAS,QAAQ,OAAO,SAAS,SAAS,IAAI;AACzD,SAAO;AACX;AAGO,MAAM,gBAAgB,CAAC,SAAc,KAAkB,OAAe,YAAY;AACrF,QAAM,MAAM,MAAM,OAAO;AACzB,QAAM,KAAK,MAAM,GAAG;AAEpB,QAAM,SAAS,CAAC,QAAa;AACzB,IAAAC,MAAA,CAAK,IAAI,SAASF,OAAA,CAAM,GAAG,IAAI,QAAQ,OAAO,KAAK,UAAUA,OAAA,CAAM,EAAE,CAAC,CAAC;AAAA,EAC3E;AAEA,QAAM,MAAM,EAAE,OAAO,QAAQ,OAAO,QAAQ,QAAQ,QAAO;AAC3D,WAA4B;AAC5B,oBAAkB,SAAS,oBAAoB,GAAG;AAElD,EAAAE,MAAA,CAAK,IAAI,SAAS,UAAU,QAAQ,OAAO,KAAK,UAAUF,OAAA,CAAM,GAAG,CAAC,CAAC;AACrE,SAAO,MAAM,kBAAkB,SAAS,uBAAuB,GAAG;AACtE;AAGO,MAAM,oBAAoB,CAAC,IAAS,KAAkB,OAAe,OAAO;AAC/E,EAAY,MAAM,EAAE;AACpB,QAAM,KAAK,MAAM,GAAG;AAEpB,QAAM,WAAWpD,eAAa,IAAI;AAElC,QAAM,KAAK,CAAC,aAAkB;AAC1B,QAAI,SAAS,QAAQ,gBAAgB,SAAS,iBAAiB,UAAU;AACrE,YAAM,QAAQ,UAAU,QAAQ,eAAe,SAAS,aAAa;AACrE,YAAM,SAASoD,OAAA,CAAM,EAAE,GACnB,QAAQ,UAAU,MAAM;AAE5B,UACI,WAAW,SAAS,UAAU,KAAK,KACnC,UAAU,SACT,OAAO,UAAU,YAAY,OAAO,UAAU,aACjD;AACE,YAAI,WAAW,OAAO,KAAK,KAAK,SAAS,MAAM;AAC3C,UAAAE,MAAA,CAAK,QAAQ,SAAS,KAAK;AAAA,QAC/B;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AAEA,SAAO,iBAAiB,IAAI,UAAU,EAAE;AAC5C;AAOO,MAAM,iBAAiB,CAAC,IAAS,SAAc,SAAc;AAChE,QAAM,OAAOD,OAAA,CAAM,IAAI,CAAC,IAAI,OAAO,CAAC;AACpC,MAAI,MAAM;AACN,UAAM,MAAM,KAAK,IAAI,IAAI,CAAC;AAC1B,WAAO,KAAK,IAAI;AAChB,WAAM;AAAA,EACV;AACJ;AAGO,MAAM,YAAY,CAAC,IAAS,SAAc,MAAW,YAAiB;AAEzE,QAAM,OAAOA,QAAM,oBAAoB,CAAC,IAAI,OAAO,GAAG,OAAO,EAAC,CAAU;AACxE,SAAO,IAAI,IAAI,CAAC,KAAI;AACpB,OAAK,IAAI,IAAI;AACb,SAAO;AACX;AAWO,MAAM,cAAc,CACvB,SACA,OACA,MACA,SACA,KACA,iBACC;AACD,QAAM,MAAM,MAAM,OAAO;AACzB,YAAUD,QAAM,GAAG;AACnB,MAAI,CAAC,WAAW,EAAE,mBAAmB,QAAQ,SAAS,mBAAmB,OAAO;AAGhF,MAAI,aAAqC;AACzC,cAAY,SAAQ;AACpB,eAAa,IAAI,iBAAgB;AAGjC,QAAM,KAAK,MAAM,KAAK;AACtB,YAAU,SAAS,MAAM,KAAK;AAE9B,QAAM,KAAK,WAAW,CAAC,OAAO,OAAO,GAAG,CAAC,MAAW,IAAS,QAAa;AACtE,UAAM,WAAWA,QAAM,EAAE;AACzB,UAAM,SAASA,QAAM,GAAG;AACxB,UAAM,aAAaA,QAAM,GAAG;AAE5B,UAAM,IAAI,UAAU,QAAQ,KAAK,UAAU,IAAI;AAC/C,QAAI,CAAC,UAAU,SAAS,IAAI,KAAK,UAAU;AACvC,UAAI,OAAO,WAAW,SAAS,KAAK,YAAY;AAC5C,mBAAW,SAAS;AAAA,UAChB,CAAC,OAAY,SAAS,QAAQ,YAAY,MAAM,CAAC;AAAA,UACjD,CAAC,MAAM,MAAM,GAAG;AAAA,UAChB,CAAC,YAAY,QAAQ,MAAM,GAAG;AAAA,SAClC;AAAA,MACJ,OAAO;AACH,gBAAQ,YAAY,MAAM,CAAC;AAAA,MAC/B;AAAA,IACJ;AAAA,EACJ,CAAC;AAGD,MAAI,MAAW;AACf,MAAI,OAAO,gBAAgB,aAAa,cAAc;AAClD,QAAI,WAAW,iBAAiB,MAAM,kBAAkB,SAAS,OAAO,IAAI;AAC5E,QAAI,WAAW,gBAAgB,MAAM,cAAc,SAAS,OAAO,IAAI;AAAA,EAC3E;AACA,MAAI,OAAO,gBAAgB,YAAY;AACnC,UAAM,aAAa,SAAS,MAAM,KAAK;AAAA,EAC3C;AAGA,QAAM,QAAQ,MAAM;AAChB,SAAK,cAAa;AAClB,WAAO,QAAQ,OAAO,OAAO,aAAa,OAAM,GAAI;AACpD,UAAK;AACL,gBAAY,SAAQ;AACpB,qBAAiB,SAAS,SAAS,IAAI;AAAA,EAC3C;AAGA,iBAAe,OAAO,OAAO,SAAS,KAAK;AAC3C,SAAO,SAAS,SAAS,KAAK;AAG9B,MAAI,CAAC,UAAU,SAAS,SAAS,MAAM,CAAC,OAAO,KAAK,CAAC,GAAG;AAC5D;AA+CO,MAAM,WAAW,CACpB,IACA,MACA,OACA,SACA,KACA,iBACC;AACD,UAAQ,IAAI,MAAM,KAAK;AACvB,SAAO,YAAY,IAAI,OAAO,MAAM,SAAS,KAAK,YAAY;AAClE;AAmFO,MAAM,eAAe,CAAC,SAAc,UAAe,OAAY,UAA4B,EAAC,KAAM;AACrG,SAAO,kBAAkB,SAAS,UAAU,OAAO,WAAW,OAAO;AACzE;AAEO,MAAM,iBAAiB,CAC1B,SACA,UACA,OACA,UAA6B,EAAC,KAC7B;AACD,SAAO,kBAAkB,SAAS,UAAU,OAAO,cAAc,OAAO;AAC5E;AAEO,MAAM,aAAa,CACtB,SACA,UACA,OACA,UAAsF,EAAC,KACtF;AACD,SAAO,kBAAkB,SAAS,UAAU,OAAO,UAAU,OAAc;AAC/E;AAEO,MAAM,YAAY,CAAC,SAAc,YAAiC,UAA4B,EAAC,KAAM;AACxG,SAAO,kBAAkB,SAAS,IAAI,YAAY,SAAS,OAAO;AACtE;AAwHO,MAAM,uBAAuB,CAAC,QAAqB,SAAc;AACpE,MAAI,CAAC,QAAQ,OAAO,MAAM;AAAA,EAAE;AAC5B,QAAM,MAAM;AAAA,IACR,SAAS,QAAQ,cAAc,OAAO,CAAC,GAAG,iBAAiB;AAAA,IAC3D,SAAS,QAAQ,cAAc,OAAO,CAAC,GAAG,iBAAiB;AAAA,GAC/D;AACA,MAAI,OAAO,CAAC,GAAG,IAAI,KAAK,SAAS,QAAQ,kBAAkB,OAAO,CAAC,GAAG,iBAAiB,CAAC;AACxF,MAAI,OAAO,CAAC,GAAG,IAAI,KAAK,SAAS,QAAQ,mBAAmB,OAAO,CAAC,GAAG,iBAAiB,CAAC;AACzF,SAAO,MAAM,KAAK,UAAU,CAAC,OAAY,MAAM;AACnD;AAIO,MAAM,qBAAqB,CAAC,SAAqC,SAAuB;AAC3F,MAAI,CAAC,SAAS,OAAO,MAAM;AAAA,EAAE;AAE7B,MAAI,UAA+B;AACnC,MAAI,WAAW;AAEf,QAAM,cAAc,MAAM;AACtB,QAAI,UAAU;AAEd,QAAI,CAAC,QAAQ,aAAa;AACtB,UAAI,SAAS;AACT,iBAAQ;AACR,kBAAU;AAAA,MACd;AACA;AAAA,IACJ;AAEA,QAAI,CAAC,SAAS;AACV,YAAM,IAAI,MAAK;AACf,gBAAU,OAAO,MAAM,aAAa,IAAI;AAAA,IAC5C;AAAA,EACJ;AAEA,QAAM,OAAO,OAAO,aAAa,cAAc,SAAS,kBAAkB;AAC1E,QAAM,KAAO,SAAiB,WAAW;AAEzC,QAAM,KACF,OAAO,qBAAqB,eAAe,OACrC,IAAI,iBAAiB,CAAC,YAAY;AAChC,eAAW,KAAK,SAAS;AACrB,UAAI,EAAE,WAAW,MAAO,EAAE,QAAgB,WAAW,EAAE,GAAG;AACtD,qBAAY;AACZ;AAAA,MACJ;AAEA,YAAM,QAAQ,CAAC,GAAG,MAAM,KAAK,GAAG,cAAc,EAAE,GAAG,GAAG,MAAM,KAAK,GAAG,gBAAgB,EAAE,CAAC;AACvF,iBAAW,KAAK,OAAO;AACnB,YAAI,MAAM,MAAO,EAAW,WAAW,EAAE,GAAG;AACxC,uBAAY;AACZ;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ,CAAC,IACC;AAEV,MAAI,MAAM,MAAM,GAAG,QAAQ,MAAM,EAAE,WAAW,MAAM,SAAS,MAAM;AAEnE,iBAAe,MAAM,aAAa;AAElC,SAAO,MAAM;AACT,eAAW;AACX,QAAI,cAAa;AACjB,eAAU;AACV,cAAU;AAAA,EACd;AACJ;;AClkBA,MAAM,oCAAoB,SAA2C;AACrE,MAAM,kCAAoB,SAAQ;AAClC,MAAM,kBAAkB;AAAA,EACpB,OAAQ,KAAK;AAAE,WAAO,MAAK,QAAQ,IAAI,eAAe,CAAC,GAAG,KAAK,UAAU,EAAE,IAAI,QAAM,EAAE,MAAM,EAAE,MAAM,OAAO,EAAE,QAAQ,CAAE;AAAA,EAAG;AAAA,EAC3H,OAAQ,KAAK;AAAE,WAAO,IAAI,SAAQ,KAAK,SAAS,GAAI,CAAC,GAAG,QAAM,EAAE,GAAG,MAAM,CAAC,MAAI,GAAG,WAAS,CAAC,KAAK,IAAK;AAAA,EAAE;AAAA,EACvG,QAAQ,KAAK;AAAE,WAAO;AAAA,EAAK;AAAA;AAC/B;AAGA,MAAM,wBAAwB;AAAA,EAC1B,YAAmC;AAAA,EACnC;AAAA,EACA,QAAgB;AAAA;AAAA,EAGR,gCAAgB,SAA2E;AAAA,EACnG,YAAY,UAAU,QAAQ,GAAG,YAAmC,YAAY;AAC5E,SAAK,QAAY;AACjB,SAAK,WAAY;AACjB,SAAK,YAAY;AAAA,EACrB;AAAA;AAAA,EAGA,kBAAkB,QAAa,UAAe,IAAS;AAEnD,WAAQ,OAAO,YAAY,WAAW,kBAAkB,QAAQ,UAAU,EAAE,IAAI;AAAA,EACpF;AAAA;AAAA,EAGA,mBAAmB,QAAa,WAAgB,IAC5C;AAAE,WAAQ,OAAO,KAAK,YAAY,WAAW,2BAA2B,QAAQ,KAAK,UAAU,WAAW,EAAE,IAAI,iBAAiB,UAAU,KAAK,UAAU,WAAW,EAAE;AAAA,EAAI;AAAA;AAAA,EAG/K,UAAU,QAAa;AACnB,QAAI,OAAO,UAAU,YAAY;AAAE,eAAS,KAAK,YAAY,SAAS,KAAK,QAAQ;AAAA,IAAG;AAAG,QAAI,CAAC,KAAK,UAAU,OAAO,CAAC,MAAM;AAC3H,QAAI,OAAO,KAAK,YAAY,UAAU;AAClC,YAAM,YAAc,OAAO,QAAQ,WAAW,cAAc,QAAQ,WAAW,QAAS,QAAQ,UAAU,KAAK,QAAQ,IAAK,CAAC,MAAM,IAAI,EAAC;AACxI,UAAI,KAAK,aAAa,YAAY;AAC9B,cAAM,OAAQ,OAAO,QAAQ,oBAAoB,cAAc,QAAQ,WAAW,OAAQ,CAAC,GAAG,QAAQ,mBAAmB,KAAK,QAAQ,CAAC,IAAI,EAAC;AAC5I,eAAO,MAAM,UAAU,IAAI,CAAC,GAAG,IAAI,IAAI;AAAA,MAC3C,WAAW,KAAK,aAAa,UAAU;AACnC,cAAM,UAAU,QAAQ,UAAU,KAAK,QAAQ;AAC/C,eAAO,UAAU,CAAC,OAAO,IAAI;AAAA,MACjC;AACA,aAAO;AAAA,IACX;AACA,WAAO,MAAM,QAAQ,KAAK,QAAQ,IAAI,KAAK,WAAW,CAAC,KAAK,QAAQ;AAAA,EACxE;AAAA;AAAA,EAGA,aAAa,QAAa;AACtB,UAAM,KAAK,QAAQ,QAAQ;AAC3B,UAAM,MAAM,KAAK,UAAU,MAAM;AACjC,QAAI,OAAO,OAAO,UAAU;AACxB,UAAI,KAAK,aAAa,YAAY;AAAE,eAAO,IAAI,UAAU,GAAG,IAAI,KAAK,IAAI,gBAAgB,GAAG;AAAA,MAAG;AAC/F,UAAI,KAAK,aAAa,UAAY;AAAE,eAAO,IAAI,UAAU,GAAG,IAAI,KAAK,IAAI,UAAU,GAAG;AAAA,MAAG;AAAA,IAC7F;AACA,WAAO,OAAQ,KAAa,WAAW,OAAS,KAAa,WAAW,MAAO;AAAA,EACnF;AAAA;AAAA,EAGA,kBAAkB,WAAgB;AAC9B,UAAM,MAAW,KAAK,WAAU;AAChC,QAAI,OAAO,OAAO,UAAU;AACxB,aAAO;AAAA,QACH,CAAC,cAAc,GAAG;AAAA,QAClB,CAAC,cAAc,GAAG;AAAA,QAClB,CAAC,YAAY,GAAG;AAAA,QAChB,CAAC,YAAY,GAAG;AAAA,QAChB,CAAC,OAAO,GAAG;AAAA,QACX,CAAC,MAAM,GAAG;AAAA,OACd,GAAI,SAAS,KAAK;AAAA,IACtB;AACA,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,kBAAkB,QAAa,MAAW,IAAS,QAAc;AAC7D,UAAM,WAAW,KAAK,UAAU,MAAM;AACtC,QAAI,OAAO,YAAY,UAAU;AAC7B,gBAAU,mBAAmB,MAAM,IAAI,MAAM;AAC7C,aAAO;AAAA,IACX;AAGA,UAAM,YAAY,KAAK,kBAAkB,IAAI;AAC7C,UAAM,SAAS,QAAQ,QAAQ;AAC/B,UAAM,OAAO,CAAC,OAAO;AACjB,YAAM,MAAW,KAAK,UAAU,MAAM;AACtC,YAAM,MAAM,IAAI,iBAAiB;AAGjC,UAAI,KAAU;AACd,UAAI,IAAI,gBAAgB,OAAO,GAAG,iBAAiB,YAAY;AAC3D,cAAM,OAAO,GAAG,cAAa;AAE7B,mBAAW,QAAQ,MAAM;AACrB,cAAI,gBAAgB,eAAe,gBAAgB,SAAS;AACxD,kBAAM,SAAU,MAAc,WAAW;AACzC,gBAAI,OAAO,OAAO,UAAU;AACxB,kBAAI,WAAW,QAAQ,KAAK,EAAE,GAAG;AAC7B,qBAAK;AACL;AAAA,cACJ;AAAA,YACJ,OAAO;AACH,kBAAI,eAAe,KAAK,QAAQ,EAAE,GAAG;AACjC,qBAAK;AACL;AAAA,cACJ;AAAA,YACJ;AAAA,UACJ;AAAA,QACJ;AAAA,MACJ;AAGA,UAAI,CAAC,IAAI;AACL,aAAM,IAAI,UAAU,KAAK,aAAa,MAAM,KAAM;AAClD,aAAK,IAAI,WAAW;AAAA,MACxB;AAEA,UAAI,OAAO,OAAO,UACd;AAAE,YAAI,eAAe,KAAK,WAAW,IAAI,KAAK,EAAE,GAAG,EAAE,GAAG;AAAE,cAAI,OAAO,IAAI,EAAE;AAAA,QAAG;AAAA,MAAE,OAChF;AAAE,YAAI,eAAe,KAAK,KAAK,EAAE,KAAK,eAAe,KAAK,IAAI,EAAE,GAAG;AAAE,cAAI,OAAO,IAAI,EAAE;AAAA,QAAG;AAAA,MAC7F;AAAA,IACJ;AACA,YAAQ,mBAAmB,WAAW,MAAM,MAAM;AAGlD,UAAM,WAAW,KAAK,UAAU,YAAY,wBAAQ,IAAI,KAAK;AAC7D,UAAM,QAAQ,SAAS,YAAY,2BAAW,IAAI,SAAS;AAC3D,UAAM,IAAI,IAAI,EAAC,MAAM,QAAO;AAC5B,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,qBAAqB,QAAa,MAAW,IAAS,QAAc;AAChE,UAAM,WAAW,KAAK,UAAU,MAAM;AACtC,QAAI,OAAO,YAAY,UAAU;AAC7B,gBAAU,sBAAsB,MAAM,IAAI,MAAM;AAChD,aAAO;AAAA,IACX;AAGA,UAAM,SAAS,QAAQ,QAAQ;AAC/B,UAAM,YAAY,KAAK,kBAAkB,IAAI,GAAG,WAAW,KAAK,UAAU,IAAI,MAAM;AACpF,QAAI,CAAC,UAAU;AAAQ,UAAM,QAAQ,SAAS,IAAI,SAAS,GAAG,QAAQ,OAAO,MAAM,EAAE;AACrF,YAAQ,sBAAsB,WAAW,OAAO,QAAQ,IAAI,UAAU,OAAO,UAAU,EAAE;AACzF,WAAO,SAAS,EAAE;AAAG,QAAI,OAAO,QAAQ,GAAG,UAAU,SAAS,SAAS;AACvE,QAAI,SAAS,QAAQ,GAAG,KAAK,UAAU,OAAO,MAAM;AAAA,EACxD;AAAA;AAAA,EAGA,UAAU,IAAU;AAChB,QAAI,OAAO,KAAK,YAAY,YAAY,OAAO,IAAI,YAAY,UAAU;AAAE,eAAS,IAAI,YAAY,MAAM,MAAM,KAAK,WAAW,QAAO;AAAA,IAAG;AAC1I,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA,EAGA,IAAI,QAAa,MAAW,KAAU;AAClC,UAAM,QAAQ,KAAK,UAAU,MAAM;AACnC,UAAM,WAAW,MAAM,SAAS,IAAI,MAAM,KAAK,KAAK,IAAI,KAAK,aAAa,MAAM;AAGhF,QAAI,QAAQ,iBAAiB;AAAE,aAAO,kBAAkB,IAAI,IAAI,QAAQ;AAAA,IAAG;AAC3E,QAAI,QAAQ,YAAY,OAAO,UAAU,MAAM;AAAE,aAAO,OAAO;AAAA,IAAQ;AAGvE,QAAI,QAAQ,mBAAmB,OAAO,CAAC,QAAO,KAAK,WAAW,OAAO,KAAK;AAC1E,QAAI,CAAC,SAAS,mBAAmB,EAAE,QAAQ,IAAI,KAAK,GAAG;AACnD,YAAM,KAAK,QAAQ,QAAQ;AAC3B,YAAM,WAAW,KAAK,UAAU,MAAM;AACtC,YAAM,QAAS,OAAO,YAAY,WAC9B,oBAAoB,UAAU,YAAY,EAAE,IAC5C;AAEJ,UAAI,QAAQ,qBAAqB;AAC7B,eAAO,OAAO,YAAY,OAAO;AAAA,MACrC;AACA,aAAO,QAAQ,IAAI;AAAA,IACvB;AAGA,QAAI,QAAQ,QAAQ,OAAQ,QAAQ,QAAQ;AAC5C,QAAI,QAAQ,YAAY,OAAO,KAAK,UAAU,MAAM;AAGpD,QAAI,QAAQ,eAAe,OAAO,CAACG,OAAM,OAAK,KAAK,mBAAmB,QAAQA,OAAM,EAAE;AACtF,QAAI,QAAQ,aAAa,OAAO,CAAC,OAAK,KAAK,kBAAkB,QAAQ,KAAK,UAAU,EAAE;AACtF,QAAI,QAAQ,oBAAoB,OAAO,CAACA,OAAM,IAAI,QAAO,KAAK,kBAAkB,QAAQA,OAAM,IAAI,GAAG;AACrG,QAAI,QAAQ,uBAAuB,OAAO,CAACA,OAAM,IAAI,QAAO,KAAK,qBAAqB,QAAQA,OAAM,IAAI,GAAG;AAG3G,QAAI,QAAQ,gBAAgB;AACxB,aAAO,CAAC,QAAM;AACV,cAAMC,SAAQ,KAAK,UAAU,MAAM;AACnC,cAAMC,YAAWD,OAAM,SAAS,IAAIA,OAAM,KAAK,KAAK,IAAI,KAAK,aAAa,MAAM;AAChF,cAAM,QAAa,eAAe,MAAM,MAAM,GAAG,MAAM,KAAK,QAAQ,KAAKC;AACzE,YAAIJ,OAAA,EAAO,MAAM,KAAK,GAAG,MAAM,eAAe,GAAG,MAAM,GAAG,GAAG;AACzD,iBAAOA,OAAA,EAAO,MAAM,KAAK,GAAG,MAAM,eAAe,GAAG,MAAM,GAAG,IAAI,CAAC;AAAA,QACtE;AACA,eAAOI,WAAU,eAAe,GAAG;AAAA,MACvC;AAAA,IACJ;AAGA,QAAI,QAAQ,gBAAgB;AACxB,aAAO,CAAC,KAAK,UAAQ;AAIjB,cAAMD,SAAQ,KAAK,UAAU,MAAM;AACnC,cAAMC,YAAWD,OAAM,SAAS,IAAIA,OAAM,KAAK,KAAK,IAAI,KAAK,aAAa,MAAM;AAChF,YAAI,OAAO,SAAS,aAAa,OAAO,SAAS,QAAQ,WAAW,QAAQ;AACxE,iBAAO,SAASC,WAAU,KAAK,OAAO,iBAAiB,MAAM,IAAI;AAAA,QACrE;AACA,eAAOA,WAAU,eAAe,KAAK,KAAK;AAAA,MAC9C;AAAA,IACJ;AAGA,QAAI,QAAQ,mBAAmB;AAC3B,aAAO,CAAC,QAAM;AACV,cAAMD,SAAQ,KAAK,UAAU,MAAM;AACnC,cAAMC,YAAWD,OAAM,SAAS,IAAIA,OAAM,KAAK,KAAK,IAAI,KAAK,aAAa,MAAM;AAChF,cAAM,QAAa,eAAe,MAAM,MAAM,GAAG,MAAM,KAAK,QAAQ,KAAKC;AACzE,YAAIJ,OAAA,EAAO,MAAM,KAAK,GAAG,MAAM,eAAe,GAAG,MAAM,GAAG,GAAG;AACzD,iBAAOA,OAAA,EAAO,MAAM,KAAK,GAAG,MAAM,eAAe,GAAG,MAAM,GAAG,IAAI,CAAC,KAAI;AAAA,QAC1E;AACA,eAAOI,WAAU,kBAAkB,GAAG;AAAA,MAC1C;AAAA,IACJ;AAGA,QAAI,QAAQ,gBAAgB;AACxB,aAAO,CAAC,QAAM;AACV,cAAMD,SAAQ,KAAK,UAAU,MAAM;AACnC,cAAMC,YAAWD,OAAM,SAAS,IAAIA,OAAM,KAAK,KAAK,IAAI,KAAK,aAAa,MAAM;AAChF,cAAM,QAAa,eAAe,MAAM,MAAM,GAAG,MAAM,KAAK,QAAQ,KAAKC;AACzE,YAAIJ,OAAA,EAAO,MAAM,KAAK,GAAG,MAAM,eAAe,GAAG,MAAM,GAAG,GAAG;AACzD,iBAAO;AAAA,QACX;AACA,eAAOI,WAAU,eAAe,GAAG;AAAA,MACvC;AAAA,IACJ;AAGA,QAAI,QAAQ,WAAW;AACnB,UAAI,OAAO,UAAU,GAAG,OAAO,UAAU,WAAW;AACpD,YAAM,WAAW,SAAS,wBAAuB;AACjD,eAAS,OAAO,GAAG,KAAK;AAAG,aAAO;AAAA,IACtC;AAGA,QAAI,QAAQ,OAAO,aAAa;AAC5B,UAAK,KAAK,UAAkB,WAAW,OAAO,KAAM,KAAK,UAAkB,UAAU,OAAO,GAAG;AAC3F,eAAO,CAAC,SAAO;AACX,cAAI,QAAQ,UAAU,QAAQ,UAAU,WAAW,WAAW,iBAAiB,YAAY,UAAU,WAAW,WAAW,KAAK;AAChI,cAAI,QAAQ,UAAU,OAAO,QAAQ,UAAU,WAAW,WAAW,UAAU,UAAU,WAAW,SAAS;AAC7G,cAAI,QAAQ,WAAW,QAAQ,UAAU,WAAW,WAAW;AAC/D,kBAAQ,UAAU,WAAW,WAAW,YAAY,UAAU,WAAW,WAAW,UAAU,UAAU,WAAW;AAAA,QACvH;AAAA,MACJ;AAAA,IACJ;AAGA,QAAI,QAAQ,WAAW;AACnB,UAAK,KAAK,UAAkB,WAAW,OAAO,KAAM,KAAK,UAAkB,UAAU,OAAO,GAAG;AAC3F,gBAAQ,UAAU,WAAW,WAAW;AAAA,MAC5C;AAAA,IACJ;AAGA,QAAI,QAAQ,SAAS;AACjB,UAAK,KAAK,UAAkB,WAAW,OAAO,KAAM,KAAK,UAAkB,UAAU,OAAO,GAAG;AAC3F,gBAAQ,UAAU,WAAW,WAAW,kBAAkB,UAAU,WAAW,WAAW,gBAAgB,UAAU,WAAW,WAAW,UAAU,UAAU,WAAW,WAAW;AAAA,MACxL;AAAA,IACJ;AAGA,QAAI,QAAQ,WAAW;AACnB,UAAK,KAAK,UAAkB,WAAW,OAAO,KAAM,KAAK,UAAkB,UAAU,OAAO,GAAG;AAC3F,eAAO,CAAC,OAAO;AACX,cAAI,WAAW,UAAU;AACzB,gBAAM,MAAkB;AAAA,YACpB,CAAC,OAAK;AACF,oBAAM,QAAQ,KAAK,aAAa,IAAI,MAAM;AAC1C,mBAAK,OAAO,OAAO,SAAS,QAAQ;AACpC,yBAAW,OAAO;AAAA,YACtB;AAAA,YAAG,EAAC,SAAS;AAAI,WACrB;AACA,eAAK,kBAAkB,QAAQ,UAAU,GAAG,GAAG;AAC/C,iBAAO,MAAI,KAAK,qBAAqB,QAAQ,UAAU,GAAG,GAAG;AAAA,QACjE;AAAA,MACJ;AAAA,IACJ;AAGA,QAAI,QAAQ,YAAY,OAAO,YAAY,YAAY,OAAO,YAAY,eAAe,YAAY,MAAM;AACvG,YAAM,KAAK,IAAI,QAAQ,QAAQ;AAC/B,aAAO,MAAK,IAAI,SAAQ,EAAG,WAAW,IAAI,SAAQ;AAAA,IACtD;AAGA,QAAI,OAAO,QAAQ,YAAY,QAAQ,KAAK,IAAI,GAAG;AAAE,aAAO,MAAM,SAAS,IAAI,CAAC;AAAA,IAAG;AAGnF,UAAM,SAAS;AACf,QAAI,SAAS,IAAI,KAAK,MAAM;AAAE,aAAO,OAAO,OAAO,IAAI,KAAK,aAAa,OAAO,IAAI,EAAE,KAAK,MAAM,IAAI,OAAO,IAAI;AAAA,IAAG;AACnH,QAAK,QAAQ,IAAI,KAAK,MAAM;AAAE,aAAO,OAAQ,MAAM,IAAI,KAAK,aAAc,MAAM,IAAI,EAAE,KAAK,KAAK,IAAM,MAAM,IAAI;AAAA,IAAG;AAInH,WAAO,OAAO,SAAS,IAAI,KAAK,aAAa,SAAS,IAAI,EAAE,KAAK,MAAM,IAAI,SAAS,IAAI;AAAA,EAC5F;AAAA;AAAA,EAGA,IAAI,QAAa,MAAW,OAAY;AACpC,UAAM,QAAQ,KAAK,UAAU,MAAM;AACnC,UAAM,WAAW,MAAM,SAAS,IAAI,MAAM,KAAK,KAAK,IAAI,KAAK,aAAa,MAAM;AAGhF,QAAI,OAAO,QAAQ,YAAY,QAAQ,KAAK,IAAI,GAAG;AAAE,aAAO;AAAA,IAAO;AACnE,QAAI,MAAM,IAAI,KAAK,MAAM;AAAE,aAAO;AAAA,IAAO;AACzC,QAAI,UAAU;AAAE,eAAS,IAAI,IAAI;AAAO,aAAO;AAAA,IAAM;AACrD,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,IAAI,QAAa,MAAW;AACxB,UAAM,QAAQ,KAAK,UAAU,MAAM;AACnC,UAAM,WAAW,MAAM,SAAS,IAAI,MAAM,KAAK,KAAK,IAAI,KAAK,aAAa,MAAM;AAChF,WACK,OAAO,QAAQ,YAAY,QAAQ,KAAK,IAAI,KAAK,MAAM,SAAS,IAAI,CAAC,KAAK,QAC1E,MAAM,IAAI,KAAK,QACf,YAAY,QAAQ;AAAA,EAE7B;AAAA;AAAA,EAGA,eAAe,QAAa,MAAW;AACnC,UAAM,QAAQ,KAAK,UAAU,MAAM;AACnC,UAAM,WAAW,MAAM,SAAS,IAAI,MAAM,KAAK,KAAK,IAAI,KAAK,aAAa,MAAM;AAChF,QAAI,YAAY,QAAQ,UAAU;AAAE,aAAO,SAAS,IAAI;AAAG,aAAO;AAAA,IAAM;AACxE,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,QAAQ,QAAa;AACjB,UAAM,QAAQ,KAAK,UAAU,MAAM;AACnC,UAAM,WAAW,MAAM,SAAS,IAAI,MAAM,KAAK,KAAK,IAAI,KAAK,aAAa,MAAM;AAChF,UAAM,2BAAW,KAAI;AACrB,UAAM,QAAQ,CAAC,IAAI,MAAM,KAAK,IAAI,EAAE,UAAU,CAAC;AAC/C,WAAO,oBAAoB,KAAK,EAAE,QAAQ,OAAK,KAAK,IAAI,CAAC,CAAC;AAC1D,QAAI,UAAU,OAAO,oBAAoB,QAAQ,EAAE,QAAQ,OAAK,KAAK,IAAI,CAAC,CAAC;AAC3E,WAAO,MAAM,KAAK,IAAI;AAAA,EAC1B;AAAA;AAAA,EAGA,eAAe,QAAa,MAAW,MAAW;AAC9C,UAAM,QAAQ,KAAK,UAAU,MAAM;AACnC,UAAM,WAAW,MAAM,SAAS,IAAI,MAAM,KAAK,KAAK,IAAI,KAAK,aAAa,MAAM;AAChF,QAAI,UAAU;AAAE,aAAO,eAAe,UAAU,MAAM,IAAI;AAAG,aAAO;AAAA,IAAM;AAC1E,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,MAAM,QAAa,MAAW,MAAW;AACrC,SAAK,CAAC,MAAM,KAAK;AACjB,UAAM,SAAS,QAAQ,QAAQ,MAAM,IAAI;AACzC,SAAK,WAAW,UAAU,KAAK;AAC/B,WAAO,IAAI,MAAM,QAAQ,IAAyB;AAAA,EACtD;AACJ;AAGO,MAAM,IAAI,CAAC,UAAe,OAAO,SAAS,iBAAiB,QAAQ,GAAG,YAAmC,eAAe;AAE3H,OAAK,UAAU,WAAW,qBAAqB,aAAa;AACxD,UAAM,KAAK,UAAU,WAAW;AAChC,WAAO,YAAY,YAAY,IAAI,IAAI,MAAM,IAAI,IAAI,wBAAwB,IAAI,OAAO,SAAS,CAAsB,CAAC;AAAA,EAC5H;AAGA,MAAI,OAAO,YAAY,YAAY;AAC/B,UAAM,KAAK;AACX,WAAO,YAAY,YAAY,IAAI,IAAI,MAAM,IAAI,IAAI,wBAAwB,IAAI,OAAO,SAAS,CAAsB,CAAC;AAAA,EAC5H;AAGA,MAAI,QAAQ,QAAQ,OAAO,QAAQ,YAAY,OAAO,QAAQ,YAAY,OAAO,QAAQ,aAAa,OAAO,QAAQ,YAAY,OAAO,QAAQ,aAAa;AAAE,WAAO;AAAA,EAAM;AAC5K,MAAI,eAAe,MAAM,IAAI,GAAG,MAAM,QAAQ,GAAG;AAAE,WAAO,eAAe,MAAM,IAAI,GAAG,MAAM,QAAQ;AAAA,EAAG;AAGvG,SAAO,eAAe,cAAc,sBAAM,IAAI,KAAK,GAAG,sBAAsB,UAAU,MAAI;AACtF,WAAO,IAAI,MAAM,MAAM,IAAI,wBAAwB,UAAU,OAAO,SAAS,CAAsB;AAAA,EACvG,CAAC;AACL;;ACnYA,MAAM,WAAW,CAAC,QAAa;AAC3B,MAAI,YAAY,GAAG,GAAG;AAAE,WAAO,EAAC;AAAA,EAAG;AACnC,MAAI,MAAM,QAAQ,GAAG,GAAG;AAAE,WAAO,IAAI,IAAI,CAAC,MAAM,QAAQ,CAAC,KAAK,IAAI,CAAC;AAAA,EAAG;AACtE,MAAI,eAAe,KAAK;AAAE,WAAO,MAAM,KAAK,IAAI,SAAS;AAAA,EAAG;AAC5D,MAAI,eAAe,KAAK;AAAE,WAAO,MAAM,KAAK,IAAI,QAAQ;AAAA,EAAG;AAC3D,SAAO,MAAM,KAAK,OAAO,QAAQ,GAAG,CAAC;AACzC;AAGO,MAAM,oBAAoB,CAAC,SAAsB,eAAkB;AACtE,MAAI,CAAC,YAAY,OAAO;AACxB,QAAM,OAAO,IAAI,QAAQ,UAAU,GAAG,MAAM,IAAI,QAAQ,OAAO;AAC/D,MAAI,OAAO,cAAc,YAAY,OAAO,cAAc,YAAY;AAClE,aAAS,UAAU,EAAE,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAI;AAC1C,sBAAgB,KAAK,SAAQ,EAAG,MAAM,KAAK;AAAA,IAC/C,CAAC;AACD,UAAM,OAAO,SAAS,YAAY,CAAC,OAAO,SAAY;AAClD,sBAAgB,KAAK,SAAQ,EAAG,MAAM,KAAK;AAC3C,kBAAY,KAAK,SAAQ,EAAG,OAAO,MAAM,iBAAiB,MAAM,IAAI;AAAA,IACxE,CAAC;AACD,mBAAe,YAAY,OAAO,SAAS,IAAI;AAC/C,mBAAe,SAAS,OAAO,SAAS,IAAI;AAAA,EAChD,OACA;AAAE,YAAQ,KAAK,8BAA8B,UAAU;AAAA,EAAG;AAC9D;AAGO,MAAM,cAAc,CAAC,SAAsB,SAAY;AAC1D,MAAI,CAAC,MAAM,OAAO;AAClB,QAAM,OAAO,IAAI,QAAQ,IAAI,GAAG,MAAM,IAAI,QAAQ,OAAO;AACzD,MAAI,OAAO,QAAQ,YAAY,OAAO,QAAQ,YAAY;AACtD,aAAS,IAAI,EAAE,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAI;AACpC,sBAAgB,KAAK,SAAQ,EAAG,WAAS,MAAM,YAAW,IAAG,QAAM,KAAK,KAAK;AAAA,IACjF,CAAC;AACD,UAAM,OAAO,SAAS,MAAM,CAAC,OAAO,SAAO;AACvC,sBAAgB,KAAK,SAAQ,EAAG,WAAS,MAAM,YAAW,IAAG,QAAM,KAAK,KAAW;AACnF,kBAAY,KAAK,OAAO,MAAM,iBAAiB,MAAM,IAAI;AAAA,IAC7D,CAAC;AACD,mBAAe,MAAM,OAAO,SAAS,IAAI;AACzC,mBAAe,SAAS,OAAO,SAAS,IAAI;AAAA,EAChD,OACA;AAAE,YAAQ,KAAK,wBAAwB,IAAI;AAAA,EAAE;AAAG,SAAO;AAC3D;AAGO,MAAM,iBAAiB,CAAC,SAAsB,YAAe;AAChE,MAAI,CAAC,SAAS,OAAO;AACrB,QAAM,OAAO,IAAI,QAAQ,OAAO,GAAG,MAAM,IAAI,QAAQ,OAAO;AAC5D,MAAI,OAAO,WAAW,YAAY,OAAO,WAAW,YAAY;AAC5D,aAAS,OAAO,EAAE,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAI;AACvC,oBAAc,KAAK,SAAQ,EAAG,MAAM,KAAK;AAAA,IAC7C,CAAC;AACD,UAAM,OAAO,SAAS,SAAS,CAAC,OAAO,SAAY;AAC/C,oBAAc,KAAK,SAAQ,EAAG,MAAM,KAAK;AACzC,kBAAY,KAAK,SAAQ,EAAG,OAAO,MAAM,eAAe,IAAI;AAAA,IAChE,CAAC;AACD,mBAAe,SAAS,OAAO,SAAS,IAAI;AAC5C,mBAAe,SAAS,OAAO,SAAS,IAAI;AAAA,EAChD,OACA;AAAE,YAAQ,KAAK,2BAA2B,OAAO;AAAA,EAAG;AAAG,SAAO;AAClE;AAGO,MAAM,gBAAgB,CAAC,SAAsB,WAAqB;AACrE,MAAI,CAAC,QAAQ,OAAO;AACpB,MAAI,OAAO,UAAU,UAAU;AAAE,YAAQ,MAAM,UAAU;AAAA,EAAQ,WAC7D,OAAO,QAAQ,SAAS,UAAU;AAAE,aAAS,CAAC,QAAQ,OAAO,GAAG,CAAC,QAAQ;AAAE,cAAQ,MAAM,UAAU;AAAA,IAAK,CAAC;AAAA,EAAG,WAC5G,OAAO,UAAU,YAAY,OAAO,UAAU,YAAY;AAC1D,UAAM,OAAO,IAAI,QAAQ,MAAM,GAAG,MAAM,IAAI,QAAQ,OAAO;AAC3D,aAAS,MAAM,EAAE,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAI;AACtC,wBAAkB,KAAK,SAAQ,EAAG,MAAM,KAAK;AAAA,IACjD,CAAC;AACD,UAAM,OAAO,SAAS,QAAQ,CAAC,OAAO,SAAY;AAC9C,wBAAkB,KAAK,SAAQ,EAAG,MAAM,KAAK;AAC7C,kBAAY,KAAK,SAAQ,EAAG,OAAO,MAAM,mBAAmB,MAAM,SAAS;AAAA,IAC/E,CAAC;AAGD,mBAAe,QAAQ,OAAO,SAAS,IAAI;AAC3C,mBAAe,SAAS,OAAO,SAAS,IAAI;AAAA,EAChD,OACA;AAAE,YAAQ,KAAK,0BAA0B,MAAM;AAAA,EAAG;AAAE,SAAO;AAC/D;AAGO,MAAM,wBAAwB,OAAO,SAAsB,SAAY;AAAE,QAAM,SAAS,MAAM,OAAO,OAAO;AAAG,SAAO,cAAc,SAAS,MAAM;AAAG;AACtJ,MAAM,oBAAoB,CAAC,SAAsB,eAAkB;AACtE,MAAI,CAAC,YAAY,OAAO;AAAS,QAAM,OAAO,IAAI,QAAQ,UAAU,GAAG,MAAM,IAAI,QAAQ,OAAO;AAGhG,QAAM,WAAW,CAAC,OAAU;AACxB,UAAM,QAAQ,EAAE,SAAS,IAAI,MAAM;AACnC,QAAI,OAAO,SAAS,QAAQ,WAAW,OAAO,OAAO,YAAY,KAAK,GAAG,WAAW,QAAQ,OAAO;AACnG,QAAI,OAAO,iBAAiB,QAAQ,WAAW,OAAO,eAAe,YAAY,aAAa,GAAG,WAAW,gBAAgB,OAAO;AACnI,QAAI,OAAO,WAAW,QAAQ,WAAW,OAAO,SAAS,YAAY,OAAO,GAAG,WAAW,UAAU,OAAO;AAAA,EAC/G;AAGA,WAAS,UAAU,EAAE,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAI;AAC1C,mBAAe,KAAK,SAAQ,EAAG,MAAM,KAAK;AAAA,EAC9C,CAAC;AAGD,QAAM,OAAO,SAAS,YAAY,CAAC,OAAO,SAAc;AACpD,UAAM,KAAK,IAAI,OAAM;AACrB,QAAI,IAAI;AACJ,UAAI,QAAQ,WAAW;AACnB,mBAAW,IAAwB,KAAK;AAAA,MAC5C,OAAO;AACH,iBAAS,IAAI,MAAM,OAAO,gBAAgB,MAAM,WAAW,IAAI;AAAA,MACnE;AAAA,IACJ;AAAA,EACJ,CAAC;AAGD,iBAAe,YAAY,OAAO,SAAS,IAAI;AAAG,iBAAe,SAAS,OAAO,SAAS,IAAI;AAAG,UAAQ,iBAAiB,UAAU,QAAQ;AAAG,SAAO;AAC1J;AAGO,MAAM,mBAAmB,CAAC,SAAsB,cAA0B;AAC7E,MAAI,CAAC,WAAW,OAAO;AAAS,QAAM,MAAM,IAAI,QAAQ,OAAO;AAG/D,WAAS,SAAS,EAAE,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAM;AAC3C,UAAM,KAAK;AACX,QAAI,OAAO,SAAS,eAAe,SAAS,MACxC;AAAE,UAAK,GAAG,UAAU,SAAS,KAAK,GAAG;AAAE,WAAG,UAAU,OAAO,KAAK;AAAA,MAAG;AAAA,IAAE,OACrE;AAAE,UAAI,CAAC,GAAG,UAAU,SAAS,KAAK,GAAG;AAAE,WAAG,UAAU,IAAI,KAAK;AAAA,MAAG;AAAA,IACpE;AAAA,EACJ,CAAC;AAED,QAAM,OAAO,SAAS,WAAW,CAAC,UAAgB;AAC9C,UAAM,KAAK,KAAK,SAAQ;AACxB,QAAI,IAAI;AACJ,UAAI,OAAO,SAAS,eAAe,SAAS,MACxC;AAAE,YAAK,GAAG,UAAU,SAAS,KAAK,GAAG;AAAE,aAAG,UAAU,OAAO,KAAK;AAAA,QAAG;AAAA,MAAE,OACrE;AAAE,YAAI,CAAC,GAAG,UAAU,SAAS,KAAK,GAAG;AAAE,aAAG,UAAU,IAAI,KAAK;AAAA,QAAG;AAAA,MACpE;AAAA,IACJ;AAAA,EACJ,CAAC;AAGD,iBAAe,WAAW,OAAO,SAAS,IAAI;AAC9C,iBAAe,SAAS,OAAO,SAAS,IAAI;AAAG,SAAO;AAC1D;;ACrJO,MAAM,cAAc,CAAC,gBAA6B,MAAM,QAA0B,UAAmB,SAAS;AASjH,QAAM,gBAAuB,EAAC;AAC9B,QAAM,QAAQ,MAAI;AACd,mBAAe,UAAU,CAAC,CAAC,IAAI,IAAI,MAAI,KAAK,GAAG,IAAI,CAAC;AACpD,mBAAe,SAAS,GAAG,eAAe,MAAM;AAAA,EACpD;AAGA,QAAM,kBAAkB,CAAC,OAAO,KAAK,OAAO,IAAmB,cAA2B,SAAS;AAC/F,UAAM,aAAa5D,eAAA,CAAc,WAAW,KAAKA,gBAAc,aAAa;AAC5E,UAAM,UAAU,QAAQ,OAAO,QAAQ,KAAK,UAAU;AACtD,UAAM,UAAU,QAAQ,OAAO,QAAQ,KAAK,UAAU;AAGtD,QAAI,iBAAiB,SAAS,iBAAiB,SAAS;AACxD,QAAI,UAAUA,eAAA,CAAc,cAAc,KAAK;AAC/C,QAAI,CAAC,SAAS;AAAQ,QAAI,iBAAiB,SAAS;AAAE,sBAAgB;AAAA,IAAS;AAG/E,UAAM,SAAS,QAAQ,SAAS,OAAO;AAGvC,QAAK,CAAC,QAAQ,QAAQ,SAAS,EAAE,QAAQ,MAAM,EAAE,KAAK,KAAK,CAAC,IAAK;AAE7D,UAAK,WAAW,QAAQ,WAAW,QAAS,MAAM,WAAW;AAAE,uBAAe,OAAO,CAAC,aAAa,CAAC,SAAS,SAAS,MAAM,UAAU,IAAI,SAAS,GAAG,CAAC,CAAC;AAAA,MAAG,WACtJ,WAAW,QAAQ,WAAW,QAAS,MAAM,QAAQ;AAAE,uBAAe,OAAO,CAAC,aAAa,CAAC,SAAS,SAAS,MAAM,GAAG,CAAC,CAAC;AAAA,MAAG,WAC5H,WAAW,QAAQ,WAAW,QAAS,MAAM,QAAQ;AAAE,uBAAe,OAAO,CAAC,iBAAiB,CAAC,SAAS,SAAS,MAAM,UAAU,IAAI,SAAS,KAAK,OAAO,CAAC,CAAC;AAAA,MAAG;AAAC,IAC1K;AAGA,QAAK,MAAM,MAAM,UAAU,CAAC,QAAQ,QAAQ,SAAS,EAAE,QAAQ,EAAE,KAAK,KAAO,CAAC,MAAM,CAAC,SAAU;AAAE,eAAQ;AAAA,IAAG;AAAA,EAChH;AAGA,SAAO;AACX;AAGA,MAAM6D,SAAA,GAAU,CAAC,aAAW;AACxB,MAAI,oBAAoB,OAAO,oBAAoB,KAAK;AACpD,eAAW,MAAM,KAAK,UAAU,UAAU;AAAA,EAC9C;AACA,SAAO;AACX;AA4BO,MAAM,iBAAiB,CAAC,SAAyC,WAAkB,IAAI,WAAsB;AAChH,MAAI,CAAC,YAAY,CAAC,SAAS,OAAO;AAGlC,YAAU,WAAW,OAAO,IAAK,UAAkB,SAAS,WAAW;AACvE,cAAY,WAAW,OAAO,IAAK,UAAkB,WAAW,aAAa;AAG7E,QAAM,OAAO,MAAM,KAAK,UAAU,QAAO,IAAK,EAAE;AAChD,QAAM,MAAMA,SAAA,CAAQ,QAAQ,GAAG,MAAM,CAAC,IAAI,UAAU,QAAQ,IAAI,QAAQ,OAAO,KAAK,KAAK,OAAO,OAAO,CAAC;AAGxG,kBAAgB,SAAS,GAAG;AAAG,OAAK,UAAU,CAAC,OAAO,YAAY,SAAS,EAAE,CAAC;AAC9E,SAAO;AACX;;ACxFA,MAAM,GAAG;AAAA,EACL,QAAQ,SAAS,cAAc,EAAE;AAAA,EACjC;AAAA,EACA;AAAA,EACA,WAAgB;AAAA,EAChB,YAAiB;AAAA,EACjB,YAAqB;AAAA,EACrB,WAA8B,EAAC;AAAA,EAC/B;AAAA;AAAA,EACA,SAAc;AAAA;AAAA;AAAA,EAId,eAA4B;AAAA;AAAA,EAG5B,YAAY,cAA2B,MAAM;AACzC,QAAI,aAAa;AACb,WAAK,aAAY;AAAG,WAAK,YAAY;AAAM,WAAK,WAAW;AAC3D,WAAK,aAAa,YAAY,aAAa,MAAM,KAAK;AACtD,WAAK,cAAc,WAAW,CAAC,KAAK,WAAW,OAAO,GAAG,KAAK,UAAU,KAAK,IAAI,CAAC;AAAA,IACtF;AAAA,EACJ;AAAA;AAAA,EAGA,IAAI,cAAc;AAAE,WAAO,KAAK;AAAA,EAAc;AAAA,EAC9C,IAAI,YAAY,OAAoB;AAChC,QAAI,iBAAiB,eAAe7D,eAAA,CAAc,KAAK,KAAK,SAAS,KAAK,cAAc;AACpF,WAAK,eAAe;AAAO,WAAK,YAAY,KAAK;AACjD,UAAI,KAAK,UAAU;AAEf,aAAK,UAAU,cAAc,QAAQ,KAAK,UAAU,UAAS;AAAG,aAAK,WAAW;AAAA,MACpF;AAGA,MAAgB,KAAK;AAAA,IAEzB;AAAA,EACJ;AAAA;AAAA,EAGA,YAAY,UAAU,QAAa,CAAC,OAAO,IAAI;AAAA;AAAA,IAAiJ;AAAA,KAAM;AAClM,SAAK,QAAQ,SAAS,cAAc,EAAE;AAGtC,QAAI,SAAS,KAAK,OAAO,OAAO,YAAY,cAAc,OAAO,YAAY,aAAa,CAAC,SAAS,QAAQ,IAAI;AAC5G,OAAC,UAAU,KAAK,IAAI,CAAC,OAAO,QAAQ;AAAA,IACxC;AAGA,QAAI,CAAC,YAAY,SAAS,QAAQ,OAAO,SAAS,aAAa,CAAC,SAAS,KAAK,GAAG;AAC7E,gBAAU;AAAA,IACd;AAGA,SAAK,UAAU,SAAS,OAAQ,OAAO,SAAS,aAAa,QAAS,OAAO,SAAS,WAAW,OAAO,SAAS,OAAS,UAAU,CAAC,OAAO;AAC5I,SAAK,WAAW;AAChB,SAAK,aAAc,CAAC,SAAS,QAAQ,IAAI,QAAQ,UAAU,EAAE,IAAI,aAAa;AAC9E,SAAK,aAAa,SAAS,wBAAuB;AAGlD,UAAM,eAAe,EAAE,kCAAkC,MAAM,kBAAkB,MAAM,QAAQ,MAAK;AACpG,UAAM,eAAeA,eAAA,CAAc,OAAc,IAAI,OAAQ,YAAuC,EAAC;AACrG,SAAK,WAAW,OAAO,OAAO,cAAc,WAAW;AAGvD,SAAK,cAAcA,gBAAc,KAAK,UAAU,WAAkB,MAAMA,eAAA,CAAc,OAAc,KAAK;AAAA,EAC7G;AAAA;AAAA,EAGA,WAAW,WAAiB,OAAa;AACrC,UAAM,OAAO,YAAY,SAAS,KAAK,IAAI,OAAO,QAAQ,KAAK,IAAI,EAAE,KAAK,IAAI,QAAQ,OAAQ,SAAS,YAAa,OAAO,KAAK,QAAQ,IAAI,SAAS;AACrJ,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,SAAS,WAAiB,kBAAkC,MAAM;AAE9D,UAAM,OAAO,YAAY,KAAK,WAAW,KAAK,IAAI,EAAE,KAAK,SAAS,IAAI,QAAQ,KAAK,WAAW,OAAQ,aAAa,KAAK,WAAW,QAAS,OAAO,KAAK,QAAQ,IAAI,SAAS;AAC7K,QAAI,QAAQ,QAAQ,iBAAiB;AAAE,WAAK,WAAW;AAAA,IAAM;AAC7D,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,KAAK,OAAO,IAAI;AAAE,WAAO;AAAA,EAAM;AAAA;AAAA,EAG/B,0BAA0B,WAAgB;AAKtC,YAAQ,IAAI,MAAM;AACd,YAAM,UAAU,KAAK,SAAS,SAAS;AACvC,UAAI,CAAC,WAAW,CAAC,aAAa,SAAS,WAAW,SAAS,KAAK,aAAa,SAAS;AAClF;AAAA,MACJ;AACA,UAAI,qBAAqB,eAAeA,eAAA,CAAc,SAAS,GAAG;AAC9D,YAAI,MAAM,KAAK,WAAW,QAAQ,EAAE,KAAK,CAAC,SAAS,SAAS,OAAO,GAAG;AAClE,eAAK,cAAc;AAAA,QACvB,OAAO;AACH,gBAAM,WAAW,IAAI,iBAAiB,CAAC,YAAY;AAC/C,uBAAW,UAAU,SAAS;AAC1B,kBAAI,OAAO,SAAS,aAAa;AAC7B,oBAAI,OAAO,WAAW,SAAS,GAAG;AAC9B,wBAAM,gBAAgB,MAAM,KAAM,OAAO,cAAsB,EAAE,EAAE,KAAK,CAAC,SAAS,SAAS,OAAO;AAClG,sBAAI,eAAe;AACf,yBAAK,cAAc;AACnB,6BAAS,YAAW;AAAA,kBACxB;AAAA,gBACJ;AAAA,cACJ;AAAA,YACJ;AAAA,UACJ,CAAC;AACD,mBAAS,QAAQ,WAAW,EAAE,WAAW,MAAM;AAAA,QACnD;AAAA,MACJ;AAAA,IACJ,CAAC,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AACtC,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA,EAGA,IAAI,OAAqD;AACrD,UAAM,aAAa,KAAK,SAAS,KAAK,WAAW,KAAK,KAAK;AAC3D,UAAM,cAAcA,eAAA,CAAc,YAAY,aAAa,IAAI,YAAY,gBAAgB,KAAK;AAChG,SAAK,gBAAgBA,eAAA,CAAc,WAAW,KAAK,KAAK;AAGxD,mBAAe,MAAM;AACjB,YAAM8D,eAAc9D,eAAA,CAAc,YAAY,aAAa,IAAI,YAAY,gBAAgB,KAAK;AAChG,WAAK,gBAAgBA,eAAA,CAAc8D,YAAW,KAAK,KAAK;AAAA,IAC5D,CAAC;AAGD,WAAQ,eAAe,KAAK,eAAe;AAAA,EAC/C;AAAA;AAAA,EAGA,IAAI,UAAwD;AACxD,UAAM,WAAW,KAAK,SAAS,KAAK,WAAW,KAAK,KAAK;AACzD,UAAM,cAAc9D,eAAA,CAAc,UAAU,aAAa,IAAI,UAAU,gBAAgB,KAAK;AAC5F,SAAK,gBAAgBA,eAAA,CAAc,WAAW,KAAK,KAAK;AAGxD,mBAAe,MAAM;AACjB,YAAM8D,eAAc9D,eAAA,CAAc,UAAU,aAAa,IAAI,UAAU,gBAAgB,KAAK;AAC5F,WAAK,gBAAgBA,eAAA,CAAc8D,YAAW,KAAK,KAAK;AAAA,IAC5D,CAAC;AAGD,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,UAAU,QAAQ,KAAK,QAAQ,IAAI;AAE/B,QAAI,YAAY,MAAM,KAAK,YAAY,MAAM,GAAG;AAAE;AAAA,IAAQ;AAG1D,QAAI,QAAS,YAAY,MAAM,IAAI,KAAK,WAAW,KAAK,WAAW,KAAK,aAAa,MAAM;AAC3F,QAAI,QAAQ,KAAK,SAAS,KAAK,aAAa,KAAK,KAAK,KAAK;AAC3D,QAAK,SAAS,CAAC,OAAO,cAAe,KAAK,UAAU,YAAY;AAAE,cAAQ,KAAK,YAAY;AAAA,IAAO;AAGlG,QAAI,UAAe,KAAK,WAAW,OAAO,QAAQ,KAAK,aAAa,KAAK,GAAG,OAAO,IAAI,KAAK,WAAW;AACvG,QAAI,SAAS,QAAQ,SAAS,KAAK,UAAU;AAAE,WAAK,WAAW;AAAA,IAAO,WAClE,SAAS,QAAQ,SAAS,KAAK,UAAU;AAAE,WAAK,WAAW;AAAA,IAAO;AACtE,WAAO;AAAA,EACX;AACJ;AAGA,MAAMC,kBAAA,GAAmB,CAAC,QAAa;AACnC,UAAQ,OAAO,OAAO,YAAY,OAAO,OAAO,cAAc,OAAO,OAAO,aAAa,OAAO;AACpG;AAGO,MAAM,IAAI,CAAC,YAAY,OAAQ,cAA+C,SAAS;AAC1F,MAAI,sBAAsB,aAAa;AAAE,WAAO,EAAE,UAAU;AAAA,EAAG;AAC/D,MAAI,cAAc,MAAM,OAAO,SAAS,cAAc,QAAQ;AAC9D,QAAM,aAAa,OAAO,SAAS,aAAa,MAAM,YAAY,EAAE,IAAI,eAAe;AACvF,MAAI,YAAY,SAAS,GAAG;AAAE,WAAO,EAAE,SAAS;AAAA,EAAG;AAGnD,MAAI,aAAa,QAAQ,SAAS,SAAS,GAAG;AAC1C,QAAI,YAAY,WAAW,KAAK,GAAG;AAC/B,aAAO,WAAW,SAAS,OAAO,EAAE,SAAS,IAAI,SAAS,cAAc,QAAQ;AAAA,IACpF,WACI,OAAO,aAAa,YAAY,OAAO,aAAa,YAAY;AAEhE,aAAO,MAAM,oBAAoBA,kBAAA,CAAiB,UAAU,IAAI,aAAa,WAAW,MAAM;AAC1F,eAAO,IAAI,GAAG,YAAY,OAAO,WAAW;AAAA,MAChD,CAAC;AAAA,IACL;AAAA,EACJ;AAGA,SAAO,QAAQ,WAAW,MAAM,IAAI,WAAW;AACnD;;AC5MO,MAAM,sBAAsB,CAAC,IAAS,cAA0B;AACnE,UAAS,aAAa,aAAa,MAAM,CAAC,IAAI,WAAW,SAAS,KAAK/D,eAAA,CAAc,SAAS,IAAK,IAAI,4BAA4B,SAAS,IAAI,SAAS,IAAI;AACjK;AAGO,MAAM,iBAAiB,CAAC,IAAS,cAA2B;AAAE,SAAO,oBAAoB,IAAI,SAAS,MAAM,SAAS,EAAE,KAAK,UAAU,IAAI,KAAK,IAAI,IAAI,QAAQ;AAAK;AAGpK,MAAM,4BAAY,SAAQ;AAC1B,MAAM,4BAAY,SAAQ;AAGjC,MAAM,YAAY,CAAC,QAAW;AAC1B,MAAI,YAAY,GAAG,GAAG,OAAO;AAC7B,MAAI,SAAS,GAAG,KAAK,YAAY,KAAK,KAAK,GAAG,OAAO,OAAO,IAAI,GAAG;AACnE,SAAO,OAAO,MAAM,GAAG;AAC3B;AAGA,MAAM,0CAA0B,SAAQ;AACxC,MAAM,0BAA0B,CAAC,UAAU,cAAY;AACnD,MAAI,qBAAqB,MAAM,QAAQ,GAAG;AACtC,WAAO,qBAAqB,MAAM,QAAQ;AAAA,EAC9C;AAGA,QAAM,UAAU,SAAS,cAAc,WAAW;AAClD,YAAU,OAAO,CAAC,SAAO;AACrB,UAAM,UAAU,OAAO,aAAa,aAAa,UAAU,IAAI,IAAI;AACnE,yBAAqB,MAAM,UAAU,OAAO;AAG5C,mBAAe,MAAM;AACjB,UAAI;AACA,YAAI,OAAO,SAAS,eAAe,YAAY;AAC3C,cAAI,CAAC,SAAS,aAAa;AAC3B,cAAI,UAAU,OAAO,GAAG;AAAE,qBAAS,cAAc,OAAO;AAAA,UAAG;AAAA,QAC/D,WACQ,SAAS,eAAe,UAAU,OAAO,GAAG;AAC5C,mBAAS,YAAY,eAAe,SAAS,OAAO;AAAA,QACxD;AAAA,MACR,SAAS,OAAO;AACZ,YAAI,CAAC,SAAS,aAAa;AAC3B,iBAAS,UAAS;AAAA,MACtB;AAAA,IACJ,CAAC;AAAA,EACL,CAAC;AACD,SAAO;AACX;AAGO,MAAM,WAAW,CAAC,IAAI,QAA0B,QAAgB,IAAI,cAAyB;AAChG,MAAI,UAAU,MAAM;AAAE,WAAQ,KAAK,SAAS,SAAS,IAAI,KAAK,GAAG,MAAM,EAAa;AAAA,EAAI;AACxF,MAAI,cAAc,WAAW,OAAQ,IAAY,SAAS,YAAY;AAAE,SAAK,GAAG,OAAM;AAAA,EAAG;AACzF,MAAI,cAAc,WAAW,OAAQ,IAAY,QAAQ,YAAY;AAAE,WAAO,wBAAwB,IAAI,CAAC,OAAK,SAAS,IAAI,QAAQ,KAAgB,CAAC;AAAA,EAAG;AACzJ,MAAI,UAAU,EAAE,KAAK,CAAC,IAAI,SAAS;AAAE,WAAO;AAAA,EAAI,WAC5C,UAAU,IAAI,OAAO,GAAG;AAAE,WAAO;AAAA,EAAI,WACrC,SAAS,EAAE,GAAG;AAAE,YAAS,cAAc,cAAe,IAAI,GAAG,EAAE;AAAA,EAAG,WAClE,OAAO,MAAM,YAAY,MAAM,MAAM;AAAE,WAAO,UAAU,EAAE;AAAA,EAAG,WAC7D,OAAO,MAAM,YAAY;AAAE,WAAO,SAAS,MAAK,EAAG,QAAQ,KAAgB;AAAA,EAAG;AAClF,MAAI,YAAY,EAAE,KAAK,MAAM,MAAM,OAAO,EAAE,EAAE;AAC9C,SAAO,SAAS,cAAc,QAAQ;AAC1C;AAQO,MAAM,WAAW,CAAC,IAAI,cAAyB;AAClD,SAAO,eAAe,IAAI,SAAS,KAAK,UAAU,EAAE;AACxD;AAGO,MAAM,WAAW,CAAC,IAAI,QAA0B,QAAgB,IAAI,cAA2B;AAClG,MAAI,UAAU,MAAM;AAAE,WAAQ,KAAK,QAAQ,SAAS,IAAI,KAAK,GAAG,MAAM,IAAI,SAAS;AAAA,EAAI;AACvF,MAAI,cAAc,WAAW,OAAQ,IAAY,SAAS,YAAY;AAAE,SAAK,GAAG,OAAM;AAAA,EAAG;AACzF,MAAI,cAAc,WAAW,OAAQ,IAAY,QAAQ,YAAY;AAAE,WAAO,wBAAwB,IAAI,CAAC,OAAK,QAAQ,IAAI,QAAQ,OAAO,SAAS,CAAC;AAAA,EAAG;AACxJ,MAAI,UAAU,EAAE,KAAK,CAAC,IAAI,SAAS;AAAE,WAAO;AAAA,EAAI,WAC5C,UAAU,IAAI,OAAO,GAAG;AAAE,WAAO,eAAe,IAAI,SAAS;AAAA,EAAG,WAChE,SAAS,EAAE,GAAG;AAAE,YAAS,cAAc,cAAe,IAAI,GAAG,EAAE,GAAG;AAAA,EAAS,WAC3E,OAAO,MAAM,YAAY,MAAM,MAAM;AAAE,WAAO,UAAU,EAAE;AAAA,EAAG,WAC7D,OAAO,MAAM,YAAY;AAAE,WAAO,QAAQ,MAAK,EAAG,QAAQ,OAAO,SAAS;AAAA,EAAG,WAC7E,YAAY,EAAE,KAAK,MAAM,MAAM,OAAO,EAAE,EAAE;AAC9C,SAAO,SAAS,cAAc,QAAQ;AAC1C;AAGA,MAAM,mBAAmB,CAAC,OAAU;AAChC,UAAQ,OAAO,MAAM,YAAY,OAAO,MAAM,cAAc,OAAO,MAAM,aAAa,MAAM;AAChG;AAGA,MAAM,kCAAkB,SAAa;AACrC,MAAM,YAAY,CAAC,IAAI,QAA0B,QAAgB,IAAI,cAAyB;AAC1F,MAAI,cAAc,WAAW,OAAQ,IAAY,SAAS,YAAY;AAAE,SAAK,GAAG,OAAM;AAAA,EAAG;AACzF,MAAI,cAAc,WAAW,OAAQ,IAAY,QAAQ,YAAY;AAAE,WAAO,wBAAwB,IAAI,CAAC,OAAK,UAAU,IAAI,QAAQ,OAAO,SAAS,CAAC;AAAA,EAAG;AAC1J,MAAI,iBAAiB,EAAE,KAAK,CAAC,UAAU,EAAE,GAAG;AACxC,QAAI,MAAM,IAAI,EAAE,GAAG;AACf,YAAM,MAAW,UAAU,EAAE,KAAK,SAAS,IAAI,QAAQ,KAAgB;AACvE,aAAO,SAAS,eAAe,UAAU,KAAK,SAAQ,GAAI,KAAK,SAAS;AAAA,IAC5E;AACA,UAAM,QAAQ,SAAS,IAAI,QAAQ,KAAgB;AACnD,QAAI,CAAC,UAAU,SAAS,QAAQ,SAAS,MAAM,iBAAiB,EAAE,KAAK,CAAC,UAAU,EAAE,GAAG;AAAE,YAAM,IAAI,IAAI,KAAK;AAAA,IAAG;AAC/G,WAAO,SAAS,OAAO,SAAS;AAAA,EACpC;AACA,SAAO,SAAS,IAAI,QAAQ,OAAO,SAAS;AAChD;AAGO,MAAM,UAAU,CAAC,IAAI,QAA0B,QAAgB,IAAI,cAA2B;AACjG,MAAI,iBAAiB,EAAE,KAAK,YAAY,IAAI,EAAE,GAAG;AAAE,WAAO,UAAU,EAAE,KAAK,UAAU,EAAE;AAAA,EAAG;AAC1F,MAAI,iBAAiB,EAAE,GAAG,YAAY,IAAI,EAAE;AAAG,QAAM,SAAS,UAAU,IAAI,QAAQ,OAAO,SAAS;AACpG,MAAI,iBAAiB,EAAE,GAAG,YAAY,OAAO,EAAE;AAAG,SAAO;AAC7D;AAQA,MAAM,yBAAyB,CAAC,QAAa,OAAY,QAAgB,OAAO;AAC5E,MAAI,UAAU,KAAK,KAAK,SAAS,QAAQ,OAAO,cAAc,QAAQ;AAClE,QAAI,OAAO,UAAU,KAAK,KAAK,SAAS,KAAK,QAAQ,QAAQ,YAAY,QAAQ;AAC7E,cAAQ,eAAe,OAAO,QAAQ,aAAa,KAAK,CAAC;AAAA,IAC7D,OAAO;AACH,cAAQ,SAAS,KAAK;AAAA,IAC1B;AAAA,EACJ;AACJ;AAGO,MAAM,YAAY,CAAC,QAAa,OAAY,QAAgB,OAAO;AACtE,MAAI,CAAC,UAAU,KAAK,KAAK,UAAU,SAAS,OAAO,cAAc,QAAQ;AACzE,UAAS,OAAe,YAAY,oBAAoB,OAAO,MAAM,IAAI;AACzE,MAAI,CAAC,OAAO,cAAc,UAAU,KAAK,GAAG;AAAE,2BAAuB,QAAQ,OAAO,KAAK;AAAG;AAAA,EAAQ;AACpG,MAAI,QAAQ,cAAc,OAAO,YAAY;AAAE;AAAA,EAAQ;AACvD,MAAI,UAAU,KAAK,GAAG;AAAE,2BAAuB,QAAQ,OAAO,KAAK;AAAA,EAAG;AAC1E;AAGA,MAAM6D,SAAA,GAAU,CAAC,aAAW;AACxB,MAAI,oBAAoB,OAAO,oBAAoB,KAAK;AACpD,eAAW,MAAM,KAAK,UAAU,UAAU;AAAA,EAC9C;AACA,SAAO;AACX;AAGO,MAAM,cAAc,CAAC,QAAa,UAAiB,QAA0B,QAAgB,OAAO;AACvG,QAAM,MAAM,UAAU,UAAU;AAChC,MAAI,MAAM,QAAQ,OAAO,QAAQ,CAAC,KAAK,oBAAoB,OAAO,oBAAoB,KAAK;AACvF,UAAM,OAAOA,SAAA,CAAQ,QAAQ,GAAG,MAAM,CAAC,IAAI,MAAc,QAAQ,IAAI,QAAQ,GAAG,MAAM,CAAC,GAAG,SAAS,CAAC,OAAO,MAAM,IAAI;AACrH,UAAM,OAAO,SAAS,wBAAuB;AAC7C,UAAM,UAAU,CAAC,OAAK,UAAU,MAAM,EAAE,CAAC;AACzC,cAAU,QAAQ,MAAM,KAAK;AAAA,EACjC,OAAO;AACH,UAAM,OAAO,QAAQ,UAAU,QAAQ,KAAK,MAAM;AAClD,QAAI,QAAQ,MAAM;AAAE,gBAAU,QAAQ,MAAM,KAAK;AAAA,IAAG;AAAA,EACxD;AACJ;AAGO,MAAM,cAAc,CAAC,SAAS,IAAI,QAA0B,QAAgB,OAAO;AACtF,MAAI,UAAU,MAAM;AAAE,SAAK,SAAS,IAAI,KAAK;AAAA,EAAG;AAGhD,MAAI,IAAI,YAAY,MAAM,QAAQ,OAAO,IAAI,QAAQ,CAAC,MAAM,KAAK,QAAQ,KAAK,KAAK,OAAO,IAAI;AAC1F,gBAAY,SAAS,IAAI,UAAU,MAAM,KAAK;AAAA,EAClD,OAAO;AACH,gBAAY,SAAS,IAAI,MAAM,KAAK;AAAA,EACxC;AACJ;AAKO,MAAM,gBAAgB,CAAC,QAAQ,MAAM,QAAgB,OAAK;AAC7D,MAAI,CAAC,QAAQ,OAAO;AACpB,MAAI,MAAM,cAAc,UAAU,MAAM,cAAc,MAAM;AACxD,WAAO;AAAA,EACX,WACI,MAAM,cAAc,UAAU,CAAC7D,eAAA,CAAc,MAAM,UAAU,GAAG;AAChE,QAAI,OAAO,UAAU,KAAK,KAAK,SAAS,KAAK,MAAM,KAAK,QAAQ,cAAc,EAAE,GAAG,SAAS,OAAO;AAC/F,aAAO,OAAO,aAAa,KAAK;AAAA,IACpC;AAAA,EACJ;AACA,SAAO;AACX;AAGO,MAAM,gBAAgB,CAAC,QAAQ,OAAO,UAAU;AACnD,MAAI,OAAO,YAAY;AACnB,QAAI,OAAO,cAAc,OAAO,YAAY;AACxC,eAAS,OAAO,cAAc;AAC9B,UAAI,MAAM,gBAAgB,OAAO;AAAE,eAAO,aAAa,OAAO,KAAK;AAAA,MAAG,WAClE,MAAM,gBAAgB,OAAO;AAAE,eAAO,aAAa,OAAO,KAAK;AAAA,MAAG,OACtE;AACI,cAAM,wBAAwB,MAAM;AACpC,eAAO,aAAa,OAAO,KAAK;AAChC,eAAO,aAAa,OAAO,qBAAqB;AAAA,MACpD;AAAA,IACJ,OAAO;AACH,aAAO,cAAc,KAAK;AAAA,IAC9B;AAAA,EACJ;AACJ;AAKO,MAAM,kBAAkB,CAAC,SAAS,IAAI,QAA0B,QAAgB,IAAI,QAAmB;AAC1G,MAAI,UAAU,MAAM;AAAE,SAAK,SAAS,IAAI,KAAK;AAAA,EAAG;AAAG,MAAI,CAAC,SAAS,UAAU,KAAK;AAChF,QAAM,KAAK,cAAc,SAAS,QAAQ,KAAK,QAAQ,KAAK,GAAG,KAAK;AACpE,MAAI,cAAc,QAAQ,OAAO,MAAM,UAAU;AAAE,OAAG,cAAc;AAAA,EAAI,WACpE,MAAM,MAAM;AACZ,UAAM,OAAO,QAAQ,EAAE;AAEvB,QAAI,IAAI,cAAc,WAAW,MAAM,SAAS,cAAc,QAAQ,gBAAgB,OAAO;AACzF,UAAI,IAAI,eAAe,MAAM,aAAa;AAAE,WAAG,cAAc,MAAM,aAAa,QAAO,IAAK;AAAA,MAAI;AAAA,IACpG,WACI,IAAI,cAAc,WAAW,MAAM,QAAQ,MAAM,QAAQ,IAAI,cAAc,MAAM;AACjF,oBAAc,SAAS,IAAI,IAAI;AAAA,IACnC,WACI,IAAI,cAAc,WAAW,IAAI,cAAc,MAAM;AACrD,kBAAY,SAAS,MAAM,MAAM,KAAK;AAAA,IAC1C;AAAA,EACJ;AACJ;AAWO,MAAM,cAAc,CAAC,SAAS,IAAI,QAA0B,QAAgB,OAAO;AACtF,QAAM,QAAQ,QAAQ,IAAI,MAAM;AAChC,MAAI,CAAC,SAAS,UAAU,OAAO;AAC/B,MAAI,MAAM,KAAK,SAAS,cAAc,EAAE,GAAG,SAAS,GAAG;AACvD,QAAM,eAAe,cAAc,SAAS,OAAO,KAAK;AACxD,MAAI,cAAc,cAAc,SAAS,cAAc,UAAS;AAChE,SAAO;AACX;AAGO,MAAM,kBAAkB,CAAC,SAAS,UAAU,WAA6B;AAC5E,QAAM,OAAO,MAAM,KAAK,OAAO,QAAQ,KAAK,EAAE,GAAG,MAAM,CAAC,IAAI,UAAU,QAAQ,IAAI,QAAQ,KAAK,CAAC;AAChG,QAAM,KAAK,QAAQ,UAAU,EAAE,QAAQ,CAAC,OAAY;AAAE,QAAI,CAAC,MAAM,OAAO,CAAC,OAAQ,CAAC,aAAa,IAAI,EAAE,CAAE,GAAG,IAAI,UAAS;AAAA,EAAG,CAAC;AAC3H,SAAO;AACX;AAGO,MAAM,IAAI,CAAC,QAAQ;AACtB,MAAI,YAAY,GAAG,KAAK,OAAO,MAAM;AAAE,WAAO,SAAS,eAAe,GAAG;AAAA,EAAG;AAC5E,MAAI,OAAO,MAAM,OAAO,SAAS,cAAc,QAAQ;AAGvD,SAAO,MAAM,oBAAoB,KAAK,MAAM;AACxC,UAAM,UAAU,SAAS,iBAAiB,SAAS,GAAG,IAAI,KAAK,QAAQ,QAAQ,KAAK,QAAO,IAAK,EAAE;AAElG,aAAS,CAAC,KAAK,OAAO,GAAG,CAAC,QAAQ;AAC9B,YAAM,YAAY,MAAM,KAAK,aAAa,KAAK,eAAe,KAAK,SAAS,OAAO;AACnF,MAAC,QAAQ,cAAc,WAAW,QAAO,IAAK;AAAA,IAClD,CAAC;AACD,WAAO;AAAA,EACX,CAAC;AACL;;ACvQA,MAAM,UAAU,CAAC,aAAW;AACxB,MAAI,oBAAoB,OAAO,oBAAoB,KAAK;AACpD,eAAW,MAAM,KAAK,UAAU,UAAU;AAAA,EAC9C;AACA,SAAO;AACX;AAGA,MAAM,GAAG;AAAA,EACL;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,WAAgB;AAAA,EAChB,YAAiB;AAAA,EACjB,WAA0B,EAAC;AAAA,EAC3B,QAAQ,SAAS,cAAc,EAAE;AAAA;AAAA,EAGjC,gCAA+B,KAAI;AAAA;AAAA,EAGnC,eAA4B;AAAA;AAAA,EAG5B,YAAY,cAA2B,MAAM;AACzC,QAAI,aAAa;AACb,WAAK,aAAY;AAAG,WAAK,YAAY;AAAM,WAAK,WAAW;AAC3D,WAAK,aAAa,YAAY,aAAa,KAAK,OAAO,KAAK,IAAI,GAAG,MAAM,QAAQ,KAAK,WAAW,CAAC;AAClG,WAAK,cAAc,WAAW,KAAK,aAAa,KAAK,UAAU,KAAK,IAAI,CAAC;AAAA,IAC7E;AAAA,EACJ;AAAA;AAAA,EAGA,IAAI,cAAc;AACd,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA,EAGA,IAAI,YAAY,OAAoB;AAChC,QAAI,iBAAiB,eAAeA,eAAA,CAAc,KAAK,KAAK,SAAS,KAAK,cAAc;AACpF,WAAK,eAAe;AAAO,WAAK,YAAY,KAAK;AAAG,MAAgB,KAAK;AAAA,IAE7E;AAAA,EACJ;AAAA;AAAA,EAGA,YAAY,YAAY,QAAa,CAAC,OAAO,IAAI;AAAA;AAAA,IAA6I;AAAA,KAAM;AAEhM,QAAIgE,cAAA,CAAa,KAAK,OAAO,OAAO,cAAc,cAAc,OAAO,cAAc,aAAa,CAACA,cAAA,CAAa,UAAU,IAAI;AAC1H,OAAC,YAAY,KAAK,IAAI,CAAC,OAAO,UAAU;AAAA,IAC5C;AAGA,QAAI,CAAC,YAAY,SAAS,QAAQ,OAAO,SAAS,aAAa,CAACA,cAAA,CAAa,KAAK,GAAG;AACjF,gBAAU;AAAA,IACd;AAGA,SAAK,QAAQ,SAAS,cAAc,EAAE;AACtC,SAAK,6BAAa,SAAQ;AAC1B,SAAK,6BAAa,KAAc;AAChC,SAAK,UAAU,SAAS,OAAQ,OAAO,SAAS,aAAa,QAAS,OAAO,SAAS,WAAW,OAAO,SAAS,OAAS,UAAU,CAAC,OAAO;AAC5I,SAAK,eAAeA,cAAA,CAAa,UAAU,IAAI,aAAc,YAAY,YAAY,OAAO,YAAY,eAAgB,EAAC;AACzH,SAAK,aAAa,SAAS,wBAAuB;AAGlD,UAAM,eAAe,EAAE,kCAAkC,MAAM,kBAAkB,MAAM,QAAQ,MAAK;AACpG,UAAM,eAAehE,eAAA,CAAc,OAAc,IAAI,OAAQ,YAAmC,EAAC;AACjG,SAAK,WAAW,OAAO,OAAO,cAAc,WAAW;AAGvD,SAAK,cAAcA,gBAAc,KAAK,UAAU,WAAkB,MAAMA,eAAA,CAAc,OAAc,KAAK;AACzG,QAAI,CAAC,KAAK,aAAa;AACnB,UAAI,KAAK,SAAS,QAAQ;AACtB;AAAA,UACI,KAAK;AAAA,UAAY,KAAK;AAAA,UACtB,KAAK,OAAO,KAAK,IAAI;AAAA,SACzB;AACA,YAAI,KAAK,WAAW,WAAW,WAAW,GAAG;AACzC,eAAK,WAAW,YAAY,KAAK,KAAK;AAAA,QAC1C;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AAAA;AAAA,EAGA,KAAK,OAAO,IAAI;AAAE,WAAO;AAAA,EAAM;AAAA;AAAA,EAG/B,0BAA0B,WAAgB;AACtC,YAAQ,IAAI,MAAM;AACd,YAAM,UAAU,QAAQ,KAAK,cAAc,CAAC,GAAG,KAAK,OAAO,KAAK,IAAI,GAAG,CAAC;AACxE,UAAI,CAAC,WAAW,CAAC,aAAa,SAAS,WAAW,SAAS,KAAK,aAAa,SAAS;AAClF;AAAA,MACJ;AACA,UAAI,qBAAqB,eAAeA,eAAA,CAAc,SAAS,GAAG;AAC9D,YAAI,MAAM,KAAK,WAAW,QAAQ,EAAE,KAAK,CAAC,SAAS,SAAS,OAAO,GAAG;AAClE,eAAK,cAAc;AAAA,QACvB,OAAO;AACH,gBAAM,WAAW,IAAI,iBAAiB,CAAC,YAAY;AAC/C,uBAAW,UAAU,SAAS;AAC1B,kBAAI,OAAO,SAAS,aAAa;AAC7B,oBAAI,OAAO,WAAW,SAAS,GAAG;AAC9B,wBAAM,gBAAgB,MAAM,KAAM,OAAO,cAAsB,EAAE,EAAE,KAAK,CAAC,SAAS,SAAS,OAAO;AAClG,sBAAI,eAAe;AACf,yBAAK,cAAc;AACnB,6BAAS,YAAW;AAAA,kBACxB;AAAA,gBACJ;AAAA,cACJ;AAAA,YACJ;AAAA,UACJ,CAAC;AACD,mBAAS,QAAQ,WAAW,EAAE,WAAW,MAAM;AAAA,QACnD;AAAA,MACJ;AAAA,IACJ,CAAC,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AAGtC,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA,EAGA,IAAI,WAAW;AAAE,WAAO,QAAQ,KAAK,WAAW;AAAA,EAAG;AAAA;AAAA,EAGnD,IAAI,OAAqD;AACrD,UAAM,aAAa,QAAQ,KAAK,cAAc,CAAC,GAAG,KAAK,OAAO,KAAK,IAAI,GAAG,CAAC;AAC3E,UAAM,cAAcA,eAAA,CAAc,YAAY,aAAa,IAAI,YAAY,gBAAgB,KAAK;AAChG,SAAK,gBAAgBA,eAAA,CAAc,WAAW,KAAK,KAAK;AAGxD,mBAAe,MAAM;AACjB,YAAM8D,eAAc9D,eAAA,CAAc,YAAY,aAAa,IAAI,YAAY,gBAAgB,KAAK;AAChG,WAAK,gBAAgBA,eAAA,CAAc8D,YAAW,KAAK,KAAK;AAAA,IAC5D,CAAC;AAGD,WAAQ,eAAe,KAAK,eAAgB;AAAA,MACxC,KAAK;AAAA,MAAY,KAAK;AAAA,MACtB,KAAK,OAAO,KAAK,IAAI;AAAA,KACzB;AAAA,EACJ;AAAA;AAAA,EAGA,IAAI,UAAwD;AACxD,UAAM,WAAW,KAAK,YAAY,YAAY,SAAS,IAAI,KAAK,aAAa,QAAQ,KAAK,cAAc,CAAC,GAAG,KAAK,OAAO,KAAK,IAAI,GAAG,CAAC;AACrI,UAAM,cAAc9D,eAAA,CAAc,UAAU,aAAa,IAAI,UAAU,gBAAgB,KAAK;AAC5F,SAAK,gBAAgBA,eAAA,CAAc,WAAW,KAAK,KAAK;AAGxD,mBAAe,MAAM;AACjB,YAAM8D,eAAc9D,eAAA,CAAc,UAAU,aAAa,IAAI,UAAU,gBAAgB,KAAK;AAC5F,WAAK,gBAAgBA,eAAA,CAAc8D,YAAW,KAAK,KAAK;AAAA,IAC5D,CAAC;AAGD,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,IAAI,SAAS;AACT,WAAO,IAAI,SAAS;AAChB,UAAI,OAAO,CAAC,KAAK,MAAM;AAAE,eAAO;AAAA,MAAM;AAGtC,UAAI,OAAO,CAAC,aAAa,MAAM;AAAE,eAAO,OAAO,CAAC;AAAA,MAAG;AAGnD,UAAI,OAAO,CAAC,aAAa,WAAW,OAAQ,OAAO,CAAC,GAAW,QAAQ,YAAY;AAAE,eAAO;AAAA,MAAM;AAGlG,WACK,OAAO,CAAC,KAAK,QAAQ,OAAO,CAAC,IAAI,MAAM,OAAO,OAAO,CAAC,KAAK,YAAY,CAAC,aAAa,OAAO,CAAC,CAAQ,QACrG,MAAM,QAAQ,KAAK,WAAW,KAAO,KAAK,uBAA+B,MAC5E;AAAE;AAAA,MAAQ;AAGZ,UAAI,OAAO,CAAC,KAAK,SAAS,OAAO,OAAO,CAAC,KAAK,YAAY,OAAO,OAAO,CAAC,KAAK,cAAc,OAAO,OAAO,CAAC,KAAK,WAC5G;AAAE,eAAO,KAAK,OAAO,YAAY,OAAO,CAAC,GAAG,KAAK,OAAO,GAAG,IAAI,CAAC;AAAA,MAAG;AAGvE,UAAI,OAAO,CAAC,KAAK,QAAQ,KAAK,uBAAuB,KACjD;AAAE,eAAO,KAAK,OAAO,YAAY,OAAO,CAAC,GAAG,KAAK,OAAO,GAAG,IAAI,CAAC;AAAA,MAAG;AAGvE,UAAI,OAAO,CAAC,KAAK,QAAQ,KAAK,uBAAuB,KAAK;AAEtD,YAAI,OAAO,OAAO,CAAC,KAAK,YAAY,OAAO,OAAO,CAAC,KAAK,cAAc,OAAO,OAAO,CAAC,KAAK,UACtF;AAAE,iBAAO,KAAK,OAAO,YAAY,OAAO,CAAC,GAAG,KAAK,OAAO,GAAG,IAAI,CAAC;AAAA,QAAG,WAEnE,OAAO,OAAO,CAAC,KAAK,YAAY,OAAO,OAAO,CAAC,KAAK,cAAc,OAAO,OAAO,CAAC,KAAK,UACtF;AAAE,iBAAO,KAAK,OAAO,YAAY,OAAO,CAAC,GAAG,KAAK,OAAO,GAAG,IAAI,CAAC;AAAA,QAAG,OACnE;AAAE,iBAAO,KAAK,OAAO,YAAY,OAAO,CAAC,GAAG,KAAK,OAAO,GAAG,IAAI,CAAC;AAAA,QAAG;AAAA,MAC3E;AAGA,UAAI,OAAO,CAAC,KAAK,MAAM;AACnB,YAAI,KAAK,UAAU,oBAAoB,YAAY,OAAO,CAAC,CAAC,GACxD;AAAE,iBAAO,KAAK,OAAO,YAAY,OAAO,CAAC,GAAG,KAAK,OAAO,GAAG,IAAI,CAAC;AAAA,QAAG,OACnE;AAAE,iBAAO,KAAK,OAAO,GAAG,IAAI;AAAA,QAAG;AAAA,MACvC;AAAA,IACJ;AAAA,EACJ;AAAA;AAAA,EAGA,UAAU,OAAO,KAAK,OAAO,KAAoB,IAAI;AAEjD,QAAI,MAAM,UAAW,SAAS,QAAQ,SAAS,MAAO;AAClD,UAAI,KAAK,UAAU,IAAI,GAAG,GAAG;AAAE;AAAA,MAAQ;AACvC,YAAM,WAAW,IAAI,KAAK,aAAa,GAAG;AAC1C,YAAM,cAAc,EAAE,UAAU,IAAI,SAAS;AACzC,YAAI,OAAO,CAAC,KAAK,QAAQ,OAAO,CAAC,IAAI,GAAG;AAAE,eAAK,CAAC,IAAI,OAAO,OAAO,CAAC;AAAA,QAAG;AACtE,eAAO,KAAK,OAAO,GAAG,IAAI;AAAA,MAC9B,CAAC;AACD,WAAK,UAAU,IAAI,KAAK,WAAW;AACnC,kBAAY,KAAK,aAAa,aAAa,MAAM,GAAG;AAAA,IACxD;AAGA,QAAI,MAAM,aAAc,SAAS,QAAQ,SAAS,MAAO;AACrD,YAAM,cAAc,KAAK,UAAU,IAAI,GAAG;AAC1C,UAAI,aAAa;AAAE,oBAAY,KAAK,aAAa,aAAa,MAAM,GAAG;AAAA,MAAG;AAC1E,WAAK,UAAU,OAAO,GAAG;AAAA,IAC7B;AAAA,EACJ;AAAA;AAAA,EAGA,EAAE,OAAO,QAAQ,IAAI;AACjB,QAAI,IAAE;AACN,QAAI,KAAK,aAAa;AAClB,eAAS,MAAM,KAAK,aAChB;AAAE,cAAM,KAAK,OAAO,IAAI,GAAG;AAAA,MAAG;AAAA,IACtC;AACA;AAAA,EACJ;AACJ;AAGO,MAAM,IAAI,CAAC,YAAY,OAAQ,cAA2C,SAAS;AACtF,SAAO,IAAI,GAAG,YAAY,OAAO,WAAW;AAChD;;AC9NO,MAAM,KAAK,CAAC,KAAK,OAAO,SAAS,oBAAkB;AACtD,MAAI,KAAK,SAAS,MAAM;AAAE,WAAO,EAAE,KAAK,IAAI;AAAA,EAAG;AAC/C,QAAM,SAAS,EAAE,KAAK,OAAO,IAAI;AACjC,WAAS,KAAK,CAAC,OAAO,SAAO,QAAQ,gBAAgB,KAAK,CAAC;AAC3D,SAAO;AACX;AAGO,MAAM,iBAAiB,CAAC,aAAgF;AAC3G,MAAI,OAAO,YAAY,UAAU;AAC7B,UAAM,KAAK,GAAG,qBAAqB,QAAQ,CAAC;AAC5C,WAAO,IAAI,WAAW;AAAA,EAC1B,WAAW,oBAAoB,eAAe,oBAAoB,WAAW,oBAAoB,oBAAoB,oBAAoB,YAAY,oBAAoB,MAAM;AAC3K,WAAO;AAAA,EACX,OAAO;AACH,WAAO;AAAA,EACX;AACJ;AAGO,MAAM,IAAI,CAAC,UAA+E,SAAiB,IAAI,aAA8B;AAChJ,QAAM,UAAU,QAAQ,OAAO,YAAY,WAAW,eAAe,QAAQ,IAAI,UAAU,MAAM,EAAE;AACnG,MAAI,WAAW,UAAU;AAAE,MAAE,UAAU,CAAC,OAAK,IAAI,OAAO;AAAA,EAA2C;AACnG,MAAI,WAAW,QAAQ;AACnB,QAAI,OAAO,SAAS,MAAM,mBAAmB,SAAS,OAAO,KAAK;AAClE,QAAI,OAAO,cAAc,MAAM,kBAAkB,SAAS,OAAO,UAAU;AAC3E,QAAI,OAAO,cAAc,MAAM,kBAAkB,SAAS,OAAO,UAAU;AAC3E,QAAI,OAAO,aAAa,MAAM,iBAAiB,SAAS,OAAO,SAAS;AACxE,QAAI,OAAO,aAAa,MAAM,iBAAiB,SAAS,OAAO,SAAS;AACxE,QAAI,OAAO,WAAW,MAAM,eAAe,SAAS,OAAO,OAAO;AAClE,QAAI,OAAO,UAAU,MAAM,cAAc,SAAS,OAAO,MAAM;AAC/D,QAAI,OAAO,UAAU,MAAM,cAAc,SAAS,OAAO,MAAM;AAC/D,QAAI,OAAO,SAAS,MAAM,cAAc,SAAS,OAAO,KAAK;AAC7D,QAAI,OAAO,QAAQ,MAAM,YAAY,SAAS,OAAO,IAAI;AAGzD,QAAI,OAAO,MAAM,MAAM,SAAS,SAAS,MAAM,OAAO,IAAI,iBAAiB,QAAQ,IAAI;AACvF,QAAI,OAAO,QAAQ,MAAM,SAAS,SAAS,QAAQ,OAAO,MAAM,gBAAgB,MAAM;AACtF,QAAI,OAAO,QAAQ,MAAM,SAAS,SAAS,QAAQ,OAAO,MAAM,gBAAgB,MAAM;AACtF,QAAI,OAAO,QAAQ,MAAM,SAAS,SAAS,QAAQ,OAAO,MAAM,iBAAiB,QAAQ,IAAI;AAC7F,QAAI,OAAO,QAAQ,MAAM,SAAS,SAAS,QAAQ,OAAO,MAAM,iBAAiB,QAAQ,IAAI;AAC7F,QAAI,OAAO,QAAQ,MAAM,SAAS,SAAS,QAAQ,OAAO,MAAM,iBAAiB,QAAQ,IAAI;AAC7F,QAAI,OAAO,QAAQ,MAAM,SAAS,SAAS,QAAQ,OAAO,MAAM,iBAAiB,QAAQ,IAAI;AAC7F,QAAI,OAAO,SAAS,MAAM,SAAS,SAAS,SAAS,OAAO,OAAO,iBAAiB,QAAQ,IAAI;AAChG,QAAI,OAAO,UAAU,MAAM,SAAS,SAAS,UAAU,OAAO,WAAW,OAAO,QAAQ,cAAc,MAAM;AAC5G,QAAI,OAAO,MAAM,MAAM,cAAc,SAAS,OAAO,EAAE;AAGvD,QAAI,OAAO,SAAS,MAAM,OAAO,MAAM,UAAU,CAAC,SAAS,sBAAsB,SAAS,IAAI,CAAC;AAAA,EACnG;AACA,SAAO,EAAE,OAAO;AACpB;;ACtFO,SAAS,iBAAiB,MAAc,WAAW,GAAW;AACjE,MAAI,MAAM;AACV,WAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AAClC,UAAM,KAAK,KAAK,CAAC;AACjB,QAAI,OAAO,KAAK,OAAO;AAAA,aACd,OAAO,KAAM,OAAO,WAAY,MAAM;AAAA,SAC1C;AAAA,EACT;AACA,SAAO;AACX;AAGO,SAAS,mBAAmB,MAAc,SAAiB,WAAW,GAAW;AACpF,MAAI,MAAM,GAAG,IAAI;AACjB,SAAO,IAAI,KAAK,UAAU,MAAM,SAAS;AACrC,UAAM,KAAK,KAAK,CAAC;AACjB,QAAI,OAAO,KAAK;AAAE,aAAO;AAAG;AAAA,IAAK,WACxB,OAAO,KAAM;AAAE,aAAO,WAAY,MAAM;AAAW;AAAA,IAAK,OAC5D;AAAA,EACT;AACA,SAAO,KAAK,MAAM,CAAC;AACvB;AAGO,SAAS,QAAQ,GAAmB;AACvC,MAAI,EAAE,SAAS,MAAM,GAAG,OAAO;AAC/B,MAAI,EAAE,SAAS,IAAI,GAAG,OAAO;AAC7B,SAAO;AACX;AAGO,SAAS,IAAI,GAAW,GAAmB;AAC9C,MAAI,KAAK,IAAI,CAAC;AAAG,MAAI,KAAK,IAAI,CAAC;AAC/B,SAAO,IAAI,GAAG,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;AAC5B,SAAO;AACX;AAGO,SAAS,iBACZ,MACA,EAAE,kBAAkB,MAAM,WAAW,GAAE,GAAI,EAAC,EACqB;AACjE,QAAM,QAAQ,KAAK,MAAM,YAAY;AACrC,QAAM,QAAQ,kBAAkB,IAAI;AAEpC,QAAM,UAAoB,EAAC;AAC3B,WAAS,IAAI,OAAO,IAAI,MAAM,QAAQ,KAAK;AACvC,UAAM,KAAK,MAAM,CAAC;AAClB,QAAI,GAAG,MAAK,KAAM,IAAI;AACtB,YAAQ,KAAK,iBAAiB,IAAI,QAAQ,CAAC;AAAA,EAC/C;AACA,MAAI,QAAQ,WAAW,GAAG,OAAO,EAAE,KAAK,GAAG,MAAM,GAAG,SAAS,MAAM,SAAS,MAAK;AAEjF,QAAM,MAAM,KAAK,IAAI,GAAG,OAAO;AAC/B,QAAM,UAAU,QAAQ,IAAI,OAAK,IAAI,GAAG,EAAE,OAAO,OAAK,IAAI,CAAC;AAC3D,MAAI,OAAO;AACX,aAAW,KAAK,SAAS,OAAO,OAAO,IAAI,MAAM,CAAC,IAAI;AAEtD,QAAM,UAAU,QAAQ,MAAM,OAAK,IAAI,MAAM,CAAC;AAC9C,QAAM,UAAU,QAAQ,MAAM,OAAK,IAAI,MAAM,CAAC;AAG9C,MAAI,SAAS,GAAG;AAEZ,WAAO,UAAU,IAAI,UAAU,IAAI;AAAA,EACvC,OAAO;AACH,QAAI,OAAO,MAAM,GAAG,OAAO;AAAA,aAClB,OAAO,MAAM,GAAG,OAAO;AAAA,SAC3B,OAAO;AAAA,EAChB;AAEA,SAAO,EAAE,KAAK,MAAM,SAAS,SAAQ;AACzC;AAGO,SAAS,mBACZ,MACA,MACA,OAAqC,SACrC,WAAW,GACL;AACN,MAAI,CAAC,QAAQ,QAAQ,GAAG,OAAO;AAC/B,QAAM,MAAM,iBAAiB,MAAM,QAAQ;AAC3C,MAAI,QAAQ,GAAG,OAAO;AACtB,MAAI;AACJ,MAAI,SAAS,WAAW,SAAS,KAAK,MAAM,MAAM,IAAI,IAAI;AAAA,WACjD,SAAS,QAAQ,SAAS,KAAK,KAAK,MAAM,IAAI,IAAI;AAAA,OACtD,SAAS,KAAK,MAAM,MAAM,IAAI,IAAI;AAEvC,QAAM,QAAQ,MAAM;AACpB,MAAI,QAAQ,GAAG;AAEX,WAAO,mBAAmB,MAAM,OAAO,QAAQ;AAAA,EACnD,WAAW,QAAQ,GAAG;AAElB,WAAO,IAAI,OAAO,CAAC,KAAK,IAAI;AAAA,EAChC;AACA,SAAO;AACX;AAGO,SAAS,4BACZ,MACA,EAAE,QAAQ,aAAkD,GAAI,EAAC,EAC3D;AACN,MAAI,CAAC,QAAQ,OAAO,SAAS,UAAU,OAAO;AAE9C,QAAM,2BAAW,IAAI;AAAA,IACjB;AAAA,IAAQ;AAAA,IAAQ;AAAA,IAAM;AAAA,IAAO;AAAA,IAAS;AAAA,IAAM;AAAA,IAAO;AAAA,IAAS;AAAA,IAAQ;AAAA,IACpE;AAAA,IAAS;AAAA,IAAU;AAAA,IAAS;AAAA,GAC/B;AAED,MAAI,MAAM;AACV,MAAI,IAAI;AACR,QAAM,IAAI,KAAK;AAEf,SAAO,IAAI,GAAG;AACV,UAAM,KAAK,KAAK,CAAC;AACjB,QAAI,OAAO,KAAK;AAAE,aAAO;AAAI;AAAK;AAAA,IAAU;AAG5C,QAAI,KAAK,WAAW,QAAQ,CAAC,GAAG;AAC5B,YAAM,MAAM,KAAK,QAAQ,OAAO,IAAI,CAAC;AACrC,UAAI,QAAQ,IAAI;AAAE,eAAO,KAAK,MAAM,CAAC;AAAG;AAAA,MAAO;AAC/C,aAAO,KAAK,MAAM,GAAG,MAAM,CAAC;AAC5B,UAAI,MAAM;AACV;AAAA,IACJ;AAEA,QAAI,KAAK,IAAI,CAAC,MAAM,OAAO,KAAK,IAAI,CAAC,MAAM,KAAK;AAC5C,YAAM,MAAM,KAAK,QAAQ,KAAK,IAAI,CAAC;AACnC,UAAI,QAAQ,IAAI;AAAE,eAAO,KAAK,MAAM,CAAC;AAAG;AAAA,MAAO;AAC/C,aAAO,KAAK,MAAM,GAAG,MAAM,CAAC;AAC5B,UAAI,MAAM;AACV;AAAA,IACJ;AAEA,QAAI,KAAK,IAAI,CAAC,MAAM,KAAK;AACrB,YAAM,MAAM,KAAK,QAAQ,KAAK,IAAI,CAAC;AACnC,UAAI,QAAQ,IAAI;AAAE,eAAO,KAAK,MAAM,CAAC;AAAG;AAAA,MAAO;AAC/C,aAAO,KAAK,MAAM,GAAG,MAAM,CAAC;AAC5B,UAAI,MAAM;AACV;AAAA,IACJ;AAGA,QAAI,IAAI,IAAI;AAEZ,WAAO,IAAI,KAAK,KAAK,KAAK,KAAK,CAAC,CAAC,GAAG;AACpC,UAAM,YAAY;AAClB,WAAO,IAAI,KAAK,gBAAgB,KAAK,KAAK,CAAC,CAAC,GAAG;AAC/C,UAAM,UAAU,KAAK,MAAM,WAAW,CAAC,EAAE,aAAY;AAErD,QAAI,IAAI;AACR,QAAI,QAA0B;AAC9B,WAAO,IAAI,GAAG;AACV,YAAM,IAAI,KAAK,CAAC;AAChB,UAAI,OAAO;AACP,YAAI,MAAM,OAAO,QAAQ;AACzB;AAAA,MACJ,OAAO;AACH,YAAI,MAAM,OAAO,MAAM,KAAK;AAAE,kBAAQ;AAAgB;AAAA,QAAK,WAClD,MAAM,KAAK;AAAE;AAAA,QAAO,OACxB;AAAE;AAAA,QAAK;AAAA,MAChB;AAAA,IACJ;AACA,QAAI,KAAK,GAAG;AAAE,aAAO,KAAK,MAAM,CAAC;AAAG;AAAA,IAAO;AAC3C,UAAM,SAAS,KAAK,MAAM,GAAG,IAAI,CAAC;AAElC,UAAM,kBACF,UAAU,SACT,UAAU,gBAAgB,YAAY,WACtC,UAAU,eAAe,KAAK,IAAI,OAAO;AAE9C,QAAI,CAAC,iBAAiB;AAClB,aAAO;AACP,UAAI,IAAI;AACR;AAAA,IACJ;AAGA,QAAI,MAAM;AACV,QAAI,IAAsB;AAC1B,QAAI,KAAK;AACT,aAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACpC,YAAM,IAAI,OAAO,CAAC;AAClB,UAAI,GAAG;AACH,eAAO;AACP,YAAI,MAAM,GAAG,IAAI;AACjB;AAAA,MACJ;AACA,UAAI,MAAM,OAAO,MAAM,KAAK;AAAE,YAAI;AAAgB,eAAO;AAAG,aAAK;AAAO;AAAA,MAAU;AAClF,UAAI,MAAM,QAAQ,MAAM,QAAQ,MAAM,OAAQ,MAAM,KAAK;AACrD,YAAI,CAAC,IAAI;AAAE,iBAAO;AAAK,eAAK;AAAA,QAAM;AAClC;AAAA,MACJ;AACA,aAAO;AACP,WAAK;AAAA,IACT;AAEA,UAAM,IAAI,QAAQ,iBAAiB,KAAK;AAExC,WAAO;AACP,QAAI,IAAI;AAAA,EACZ;AAEA,SAAO;AACX;AAGO,SAAS,gCACZ,MACA,EAAE,sBAAsB,MAAK,GAAI,EAAC,EAC5B;AACN,MAAI,CAAC,QAAQ,OAAO,SAAS,UAAU,OAAO;AAE9C,MAAI,CAAC,qBAAqB;AAEtB,WAAO,KAAK,QAAQ,UAAU,IAAI;AAAA,EACtC;AAGA,QAAM,OAAO;AAEb,MAAI,IAAI;AAKR,MAAI,EACC,QAAQ,wBAAwB,MAAM,IAAI,MAAM,EAChD,QAAQ,qBAAqB,MAAM,IAAI,GAAG,EAC1C,QAAQ,sBAAsB,IAAI,IAAI,MAAM;AAGjD,MAAI,EAAE,QAAQ,UAAU,IAAI;AAG5B,MAAI,EAAE,QAAQ,IAAI,OAAO,MAAM,GAAG,GAAG,GAAG;AAExC,SAAO;AACX;AAGO,SAAS,mCACZ,MACA;AAAA,EACI,kBAAkB;AAAA;AAAA,EAClB,kBAAkB;AAAA;AAAA,EAClB,WAAW;AAAA;AAAA,EACX,YAAY;AAAA;AAAA,EACZ,WAAW;AAAA;AACf,IAAI,EAAC,EACC;AACN,MAAI,CAAC,QAAQ,OAAO,SAAS,YAAY,KAAK,QAAQ,GAAG,MAAM,IAAI,OAAO;AAC1E,SAAO,MAAM,QAAO;AAGpB,QAAM,eAAyB,EAAC;AAChC,QAAM,gBAAgB,KAAK;AAAA,IACvB;AAAA,IACA,CAAC,MAAM;AACH,YAAM,IAAI,aAAa,KAAK,CAAC,IAAI;AACjC,aAAO,KAAS,CAAC;AAAA,IACrB;AAAA,GACJ;AAEA,QAAM,MAAM,QAAQ,aAAa;AACjC,QAAM,QAAQ,cAAc,MAAM,YAAY;AAC9C,QAAM,QAAQ,kBAAkB,IAAI;AAGpC,QAAM,EAAE,KAAK,MAAM,UAAS,GAAI,iBAAiB,eAAe,EAAE,iBAAiB,UAAU;AAG7F,MAAI,mBAAmB,MAAM,GAAG;AAC5B,aAAS,IAAI,OAAO,IAAI,MAAM,QAAQ,KAAK;AACvC,YAAM,KAAK,MAAM,CAAC;AAClB,UAAI,GAAG,MAAK,KAAM,IAAI;AACtB,YAAM,CAAC,IAAI,mBAAmB,IAAI,KAAK,QAAQ;AAAA,IACnD;AAAA,EACJ;AAGA,MAAI,OAAO,cAAc,SAAS,WAAW;AAC7C,MAAI,aAAa,UAAU,OAAO,GAAG;AACjC,aAAS,IAAI,OAAO,IAAI,MAAM,QAAQ,KAAK;AACvC,YAAM,KAAK,MAAM,CAAC;AAClB,UAAI,GAAG,MAAK,KAAM,IAAI;AACtB,YAAM,CAAC,IAAI,mBAAmB,IAAI,MAAM,UAAU,QAAQ;AAAA,IAC9D;AAAA,EACJ;AAGA,MAAI,UAAU,MAAM,KAAK,GAAG;AAG5B,YAAU,4BAA4B,SAAS,EAAE,OAAO,aAAa;AAGrE,YAAU,gCAAgC,OAAO;AAGjD,QAAM,UAAU,QAAQ,QAAQ,sBAAsB,CAAC,GAAG,MAAM,aAAa,CAAC,CAAC,CAAC;AAChF,SAAO,SAAS,QAAO;AAC3B;AAGO,SAAS,oBAAoB,iBAA2B,KAAe;AAC1E,QAAM,UAAU,MAAM,CAAC,KAAK;AAC5B,QAAM,MAAM,aAAa,QAAQ,OAAO;AAExC,MAAI,MAAM,GAAG;AACT,UAAM,OAAQ,KAAK,OAAO,EAAE,KAAK;AACjC,WAAO,0BAA0B,KAAK,IAAI,KAAK,CAAC,YAAY,KAAK,IAAI;AAAA,EACzE;AAGA,QAAM,SAAS,aAAa,MAAM,GAAG,MAAM,CAAC,EAAE,KAAK,EAAE;AACrD,MAAI,QAAQ,OAAO,WAAW,OAAO,WAAW;AAEhD,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACpC,UAAM,KAAK,OAAO,CAAC;AACnB,UAAM,OAAO,OAAO,IAAI,CAAC,KAAK;AAE9B,QAAI,CAAC,OAAO;AACR,UAAI,OAAO,KAAK;AAEZ,YAAI,eAAe,KAAK,IAAI,GAAG;AAC3B,kBAAQ;AAAM,qBAAW;AAAO,qBAAW;AAAA,QAC/C;AAAA,MACJ;AACA;AAAA,IACJ;AAEA,QAAI,CAAC,YAAY,CAAC,UAAU;AACxB,UAAI,OAAO,KAAK;AAAE,mBAAW;AAAM;AAAA,MAAU;AAC7C,UAAI,OAAO,KAAK;AAAE,mBAAW;AAAM;AAAA,MAAU;AAC7C,UAAI,OAAO,KAAK;AAAE,gBAAQ;AAAO;AAAA,MAAU;AAAA,IAC/C,WAAW,UAAU;AACjB,UAAI,OAAO,KAAK;AAAE,mBAAW;AAAO;AAAA,MAAU;AAAA,IAClD,WAAW,UAAU;AACjB,UAAI,OAAO,KAAK;AAAE,mBAAW;AAAO;AAAA,MAAU;AAAA,IAClD;AAAA,EACJ;AAEA,SAAO;AACX;;ACrVA,MAAM,uBAAO,IAAI,SAAQ,EAAG,WAAW,CAAC,QAAQ;AAAE,QAAM,QAAQ,IAAI,MAAM,oEAAoE;AAAG,MAAI,CAAC,OAAO,OAAO,EAAE,KAAK,KAAK,IAAI,MAAM,WAAW,MAAK;AAAG,QAAM,GAAG,MAAM,OAAO,IAAI,QAAQ,IAAI;AAAO,QAAM,YAAY,WAAW,SAAS,QAAQ,OAAO,GAAG,EAAE,MAAK,GAAI;AAAM,SAAO,EAAE,KAAK,IAAI,WAAU;AAAG;AAIlW,MAAM,aAAa,CAAC,UAAuC;AACvD,MAAI,OAAO,SAAS,YAAY,CAAC,OAAO,UAAU,OAAO;AACzD,QAAM,QAAQ,MAAM,MAAM,YAAY;AACtC,SAAO,QAAQ,SAAS,QAAQ,CAAC,KAAK,IAAI,IAAI;AAClD;AAGA,MAAM,iBAAiB,CAAC,IAAwB,KAAY,KAAY,WAAsC;AAC1G,MAAI,CAAC,IAAI,OAAO;AAChB,MAAI,MAAM,MAAM;AACZ,UAAM,aAAiC,EAAC;AACxC,UAAM,mBAAmB,CAAC,SAAgC;AACtD,YAAM,OAAO,MAAM,KAAK,IAAI,cAAc,EAAE,EAAE,KAAK,CAACG,UAAUA,MAAK,QAAQ,QAAQA,MAAK,OAAO,WAAW,IAAI,CAAE;AAChH,UAAI,MAAM;AACN,cAAM,OAAsB,CAAC,MAAM,WAAW,MAAM,KAAK,KAAK,EAAE;AAChE,mBAAW,KAAK,IAAI;AAAG,eAAO;AAAA,MAClC;AACA,aAAO,CAAC,MAAM,EAAE;AAAA,IACpB;AAGA,UAAM,oBAAoB,CAAC,WAAW,SAAS,aAAa,WAAW,QAAQ,SAAS,KAAK;AAC7F,sBAAkB,QAAQ,CAAC,SAAS,iBAAiB,IAAI,CAAC;AAG1D,UAAM,cAAc,CAAC,YAA+B,WAA+C;AAC/F,YAAM,UAA2B,EAAC;AAClC,iBAAW,QAAQ,MAAM,KAAK,IAAI,cAAc,EAAE,GAAG;AAEjD,cAAM,kBAA4B,MAAM,QAAQ,UAAU,IAAI,YAAY,OAAO,CAAC,QAAc,OAAK,EAAE,IAAK,cAAc;AAC1H,cAAM,UAAkB,MAAM,QAAQ,UAAU,IAAI,WAAW,KAAK,CAAC,UAAU,KAAK,MAAM,aAAa,KAAK,CAAC,IAAK,aAAa,KAAK,MAAM,aAAa,UAAU,IAAI,aAAa,OAAkB;AACpM,cAAM,oBAAoB,KAAK,KAAK,MAAK,EAAG,UAAU,QAAQ,EAAE;AAChE,cAAM,gBAAgB,KAAK,OAAO,WAAW,IAAI,KAAK,KAAK,OAAO,WAAW,GAAG;AAChF,cAAM,WAAW,WAAW,MAAM,KAAK;AACvC,cAAM,WAAqB,MAAM,QAAQ,MAAM,IAAI,QAAQ,OAAO,CAAC,QAAc,mBAAmB,aAAa,GAAG,CAAC,IAAK,UAAU;AAEpI,YAAI,kBAAmB,UAAU,MAAM,mBAAoB,UAAU,OAAO,YAAY,KAAK,CAAC,UAAU;AACpG,kBAAQ,KAAK,CAAC,mBAAmB,QAAQ,CAAC;AAAA,QAC9C;AAAA,MACJ;AACA,aAAO;AAAA,IACX;AAGA,UAAM,wBAAwB,CAAC,YAA+B,QAA2B,WAA8B,OAAO;AAC1H,YAAM,iCAAiB,KAAmB;AAC1C,iBAAW,QAAQ,MAAM,KAAK,IAAI,cAAc,EAAE,GAAG;AACjD,cAAM,kBAA4B,MAAM,QAAQ,UAAU,IAAI,YAAY,OAAO,CAAC,QAAc,OAAK,EAAE,IAAK,cAAc;AAC1H,cAAM,UAAkB,MAAM,QAAQ,UAAU,IAAI,WAAW,KAAK,CAAC,UAAU,KAAK,MAAM,aAAa,KAAK,CAAC,IAAK,aAAa,KAAK,MAAM,aAAa,UAAU,IAAI,aAAa,OAAkB;AACpM,cAAM,oBAAoB,KAAK,KAAK,MAAK,EAAG,UAAU,QAAQ,EAAE;AAChE,cAAM,gBAAgB,KAAK,OAAO,WAAW,IAAI,KAAK,KAAK,OAAO,WAAW,GAAG;AAChF,cAAM,WAAW,WAAW,MAAM,KAAK,KAAK;AAE5C,cAAM,WAAqB,MAAM,QAAQ,MAAM,IAAI,QAAQ,OAAO,CAAC,QAAc,mBAAmB,aAAa,GAAG,CAAC,IAAK,UAAU;AACpI,cAAM,cAAuB,MAAM,QAAQ,QAAQ,IAAI,UAAU,OAAO,CAAC,QAAc,KAAK,SAAS,GAAG,IAAK,KAAK,SAAS,aAAc,aAAa;AAEtJ,YAAI,kBAAoB,UAAU,MAAM,mBAAoB,UAAU,MAAO,eAAe,YAAY,KAAK,CAAC,UAAU;AACpH,gBAAM,MAAM,aAAa,KAAK,OAAO;AACrC,cAAI,CAAC,WAAW,IAAI,GAAG,GAAG;AACtB,uBAAW,IAAI,KAAK,EAAE;AAAA,UAC1B;AACA,qBAAW,IAAI,GAAG,GAAG,KAAK,QAAQ;AAAA,QACtC;AAAA,MACJ;AACA,aAAO,MAAM,KAAK,WAAW,SAAS;AAAA,IAC1C;AAGA,QAAI,oBAAqC,YAAY,CAAC,SAAS,EAAE,GAAG,CAAC,KAAK,CAAC;AAC3E,QAAI,oBAAqC,YAAY,CAAC,OAAO,GAAG,EAAE;AAClE,QAAI,YAA+B,sBAAsB,CAAC,OAAO,GAAG,GAAG,IAAI,EAAE;AAC7E,QAAI,aAAgC,sBAAsB,CAAC,MAAM,GAAG,EAAC,EAAG,CAAC,KAAK,CAAC;AAM/E,UAAM,WAAgB,OAAO,YAAY,YAAY,SAAS,CAAC,SAAS,KAAK,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,MAAM,KAAK,CAAC,CAAC,KAAK,IAAI,CAAC,KAAK,EAAE;AAC/I,aAAS,aAAa,OAAO,YAAY,mBAAmB,SAAS,CAAC,SAAS,KAAK,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,MAAM,KAAK,CAAC,CAAC,KAAK,IAAI,CAAC,KAAK,EAAE;AACtJ,aAAS,aAAa,OAAO,YAAY,mBAAmB,SAAS,CAAC,SAAS,KAAK,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,MAAM,KAAK,CAAC,CAAC,KAAK,IAAI,CAAC,KAAK,EAAE;AACtJ,aAAS,KAAK,OAAO,YAAY,WAAW,SAAS,CAAC,SAAS,KAAK,CAAC,GAAG,OAAO,CAAC,QAAgB,OAAO,CAAC,CAAC,GAAG,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,MAAM,CAAC,QAAgB,MAAM,GAAG,CAAC,EAAE,OAAO,CAAC,MAAW,KAAK,IAAI,CAAC,CAAC,KAAK,EAAE;AAGvN,UAAM,WAAW,YAAY,OAAO,CAAC,SAAU,KAAK,CAAC,KAAK,SAAS,KAAK,CAAC,KAAK,CAAE,IAAI,CAAC;AACrF,QAAI,YAAY,QAAQ,YAAY,GAAG;AACnC,YAAM,MAAM,MAAM,QAAQ;AAC1B,UAAI,OAAO,OAAO,YAAY;AAAE,cAAM,EAAE;AAAA,MAAG,WAAW,OAAO,QAAQ,OAAO,OAAO,UAAU;AAAE,YAAI,QAAQ;AAAA,MAAI;AAAA,IACnH;AAGA,gBAAY,UAAU,CAAC,SAA6B;AAChD,YAAM,WAAkB,OAAO,CAAC,GAC1B,SAAS,CAAC,QAAgB,OAAO,QAAQ,OAAO,CAAC,GACjD,MAAM,CAAC,QAAgB,MAAM,GAAG,CAAC,GACjC,SAAS,CAAC,MAAW,KAAK,IAAI;AAGpC,gBAAU,UAAU,CAAC,QAAa;AAC9B,YAAI,OAAO,OAAO,YAAY;AAAE,gBAAM,EAAE;AAAA,QAAG,WAAW,OAAO,QAAQ,OAAO,OAAO,UAAU;AAAE,cAAI,QAAQ;AAAA,QAAI;AAAA,MACnH,CAAC;AAAA,IACL,CAAC;AAGD,UAAM,2CAA2C,CAACC,QAAyB;AACvE,UAAIA,OAAM,MAAM;AAGhB,YAAM,wBAAwB,CAAC,SAAiB;AAC5C,eAAO,mBAAmB,OAAO,CAAC,SAAS,KAAK,CAAC,KAAK,IAAI,KAAK,MAAM,aAAa,MAAM,KAAK,QAAQ;AAAA,MACzG;AAGA,iBAAW,QAAQ,MAAM,KAAKA,KAAI,cAAc,EAAE,GAAG;AACjD;AAAA;AAAA,UACK,KAAK,OAAO,WAAW,IAAI,KAAK,KAAK,OAAO,WAAW,GAAG,KAAK,sBAAsB,KAAK,IAAc;AAAA,UAGzG,KAAK,OAAO,aAAa,IAAI,KAAK,KAAK,OAAO,WAAW,GAAG;AAAA,UAG5D,KAAK,MAAM,WAAW,GAAG,KAAK,KAAK,MAAM,WAAW,MAAM,KAAK,KAAK,QAAQ;AAAA,UAC9E;AAAE,UAAAA,KAAI,kBAAkB,KAAK,IAAc;AAAA,QAAG;AAAA,MACpD;AAAC,IACL;AAGA,6CAAyC,EAAE;AAC3C,QAAI,CAAC,MAAM,MAAM,EAAE,GAAG;AAAE,YAAM,MAAM,IAAI,EAAE,IAAI,QAAQ,CAAC;AAAA,IAAG;AAAC,EAC/D;AACA,SAAO,MAAM,MAAM,EAAE,KAAK;AAC9B;AAGA,MAAM,gBAAgB,CAAC,YAAY,WAAW;AAC1C,QAAM,QAAe,EAAC;AACtB,WAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK;AACtC,UAAM,MAAM,UAAU,CAAC;AACvB,UAAM,MAAM,SAAS,CAAC;AACtB,UAAM,KAAK,EAAE,GAAG,CAAC;AACjB,UAAM,KAAK,GAAG;AAAA,EAClB;AACA,MAAI,OAAO,UAAU,GAAG,OAAO,QAAQ,QAAQ,CAAC,GAAG,MAAM,CAAC;AAG1D,QAAM,WAAW,SAAS,wBAAuB;AACjD,WAAS,OAAO,GAAG,OAAO,SAAS,CAAC,OAAQ,MAAM,IAAK,GAAG,MAAM,CAAC,IAAI,MAAc,QAAQ,IAAI,MAAM,CAAC,CAAC,GAAG,SAAS,CAAC,OAAQ,MAAM,IAAK,CAAC;AACxI,SAAO;AACX;AAGO,SAAS,KAAK,YAAY,QAAQ;AACrC,MAAI,SAAS,KAAK,CAAC,GAAG,UAAU,aAAa,GAAG,KAAK,SAAS,KAAK,EAAE,GAAG,QAAO,EAAG,WAAW,GAAG,GAAG;AAC/F,WAAO,YAAY,EAAE,eAAe,MAAM,EAAE,SAAS,GAAG,MAAM;AAAA,EAClE;AACA,SAAO,cAAc,SAAS,GAAG,MAAM;AAC3C;AAGA,MAAM,gBAAgB,CAAC,WAAiB;AACpC,SAAQ,UAAU,QAAQ,kBAAkB,eAAe,EAAE,kBAAkB,oBAAqB,kBAAkB,mBAAmB,UAAU,SAAS;AAChK;AAGA,MAAM,cAAc,CAAC,QAAc,MAAY,OAAY;AACvD,MAAI,MAAM,MAAM;AAAE,OAAG,cAAc;AAAA,EAAQ;AAG3C,MAAI,UAAU,QAAQ,IAAI,MAAM,IAAI,MAAM;AAC1C,MAAI,UAAU,OAAO,GAAG;AACpB,QAAI,SAAS,cAAc,UAAU,CAAC,SAAS,WAAW,MAAM,KAAK,WAAW,MAAM;AAClF,MAAC,MAAc,cAAe,SAAS,OAAO,MAAM,OAAO,SAAS,SAAS,YAAY,OAAO,SAAS,SAAS,eAAe,UAAU,SAAS,KAAK,IAAK,SAAS,QAAQ,OAAO;AAAA,IAC1L;AAAA,EACJ,OACA;AAAE,IAAC,MAAc,UAAS;AAAA,EAAG;AACjC;AAGO,SAAS,YAAY,EAAE,gBAAgB,MAAK,GAAI,EAAC,EAAG;AACvD,SAAO,SAAU,YAAY,QAAQ;AACjC,QAAI,QAAkB,EAAC;AACvB,UAAM,MAAa,EAAC,EAAG,MAAa,EAAC;AACrC,aAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK;AACrC,YAAM,KAAK,UAAU,CAAC,KAAK,EAAE;AAC7B,UAAI,IAAI,OAAO,QAAQ;AACnB,YAAI,QAAQ,CAAC,GAAG,MAAK,EAAG,WAAW,GAAG,GAAG;AACrC,gBAAM,MAAM,SAAS,SAAS,CAAC,CAAC;AAChC,gBAAM,KAAM,IAAI,OAAO,KAAM;AAC7B,cAAI,IAAI,IAAI,MAAM,KAAK,QAAQ,IAAI,EAAE,GAAG;AACxC,cAAI,IAAI,WAAW,MAAM,KAAK,WAAW,IAAI,SAAS,GAAG;AAAA,QAC7D,OAAO;AAEH,gBAAM,aAAa,oBAAoB,SAAS,UAAU,CAAC,KAAK,IAAI,UAAU,IAAI,CAAC,KAAK,EAAE;AAC1F,gBAAM,eAAe,sBAAsB,KAAK,QAAQ,CAAC,GAAG,QAAO,IAAK,EAAE,KAAK,QAAQ,CAAC,GAAG,QAAO,EAAG,WAAW,GAAG;AAGnH,gBAAM,gBAAgB,QAAQ,CAAC,GAAG,QAAO,EAAG,QAAQ,OAAO;AAC3D,gBAAM,cAAc,QAAQ,IAAI,CAAC,GAAG,QAAO,EAAG,QAAQ,OAAO,KAAK;AAGlE,gBAAM,iBAAkB,iBAAiB;AACzC,gBAAM,oBAAoB;AAG1B,gBAAM,UAAU,qBAAqB,mBAAmB;AACxD,cAAI,QAAQ;AACR,kBAAM,oBAAqB,qBAAqB,CAAE;AAClD,kBAAM,MAAM,IAAI;AAChB,kBAAM,MAAM,OAAO,SAAS,CAAC,KAAK,WAAW,SAAS,CAAC,GAAG,QAAO,IAAK,KAAK,SAAS,CAAC,KAAK,QAAU,oBAAoB,MAAM,GAAG,OAAO,KAAK,GAAG,MAAQ,EAAE;AAC1J,gBAAI,KAAK,SAAS,CAAC,CAAC;AAAA,UACxB,WACI,CAAC,YAAY;AACb,kBAAM,MAAM,IAAI;AAChB,kBAAM,MAAM,OAAO,SAAS,CAAC,KAAK,WAAW,SAAS,CAAC,GAAG,QAAO,IAAK,KAAK,SAAS,CAAC,KAAK,QAAS,YAAY,SAAS,CAAC,CAAC,IAAI,OAAO,SAAS,CAAC,CAAC,GAAG,QAAO,GAAI,SAAS,GAAG,QAAS,EAAE;AACrL,gBAAI,KAAK,SAAS,CAAC,CAAC;AAAA,UACxB;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAGA,UAAM,aAAa,mCAAmC,MAAM,KAAK,EAAE,EAAE,MAAM;AAC3E,UAA8B,SAAS,IAAI,WAAU,EAAG,MAAW,OAAO,gBAAgB,YAAY,WAAW;AAGjH,UAAM,aAAa,eAAe,uBAAuB,KAAK,UAAU,UAAU;AAClF,UAAM,WAAgB,aAAa,MAAM,IAAI,cAAc,UAAU,IAAI,YAAY,IAAI,QAAQ;AAGjG,UAAM,OAAO,SAAS,wBAAuB;AAC7C,UAAM,SAAS,MAAM,KAAK,QAAQ,UAAU,GAAG,OAAO,CAAC,MAAW;AAAE,aAAO,aAAa;AAAA,IAAM,CAAC,EAAE,IAAI,CAAC,SAAc;AAChH,UAAI,CAAC,cAAc,MAAM,UAAU,KAAK,MAAM,cAAc,MAAM;AAC9D,cAAM,UAAS;AACf,YAAI,QAAQ,MAAM;AAAE,gBAAM,SAAS,IAAI;AAAA,QAAG;AAAC,MAC/C;AACA,aAAO;AAAA,IACX,CAAC;AAGD,QAAI,cAAqB,EAAC;AAG1B,WAAO,QAAQ,CAAC,YAAiB;AAC7B,YAAM,SAAc,UAAU,SAAS,iBAAiB,SAAS,WAAW,UAAU,IAAI,IAAI;AAC9F,SAAG;AACC,cAAM,OAAY,QAAQ;AAC1B,oBAAY,KAAK,IAAI;AAAA,MACzB,SAAS,QAAQ,YAAW;AAAA,IAChC,CAAC;AAGD,iBAAa,SAAS,CAAC,SAAc,MAAM,YAAY,KAAK,YAAY,GAAG,UAAU,CAAC,SAAc;AAChG,UAAI,MAAM,WAAW,UAAU,WAAW,IAAI,KAAK,OAAO,UAAU,SAAS,MAAM,WAAW,QAAO,EAAG,QAAQ,CAAC,KAAK,IAAI,CAAC,GAAG;AAC1H,YAAI,KAAU,MAAM,SAAS,MAAM,WAAW,QAAO,EAAG,QAAQ,CAAC,KAAK,IAAI,KAAK,EAAE;AAGjF,YAAI,MAAM,QAAQ,OAAO,WAAc,OAAO,MAAM,WAAW,KAAK,OAAO,QAAO,IAAK,IAAI;AACvF,gBAAM,UAAS;AAAA,QACnB,OAAO;AACH,gBAAM,UAAU,MAAM;AACtB,cAAI,MAAM,QAAQ,EAAE,KAAK,cAAc,OAAO,cAAc,KAAK;AAC7D,0BAAc,SAAS,MAAM,KAAK,EAAE,IAAI,MAAM,OAAO,CAAC;AAAA,UAC1D,WACI,MAAM,MAAM;AACZ,0BAAc,SAAS,MAAM,EAAE;AAAA,UACnC;AAAA,QACJ;AAAA,MACJ;AAGA,UAAI,MAAM,aAAa;AACnB,cAAM,UAAS;AAAA,MACnB;AAAA,IACJ,CAAC;AAGD,iBAAa,OAAO,CAAC,SAAc,KAAK,YAAY,KAAK,YAAY,GAAG,MAAM,CAAC,SAAS;AACpF,qBAAe,MAAqB,GAAgB;AAAA,IACxD,CAAC;AAGD,WAAO,MAAM,KAAK,MAAM,UAAU,GAAG,SAAS,IAAI,OAAO,MAAM,aAAa,CAAC;AAAA,EACjF;AACJ;AAGO,MAAM,IAAI,CAAC,QAAa,WAAkB;AAE7C,MAAI,OAAO,OAAO,UAAU;AACxB,QAAI,KAAK,QAAO,EAAG,aAAa,GAAG,KAAK,KAAK,QAAO,EAAG,WAAW,GAAG,GAAG;AACpE,YAAM,SAAS,IAAI,WAAU,EAAG,MAAM,OAAO,gBAAgB,mCAAmC,KAAK,QAAQ,GAAG,WAAW;AAC3H,YAAM,QAAQ,IAAI,cAAc,UAAU,GAAG,WAAW,IAAI;AAE5D,UAAI,iBAAiB,iBAAiB;AAClC,cAAM,OAAO,SAAS,wBAAuB;AAC7C,aAAK,OAAO,GAAG,MAAM,KAAK,MAAM,cAAc,EAAE,CAAC;AACjD,eAAQ,MAAM,KAAK,KAAK,UAAU,GAAG,SAAS,IAAI,OAAO,MAAM,aAAa,CAAC;AAAA,MACjF;AACA,UAAI,iBAAiB,kBAAkB;AAAE,eAAO;AAAA,MAAO;AACvD,UAAI,OAAO,YAAY,SAAS,GAAG;AAAE,cAAM,OAAO,SAAS,wBAAuB;AAAG,aAAK,OAAO,GAAG,MAAM,KAAK,OAAO,cAAc,EAAE,CAAC;AAAG,eAAO;AAAA,MAAM;AACvJ,aAAO,OAAO,aAAa,CAAC,KAAM,IAAI,KAAK,GAAG;AAAA,IAClD;AACA,WAAO,IAAI,KAAK,GAAG;AAAA,EACvB,WACI,OAAO,OAAO,YAAY;AAAE,WAAO,EAAE,OAAO;AAAA,EAAG,WAC/C,MAAM,QAAQ,GAAG,KAAK,QAAQ;AAAE,WAAO,KAAK,KAAK,GAAG,MAAM;AAAA,EAAG,WAC7D,eAAe,MAAM;AAAE,WAAO;AAAA,EAAK;AACvC,SAAO,QAAQ,GAAG;AACtB;;ACzTO,MAAM,eAAe,CAAC,QAAQ;AAAE,QAAM,MAAM,GAAG;AAAG,SAAO,CAAC,OAAO;AAAE,UAAM,OAAO,MAAM,GAAG;AAAG,QAAI,QAAQ,MAAM;AAAE,WAAK,QAAQ,EAAE,8DAA8D,IAAI,MAAM,GAAG,WAAW,MAAM;AAAA,IAAO;AAAA,EAAE;AAAE;AACtO,MAAM,aAAa,CAAC,QAAQ;AAAE,QAAM,MAAM,GAAG;AAAG,SAAO,CAAC,OAAO;AAAE,UAAM,OAAO,MAAM,GAAG;AAAG,QAAI,QAAQ,QAAQ,WAAW,MAAM,OAAO,IAAI,QAAQ,aAAa,GAAG;AAAE,WAAK,QAAQ,OAAO,EAAE,SAAS,IAAI,MAAM,GAAG,iBAAiB,CAAC,KAAK;AAAA,IAAG;AAAA,EAAE;AAAE;AAC9O,MAAM,YAAY,CAAC,QAAQ;AAAE,QAAM,MAAM,GAAG;AAAG,SAAO,CAAC,OAAO;AAAE,UAAM,OAAO,MAAM,GAAG;AAAG,QAAI,QAAQ,QAAQ,WAAW,IAAI,QAAQ,OAAO,MAAM,KAAK,GAAG;AAAE,WAAK,SAAS,EAAE,SAAS,IAAI,MAAM,GAAG,SAAS,MAAM,UAAU;AAAA,IAAI;AAAA,EAAE;AAAE;;AC0B7M,QAAQ;AAAA,EAChC,OAAO;AAAA,EACP,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,MAAM;AAAA,EACN,SAAS;AAAA,EACT,YAAY;AAAA,EACZ,SAAS;AACb,CAAC;AA2C2B,OAAO,WAAW,cAAc,QAAQ,UAAU,KAAK,OAAO,IAAI;AAC/D,OAAO,WAAW,cAAc,QAAQ,aAAa,KAAK,OAAO,IAAI;AAC1E,OAAO,WAAW,cAAc,QAAQ,GAAG,KAAK,OAAO,IAAI;AACtD,OAAO,WAAW,cAAc,QAAQ,QAAQ,KAAK,OAAO,IAAI;AACnE,OAAO,WAAW,cAAc,QAAQ,KAAK,KAAK,OAAO,IAAI;;ACtElF,IAAK,kCAAAC,mBAAL;AAEH,EAAAA,8BAAA,kBAAe,OAAf;AACA,EAAAA,8BAAA,cAAW,MAAX;AACA,EAAAA,8BAAA,WAAQ,MAAR;AACA,EAAAA,8BAAA,YAAS,MAAT;AACA,EAAAA,8BAAA,aAAU,MAAV;AACA,EAAAA,8BAAA,aAAU,MAAV;AACA,EAAAA,8BAAA,WAAQ,MAAR;AACA,EAAAA,8BAAA,WAAQ,MAAR;AACA,EAAAA,8BAAA,UAAO,MAAP;AACA,EAAAA,8BAAA,UAAO,MAAP;AACA,EAAAA,8BAAA,aAAU,KAAV;AAZQ,SAAAA;AAAA;AAoCZ,MAAM,+BAAe,KAA4B;AAIjD,IAAI,UAAiC,EAAC;AAQtC,MAAM,aAAa,MAAM,aAAa,KAAK,KAAK,IAAI,KAAK,QAAO,CAAE,SAAS,EAAE,EAAE,MAAM,GAAG,CAAC,CAAC;AAKnF,MAAM,oBAAoB,CAC7B,UACe;AACf,QAAM,KAAK,MAAM,MAAM,YAAW;AAClC,QAAM,YAA4B,OAAO,OAAO,OAAO,EAAE,IAAI;AAC7D,MAAI,WAAW,UAAU,MAAM;AAC3B,cAAU,SAAS;AAAA,EACvB;AAEA,WAAS,IAAI,IAAI,SAAS;AAE1B,MAAI,QAAQ,OAAO;AACf,YAAQ,IAAI,yBAAyB,IAAI,aAAa,MAAM,QAAQ;AAAA,EACxE;AAEA,SAAO,MAAM,oBAAoB,EAAE;AACvC;AAKO,MAAM,sBAAsB,CAAC,OAAwB;AACxD,QAAM,UAAU,SAAS,OAAO,EAAE;AAClC,MAAI,QAAQ,SAAS,SAAS;AAC1B,YAAQ,IAAI,2BAA2B,EAAE;AAAA,EAC7C;AACA,SAAO;AACX;AA8LO,MAAM,sBAAsB,CAC/B,SACA,YACA,YACe;AACf,SAAO,kBAAkB;AAAA,IACrB,IAAI,YAAY,QAAQ,MAAM,YAAY;AAAA,IAC1C,UAAU;AAAA,IACV,SAAS,IAAI,QAAQ,OAAO;AAAA,IAC5B,OAAO;AAAA,IACP,UAAU,MAAM,WAAW,UAAU;AAAA,IACrC,OAAO,MAAM;AACT,iBAAW,QAAQ;AACnB,iBAAU;AACV,aAAO;AAAA,IACX;AAAA,GACH;AACL;AAgCO,MAAM,kBAAkB,CAC3B,SACA,WACA,YACe;AACf,SAAO,kBAAkB;AAAA,IACrB,IAAI,WAAW,QAAQ,MAAM,YAAY;AAAA,IACzC,UAAU;AAAA,IACV,SAAS,IAAI,QAAQ,OAAO;AAAA,IAC5B,OAAO;AAAA,IACP,UAAU,MAAM;AACZ,YAAM,MAAM,UAAU;AACtB,aAAO,CAAC,CAAC,OAAO,OAAO,GAAG,MAAM;AAAA,IACpC;AAAA,IACA,OAAO,MAAM;AACT,gBAAU,QAAQ;AAClB,iBAAU;AACV,aAAO;AAAA,IACX;AAAA,GACH;AACL;;AC7VO,MAAM,0CAA0B,KAAiB;AACjD,MAAM,mBAAmB,CAAC,eAA0B,QAAmB,KAAc,YAAuB;AAC/G,MAAI,OAAO,MAAM;AAEjB,MAAI,oBAAoB,IAAI,GAAG,GAAG;AAC9B,wBAAoB,IAAI,GAAG,IAAI,CAAC,KAAI;AACpC,wBAAoB,OAAO,GAAG;AAAA,EAClC;AAGA,SAAO,oBAAoB,sBAAsB,KAAK,MAAI;AACtD,UAAM,OAAQ,iBAAiB,cAAc,QAAQ,GAAG,MAAM,SAAS,SAAS;AAChF,UAAMC,OAAM,WAAW,MAAM,IAAI,SAAS,UAAU,GAAG;AAA+D,IAAAA,KAAI,UAAU;AACpI,UAAM,OAAO,IAAI,QAAQA,IAAG;AAC5B,UAAM,OAAO,SAAS,CAACA,MAAK,OAAO,GAAG,CAAC,QAAQ;AAC3C,oBAAc,MAAM,SAAQ,EAAG,MAAI;AAC/B,SAAC,iBAAiB,cAAc,QAAQ,KAAK,GAAG;AAAA,MACpD,CAAC;AAAA,IACL,CAAC;AACD,UAAM,OAAO,CAAC,OAAO;AAAE,UAAI,GAAG,gBAAgB,iBAAiB,iBAAiB,GAAG,OAAO,KAAK;AAC3F,YAAI,WAAWA,KAAI,OAAO,GAAG,QAAQ,GAAG;AAAE,UAAAA,KAAI,QAAQ,GAAG;AAAA,QAAU;AAAC,MACxE;AAAA,IAAE;AACF,qBAAiB,WAAW,IAAI;AAChC,WAAO,CAAC,MAAM;AAAE,cAAO;AAAG,0BAAoB,WAAW,IAAI;AAAA,IAAG,GAAGA,IAAG;AAAA,EAC1E,CAAC;AACL;AAkEO,MAAM,iBAAiB,CAAC,aAAwB,QAAmB,cAAuB;AAC7F,MAAI,aAAa,MAAM;AACvB,QAAM,MAAM,eAAe,WAAW,SAAS,GAAG,MAAM,KAAK,WAAW;AACxE,QAAMA,OAAM,WAAW,MAAM,IAAI,SAAS,WAAW,GAAG;AAAG,EAAAA,KAAI,UAAU;AACzE,QAAM,MAAM,CAAC,OAAQA,KAAI,QAAQ,GAAG;AAAU,OAAK,mBAAmB,UAAU,GAAG;AACnF,SAAO,MAAM;AAAE,SAAK,sBAAsB,UAAU,GAAG;AAAA,EAAG;AAC9D;AAGO,MAAM,cAAc,CAAC,SAAoB,QAAmB,YAAuB;AACtF,MAAI,WAAW,MAAM;AACrB,QAAM,MAAO,SAAS,UAAU,OAAO,WAAW,WAAW,UAAU,SAAW,SAAS,eAAe,aAAa,KAAK;AAC5H,QAAM,MAAM,WAAW,MAAM,IAAI,SAAS,WAAW,CAAC,CAAC,GAAG;AAC1D,QAAM,MAAM,SAAS,SAAS,eAAe,KAAK,YAAY;AAC9D,QAAM,MAAM,CAAC,CAAC,OAAO;AAAE,QAAI,QAAQ,IAAI,QAAQ,cAAc,QAAQ;AAAA,EAAM,GAAG,EAAE,SAAS,MAAM,GAAG,MAAM,IAAI,QAAQ,OAAO;AAC3H,WAAS,mBAAmB,aAAc,GAAG,GAAG;AAChD,WAAS,mBAAmB,aAAa,GAAG,GAAG;AAC/C,SAAO,MAAM;AACT,UAAMC,WAAU,KAAK,SAAQ;AAAG,WAAM;AACtC,IAAAA,UAAS,sBAAsB,aAAc,GAAG,GAAG;AACnD,IAAAA,UAAS,sBAAsB,aAAa,GAAG,GAAG;AAAA,EACtD;AACJ;AAGO,MAAM,WAAW,CAAC,SAAoB,QAAmB,WAAoB,YAAuB;AACvG,QAAM,MAAM,SAAS,eAAe,SAAS,MAAM,OAAO,WAAW,YAAa,UAAU,KAAK,OAAQ,SAAS,OAAO;AACzH,MAAI,CAAC,SAAS;AAAQ,QAAM,MAAM,WAAW,MAAM,IAAI,SAAS,UAAU,GAAG;AAC7E,MAAI,SAAS,GAAG,KAAK,CAAC,mBAAmB,IAAI,KAAK,GAAG,IAAI,QAAQ,mBAAmB,GAAG,KAAK,IAAI,SAAS;AACzG,SAAO,SAAS,SAAS,WAAW,KAAK,iBAAiB,MAAM,IAAI;AACxE;AAGO,MAAM,WAAW,CAAC,SAAoB,QAAmB,MAA2B,QAAmC;AAC1H,QAAM,MAAM,OAAO,eAAe,UAAU,QAAQ,WAAW,gBAAgB,cAAc,IAAK,UAAU,QAAQ,WAAW,gBAAgB,cAAc,IAAI,WAAW,SAAS,IAAI;AACzL,QAAM,MAAM,WAAW,MAAM,IAAI,SAAS,UAAU,GAAG;AAAG,MAAI,SAAS,GAAG,OAAO,WAAW,OAAO,IAAI,UAAU;AACjH,QAAM,MAAM,IAAI,eAAe,CAAC,YAAY;AACxC,QAAI,SAAS,GAAG,GAAG;AACf,UAAI,OAAO,cAAc;AAAE,YAAI,QAAQ,QAAQ,WAAW,QAAQ,CAAC,EAAE,cAAc,CAAC,EAAE,aAAa,QAAQ,CAAC,EAAE,cAAc,CAAC,EAAE;AAAA,MAAU;AACzI,UAAI,OAAO,eAAe;AAAE,YAAI,QAAQ,QAAQ,WAAW,QAAQ,CAAC,EAAE,eAAe,CAAC,EAAE,aAAa,QAAQ,CAAC,EAAE,eAAe,CAAC,EAAE;AAAA,MAAU;AAC5I,UAAI,OAAO,4BAA4B;AAAE,YAAI,QAAQ,QAAQ,WAAW,QAAQ,CAAC,EAAE,0BAA0B,CAAC,EAAE,aAAa,QAAQ,CAAC,EAAE,0BAA0B,CAAC,EAAE;AAAA,MAAU;AAAC,IACpL;AAAA,EACJ,CAAC;AACD,OAAK,SAAS,WAAW,SAAS,QAAQ,oBAAoB,aAAa;AAAE,SAAK,UAAU,SAAS,WAAW,SAAS,QAAQ,SAAS,EAAE,KAAK;AAAA,EAAG;AACpJ,SAAO,MAAI,KAAK,cAAa;AACjC;AAGO,MAAM,aAAa,CAAC,SAAoB,QAAmB,MAA2B,YAAuB;AAChH,QAAM,MAAM,mBAAmB,UAAU,UAAU,IAAI,QAAQ,OAAO;AACtE,MAAI,WAAW,QAAQ,QAAQ,SAAS,SAAS,YAAY,UAAU;AAAE,aAAS,WAAW,EAAE,CAAC,QAAQ,UAAU,QAAQ,MAAM,GAAI,SAAS,SAAS,SAAU;AAAA,EAAG;AACnK,QAAM,MAAM,UAAU,QAAQ,UAAU,cAAc,YAAY;AAClE,QAAM,MAAM,WAAW,MAAM,IAAI,SAAS,UAAU,OAAO,CAAC;AAAG,MAAI,SAAS,GAAG,OAAO,WAAW,OAAO,IAAI,UAAU;AAAG,MAAI,WAAW,OAAO,IAAI,UAAU;AAC7J,QAAM,MAAM,SAAS,CAAC,KAAK,OAAO,GAAG,CAAC,MAAM;AAAE,QAAI,KAAK,KAAK,QAAQ,UAAU,SAAS,YAAY,SAAS,eAAe,KAAK,SAAS,IAAI,IAAI,MAAO,SAAS,WAAW,EAAE,CAAC,QAAQ,UAAU,QAAQ,MAAM,GAAI,KAAK,SAAS,KAAM;AAAA,EAAC,CAAC;AACzO,QAAM,MAAM,CAAC,CAAC,OAAO;AAAE,QAAI,SAAS,QAAQ,UAAU,KAAK,WAAW,YAAY,KAAK,SAAQ,EAAG,eAAe;AAAA,EAAG,GAAG,EAAE,SAAS,MAAM;AACxI,WAAS,mBAAmB,UAAU,GAAG,GAAG;AAAG,SAAO,MAAI;AAAE,SAAK,SAAQ,EAAG,sBAAsB,UAAU,GAAG,GAAG;AAAG,WAAM;AAAA,EAAG;AAClI;AAGO,MAAM,cAAc,CAAC,SAAoB,WAAsB;AAClE,QAAM,MAAO,CAAC,CAAC,SAAS,WAAY;AACpC,QAAM,MAAM,WAAW,MAAM,IAAI,SAAS,WAAW,GAAG;AAAG,MAAI,SAAS,GAAG,GAAG,IAAI,UAAU;AAC5F,QAAM,MAAM,SAAS,SAAS,aAAa,GAAG,CAAC;AAC/C,QAAM,MAAM,SAAS,CAAC,KAAK,OAAO,GAAG,CAAC,MAAM;AACxC,QAAI,WAAW,SAAS,WAAW,GAAG;AAClC,iBAAW,SAAS,CAAC;AAAA,IACzB;AAAA,EACJ,CAAC;AACD,SAAO,MAAI;AAAE,WAAM;AAAG,WAAM;AAAA,EAAG;AACnC;AAGO,MAAM,YAAY,CAAC,SAAoB,WAAsB;AAChE,MAAI,YAAY,OAAO,GAAG;AAC1B,MAAI,CAAC,WAAW,EAAE,mBAAmB,QAAQ,SAAS,mBAAmB,OAAO;AAGhF,QAAM,MAAM,SAAS,SAAS;AAC9B,QAAM,MAAM,WAAW,MAAM,IAAI,SAAS,UAAU,GAAG;AAAG,MAAI,SAAS,GAAG,GAAG,IAAI,UAAU;AAC3F,QAAM,MAAM,SAAS,SAAS,UAAU,GAAG,CAAC;AAC5C,QAAM,OAAO,IAAI,QAAQ,GAAG;AAC5B,QAAM,MAAM,SAAS,CAAC,KAAK,OAAO,GAAG,CAAC,MAAM;AACxC,QAAI,WAAW,WAAW,SAAS,OAAQ,GAAG,SAAS,CAAE,GAAG;AACxD,oBAAcd,OAAA,CAAM,IAAI,GAAG,MAAI;AAC3B,gBAAQ,QAAQ,UAAUA,OAAA,CAAM,IAAI,CAAC,KAAK,UAAU,CAAC;AACrD,iBAAS,gBAAgB,IAAI,MAAM,UAAU,EAAE,SAAS,MAAM,CAAC;AAAA,MACnE,CAAC;AAAA,IACL;AAAA,EACJ,CAAC;AACD,SAAO,MAAI;AAAE,WAAM;AAAG,WAAM;AAAA,EAAG;AACnC;AAGO,MAAM,oBAAoB,CAAC,SAAoB,WAAsB;AACxE,MAAI,YAAY,OAAO,GAAG;AAC1B,MAAI,CAAC,WAAW,EAAE,mBAAmB,QAAQ,SAAS,mBAAmB,OAAO;AAGhF,QAAM,MAAM,OAAO,SAAS,aAAa,KAAK;AAC9C,QAAM,MAAM,WAAW,MAAM,IAAI,SAAS,UAAU,GAAG;AAAG,MAAI,SAAS,GAAG,GAAG,IAAI,UAAU;AAC3F,QAAM,MAAM,SAAS,SAAS,WAAW,GAAG,CAAC;AAC7C,QAAM,MAAM,SAAS,CAAC,KAAK,OAAO,GAAG,CAAC,MAAM;AACxC,QAAI,YAAY,QAAQ,QAAQ,WAAW,QAAQ,QAAQ,aAAa,OAAO,SAAS,iBAAiB,YAAY,WAAW,SAAS,eAAe,CAAC,GAAG;AACxJ,cAAQ,gBAAgB,OAAO,CAAC;AAChC,eAAS,gBAAgB,IAAI,MAAM,UAAU,EAAE,SAAS,MAAM,CAAC;AAAA,IACnE;AAAA,EACJ,CAAC;AACD,SAAO,MAAI;AAAE,WAAM;AAAG,WAAM;AAAA,EAAG;AACnC;;ACxMO,MAAM,UAAU,CAAC,MAAY,MAAY,SAAe,SAAO;AAClE,MAAI,QAAQ,YAAY,QAAQ,iBAAiB;AAC7C,UAAM,SAASC,OAAA,EAAO,MAAM,IAAI,GAAG,MAAM,eAAe,GAAG,MAAM,KAAK,CAAC,CAAC,IAAI,CAAC;AAC7E,QAAI,QAAQ;AAAE,aAAO;AAAA,IAAQ;AAAC,EAClC;AACA,QAAM,MAAM,QAAQ,OAAO,IAAI,GAAG,OAAO,OAAO,MAAM,IAAI,GAAG,IAAI;AACjE,MAAI,QAAQ,IAAI,eAAe,IAAI,OAAO,SAAS,IAAI;AAAG,SAAO;AACrE;AAIO,MAAM,UAAU,CAAC,SAAe,SAAO,QAAQ,MAAM,WAAW,UAAU,GAAG,IAAI;AACjF,MAAM,WAAW,CAAC,SAAe,SAAO,QAAQ,MAAM,WAAW,WAAW,GAAG,IAAI;AACnF,MAAM,mBAAmB,CAAC,SAAe,SAAO,QAAQ,MAAM,WAAW,mBAAmB,GAAG,IAAI;AACnG,MAAM,kBAAkB,IAAI,SAAO;AACtC,MAAI,oBAAoB,IAAI,KAAK,CAAC,CAAC,GAAG,OAAO,oBAAoB,IAAI,KAAK,CAAC,CAAC,IAAI,CAAC;AACjF,QAAM,OAAY,kBAAkB,OAAY;AAChD,QAAM,MAAM,QAAQ,OAAO,IAAI,GAAG,OAAO,OAAO,MAAM,IAAI,GAAG,IAAI;AACjE,QAAM,CAAC,MAAM,CAAC,IAAI;AAClB,MAAI,QAAQ,IAAI,eAAe,IAAI,OAAO,SAAS,IAAI;AACX,SAAO;AACvD;AAGO,MAAM,UAAU,CAAC,SAAe,SAAO,QAAQ,MAAM,WAAW,UAAU,GAAG,IAAI;AACjF,MAAM,aAAa,CAAC,SAAe,SAAO,QAAQ,MAAM,YAAY,aAAa,GAAG,IAAI;AACxF,MAAM,YAAY,CAAC,SAAe,SAAO,QAAQ,MAAM,WAAW,YAAY,GAAG,IAAI;AACrF,MAAM,aAAa,CAAC,SAAe,SAAO,QAAQ,MAAM,YAAY,aAAa,GAAG,IAAI;AACxF,MAAM,gBAAgB,IAAI,SAAO,QAAQ,MAAM,YAAY,gBAAgB,GAAG,IAAI;;ACjBzF,MAAM,iCAAiB,KAAI;AAC3B,MAAM,wCAAwB,SAAQ;AACtC,MAAM,gCAAgB,SAAkC;AACxD,MAAM,0BAAU,SAAoC;AAEpD,MAAM,eAAe,CAAC,QAAgB,IAAI,QAAQ,mBAAmB,OAAO,EAAE,aAAY;AAE1F,MAAM,eAAe,CAAC,SAAiB;AACnC,QAAM,KAAK,aAAa,IAAI;AAC5B,MAAI,CAAC,cAAc,eAAe,0BAA0B,EAAE,QAAQ,EAAE,KAAK,GAAG,OAAO;AACvF,SAAO;AACX;AACA,MAAM,gBAAgB,CAAC,SAAiB;AACpC,QAAM,KAAK,aAAa,IAAI;AAC5B,MAAI,IAAI,aAAa,QAAQ,GAAG,OAAO;AACvC,MAAI,IAAI,aAAa,OAAO,GAAG,OAAO;AACtC,SAAO;AACX;AAGA,MAAM,cAAc,OAAO,IAAI,UAAU;AACzC,MAAM,UAAU,OAAO,IAAI,WAAW;AACtC,MAAM,eAAe,OAAO,YAAY,cAAc,UAAU,gBAAgB,OAAO,IAAI;AAE3F,MAAM,eAAe,CAAC,QAAsB,QAAa,SAAyB;AAC9E,MAAI,UAAU,QAAQ,OAAO,QAAQ,KAAK,MAAM,QAAQ,QAAQ,EAAE;AAClE,MAAI,UAAU,SAAS,OAAO;AAC9B,MAAI,UAAU,SAAS,OAAO,CAAC,QAAgB,IAAI,QAAQ,OAAO,IAAI,MAAM;AAC5E,MAAI,UAAU,gBAAgB,OAAO,CAAC,QAAgB,IAAI,QAAQ,OAAO,IAAI,QAAQ,cAAc,MAAM;AACzG,MAAI,UAAU,gBAAgB,OAAO;AACrC,MAAI,UAAU,eAAe,OAAO,QAAQ,KAAK,MAAM,QAAQ,UAAU,aAAa,IAAK,KAAK,YAAY;AAC5G,MAAI,UAAU,eAAe,OAAO,QAAQ,KAAK,MAAM,QAAQ,cAAc,IAAK,KAAK,UAAU,aAAa;AAC9G,MAAI,UAAU,cAAc,OAAO,QAAQ,KAAK,MAAM,QAAQ,SAAS,aAAa,IAAK,KAAK,YAAY;AAC1G,MAAI,UAAU,cAAc,OAAO,QAAQ,KAAK,MAAM,QAAQ,cAAc,IAAK,KAAK,UAAU,YAAY;AAC5G,MAAI,UAAU,UAAU,OAAO,UAAU,KAAK,MAAM,QAAQ,cAAc,IAAK,KAAK,QAAQ;AAC5F,MAAI,UAAU,4BAA4B,OAAO,QAAQ,KAAK,MAAM,QAAQ,cAAc,IAAK,KAAK,UAAU,0BAA0B;AACxI,MAAI,UAAU,WAAW,OAAO,WAAW,KAAK,MAAM,MAAM;AAC5D,MAAI,UAAU,SAAS,OAAO,SAAS,KAAK,MAAM,MAAM;AACxD,MAAI,UAAU,mBAAmB,OAAO,iBAAiB,KAAK,MAAM,MAAM;AAC1E,SAAO;AACX;AAEA,IAAI,cAAc;AACd,SAAO,YAAY,cAAc,SAAS,gBAAgB,MAAM,GAAG,cAAc,YAAY,IAAI;AACrG;AAEA,MAAM,SAAS,CAAC,WAAsC;AAClD,MAAI,UAAU,SAAS,OAAO;AAC9B,MAAI,UAAU,gBAAgB,OAAO;AACrC,MAAI,UAAU,SAAS,OAAO;AAC9B,MAAI,UAAU,gBAAgB,OAAO;AACrC,MAAI,UAAU,QAAQ,OAAO;AAC7B,MAAI,UAAU,eAAe,OAAO;AACpC,MAAI,UAAU,cAAc,OAAO;AACnC,MAAI,UAAU,cAAc,OAAO;AACnC,MAAI,UAAU,eAAe,OAAO;AACpC,MAAI,UAAU,UAAU,OAAO;AAC/B,MAAI,UAAU,4BAA4B,OAAO;AACjD,MAAI,UAAU,WAAW,OAAO;AAChC,MAAI,UAAU,SAAS,OAAO;AAC9B,MAAI,UAAU,mBAAmB,OAAO;AACxC,SAAO;AACX;AAEA,IAAI,cAAc;AACd,eAAa,YAAY;AAAA;AAAA;AAG7B;AA0EO,SAAS,eAAiD,KAAW;AACxE,QAAM,QAAQ,IAAI,aAAoB,OAAO,eAAe,GAAG,KAAK;AACpE,QAAM,QAAS,OAAe,SAAU,KAAa;AACrD,EAAC,MAAc,QAAQ,YAAwB,MAAa;AACxD,WAAO,OAAO,MAAM,GAAG,IAAI;AAG3B,UAAM,UAA+B,EAAC;AACtC,QAAI,IAAS,OAAO,eAAe,IAAI,KAAK;AAC5C,WAAO,GAAG;AACN,UAAI,OAAO,OAAO,GAAG,OAAO,GAAG;AAC3B,cAAM,OAAO,OAAO,OAAO,EAAC,EAAG,OAAO,0BAA0B,CAAC,GAAG,EAAE,OAAO,KAAK,EAAE;AACpF,mBAAW,KAAK,OAAO,KAAK,IAAI,GAAG;AAC/B,cAAI,EAAE,KAAK,UAAU;AAAE,oBAAQ,CAAC,IAAI,KAAK,CAAC;AAAA,UAAG;AAAC,QAClD;AAAA,MACJ;AACA,UAAI,OAAO,eAAe,CAAC;AAAA,IAC/B;AAEA,eAAW,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,OAAO,GAAG;AAC9C,YAAM,SAAS,KAAK,GAAG;AACvB,UAAI,OAAO,MAAM;AACb,eAAO,eAAe,MAAM,KAAK,GAAyB;AAAA,MAC9D;AACA,UAAI;AAAE,aAAK,GAAG,IAAI,UAAU,KAAK,GAAG;AAAA,MAAG,SAAS,GAAG;AAAA,MAAC;AAAA,IACxD;AAEA,WAAO;AAAA,EACX;AAEA,SAAO;AACX;AAWO,SAAS,cAAc,MAAc,SAAoC;AAC5E,SAAO,SAA4C,QAAW,MAAkB;AAC5E,QAAI;AACA,UAAI,OAAO,mBAAmB,eAAe,CAAC,MAAM,OAAO;AAC3D,YAAM,WAAW,eAAe,IAAI,IAAI;AACxC,UAAI,UAAU,OAAO;AACrB,qBAAe,OAAO,MAAM,QAA+C,OAAO;AAAA,IACtF,SAAS,GAAQ;AACb,UAAI,GAAG,SAAS,uBAAuB,8CAA8C,KAAK,GAAG,WAAW,EAAE,GAAG;AACzG,eAAQ,gBAAgB,MAAM,IAAI,KAAK;AAAA,MAC3C;AACA,YAAM;AAAA,IACV;AACA,WAAO;AAAA,EACX;AACJ;AASO,SAAS,SAAS,UAA2B,EAAC,EAAG;AACpD,QAAM,EAAE,WAAW,QAAQ,MAAM,MAAK,GAAI;AAE1C,SAAO,SAAU,QAAa,KAAa;AACvC,UAAM,WAAW,OAAO,aAAa,WAAW,YAAa,QAAQ;AAErE,QAAI,cAAc,SAAS,YAAY,MAAM;AACzC,YAAM,OAAO,OAAO;AACpB,UAAI,CAAC,KAAK,oBAAoB;AAC1B,aAAK,qBAAqB,EAAC;AAAA,MAC/B;AACA,UAAI,KAAK,mBAAmB,QAAQ,QAAQ,IAAI,GAAG;AAC/C,aAAK,mBAAmB,KAAK,QAAQ;AAAA,MACzC;AAAA,IACJ;AAEA,QAAI,CAAC,OAAO,OAAO,QAAQ,OAAO,GAAG,OAAO,OAAO,IAAI,EAAC;AAExD,WAAO,OAAO,EAAE,GAAG,IAAI;AAAA,MACnB,MAAe;AACX,cAAM,OAAO;AACb,cAAM,WAAW,KAAK,WAAW;AACjC,cAAM,eAAe,CAAC,OAAO,OAAQ,gBAAgB,cAAc,OAAQ,OAAO,QAAQ,WAAW,IAAI,MAAM,IAAI,IAAI;AAEvH,YAAI,QAAQ,UAAU,IAAI,IAAI;AAC9B,YAAI,SAAS,OAAO,MAAM,GAAG;AAE7B,YAAI,UAAU,QAAQ,UAAU,MAAM;AAClC,cAAI,CAAC,OAAO;AACR,sBAAU,IAAI,MAAM,wBAAQ,IAAI,KAAK;AAAA,UACzC;AACA,cAAI,CAAC,OAAO,MAAM,GAAG,GAAG;AACpB,mBAAO,MAAM,KAAK,SAAS,aAAa,QAAQ,cAAc,QAAQ,GAAG,IAAI,OAAO,MAAM,CAAC,CAAC;AAAA,UAChG;AAAA,QACJ;AAEA,YAAI,UAAU,OAAO;AACrB,YAAI,QAAQ,mBAAmB,aAAa,OAAO,QAAQ;AAC3D,gBAAS,OAAO,UAAU,YAAY,OAAO,UAAU,gBAAgB,QAAQ,SAAS,QAAQ,WAAW,UAAW,QAAQ,QAAQ;AAAA,MAC1I;AAAA,MACA,IAAe,UAAe;AAC1B,cAAM,OAAO;AACb,cAAM,eAAe,CAAC,OAAO,OAAQ,gBAAgB,cAAc,OAAQ,OAAO,QAAQ,WAAW,IAAI,MAAM,IAAI,IAAI;AAEvH,YAAI,QAAQ,UAAU,IAAI,IAAI;AAC9B,YAAI,SAAS,OAAO,MAAM,GAAG;AAE7B,YAAI,UAAU,QAAQ,UAAU,MAAM;AAClC,cAAI,CAAC,OAAO;AACR,sBAAU,IAAI,MAAM,wBAAQ,IAAI,KAAK;AAAA,UACzC;AACA,cAAI,CAAC,OAAO,MAAM,GAAG,GAAG;AACpB,kBAAM,gBAAkB,OAAO,YAAY,YAAY,OAAO,YAAY,aAAe,UAAU,QAAS,SAAS,YAAa,OAAO,MAAM;AAC/I,mBAAO,MAAM,KAAK,SAAS,aAAa,QAAQ,cAAc,QAAQ,GAAG,IAAI,YAAY,CAAC;AAAA,UAC9F;AAAA,QACJ,WAAW,OAAO,UAAU,YAAY,OAAO,UAAU,YAAY;AACjE,cAAI;AACA,gBAAI,OAAO,YAAY,YAAY,YAAY,SAAU,UAAU,SAAS,QAAQ,EAAE,WAAW,aAAc,OAAO,UAAU,SAAS,YAAY,OAAO,UAAU,SAAS,aAAa;AACxL,qBAAO,OAAO,QAAQ,UAAU,SAAS,QAAQ;AAAA,YACrD,OAAO;AACH,qBAAO,SAAU,OAAO,YAAY,YAAY,OAAO,YAAY,aAAe,UAAU,QAAS,SAAS;AAAA,YAClH;AAAA,UACJ,SAAS,GAAG;AACR,oBAAQ,KAAK,iCAAiC,CAAC;AAAA,UACnD;AAAA,QACJ;AAAA,MACJ;AAAA,MACA,YAAY;AAAA,MACZ,cAAc;AAAA,KAClB;AAAA,EACJ;AACJ;AAMA,MAAM,8CAA8B,SAAiC;AAErE,MAAM,2BAA2B,CAAC,KAAU,UAAyB;AACjE,MAAI,gBAAgB,wBAAwB,IAAI,GAAG;AACnD,MAAI,CAAC,eAAe;AAChB,4BAAwB,IAAI,KAAK,gBAAgB,EAAE;AAAA,EACvD;AACA,MAAI,SAAS,cAAc,QAAQ,KAAK,IAAI,GAAG;AAC3C,kBAAc,KAAK,KAAK;AAAA,EAC5B;AACA,MAAI,IAAI,YAAY;AAChB,QAAI,WAAW,qBAAqB;AAAA,MAChC,GAAI,IAAI,WAAW,sBAAsB,EAAC;AAAA,MAC1C,GAAG,cAAc,OAAO,CAAC,MAAqB,CAAC,IAAI,WAAW,oBAAoB,SAAS,CAAC,CAAC;AAAA,KACjG;AAAA,EACJ;AACJ;AAEO,MAAM,mBAAmB,CAAC,KAAU,QAAsC;AAC7E,MAAI,CAAC,KAAK,OAAO;AAEjB,MAAI,cAAc;AAClB,MAAI,OAAO,OAAO,YAAY;AAC1B,QAAI;AACA,YAAM,OAAO,IAAI,QAAQ,GAAG;AAC5B,oBAAc,IAAI,KAAK,KAAK,IAAI;AAAA,IACpC,SAAS,GAAG;AACR,cAAQ,KAAK,kCAAkC,CAAC;AAChD,aAAO;AAAA,IACX;AAAA,EACJ;AAEA,MAAI,eAAe,OAAO,iBAAiB,eAAe,uBAAuB,eAAe;AAC5F,6BAAyB,KAAK,WAAW;AACzC,WAAO;AAAA,EACX;AAEA,MAAI,uBAAuB,SAAS;AAChC,gBAAY,KAAK,CAAC,WAAgB;AAC9B,UAAI,kBAAkB,eAAe;AACjC,iCAAyB,KAAK,MAAM;AAAA,MACxC,WAAW,UAAU,MAAM;AACvB,yBAAiB,KAAK,MAAM;AAAA,MAChC;AAAA,IACJ,CAAC,EAAE,MAAM,CAAC,MAAW;AACjB,cAAQ,KAAK,qCAAqC,CAAC;AAAA,IACvD,CAAC;AACD,WAAO;AAAA,EACX;AAEA,MAAI,OAAO,eAAe,YAAY,uBAAuB,QAAS,uBAA+B,MAAM;AACvG,UAAM,UAAU,cAAc,aAAa,UAAU;AACrD,QAAI,SAAS;AACT,UAAI,gBAAgB,wBAAwB,IAAI,GAAG;AACnD,UAAI,CAAC,eAAe;AAChB,gCAAwB,IAAI,KAAK,gBAAgB,EAAE;AAAA,MACvD;AACA,YAAM,kBAAkB,CAAC,UAAyB;AAC9C,YAAI,SAAS,cAAe,QAAQ,KAAK,IAAI,GAAG;AAC5C,wBAAe,KAAK,KAAK;AAAA,QAC7B;AACA,YAAI,IAAI,YAAY;AAChB,cAAI,WAAW,qBAAqB;AAAA,YAChC,GAAI,IAAI,WAAW,sBAAsB,EAAC;AAAA,YAC1C,GAAG,cAAe,OAAO,CAAC,MAAqB,CAAC,IAAI,WAAW,oBAAoB,SAAS,CAAC,CAAC;AAAA,WAClG;AAAA,QACJ;AAAA,MACJ;AACA,UAAI,mBAAmB,SAAS;AAC5B,gBAAQ,KAAK,eAAe,EAAE,MAAM,CAAC,MAAW;AAC5C,kBAAQ,KAAK,qCAAqC,CAAC;AAAA,QACvD,CAAC;AACD,eAAO;AAAA,MACX,OAAO;AACH,wBAAgB,OAAO;AACvB,eAAO;AAAA,MACX;AAAA,IACJ;AAAA,EACJ;AAEA,QAAM,SAAW,OAAO,OAAO,cAAc,OAAO,OAAO,WAAY,oBAAoB;AAC3F,QAAM,SAAS,OAAO,IAAI,GAAG;AAC7B,MAAI,eAAe,QAAQ;AAC3B,MAAI,OAAO,QAAQ;AAEnB,MAAI,CAAC,QAAQ;AACT,QAAI,SAAS;AACb,QAAI,QAAe,EAAC;AAEpB,QAAI,OAAO,eAAe,UAAU;AAChC,eAAS,eAAe;AAAA,IAC5B,WAAW,OAAO,eAAe,YAAY,eAAe,MAAM;AAC9D,UAAI,uBAAuB,kBAAkB;AACzC,uBAAe;AAAA,MACnB,OAAO;AACH,iBAAS,OAAQ,YAAoB,OAAO,WAAY,YAAoB,MAAO,OAAO,eAAe,WAAW,cAAc,OAAO,WAAW;AACpJ,gBAAS,aAAqB,SAAS;AACvC,eAAQ,aAAqB,QAAQ;AAAA,MACzC;AAAA,IACJ;AAEA,QAAI,CAAC,gBAAgB,QAAQ;AACzB,qBAAe,gBAAgB,QAAQ,KAAK,UAAU;AAAA,IAC1D;AAEA,WAAO,IAAI,KAAK,EAAE,KAAK,QAAQ,OAAO,MAAM,cAAc;AAAA,EAC9D;AAEA,SAAO;AACX;AAEO,MAAM,gBAAgB,CAAC,OAA6B;AACvD,SAAO,EACF,cAAc,kBACd,cAAc,oBACd,cAAc,oBACd,cAAc,sBACd,EAAE,IAAI,eAAe,IAAI,KAAK,IAAI,eAAe,IAAI,KAAK;AACnE;AAkDO,SAAS,YACZ,UACmB;AACnB,QAAM,OAAoB;AAG1B,QAAM,SAAS,IAAI,IAAI,IAAI;AAC3B,MAAI,QAAQ,OAAO;AAAA,EAKnB,MAAe,wBAAyB,KAAgH;AAAA,IACpJ;AAAA,IACA;AAAA,IACA;AAAA,IACA,eAAwB;AAAA,IAExB,YAAgC,EAAC;AAAA,IACjC,qBAAsC,EAAC;AAAA;AAAA,IAGvC,IAAI,SAAc;AAAE,aAAO;AAAA,IAAW;AAAA,IACtC,IAAI,oBAAmF;AAAE,aAAO;AAAA,IAAW;AAAA,IAE3G,cAAwB;AAAE,aAAO,EAAC;AAAA,IAAG;AAAA,IAErC,OAAO,OAA6D;AAChE,aAAO,SAAS,cAAc,MAAM;AAAA,IACxC;AAAA,IAEA,eAAe,MAAa;AACxB,YAAM,GAAG,IAAI;AACb,UAAI,cAAc,IAAI,GAAG;AACrB,cAAM,aAAa;AAAA,UACf,KAAK,cACJ,KAAa,oBAAmB,IACjC,KAAK,aAAa,EAAE,MAAM,QAAQ;AAAA,SACtC;AACA,cAAM,WAAY,KAAK,kBAAkB,cAAc,YAAY,IAAI;AACvE,cAAM,cAAc,WAAW,cAAc,6BAA6B;AAC1E,YAAI,aAAa;AACb,sBAAY,MAAM,QAAQ;AAAA,QAC9B,OAAO;AACH,qBAAW,QAAQ,QAAQ;AAAA,QAC/B;AAAA,MACJ;AACA,WAAK,cAAc,EAAC;AAAA,IACxB;AAAA,IAEU,cAAsB;AAC5B,aAAO,UAAU,CAAC,cAAc,YAAY,GAAI,KAAK,eAAc,IAAK,EAAG,EAAE,OAAO,GAAG,KAAK,EAAE;AAAA,IAClG;AAAA,IAIA,aAAa,OAA4B;AACrC,aAAO;AAAA,IACX;AAAA,IAEA,SAAS,OAA4B;AACjC,aAAO;AAAA,IACX;AAAA,IAEU,YAAY,KAAkB;AACpC,YAAM,UAAW,KAAa,WAAW;AACzC,MAAC,KAAa,WAAW,IAAI;AAC7B,YAAM,KAAM,KAAa,GAAG;AAC5B,MAAC,KAAa,WAAW,IAAI;AAC7B,UAAI,CAAC,SAAS;AACV,eAAQ,KAAa,WAAW;AAAA,MACpC;AACA,aAAO;AAAA,IACX;AAAA,IAEA,iBAAiB,SAAoB;AACjC,YAAM,OAAO,KAAK;AAClB,YAAM,SAAS,OAAO,WAAW,aAAa,UAAU,IAAI,IAAI;AAEhE,UAAI,kBAAkB,kBAAkB;AACpC,aAAK,WAAW,OAAO,MAAM;AAC7B,YAAI,KAAK,eAAe,aAAa;AACjC,eAAK,eAAe,SAAS,MAAM;AAAA,QACvC,OAAO;AACH,eAAK,YAAY,UAAU,MAAM;AAAA,QACrC;AAAA,MACJ,WAAW,kBAAkB,eAAe;AACxC,YAAI,gBAAgB,wBAAwB,IAAI,IAAI;AACpD,YAAI,CAAC,eAAe;AAChB,kCAAwB,IAAI,MAAM,gBAAgB,EAAE;AAAA,QACxD;AACA,YAAI,cAAc,QAAQ,MAAM,IAAI,GAAG;AACnC,wBAAc,KAAK,MAAM;AAAA,QAC7B;AACA,YAAI,MAAM;AACN,eAAK,qBAAqB;AAAA,YACtB,GAAI,KAAK,sBAAsB,EAAC;AAAA,YAChC,GAAG,cAAc,OAAO,CAAC,MAAqB,CAAC,KAAK,oBAAoB,SAAS,CAAC,CAAC;AAAA,WACvF;AAAA,QACJ;AAAA,MACJ,OAAO;AACH,cAAM,UAAU,cAAc,QAAQ,UAAU;AAChD,YAAI,gBAAgB,wBAAwB,IAAI,IAAI;AACpD,YAAI,CAAC,eAAe;AAChB,kCAAwB,IAAI,MAAM,gBAAgB,EAAE;AAAA,QACxD;AACA,cAAM,kBAAkB,CAAC,UAAyB;AAC9C,cAAI,SAAS,cAAe,QAAQ,KAAK,IAAI,GAAG;AAC5C,0BAAe,KAAK,KAAK;AAAA,UAC7B;AACA,cAAI,MAAM;AACN,iBAAK,qBAAqB;AAAA,cACtB,GAAI,KAAK,sBAAsB,EAAC;AAAA,cAChC,GAAG,cAAe,OAAO,CAAC,MAAqB,CAAC,KAAK,oBAAoB,SAAS,CAAC,CAAC;AAAA,aACxF;AAAA,UACJ;AAAA,QACJ;AACA,YAAI,mBAAmB,SAAS;AAC5B,kBAAQ,KAAK,eAAe,EAAE,MAAM,MAAM;AAAA,UAAE,CAAC;AAAA,QACjD,WAAW,SAAS;AAChB,0BAAgB,OAAO;AAAA,QAC3B;AAAA,MACJ;AACA,aAAO;AAAA,IACX;AAAA,IAEA,mBAA+B;AAC3B,aAAO,QAAQ,KAAK,cAAc,KAAK,aAAa,EAAE,MAAM,QAAQ,CAAC;AAAA,IACzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IASA,oBAA0B;AAEtB,UAAI,MAAM,mBAAmB;AACzB,cAAM,mBAAkB;AAAA,MAC5B;AAEA,YAAM,OAAO,IAAI,QAAQ,IAAI;AAE7B,UAAI,CAAC,KAAK,cAAc;AACpB,aAAK,eAAe;AACpB,cAAM,aAAa,cAAc,IAAI,IAC9B,KAAK,oBAAmB,IAAK,KAAK,cAAc,KAAK,aAAa,EAAE,MAAM,QAAQ,IACnF,KAAK;AAGX,cAAM,OAAO,KAAK;AAClB,cAAM,OAAQ,KAAa,SAAU,KAAa,WAAW;AAC7D,YAAI,OAAO,SAAS,YAAY,KAAK,KAAK,IAAI;AAG9C,cAAM,QAAQ,OAAO,KAAK,qBAAqB,aACxC,KAAK,sBACN,KAAK;AACX,4BAAoB,MAAM,KAAK;AAE/B,aAAK,cAAc,KAAK,MAAM,IAAI;AAElC,QAAC,KAAa,WAAW,IAAI;AAE7B,YAAI,cAAc,IAAI,KAAK,YAAY;AACnC,gBAAM,WAAW,KAAK,QAAQ,OAAO,MAAM,IAAI,KAAK,SAAS,cAAc,MAAM;AACjF,gBAAM,eAAe,iBAAiB,MAAM,KAAK,MAAM;AAEvD,cAAI,wBAAwB,kBAAkB;AAC1C,iBAAK,gBAAgB;AAAA,UACzB;AAEA,gBAAM,WAAW;AAAA,YACb,+CAA+C,KAAK,aAAa;AAAA,YACjE,KAAK;AAAA,YACL,GAAI,KAAK,UAAU,IAAI,OAAK,EAAE,YAAY,IAAI,CAAC,KAAK,EAAC;AAAA,YACrD;AAAA,YACA;AAAA,WACJ,CAAE,OAAO,CAAC,MAAiB,KAAK,QAAS,UAAU,CAAC,CAAwB;AAE5E,qBAAW,OAAO,GAAG,QAAQ;AAE7B,gBAAM,gBAAgB,wBAAwB,IAAI,IAAI,KAAK,EAAC;AAC5D,cAAI,cAAc,SAAS,GAAG;AAC1B,uBAAW,qBAAqB;AAAA,cAC5B,GAAG,cAAc,OAAO,CAAC,MAAqB,CAAC,WAAW,oBAAoB,SAAS,CAAC,CAAC;AAAA,cACzF,uBAAO,IAAI,CAAC,GAAI,WAAW,sBAAsB,EAAG,CAAC;AAAA,aACzD;AAAA,UACJ;AAAA,QACJ;AAEA,aAAK,UAAU,OAAO,MAAM,IAAI;AAChC,eAAQ,KAAa,WAAW;AAAA,MACpC;AAAA,IACJ;AAAA;AAAA;AAAA;AAAA,IAKA,uBAA6B;AACzB,UAAI,MAAM,sBAAsB;AAC5B,cAAM,sBAAqB;AAAA,MAC/B;AAAA,IACJ;AAAA;AAAA;AAAA;AAAA,IAKA,kBAAwB;AACpB,UAAI,MAAM,iBAAiB;AACvB,cAAM,iBAAgB;AAAA,MAC1B;AAAA,IACJ;AAAA;AAAA;AAAA;AAAA,IAKA,yBAAyB,MAAc,UAAyB,UAA+B;AAC3F,UAAI,MAAM,0BAA0B;AAChC,cAAM,yBAAyB,MAAM,UAAU,QAAQ;AAAA,MAC3D;AAAA,IACJ;AAAA;AAIJ,QAAM,SAAS,eAAe,eAA6E;AAC3G,MAAI,IAAI,MAAM,MAAM;AACpB,UAAQ,IAAI,UAAU,MAAM;AAE5B,SAAO;AACX;;ACxrBA,MAAM,mCAAmB,SAAuC;AAEhE,MAAM,QAAQ,CAAC,MAAc,YAAqC;AAC9D,QAAM,UAAU,SAAS,UAAU,MAAM;AACzC,QAAM,UAAU,SAAS,UAAU,MAAM;AACzC,SAAO,GAAG,IAAI,MAAM,OAAO,MAAM,OAAO;AAC5C;AAEO,MAAM,uBAAuB,CAChC,QACA,MACA,SACA,UAAmC,EAAC,KACnC;AACD,MAAI,CAAC,UAAU,OAAQ,OAAe,qBAAqB,mBAAmB,MAAM;AAAA,EAAE;AAGtF,QAAM,aAAsC;AAAA,IACxC,SAAS,QAAQ,QAAQ,OAAO;AAAA,IAChC,SAAS,QAAQ,QAAQ,OAAO;AAAA,GACpC;AAEA,QAAM,MAAM,MAAM,MAAM,UAAU;AAClC,MAAI,OAAO,aAAa,IAAI,MAAM;AAClC,MAAI,CAAC,MAAM;AACP,+BAAW,KAAI;AACf,iBAAa,IAAI,QAAQ,IAAI;AAAA,EACjC;AAEA,MAAI,MAAM,KAAK,IAAI,GAAG;AACtB,MAAI,CAAC,KAAK;AACN,UAAM,+BAAe,KAAgB;AACrC,UAAM,WAAW,CAAC,OAAc;AAC5B,iBAAW,MAAM,MAAM,KAAK,QAAQ,GAAG;AACnC,YAAI;AACA,aAAG,EAAE;AAAA,QACT,SAAS,GAAG;AACR,kBAAQ,KAAK,CAAC;AAAA,QAClB;AAAA,MACJ;AAAA,IACJ;AACA,SAAK,IAAI,KAAK,MAAM,EAAE,UAAU,UAAU,SAAS,YAAY;AAC/D,IAAC,OAAe,iBAAiB,MAAM,UAAU,UAAU;AAAA,EAC/D;AAEA,MAAI,SAAS,IAAI,OAAqB;AAEtC,SAAO,MAAM;AACT,UAAM,UAAU,aAAa,IAAI,MAAM;AACvC,UAAM,SAAS,SAAS,IAAI,GAAG;AAC/B,QAAI,CAAC,QAAQ;AAEb,WAAO,SAAS,OAAO,OAAqB;AAC5C,QAAI,OAAO,SAAS,OAAO,GAAG;AAE9B,IAAC,OAAe,oBAAoB,MAAM,OAAO,UAAU,OAAO,OAAO;AACzE,aAAS,OAAO,GAAG;AACnB,QAAI,WAAW,QAAQ,SAAS,GAAG,aAAa,OAAO,MAAM;AAAA,EACjE;AACJ;AAqBA,MAAM,oCAAoB,SAA8C;AAExE,MAAM,qBAAqB,CAAC,OAAgC;AACxD,QAAM,WAAY,IAAY,WAAW;AACzC,SAAO,oBAAoB,cAAc,WAAW;AACxD;AAEA,MAAM,cAAc,CAAC,MAAwB,UAAmB,eAAwB;AACpF,MAAI,CAAC,MAAM,OAAO;AAClB,MAAI,SAAS,WAAW,OAAO;AAC/B,SAAO;AACX;AAQO,MAAM,kBAAkB,CAC3B,MACA,MACA,UAAmC,EAAE,SAAS,MAAM,SAAS,OAAM,EACnE,SAAwB,EAAC,KACxB;AACD,QAAM,SAAS;AACf,MAAI,CAAC,UAAU,OAAQ,OAAe,qBAAqB,YAAY;AACnE,WAAO,CAAC,UAAe,aAA4B,MAAM;AAAA,IAAE;AAAA,EAC/D;AAEA,QAAM,aAAsC;AAAA,IACxC,SAAS,QAAQ,QAAQ,OAAO;AAAA,IAChC,SAAS,QAAQ,QAAQ,OAAO;AAAA,GACpC;AACA,QAAM,WAA4B,OAAO,YAAY;AAErD,QAAM,MAAM,GAAG,IAAI,MAAM,WAAW,UAAU,MAAM,GAAG,MAAM,WAAW,UAAU,MAAM,GAAG,MAAM,QAAQ,OAAO,OAAO,OAAO,kBAAkB,EAAE,CAAC,OAAO,OAAO,OAAO,mBAAmB,EAAE,CAAC,QAAQ,OAAO,OAAO,4BAA4B,EAAE,CAAC;AAEnP,MAAI,OAAO,cAAc,IAAI,MAAM;AACnC,MAAI,CAAC,MAAM;AACP,+BAAW,KAAI;AACf,kBAAc,IAAI,QAAQ,IAAI;AAAA,EAClC;AAEA,MAAI,MAAM,KAAK,IAAI,GAAG;AACtB,MAAI,CAAC,KAAK;AACN,UAAM,8BAAc,KAAkC;AAEtD,UAAM,WAAW,CAAC,OAAc;AAC5B,UAAI,WAAW;AACf,UAAI,aAAa;AAEjB,YAAM,UAAU,CAAC,QAAqC;AAClD,YAAI,CAAC,OAAO,IAAI,SAAS,GAAG;AAC5B,mBAAW;AACX,mBAAW,MAAM,MAAM,KAAK,GAAG,GAAG;AAC9B,gBAAM,IAAI,GAAG,EAAE;AACf,cAAI,GAAG,aAAa;AAAA,QACxB;AAAA,MACJ;AAEA,YAAM,OAAQ,IAAY,gBAAe;AACzC,UAAI,MAAM,QAAQ,IAAI,GAAG;AACrB,YAAI,aAAa,WAAW;AACxB,qBAAW,KAAK,MAAM;AAClB,kBAAM,KAAK,mBAAmB,CAAC;AAC/B,gBAAI,CAAC,IAAI;AACT,kBAAM,MAAM,QAAQ,IAAI,EAAE;AAC1B,gBAAI,CAAC,KAAK;AACV,oBAAQ,GAAG;AACX;AAAA,UACJ;AAAA,QACJ,OAAO;AACH,qBAAW,KAAK,MAAM;AAClB,kBAAM,KAAK,mBAAmB,CAAC;AAC/B,gBAAI,CAAC,IAAI;AACT,oBAAQ,QAAQ,IAAI,EAAE,CAAC;AAAA,UAC3B;AAAA,QACJ;AAAA,MACJ,OAAO;AACH,YAAI,MAAM,mBAAoB,IAAY,MAAM;AAChD,eAAO,KAAK;AACR,gBAAM,MAAM,QAAQ,IAAI,GAAG;AAC3B,cAAI,KAAK;AACL,oBAAQ,GAAG;AACX,gBAAI,aAAa,WAAW;AAAA,UAChC;AACA,gBAAM,IAAI,IAAI,eAAc;AAC5B,gBAAO,IAAI,kBAAkB,aAAa,aAAa,EAAE,OAAO;AAAA,QACpE;AAAA,MACJ;AAEA,UAAI,YAAY,OAAO,gBAAgB,UAAU,UAAU,GAAI,IAAY,kBAAiB;AAC5F,UAAI,YAAY,OAAO,0BAA0B,UAAU,UAAU,GAAI,IAAY,4BAA2B;AAChH,UAAI,YAAY,OAAO,iBAAiB,UAAU,UAAU,GAAI,IAAY,mBAAkB;AAAA,IAClG;AAEA,UAAM,EAAE,SAAS,cAAc,MAAM,SAAS,YAAY,UAAU,QAAQ,UAAS;AACrF,SAAK,IAAI,KAAK,GAAG;AAAA,EACrB;AAEA,SAAO,CAAC,SAAc,YAA2B;AAC7C,UAAM,KAAK,mBAAmB,OAAO;AACrC,QAAI,CAAC,IAAI,OAAO,MAAM;AAAA,IAAE;AAGxB,QAAI,IAAK,QAAQ,SAAS,KAAK,CAAC,IAAK,cAAc;AAC/C,UAAK,eAAe,qBAAqB,QAAQ,MAAM,IAAK,UAAU,IAAK,OAAO;AAAA,IACtF;AAEA,QAAI,MAAM,IAAK,QAAQ,IAAI,EAAE;AAC7B,QAAI,CAAC,KAAK;AACN,gCAAU,KAAI;AACd,UAAK,QAAQ,IAAI,IAAI,GAAG;AAAA,IAC5B;AACA,QAAI,IAAI,OAAqB;AAE7B,WAAO,MAAM;AACT,YAAM,UAAU,cAAc,IAAI,MAAM;AACxC,YAAM,IAAI,SAAS,IAAI,GAAG;AAC1B,UAAI,CAAC,GAAG;AAER,YAAM,WAAW,mBAAmB,OAAO;AAC3C,UAAI,CAAC,UAAU;AAEf,YAAM,IAAI,EAAE,QAAQ,IAAI,QAAQ;AAChC,UAAI,CAAC,GAAG;AACR,QAAE,OAAO,OAAqB;AAC9B,UAAI,EAAE,SAAS,GAAG,EAAE,QAAQ,OAAO,QAAQ;AAE3C,UAAI,EAAE,QAAQ,SAAS,GAAG;AACtB,UAAE,gBAAe;AACjB,UAAE,eAAe;AACjB,iBAAS,OAAO,GAAG;AACnB,YAAI,WAAW,QAAQ,SAAS,GAAG,cAAc,OAAO,MAAM;AAAA,MAClE;AAAA,IACJ;AAAA,EACJ;AACJ;;AC3NA,MAAM,OAAO,OAAO,YAAY,cAAc,UAAU,kBAAkB;AAE1E,MAAM,OAAO,CAAC,IAAI,KAAK,QAAM;AAAE,MAAI,IAAI,SAAQ,IAAK,MAAM;AAAE,WAAQ,GAAG,OAAM,CAAE,GAAG,IAAI;AAAA,EAAM;AAAG;AAsBxF,SAAS,qBACZ,SAAc,MACd,MAAwB,WAAW,KAAK,GACxC,cAAwB,CAAC,eAAe,SAAS,eAAe,QAAQ,GACxE,UAAe,UAAU,iBAC3B;AACE,MAAI,CAAC,SAAS,OAAO,MAAM;AAAA,EAAE;AAC7B,QAAM,KAAK,IAAI,QAAQ,GAAG;AAC1B,QAAM,QAAQ,OAAO,QAAQ,aAAa,MAAM,CAAC,OAAO;AAAE,IAAC,EAAE,QAAQ,WAAW,IAAI,MAAM,KAAK,IAAI,WAAW,QAAQ,WAAW,YAAY,CAAC,SAAU,KAAK,IAAI,SAAS,KAAK,IAAI;AAAA,EAAO;AAC1L,QAAM,YAAY,YAAY;AAAA,IAAI,CAAC,UAC/B,qBAAqB,SAAS,OAAO,OAAc,EAAE,SAAS,OAAO,SAAS,OAAO;AAAA,GACzF;AACA,QAAM,UAAU,MAAM,UAAU,QAAQ,CAAC,OAAO,MAAM;AACtD,iBAAe,KAAK,OAAO,SAAS,OAAO;AAC3C,SAAO;AACX;AAGO,MAAM,YAAY,CAAC,QAAQ,WAAS;AACvC,MAAI,CAAC,QAAQ;AAAE,UAAM,MAAM,oBAAoB;AAAA,EAAG;AAClD,MAAK,QAAQ;AAAE,qBAAiB,MAAM;AAAA,EAAG;AACzC,kBAAgB,MAAM;AAC1B;AAGO,MAAM,mBAAmB,CAAC,UAAU,aAAa,CAAC,QAAM;AAC3D,QAAM,KAAK;AACX,cAAY,IAAI,UAAU;AAC1B,MAAI,CAAC,QAAQ,QAAQ,UAAU;AAC3B,UAAM,UAA4B,CAAC,GAAG,SAAS,GAAG,OAAO;AACzD,QAAI,IAAI,aAAa,GAAG;AACpB,MAAC,SAAyB,oBAAoB,IAAI,SAAS;AAAA,IAC/D;AAGA,UAAM,YAAY,CAAC,UAAa;AAC5B,YAAM,OAAO;AACb,YAAM,kBAAiB;AACvB,UAAI,MAAM,aAAa,IAAI,WAAW;AAClC,cAAM,QAA0B,CAAC,MAAM,SAAS,MAAM,OAAO;AAC7D,cAAM,QAA0B,CAAC,MAAM,CAAC,IAAI,QAAQ,CAAC,GAAG,MAAM,CAAC,IAAI,QAAQ,CAAC,CAAC;AAC7E,YAAI,KAAK,MAAM,GAAG,KAAK,IAAI,GAAG;AAC1B,mBAAS,OAAO,cAAc,eAAe,sCAAsC;AAGnF,mBAAS,IAAI;AACb,qBAAW,EAAE;AAAA,QACjB;AAAA,MACJ;AAAA,IACJ;AAGA,UAAM,kBAAkB,CAAC,UAAQ;AAC7B,YAAM,OAAO;AACb,UAAI,MAAM,aAAa,IAAI,WAAW;AAClC,QAAC,SAAyB,wBAAwB,IAAI,SAAS;AAC/D,iBAAS,IAAI;AAAA,MACjB;AAAA,IACJ;AAGA,UAAM,UAAU;AAAA,MACZ,eAAe;AAAA,MACf,iBAAiB;AAAA,MACjB,aAAa;AAAA,KACjB;AAGA,UAAM,UAAU,CAAC,UAAQ;AACrB,YAAM,OAAO;AACb,UAAI,MAAM,aAAa,IAAI,WAAW;AAClC,kBAAU,QAAQ,aAAW,WAAW;AAAA,MAC5C;AAAA,IACJ;AAGA,UAAM,WAAW,UAAU,MAAM,OAAO;AAAA,EAC5C;AACJ;AAGA,SAAS,aAAa,WAAiB,QAAuB;AAC1D,MAAI,OAAoB;AAExB,SAAO,MAAM;AACT,QAAI,SAAS,WAAW,OAAO;AAG/B,UAAM,UAAU;AAChB,QAAI,QAAQ,cAAc;AACtB,aAAO,QAAQ;AACf;AAAA,IACJ;AAGA,QAAI,KAAK,YAAY;AACjB,aAAO,KAAK;AACZ;AAAA,IACJ;AAGA,UAAM,OAAQ,KAAa,eAAc;AACzC,QAAI,QAAS,KAAoB,MAAM;AACnC,aAAQ,KAAoB;AAAA,IAChC,OAAO;AACH,aAAO;AAAA,IACX;AAAA,EACJ;AAEA,SAAO;AACX;AAGA,SAAS,SAAS,QAAsB,WAA6B;AACjE,MAAI,kBAAmB,UAAoB,OAAQ,OAAiB,iBAAiB,YAAY;AAC7F,WAAQ,OAAiB,cAAa,CAAE,SAAS,SAAS;AAAA,EAC9D;AAGA,QAAM,OAAQ,OAAe,SAAU,OAAe,SAAiB;AACvE,SAAO,OAAO,aAAa,WAAW,IAAI,IAAI;AAClD;AAGO,SAAS,wBAAwB,KAAc,SAAc,MAAM,SAAc,UAA0B,EAAC,EAAG;AAClH,QAAM;AAAA,IACF,OAAO,OAAO,YAAY,cAAc,UAAU,kBAAkB;AAAA,IACpE,cAAc,CAAC,UAAU,SAAS,aAAa;AAAA,IAC/C,kBAAkB;AAAA,GACtB,GAAI;AAMJ,QAAM,KAAK,IAAI,QAAQ,GAAG;AAG1B,WAAS,eAAe,IAAW;AAAE,QAAI,CAAC,SAAS,IAAI,SAAS,WAAW,OAAO,KAAK,CAAC,SAAS,IAAI,QAAQ,WAAW,MAAM,GAAG,KAAK,IAAI,SAAS,KAAK;AAAA,EAAG;AAC3J,WAAS,cAAc,IAAW;AAC9B,UAAM,IAAI;AACV,QAAI,CAAC,SAAS,GAAG,SAAS,WAAW,OAAO,KAAK,CAAC,SAAS,GAAG,QAAQ,WAAW,MAAM,GAAG,KAAK,IAAI,SAAS,KAAK;AAAA,EACrH;AAGA,QAAM,YAAY;AAAA,IACd,GAAG,UAAU,MAAM,OAAO,YAAY,YAAY,IAAI,WAAS,CAAC,OAAO,cAAc,CAAC,CAAC,CAAC;AAAA,IACxF,SAAS,MAAM,eAAe,aAAa;AAAA,GAC/C;AAMA,WAAS,UAAU;AACf,cAAU,QAAQ,QAAI,MAAM;AAAA,EAChC;AAGA,iBAAe,KAAK,OAAO,SAAS,OAAO;AAC3C,SAAO;AACX;;AClKO,MAAM,wCAAwB,SAAkB;AAkHvD,MAAM,wCAAwB,KAAiB;AACxC,MAAM,kBAAkB,CAAC,SAAS,YAAY,MAAI;AACrD,MAAI,kBAAkB,IAAI,SAAS,GAAG;AAAE;AAAA,EAAQ;AAGhD,QAAM,OAAO,MAAI;AACb,sBAAkB,OAAO,SAAS;AAClC,SAAK,UAAU,YAAU,UAAU;AACnC,SAAK,UAAU,YAAU,UAAU;AAAA,EACvC;AAGA,QAAM,eAAe,CAAC,MAAqD;AACvE,QAAI,GAAG,aAAa,aAAa,GAAG,aAAa,QAAQ,aAAa,QAAQ,YAAY,GAAG;AAEzF,QAAE,gBAAe;AACjB,wBAAkB,IAAI,WAAW,IAAI;AACrC,YAAK;AAAA,IACT,OAAO;AACH,wBAAkB,OAAO,SAAS;AAAA,IACtC;AAAA,EACJ;AAGA,QAAM,MAA4F,CAAC,cAAc,EAAC,MAAM,MAAK;AAC7H,QAAM,MAA4F,CAAC,cAAc,EAAC,MAAM,MAAM,SAAS,MAAK;AAG5I,QAAM,MAAM,UAAU,SAAS,iBAAiB;AAAA,IAC5C,SAAS;AAAA,IACT,eAAe;AAAA,IACf,eAAe;AAAA,GAClB;AACD,QAAM,MAAM,UAAU,SAAS;AAAA,IAC3B,SAAS;AAAA,IACT,eAAe;AAAA,IACf,eAAe;AAAA,GAClB;AACD,aAAW,MAAM,EAAE;AACvB;AAGA,IAAI,mBAAwB;AAC5B,IAAI,OAAO,gBAAgB,aAAa;AACpC,qBAAmB,MAAM,yBAAyB,aAAa;AAAA,IAC3D;AAAA,IACA,YAAY,MAAM,eAAe;AAAE,YAAM,MAAM,aAAa;AAAG,WAAK,WAAW,eAAe;AAAA,IAAS;AAAA,IACvG,IAAI,UAAU;AAAE,aAAO,KAAK;AAAA,IAAU;AAAA,IACtC,IAAI,QAAQ;AAAE,aAAO,KAAK,UAAU;AAAA,IAAO;AAAA,IAC3C,IAAI,SAAS;AAAE,aAAO,KAAK,UAAU;AAAA,IAAQ;AAAA,IAC7C,IAAI,WAAW;AAAE,aAAO,KAAK,UAAU;AAAA,IAAU;AAAA,IACjD,IAAI,WAAW;AAAE,aAAO,KAAK,UAAU;AAAA,IAAU;AAAA,IACjD,IAAI,WAAW;AAAE,aAAO,KAAK,UAAU;AAAA,IAAU;AAAA,IACjD,IAAI,WAAW;AAAE,aAAO,KAAK,UAAU;AAAA,IAAU;AAAA,IACjD,IAAI,UAAU;AAAE,aAAO,KAAK,UAAU,SAAS,SAAQ,IAAK;AAAA,IAAM;AAAA,IAClE,IAAI,eAAe;AAAE,aAAO,KAAK,UAAU,gBAAgB;AAAA,IAAQ;AAAA,GACvE;AACJ,OAAO;AACH,qBAAmB,MAAM,iBAAiB;AAAA,IACtC;AAAA,IACA,YAAY,MAAM,eAAe;AAAE,WAAK,WAAW,eAAe;AAAA,IAAS;AAAA,IAC3E,IAAI,UAAU;AAAE,aAAO,KAAK;AAAA,IAAU;AAAA,GAC1C;AACJ;AAIO,MAAM,cAAc,CACvB,IACA,KAAuB,EAAE,WAAW,GAAG,aAAa,SAAQ,EAC5D;AAAA,EACI,WAAW,CAAC,GAAG,CAAC;AAAA,EAChB,SAAW,CAAC,EAAC,OAAO,GAAC,EAAG,EAAC,OAAO,GAAE;AACtC,IAAI,EAAC,KACJ;AAED,MAAI,YAAY,MAAM,WAAW,YAAY,KAAI,EAAG;AACpD,QAAM,iBAAkB;AACxB,QAAM,kBAAkB,MAAM;AAC1B,QAAI,iBAAiB,WAAS,YAAY,KAAI,IAAK;AACnD,kBAAc,gBAAgB,aAAa;AAC3C,eAAW;AACX,WAAO;AAAA,EACX;AAGA,QAAM,KAAU;AAAA,IACZ;AAAA,IACA,UAAU,CAAC,GAAI,IAAI,YAAY,CAAC,GAAG,CAAC,CAAE;AAAA,IACtC,UAAU,CAAC,GAAG,QAAQ;AAAA,IACtB,UAAU,CAAC,GAAG,QAAQ;AAAA,IACtB,UAAU;AAAA,IACV,UAAU;AAAA,IACV,SAAS,IAAI,QAAQ,EAAE;AAAA,IACvB,QAAQ;AAAA;AAAA,GACZ;AAGA,QAAM,YAAY;AAAA;AAAA,KAAiB,CAAC,QAAM;AACtC,UAAI,IAAI,aAAa,KAAK,WAAW;AACjC,aAAK,kBAAiB;AACtB,YAAI,UAAU,KAAK,QAAQ,EAAE,GAAG;AAC5B,gBAAM,SAAS,CAAC,GAAI,KAAK,UAAW,CAAC,KAAK,WAAW,GAAG,KAAK,WAAW,CAAC,CAAY;AAAG,aAAG,WAAW,iBAAgB;AACtH,aAAG,WAAY,CAAC,GAAI,GAAG,SAAS,CAAC,SAAS,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK,IAAI,SAAS,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,CAAE;AACpH,aAAG,SAAY;AACf,aAAG,SAAS,CAAC,KAAM,GAAG,SAAS,CAAC,KAAK,GAAsB,GAAG,SAAS,CAAC,KAAM,GAAG,SAAS,CAAC,KAAK;AAChG,aAAG,SAAS,CAAC,KAAM,GAAG,SAAS,CAAC,KAAK,GAAG,SAAS,CAAC,MAAM,GAAG,GAAG,SAAS,CAAC,KAAM,GAAG,SAAS,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK;AAClH,cAAI,gBAAgB,IAAI,iBAAiB,cAAc;AAAA,YACnD,GAAG;AAAA,YACH,SAAS;AAAA,YACT,SAAS;AAAA,YACT,OAAO;AAAA,WACV,CAAC;AACF,cAAI,IAAI,SAAS,CAAC,KAAK,MAAM,GAAG,OAAO,CAAC,EAAE,QAAQ,GAAG,SAAS,CAAC,KAAK;AACpE,cAAI,IAAI,SAAS,CAAC,KAAK,MAAM,GAAG,OAAO,CAAC,EAAE,QAAQ,GAAG,SAAS,CAAC,KAAK;AACpE,cAAI,IAAI,SAAS,CAAC,KAAK,MAAM,GAAG,OAAO,CAAC,EAAE,QAAQ;AAAA,QACtD;AAAA,MACJ;AAAA,IACJ;AAAA,IAAI,EAAC,SAAS;AAAI,GAAC;AAGnB,QAAM,WAAW,QAAQ,eAAc;AACvC,QAAM,eAAe;AAAA;AAAA,KAAiB,CAAC,QAAM;AACzC,UAAI,IAAI,aAAa,KAAK,WAAW;AACjC,cAAM,MAAM,IAAI,WAAW;AAC3B,YAAI,UAAU,KAAK,QAAQ,GAAG,KAAK,KAAK,eAAe,WAAW,GAAG,KAAK,KAAK,UAAU,KAAK;AAC1F,cAAI,KAAK,QAAQ,aAAa;AAAE,4BAAgB,KAAK,KAAK,SAAS;AAAA,UAAG;AAGtE,yBAAe,MAAM,UAAU,UAAU,MAAM,CAAC;AAChD,oBAAU,UAAU,aAAW,WAAW;AAC1C,eAAK,wBAAwB,KAAK,SAAS;AAC3C,eAAK,gBAAgB,IAAI,iBAAiB,aAAa,EAAE,GAAG,KAAK,SAAS,MAAM,SAAS,IAAI,OAAO,KAAK,CAAC;AAC1G,aAAG,WAAW;AAAM,cAAI;AAAE,eAAG,YAAY;AAAA,UAAI,SAAS,GAAG;AAAA,UAAa;AAAA,QAC1E;AAAA,MACJ;AAAA,IACJ;AAAA,IAAI,EAAC,SAAS;AAAI,GAAC;AAGnB,MAAI,WAAgB;AACpB,kBAAgB,IAAI,IAAI,SAAS;AACjC,iBAAe,MAAM;AACjB,QAAI,IAAI,gBAAgB,IAAI,iBAAiB,eAAe,EAAE,GAAG,IAAI,SAAS,MAAM,SAAS,IAAI,OAAO,IAAI,CAAC,GAAG;AAE5G,UAAI,oBAAoB,IAAI,SAAS;AAGrC,iBAAW,UAAU,IAAI;AAAA,QACrB,eAAe;AAAA,QACf,iBAAiB;AAAA,QACjB,aAAa;AAAA,OAChB;AAGD,gBAAU,OAAO,GAAG,UAAU,SAAS,iBAAiB;AAAA,QACpD,iBAAiB;AAAA,QACjB,aAAa;AAAA,OAChB,CAAC;AAAA,IACN,OAAO;AAAE,SAAG,WAAW;AAAA,IAAM;AAAA,EACjC,CAAC;AAGD,SAAO,UAAU,WAAW;AAChC;AAGO,MAAM,gBAAgB,CAAC,wBAAwB,QAAY,MAAI;AAAC,GAAG,YAAsB,CAAC,EAAC,OAAO,GAAC,EAAG,EAAC,OAAO,GAAE,GAAG,WAAgB,CAAC,GAAG,CAAC,MAAI;AAC/I,MAAI,CAAC,WAAW;AAAE;AAAA,EAAQ;AAC1B,QAAM,UAAU,CAAC,IAAI,OAAK,YAAY,MAAM,wBAAwB,IAAI,EAAC,QAAQ,WAAW,UAAU,OAAO,YAAY,aAAa,WAAW,SAAS,IAAI,UAAS,GAAG,OAAO,KAAK;AAGtL,MAAI,OAAO,wBAAwB,oBAAoB,YAAY;AAAE,aAAS,wBAAwB,eAAe,OAAO;AAAA,EAAG,WAC3H,OAAO,0BAA0B,YAAa;AAAE,2BAAuB,OAAO;AAAA,EAAG,OACrF;AAAE,UAAM,IAAI,MAAM,4FAA4F;AAAA,EAAG;AAGjH,QAAM,UAAU,MAAI;AAAE,QAAI,OAAO,wBAAwB,uBAAuB,YAAY;AAAE,kBAAY,wBAAwB,eAAe,OAAO;AAAA,IAAG;AAAA,EAAE;AAC7J,SAAO,EAAE,WAAW,SAAS,SAAQ;AACzC;;AC1RO,MAAM,kBAAkB,CAAC,IAAgB,gBAA6B;AACzE,QAAM,KAAK,EAAE,aAAa,IAAI,QAAuB,GAAG,QAAQ,GAAG,eAAe,SAAS;AAC3F,QAAM,OAA6B,aAAa,OAC1C,OAAO,CAAC,MAAmB,GAAG,OAAO,CAACjB,OAAgBA,IAAG,MAAM,EAAE,CAAC,GAClE,OAAO,CAAC,MAAgB,GAAG,MAAM,EAAE;AAEzC,GAAC,MAAM,UAAU,aAAa;AAAA,IAC1B,aAAa,YAAY;AAAA,IACzB;AAAA,IACA,aAAa,YAAY,SAAS;AAAA,GACtC;AAEA,eAAa,YAAY,SAAQ;AAEjC,QAAM,KAAK,mBAAmB,aAAa,YAAY,OAAsB;AAC7E,MAAI,MAAM,MAAM,GAAG,QAAQ;AAC/B;AAEA,MAAM,iCAAiB,SAAqC;AAI5D,MAAM,kBAAkB,OAAO,aAAa,eAAe,UAAU,kBAC/D;AAAA,EACE,SAAS;AAAA,EACT;AAAA,EACA,EAAE,SAAS,MAAM,SAAS,OAAM;AAAA,EAChC,EAAE,UAAU,WAAW,gBAAgB,WAAW,0BAA0B;AAChF,IACE,CAAC,KAAU,aAAkB,MAAM;AAAE;AAE3C,MAAM,qBAAqB,CAAC,gBAA6C;AACrE,MAAI,eAAe,MAAM,OAAO;AAChC,SAAO,YAAY,sBAAsB,aAAa,MAAM,WAAW,aAAa,KAAK,CAAC;AAC9F;AAEO,MAAM,2BAA2B,CAAC,aAA0B,aAA0B;AACzF,QAAM,UAAU,CAAC,OAAmB;AAAE,oBAAgB,IAAI,QAAQ;AAAA,EAAG;AACrE,QAAM,YAAY,SAAS,aAAa,SAAS,SAAS,EAAE,UAAU,MAAM;AAC5E,SAAO,MAAM,aAAY;AAC7B;AAEO,MAAM,uBAAuB,CAAC,SAAiC,aAAa;AAC/E,MAAI,OAAO,EAAE,gCAAgC,MAAqB;AAClE,MAAI,CAAC,MAAM;AACP,WAAO;AACP,KAAC,kBAAkB,WAAW,OAAO,OAAO,QAAQ,OAAO,IAAI;AAAA,EACnE;AACA,SAAO;AACX;AAEO,MAAM,kBAAkB,CAC3B,gBACA,WACA,aACA,gBACC;AACD,SAAO,CAAC,OAAmB;AACvB,QAAI,UAAU;AAEd,UAAM,OAAO,eAAe,sBAAqB;AACjD,UAAM+B,cAAa,mBAAmB,IAAI;AAE1C,UAAM,YAAa,IAAI,UAAiC,kBAAmB,SAAS,iBAAiB,IAAI,WAAW,GAAG,IAAI,WAAW,CAAC;AACvI,UAAM,UAAU,EAAE,OAAO,IAAI,WAAqC,SAAS,gBAAgB,MAAY,aAAY;AACnH,gBAAY,UAAU;AAEtB,QAAI,aAAa,eAAe,OAAO,MAAM,OAAO;AAChD,aAAO;AAAA,IACX;AAEA,UAAM,aAAa,aAAa,aAAa,OAAO;AACpD,QAAI,MAAM,QAAQ,UAAU,KAAK,WAAW,QAAQ;AAChD,kBAAY,QAAQ;AAAA,IACxB;AAEA,QAAIA,aAAY,SAAS,IAAI,SAAS,eAAe;AACjD,MAAAA,YAAW,QAAQ;AACnB,mBAAa,YAAY,SAAQ;AACjC,aAAO;AAAA,IACX;AAEA,QAAI,aAAaA,aAAY;AACzB,gBAAU;AAGV,WAAK,YAAY;AACjB,MAAAA,YAAW,QAAQ;AAEnB,YAAM;AAAA,QACF,GAAI,aAAa,OACX,MAAM,CAAC,SAAS,SAAS;AACvB,gBAAM,QAAQ,SAAS;AAAA,YAAM,CAAC,SAC1B,gBAAgB,MAAM,MAAM,EAAE,kBAAkB,MAAM,QAAQ,EAAE,oBAAoB,MAAM,SAAS,EAAE;AAAA,WACzG;AACA,gBAAM,YAAa,SAAS,SAAS,KAAK,UAAW,aAAa,OAAO,UAAU,KAAK,IAClF,0CACA;AACN,iBAAO,CAAC,GAAG,OAAO,SAAS;AAAA,QAC/B,CAAC,GACC,QAAO,EACP,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK;AAAC,OACnC;AAEA,YAAM,QAAQ,uBAAuB,MAAM,YAAY,IAAI,SAAS,CAAC;AACrE,YAAM,cAAc,yBAAyB,MAAM,WAAW;AAG9D,YAAM,YAAY;AAAA,QACd;AAAA,QACA,CAAC,MAAkB;AACf,gBAAM,UAAU;AAChB,cAAI,EAAE,MAAM,WAAY,GAAG,UAAU,IAAY,KAAK,GAAG,WAAW,SAAS,WAAW,aAAa,CAAC,GAAG,QAAQ;AAC7G,yBAAa,YAAY,SAAQ;AACjC,kBAAM,KAAK,mBAAmB,IAAI;AAClC,gBAAI,MAAM,MAAM,GAAG,QAAQ;AAAA,UAC/B;AAAA,QACJ;AAAA,QACA,CAAC,SAAS,eAAe,QAAQ;AAAA,OACrC;AAGA,YAAM,YAAY,gBAAgB,MAAM,MAAM,IAAI;AAElD,kBAAY,aAAa;AAAA,QACrB;AAAA,QACA,SAAS;AAAA,QACT,OAAO;AAAA,QACP,SAAS,aAAa;AAAA,QACtB,QAAQ;AACJ,UAAAA,YAAW,QAAQ;AACnB,sBAAY,aAAa;AACzB,yBAAc;AACd,mBAAQ;AACR,uBAAY;AACZ,uBAAY;AAEZ,cAAI,YAAY,YAAY;AAAE,wBAAY,YAAW;AAAG,wBAAY,aAAa;AAAA,UAAM;AAAA,QAC3F;AAAA,OACJ;AAIA,UAAI,CAAC,YAAY,cAAcA,aAAY;AAEvC,oBAAY,aAAa,oBAAoB,MAAMA,aAAY,MAAM;AACjE,uBAAa,YAAY,SAAQ;AAAA,QACrC,CAAC;AAAA,MACL;AAAA,IACJ;AAEA,WAAO;AAAA,EACX;AACJ;AAGO,MAAM,iBAAiB,CAAC,gBAA6B,aAA0B,gBAA8B;AAChH,QAAM,YAAY,gBAAgB,gBAAgB,CAAC,OAAO,CAAC,IAAI,SAAS,IAAI,SAAS,GAAG,GAAG,aAAa,WAAW;AAGnH,QAAM,kBAAkB,mBAAmB,gBAAgB,MAAM;AAC7D,WAAO,gBAAgB,gBAAgB,SAAgB;AAAA,EAC3D,CAAC;AAED,SAAO,MAAM;AACT,uBAAkB;AAAA,EACtB;AACJ;;;;;;;;;;;;ACvMA,IAAI,gBAAqB;AACzB,MAAM,kBAAkB,OAAO,6BAA6B,eAAe,gBAAgB;AAG3F,MAAM,gCAAgB,KAAI;AAE1B,IAAI,oBAAyC;AAEtC,MAAM,eAAe,MAAoB;AAC5C,MAAI,mBAAmB,OAAO;AAE9B,sBAAoB,IAAI,QAAQ,OAAO,YAAY;AAE/C,QAAI,OAAO,WAAW,eAAe,CAAC,iBAAiB;AACnD,UAAI;AAEA,cAAM,cAAc,MAAM,oBAAoB;AAAA,UAC1C,MAAM;AAAA,UACN,QAAQC;AAAA,SACX;AAGD,wBAAgB,IAAI,oBAAoB,eAAe,YAAY,aAAa;AAAA,UAC5E,SAAS;AAAA;AAAA,UACT,SAAS;AAAA,UACT,UAAU;AAAA;AAAA,UACV,aAAa;AAAA;AAAA,SAChB;AAGD,gBAAQ,aAAa;AAAA,MACzB,SAAS,GAAG;AACR,gBAAQ,KAAK,0EAA0E,CAAC;AACxF,wBAAgB;AAChB,gBAAQ,IAAI;AAAA,MAChB;AAAA,IACJ,OAAO;AACH,sBAAgB;AAChB,cAAQ,IAAI;AAAA,IAChB;AAAA,EACJ,CAAC;AAED,SAAO;AACX;AAIO,MAAM,iBAAiE;AAAA,EAC1E,eAAe,OAAO,EAAE,QAAQ,MAAM,QAAO,KAAW;AACpD,QAAI;AACA,YAAM,OAAO,MAAM,UAAU,QAAQ,cAAa;AAClD,YAAM,SAAS,QAAQ,IAAI,OAAO,QAAQ,QAAQ,GAAG,EAAE,MAAM,GAAG,EAAE,OAAO,CAAC,MAAc,CAAC;AACzF,UAAI,UAAU;AACd,iBAAW,QAAQ,OAAO;AACtB,kBAAU,MAAM,QAAQ,mBAAmB,MAAM,EAAE,QAAQ;AAAA,MAC/D;AACA,YAAM,UAAiB,EAAC;AAExB,uBAAiB,CAAC,MAAM,KAAK,KAAK,QAAQ,SAAQ,EAAG;AACjD,gBAAQ,KAAK,CAAC,MAAM,KAAK,CAAC;AAAA,MAC9B;AACA,aAAO;AAAA,IACX,SAAS,GAAG;AACR,cAAQ,KAAK,+BAA+B,CAAC;AAC7C,aAAO,EAAC;AAAA,IACZ;AAAA,EACJ;AAAA,EAEA,UAAU,OAAO,EAAE,QAAQ,MAAM,MAAK,KAAW;AAC7C,QAAI;AACA,YAAM,OAAO,MAAM,UAAU,QAAQ,cAAa;AAClD,YAAM,SAAS,QAAQ,IAAI,OAAO,QAAQ,QAAQ,GAAG,EAAE,MAAM,GAAG,EAAE,OAAO,CAAC,MAAc,CAAC;AACzF,YAAM,WAAW,MAAM,KAAI;AAC3B,UAAI,MAAM;AACV,iBAAW,QAAQ,OAAO;AACtB,cAAM,MAAM,IAAI,mBAAmB,MAAM,EAAE,QAAQ,OAAO;AAAA,MAC9D;AACA,YAAM,aAAa,MAAM,IAAI,cAAc,UAAW,EAAE,QAAQ,OAAO;AACvE,YAAM,OAAO,MAAM,WAAW,SAAQ;AACtC,UAAI,SAAS,QAAQ,OAAO,MAAM,KAAK,MAAK;AAC5C,UAAI,SAAS,eAAe,OAAO,MAAM,KAAK,aAAY;AAC1D,aAAO;AAAA,IACX,SAAS,GAAG;AACR,cAAQ,KAAK,0BAA0B,CAAC;AACxC,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EAEA,WAAW,OAAO,EAAE,QAAQ,MAAM,MAAK,KAAW;AAC9C,QAAI;AACA,YAAM,OAAO,MAAM,UAAU,QAAQ,cAAa;AAClD,YAAM,SAAS,QAAQ,IAAI,OAAO,QAAQ,QAAQ,GAAG,EAAE,MAAM,GAAG,EAAE,OAAO,CAAC,MAAc,CAAC;AACzF,YAAM,WAAW,MAAM,KAAI;AAC3B,UAAI,MAAM;AACV,iBAAW,QAAQ,OAAO;AACtB,cAAM,MAAM,IAAI,mBAAmB,MAAM,EAAE,QAAQ,MAAM;AAAA,MAC7D;AACA,YAAM,aAAa,MAAM,IAAI,cAAc,UAAW,EAAE,QAAQ,MAAM;AACtE,YAAM,WAAW,MAAM,WAAW,gBAAe;AACjD,YAAM,SAAS,MAAM,IAAI;AACzB,YAAM,SAAS,OAAM;AACrB,aAAO;AAAA,IACX,SAAS,GAAG;AACR,cAAQ,KAAK,2BAA2B,CAAC;AACzC,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EAEA,QAAQ,OAAO,EAAE,QAAQ,MAAM,WAAU,KAAW;AAChD,QAAI;AACA,YAAM,OAAO,MAAM,UAAU,QAAQ,cAAa;AAClD,YAAM,SAAS,QAAQ,IAAI,OAAO,QAAQ,QAAQ,GAAG,EAAE,MAAM,GAAG,EAAE,OAAO,CAAC,MAAc,CAAC;AACzF,YAAM,OAAO,MAAM,KAAI;AACvB,UAAI,MAAM;AACV,iBAAW,QAAQ,OAAO;AACtB,cAAM,MAAM,IAAI,mBAAmB,MAAM,EAAE,QAAQ,OAAO;AAAA,MAC9D;AACA,YAAM,IAAI,YAAY,MAAO,EAAE,WAAW;AAC1C,aAAO;AAAA,IACX,QAAQ;AACJ,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EAEA,MAAM,OAAO,EAAE,MAAM,IAAG,KAAW;AAC/B,QAAI;AACA,YAAM,gBAAgB,OAAO,QAAa,SAAc;AACpD,YAAI,OAAO,SAAS,aAAa;AAC7B,2BAAiB,CAAC,MAAM,KAAK,KAAK,OAAO,SAAQ,EAAG;AAChD,gBAAI,MAAM,SAAS,aAAa;AAC5B,oBAAM,UAAU,MAAM,KAAK,mBAAmB,MAAM,EAAE,QAAQ,MAAM;AACpE,oBAAM,cAAc,OAAO,OAAO;AAAA,YACtC,OAAO;AACH,oBAAM,OAAO,MAAM,MAAM,SAAQ;AACjC,oBAAM,UAAU,MAAM,KAAK,cAAc,MAAM,EAAE,QAAQ,MAAM;AAC/D,oBAAM,WAAW,MAAM,QAAQ,gBAAe;AAC9C,oBAAM,SAAS,MAAM,IAAI;AACzB,oBAAM,SAAS,OAAM;AAAA,YACzB;AAAA,UACJ;AAAA,QACJ,OAAO;AACH,gBAAM,OAAO,MAAM,OAAO,SAAQ;AAClC,gBAAM,WAAW,MAAM,KAAK,gBAAe;AAC3C,gBAAM,SAAS,MAAM,IAAI;AACzB,gBAAM,SAAS,OAAM;AAAA,QACzB;AAAA,MACJ;AACA,YAAM,cAAc,MAAM,EAAE;AAC5B,aAAO;AAAA,IACX,SAAS,GAAG;AACR,cAAQ,KAAK,sBAAsB,CAAC;AACpC,aAAO;AAAA,IACX;AAAA,EACJ;AAAA;AAAA,EAGA,SAAS,YAAY;AAAA,EACrB,WAAW,YAAY;AAAA,EACvB,OAAO,YAAY;AAAA,EACnB,SAAS,YAAY;AACzB;AAGO,MAAM,OAAO,CAAC,MAAc,UAAe,EAAC,EAAG,WAAkB,EAAC,KAAM;AAE3E,MAAI,mBAAmB,eAAe,IAAI,GAAG;AACzC,WAAO,eAAe,IAAI,EAAE,OAAO;AAAA,EACvC;AAEA,SAAO,IAAI,QAAQ,OAAO,SAAS,WAAW;AAC1C,QAAI;AACA,YAAM,UAAU,MAAM,cAAa;AACnC,UAAI,CAAC,SAAS;AAEV,YAAI,eAAe,IAAI,GAAG;AACtB,iBAAO,QAAQ,eAAe,IAAI,EAAE,OAAO,CAAC;AAAA,QAChD;AACA,eAAO,OAAO,IAAI,MAAM,6BAA6B,CAAC;AAAA,MAC1D;AAGA,YAAM,SAAS,MAAM,QAAQ,QAAQ,MAAM,OAAO;AAClD,cAAQ,MAAM;AAAA,IAClB,SAAS,KAAK;AACV,aAAO,GAAG;AAAA,IACd;AAAA,EACJ,CAAC;AACL;AAGO,MAAM,SAAS,CAAC,SAAS;AAC5B,MAAI,OAAO,QAAQ,UAAU,OAAO;AAAM,SAAO,MAAM,QAAO,IAAK;AACnE,MAAI,CAAC,MAAM,WAAW,GAAG,GAAG;AAAE,WAAO,MAAM,QAAO,EAAG,QAAQ,GAAG,GAAG,MAAM,GAAG,EAAE,GAAG,OAAO,GAAG,GAAG,QAAO,IAAK;AAAA,EAAM;AAChH,QAAM,KAAK,CAAC,MAAM,QAAQ,SAAS,GAAG,IAAK,OAAO,MAAO;AAAM,SAAQ,CAAC,IAAI,WAAW,GAAG,IAAK,MAAM,KAAM;AAC/G;AASO,MAAM,wBAAwB;AAAA,EACjC,SAAS;AAAA,EAAa,UAAU;AAAA,EAChC,OAAO,CAAC,EAAE,aAAa,SAAS,QAAQ,EAAE,iBAAiB,CAAC,QAAQ,OAAO,SAAS,QAAQ,QAAQ,OAAO,SAAS,QAAQ,QAAQ,QAAQ,SAAS,QAAQ,QAAQ,SAAS,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,SAAS,QAAQ,QAAQ,QAAQ,KAAM,KAAM;AACvQ;AAGO,MAAM,kCAAkB,IAAgC;AAAA,EAC3D,CAAC,KAAK,YAAc,MAAM,WAAW,SAAS,gBAAkB;AAAA,EAChE,CAAC,UAAU,YAAa,MAAM,WAAW,SAAS,gBAAiB;AAAA,EACnE,CAAC,YAAY,YAAY;AAAE,YAAQ,KAAK,sCAAsC;AAAG,WAAO;AAAA,EAAM,CAAC;AACnG,CAAC;AAGM,MAAM,uCAAuB,KAAiB;AA4CrD,eAAsB,kBAAkB,YAAiB,UAAkB,IAAkB;AAEzF,MAAI,cAAc,QAAQ,cAAc,UAAa,YAAY,QAAO,EAAG,UAAU,GAAG;AACpF,iBAAa;AAAA,EACjB;AAGA,QAAM,UAAU,OAAO,cAAc,WAAW,YAAY,QAAO,EAAG,UAAU,OAAO,EAAE,GAAG,QAAO,EAAG,QAAQ,GAAG,GAAG,SAAS,OAAK,CAAC,CAAC,GAAG,QAAQ,GAAG,KAAK,CAAC,IAAI;AAC5J,MAAI,SAAS;AACT,QAAI,OAAO,gBAAgB,eAAe,KAAK,MAAM,cAAc,UAAU,cAAc,KAAK,IAAI,EAAE,SAAS,OAAO,GAAG;AAErH,mBAAa,kBAAkB,IAAI,OAAO;AAAA,IAC9C;AACA,QAAI,CAAC,YAAY;AAAE,mBAAc,MAAM,aAAa,MAAM,IAAI,OAAO,GAAG,KAAI,IAAO,MAAM,UAAU,QAAQ,cAAa;AAAA,IAAI;AAAC,EACjI;AAGA,MAAI,sBAAsB,2BAA2B;AACjD,WAAO;AAAA,EACX;AAGA,QAAM,iBAAiB,SAAS,QAAO,IAAK;AAC5C,QAAM,eAAe,eAAe,WAAW,GAAG,IAAI,iBAAiB,MAAM;AAG7E,MAAI,YAAyC;AAC7C,MAAI,kBAAkB;AAGtB,aAAW,CAAC,UAAU,YAAY,KAAK,YAAY,SAAQ,EAAG;AAC1D,QAAI,aAAa,WAAW,QAAQ,KAAK,SAAS,SAAS,iBAAiB;AACxE,kBAAY;AACZ,wBAAkB,SAAS;AAAA,IAC/B;AAAA,EACJ;AAGA,MAAI;AACA,UAAM,eAAe,YAAY,MAAM,WAAU,GAAI;AACrD,WAAO,gBAAgB,MAAM,WAAW,SAAS,gBAAe;AAAA,EACpE,SAAS,OAAO;AACZ,YAAQ,KAAK,6DAA6D,KAAK;AAC/E,WAAO,MAAM,WAAW,SAAS,gBAAe;AAAA,EACpD;AACJ;AAGO,SAAS,cAAc,WAAmB,IAAI,SAAyB;AAC1E,MAAI,CAAC,SAAS,MAAK,EAAG,OAAO;AAE7B,QAAM,eAAe,QAAQ,MAAK;AAGlC,MAAI,aAAa,WAAW,GAAG,GAAG;AAC9B,WAAO;AAAA,EACX;AAGA,QAAM,YAAY,SAAS,MAAM,GAAG,EAAE,OAAO,OAAK,GAAG,MAAM;AAC3D,QAAM,WAAW,aAAa,MAAM,GAAG,EAAE,OAAO,OAAK,GAAG,MAAM;AAE9D,aAAW,QAAQ,UAAU;AACzB,QAAI,SAAS,KAAK;AAEd;AAAA,IACJ,WAAW,SAAS,MAAM;AAEtB,UAAI,UAAU,SAAS,GAAG;AACtB,kBAAU,KAAI;AAAA,MAClB;AAAA,IACJ,OAAO;AAEH,gBAAU,KAAK,IAAI;AAAA,IACvB;AAAA,EACJ;AAEA,SAAO,MAAM,UAAU,KAAK,GAAG;AACnC;AAGA,eAAsB,YAAY,YAAiB,SAAiB,WAAmB,IAAwD;AAE3I,QAAM,oBAAoB,cAAc,UAAU,OAAO;AAGzD,QAAM,qBAAqB,MAAM,kBAAkB,YAAY,iBAAiB;AAEhF,SAAO;AAAA,IACH,YAAY;AAAA,IACZ,cAAc;AAAA,GAClB;AACJ;AAIO,SAAS,YAAY,QAAQ,QAAQ,SAAS;AAAE,WAAS,QAAQ,OAAO;AAAG,SAAO;AAAM;AACxF,SAAS,cAAc,QAAQ,SAAS;AAAE,UAAQ,MAAM,IAAI,MAAM,KAAK,OAAO,EAAE;AAAG;AAEnF,SAAS,oBAAoB,SAAS;AAAE,MAAI,SAAS,MAAK,EAAG,WAAW,GAAG,GAAG,OAAO;AAAa,SAAO;AAAQ;AACjH,SAAS,sBAAsB,UAAU;AAC5C,QAAM,MAAM,UAAU,QAAQ,GAAG,GAAG,SAAS,eAAc;AAC3D,QAAM,YAAY;AAAA,IACd,OAAO;AAAA,IACP,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,OAAO;AAAA,IACP,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,OAAO;AAAA,IACP,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,OAAO;AAAA,IACP,OAAO;AAAA,IACP,OAAO;AAAA,IACP,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,OAAO;AAAA,IACP,OAAO;AAAA,IACP,MAAM;AAAA;AAAA,GAEV;AACA,SAAO,UAAU,GAAG,KAAK;AAC7B;AAGO,MAAM,mBAAmB,CAAC,SAAiB;AAC9C,SAAO,MAAM,QAAO,EAAG,QAAQ,GAAG,IAAI,CAAC,GAAG,QAAO,EAAG,SAAS;AACjE;AAGA,eAAsB,mBAAmB,YAAY,SAAS,EAAE,SAAS,OAAO,WAAW,IAAG,GAAI,EAAC,EAAG,SAAS,eAAe;AAC1H,MAAI;AACA,UAAM,EAAE,YAAY,cAAc,iBAAiB,MAAM,YAAY,YAAY,SAAS,QAAQ;AAElG,UAAM,YAAY,cAAc,QAAO,EAAG,aAAa,QAAQ,IAC3D,cAAc,UAAU,UAAU,YAAY,EAAE,GAAG,QAAO,GAAI;AAElE,UAAM,QAAQ,UAAU,MAAM,GAAG,EAAE,OAAO,CAAC,MAAO,CAAC,CAAC,GAAG,QAAS;AAChE,QAAI,MAAM,SAAS,KAAK,iBAAiB,MAAM,MAAM,SAAS,CAAC,GAAG,QAAQ,GAAG;AAAE,aAAO,OAAM;AAAA,IAAG;AAAC;AAQhG,QAAI,MAAM;AACV,QAAI,OAAO,SAAS,GAAG;AACnB,iBAAW,QAAQ,OAAO;AACtB,cAAM,MAAM,KAAK,qBAAqB,MAAM,EAAE,QAAQ;AACtD,YAAI,CAAC,KAAK;AAAE;AAAA,QAAO;AAAC;AAAA,MACxB;AAAA,IACJ;AACA,WAAO;AAAA,EACX,SAAS,GAAQ;AAAE,WAAO,YAAY,QAAQ,SAAS,uBAAuB,EAAE,OAAO,EAAE;AAAA,EAAG;AAChG;AAGA,eAAsB,cAAc,YAAY,SAAS,EAAE,SAAS,OAAO,WAAW,IAAG,GAAI,EAAC,EAAG,SAAS,eAAe;AACrH,MAAI;AACA,UAAM,EAAE,YAAY,cAAc,iBAAiB,MAAM,YAAY,YAAY,SAAS,QAAQ;AAClG,UAAM,YAAY,cAAc,QAAO,EAAG,aAAa,QAAQ,IAC3D,cAAc,UAAU,UAAU,YAAY,EAAE,GAAG,QAAO,GAAI;AAElE,UAAM,QAAQ,UAAU,MAAM,GAAG,EAAE,OAAO,CAAC,MAAO,CAAC,CAAC,GAAG,QAAS;AAChE,QAAI,OAAO,UAAU,GAAG,OAAO;AAE/B,UAAM,WAAW,MAAM,SAAS,IAAI,MAAM,MAAM,SAAS,CAAC,GAAG,QAAO,EAAG,UAAU,QAAQ,GAAG,IAAI;AAChG,UAAM,UAAU,MAAM,SAAS,IAAI,OAAO,MAAM,GAAG,EAAE,GAAG,OAAO,GAAG,GAAG,UAAU,UAAU,QAAQ,GAAG,IAAI;AAExG,QAAI,WAAW,QAAO,EAAG,WAAW,GAAG,GAAG;AAAE,aAAO;AAAA,IAAM;AAAC;AAG1D,UAAM,MAAM,MAAM,mBAAmB,cAAc,SAAS,EAAE,QAAQ,UAAS,EAAG,MAAM;AACxF,WAAO,KAAK,gBAAgB,UAAU,EAAE,QAAQ;AAAA,EACpD,SAAS,GAAQ;AAAE,WAAO,YAAY,QAAQ,SAAS,kBAAkB,EAAE,OAAO,EAAE;AAAA,EAAG;AAC3F;AAGA,eAAsB,WAAW,YAAY,SAAS,UAAiC,EAAC,EAAG,SAAS,eAAe;AAC/G,MAAI;AACA,UAAM,EAAE,YAAY,oBAAoB,cAAa,GAAI,MAAM,YAAY,YAAY,SAAS,SAAS,YAAY,EAAE;AACvH,UAAM,OAAO,oBAAoB,YAAY;AAC7C,QAAI,QAAQ,aAAa;AACrB,YAAM,MAAM,MAAM,mBAAmB,oBAAoB,cAAc,QAAO,EAAG,UAAU,OAAO,EAAE,GAAG,SAAS,MAAM;AACtH,UAAI,KAAK,OAAO,EAAE,MAAM,aAAa,QAAQ,KAAI;AAAA,IACrD,OAAO;AACH,YAAM,OAAO,MAAM,cAAc,oBAAoB,cAAc,SAAS,MAAM;AAClF,UAAI,MAAM,OAAO,EAAE,MAAM,QAAQ,QAAQ,MAAK;AAAA,IAClD;AACA,WAAO;AAAA,EACX,SAAS,GAAQ;AAAE,WAAO,YAAY,QAAQ,SAAS,eAAe,EAAE,OAAO,EAAE;AAAA,EAAG;AACxF;AA0BO,MAAM,wCAAwB,KAA4B;AAkB1D,SAAS,cACZ,YACA,SACA,UAAkD,EAAE,QAAQ,OAAM,EAClE,SAAS,eACX;AACE,MAAI,WAAW;AAIf,MAAI,gBAAkC,wBAAQ,IAAI,KAAkB;AAEpE,QAAM,eAAe,YAAY;AAC7B,QAAI;AACA,YAAM,EAAE,YAAY,oBAAoB,iBAAiB,MAAM;AAAA,QAC3D;AAAA,QACA;AAAA,QACA,SAAS,YAAY;AAAA,OACzB;AACA,iBAAW,GAAG,oBAAoB,QAAQ,MAAM,IAAI,YAAY;AAChE,aAAO,EAAE,YAAY,oBAAoB,cAAa;AAAA,IAC1D,QAAQ;AACJ,aAAO,EAAE,YAAY,MAAM,cAAc,IAAG;AAAA,IAChD;AAAA,EACJ,IAAG;AAEH,QAAM,eAA+C,YAAY,KAAK,OAAO,EAAE,YAAAC,aAAY,cAAa,KAAM;AAC1G,QAAI,CAAC,cAAc,OAAO;AAE1B,UAAM,WAAW,kBAAkB,IAAI,QAAQ;AAC/C,QAAI,UAAU;AACV,eAAS;AAET,sBAAgB,SAAS;AACzB,aAAO;AAAA,IACX;AAEA,UAAM,WAAW,wBAAQ,IAAI,KAAkB;AAC/C,oBAAgB;AAEhB,UAAM,gBAAgB,QAAO;AAC7B,UAAM,mBAAmB,mBAAmBA,aAAY,cAAc,SAAS,MAAM;AAErF,UAAM,cAAc,YAAY;AAC5B,YAAMC,aAAY,cAAc,QAAO,EAAG,aAAa,QAAQ,IACzD,cAAc,UAAU,UAAU,YAAY,EAAE,GAAG,QAAO,GAC1D;AAEN,YAAMC,WAAe,MAAM;AAAA,QACvB;AAAA,QACA;AAAA,UACI,QAAQ;AAAA,UACR,MAAMD;AAAA,UACN,QAAQ,QAAQ;AAAA,SACpB;AAAA,QACAD,cAAa,CAACA,WAAU,IAAI;AAAC,OACjC;AAEA,UAAI,CAACE,UAAS,OAAO;AAErB,YAAM,WAAW,IAAI,IAAIA,QAAO;AAGhC,iBAAW,OAAO,SAAS,MAAK,EAAG;AAC/B,YAAI,CAAC,SAAS,IAAI,GAAG,GAAG,SAAS,OAAO,GAAG;AAAA,MAC/C;AAGA,iBAAW,CAAC,KAAK,MAAM,KAAK,UAAU;AAClC,YAAI,CAAC,SAAS,IAAI,GAAa,GAAG,SAAS,IAAI,KAAe,MAAM;AAAA,MACxE;AAEA,aAAO;AAAA,IACX;AAEA,UAAM,UAAU,MAAM;AAClB,WAAK,aAAa,EAAE,IAAI,eAAe;AACvC,gBAAU,OAAO,aAAa;AAC9B,wBAAkB,OAAO,QAAQ;AAAA,IACrC;AAEA,cAAU,IAAI,eAAe,CAAC,YAAmB;AAC7C,iBAAW,UAAU,SAAS;AAC1B,YAAI,CAAC,QAAQ,MAAM;AAEnB,YAAI,OAAO,SAAS,cAAc,OAAO,SAAS,aAAa,OAAO,SAAS,YAAY;AACvF,mBAAS,IAAI,OAAO,MAAM,OAAO,MAAM;AAAA,QAC3C,WAAW,OAAO,SAAS,aAAa,OAAO,SAAS,eAAe;AACnE,mBAAS,OAAO,OAAO,IAAI;AAAA,QAC/B;AAAA,MACJ;AAAA,IACJ,CAAC;AAED,UAAM,YAAY,cAAc,QAAO,EAAG,aAAa,QAAQ,IACzD,cAAc,UAAU,UAAU,YAAY,EAAE,GAAG,QAAO,GAC1D;AAEN;AAAA,MACI;AAAA,MACA;AAAA,QACI,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,IAAI;AAAA,OACR;AAAA,MACAF,cAAa,CAACA,WAAU,IAAI;AAAC,KACjC;AAGA,iBAAY;AAEZ,UAAM,WAA2B;AAAA,MAC7B;AAAA,MACA,WAAW;AAAA,MACX,aAAa;AAAA,MACb;AAAA,MACA,UAAU;AAAA,MACV;AAAA,MACA;AAAA,KACJ;AAEA,sBAAkB,IAAI,UAAU,QAAQ;AAExC,UAAM,UAAe,MAAM,QAAQ,IAAI,MAAM,MAAM,WAAW,MAAM,mBAAmB,WAAU,IAAK,EAAE,CAAC;AACzG,eAAW,CAAC,MAAM,MAAM,KAAK,SAAS;AAClC,UAAI,CAAC,SAAS,IAAI,IAAI,GAAG,SAAS,IAAI,MAAM,MAAM;AAAA,IACtD;AAEA,WAAO,EAAE,GAAG,UAAU,UAAS;AAAA,EACnC,CAAC;AAGD,MAAI,WAAW;AACf,QAAM,UAAU,MAAM;AAClB,QAAI,UAAU;AACd,eAAW;AACX,iBACK,KAAK,CAAC,MAAM;AACT,UAAI,CAAC,GAAG;AACR,QAAE;AACF,UAAI,EAAE,YAAY,GAAG,EAAE,SAAQ;AAAA,IACnC,CAAC,EACA,MAAM,QAAQ,IAAI;AAAA,EAC3B;AAGA,QAAM,UAA6B;AAAA,IAC/B,IAAI,SAAS,MAAM;AAGf,UACI,SAAS,OAAO,eAChB,SAAS,OAAO,YAChB,SAAS,cACT,SAAS,aACT,SAAS,aACT,SAAS,iBACT,SAAS,eACT,SAAS,aACX;AACE,eAAO;AAAA,MACX;AAEA,UAAI,SAAS,WAAW,OAAO;AAG/B,UAAI,SAAS,UAAU,OAAO,MAAM;AAGpC,UAAI,SAAS,WAAW,OAAO,MAAM,cAAc,SAAQ;AAC3D,UAAI,SAAS,QAAQ,OAAO,MAAM,cAAc,MAAK;AACrD,UAAI,SAAS,UAAU,OAAO,MAAM,cAAc,QAAO;AACzD,UAAI,SAAS,OAAO,UAAU,OAAO,MAAM,cAAc,OAAO,QAAQ,GAAE;AAG1E,UAAI,SAAS,QAAQ,OAAO,cAAc;AAC1C,UAAI,SAAS,OAAO,OAAO,CAAC,MAAc,cAAc,IAAI,CAAC;AAC7D,UAAI,SAAS,OAAO,OAAO,CAAC,MAAc,cAAc,IAAI,CAAC;AAG7D,UAAI,SAAS,WAAW,OAAO,MAAM,cAAc,SAAQ;AAC3D,UAAI,SAAS,QAAQ,OAAO,MAAM,cAAc,MAAK;AACrD,UAAI,SAAS,UAAU,OAAO,MAAM,cAAc,QAAO;AAGzD,UAAI,SAAS,WAAW;AACpB,eAAO,MACH,aACK,KAAK,CAAC,MAAM,GAAG,eAAe,EAC9B,KAAK,MAAM,GAAG;AAAA,MAC3B;AAGA,UAAI,SAAS,UAAU,SAAS,WAAW,SAAS,WAAW;AAE3D,cAAM,IAAI,aAAa,KAAK,MAAM,IAAI;AAEtC,eAAO,EAAE,IAAI,EAAE,KAAK,CAAC;AAAA,MACzB;AAGA,aAAO,IAAI,SACP,aAAa,KAAK,OAAO,MAAM;AAC3B,YAAI,CAAC,GAAG,OAAO;AACf,cAAM,KAAK,MAAM,EAAE;AACnB,cAAM,IAAI,KAAK,IAAI;AACnB,YAAI,OAAO,MAAM,mBAAmB,EAAE,MAAM,IAAI,IAAI;AACpD,eAAO;AAAA,MACX,CAAC;AAAA,IACT;AAAA;AAAA,IAGA,UAAU;AACN,aAAO,MAAM,KAAK,cAAc,MAAM;AAAA,IAC1C;AAAA,IAEA,2BAA2B;AACvB,aAAO,EAAE,YAAY,MAAM,cAAc,MAAK;AAAA,IAClD;AAAA,GACJ;AAEA,QAAM,KAAU,WAAY;AAAA,EAAE;AAC9B,QAAM,MAAM,IAAI,MAAM,IAAI,OAAO;AACjC,SAAO;AACX;AAGA,eAAsB,SAAS,YAAY,SAAS,UAAiC,EAAC,EAAG,SAAS,eAAe;AAC7G,MAAI;AACA,UAAM,EAAE,YAAY,cAAc,cAAa,GAAI,MAAM,YAAY,YAAY,SAAS,SAAS,YAAY,EAAE;AACjH,UAAM,YAAY,cAAc,QAAO,EAAG,aAAa,QAAQ,IAC3D,cAAc,UAAU,UAAU,YAAY,EAAE,GAAG,QAAO,GAAI;AAGlE,UAAM,OAAO,MAAM,KAAK,YAAY,EAAE,QAAQ,IAAI,MAAM,WAAW,MAAM,QAAO,EAAG,eAAe,CAAC,YAAY,IAAI,EAAE;AACrH,WAAO;AAAA,EACX,SAAS,GAAQ;AAAE,WAAO,YAAY,QAAQ,SAAS,aAAa,EAAE,OAAO,EAAE;AAAA,EAAG;AACtF;AAsBA,eAAsB,UAAU,YAAY,SAAS,MAAM,SAAS,eAAe;AAC/E,MAAI,gBAAgB,sBAAsB;AAAE,WAAO,MAAM,KAAK,SAAQ;AAAA,EAAG;AACzE,MAAI,gBAAgB,2BAA2B;AAC3C,UAAM,YAAY,MAAM,mBAAmB,MAAM,kBAAkB,UAAU,GAAG,WAAW,SAAS,QAAO,EAAG,WAAW,GAAG,IAAI,KAAK,QAAQ,MAAM,QAAQ,KAAK,QAAO,EAAG,UAAU,QAAQ,GAAG,GAAG,EAAE,QAAQ,MAAM;AAClN,WAAO,MAAM,4BAA4B,MAAM,WAAW,EAAE,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AAAA,EACrG;AAGI,QAAI;AACA,YAAM,EAAE,YAAY,cAAc,iBAAiB,MAAM,YAAY,YAAY,SAAS,EAAE;AAC5F,YAAM,YAAY,cAAc,QAAO,EAAG,aAAa,QAAQ,IAC3D,cAAc,UAAU,UAAU,YAAY,EAAE,GAAG,QAAO,GAAI;AAElE,YAAM,KAAK,aAAa,EAAE,QAAQ,IAAI,MAAM,WAAW,MAAK,EAAG,eAAe,CAAC,YAAY,IAAI,EAAE;AACjG,aAAO;AAAA,IACX,SAAS,GAAQ;AAAE,aAAO,YAAY,QAAQ,SAAS,cAAc,EAAE,OAAO,EAAE;AAAA,IAAG;AAC3F;AAeA,eAAsB,WAAW,YAAY,SAAS,UAAsD,EAAE,WAAW,MAAK,EAAG,SAAS,eAAe;AACrJ,MAAI;AACA,UAAM,EAAE,YAAY,cAAc,cAAa,GAAI,MAAM,YAAY,YAAY,SAAS,SAAS,YAAY,EAAE;AACjH,UAAM,YAAY,cAAc,QAAO,EAAG,aAAa,QAAQ,IAC3D,cAAc,UAAU,UAAU,YAAY,EAAE,GAAG,QAAO,GAAI;AAElE,UAAM,KAAK,UAAU,EAAE,QAAQ,IAAI,MAAM,WAAW,WAAW,QAAQ,aAAa,eAAe,CAAC,YAAY,IAAI,EAAE;AACtH,WAAO;AAAA,EACX,SAAS,GAAQ;AAAE,WAAO,YAAY,QAAQ,SAAS,eAAe,EAAE,OAAO,EAAE;AAAA,EAAG;AACxF;AAWA,eAAsB,OAAO,YAAY,SAAS,UAAiC,EAAC,EAAG,SAAS,eAAe;AAC3G,MAAI;AACA,WAAO,WAAW,YAAY,SAAS,EAAE,WAAW,MAAM,GAAG,SAAQ,EAAG,MAAM;AAAA,EAClF,SAAS,GAAQ;AAAE,WAAO,YAAY,QAAQ,SAAS,WAAW,EAAE,OAAO,EAAE;AAAA,EAAG;AACpF;AAUO,MAAM,eAAe,OAAO,SAAS;AAExC,MAAI,gBAAgB,sBAAsB;AAAE,WAAO,MAAM,KAAK,SAAQ;AAAA,EAAG;AACzE,MAAI,OAAO,QAAQ,UAAU;AAAE,WAAO,MAAM,QAAQ,IAAI;AAAA,EAAG;AAAG,QAAM,WAAW,MAAM;AAAM,MAAI,CAAC,UAAU;AAC1G,MAAI,sBAAsB,KAAK,WAAW;AAAE,SAAK,UAAU,iBAAiB,MAAM,QAAQ;AAAA,EAAG;AAG7F,MAAI,gBAAgB,2BAA2B;AAE3C,QAAI,YAAY,MAAM,sBAAsB;AAAA,MACxC,MAAM;AAAA,KACT,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AAGtC,QAAI,QAAQ,WAAW;AAEnB,kBAAa,MAAM,mBAAmB,WAAW,MAAM,QAAQ,IAAI,EAAE,QAAQ,MAAM,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC,KAAM;AAC9H,aAAO,MAAM,4BAA4B,MAAM,WAAW,EAAE,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AAAA,IACrG;AAGA;AAAA,EACJ;AAGA,QAAM,KAAK,OAAO,MAAM,qBAAqB,IAAI,QAAQ,CAAC,MAAM,EAAE;AAAA;AAAA,IAC9D,oBAAoB,MAAM,oBAAoB,OAAO,MAAM;AAAA;AAAA,IAC3D,oBAAoB,MAAM,oBAAoB,OAAO,MAAM;AAAA;AAAA,GAC9D,CAAC,wBACI;AAAA;AAAA,IAA0B;AAAA,iDAAsC;AAGtE,MAAI,QAAQ,oBAAoB;AAC5B,UAAM,aAAa,MAAM,IAAI,qBAAqB,EAAE,eAAe,UAAU,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AAClH,UAAM,qBAAqB,MAAM,YAAY,iBAAiB,EAAE,kBAAkB,MAAM,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AAC7H,UAAM,oBAAoB,QAAQ,IAAI,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AAC3E,UAAM,oBAAoB,SAAQ,EAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AAAA,EAC3E,OAAO;AACH,UAAM,IAAI,SAAS,cAAc,GAAG;AACpC,QAAI;AAAE,QAAE,OAAO,IAAI,gBAAgB,IAAI;AAAA,IAAG,SAAS,GAAG;AAAE,cAAQ,KAAK,CAAC;AAAA,IAAG;AACzE,MAAE,WAAW;AAAU,aAAS,KAAK,YAAY,CAAC;AAAG,MAAE,OAAM;AAC7D,eAAW,WAAY;AACnB,eAAS,KAAK,YAAY,CAAC;AAC3B,aAAO,IAAI,gBAAgB,EAAE,IAAI;AAAA,IACrC,GAAG,CAAC;AAAA,EACR;AACJ;AAGO,MAAM,UAAU,OAAO,MAAwB,IAAI,KAAK,UAAU;AACrE,QAAM,MAAe,KAAiB,OAAO;AAC7C,QAAM,WAAW,KAAK,UAAU,SAAS,QAAQ,EAAE,GAAG,QAAO;AAG7D,MAAI,UAAU,aAAa,OAAO,GAAG;AACjC,UAAM,OAAO,UAAU,UAAU,YAAY,EAAE,GAAG,QAAO;AACzD,UAAM,OAAO,MAAM,WAAW,SAAS,gBAAe;AACtD,UAAM,SAAS,MAAM,cAAc,MAAM,MAAM,EAAE,QAAQ,CAAC,CAAC,IAAI;AAE/D,QAAI,IAAI;AACJ,aAAO,QAAQ,kBAAiB;AAAA,IACpC;AACA,WAAO,QAAQ,WAAU;AAAA,EAC7B,OAAO;AACH,QAAI;AACA,UAAI,CAAC,KAAK,OAAO;AACjB,YAAM,IAAI,MAAM,MAAM,GAAG;AACzB,YAAM,OAAO,MAAM,GAAG,MAAK,EAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AAChE,YAAM,qBAAqB,GAAG,SAAS,MAAM,eAAe;AAC5D,YAAM,eAAe,qBAAqB,KAAK,MAAM,kBAAkB,IAAI;AAE3E,UAAI,MAAM;AACN,eAAO,IAAI,KAAK,CAAC,IAAI,GAAG,KAAK,UAAU,KAAK,YAAY,GAAG,IAAI,CAAC,GAAG;AAAA,UAC/D,MAAM,MAAM;AAAA,UACZ,cAAc,MAAM,YAAY,IAAI,IAAI;AAAA,SAC3C;AAAA,MACL;AAAA,IACJ,SAAS,GAAQ;AAAE,aAAO,YAAY,eAAe,SAAS,YAAY,EAAE,OAAO,EAAE;AAAA,IAAG;AAAA,EAC5F;AACJ;AAWO,MAAM,WAAW,OAAO,MAAM,OAAO,UAAU,QAAO,EAAG,UAAU,QAAQ,GAAG,GAAG,YAAkB;AACtG,QAAM,KAAK,MAAM,kBAAkB,IAAI;AACvC,QAAM,OAAO,OAAO,MAAM,UAAU,aAAa,QAAQ,IAAI,MAAM,UAAU,YAAY,EAAE,GAAG,WAAW,IAAI;AAC7G,QAAM,OAAO,MAAM,UAAU,SAAS,EAAE,GAAG,QAAO;AAGlD,SAAO,gBAAgB,OAAO,OAAQ,IAAI,KAAK,CAAC,IAAI,GAAG,QAAO,GAAI,OAAO,MAAM,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,MAAM;AAGhH,QAAM,KAAK,QAAQ,MAAM,QAAQ,cAAc,QAAO,EAAG,UAAU,QAAQ,GAAG;AAC9E,QAAM,UAAU,IAAI,IAAI,IAAI;AAI5B,SAAO,UAAU,IAAI,QAAO;AAChC;AAsBO,MAAM,aAAa,OAAO,OAAO,UAAU,UAAU,UAAU,QAAQ,GAAG,GAAG,YAAkB;AAClG,QAAM,KAAK;AAAsB,SAAO,MAAM,QAAO,EAAG,aAAa,QAAQ,IAAI,MAAM,QAAO,EAAG,UAAU,YAAY,EAAE,GAAG,QAAO,GAAI;AAGvI,QAAM,qBAAqB,SAAS,EAAE,GAAG,OAAO,MAAM,MAAM,0BAAM,OAAO,yBAAsC,mDAAK,EAAE;AACtH,SAAO,mBAAmB,EAAE,GAAG,uBAAuB,UAAU,MAAa,GAAG,OAAO,OAAO,UAAU,EAAC,KAAM;AAC3G,eAAW,UAAU,SAAS;AAC1B,YAAM,OAAQ,kBAA0B,OAAQ,SAAkB,MAAO,QAAgB,WAAU;AACnG,YAAM,SAAS,MAAM,IAAa;AAAA,IACtC;AAAA,EACJ,CAAC;AACL;AAGO,MAAM,aAAa,OAAO,SAAS,cAAc,IAAI,OAAM,GAAI;AACtE,IAAI,YAAY;AACZ,aAAW,WAAW;AACtB,aAAW,QAAQ;AACnB,aAAW,SAAS;AAIpB,MAAI;AACA,eAAW,MAAM,IAAI,gBAAgB,IAAI,KAAK,CAAC,0ZAA0Z,GAAG,EAAE,MAAM,iBAAiB,CAAC;AAAA,EAC1e,SAAS,GAAG;AAAA,EAAE;AAClB;AA6CO,MAAM,8BAA8B,OAAO,YAA8D,UAA4D,UAAU,EAAC,EAAG,SAAS,kBAAkB;AAEjN,SAAO,KAAK,QAAQ,EAAE,MAAM,YAAY,IAAI,UAAS,EAAG,CAAC,YAAY,QAAQ,CAAC;AAClF;AAGO,MAAM,wBAAwB,CACjC,MACA,WAAmB,UACnB,aAAkB,MAClB,kBACC;AACD,QAAM,QAAwB,EAAC;AAC/B,QAAM,QAAQ,MAAM,KAAK,MAAM,SAAS,EAAE;AAC1C,QAAM,QAAQ,MAAM,KAAK,MAAM,SAAS,EAAE;AAC1C,QAAM,YAAY,MAAM,QAAQ,IAAI,IAAI,OAAO,CAAC,GAAK,OAAO,OAAO,QAAQ,IAAI,OAAO,CAAC,IAAI,CAAG;AAG9F,SAAO,QAAQ,IAAI,YAAY;AAC3B,UAAM,eAAe,MAAM,kBAAkB,UAAU;AAGvD,UAAM,cAAc,OAAO,SAAc;AAErC,UAAI;AACJ,UAAI,KAAK,SAAS,UAAU,KAAK,SAAS,aAAa;AACnD,YAAI;AAEA,mBAAS,MAAM,KAAK,yBAAwB;AAAA,QAChD,QAAQ;AAAA,QAAE;AAAA,MACd;AAEA,UAAI,QAAQ;AACR,YAAI,OAAO,SAAS,aAAa;AAC7B,gBAAM,MAAM,MAAM,mBAAmB,cAAc,YAAY,OAAO,QAAQ,IAAI,MAAK,CAAE,QAAQ,QAAQ,GAAG,GAAG,EAAE,QAAQ,MAAM;AAC/H,cAAI,KAAK,MAAM,KAAK,4BAA4B,QAAQ,KAAK,EAAe,CAAC,CAAC;AAAA,QAClF,OAAO;AACH,gBAAM,OAAO,MAAM,OAAO,SAAQ;AAClC,gBAAM,OAAO,YAAY,KAAK,QAAQ,OAAO,MAAM,MAAK,CAAE,QAAQ,QAAQ,GAAG;AAC7E,gBAAM,KAAK,UAAU,cAAc,MAAM,IAAI,EAAE,KAAK,MAAM,gBAAgB,MAAM,IAAI,CAAC,CAAC;AAAA,QAC1F;AACA;AAAA,MACJ;AAGA,UAAI,KAAK,SAAS,UAAU,gBAAgB,MAAM;AAC9C,cAAM,OAAO,gBAAgB,OAAO,OAAO,KAAK,WAAU;AAC1D,YAAI,MAAM;AACN,gBAAM,OAAO,WAAY,KAAK,KAAM,MAAK,CAAE,QAAQ,QAAQ,GAAG;AAC9D,gBAAM,KAAK,UAAU,cAAc,MAAM,IAAI,EAAE,KAAK,MAAM,gBAAgB,MAAM,IAAI,CAAC,CAAC;AAAA,QAC1F;AACA;AAAA,MACJ;AAAA,IACJ;AAEA,QAAI,OAAO,SAAS,GAAG;AACnB,iBAAW,QAAQ,OAAc;AAC7B,cAAM,YAAY,IAAI;AAAA,MAC1B;AAAA,IACJ;AAEA,QAAI,OAAO,SAAS,GAAG;AACnB,iBAAW,QAAQ,OAAc;AAC7B,cAAM,YAAY,IAAI;AAAA,MAC1B;AAAA,IACJ;AAEA,QAAI,WAAW,SAAS,GAAG;AACvB,iBAAW,QAAQ,WAAW;AAC1B,cAAM,YAAY,IAAI;AAAA,MAC1B;AAAA,IACJ;AAGA,UAAM,UAAU,MAAM,UAAU,eAAe,KAAK,MAAM,UAAU,YAAY;AAChF,QAAI,WAAW,OAAO,YAAY,UAAU;AACxC,YAAM,OAAO,QAAQ,MAAM,OAAO,EAAE,OAAO,OAAO;AAClD,iBAAW,OAAO,MAAM;AACpB,YAAI,IAAI,WAAW,SAAS,GAAG;AAE/B,YAAI,IAAI,WAAW,QAAQ,GAAG;AAC1B,gBAAM,MAAM,IAAI,MAAK;AAErB,gBAAM,KAAK,QAAQ,IAAI,YAAY;AAC/B,kBAAM,YAAY,MAAM,WAAW,cAAc,GAAG;AACpD,gBAAI,WAAW,QAAQ;AACnB,oBAAM,OAAO,IAAI,MAAM,GAAG,EAAE,OAAO,OAAO,EAAE,KAAI;AAChD,kBAAI,UAAU,SAAS,aAAa;AAChC,sBAAM,MAAM,MAAM,mBAAmB,cAAc,WAAW,MAAM,EAAE,QAAQ,MAAM;AACpF,sBAAM,4BAA4B,UAAU,QAAQ,KAAK,EAAe,CAAC;AAAA,cAC7E,OAAO;AACH,sBAAM,OAAO,MAAM,UAAU,OAAO,SAAQ;AAC5C,sBAAM,OAAO,WAAW;AACxB,sBAAM,UAAU,cAAc,MAAM,IAAI;AACd,cAC9B;AAAA,YACJ;AAAA,UACJ,CAAC,CAAC;AAAA,QACN,OAAO;AAEH,gBAAM,KAAK,QAAQ,IAAI,YAAY;AAC/B,kBAAM,OAAO,MAAM,QAAQ,GAAG;AAC9B,gBAAI,MAAM;AACN,oBAAM,OAAO,WAAW,KAAK;AAC7B,oBAAM,UAAU,cAAc,MAAM,IAAI;AACd,YAC9B;AAAA,UACJ,CAAC,CAAC;AAAA,QACN;AAAA,MACJ;AAAA,IACJ;AAKA,QAAI,YAAY,CAAC,aAAa,eAAe;AACzC,iBAAW,QAAQ,WAAW;AAC1B,mBAAW,QAAQ,KAAK,OAAO;AAC3B,cAAI,KAAK,WAAW,QAAQ,KAAK,KAAK,WAAW,OAAO,GAAG;AACvD,kBAAM,OAAO,MAAM,KAAK,QAAQ,IAAI;AACpC,kBAAM,MAAM,KAAK,MAAM,GAAG,EAAE,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,KAAK;AAChD,kBAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,aAAa,KAAK,KAAK,IAAI,GAAG,IAAI,EAAE,MAAM;AACxE,kBAAM,OAAO,WAAW,KAAK;AAC7B,kBAAM,KAAK,UAAU,cAAc,MAAM,IAAI,EAAE,KAAK,MAAM,gBAAgB,MAAM,IAAI,CAAC,CAAC;AAAA,UAC1F;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAGA,UAAM,QAAQ,WAAW,KAAK,EAAE,MAAM,QAAQ,KAAK,KAAK,OAAO,CAAC;AAAA,EACpE,CAAC;AACL;;ACpoCA,MAAM,8CAA8B,KAAY;AAEhD;AAAA;AAAA,EACI,EAAE,MAAM,YAAY,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC3E,EAAE,MAAM,YAAY,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC3E,EAAE,MAAM,YAAY,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC3E,EAAE,MAAM,YAAY,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC3E,EAAE,MAAM,cAAc,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC7E,EAAE,MAAM,cAAc,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC7E,EAAE,MAAM,aAAa,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC5E,EAAE,MAAM,aAAa,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC5E,EAAE,MAAM,eAAe,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC9E,EAAE,MAAM,eAAe,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC9E,EAAE,MAAM,qBAAqB,QAAQ,uBAAuB,UAAU,OAAO,cAAc,OAAM;AAAA,EACjG,EAAE,MAAM,qBAAqB,QAAQ,uBAAuB,UAAU,OAAO,cAAc,OAAM;AAAA,EACjG,EAAE,MAAM,iBAAiB,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAChF,EAAE,MAAM,iBAAiB,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAChF,EAAE,MAAM,eAAe,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC9E,EAAE,MAAM,eAAe,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC9E,EAAE,MAAM,eAAe,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC9E,EAAE,MAAM,eAAe,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC9E,EAAE,MAAM,YAAY,QAAQ,YAAY,UAAU,OAAO,cAAc,KAAI;AAAA,EAC3E,EAAE,MAAM,YAAY,QAAQ,YAAY,UAAU,OAAO,cAAc;AAC3E,EAAE,QAAQ,CAAC,YAAiB;AACxB,MAAI,OAAO,OAAO,eAAe,CAAC,wBAAwB,IAAI,QAAQ,IAAI,GAAG;AACzE,QAAI;AACA,WAAK,mBAAmB,OAAO;AAC/B,8BAAwB,IAAI,QAAQ,IAAI;AAAA,IAC5C,SAAS,GAAG;AAAA,IAEZ;AAAA,EACJ;AACJ,CAAC;;ACpCM,MAAM,kBAAkB,SAAS;AAAA,EACpC,YAAY,MAAO;AAAE,UAAM,IAAI;AAAA,EAAG;AAAA;AAAA,EAGlC,QAAQ,IAAI;AACR,UAAM,OAAY,IAAI,SAAQ;AAC9B,MAAE,MAAM,EAAC,2BAAW,IAAI,IAAI,CAAC,eAAe,CAAC,GAAE;AAG/C,UAAM,OAAO,CAAC,KAAK,aAAa,KAAK,YAAY;AACjD,UAAM,iBAAiB,IAAI,eAAe,CAAC,YAAY;AACnD,iBAAW,SAAS,SAAS;AACzB,YAAI,OAAO,gBAAgB;AACvB,gBAAM,iBAAiB,OAAO,iBAAiB,CAAC;AAChD,eAAK,CAAC,IAAK,gBAAgB,cAAc,KAAK,CAAC,KAAK;AACpD,eAAK,CAAC,IAAK,gBAAgB,aAAa,KAAK,CAAC,KAAK;AAAA,QACvD;AAAA,MACJ;AAAA,IACJ,CAAC;AAGD,WAAO,eAAe,MAAM,QAAQ,EAAE,KAAK,MAAM,MAAM;AAGvD,mBAAe,QAAQ,MAAM,EAAC,KAAK,eAAc;AACjD,sBAAkB,IAAI,MAAM;AAAA,MACxB,gCAAgB,KAAiB;AAAA,MACjC,kCAAkB;AAAiB,KACtC;AAAA,EACL;AACJ;AAGA,IAAI,UAAU,YAAY;;AC/BnB,MAAM,oBAAoB,SAAS;AAAA,EACtC,YAAY,MAAO;AAAE,UAAM,IAAI;AAAA,EAAG;AAAA;AAAA,EAGlC,QAAQ,IAAI;AACR,UAAM,OAAY,IAAI,SAAQ,IAAK;AACnC,SAAK,UAAU,IAAI,cAAc;AAIjC,UAAM,OAAO,UAAU,CAAC,GAAG,SAAS,UAAU,uBAAuB,uBAAuB,KAAK,CAAC;AAClG,SAAK,MAAM,YAAY,UAAU,KAAK,KAAK;AAC3C,SAAK,MAAM,YAAY,YAAY,OAAO,KAAK;AAO/C,WAAO,eAAe,MAAM,QAAQ,EAAE,KAAK,MAAM,MAAM;AAGvD,WAAO,eAAe,MAAM,QAAQ;AAAA,MAChC,KAAK,MAAM,WAAW,KAAK,KAAK,KAAK;AAAA,MACrC,KAAK,CAAC,UAAU;AAAE,aAAK,QAAQ;AAAO,aAAK,MAAM,YAAY,UAAU,KAAK;AAAA,MAAG;AAAA,KAClF;AAGD,WAAO,eAAe,MAAM,UAAU;AAAA,MAClC,KAAK,MAAM,SAAS,OAAO,KAAK,KAAK;AAAA,MACrC,KAAK,CAAC,UAAU;AAAE,eAAO,QAAQ;AAAO,aAAK,MAAM,YAAY,YAAY,KAAK;AAAA,MAAG;AAAA,KACtF;AAGD,UAAM,OAAO,WAAW,KAAK,aAAa,KAAK,YAAY;AAC3D,UAAM,iBAAiB,IAAI,eAAe,CAAC,YAAY;AACnD,iBAAW,SAAS,SAAS;AACzB,YAAI,OAAO,gBAAgB;AACvB,gBAAM,iBAAiB,OAAO,iBAAiB,CAAC;AAChD,eAAK,EAAE,QAAS,gBAAgB,cAAc,KAAK,EAAE,SAAS;AAC9D,eAAK,EAAE,QAAS,gBAAgB,aAAa,KAAK,EAAE,SAAS;AAAA,QACjE;AAAA,MACJ;AAAA,IACJ,CAAC;AAGD,mBAAe,QAAQ,MAAM,EAAC,KAAK,eAAc;AACjD,sBAAkB,IAAI,MAAM;AAAA,MACxB,gCAAgB,KAAiB;AAAA,MACjC,kCAAkB;AAAiB,KACtC;AAGD,WAAO;AAAA,EACX;AACJ;AAGA,IAAI,YAAY,cAAc;;AC5DvB,MAAM,cAAc;AAG3B,SAAS,aAAa,OAAO;AACzB,MAAI,OAAO,UAAU,UAAU,OAAO;AACtC,MAAI,QAAQ,MAAM,MAAK,CAAE,aAAY;AAGrC,MAAI,UAAU,eAAe,OAAO;AAGpC,MAAI,MAAM,WAAW,GAAG,GAAG;AACvB,UAAM,MAAM;AACZ,QAAI,IAAI,WAAW,GAAG,OAAO;AAC7B,QAAI,IAAI,WAAW,GAAG,OAAO;AAC7B,QAAI,IAAI,WAAW,GAAG;AAClB,YAAM,IAAI,IAAI,CAAC;AACf,YAAM,KAAK,IAAI;AACf,aAAO,MAAM,SAAS,IAAI,EAAE,IAAI,KAAK,GAAG,CAAC;AAAA,IAC7C;AACA,QAAI,IAAI,WAAW,GAAG;AAClB,YAAM,KAAK,IAAI,MAAM,GAAG,CAAC;AACzB,aAAO,MAAM,SAAS,IAAI,EAAE,IAAI,KAAK,GAAG,CAAC;AAAA,IAC7C;AACA,WAAO;AAAA,EACX;AAGA,QAAM,UAAU,MAAM,MAAM,sBAAsB;AAClD,MAAI,CAAC,SAAS;AAEV,WAAO;AAAA,EACX;AAEA,EAAa,QAAQ,CAAC;AACtB,QAAM,OAAO,QAAQ,CAAC,EAAE,MAAK;AAI7B;AACI,UAAM,WAAW,KAAK,YAAY,GAAG;AACrC,QAAI,aAAa,IAAI;AACjB,YAAM,OAAO,KAAK,MAAM,WAAW,CAAC,EAAE,MAAK;AAC3C,YAAM,IAAI,oBAAoB,IAAI;AAClC,UAAI,KAAK,MAAM,OAAO,MAAM,GAAG,GAAG,CAAC;AACnC,aAAO;AAAA,IACX;AAAA,EACJ;AAIA,MAAI,KAAK,SAAS,GAAG,GAAG;AACpB,UAAM,QAAQ,KAAK,MAAM,GAAG,EAAE,IAAI,OAAK,EAAE,MAAM;AAC/C,QAAI,MAAM,UAAU,GAAG;AACnB,YAAM,IAAI,oBAAoB,MAAM,CAAC,CAAC;AACtC,UAAI,KAAK,MAAM,OAAO,MAAM,GAAG,GAAG,CAAC;AACnC,aAAO;AAAA,IACX;AAEA,WAAO;AAAA,EACX;AAGA,SAAO;AACX;AAEA,SAAS,oBAAoB,KAAK;AAC9B,MAAI,CAAC,KAAK,OAAO;AAEjB,MAAI,IAAI,SAAS,GAAG,GAAG;AACnB,UAAM9D,KAAI,WAAW,GAAG;AACxB,QAAI,OAAO,MAAMA,EAAC,GAAG,OAAO;AAC5B,WAAOA,KAAI;AAAA,EACf;AAEA,QAAM,IAAI,WAAW,GAAG;AACxB,MAAI,OAAO,MAAM,CAAC,GAAG,OAAO;AAC5B,SAAO;AACX;AAEA,SAAS,MAAM,GAAG,KAAK,KAAK;AACxB,SAAO,KAAK,IAAI,KAAK,KAAK,IAAI,KAAK,CAAC,CAAC;AACzC;AAKA,MAAM,OAAO,CAAC,UAAgB;AAC1B,MAAI,CAAC,SAAS,SAAS,MAAM,OAAO;AACpC,UAAQ,eAAe,KAAK,KAAK,KAAK;AAC1C;AAGA,MAAM,kBAAkB,CAAC,IAAI,UAAU,QAAS,SAAO;AACnD,sBAAoB,YAAU;AAC1B,QAAI,CAAC,MAAO,OAAO,MAAM,YAAa;AACtC,WAAO,MAAM;AACT,YAAM,QAAQ,IAAI,IAAI,GAAG,IAAI;AAC7B,YAAM,IAAI,QAAQ,CAAC,MAAI,WAAW,GAAG,OAAO,CAAC;AAC7C,YAAM,IAAI,QAAQ,CAAC,MAAI,oBAAoB,GAAG,EAAC,SAAS,KAAI,CAAC;AAC7D,YAAM,IAAI,QAAQ,CAAC,MAAI,sBAAsB,CAAC,CAAC;AAAA,IACnD;AAAA,EACJ,GAAG,EAAC,SAAS,KAAK;AACtB;AAGO,MAAM,cAAc,CAAC,GAAG,GAAG,SAA6B,SAAO;AAElE,QAAM,SAAS,MAAM,KAAK,SAAS,kBAAkB,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,OACjE,cAAc,eAAgB,MAAM,WACrC,IAAI,SAAS,SAAS,OAAO,WAAW,IAAI,SAAS,KAAK,IAAI,OAAO;AAAA,EACrE,IAAI,kBAAkB,EAAE,uBAAuB,MAAM,iBAAiB,MAAM,oBAAoB,MAAM,KACtG,IAAI,UAAU,qBAAqB,KACnC,IAAI,OAAO,iBAAiB,SAAS,KAAK,MAC9C,EACA,IAAI,CAAC,YAAY;AACd,UAAM,WAAW,mBAAmB,OAAO;AAC3C,WAAO;AAAA,MACH;AAAA,MACA,QAAQ,SAAS,UAAU,UAAU,KAAK,EAAE,KAAK;AAAA,MACjD,OAAQ,UAAU,mBAAmB;AAAA,KACzC;AAAA,EAAC,CAAC,EACL,KAAK,CAAC,GAAG,MAAM,KAAK,KAAK,EAAE,SAAS,EAAE,MAAM,CAAC,EAC7C,OAAO,CAAC,EAAE,OAAM,KAAK,KAAK,KAAK,CAAE;AAGlC,MAAI,SAAS,CAAC,GAAG,mBAAmB,aAAa;AAC7C,WAAO,SAAS,CAAC,GAAG,SAAS;AAAA,EACjC;AAGA,SAAO;AACX;AAGO,MAAM,iBAAiB,CAAC,WAAS;AAEpC,QAAM,MAAM,QAAQ,uBAAsB;AAC1C,MAAI,KAAK;AACL,UAAM,IAAI,OAAO,mBAAuB;AACxC,UAAM,KAAuB,EAAE,IAAI,OAAO,IAAI,SAAS,IAAI,IAAI,MAAM,IAAI,UAAU,CAAC;AACpF,WAAO,YAAY,GAAG,IAAI,MAAM;AAAA,EACpC;AACJ;AAGO,MAAM,qBAAqB,CAAC,OAAO,SAAS,oBAAkB;AACjE,MAAI,QAAQ,MAAM,gBAAgB,wBAAwB,KAAK,MAAM,gBAAgB,0BAA0B;AAG/G,MAAI,CAAC,SAAS,QAAQ,SAAS,iBAAiB;AAC5C,YAAQ,SAAS,cAAc,MAAM;AACrC,UAAM,aAAa,QAAQ,aAAa;AACxC,UAAM,aAAa,oBAAoB,EAAE;AACzC,UAAM,aAAa,WAAW,aAAa;AAC3C,aAAS,KAAK,YAAY,KAAK;AAAA,EACnC;AAEA,QAAM,QAAQ,YAAY,OAAO,aAAa,IAAI,EAAE;AACpD,OAAK,SAAS,SAAS,WAAW,MAAM,QAAQ,SAAS,iBAAiB;AACtE,WAAO,eAAe,WAAW,KAAK;AAAA,EAC1C;AACJ;AAGO,MAAM,kBAAkB,CAAC,OAAO,SAAS,oBAAoB;AAChE,OAAK,iBAAiB,8BAA8B,EAAE,QAAQ,CAAC,WAAS;AACpE,QAAI,QAAQ;AAAE,qBAAe,MAAM;AAAA,IAAG;AAAA,EAC1C,CAAC;AACL;AAGO,MAAM,eAAe,CAAC,OAAO,SAAS,oBAAkB;AAC3D,aAAW,8BAA8B,EAAE,iBAAiB,UAAU,CAAC,EAAC,KAAM,gBAAgB,IAAI,CAAC;AAGnG,QAAM,UAAU,MAAI;AAChB,uBAAmB,IAAI;AACvB,oBAAgB,IAAI;AAAA,EACxB;AAGA,WAAS,MAAM,aAAa,MAAI,oBAAoB,SAAS,EAAC,SAAS,KAAI,CAAC;AAC5E,WAAS,MAAM,aAAa,MAAI,oBAAoB,SAAS,EAAC,SAAS,KAAI,CAAC;AAC5E,WAAS,MAAM,mBAAmB,MAAI,oBAAoB,SAAS,EAAC,SAAS,KAAI,CAAC;AAClF,WAAS,QAAQ,QAAQ,MAAI,oBAAoB,SAAS,EAAC,SAAS,KAAI,CAAC;AACzE,WAAS,UAAU,oBAAoB,MAAI,oBAAoB,SAAS,EAAC,SAAS,KAAI,CAAC;AACvF,kBAAgB,SAAS,GAAG;AAChC;;AC7LO,MAAM,cAAc,YAAY;AACnC,sBAAmB;AACnB,mBAAgB;AACpB;AAMA,IAAI,OAAO,YAAY,aAAa;AAChC,wBAAsB,MAAI,eAAe;AACzC,kBAAe;AACnB;;ACbO,MAAM,SAAS;AAAA,EACV;AAAA,EACA;AAAA,EAER,YAAY,IAA2C,GAAG,IAA2C,GAAG;AACpG,SAAK,KAAK,OAAO,MAAM,WAAW,UAAU,CAAC,IAAI;AACjD,SAAK,KAAK,OAAO,MAAM,WAAW,UAAU,CAAC,IAAI;AAAA,EACrD;AAAA,EAEA,IAAI,IAAI;AAAE,WAAO,KAAK;AAAA,EAAI;AAAA,EAC1B,IAAI,EAAE,OAA8C;AAChD,QAAI,OAAO,UAAU,UAAU;AAC3B,WAAK,GAAG,QAAQ;AAAA,IACpB,OAAO;AACH,WAAK,KAAK;AAAA,IACd;AAAA,EACJ;AAAA,EAEA,IAAI,IAAI;AAAE,WAAO,KAAK;AAAA,EAAI;AAAA,EAC1B,IAAI,EAAE,OAA8C;AAChD,QAAI,OAAO,UAAU,UAAU;AAC3B,WAAK,GAAG,QAAQ;AAAA,IACpB,OAAO;AACH,WAAK,KAAK;AAAA,IACd;AAAA,EACJ;AAAA;AAAA,EAGA,IAAI,IAAI;AAAE,WAAO,KAAK;AAAA,EAAI;AAAA,EAC1B,IAAI,IAAI;AAAE,WAAO,KAAK;AAAA,EAAI;AAAA;AAAA,EAG1B,UAAU;AACN,WAAO,CAAC,KAAK,IAAI,KAAK,EAAE;AAAA,EAC5B;AAAA;AAAA,EAGA,QAAQ;AACJ,WAAO,IAAI,SAAS,KAAK,GAAG,OAAO,KAAK,GAAG,KAAK;AAAA,EACpD;AAAA;AAAA,EAGA,IAAI,GAAW,GAAW;AACtB,SAAK,GAAG,QAAQ;AAChB,SAAK,GAAG,QAAQ;AAChB,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,KAAK,GAAa;AACd,SAAK,GAAG,QAAQ,EAAE,EAAE;AACpB,SAAK,GAAG,QAAQ,EAAE,EAAE;AACpB,WAAO;AAAA,EACX;AAAA;AAAA,EAGA,IAAI,GAAuB;AACvB,WAAO,IAAI,SAAS,KAAK,GAAG,QAAQ,EAAE,EAAE,OAAO,KAAK,GAAG,QAAQ,EAAE,EAAE,KAAK;AAAA,EAC5E;AAAA,EAEA,SAAS,GAAuB;AAC5B,WAAO,IAAI,SAAS,KAAK,GAAG,QAAQ,EAAE,EAAE,OAAO,KAAK,GAAG,QAAQ,EAAE,EAAE,KAAK;AAAA,EAC5E;AAAA,EAEA,SAAS,QAA0B;AAC/B,WAAO,IAAI,SAAS,KAAK,GAAG,QAAQ,QAAQ,KAAK,GAAG,QAAQ,MAAM;AAAA,EACtE;AAAA,EAEA,OAAO,QAA0B;AAC7B,QAAI,WAAW,GAAG,MAAM,IAAI,MAAM,kBAAkB;AACpD,WAAO,IAAI,SAAS,KAAK,GAAG,QAAQ,QAAQ,KAAK,GAAG,QAAQ,MAAM;AAAA,EACtE;AAAA;AAAA,EAGA,IAAI,GAAqB;AACrB,WAAO,KAAK,GAAG,QAAQ,EAAE,EAAE,QAAQ,KAAK,GAAG,QAAQ,EAAE,EAAE;AAAA,EAC3D;AAAA;AAAA,EAGA,MAAM,GAAqB;AACvB,WAAO,KAAK,GAAG,QAAQ,EAAE,EAAE,QAAQ,KAAK,GAAG,QAAQ,EAAE,EAAE;AAAA,EAC3D;AAAA;AAAA,EAGA,YAAoB;AAChB,WAAO,KAAK,KAAK,KAAK,GAAG,QAAQ,KAAK,GAAG,QAAQ,KAAK,GAAG,QAAQ,KAAK,GAAG,KAAK;AAAA,EAClF;AAAA;AAAA,EAGA,mBAA2B;AACvB,WAAO,KAAK,GAAG,QAAQ,KAAK,GAAG,QAAQ,KAAK,GAAG,QAAQ,KAAK,GAAG;AAAA,EACnE;AAAA;AAAA,EAGA,WAAW,GAAqB;AAC5B,UAAM,KAAK,KAAK,GAAG,QAAQ,EAAE,EAAE;AAC/B,UAAM,KAAK,KAAK,GAAG,QAAQ,EAAE,EAAE;AAC/B,WAAO,KAAK,KAAK,KAAK,KAAK,KAAK,EAAE;AAAA,EACtC;AAAA;AAAA,EAGA,kBAAkB,GAAqB;AACnC,UAAM,KAAK,KAAK,GAAG,QAAQ,EAAE,EAAE;AAC/B,UAAM,KAAK,KAAK,GAAG,QAAQ,EAAE,EAAE;AAC/B,WAAO,KAAK,KAAK,KAAK;AAAA,EAC1B;AAAA;AAAA,EAGA,YAAsB;AAClB,UAAM,MAAM,KAAK,WAAU;AAC3B,QAAI,QAAQ,GAAG,OAAO,IAAI,SAAS,GAAG,CAAC;AACvC,WAAO,IAAI,SAAS,KAAK,GAAG,QAAQ,KAAK,KAAK,GAAG,QAAQ,GAAG;AAAA,EAChE;AAAA;AAAA,EAGA,OAAO,GAAa,YAAoB,MAAe;AACnD,WAAO,KAAK,IAAI,KAAK,GAAG,QAAQ,EAAE,EAAE,KAAK,IAAI,aACtC,KAAK,IAAI,KAAK,GAAG,QAAQ,EAAE,EAAE,KAAK,IAAI;AAAA,EACjD;AAAA;AAAA,EAGA,KAAK,GAAa,GAAqB;AACnC,UAAM,WAAW,KAAK,IAAI,GAAG,KAAK,IAAI,GAAG,CAAC,CAAC;AAC3C,WAAO,IAAI;AAAA,MACP,KAAK,GAAG,SAAS,EAAE,EAAE,QAAQ,KAAK,GAAG,SAAS;AAAA,MAC9C,KAAK,GAAG,SAAS,EAAE,EAAE,QAAQ,KAAK,GAAG,SAAS;AAAA,KAClD;AAAA,EACJ;AAAA;AAAA,EAGA,QAAQ,GAAqB;AACzB,UAAM,MAAM,KAAK,IAAI,CAAC;AACtB,UAAM,MAAM,KAAK,MAAM,CAAC;AACxB,WAAO,KAAK,MAAM,KAAK,GAAG;AAAA,EAC9B;AAAA;AAAA,EAGA,OAAO,OAAyB;AAC5B,UAAM,MAAM,KAAK,IAAI,KAAK;AAC1B,UAAM,MAAM,KAAK,IAAI,KAAK;AAC1B,WAAO,IAAI;AAAA,MACP,KAAK,GAAG,QAAQ,MAAM,KAAK,GAAG,QAAQ;AAAA,MACtC,KAAK,GAAG,QAAQ,MAAM,KAAK,GAAG,QAAQ;AAAA,KAC1C;AAAA,EACJ;AAAA;AAAA,EAGA,YAAY,GAAuB;AAC/B,UAAM,SAAS,KAAK,IAAI,CAAC,IAAI,EAAE,kBAAiB;AAChD,WAAO,EAAE,SAAS,MAAM;AAAA,EAC5B;AAAA;AAAA,EAGA,QAAQ,QAA4B;AAChC,UAAM,mBAAmB,OAAO,WAAU;AAC1C,UAAM,aAAa,KAAK,IAAI,gBAAgB;AAC5C,WAAO,KAAK,SAAS,iBAAiB,SAAS,IAAI,UAAU,CAAC;AAAA,EAClE;AAAA;AAAA,EAGA,MAAM,KAAe,KAAyB;AAC1C,WAAO,IAAI;AAAA,MACP,KAAK,IAAI,IAAI,EAAE,OAAO,KAAK,IAAI,IAAI,EAAE,OAAO,KAAK,GAAG,KAAK,CAAC;AAAA,MAC1D,KAAK,IAAI,IAAI,EAAE,OAAO,KAAK,IAAI,IAAI,EAAE,OAAO,KAAK,GAAG,KAAK,CAAC;AAAA,KAC9D;AAAA,EACJ;AAAA;AAAA,EAGA,MAAc;AACV,WAAO,KAAK,IAAI,KAAK,GAAG,OAAO,KAAK,GAAG,KAAK;AAAA,EAChD;AAAA;AAAA,EAGA,MAAc;AACV,WAAO,KAAK,IAAI,KAAK,GAAG,OAAO,KAAK,GAAG,KAAK;AAAA,EAChD;AAAA;AAAA,EAGA,OAAO,OAAiB;AACpB,WAAO,IAAI,SAAS,GAAG,CAAC;AAAA,EAC5B;AAAA,EAEA,OAAO,MAAgB;AACnB,WAAO,IAAI,SAAS,GAAG,CAAC;AAAA,EAC5B;AAAA,EAEA,OAAO,QAAkB;AACrB,WAAO,IAAI,SAAS,GAAG,CAAC;AAAA,EAC5B;AAAA,EAEA,OAAO,QAAkB;AACrB,WAAO,IAAI,SAAS,GAAG,CAAC;AAAA,EAC5B;AAAA;AAAA,EAGA,OAAO,UAAU,OAAe,SAAiB,GAAa;AAC1D,WAAO,IAAI;AAAA,MACP,KAAK,IAAI,KAAK,IAAI;AAAA,MAClB,KAAK,IAAI,KAAK,IAAI;AAAA,KACtB;AAAA,EACJ;AAAA;AAAA,EAGA,OAAO,UAAU,OAAe,QAA0B;AACtD,WAAO,SAAS,UAAU,OAAO,MAAM;AAAA,EAC3C;AACJ;AAEO,MAAM,aAAa,CAAC,IAA2C,GAAG,IAA2C,MAAM;AACtH,SAAO,IAAI,SAAS,GAAG,CAAC;AAC5B;;ACnKO,MAAM,eAAe,CAAC,IAA2C,GAC5C,IAA2C,GAC3C,QAA+C,GAC/C,SAAgD,OAAe;AAAA,EACvF,UAAU,WAAW,GAAG,CAAC;AAAA,EACzB,MAAM,WAAW,OAAO,MAAM;AAClC;AAqDO,MAAM,mBAAmB,CAAC,OAAiB,SAA2B;AACzE,SAAO,IAAI;AAAA,IACP,SAAS,CAAC,MAAM,GAAG,KAAK,SAAS,GAAG,KAAK,KAAK,CAAC,GAAG,MAC9C,KAAK,IAAI,KAAK,SAAS,EAAE,OAAO,KAAK,IAAI,MAAM,EAAE,OAAO,KAAK,SAAS,EAAE,QAAQ,KAAK,KAAK,EAAE,KAAK,CAAC,CAAC;AAAA,IACvG,SAAS,CAAC,MAAM,GAAG,KAAK,SAAS,GAAG,KAAK,KAAK,CAAC,GAAG,MAC9C,KAAK,IAAI,KAAK,SAAS,EAAE,OAAO,KAAK,IAAI,MAAM,EAAE,OAAO,KAAK,SAAS,EAAE,QAAQ,KAAK,KAAK,EAAE,KAAK,CAAC,CAAC;AAAA,GAC3G;AACJ;AA4NA,MAAM,cAAc,CAAC,UAA+C;AAChE,QAAM,OAAuC,EAAC;AAE9C,QAAM,WAAW,CAAC,SAAc;AAC5B,QAAI,QAAQ,OAAO,SAAS,YAAY,WAAW,MAAM;AAErD,WAAK,KAAK,IAAI;AAAA,IAClB,WAAW,MAAM,QAAQ,IAAI,GAAG;AAE5B,WAAK,QAAQ,QAAQ;AAAA,IACzB,WAAW,QAAQ,OAAO,SAAS,UAAU;AAEzC,aAAO,OAAO,IAAI,EAAE,QAAQ,QAAQ;AAAA,IACxC;AAAA,EACJ;AAEA,WAAS,KAAK;AACd,SAAO;AACX;AAGO,MAAM,WAAW,CAAC,MAAa,OAAkC;AAEpE,QAAM,mBAAmB,MAAM,KAAK,IAAI,SAAO;AAC3C,QAAI,OAAO,OAAO,QAAQ,YAAY,WAAW,KAAK;AAClD,aAAO,IAAI;AAAA,IACf;AACA,WAAO;AAAA,EACX,CAAC;AAED,QAAM,gBAAgB,GAAG,GAAG,kBAAkB;AAG9C,MAAI,OAAO,kBAAkB,UAAU;AACnC,UAAM,SAAS,UAAU,aAAa;AAEtC,UAAMiE,gBAAe,MAAM;AACvB,aAAO,QAAQ,GAAG,GAAG,kBAAkB;AAAA,IAC3C;AAGA,UAAMC,WAAU,YAAY,IAAI;AAGhC,IAAAA,SAAQ,QAAQ,SAAO,SAAS,KAAKD,aAAY,CAAC;AAElD,WAAO;AAAA,EACX;AAIA,MAAI,gBAAgB;AAEpB,QAAM,eAAe,MAAM;AACvB,oBAAgB,GAAG,GAAG,kBAAkB;AAAA,EAC5C;AAGA,QAAM,UAAU,YAAY,IAAI;AAGhC,UAAQ,QAAQ,SAAO,SAAS,KAAK,YAAY,CAAC;AAElD,SAAO;AACX;;ACxRO,MAAM,aAAa;AAAA;AAAA,EAEtB,OAAO,YAAY,QAAgD;AAC/D,WAAO;AAAA,MAAS,CAAC,OAAO,GAAG,OAAO,CAAC;AAAA,MAAG,MAClC,aAAa,OAAO,EAAE,KAAK,OAAO,OAAO,EAAE,KAAK;AAAA,KACpD;AAAA,EACJ;AAAA;AAAA,EAGA,OAAO,YAAY,QAAkB,IAAkC,UAAU,CAAC,GAAiC;AAC/G,WAAO;AAAA,MAAS,CAAC,OAAO,GAAG,OAAO,GAAG,CAAC;AAAA,MAAG,MACrC,eAAe,OAAO,EAAE,KAAK,OAAO,OAAO,EAAE,KAAK,OAAO,EAAE,KAAK;AAAA,KACpE;AAAA,EACJ;AAAA;AAAA,EAGA,OAAO,QAAQ,QAAgD;AAC3D,WAAO;AAAA,MAAS,CAAC,OAAO,GAAG,OAAO,CAAC;AAAA,MAAG,MAClC,SAAS,OAAO,EAAE,KAAK,KAAK,OAAO,EAAE,KAAK;AAAA,KAC9C;AAAA,EACJ;AAAA;AAAA,EAGA,OAAO,OAAO,OAAmE;AAC7E,WAAO,SAAS,CAAC,KAAK,GAAG,MAAM,UAAU,MAAM,KAAK,MAAM;AAAA,EAC9D;AAAA;AAAA,EAGA,OAAO,QAAQ,YAA0E;AACrF,WAAO,SAAS,YAAY,MAAM,WAAW,IAAI,OAAK,EAAE,KAAK,EAAE,KAAK,GAAG,CAAC;AAAA,EAC5E;AAAA;AAAA,EAGA,OAAO,SAAS,QAAgD;AAC5D,WAAO;AAAA,MAAS,OAAO;AAAA,MAAU,MAC7B,UAAU,OAAO,SAAS,IAAI,OAAK,EAAE,KAAK,EAAE,KAAK,IAAI,CAAC;AAAA,KAC1D;AAAA,EACJ;AAAA;AAAA,EAGA,OAAO,SAAS,QAAgD;AAC5D,WAAO;AAAA,MAAS,OAAO;AAAA,MAAU,MAC7B,YAAY,OAAO,SAAS,IAAI,OAAK,EAAE,KAAK,EAAE,KAAK,IAAI,CAAC;AAAA,KAC5D;AAAA,EACJ;AACJ;AAGO,MAAM,YAAY;AAAA;AAAA,EAErB,OAAO,QAAQ,QAA6F;AACxG,WAAO;AAAA,MACH,MAAM,SAAS,CAAC,OAAO,CAAC,GAAG,MAAM,GAAG,OAAO,EAAE,KAAK,IAAI;AAAA,MACtD,KAAK,SAAS,CAAC,OAAO,CAAC,GAAG,MAAM,GAAG,OAAO,EAAE,KAAK,IAAI;AAAA,KACzD;AAAA,EACJ;AAAA;AAAA,EAGA,OAAO,MAAM,QAA2D;AACpE,WAAO;AAAA,MACH,OAAO,SAAS,CAAC,OAAO,GAAG,OAAO,CAAC,GAAG,MAAM,GAAG,OAAO,EAAE,KAAK,MAAM,OAAO,EAAE,KAAK,IAAI;AAAA,KACzF;AAAA,EACJ;AAAA;AAAA,EAGA,OAAO,KAAK,QAAiG;AACzG,WAAO;AAAA,MACH,OAAO,SAAS,CAAC,OAAO,CAAC,GAAG,MAAM,GAAG,OAAO,EAAE,KAAK,IAAI;AAAA,MACvD,QAAQ,SAAS,CAAC,OAAO,CAAC,GAAG,MAAM,GAAG,OAAO,EAAE,KAAK,IAAI;AAAA,KAC5D;AAAA,EACJ;AACJ;AAGO,MAAM,UAAU;AAAA;AAAA,EAEnB,OAAO,cACH,SACA,QACA,gBAAiE,WACjE,SACU;AACV,UAAM,iBAAiB,aAAa,YAAY,MAAM;AACtD,UAAM,SAAS,kBAAkB,YAAY,WAC/B,kBAAkB,YAAY,eAC9B,kBAAkB,eAAe,iBAAiB;AAChE,WAAO,OAAO,SAAS,aAAa,gBAAgB,OAAO,MAAM,MAAM;AAAA,IAAC;AAAA,EAC5E;AAAA;AAAA,EAGA,OAAO,aACH,SACA,QACA,gBAAiE,WACjE,SACU;AACV,UAAM,WAAW,YAAY,QAAQ,MAAM;AAC3C,UAAM,SAAS,kBAAkB,YAAY,WAC/B,kBAAkB,YAAY,eAC9B,kBAAkB,eAAe,iBAAiB;AAEhE,UAAM,YAAY,OAAO,SAAS,QAAQ,SAAS,MAAM,OAAO,MAAM,MAAM;AAAA,IAAC;AAC7E,UAAM,WAAW,OAAO,SAAS,OAAO,SAAS,KAAK,OAAO,MAAM,MAAM;AAAA,IAAC;AAC1E,WAAO,MAAM;AAAE,mBAAY;AAAG,kBAAW;AAAA,IAAG;AAAA,EAChD;AAAA;AAAA,EAGA,OAAO,SACH,SACA,QACA,gBAAiE,WACjE,SACU;AACV,UAAM,OAAO,YAAY,KAAK,MAAM;AACpC,UAAM,SAAS,kBAAkB,YAAY,WAC/B,kBAAkB,YAAY,eAC9B,kBAAkB,eAAe,iBAAiB;AAEhE,UAAM,aAAa,OAAO,SAAS,SAAS,KAAK,OAAO,OAAO,MAAM,MAAM;AAAA,IAAC;AAC5E,UAAM,cAAc,OAAO,SAAS,UAAU,KAAK,QAAQ,OAAO,MAAM,MAAM;AAAA,IAAC;AAC/E,WAAO,MAAM;AAAE,oBAAa;AAAG,qBAAc;AAAA,IAAG;AAAA,EACpD;AAAA;AAAA,EAGA,OAAO,aACH,SACA,UACA,OACA,OAAe,MACf,gBAAiE,WACjE,SACU;AACV,UAAM,WAAW,SAAS,CAAC,KAAK,GAAG,MAAM,GAAG,MAAM,KAAK,GAAG,IAAI,EAAE;AAChE,UAAM,SAAS,kBAAkB,YAAY,WAC/B,kBAAkB,YAAY,eAC9B,kBAAkB,eAAe,iBAAiB;AAChE,WAAO,OAAO,SAAS,UAAU,UAAU,OAAO,MAAM,MAAM;AAAA,IAAC;AAAA,EACnE;AAAA;AAAA,EAGA,OAAO,mBACH,SACA,QACA,OAAe,MACf,gBAAiE,WACjE,SACU;AACV,UAAM,WAAW;AAAA,MAAS,CAAC,OAAO,GAAG,OAAO,CAAC;AAAA,MAAG,MAC5C,GAAG,OAAO,EAAE,KAAK,GAAG,IAAI,IAAI,OAAO,EAAE,KAAK,GAAG,IAAI;AAAA,KACrD;AACA,UAAM,SAAS,kBAAkB,YAAY,WAC/B,kBAAkB,YAAY,eAC9B,kBAAkB,eAAe,iBAAiB;AAEhE,WAAO,OAAO,SAAS,aAAa,UAAU;AAAA,MAC1C,GAAG;AAAA,MACH,SAAS,kBAAkB,YAAY,SAAY,CAAC,IAAiB,QAAa;AAC9E,WAAG,MAAM,YAAY,aAAa,aAAa,GAAG,GAAG;AAAA,MACzD;AAAA,KACH,MAAM,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA;AAAA,EAGA,OAAO,mBACH,SACA,gBAMA,UAA4B,EAAC,EACnB;AACV,UAAM,aAAkC,EAAC;AAEzC,QAAI,eAAe,WAAW;AAC1B,iBAAW,YAAY;AAAA,QACnB,CAAC,eAAe,UAAU,GAAG,eAAe,UAAU,CAAC;AAAA,QACvD,MAAM,aAAa,eAAe,UAAW,EAAE,KAAK,OAAO,eAAe,UAAW,EAAE,KAAK;AAAA,OAChG;AAAA,IACJ;AAEA,QAAI,eAAe,OAAO;AACtB,YAAM,WAAW,eAAe,iBAAiB,WAC7C;AAAA,QAAS,CAAC,eAAe,MAAM,GAAG,eAAe,MAAM,CAAC;AAAA,QACpD,MAAM,SAAS,eAAe,MAAO,EAAE,KAAK,KAAK,eAAe,MAAO,EAAE,KAAK;AAAA,OAAG,GACrF;AAAA,QAAS,CAAC,eAAe,KAAK;AAAA,QAC1B,MAAM,SAAS,eAAe,MAAO,KAAK;AAAA,OAAG;AACrD,iBAAW,YAAY,WAAW,YAC9B,SAAS,CAAC,WAAW,WAAW,QAAQ,GAAG,CAAC,GAAG,MAAM,GAAG,CAAC,IAAI,CAAC,EAAE,IAAI;AAAA,IAC5E;AAEA,QAAI,eAAe,QAAQ;AACvB,YAAM,YAAY;AAAA,QAAS,CAAC,eAAe,MAAM;AAAA,QAC7C,MAAM,UAAU,eAAe,OAAQ,KAAK;AAAA,OAAM;AACtD,iBAAW,YAAY,WAAW,YAC9B,SAAS,CAAC,WAAW,WAAW,SAAS,GAAG,CAAC,GAAG,MAAM,GAAG,CAAC,IAAI,CAAC,EAAE,IAAI;AAAA,IAC7E;AAEA,QAAI,eAAe,MAAM;AACrB,YAAM,UAAU;AAAA,QAAS,CAAC,eAAe,KAAK,GAAG,eAAe,KAAK,CAAC;AAAA,QAClE,MAAM,QAAQ,eAAe,KAAM,EAAE,KAAK,QAAQ,eAAe,KAAM,EAAE,KAAK;AAAA,OAAM;AACxF,iBAAW,YAAY,WAAW,YAC9B,SAAS,CAAC,WAAW,WAAW,OAAO,GAAG,CAAC,GAAG,MAAM,GAAG,CAAC,IAAI,CAAC,EAAE,IAAI;AAAA,IAC3E;AAEA,WAAO,UAAU,SAAS,YAAY,OAAO;AAAA,EACjD;AAAA;AAAA,EAGA,OAAO,UACH,SACA,UACA,OACA,gBAAsD,cACtD,UAA6B,EAAE,UAAU,KAAK,QAAQ,eAAc,EAC1D;AACV,UAAM,SAAS,kBAAkB,YAAY,WAC/B,kBAAkB,YAAY,eAAe;AAE3D,UAAM,aAAa,OAAO,UAAU,WAAW,QAC3C,SAAS,CAAC,KAAK,GAAG,MAAM,OAAO,MAAM,KAAK,aAAa;AAE3D,WAAO,OAAO,SAAS,UAAU,YAAY,OAAO,MAAM,MAAM;AAAA,IAAC;AAAA,EACrE;AAAA;AAAA,EAGA,OAAO,YACH,SACA,SACA,gBAAiE,cACjE,UAAgD,EAAE,UAAU,KAAK,QAAQ,eAAc,EAC7E;AACV,UAAM,SAAS,kBAAkB,YAAY,WAC/B,kBAAkB,YAAY,eAC9B,kBAAkB,eAAe,iBAAiB;AAEhE,WAAO,OAAO,SAAS,WAAW,SAAS,OAAO,MAAM,MAAM;AAAA,IAAC;AAAA,EACnE;AAAA;AAAA,EAGA,OAAO,iBACH,SACA,QACA,gBAAiE,WACjE,UAAgD,EAAE,UAAU,KAAK,QAAQ,YAAW,EAC1E;AACV,UAAM,SAAS,kBAAkB,YAAY,WAC/B,kBAAkB,YAAY,eAC9B,kBAAkB,eAAe,iBAAiB;AAEhE,UAAM,cAAc,kBAAkB,WAClC,SAAS,CAAC,OAAO,GAAG,OAAO,CAAC,GAAG,MAAM,GAAG,OAAO,EAAE,KAAK,MAAM,OAAO,EAAE,KAAK,IAAI,IAC9E,SAAS,CAAC,MAAM,GAAG,MAAM,GAAG,OAAO,KAAK,IAAI;AAEhD,WAAO,OAAO,SAAS,iBAAiB,aAAa,OAAO,MAAM,MAAM;AAAA,IAAC;AAAA,EAC7E;AACJ;AAGO,MAAM,QAAQ;AAAA;AAAA,EAEjB,OAAO,IAAI,GAAiC,GAAiC,OAAe,MAAoC;AAC5H,WAAO,SAAS,CAAC,GAAG,CAAC,GAAG,MAAM,QAAQ,EAAE,KAAK,GAAG,IAAI,MAAM,EAAE,KAAK,GAAG,IAAI,GAAG;AAAA,EAC/E;AAAA,EAEA,OAAO,SAAS,GAAiC,GAAiC,OAAe,MAAoC;AACjI,WAAO,SAAS,CAAC,GAAG,CAAC,GAAG,MAAM,QAAQ,EAAE,KAAK,GAAG,IAAI,MAAM,EAAE,KAAK,GAAG,IAAI,GAAG;AAAA,EAC/E;AAAA,EAEA,OAAO,SAAS,GAAiC,GAA+D;AAC5G,WAAO,SAAS,CAAC,GAAG,CAAC,GAAG,MAAM,QAAQ,EAAE,KAAK,MAAM,EAAE,KAAK,GAAG;AAAA,EACjE;AAAA,EAEA,OAAO,OAAO,GAAiC,GAA+D;AAC1G,WAAO,SAAS,CAAC,GAAG,CAAC,GAAG,MAAM,QAAQ,EAAE,KAAK,MAAM,EAAE,KAAK,GAAG;AAAA,EACjE;AAAA;AAAA,EAGA,OAAO,MAAM,OAAqC,KAAmC,KAAmC,OAAe,MAAoC;AACvK,WAAO,SAAS,CAAC,OAAO,KAAK,GAAG,GAAG,MAAM,SAAS,IAAI,KAAK,GAAG,IAAI,KAAK,MAAM,KAAK,GAAG,IAAI,KAAK,IAAI,KAAK,GAAG,IAAI,GAAG;AAAA,EACrH;AAAA;AAAA,EAGA,OAAO,IAAI,GAAiC,GAAiC,OAAe,MAAoC;AAC5H,WAAO,SAAS,CAAC,GAAG,CAAC,GAAG,MAAM,OAAO,EAAE,KAAK,GAAG,IAAI,KAAK,EAAE,KAAK,GAAG,IAAI,GAAG;AAAA,EAC7E;AAAA,EAEA,OAAO,IAAI,GAAiC,GAAiC,OAAe,MAAoC;AAC5H,WAAO,SAAS,CAAC,GAAG,CAAC,GAAG,MAAM,OAAO,EAAE,KAAK,GAAG,IAAI,KAAK,EAAE,KAAK,GAAG,IAAI,GAAG;AAAA,EAC7E;AACJ;;AC1ZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,MAAM,KAAK,CAAC,IAAI,CAAC;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACK,MAAC,IAAI,GAAG;AACb;AACA,IAAI,CAAC,IAAI,GAAG,IAAI;AAChB,IAAI,CAAC,OAAO,GAAG,SAAS;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,SAAS,IAAI,OAAO,MAAM,KAAK,UAAU,CAAC;AAEhD,MAAM,eAAe,GAAG;AACxB,MAAM,WAAW,GAAG;AACpB,MAAM,UAAU,GAAG;AACnB,MAAM,UAAU,GAAG;AACnB,MAAM,WAAW,GAAG;AACpB,MAAM,YAAY,GAAG;AACrB,MAAM,YAAY,GAAG;AACrB,MAAM,YAAY,GAAG;AACrB,MAAM,aAAa,GAAG;AACtB,MAAM,SAAS,GAAG;AAClB,MAAM,kBAAkB,GAAG;AAC3B,MAAM,cAAc,GAAG;AACvB;AACA,MAAM,WAAW,GAAG,GAAE;AACtB,MAAM,WAAW,GAAG,GAAE;AACtB;AACA;AACA;AACA;AACA,MAAM,mBAAmB,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC;AAClG,IAAI,WAAW,GAAG,IAAI;AACtB,IAAI,SAAS,GAAG,IAAI;AACpB,MAAM,eAAe,GAAG,CAAC;AACzB,yBAAyB,UAAU,CAAC,iBAAiB,CAAC;AACtD,yBAAyB,WAAW,CAAC;AACrC,yBAAyB,WAAW,CAAC;AACrC,yBAAyB,IAAI,CAAC,IAAI;AAClC,yBAAyB,YAAY,CAAC,YAAY,CAAC;AACnD;AACA;;AAEA,MAAM,cAAc,GAAG,CAAC;AACxB,MAAM,eAAe,GAAG,CAAC;AACzB,MAAM,eAAe,GAAG,CAAC;AACzB,MAAM,eAAe,GAAG,CAAC;AACzB,MAAM,gBAAgB,GAAG,CAAC;AAC1B,MAAM,gBAAgB,GAAG,CAAC;AAC1B,MAAM,gBAAgB,GAAG,CAAC;AAC1B,MAAM,gBAAgB,GAAG,CAAC;AAC1B,MAAM,eAAe,GAAG,CAAC;AACzB,MAAM,eAAe,GAAG,EAAE;AAC1B,MAAM,eAAe,GAAG,EAAE;AAC1B,MAAM,oBAAoB,GAAG,EAAE;AAC/B,MAAM,oBAAoB,GAAG,EAAE;AAC/B,MAAM,oBAAoB,GAAG,EAAE;AAC/B,MAAM,oBAAoB,GAAG,EAAE;AAC/B,MAAM,oBAAoB,GAAG,EAAE;AAC/B,MAAM,oBAAoB,GAAG,EAAE;AAC/B,MAAM,oBAAoB,GAAG,EAAE;AAC/B,MAAM,oBAAoB,GAAG,EAAE;AAC/B,MAAM,cAAc,GAAG,EAAE;AACzB,MAAM,cAAc,GAAG,EAAE;AACzB,MAAM,mBAAmB,GAAG,EAAE;AAC9B,MAAM,mBAAmB,GAAG,EAAE;AAC9B,MAAM,mBAAmB,GAAG,EAAE;AAC9B,MAAM,mBAAmB,GAAG,EAAE;AAC9B,MAAM,mBAAmB,GAAG,EAAE;AAC9B,MAAM,mBAAmB,GAAG,EAAE;AAC9B,MAAM,mBAAmB,GAAG,EAAE;;AAE9B,MAAM,cAAc,GAAG,EAAE;AACzB,MAAM,oBAAoB,GAAG,EAAE;AAC/B,MAAM,YAAY,GAAG,EAAE;AACvB,MAAM,0BAA0B,GAAG,EAAE;AACrC;;AAEA,MAAM,eAAe,GAAG;AACxB,MAAM,gBAAgB,GAAG;AACzB,MAAM,oBAAoB,GAAG;AAC7B,MAAM,0BAA0B,GAAG;AACnC,MAAM,mBAAmB,GAAG;AAC5B,MAAM,mBAAmB,GAAG;AAC5B,MAAM,yBAAyB,GAAG;AAClC,MAAM,QAAQ,GAAG,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC,WAAW,EAAE,SAAS;;AAExH;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,MAAM,SAAS,IAAI,CAAC;AAC1B,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,GAAG;AACnB,EAAE,KAAK,CAAC,CAAC,CAAC;AACV,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC;AAChB,CAAC,CAAC;AACF;;AAEA,IAAI,CAAC,MAAM,GAAG,MAAM;;AAEpB,MAAM,QAAQ,GAAG,EAAE;AACnB;AACA;AACA;AACA;AACA,SAAS,UAAU,GAAG;AACtB,CAAC,IAAI,GAAG,GAAG,QAAQ,CAAC,GAAG,EAAE;AACzB,CAAC,IAAI,CAAC,GAAG;AACT,EAAE,GAAG,GAAG,EAAE,OAAO,GAAG;AACpB,UAAU,aAAa,GAAG;AAC1B,UAAU,aAAa,GAAG;AAC1B,UAAU,mBAAmB,GAAG;AAChC,UAAU,SAAS,GAAG;AACtB,UAAU,SAAS,GAAG;AACtB,UAAU,QAAQ,GAAG;AACrB,SAAS;AACT,CAAC,OAAO,GAAG;AACX;AACA;AACA;AACA;AACA;AACA,SAAS,WAAW,CAAC,GAAG,EAAE;AAC1B,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,GAAE;AACrB;;AAEA;AACA;AACA;AACA;AACA,IAAI,CAAC,aAAa,GAAG,WAAW;AAChC;AACA;AACA;AACA;;AAEA,MAAM,OAAO,GAAG,EAAE;AAClB,SAAS,SAAS,GAAG,EAAE,IAAI,GAAG,GAAG,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC;AAChH,SAAS,UAAU,CAAC,GAAG,EAAE,EAAE,OAAO,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;;AAEhD;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC,MAAM,GAAG,SAAS,MAAM,EAAE;AAC/B,CAAC,IAAI,CAAC;AACN,CAAC,IAAI,MAAM,GAAG,EAAE;AAChB,CAAC,IAAI,CAAC,MAAM,GAAG,OAAO,MAAM;AAC5B,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,GAAG;AACtC,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC,IAAI,GAAG,QAAQ,MAAM,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE,MAAM,MAAM,CAAC,CAAC,CAAC,IAAI,GAAG,EAAE,KAAK,MAAM,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE,EAAE;AACrG,GAAG,MAAM,IAAI,IAAI;AACjB,EAAE;AACF,EAAE,MAAM,IAAI,MAAM,CAAC,CAAC,CAAC;AACrB,CAAC;AACD,CAAC,OAAO,MAAM;AACd;;;AAGA,IAAI,YAAY,GAAG,IAAI,OAAO,EAAE;AAChC,IAAI,aAAa,GAAG,IAAI,GAAG,EAAE;AAC7B,IAAI,cAAc,GAAG,IAAI,GAAG,EAAE;AAC9B,IAAI,aAAa,GAAG,EAAE;;AAEtB;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC,KAAK,GAAG,WAAW;AACxB,CAAC,YAAY,GAAG,IAAI,OAAO,EAAE;AAC7B,CAAC,aAAa,GAAG,IAAI,GAAG,EAAE;AAC1B,CAAC,cAAc,GAAG,IAAI,GAAG,EAAE;AAC3B,CAAC,aAAa,GAAG,EAAE,CAAC;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC,KAAK,GAAG,UAAU,EAAE,EAAE,OAAO,GAAG;;AAErC,CAAC,MAAM,GAAG,GAAG,EAAE,IAAI,GAAG,IAAI;AAC1B,GAAG,UAAU,EAAE,WAAW;AAC1B,GAAG,MAAM,GAAG,EAAE;AACd,GAAG,QAAQ,GAAG,IAAI;AAClB,GAAG,SAAS,GAAG,IAAI;AACnB,GAAG;AACH;AACA,CAAC,MAAM,GAAG,GAAG,EAAE,IAAI,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE;AAC9B,CAAC,IAAI,CAAC,GAAG,CAAC;AACV,CAAC,QAAQ,GAAG;AACZ,CAAC,IAAI,mBAAmB,GAAG,IAAI,GAAG,EAAE;AACpC,CAAC,IAAI,IAAI,GAAG,cAAc;AAC1B,EAAE,MAAM,GAAG,IAAI;AACf,EAAE,aAAa,GAAG,KAAK;AACvB,EAAE,QAAQ,GAAG,KAAK;AAClB,EAAE,MAAM,GAAG,IAAI;AACf,EAAE,UAAU,GAAG,IAAI;AACnB,EAAE,QAAQ,GAAG,SAAS;AACtB,EAAE,aAAa,GAAG;AAClB,GAAG,KAAK,GAAG,IAAI;AACf,GAAG,IAAI,GAAG,IAAI;AACd,GAAG,KAAK,GAAG,IAAI;AACf,GAAG,IAAI,CAAC,IAAI,EAAE;AACd;AACA,IAAI,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK;AAC5B,IAAI,IAAI,OAAO,GAAG,EAAE,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,IAAI,CAAC;AAC9C,KAAK,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC;AACzB,KAAK,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC;AACzB,KAAK,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;AAChC,SAAS,EAAE,OAAO,GAAG,EAAE,IAAI,GAAG,IAAI,EAAE,IAAI,GAAG,IAAI,EAAE,KAAK,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;AACtE,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,GAAG,OAAO;AACzC,SAAS,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,OAAO;AACjC,IAAI,IAAI,CAAC,IAAI,GAAG,OAAO;AACvB,IAAI,IAAI,CAAC,MAAM,EAAE;AACjB,GAAG,CAAC;AACJ,GAAG,GAAG,GAAG;AACT,IAAI,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI;AAC1B;AACA;AACA,IAAI,IAAI,EAAE,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,KAAK,EAAE,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI;AACxD,IAAI,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK;AAC5B,IAAI,IAAI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI;AACzC,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,KAAK,GAAG,IAAI;AAC1C,IAAI,IAAI,CAAC,KAAK,GAAG,MAAM;AACvB,IAAI,IAAI,CAAC,MAAM,EAAE;AACjB;AACA,IAAI,OAAO,MAAM,CAAC,IAAI;AACtB,GAAG,CAAC;AACJ,GAAG,MAAM,GAAG,CAAC;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE,OAAO,GAAG,EAAE;AACd,EAAE,UAAU,GAAG,EAAE;AACjB,EAAE,aAAa,GAAG,IAAI;AACtB,EAAE,aAAa,GAAG,IAAI;AACtB,EAAE,mBAAmB,GAAG,CAAC;AACzB,EAAE,SAAS,GAAG,EAAE;AAChB,EAAE,aAAa,GAAG,eAAe;AACjC,EAAE,OAAO,GAAG,CAAC;AACb,EAAE,OAAO,GAAG,KAAK;AACjB,EAAE,OAAO,GAAG,KAAK;AACjB,EAAE,QAAQ,GAAG,KAAK;AAClB,EAAE,aAAa,GAAG,KAAK;AACvB,EAAE,cAAc,GAAG,KAAK;AACxB,EAAE,OAAO,GAAG;AACZ,GAAG,KAAK,GAAG,IAAI;AACf,GAAG,IAAI,GAAG,IAAI;AACd,GAAG,KAAK,GAAG,IAAI;AACf,GAAG,IAAI,CAAC,IAAI,EAAE;AACd,IAAI,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK;AAC5B,IAAI,IAAI,OAAO,GAAG,EAAE,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;AACpH,SAAS,EAAE,OAAO,GAAG,EAAE,IAAI,GAAG,IAAI,EAAE,IAAI,GAAG,IAAI,EAAE,KAAK,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;AACtE,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,GAAG,OAAO;AACzC,SAAS,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,OAAO;AACjC,IAAI,IAAI,CAAC,IAAI,GAAG,OAAO;AACvB,GAAG,CAAC;AACJ,GAAG,KAAK,GAAG;AACX,IAAI,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK;AAC3B,IAAI,IAAI,CAAC,MAAM,GAAG,OAAO,IAAI;AAC7B,IAAI,IAAI,EAAE,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI;AACvD,IAAI,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,MAAM;AACjD,IAAI,OAAO,MAAM,CAAC,IAAI;AACtB,GAAG,CAAC;AACJ,GAAG,OAAO,CAAC,IAAI,EAAE;AACjB,IAAI,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK;AAC5B;AACA;AACA,KAAK,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;AACrG;AACA;AACA,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,GAAG,OAAO;AACzC,IAAI,IAAI,CAAC,KAAK,GAAG,OAAO;AACxB,GAAG;AACH,GAAG;AACH,EAAE,wBAAwB,GAAG,IAAI;AACjC,EAAE,eAAe,GAAG,KAAK;AACzB,EAAE,eAAe,GAAG,KAAK;AACzB,EAAE,YAAY,GAAG,KAAK;AACtB,EAAE,UAAU,GAAG,KAAK;AACpB,EAAE,WAAW,GAAG,KAAK;AACrB,EAAE,aAAa,GAAG,KAAK;AACvB,EAAE,SAAS,GAAG,KAAK;AACnB,EAAE,QAAQ,GAAG,CAAC;AACd,EAAE,YAAY,GAAG,CAAC;AAClB,EAAE,SAAS,GAAG,KAAK;AACnB,EAAE,WAAW,GAAG,KAAK;AACrB,EAAE,QAAQ,GAAG;AACb;;AAEA,CAAC,SAAS,aAAa,EAAE,MAAM,GAAG;AAClC,EAAE,MAAM,IAAI,KAAK,EAAE,CAAC,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAChE,CAAC;;AAED,CAAC,OAAO;AACR;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,QAAQ,EAAE,aAAa,EAAE,CAAC,EAAE,CAAC,GAAG;AAClC,GAAG,IAAI,mBAAmB,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,MAAM,IAAI,KAAK,EAAE,qDAAqD,EAAE;AACxH,GAAG,SAAS,YAAY,GAAG,EAAE;AAC7B,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,YAAY;AAC5B,GAAG,IAAI,CAAC,IAAI,EAAE,aAAa,IAAI,CAAC,EAAE,CAAC;AACnC,IAAI,MAAM,IAAI,KAAK,EAAE,uCAAuC,CAAC;AAC7D,GAAG;AACH,GAAG,mBAAmB,CAAC,GAAG,EAAE,aAAa,EAAE,EAAE,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE;AACvF,EAAE,CAAC;AACH,EAAE,gBAAgB,EAAE,aAAa,EAAE,CAAC,UAAU;AAC9C,GAAG,MAAM,IAAI,KAAK,EAAE,wEAAwE,GAAG,aAAa,GAAG,CAAC,CAAC,QAAQ,EAAE,EAAE;AAC7H,EAAE,CAAC;AACH,EAAE,UAAU,GAAG;AACf,GAAG,IAAI,OAAO,KAAK,CAAC,GAAG;AACvB,IAAI,IAAI,OAAO,KAAK,CAAC,GAAG,aAAa,EAAE,kCAAkC,EAAE;AAE3E,IAAI,IAAI,OAAO,KAAK,CAAC,GAAG,aAAa,EAAE,uDAAuD,EAAE;AAChG,IAAI,IAAI,OAAO,KAAK,CAAC,GAAG,aAAa,EAAE,4CAA4C,EAAE;AACrF,GAAG;AACH,GAAG,IAAI,eAAe,GAAG,aAAa,EAAE,mBAAmB,EAAE;AAC7D,EAAE,CAAC;AACH,EAAE,KAAK,GAAG;AACV,GAAG,IAAI,CAAC,UAAU,EAAE;AACpB,GAAG,IAAI,CAAC,GAAG,MAAM;AACjB,GAAG,MAAM,GAAG,SAAS;AACrB,GAAG,OAAO,CAAC;AACX,EAAE,CAAC;AACH;AACA;AACA;AACA,EAAE,KAAK,GAAG;AACV,GAAG,IAAI,GAAG,cAAc;AACxB,GAAG,MAAM,GAAG,IAAI;AAChB,GAAG,IAAI,OAAO,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI;AACtD,GAAG,OAAO,CAAC,IAAI,GAAG,OAAO,CAAC,KAAK;AAC/B,GAAG,OAAO,CAAC,KAAK,GAAG,OAAO,CAAC,IAAI,GAAG,IAAI;AACtC,GAAG,IAAI,aAAa,CAAC,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC,IAAI,GAAG,aAAa,CAAC,IAAI;AACxE,GAAG,aAAa,CAAC,MAAM,GAAG,CAAC;AAC3B,GAAG,aAAa,CAAC,IAAI,GAAG,OAAO,CAAC,KAAK;AACrC,GAAG,aAAa,CAAC,KAAK,GAAG,aAAa,CAAC,IAAI,GAAG,IAAI,CAAC;AACnD,GAAG,QAAQ,GAAG,SAAS;AACvB,GAAG,aAAa,GAAG,eAAe;AAClC,GAAG,OAAO,GAAG,EAAE;AACf,GAAG,UAAU,GAAG,EAAE;AAClB,GAAG,aAAa,GAAG,IAAI;AACvB,GAAG,aAAa,GAAG,IAAI;AACvB,GAAG,mBAAmB,GAAG,CAAC;AAC1B,GAAG,GAAG,CAAC,UAAU,GAAG,WAAW;AAC/B,GAAG,GAAG,CAAC,IAAI,GAAG,IAAI;AAClB,GAAG,GAAG,CAAC,MAAM,GAAG,EAAE;AAClB,GAAG,GAAG,CAAC,SAAS,GAAG,IAAI;AACvB,GAAG,GAAG,CAAC,IAAI,GAAG,CAAC;AACf,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;AACd,GAAG,QAAQ,GAAG,KAAK;AACnB,GAAG,OAAO,GAAG,CAAC;AACd,GAAG,SAAS,GAAG,KAAK;AACpB,GAAG,eAAe,GAAG,KAAK;AAC1B,GAAG,YAAY,GAAG,KAAK,CAAC;AACxB,GAAG,UAAU,GAAG,KAAK,CAAC;AACtB,GAAG,WAAW,GAAG,KAAK;AACtB;AACA;AACA;AACA,EAAE,CAAC;AACH,EAAE,YAAY,CAAC,SAAS,CAAC,SAAS,GAAG,EAAE,UAAU,CAAC,SAAS,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC;AAC3E;AACA;AACA;AACA;AACA,EAAE,KAAK,CAAC,GAAG,EAAE;AACb,GAAG,IAAI,OAAO;AACd,GAAG,IAAI,OAAO,GAAG,KAAK,QAAQ,IAAI,OAAO,GAAG,KAAK,WAAW,EAAE,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;AAC/E,GAAG,IAAI,CAAC,MAAM,GAAG,MAAM,IAAI,KAAK,EAAE,iEAAiE,EAAE;AACrG,GAAG,KAAK,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,OAAO,GAAG,CAAC,EAAE,OAAO,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG;AACjF,IAAI,IAAI,OAAO,OAAO,KAAK,UAAU,GAAG,CAAC,SAAS,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE;AACpE,KAAK,IAAI,CAAC,EAAE,CAAC,EAAE,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC;AAClC,KAAK,IAAI,KAAK,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;AAC7C,MAAM,KAAK,CAAC,IAAI,KAAK,EAAE;AACvB,OAAO,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE;AAC3D,QAAQ,CAAC,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;AAC1B,QAAQ,IAAI,CAAC,KAAK,SAAS,EAAE;AAC7B,SAAS,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC;AACrB,QAAQ,CAAC,MAAM;AACf,SAAS,OAAO,KAAK,CAAC,CAAC,CAAC;AACxB,QAAQ;AACR,OAAO;AACP,MAAM;AACN,KAAK;AACL,KAAK,OAAO,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,CAAC;AAC5C,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,MAAM,CAAC,EAAE,EAAE,CAAC;AACvB,IAAI,MAAM,GAAG,EAAE,EAAE,MAAM,EAAE;;AAEzB,IAAI,IAAI,OAAO,GAAG,CAAC;AACnB,KAAK;AACL,GAAG;AACH,EAAE,CAAC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE;AACrB,GAAG,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;AACjD,GAAG,IAAI,CAAC,KAAK,EAAE;AACf,GAAG,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE;AAC/C,GAAG,IAAI,WAAW,GAAG,CAAC,GAAG;AAKzB,IAAI,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,EAAE;AAC7B,IAAI,IAAI,EAAE,WAAW,KAAK,OAAO,MAAM,MAAM,WAAW,GAAG,CAAC,EAAE;AAC9D,KAAK,MAAM,IAAI,KAAK,EAAE,kCAAkC,CAAC;AACzD,IAAI;AACJ;AACA,IAAI,MAAM,GAAG,OAAO,OAAO,KAAK,UAAU,IAAI,SAAS,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE;AACzE,KAAK,IAAI,CAAC,EAAE,CAAC,EAAE,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC;AAClC,KAAK,IAAI,KAAK,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;AAC7C,MAAM,KAAK,CAAC,IAAI,KAAK,EAAE;AACvB,OAAO,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE;AAC3D,QAAQ,CAAC,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;AAC1B,QAAQ,IAAI,CAAC,KAAK,SAAS,EAAE;AAC7B,SAAS,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC;AACrB,QAAQ,CAAC,MAAM;AACf,SAAS,OAAO,KAAK,CAAC,CAAC,CAAC;AACxB,QAAQ;AACR,OAAO;AACP,MAAM;AACN,KAAK;AACL,KAAK,OAAO,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,CAAC;AAC5C,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,MAAM,CAAC,EAAE,EAAE,CAAC,IAAI,MAAM;AACjC,IAAI,OAAO,MAAM;AACjB,GAAG;AACH,GAAG,IAAI,CAAC,UAAU,EAAE;AACpB,GAAG,OAAO,SAAS;AAInB,EAAE,CAAC;AACH,EAAE,MAAM,CAAC,GAAG,CAAC,eAAe,EAAE;AAC9B,GAAG,IAAI,IAAI;AACX,GAAG,IAAI,KAAK;AACZ,GAAG,IAAI,GAAG;AACV,GAAG,IAAI,MAAM,GAAG,CAAC;AACjB,GAAG,SAAS,UAAU,EAAE,MAAM,EAAE,CAAC,GAAG;AACpC,IAAI,MAAM,IAAI,KAAK,EAAE,CAAC,EAAE,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,aAAa,EAAE,CAAC,EAAE,CAAC,gBAAgB,EAAE,CAAC,CAAC,QAAQ,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,aAAa,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAC9M,GAAG;;AAEH,GAAG,SAAS,SAAS,IAAI;AACzB,IAAI,GAAG,CAAC,UAAU,GAAG,WAAW;AAChC,IAAI,GAAG,CAAC,MAAM,GAAG,EAAE;AACnB,IAAI,GAAG,CAAC,QAAQ,GAAG,IAAI;AACvB;AACA,GAAG;;AAEH,GAAG,SAAS,YAAY,GAAG;AAC3B,IAAI,IAAI,EAAE,GAAG,IAAI;AACjB;AACA,IAAI,QAAQ,GAAG,CAAC,UAAU;AAC1B,IAAI,KAAK,YAAY;AACrB;AACA,KAAK,IAAI,EAAE,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,EAAE,QAAQ,GAAG,CAAC,MAAM,CAAC,MAAM,IAAI,EAAE,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;AAClF,YAAY,CAAC,WAAW,IAAI,CAAC,cAAc,IAAI,CAAC,aAAa,IAAI,CAAC,OAAO,GAAG;AAC5E,MAAM,QAAQ,GAAG,IAAI;AACrB,KAAK;AACL,KAAK,IAAI,QAAQ,GAAG,EAAE,IAAI,SAAS,GAAG,OAAO,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,MAAM,MAAM,IAAI,KAAK,EAAE,qBAAqB,EAAE,CAAC,EAAE,CAAC;AAClH,KAAK,IAAI,WAAW,GAAG;AACvB,MAAM,MAAM,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,eAAe,EAAE;AAClD,MAAM,MAAM,IAAI,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI;AACtC,MAAM,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG;AACvC,OAAO,MAAM,CAAC,GAAG,IAAI,IAAI,EAAE,GAAG,CAAC,MAAM,EAAE,CAAC;AACxC,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC,EAAE,UAAU,EAAE,iBAAiB,EAAE,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC;AAC9E,MAAM,CAAC,MAAM;AACb,OAAO,IAAI,EAAE,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE;AAChC,OAAO,OAAO,EAAE,CAAC,MAAM,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG;AACzC,OAAO,MAAM,CAAC,GAAG,IAAI,MAAM,EAAE,GAAG,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC;AACvD,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC,EAAE,UAAU,EAAE,mBAAmB,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC;AAChG,MAAM;AACN;AACA,KAAK;AACL,KAAK,QAAQ,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,IAAI,MAAM,EAAE,GAAG,CAAC,MAAM,EAAE;AACnD,IAAI,KAAK,YAAY;AACrB,KAAK,IAAI,GAAG,CAAC,SAAS,GAAG;AACzB,MAAM,EAAE,GAAG,mBAAmB,CAAC,GAAG,EAAE,GAAG,CAAC,SAAS,EAAE;AACnD,MAAM,IAAI,CAAC,EAAE;AACb,OAAO,EAAE,GAAG,cAAc,CAAC,GAAG,EAAE,GAAG,CAAC,SAAS,EAAE;AAC/C,MAAM,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG;AACxB,OAAO,GAAG,CAAC,SAAS,GAAG,IAAI;AAC3B,OAAO,OAAO,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,GAAG,CAAC,MAAM,EAAE;AACtC,MAAM,CAAC,MAAM;AACb;AACA,OAAO,MAAM,IAAI,KAAK,EAAE,+CAA+C,GAAG,GAAG,CAAC,SAAS,GAAG,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG;AAC5G,MAAM,CAAC;AACP,KAAK;AACL,KAAK,OAAO,GAAG,CAAC,MAAM;AACtB,IAAI,KAAK,UAAU;AACnB,KAAK,OAAO,IAAI;AAChB,IAAI,KAAK,WAAW;AACpB,KAAK,OAAO,KAAK;AACjB,IAAI,KAAK,aAAa;AACtB,KAAK,OAAO,CAAC,GAAG;AAChB,IAAI,KAAK,SAAS;AAClB,KAAK,OAAO,GAAG;AACf,IAAI,KAAK,kBAAkB;AAC3B,KAAK,OAAO,CAAC,QAAQ;AACrB,IAAI,KAAK,cAAc;AACvB,KAAK,OAAO,QAAQ;AACpB,IAAI,KAAK,UAAU;AACnB,KAAK,OAAO,IAAI;AAChB,IAAI,KAAK,eAAe;AACxB,KAAK,OAAO,SAAS;AACrB,IAAI,KAAK,WAAW;AACpB,KAAK,OAAO,SAAS;AACrB,IAAI,KAAK,YAAY;AACrB,KAAK,IAAI,GAAG,CAAC,SAAS,GAAG;AACzB;AACA,MAAM,EAAE,GAAG,mBAAmB,CAAC,GAAG,EAAE,GAAG,CAAC,SAAS,EAAE;AACnD,MAAM,IAAI,CAAC,EAAE;AACb,OAAO,EAAE,GAAG,cAAc,CAAC,GAAG,EAAE,GAAG,CAAC,SAAS,EAAE;AAC/C,MAAM,GAAG,CAAC,SAAS,GAAG,IAAI;AAC1B,MAAM,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,OAAO,GAAG,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,GAAG,CAAC,QAAQ,EAAE,CAAC;AACzE,KAAK;AACL,KAAK,OAAO,GAAG,CAAC,QAAQ;AACxB,IAAI,KAAK,WAAW;AACpB;AACA,KAAK,IAAI,SAAS,IAAI,CAAC,GAAG;AAC1B,MAAM,IAAI,EAAE;AACZ,MAAM,IAAI,GAAG,CAAC,QAAQ,CAAC,MAAM;AAC7B,OAAO,EAAE,GAAG,YAAY,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC;AACzC,WAAW,EAAE,GAAG,YAAY,EAAE,GAAG,CAAC,MAAM,EAAE;AAC1C,MAAM,IAAI,SAAS,KAAK,CAAC,GAAG;AAC5B,OAAO,SAAS,GAAG,EAAE;AACrB,OAAO,OAAO,EAAE;AAChB,MAAM,CAAC,MAAM;AACb,OAAO,MAAM,KAAK,GAAG,IAAI,eAAe,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE;AACzD,OAAO,SAAS,GAAG,EAAE;AACrB,OAAO,OAAO,KAAK;AACnB,MAAM;AACN,KAAK,CAAC,MAAM,IAAI,SAAS,KAAK,EAAE,GAAG;AACnC,MAAM,IAAI,GAAG,GAAG,UAAU;AAC1B;AACA,MAAM,IAAI,GAAG;AACb;AACA;AACA;AACA,MAAM,MAAM,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC,MAAM;AACzC,MAAM,KAAK,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,OAAO,EAAE,GAAG,EAAE,GAAG;AAC3C,OAAO,MAAM,GAAG,GAAG,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC;AACpC;AACA,OAAO,IAAI,OAAO,GAAG,GAAG,CAAC,GAAG,CAAC;;AAE7B;AACA;AACA,OAAO,IAAI,CAAC,OAAO,GAAG;AACtB,QAAQ;AACR,SAAS,IAAI,GAAG,GAAG,aAAa,CAAC,KAAK;AACtC,SAAS,IAAI,CAAC,GAAG,CAAC;AAClB;AACA,SAAS,OAAO,GAAG,IAAI,CAAC,GAAG,OAAO,IAAI,CAAC,GAAG,aAAa,CAAC,MAAM,GAAG;AACjE,UAAU,MAAM,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC;AACzC,UAAU,IAAI,CAAC,GAAG,CAAC,IAAI,IAAI,OAAO,KAAK,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG;AAC5D,WAAW,MAAM;AACjB,UAAU;AACV;AACA;AACA,UAAU,IAAI,GAAG,CAAC,IAAI,GAAG;AACzB,WAAW,IAAI,QAAQ,KAAK,OAAO,OAAO,GAAG;AAC7C,YAAY,MAAM,YAAY,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ;AACvD;;AAEA,YAAY,IAAI,YAAY,IAAI,OAAO,IAAI,YAAY,CAAC,MAAM,GAAG;AACjE;AACA,aAAa,IAAI,CAAC,MAAM,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG;AAClD;AACA,gBAAgB,OAAO,CAAC,GAAG,EAAE,oDAAoD,EAAE,CAAC,EAAE,GAAG,CAAC,QAAQ,EAAE,QAAQ,EAAE;AAC9G,cAAc,OAAO,GAAG,QAAQ;AAChC,cAAc,CAAC,EAAE;AACjB;AACA,cAAc,GAAG,GAAG,GAAG,CAAC,IAAI;AAC5B,cAAc;AACd,aAAa;AACb,kBAAkB;AAClB;AACA,cAAc,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,OAAO,KAAK,YAAY,CAAC,MAAM,GAAG;AACrE;AACA,eAAe,OAAO,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ;AACpD,eAAe,GAAG,GAAG,GAAG,CAAC,IAAI;AAC7B,eAAe,CAAC,EAAE;AAClB,eAAe,GAAG,GAAG,OAAO;AAC5B,eAAe;AACf,cAAc;AACd;AACA;AACA,cAAc,OAAO,GAAG,QAAQ;AAChC,cAAc,CAAC,EAAE,CAAC;;AAElB,cAAc;AACd;AACA,aAAa;AACb,YAAY;AACZ,WAAW,CAAC,MAAM;AAClB;AACA,YAAY,IAAI,OAAO,KAAK,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;AAChD;AACA,aAAa,OAAO,KAAK,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;AAC1D;AACA,aAAa,GAAG,GAAG,CAAC;AACpB,aAAa;AACb,YAAY,CAAC,MAAM;AACnB;AACA,aAAa,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI;AAC9B,cAAc,OAAO,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ;AACnD,kBAAkB;AAClB;AACA,cAAc,OAAO,GAAG,QAAQ;AAChC,aAAa;AACb;AACA,YAAY;AACZ,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,CAAC,MAAM;AACjB,WAAW,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;AACrC,UAAU;AACV;AACA,UAAU,GAAG,GAAG,GAAG,CAAC,IAAI;AACxB,UAAU,CAAC,EAAE;AACb,SAAS;AACT;AACA,SAAS,IAAI,CAAC,GAAG,OAAO;AACxB,UAAU,GAAG,GAAG,CAAC,CAAC,CAAC;AACnB,cAAc,GAAG,GAAG,CAAC;AACrB,QAAQ;AACR;AACA,OAAO;AACP,OAAO,IAAI,CAAC,QAAQ,KAAK,OAAO,OAAO,MAAM,CAAC,OAAO,GAAG;AACxD,QAAQ,MAAM,IAAI,KAAK,EAAE,gCAAgC,IAAI,GAAG,CAAC,QAAQ,GAAG,MAAM,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE;AAC5G,OAAO;AACP,OAAO,GAAG,GAAG,OAAO;AACpB,MAAM;AACN;AACA;AACA,MAAM,SAAS,GAAG,EAAE;AACpB,MAAM,OAAO,GAAG;AAChB,KAAK;AACL,KAAK,IAAI,GAAG,CAAC,SAAS,GAAG;AACzB,MAAM,EAAE,GAAG,mBAAmB,CAAC,GAAG,EAAE,GAAG,CAAC,SAAS,EAAE;AACnD,MAAM,IAAI,CAAC,EAAE;AACb,OAAO,EAAE,GAAG,cAAc,CAAC,GAAG,EAAE,GAAG,CAAC,SAAS,EAAE;AAC/C,MAAM,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC;AAC3B,MAAM,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,OAAO,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,GAAG,CAAC,QAAQ,EAAE,CAAC;AAC1D,KAAK;AACL,KAAK,OAAO,GAAG,CAAC,QAAQ;AACxB,IAAI;AACJ,KAAK,OAAO,CAAC,GAAG,EAAE,6BAA6B,EAAE,GAAG,EAAE;AACtD,KAAK;AACL;AACA,GAAG;;AAEH,GAAG,SAAS,SAAS,GAAG;AACxB;AACA,IAAI,IAAI,SAAS,IAAI,EAAE,IAAI;AAC3B;AACA,KAAK,IAAI,GAAG,CAAC,UAAU,KAAK,YAAY,GAAG;AAC3C,MAAM,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,QAAQ,EAAE;AACnC,KAAK;AACL,KAAK,SAAS,GAAG,EAAE,CAAC;AACpB,KAAK;AACL,IAAI,CAAC;AACL;AACA,IAAI,QAAQ,GAAG,CAAC,UAAU;AAC1B,IAAI,KAAK,WAAW;AACpB,KAAK,QAAQ,CAAC,IAAI,EAAE,SAAS,EAAE;AAC/B,KAAK,OAAO,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;AACvC,KAAK;AACL,IAAI;AACJ,KAAK,QAAQ,CAAC,IAAI,EAAE,YAAY,EAAE,EAAE;AACpC,KAAK;AACL;AACA,IAAI,SAAS,EAAE;AACf,GAAG;;AAEH,GAAG,SAAS,UAAU,GAAG;AACzB,IAAI,IAAI,SAAS,KAAK,EAAE,IAAI,GAAG,CAAC,UAAU,KAAK,WAAW,GAAG;AAC7D;AACA;AACA,KAAK,SAAS,EAAE;AAChB,KAAK,SAAS,GAAG,EAAE;AACnB,KAAK;AACL,IAAI;AACJ,IAAI,IAAI,GAAG,CAAC,UAAU,KAAK,WAAW,GAAG;AACzC,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,IAAI,aAAa,GAAG;AACrC;AACA,KAAK,GAAG,CAAC,IAAI,GAAG,aAAa,CAAC,MAAM,CAAC,mBAAmB,EAAE,CAAC;AAC3D,IAAI;AACJ,IAAI,IAAI,KAAK,GAAG,YAAY,EAAE;;AAE9B,IAAI,IAAI,aAAa,IAAI,aAAa,CAAC,QAAQ,IAAI,aAAa,CAAC,QAAQ,CAAC,EAAE,GAAG;AAC/E;AACA;AACA,KAAK,KAAK,GAAG,aAAa,CAAC,QAAQ,CAAC,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE;AACxE,KAAK,IAAI,KAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,KAAK;AAC3C;AACA,IAAI,CAAC,KAAK;AACV;AACA,KAAK,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,KAAK;AAC/B,IAAI;AACJ;AACA;AACA;AACA,IAAI,SAAS,EAAE;AACf,GAAG;;AAEH,GAAG,SAAS,YAAY,CAAC,IAAI,EAAE;AAC/B;AACA,IAAI,IAAI,IAAI,KAAK,cAAc,GAAG;AAClC,KAAK,IAAI,QAAQ,GAAG;AACpB;AACA,MAAM,UAAU,EAAE,sGAAsG,EAAE,IAAI,EAAE;AAChI,KAAK;AACL,KAAK,QAAQ,IAAI;AACjB,KAAK,KAAK,YAAY;AACtB,MAAM,QAAQ,GAAG,CAAC,UAAU;AAC5B,MAAM,KAAK,UAAU,GAAG,GAAG,CAAC,MAAM,IAAI,MAAM,CAAC,CAAC;AAC9C,MAAM,KAAK,WAAW,GAAG,GAAG,CAAC,MAAM,IAAI,OAAO,CAAC,CAAC;AAChD,MAAM,KAAK,UAAU,GAAG,GAAG,CAAC,MAAM,IAAI,MAAM,CAAC,CAAC;AAC9C,MAAM,KAAK,cAAc,GAAG,GAAG,CAAC,MAAM,IAAI,UAAU,CAAC,CAAC;AACtD,MAAM,KAAK,kBAAkB,GAAG,GAAG,CAAC,MAAM,IAAI,WAAW,CAAC,CAAC,UAAU,EAAE,yDAAyD,EAAE,IAAI,EAAE,CAAC,CAAC;AAC1I,MAAM,KAAK,SAAS,GAAG,GAAG,CAAC,MAAM,IAAI,KAAK,CAAC,CAAC;AAC5C,MAAM,KAAK,aAAa,GAAG,GAAG,CAAC,MAAM,IAAI,MAAM,CAAC,CAAC,UAAU,EAAE,yDAAyD,EAAE,IAAI,EAAE,CAAC,CAAC;AAChI,MAAM,KAAK,eAAe,GAAG,GAAG,CAAC,MAAM,IAAI,WAAW,CAAC,CAAC;AACxD,MAAM,KAAK,YAAY,EAAE;AACzB,MAAM,KAAK,WAAW,EAAE;AACxB,MAAM;AACN,OAAO,OAAO,CAAC,GAAG,EAAE,gBAAgB,GAAG,GAAG,CAAC,UAAU,GAAG,qBAAqB,EAAE;AAC/E;AACA,MAAM;AACN,KAAK,KAAK,eAAe,IAAI,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,CAAC;AAChD,KAAK,KAAK,eAAe,IAAI,GAAG,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC;AACjD,KAAK,KAAK,eAAe,GAAG,GAAG,CAAC,MAAM,IAAI,KAAK,CAAC,CAAC;AACjD,KAAK,KAAK,gBAAgB,GAAG,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,CAAC;AAChD,KAAK,KAAK,gBAAgB,GAAG,GAAG,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC;AACjD,KAAK,KAAK,gBAAgB,GAAG,GAAG,CAAC,MAAM,IAAI,KAAK,CAAC,CAAC;AAClD,KAAK,KAAK,gBAAgB,GAAG,GAAG,CAAC,MAAM,IAAI,MAAM,CAAC,CAAC;AACnD,KAAK,KAAK,eAAe,GAAG,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,CAAC;AAC/C,KAAK,KAAK,eAAe,GAAG,GAAG,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC;AAChD,KAAK,KAAK,eAAe,GAAG,GAAG,CAAC,MAAM,IAAI,KAAK,CAAC,CAAC;AACjD,KAAK,KAAK,oBAAoB,GAAG,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,CAAC;AACpD,KAAK,KAAK,oBAAoB,GAAG,GAAG,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC;AACrD,KAAK,KAAK,oBAAoB,GAAG,GAAG,CAAC,MAAM,IAAI,KAAK,CAAC,CAAC;AACtD,KAAK,KAAK,oBAAoB,GAAG,GAAG,CAAC,MAAM,IAAI,MAAM,CAAC,CAAC;AACvD,KAAK,KAAK,oBAAoB,GAAG,GAAG,CAAC,MAAM,IAAI,OAAO,CAAC,CAAC;AACxD,KAAK,KAAK,oBAAoB,GAAG,GAAG,CAAC,MAAM,IAAI,QAAQ,CAAC,CAAC;AACzD,KAAK,KAAK,oBAAoB,GAAG,GAAG,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC;AAC1D,KAAK,KAAK,oBAAoB,GAAG,GAAG,CAAC,MAAM,IAAI,UAAU,CAAC,CAAC;AAC3D,KAAK,KAAK,cAAc,GAAG,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,CAAC;AAC9C,KAAK,KAAK,cAAc,GAAG,GAAG,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC;AAC/C,KAAK,KAAK,mBAAmB,GAAG,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,CAAC;AACnD,KAAK,KAAK,mBAAmB,GAAG,GAAG,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC;AACpD,KAAK,KAAK,mBAAmB,GAAG,GAAG,CAAC,MAAM,IAAI,KAAK,CAAC,CAAC;AACrD,KAAK,KAAK,mBAAmB,GAAG,GAAG,CAAC,MAAM,IAAI,MAAM,CAAC,CAAC;AACtD,KAAK,KAAK,mBAAmB,GAAG,GAAG,CAAC,MAAM,IAAI,OAAO,CAAC,CAAC;AACvD,KAAK,KAAK,mBAAmB,GAAG,GAAG,CAAC,MAAM,IAAI,QAAQ,CAAC,CAAC;AACxD,KAAK,KAAK,mBAAmB,GAAG,GAAG,CAAC,MAAM,IAAI,SAAS,CAAC,CAAC;AACzD,KAAK,KAAK,cAAc,GAAG;AAC3B,KAAK,KAAK,cAAc,GAAG;AAC3B,KAAK,KAAK,oBAAoB;AAC9B;AACA,SAAS;AACT,KAAK,KAAK,0BAA0B;AACpC,SAAS,UAAU,EAAE,iDAAiD,EAAE,IAAI,EAAE;AAC9E,SAAS;AAET;AACA;AACA,KAAK,GAAG,CAAC,UAAU,GAAG,YAAY,CAAC;AACnC,KAAK,IAAI,IAAI,GAAG,cAAc;AAC9B,SAAS,IAAI,GAAG,YAAY;AAC5B,IAAI,CAAC,MAAM;AACX,KAAK,IAAI,GAAG,YAAY;AACxB;AACA,MAAM,GAAG,CAAC,UAAU,GAAG;AACvB,IAAI;AACJ,IAAI,IAAI,IAAI,IAAI,GAAG;AACnB,KAAK,UAAU,EAAE;AACjB,SAAS,IAAI,IAAI,IAAI,EAAE;AACvB,KAAK,SAAS,EAAE;AAChB,SAAS,IAAI,IAAI,IAAI,EAAE,UAAU,CAE5B,MAAM;AACX;AACA,KAAK,IAAI,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,EAAE,IAAI,IAAI,IAAI,EAAE,IAAI,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,MAAM,IAAI,IAAI,IAAI,MAAM,IAAI,IAAI,IAAI,MAAM,GAAG;AAC5H;AACA,MAAM;AACN,KAAK;;AAEL,KAAK,IAAI,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,GAAG,WAAW,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,EAAE;AACnF,MAAM,CAAC;AACP;AACA,MAAM,GAAG,CAAC,MAAM,IAAI,GAAG;AACvB,IAAI;AACJ;AACA,GAAG;;AAEH;AACA,GAAG,SAAS,YAAY,EAAE,OAAO,GAAG;AACpC,IAAI,IAAI,MAAM,GAAG,CAAC;AAClB,IAAI,OAAO,MAAM,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,GAAG;AAC/C,KAAK,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;AACxB,KAAK,IAAI,IAAI,GAAG,GAAG,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC;AACpC,KAAK,IAAI,IAAI,IAAI,OAAO,GAAG,EAAE,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AACxD;AACA,KAAK,GAAG,CAAC,GAAG,EAAE;AACd,KAAK,IAAI,IAAI,IAAI,OAAO,GAAG;AAC3B,MAAM,IAAI,YAAY,GAAG;AACzB,OAAO,IAAI,SAAS;AACpB,QAAQ,UAAU,EAAE,iCAAiC,EAAE,IAAI,EAAE;AAC7D,YAAY,IAAI,aAAa;AAC7B,QAAQ,UAAU,EAAE,kCAAkC,EAAE,IAAI,EAAE;AAC9D,YAAY,IAAI,WAAW;AAC3B,QAAQ,UAAU,EAAE,6BAA6B,EAAE,IAAI,EAAE;AACzD,OAAO,IAAI,UAAU,GAAG;AACxB,QAAQ,UAAU,GAAG,KAAK;AAC1B,QAAQ,MAAM,GAAG,CAAC,CAAC;AACnB,OAAO,CAAC,MAAM,GAAG,CAAC,MAAM,IAAI,GAAG;AAC/B,OAAO,YAAY,GAAG,KAAK,CAAC,CAAC;AAC7B,WAAW;AACX;AACA,OAAO,MAAM,GAAG,CAAC;AACjB,MAAM;AACN,KAAK;;AAEL,UAAU,IAAI,YAAY,GAAG;AAC7B,MAAM,IAAI,WAAW,GAAG;AACxB,OAAO,IAAI,IAAI,IAAI,GAAG,UAAU;AAChC,QAAQ,GAAG,CAAC,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,QAAQ,EAAE;AACtD,QAAQ,WAAW,GAAG,KAAK;AAC3B,QAAQ,aAAa,GAAG,KAAK;AAC7B,QAAQ,YAAY,GAAG,KAAK;AAC5B,QAAQ;AACR,OAAO;AACP,OAAO,QAAQ,IAAI,EAAE;AACrB,OAAO,IAAI,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,EAAE,eAAe,QAAQ,IAAI,IAAI,GAAG,IAAI;AAChF,YAAY,IAAI,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,EAAE,UAAU,QAAQ,IAAI,EAAE,IAAI,GAAG,EAAE,KAAK,EAAE;AACvF,YAAY,IAAI,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,GAAG,UAAU,QAAQ,IAAI,EAAE,IAAI,GAAG,EAAE,KAAK,EAAE;AACxF,YAAY;AACZ,QAAQ,UAAU,EAAE,yCAAyC,EAAE,IAAI,EAAE;AACrE,QAAQ,MAAM,GAAG,EAAE;AACnB,QAAQ,WAAW,GAAG,KAAK;AAC3B,QAAQ,YAAY,GAAG,KAAK;AAC5B,QAAQ;AACR,OAAO;AACP,OAAO;AACP,MAAM;AACN,WAAW,IAAI,SAAS,IAAI,aAAa,GAAG;AAC5C,OAAO,IAAI,YAAY,KAAK,CAAC,IAAI,IAAI,KAAK,GAAG,UAAU;AACvD,QAAQ,WAAW,GAAG,IAAI;AAC1B,QAAQ;AACR,OAAO;AACP,OAAO,IAAI,YAAY,GAAG,CAAC,MAAM,aAAa,IAAI,YAAY,GAAG,CAAC,EAAE,GAAG;AACvE,QAAQ,QAAQ,IAAI,EAAE;AACtB,QAAQ,IAAI,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,EAAE,eAAe,QAAQ,IAAI,IAAI,GAAG,IAAI;AACjF,aAAa,IAAI,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,EAAE,UAAU,QAAQ,IAAI,EAAE,IAAI,GAAG,EAAE,KAAK,EAAE;AACxF,aAAa,IAAI,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,GAAG,UAAU,QAAQ,IAAI,EAAE,IAAI,GAAG,EAAE,KAAK,EAAE;AACzF,aAAa;AACb,SAAS,UAAU,EAAE,aAAa,CAAC,yCAAyC,CAAC,yCAAyC,EAAE,IAAI,EAAE;AAC9H,SAAS,MAAM,GAAG,EAAE;AACpB,SAAS,SAAS,GAAG,KAAK;AAC1B,SAAS,YAAY,GAAG,KAAK;AAC7B,SAAS;AACT,QAAQ;AACR,QAAQ,YAAY,EAAE;AACtB,QAAQ,IAAI,aAAa,GAAG;AAC5B,SAAS,IAAI,YAAY,IAAI,CAAC,GAAG;AACjC,UAAU,GAAG,CAAC,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,QAAQ,EAAE;AACxD,UAAU,aAAa,GAAG,KAAK;AAC/B,UAAU,YAAY,GAAG,KAAK;AAC9B,SAAS;AACT,QAAQ;AACR,aAAa,IAAI,YAAY,IAAI,CAAC,GAAG;AACrC,SAAS,GAAG,CAAC,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,QAAQ,EAAE;AACvD,SAAS,SAAS,GAAG,KAAK;AAC1B,SAAS,YAAY,GAAG,KAAK;AAC7B,QAAQ;AACR,QAAQ;AACR,OAAO;AACP,MAAM;AACN,MAAM,QAAQ,IAAI;AAClB,MAAM,KAAK,EAAE;AACb,OAAO,UAAU,GAAG,IAAI;AACxB,OAAO,GAAG,CAAC,GAAG,GAAG,CAAC;AAClB,OAAO;AACP,MAAM,KAAK,MAAM,CAAC;AAClB,MAAM,KAAK,MAAM;AACjB,OAAO,GAAG,CAAC,GAAG,GAAG,CAAC;AAClB;AACA,MAAM,KAAK,EAAE;AACb,OAAO,IAAI,CAAC,UAAU,GAAG;AACzB,QAAQ,GAAG,CAAC,GAAG,GAAG,CAAC;AACnB,OAAO,CAAC,MAAM;AACd,QAAQ,UAAU,GAAG,KAAK;AAC1B,OAAO;AACP,OAAO,GAAG,CAAC,IAAI,EAAE;AACjB,OAAO;AACP,MAAM,KAAK,GAAG;AACd,OAAO,GAAG,CAAC,MAAM,IAAI,IAAI;AACzB,OAAO;AACP,MAAM,KAAK,EAAE;AACb,OAAO,GAAG,CAAC,MAAM,IAAI,IAAI;AACzB,OAAO;AACP,MAAM,KAAK,GAAG;AACd,OAAO,GAAG,CAAC,MAAM,IAAI,IAAI;AACzB,OAAO;AACP,MAAM,KAAK,GAAG;AACd,OAAO,GAAG,CAAC,MAAM,IAAI,IAAI;AACzB,OAAO;AACP,MAAM,KAAK,GAAG;AACd,OAAO,GAAG,CAAC,MAAM,IAAI,IAAI;AACzB,OAAO;AACP,MAAM,KAAK,GAAG;AACd,OAAO,GAAG,CAAC,MAAM,IAAI,IAAI;AACzB,OAAO;AACP,MAAM,KAAK,EAAE;AACb,OAAO,GAAG,CAAC,MAAM,IAAI,IAAI;AACzB,OAAO;AACP,MAAM,KAAK,GAAG;AACd,OAAO,SAAS,GAAG,IAAI;AACvB,OAAO,YAAY,GAAG,CAAC;AACvB,OAAO,QAAQ,GAAG,CAAC;AACnB,OAAO;AACP,MAAM,KAAK,GAAG;AACd,OAAO,aAAa,GAAG,IAAI;AAC3B,OAAO,YAAY,GAAG,CAAC;AACvB,OAAO,QAAQ,GAAG,CAAC;AACnB,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,OAAO,GAAG,CAAC,MAAM,IAAI,GAAG;AACxB,OAAO;AACP;AACA;AACA,MAAM,YAAY,GAAG,KAAK;AAC1B,KAAK;AACL,UAAU,IAAI,IAAI,KAAK,EAAE,WAAW;AACpC,MAAM,IAAI,YAAY,GAAG;AACzB,OAAO,GAAG,CAAC,MAAM,IAAI,IAAI;AACzB,OAAO,YAAY,GAAG;AACtB,MAAM;AACN,WAAW;AACX,OAAO,YAAY,GAAG,IAAI;AAC1B,OAAO,QAAQ,GAAG,CAAC;AACnB,OAAO,YAAY,GAAG,CAAC;AACvB,MAAM;AACN,KAAK;AACL,UAAU;AACV,MAAM,IAAI,UAAU,GAAG;AACvB;AACA,OAAO,UAAU,GAAG,KAAK;AACzB,OAAO,GAAG,CAAC,IAAI,EAAE;AACjB,OAAO,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC;AACnB,MAAM;AACN,MAAM,GAAG,CAAC,MAAM,IAAI,GAAG;AACvB,KAAK;AACL,IAAI;AACJ,IAAI,OAAO,MAAM;AACjB,GAAG;;AAEH;AACA,GAAG,SAAS,aAAa,GAAG;AAC5B,IAAI,IAAI,EAAE;AACV,IAAI,OAAO,CAAC,EAAE,GAAG,CAAC,IAAI,GAAG,CAAC,MAAM,GAAG;AACnC,KAAK,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC;AACzB,KAAK,IAAI,IAAI,GAAG,GAAG,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC;AACpC,KAAK,IAAI,IAAI,IAAI,GAAG,GAAG;AACvB,OAAO,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE;AACxB,OAAO,CAAC,GAAG,EAAE,CAAC;AACd,OAAO;AACP,KAAK,CAAC,MAAM;AACZ;AACA,MAAM,IAAI,IAAI,IAAI,EAAE;AACpB,OAAO;AACP,MAAM,GAAG,CAAC,GAAG,EAAE;AACf;AACA,MAAM,IAAI,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,EAAE,UAAU;AACnD,OAAO,IAAI,QAAQ,GAAG;AACtB,QAAQ,cAAc,GAAG,IAAI;AAC7B,OAAO;AACP,OAAO,GAAG,CAAC,MAAM,IAAI,GAAG;AACxB,MAAM,CAAC,MAAM,IAAI,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,EAAE,UAAU;AAC1D,OAAO,IAAI,GAAG,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC,MAAM,QAAQ,IAAI,CAAC,aAAa,IAAI,CAAC,cAAc,EAAE,GAAG;AACzF,QAAQ,IAAI,IAAI,IAAI,EAAE,WAAW,CAAC,QAAQ,GAAG,QAAQ,GAAG,CAAC,QAAQ;AACjE,QAAQ,GAAG,CAAC,MAAM,IAAI,GAAG;AACzB,QAAQ,aAAa,GAAG,IAAI;AAC5B,OAAO,CAAC,MAAM;AACd,QAAQ,IAAI,QAAQ,GAAG,EAAE,GAAG,CAAC,MAAM,GAAG,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC,CAAC;AAC1E,QAAQ,GAAG,CAAC,MAAM,IAAI,GAAG;AACzB,QAAQ,WAAW,GAAG,IAAI;AAC1B,OAAO;AACP,MAAM,CAAC,MAAM,IAAI,IAAI,IAAI,EAAE,UAAU;AACrC,OAAO,IAAI,IAAI,IAAI,cAAc,GAAG;AACpC,QAAQ,eAAe,GAAG,KAAK;AAC/B,QAAQ,IAAI,GAAG,cAAc;AAC7B,QAAQ;AACR,OAAO;AACP,OAAO,UAAU,EAAE,6BAA6B,EAAE,IAAI,EAAE;AACxD,OAAO;AACP,MAAM,CAAC,MAAM,IAAI,IAAI,IAAI,EAAE,UAAU;AACrC,OAAO,IAAI,IAAI,IAAI,cAAc,GAAG;AACpC,QAAQ,eAAe,GAAG,KAAK;AAC/B,QAAQ,IAAI,GAAG,mBAAmB;AAClC,QAAQ;AACR,OAAO;AACP,OAAO,UAAU,EAAE,6BAA6B,EAAE,IAAI,EAAE;AACxD,OAAO;AACP,MAAM,CAAC,MAAM,IAAI,IAAI,IAAI,EAAE,WAAW,WAAW,GAAG;AACpD,OAAO,IAAI,QAAQ,GAAG,EAAE,GAAG,CAAC,MAAM,GAAG,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC,CAAC;AACzE,OAAO,GAAG,CAAC,MAAM,IAAI,GAAG;AACxB,OAAO,WAAW,GAAG,IAAI;AACzB,MAAM,CAAC,MAAM,IAAI,IAAI,IAAI,EAAE,WAAW,WAAW,GAAG;AACpD,OAAO,IAAI,QAAQ,GAAG,EAAE,GAAG,CAAC,MAAM,GAAG,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC,CAAC;AACzE,OAAO,GAAG,CAAC,MAAM,IAAI,GAAG;AACxB,OAAO,WAAW,GAAG,IAAI;AACzB,MAAM,CAAC,MAAM,IAAI,IAAI,IAAI,EAAE,WAAW,WAAW,GAAG;AACpD,OAAO,IAAI,QAAQ,GAAG,EAAE,GAAG,CAAC,MAAM,GAAG,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC,CAAC;AACzE,OAAO,GAAG,CAAC,MAAM,IAAI,GAAG;AACxB,OAAO,WAAW,GAAG,IAAI;AACzB,MAAM,CAAC,MAAM,IAAI,IAAI,IAAI,EAAE,UAAU;AACrC,OAAO,IAAI,CAAC,OAAO,IAAI,CAAC,OAAO,IAAI,CAAC,QAAQ,GAAG;AAC/C,QAAQ,GAAG,CAAC,MAAM,IAAI,GAAG;AACzB,QAAQ,OAAO,GAAG,IAAI;AACtB,OAAO,CAAC,MAAM;AACd,QAAQ,MAAM,GAAG,KAAK;AACtB,QAAQ,UAAU,EAAE,6BAA6B,EAAE,IAAI,EAAE;AACzD,QAAQ;AACR,OAAO;AACP,MAAM,CAAC,MAAM,IAAI,IAAI,IAAI,GAAG,UAAU;AACtC,OAAO,QAAQ,GAAG,IAAI;AACtB,OAAO;AACP,MAAM,CAAC,MAAM,IAAI,OAAO,MAAM,EAAE,EAAE,IAAI,IAAI,EAAE,eAAe,IAAI,IAAI,GAAG,SAAS;AAC/E,mBAAmB,EAAE,IAAI,IAAI,EAAE,eAAe,IAAI,IAAI,EAAE,SAAS,EAAE,EAAE,GAAG;AACxE,OAAO,GAAG,CAAC,MAAM,IAAI,GAAG;AACxB,MAAM,CAAC,MAAM,IAAI,IAAI,IAAI,GAAG,WAAW,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,GAAG;AACvE,WAAW,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,EAAE,UAAU;AACzE;AACA,OAAO,IAAI,CAAC,OAAO,IAAI,GAAG,CAAC,MAAM,IAAI,GAAG,GAAG;AAC3C,QAAQ,OAAO,GAAG,IAAI;AACtB,QAAQ,GAAG,CAAC,MAAM,IAAI,GAAG;AACzB,OAAO;AACP,YAAY;AACZ,QAAQ,MAAM,GAAG,KAAK;AACtB,QAAQ,UAAU,EAAE,6BAA6B,EAAE,IAAI,EAAE;AACzD,QAAQ;AACR,OAAO;AACP,MAAM,CAAC,MAAM,IAAI,EAAE,IAAI,IAAI,GAAG,eAAe,IAAI,IAAI,EAAE,SAAS,GAAG;AACnE,OAAO,IAAI,CAAC,QAAQ,GAAG;AACvB,QAAQ,GAAG,CAAC,MAAM,IAAI,GAAG;AACzB,QAAQ,QAAQ,GAAG,IAAI;AACvB,OAAO,CAAC,MAAM;AACd,QAAQ,MAAM,GAAG,KAAK;AACtB,QAAQ,UAAU,EAAE,6BAA6B,EAAE,IAAI,EAAE;AACzD,QAAQ;AACR,OAAO;AACP,MAAM,CAAC,MAAM;AACb,OAAO,IAAI,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,EAAE,IAAI,IAAI,IAAI,EAAE,IAAI,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,EAAE,WAAW,IAAI,KAAK,EAAE;AACzG,WAAW,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,GAAG,WAAW,IAAI,IAAI,EAAE;AAChE,WAAW,IAAI,IAAI,GAAG,WAAW,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,EAAE;AAC1G,WAAW,IAAI,IAAI,EAAE,UAAU;AAC/B,QAAQ,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE;AACzB,QAAQ,CAAC,GAAG,EAAE,CAAC;AACf,QAAQ;AACR,OAAO;AACP,YAAY;AACZ,QAAQ,IAAI,eAAe,GAAG;AAC9B,SAAS,MAAM,GAAG,KAAK;AACvB,SAAS,UAAU,EAAE,6BAA6B,EAAE,IAAI,EAAE;AAC1D,QAAQ;AACR,QAAQ;AACR,OAAO;AACP,MAAM;AACN,KAAK;AACL,IAAI;AACJ,IAAI,IAAI,CAAC,CAAC,eAAe,KAAK,CAAC,IAAI,GAAG,CAAC,MAAM,GAAG;AAChD,KAAK,eAAe,GAAG,IAAI;AAC3B,IAAI;AACJ,SAAS;AACT,KAAK,eAAe,GAAG,KAAK;AAC5B,KAAK,GAAG,CAAC,UAAU,GAAG,YAAY;AAClC,KAAK,IAAI,aAAa,IAAI,eAAe,GAAG;AAC5C,MAAM,SAAS,GAAG,IAAI;AACtB,KAAK;AACL,IAAI;AACJ,GAAG;;AAEH;AACA,GAAG,SAAS,UAAU,GAAG;AACzB,IAAI,IAAI,QAAQ,GAAG,oBAAoB;AACvC,IAAI,IAAI,GAAG,GAAG,IAAI;AAClB,IAAI,IAAI,MAAM,GAAG,EAAE;AACnB;AACA,IAAI,IAAI,IAAI,GAAG,cAAc,IAAI,IAAI,GAAG,cAAc;AACtD,KAAK,YAAY,EAAE,GAAG,YAAY;AAClC,IAAI,IAAI,QAAQ;AAChB,IAAI,QAAQ,GAAG,QAAQ,EAAE,CAAC;AAC1B,IAAI,IAAI,aAAa,IAAI,eAAe,GAAG;AAC3C,KAAK,IAAI,IAAI,IAAI,cAAc;AAC/B,WAAW,IAAI,IAAI;AACnB,eAAe,QAAQ,IAAI,GAAG,CAAC,MAAM,CAAC,MAAM,EAAE,GAAG;AACjD,OAAO,IAAI,QAAQ,IAAI,QAAQ,CAAC,QAAQ,IAAI,QAAQ,CAAC,QAAQ,CAAC,QAAQ,GAAG;AACzE,QAAQ,MAAM,GAAG,IAAI,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE;AACjD,OAAO;AACP,MAAM,IAAI,CAAC,QAAQ,IAAI,CAAC,QAAQ,CAAC,QAAQ,IAAI,GAAG,CAAC,MAAM;AACvD,MAAM;AACN,OAAO,GAAG,GAAG,OAAO,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,MAAM,EAAE;AACvD;AACA,OAAO,IAAI,CAAC,GAAG,GAAG;AAClB;AACA,QAAQ,SAAS,YAAY,GAAG,CAAC,CAAC;AAClC;AACA;AACA;AACA;AACA,QAAQ,OAAO,CAAC,IAAI,EAAE,GAAG,GAAG,EAAE,IAAI,GAAG,GAAG,CAAC;AACzC,UAAU,QAAQ,EAAE,CAAC,QAAQ,IAAI,QAAQ,CAAC,QAAQ,IAAI,QAAQ,CAAC,QAAQ,CAAC,QAAQ,KAAK,YAAY,CAAC;AAClG,WAAW,MAAM,GAAG,EAAE,EAAE,EAAE;AAC1B,SAAS,QAAQ,GAAG,mBAAmB;AACvC,OAAO,CAAC,MAAM,IAAI,aAAa,GAAG;AAClC;AACA;AACA,QAAQ,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC;AAC7B,QAAQ,QAAQ,GAAG,mBAAmB;AACtC,OAAO,CAAC,MAAM;AACd;AACA,QAAQ,MAAM,GAAG,IAAI,GAAG,CAAC,QAAQ,EAAE;AACnC;AACA;AACA,QAAQ,QAAQ,GAAG,mBAAmB;AACtC,OAAO;AACP,OAAO,aAAa,GAAG,KAAK;AAC5B,MAAM;AACN,MAAM,aAAa,GAAG;AACtB,MAAM,IAAI,GAAG,cAAc;AAC3B,KAAK,CAAC,MAAM;AACZ,MAAM,IAAI,GAAG,cAAc;AAC3B,KAAK;AACL,IAAI,CAAC,MAAM,IAAI,IAAI,IAAI,cAAc;AACrC,SAAS,aAAa,KAAK,gBAAgB;AAC3C,SAAS,aAAa,KAAK,0BAA0B;AACrD,SAAS,aAAa,IAAI,mBAAmB,GAAG;AAChD,KAAK,IAAI,IAAI,IAAI,cAAc,IAAI,GAAG,CAAC,UAAU,IAAI,YAAY,GAAG;AACpE,MAAM,IAAI,QAAQ,IAAI,QAAQ,CAAC,QAAQ,GAAG;AAC1C;AACA,OAAO,MAAM,GAAG,IAAI,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAE;AAChD,MAAM,CAAC,MAAM;AACb;AACA,OAAO,GAAG,GAAG,OAAO,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,IAAI,KAAK,GAAG,CAAC,MAAM,EAAE;AACzD,OAAO,IAAI,CAAC,GAAG;AACf,OAAO;AACP;AACA,UAAU,SAAS,YAAY,EAAE,CAAC;AAClC;AACA,QAAQ,mBAAmB,CAAC,GAAG,EAAE,GAAG,CAAC,MAAM;AAC3C,cAAc,EAAE,QAAQ,CAAC,YAAY,CAAC,SAAS,CAAC;AAChD,gBAAgB,EAAE,EAAE,IAAI;AACxB,iBAAiB;AACjB,QAAQ,MAAM,GAAG,IAAI,YAAY,EAAE;AACnC,OAAO;AACP,YAAY;AACZ,QAAQ,QAAQ,GAAG,mBAAmB;AACtC,QAAQ,MAAM,GAAG,EAAE;AACnB,OAAO;AACP,MAAM;AACN;AACA,MAAM,IAAI,GAAG,cAAc;AAC3B,KAAK,CAAC,MAAM;AACZ,MAAM,IAAI,GAAG,cAAc;AAC3B,KAAK;AACL,IAAI,CAAC,MAAM,MAAM,aAAa,IAAI,oBAAoB,IAAI,IAAI,IAAI,cAAc,KAAK;AACrF,KAAK,UAAU,EAAE,qDAAqD,EAAE,IAAI,EAAE;AAC9E,KAAK,MAAM,GAAG,KAAK;AACnB,KAAK,OAAO,KAAK;AACjB,IAAI;;AAEJ;AACA,IAAI,IAAI,WAAW,GAAG,UAAU,EAAE;AAClC;;AAEA,IAAI,GAAG,CAAC,UAAU,GAAG,YAAY;AACjC,IAAI,IAAI,aAAa,KAAK,eAAe,EAAE;AAC3C,KAAK,QAAQ,GAAG,MAAM;AACtB,IAAI,CAAC,MAAM,IAAI,aAAa,IAAI,gBAAgB,GAAG;AAMnD,KAAK,GAAG,CAAC,IAAI,GAAG,QAAQ,CAAC,MAAM;AAC/B;AACA;AACA,IAAI,CAAC,MAAM,IAAI,aAAa,IAAI,0BAA0B,IAAI,aAAa,IAAI,mBAAmB,GAAG;AACrG,KAAK,IAAI,CAAC,GAAG,CAAC,IAAI,IAAI,aAAa,EAAE;AACrC,MAAM,GAAG,CAAC,IAAI,GAAG,aAAa,CAAC,MAAM,CAAC,mBAAmB,EAAE,CAAC;AAC5D;AACA,KAAK;AACL;AACA,KAAK,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,MAAM;AAChC,IAAI;;AAEJ,IAAI,WAAW,CAAC,OAAO,GAAG,aAAa;AACvC,IAAI,WAAW,CAAC,QAAQ,GAAG,QAAQ;AACnC;AACA,IAAI,WAAW,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI;AAC/B;AACA,IAAI,WAAW,CAAC,aAAa,GAAG,aAAa;AAC7C,IAAI,WAAW,CAAC,aAAa,GAAG,aAAa;AAC7C,IAAI,WAAW,CAAC,mBAAmB,GAAG,mBAAmB;AACzD,IAAI,WAAW,CAAC,SAAS,GAAG,GAAG,CAAC,UAAU;AAC1C,IAAI,WAAW,CAAC,SAAS,GAAG,SAAS,CAAC;AACtC,IAAI,WAAW,CAAC,SAAS,GAAG,GAAG,CAAC,SAAS;AACzC;AACA,IAAI,GAAG,CAAC,SAAS,GAAG,IAAI;AACxB,IAAI,GAAG,CAAC,IAAI,GAAG,IAAI;AACnB,IAAI,aAAa,GAAG,QAAQ;AAC5B,IAAI,aAAa,GAAG,GAAG;AACvB;AACA,IAAI,mBAAmB,GAAG,CAAC;AAC3B,IAAI,QAAQ,GAAG,MAAM;AACrB,IAAI,IAAI,CAAC,UAAU,GAAG,UAAU,GAAG,QAAQ;AAC3C;AACA,IAAI,aAAa,CAAC,IAAI,EAAE,WAAW,EAAE;AACrC;AACA,IAAI,SAAS,EAAE;AACf,IAAI,aAAa,GAAG,QAAQ;AAC5B,IAAI,OAAO,IAAI;AACf,GAAG;;AAEH,GAAG,SAAS,SAAS,GAAG;AACxB;AACA,IAAI,IAAI,IAAI,GAAG,cAAc,IAAI,IAAI,GAAG,cAAc;AACtD,KAAK,YAAY,EAAE,EAAE,EAAE;;AAEvB,IAAI,IAAI,IAAI,IAAI,YAAY,IAAI,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG;AACpD;AACA,KAAK,IAAI,SAAS,GAAG,mBAAmB,CAAC,SAAS,EAAE,IAAI,GAAG,IAAI,KAAK,GAAG,CAAC,MAAM,CAAC,EAAE;AACjF,KAAK,IAAI,GAAG,cAAc;AAC1B,KAAK,IAAI,SAAS,IAAI,CAAC,GAAG;AAC1B,MAAM,SAAS,GAAG,SAAS;AAC3B,MAAM,GAAG,CAAC,SAAS,GAAG,GAAG,CAAC,MAAM;AAChC,MAAM,GAAG,CAAC,MAAM,GAAG,IAAI;AACvB,KAAK,CAAC,MAAM;AACZ,MAAM,IAAI,GAAG,CAAC,MAAM,KAAK,KAAK,GAAG;AACjC,OAAO,GAAG,CAAC,SAAS,GAAG,IAAI;AAC3B;AACA,OAAO,SAAS,GAAG,EAAE;AACrB,MAAM,CAAC,MAAM;AACb,OAAO,IAAI,mBAAmB,CAAC,GAAG,EAAE,GAAG,CAAC,MAAM,EAAE,GAAG;AACnD,QAAQ,GAAG,CAAC,SAAS,GAAG,GAAG,CAAC,MAAM;AAClC,OAAO,CAAC;AACR,YAAY,IAAI,cAAc,CAAC,GAAG,EAAE,GAAG,CAAC,MAAM,EAAE,GAAG;AACnD,QAAQ,GAAG,CAAC,SAAS,GAAG,GAAG,CAAC,MAAM;AAClC,OAAO,CAAC;AACR,QAAQ,UAAU,EAAE,CAAC,cAAc,EAAE,GAAG,CAAC,MAAM,CAAC,qBAAqB,CAAC,EAAE,IAAI,EAAE;AAC9E;AACA,MAAM;AACN,KAAK;AACL,IAAI,CAAC,MAAM,IAAI,aAAa,IAAI,oBAAoB,IAAI,IAAI,IAAI,cAAc,IAAI,IAAI,IAAI,oBAAoB,GAAG;AACjH,KAAK,UAAU,EAAE,0DAA0D,EAAE,IAAI,EAAE;AACnF,KAAK,MAAM,GAAG,KAAK;AACnB,KAAK,OAAO,KAAK;AACjB,IAAI;AACJ,IAAI;AACJ,KAAK,IAAI,WAAW,GAAG,UAAU,EAAE;AACnC;;AAEA;AACA,KAAK,GAAG,CAAC,UAAU,GAAG,WAAW;AACjC,KAAK,IAAI,MAAM,GAAG,EAAE;AACpB,KAAK,IAAI,aAAa,IAAI,eAAe;AACzC,MAAM,QAAQ,GAAG,MAAM;AACvB,UAAU,IAAI,aAAa,IAAI,gBAAgB,GAAG;AAClD,MAAM,IAAI,SAAS,IAAI,EAAE,EAAE;AAC3B;AACA,OAAO,QAAQ,CAAC,IAAI,EAAE,MAAM,EAAE;AAC9B,MAAM,CAAC;AACP,MAAM,GAAG,CAAC,IAAI,GAAG,QAAQ,CAAC,MAAM;AAChC;AACA,KAAK,CAAC,MAAM,IAAI,aAAa,IAAI,0BAA0B,GAAG;AAC9D,MAAM,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG;AACtB,OAAO,OAAO,CAAC,GAAG,EAAE,gCAAgC,EAAE;AACtD,OAAO,SAAS,GAAG,EAAE;AACrB,MAAM;;AAEN,MAAM,IAAI,aAAa,IAAI,aAAa,CAAC,QAAQ,GAAG;AACpD;AACA;AACA,OAAO,IAAI,aAAa,CAAC,QAAQ,CAAC,EAAE,EAAE;AACtC,QAAQ,MAAM,MAAM,GAAG,aAAa,CAAC,QAAQ,CAAC,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,GAAG,CAAC,IAAI,EAAE,MAAM,EAAE;AACnF,QAAQ,IAAI,MAAM,KAAK,SAAS,GAAG,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,MAAM;AACvE;AACA,OAAO,CAAC;AACR,QAAQ,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,MAAM;AACnC,MAAM;AACN;AACA,OAAO,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,MAAM;AAClC,KAAK;AACL,KAAK,WAAW,CAAC,OAAO,GAAG,aAAa;AACxC,KAAK,WAAW,CAAC,QAAQ,GAAG,QAAQ;AACpC;AACA,KAAK,WAAW,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI;AAChC,KAAK,WAAW,CAAC,aAAa,GAAG,aAAa;AAC9C,KAAK,WAAW,CAAC,aAAa,GAAG,aAAa;AAC9C,KAAK,WAAW,CAAC,mBAAmB,GAAG,mBAAmB;AAC1D;AACA,KAAK,WAAW,CAAC,SAAS,GAAG,GAAG,CAAC,UAAU;AAC3C,KAAK,WAAW,CAAC,SAAS,GAAG,CAAC,SAAS,EAAE,EAAE,EAAE,EAAE,CAAC,SAAS,CAAC;AAC1D,KAAK,WAAW,CAAC,SAAS,GAAG,GAAG,CAAC,SAAS;AAC1C,KAAK,SAAS,GAAG,EAAE;AACnB,KAAK,GAAG,CAAC,SAAS,GAAG,IAAI;;AAEzB;AACA,KAAK,GAAG,CAAC,IAAI,GAAG,IAAI;AACpB,KAAK,aAAa,GAAG,IAAI;AACzB,KAAK,aAAa,GAAG,IAAI;AACzB,KAAK,mBAAmB,GAAG,CAAC;AAC5B;AACA,KAAK,QAAQ,GAAG,MAAM;AACtB,KAAK,IAAI,CAAC,UAAU,GAAG,UAAU,GAAG,MAAM;AAC1C;AACA,KAAK,aAAa,CAAC,IAAI,EAAE,WAAW,EAAE;AACtC;;AAEA,KAAK,SAAS,EAAE;AAChB,KAAK,aAAa,GAAG,gBAAgB;AACrC,IAAI;AACJ,IAAI,OAAO,IAAI;AACf,GAAG;;AAEH,GAAG,SAAS,QAAQ,GAAG;AACvB,IAAI,MAAM,MAAM,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC;AAC3C,IAAI,MAAM,MAAM,CAAC,QAAQ,GAAG,mBAAmB,CAAC,GAAG,EAAE,GAAG,CAAC,MAAM,EAAE,KAAK;AACtE,KAAK,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE;AACzB,MAAM,GAAG,CAAC,SAAS,GAAG,GAAG,CAAC,MAAM;AAChC,MAAM,GAAG,CAAC,MAAM,GAAG,IAAI;AACvB,KAAK;AACL;AACA,IAAI;AACJ,SAAS,MAAM,MAAM,CAAC,QAAQ,GAAG,cAAc,CAAC,GAAG,EAAE,GAAG,CAAC,MAAM,EAAE,KAAK;AACtE,KAAK,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE;AACzB,MAAM,GAAG,CAAC,SAAS,GAAG,GAAG,CAAC,MAAM;AAChC,MAAM,GAAG,CAAC,MAAM,GAAG,IAAI;AACvB,KAAK;AACL,IAAI,CAAC;AACL,IAAI,IAAI,GAAG,CAAC,MAAM;AAClB,IAAI;AACJ,KAAK,MAAM,CAAC,GAAG,GAAG,OAAO,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,IAAI,KAAK,GAAG,CAAC,MAAM,EAAE;AAC9D,KAAK,IAAI,CAAC,MAAM,CAAC,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG;AAI3C,IAAI;AACJ,IAAI,OAAO,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,IAAI;AACpD,GAAG;;AAEH,GAAG,IAAI,CAAC,MAAM;AACd,IAAI,OAAO,EAAE;;AAEb,GAAG,IAAI,GAAG,IAAI,GAAG,CAAC,MAAM,GAAG;AAC3B,IAAI,KAAK,GAAG,SAAS,EAAE;AACvB,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG;AACnB,IAAI,OAAO,CAAC,IAAI,EAAE,KAAK,EAAE;AACzB,GAAG,CAAC,MAAM;AACV,IAAI,IAAI,eAAe,GAAG;AAC1B;AACA,KAAK,eAAe,GAAG,KAAK;AAC5B,KAAK,GAAG,CAAC,UAAU,GAAG,YAAY;AAClC,KAAK,IAAI,aAAa,IAAI,eAAe,GAAG;AAC5C,MAAM,SAAS,GAAG,IAAI;AACtB,KAAK;AACL,KAAK,MAAM,GAAG,CAAC,CAAC;AAChB,IAAI;AACJ,IAAI,IAAI,aAAa,KAAK,eAAe;AACzC,KAAK,UAAU,EAAE,mCAAmC,EAAE,IAAI,EAAE;AAC5D,GAAG;;AAEH,GAAG,OAAO,MAAM,MAAM,KAAK,GAAG,OAAO,CAAC,KAAK,EAAE,EAAE,GAAG;AAClD,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC;AACf,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG;AACnB,IAAI,IAAI,eAAe,GAAG;AAC1B,KAAK,IAAI,aAAa,GAAG,YAAY,EAAE,wBAAwB,EAAE;AACjE,KAAK,IAAI,aAAa,GAAG,CAAC;AAC1B,MAAM,MAAM,GAAG,KAAK;AACpB,UAAU,IAAI,aAAa,GAAG,CAAC,GAAG;AAClC,MAAM,eAAe,GAAG,KAAK;AAC7B,MAAM,IAAI,MAAM,GAAG,GAAG,CAAC,UAAU,GAAG,YAAY;AAChD,KAAK;AACL,IAAI;AACJ,IAAI,IAAI,eAAe,GAAG;AAC1B,KAAK,aAAa,EAAE;AACpB,IAAI;;AAEJ,IAAI,OAAO,CAAC,SAAS,IAAI,MAAM,MAAM,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,GAAG;AACxD,KAAK,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;AACxB,KAAK,IAAI,GAAG,GAAG,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC;AAChC,KAAK,IAAI,IAAI,IAAI,OAAO,GAAG,EAAE,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AACxD;AACA;AACA,KAAK,GAAG,CAAC,GAAG,EAAE;AACd,KAAK,IAAI,OAAO,GAAG;AACnB,MAAM,IAAI,OAAO,IAAI,CAAC,GAAG;AACzB,OAAO,IAAI,IAAI,IAAI,EAAE,UAAU,OAAO,GAAG,CAAC;AAC1C,YAAY,IAAI,IAAI,IAAI,EAAE,UAAU,OAAO,UAAU,EAAE,sBAAsB,EAAE,IAAI,EAAE;AACrF,YAAY,OAAO,GAAG,CAAC;AACvB,MAAM;AACN,WAAW,IAAI,OAAO,IAAI,CAAC,GAAG;AAC9B,OAAO,IAAI,IAAI,IAAI,EAAE,YAAY,IAAI,IAAI,EAAE,YAAY,OAAO,GAAG,CAAC;AAClE,MAAM;AACN,WAAW,IAAI,OAAO,IAAI,CAAC,GAAG;AAC9B,OAAO,IAAI,IAAI,IAAI,EAAE,UAAU,OAAO,GAAG,CAAC;AAC1C,MAAM;AACN,WAAW;AACX,OAAO,IAAI,IAAI,IAAI,EAAE,UAAU,OAAO,GAAG,CAAC;AAC1C,YAAY,OAAO,GAAG,CAAC;AACvB,MAAM;AACN,MAAM;AACN,KAAK;AACL,KAAK,QAAQ,IAAI;AACjB,KAAK,KAAK,EAAE;AACZ,MAAM,OAAO,GAAG,CAAC,CAAC;AAClB,MAAM;AACN,KAAK,KAAK,EAAE;AACZ,MAAM,OAAO,GAAG,CAAC;AACjB,MAAM;AACN,KAAK,KAAK,GAAG;AACb,MAAM,UAAU,EAAE;AAClB,MAAM;AACN,KAAK,KAAK,EAAE;AACZ,MAAM,SAAS,EAAE;AACjB,MAAM;;AAEN,KAAK,KAAK,EAAE;AACZ;AACA,MAAM,IAAI,aAAa,IAAI,mBAAmB,GAAG;AACjD,OAAO,IAAI,GAAG,cAAc;AAC5B,OAAO,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,MAAM;AAC5B,OAAO,GAAG,CAAC,MAAM,GAAG,EAAE;AACtB,OAAO,GAAG,CAAC,UAAU,GAAG,WAAW;AACnC;AACA,MAAM,CAAC,MAAM,IAAI,aAAa,IAAI;AAClC,UAAU,aAAa,IAAI,mBAAmB,IAAI;AAClD,OAAO,IAAI,aAAa,IAAI,mBAAmB,GAAG;AAClD,QAAQ,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,MAAM,GAAG;AAC7C,UAAU,OAAO,CAAC,GAAG,EAAE,2CAA2C,EAAE,GAAG,CAAC,SAAS,EAAE;AACnF,QAAQ,MAAM,YAAY,GAAG,IAAI,CAAC,EAAC;AACnC,QAAQ,mBAAmB,CAAC,GAAG,EAAE,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI;AAC3E,cAAc,EAAE,QAAQ,CAAC,YAAY,CAAC,SAAS,CAAC;AAChD,gBAAgB,EAAE,EAAE,IAAI;AACxB,iBAAiB;AACjB,QAAQ,QAAQ,GAAG,IAAI,YAAY,EAAE;AACrC,QAAQ,aAAa,GAAG;AACxB,QAAQ,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,MAAM;AAC7B,QAAQ,IAAI,GAAG,cAAc;AAC7B,QAAQ,GAAG,CAAC,MAAM,GAAG;AACrB,QAAQ,GAAG,CAAC,UAAU,GAAG,WAAW;AACpC,QAAQ,OAAO,CAAC,GAAG,EAAE,mCAAmC,EAAE;AAC1D,QAAQ;AACR,OAAO,CAAC,MAAM;AACd,QAAQ,IAAI,IAAI,IAAI;AACpB,cAAc,IAAI,IAAI;AACtB,cAAc,IAAI,IAAI;AACtB,cAAc,IAAI,IAAI,oBAAoB,GAAG;AAC7C,SAAS,YAAY,EAAE,EAAE,EAAE;AAC3B;AACA;AACA;AACA;AACA,QAAQ;AACR,QAAQ,IAAI,GAAG,cAAc;AAC7B,QAAQ,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,MAAM;AAC7B,QAAQ,GAAG,CAAC,MAAM,GAAG,EAAE;AACvB,QAAQ,aAAa,GAAG,CAAC,aAAa,GAAG,oBAAoB,EAAE,0BAA0B,CAAC,yBAAyB;AACnH,QAAQ,GAAG,CAAC,UAAU,GAAG,WAAW;AACpC,OAAO;AACP,MAAM;AACN,WAAW,IAAI,aAAa,IAAI,eAAe,EAAE;AACjD,OAAO,OAAO,CAAC,GAAG,EAAE,gDAAgD,EAAE,aAAa,EAAE;AACrF,OAAO,aAAa,GAAG,IAAI;AAC3B,OAAO;AACP,MAAM,CAAC,MAAM;AACb,OAAO,IAAI,aAAa,IAAI,gBAAgB;AAC5C,QAAQ,UAAU,GAAG,oDAAoD,EAAE,IAAI,EAAE;AACjF,YAAY,IAAI,aAAa,IAAI,0BAA0B,EAAE;AAC7D,QAAQ,UAAU,EAAE,mBAAmB,EAAE,IAAI,EAAE;AAC/C,OAAO,CAAC;AACR,QAAQ,UAAU,EAAE,8DAA8D,EAAE,IAAI,EAAE;AAC1F,OAAO,MAAM,GAAG,KAAK;AACrB,MAAM;AACN,MAAM;AACN,KAAK,KAAK,GAAG;AACb;AACA,MAAM,IAAI,IAAI,IAAI,YAAY,GAAG;AACjC;AACA,OAAO,IAAI,GAAG,cAAc;AAC5B,MAAM;AACN;AACA,MAAM,IAAI,aAAa,IAAI,mBAAmB,GAAG;AACjD,OAAO,IAAI,aAAa,GAAG;AAC3B;AACA,QAAQ,GAAG,GAAG,CAAC,MAAM,EAAE,EAAE,aAAa,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC;;AAElE,QAAQ,SAAS,EAAE;AACnB,QAAQ,IAAI,WAAW,GAAG,aAAa,CAAC,GAAG,EAAE;AAC7C;AACA;AACA,QAAQ,aAAa,GAAG,eAAe,CAAC;AACxC,QAAQ,IAAI,GAAG,cAAc;AAC7B,QAAQ,GAAG,CAAC,IAAI,GAAG,WAAW,CAAC,IAAI;AACnC,QAAQ,QAAQ,GAAG,WAAW,CAAC,QAAQ;AACvC;AACA,QAAQ,aAAa,GAAG,WAAW,CAAC,aAAa;AACjD,QAAQ,mBAAmB,GAAG,WAAW,CAAC,mBAAmB;AAC7D;AACA,QAAQ,SAAS,GAAG,WAAW,CAAC,SAAS;AACzC,QAAQ,GAAG,CAAC,UAAU,GAAG,WAAW,CAAC,SAAS;AAC9C,QAAQ,GAAG,CAAC,SAAS,GAAG,WAAW,CAAC,SAAS;AAC7C;AACA,QAAQ,UAAU,GAAG,IAAI;;AAEzB,QAAQ,WAAW,EAAE,WAAW,EAAE;AAClC,OAAO,CAAC,MAAM;AACd,QAAQ,UAAU,EAAE,yDAAyD,EAAE,IAAI,EAAE;AACrF,OAAO;AACP,MAAM,CAAC,MAAM,IAAI,EAAE,aAAa,IAAI,oBAAoB,QAAQ,aAAa,IAAI,mBAAmB,EAAE,GAAG;AACzG,OAAO,IAAI,GAAG,CAAC,UAAU,IAAI,WAAW,GAAG;AAC3C,QAAQ,IAAI,aAAa,GAAG;AAC5B;AACA,SAAS,GAAG,CAAC,IAAI,GAAG,aAAa,CAAC,MAAM,CAAC,mBAAmB,EAAE,CAAC;AAC/D,QAAQ;AACR;AACA,QAAQ,UAAU,EAAE;AACpB,OAAO;AACP;;AAEA,QAAQ,GAAG,CAAC,UAAU,GAAG,YAAY;AACrC,QAAQ,IAAI,aAAa,IAAI,aAAa,CAAC,QAAQ,GAAG;AACtD,SAAS,OAAO,CAAC,GAAG,EAAE,4CAA4C,EAAE,aAAa,EAAE;AACnF,SAAS,OAAO,CAAC,GAAG,EAAE,wCAAwC,EAAE;AAChE,SAAS,QAAQ,GAAG,IAAI,aAAa,CAAC,QAAQ,CAAC,EAAE,EAAE,QAAQ,EAAE,SAAS,EAAE,SAAS,EAAE;AACnF;AACA,QAAQ;AACR,QAAQ,GAAG,CAAC,QAAQ,GAAG,QAAQ;AAC/B,QAAQ,GAAG,CAAC,MAAM,GAAG,EAAE;;AAEvB,OAAO,IAAI,WAAW,GAAG,aAAa,CAAC,GAAG,EAAE;AAC5C;AACA,OAAO,aAAa,GAAG,WAAW,CAAC,OAAO,CAAC;AAC3C,OAAO,GAAG,CAAC,IAAI,GAAG,WAAW,CAAC,IAAI;AAClC,OAAO,QAAQ,GAAG,WAAW,CAAC,QAAQ;AACtC;AACA,OAAO,aAAa,GAAG,WAAW,CAAC,aAAa;AAChD,OAAO,aAAa,GAAG,WAAW,CAAC,aAAa;AAChD,OAAO,mBAAmB,GAAG,WAAW,CAAC,mBAAmB;AAC5D;AACA,OAAO,SAAS,GAAG,WAAW,CAAC,SAAS;AACxC,OAAO,GAAG,CAAC,UAAU,GAAG,WAAW,CAAC,SAAS;AAC7C,OAAO,GAAG,CAAC,SAAS,GAAG,WAAW,CAAC,SAAS;AAC5C;AACA,OAAO,WAAW,EAAE,WAAW,EAAE;;AAEjC,OAAO,IAAI,aAAa,IAAI,eAAe,GAAG;AAC9C,QAAQ,SAAS,GAAG,IAAI;AACxB,OAAO;AACP,MAAM;AACN,WAAW,MAAM,aAAa,IAAI,0BAA0B,KAAK;AACjE;AACA;AACA,OAAO,IAAI,GAAG,CAAC,UAAU,KAAK,WAAW,GAAG;AAC5C,QAAQ,IAAI,IAAI,IAAI,cAAc;AAClC,SAAS,UAAU,EAAE,iCAAiC,EAAE,IAAI,EAAE;AAC9D,aAAa;AACb,SAAS,YAAY,CAAC,IAAI,CAAC,CAAC;AAC5B,QAAQ;AACR,OAAO;AACP,OAAO,UAAU,EAAE;AACnB,OAAO,GAAG,CAAC,UAAU,GAAG,YAAY;AACpC,OAAO,GAAG,CAAC,QAAQ,GAAG,QAAQ;AAC9B,OAAO,IAAI,GAAG,cAAc;;AAE5B;AACA,OAAO,IAAI,WAAW,GAAG,aAAa,CAAC,GAAG,EAAE;AAC5C;AACA,OAAO,aAAa,GAAG,WAAW,CAAC,OAAO,CAAC;AAC3C,OAAO,GAAG,CAAC,IAAI,GAAG,WAAW,CAAC,IAAI;AAClC,OAAO,QAAQ,GAAG,WAAW,CAAC,QAAQ;AACtC,OAAO,aAAa,GAAG,WAAW,CAAC,aAAa;AAChD,OAAO,aAAa,GAAG,WAAW,CAAC,aAAa;AAChD,OAAO,mBAAmB,GAAG,WAAW,CAAC,mBAAmB;AAC5D;AACA,OAAO,SAAS,GAAG,WAAW,CAAC,SAAS;AACxC,OAAO,GAAG,CAAC,UAAU,GAAG,WAAW,CAAC,SAAS;AAC7C,OAAO,GAAG,CAAC,SAAS,GAAG,WAAW,CAAC,SAAS;AAC5C;AACA;AACA,OAAO,WAAW,EAAE,WAAW,EAAE;AACjC,OAAO,IAAI,aAAa,IAAI,eAAe,GAAG;AAC9C,QAAQ,SAAS,GAAG,IAAI;AACxB,OAAO;AACP,MAAM;AACN,WAAW;AACX,OAAO,UAAU,EAAE,iCAAiC,EAAE,IAAI,EAAE;AAC5D,OAAO,MAAM,GAAG,KAAK;AACrB,MAAM;AACN,MAAM,QAAQ,GAAG,KAAK;AACtB,MAAM;AACN,KAAK,KAAK,EAAE;AACZ,MAAM,IAAI,IAAI,IAAI,oBAAoB,GAAG;AACzC,OAAO,IAAI,GAAG,cAAc;AAC5B,MAAM;AACN,MAAM,IAAI,aAAa,IAAI,gBAAgB,GAAG;AAC9C;AACA;AACA,OAAO,IAAI,GAAG,CAAC,UAAU,IAAI,WAAW,GAAG;AAC3C;AACA;AACA;AACA,QAAQ,SAAS,EAAE;AACnB,OAAO,CAAC,MAAM;AACd,QAAQ,IAAI,IAAI,KAAK,cAAc,GAAG;AACtC,SAAS,YAAY,CAAC,IAAI,CAAC;AAC3B,SAAS,SAAS,EAAE;AACpB,QAAQ;AACR,OAAO;AACP,OAAO,GAAG,CAAC,QAAQ,GAAG,QAAQ;AAC9B,OAAO;AACP,QAAQ,IAAI,WAAW,GAAG,aAAa,CAAC,GAAG,EAAE;AAC7C;AACA,QAAQ,GAAG,CAAC,IAAI,GAAG,WAAW,CAAC,IAAI;AACnC,QAAQ,GAAG,CAAC,SAAS,GAAG,WAAW,CAAC,SAAS;AAC7C,QAAQ,aAAa,GAAG,WAAW,CAAC,OAAO;AAC3C,QAAQ,QAAQ,GAAG,WAAW,CAAC,QAAQ;AACvC;AACA,QAAQ,aAAa,GAAG,WAAW,CAAC,aAAa;AACjD,QAAQ,aAAa,GAAG,WAAW,CAAC,aAAa;AACjD,QAAQ,mBAAmB,GAAG,WAAW,CAAC,mBAAmB;AAC7D,QAAQ,SAAS,GAAG,WAAW,CAAC,SAAS;AACzC,QAAQ,GAAG,CAAC,UAAU,GAAG,WAAW,CAAC,SAAS;AAC9C;AACA;AACA,QAAQ,WAAW,EAAE,WAAW,EAAE;AAClC,OAAO;AACP,OAAO,GAAG,CAAC,UAAU,GAAG,WAAW;AACnC,OAAO,IAAI,aAAa,IAAI,eAAe,GAAG;AAC9C,QAAQ,SAAS,GAAG,IAAI;AACxB,OAAO;AACP,MAAM,CAAC,MAAM;AACb,OAAO,UAAU,EAAE,CAAC,YAAY,EAAE,aAAa,CAAC,qBAAqB,CAAC,EAAE,IAAI,EAAE,CAAC;AAC/E,OAAO,MAAM,GAAG,KAAK;AACrB,MAAM;AACN,MAAM,QAAQ,GAAG,KAAK;AACtB,MAAM;AACN,KAAK,KAAK,EAAE;AACZ,MAAM,IAAI,IAAI,GAAG,oBAAoB,IAAI,IAAI,IAAI,cAAc,GAAG;AAClE,OAAO,YAAY,CAAC,IAAI,CAAC;AACzB,MAAM;AACN,MAAM,IAAI,IAAI,IAAI,YAAY,IAAI,IAAI,IAAI,cAAc,GAAG,IAAI,GAAG,cAAc,CAAC;AACjF;AACA;AACA,MAAM,IAAI,aAAa,IAAI,mBAAmB,GAAG;AACjD,OAAO,IAAI,aAAa,GAAG;AAC3B;AACA,QAAQ,aAAa,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,MAAM,EAAE;AAC/C,QAAQ,GAAG,CAAC,MAAM,GAAG,EAAE;AACvB,QAAQ,IAAI,GAAG,cAAc;AAC7B,OAAO,CAAC,MAAM;AACd,QAAQ,UAAU,EAAE,yDAAyD,EAAE,IAAI,EAAE;AACrF,OAAO;AACP,MAAM,CAAC,MAAM,IAAI,aAAa,IAAI,oBAAoB,GAAG;AACzD,OAAO,IAAI,aAAa,GAAG;AAC3B;AACA,QAAQ,GAAG,CAAC,IAAI,GAAG,aAAa,CAAC,MAAM,CAAC,mBAAmB,EAAE,CAAC;AAC9D;AACA,QAAQ,IAAI,GAAG,CAAC,UAAU,IAAI,WAAW,GAAG;AAC5C;AACA,SAAS,UAAU,EAAE;AACrB,SAAS,SAAS,EAAE;AACpB,QAAQ;AACR,OAAO,CAAC,MAAM;AACd;AACA,QAAQ,IAAI,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,UAAU;AACxC,SAAS,UAAU,EAAE,wDAAwD,EAAE,IAAI,EAAE;AACrF,OAAO;AACP,MAAM,CAAC,MAAM,IAAI,aAAa,IAAI,mBAAmB,GAAG;AACxD,OAAO,IAAI,aAAa,GAAG;AAC3B;AACA,QAAQ,IAAI,SAAS,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG;AAC3C;AACA;AACA,SAAS,GAAG,CAAC,IAAI,GAAG,aAAa,CAAC,MAAM,CAAC,mBAAmB,EAAE,CAAC;AAC/D;AACA,QAAQ;AACR;AACA,QAAQ,IAAI,GAAG,CAAC,UAAU,IAAI,WAAW,GAAG;AAC5C,SAAS,IAAI,SAAS,IAAI,EAAE;AAC5B,UAAU,UAAU,EAAE;AACtB,SAAS,SAAS,EAAE;AACpB,QAAQ;AACR,OAAO,CAAC,MAAM;AACd;AACA,QAAQ,IAAI,GAAG,CAAC,UAAU,IAAI,WAAW,GAAG;AAC5C,SAAS,UAAU,EAAE;AACrB,SAAS,SAAS,EAAE;AACpB,QAAQ;AACR;AACA,OAAO;AACP,OAAO,GAAG,CAAC,IAAI,GAAG,IAAI;AACtB,MAAM,CAAC,MAAM,IAAI,aAAa,IAAI,gBAAgB,GAAG;AACrD,OAAO,IAAI,GAAG,CAAC,UAAU,IAAI,WAAW;AACxC,QAAQ,GAAG,CAAC,UAAU,GAAG,WAAW,CAAC;;AAErC;AACA,OAAO,SAAS,EAAE;AAClB,OAAO,SAAS,EAAE;AAClB,OAAO,IAAI,GAAG,cAAc;AAC5B;AACA,MAAM,CAAC,MAAM,IAAI,aAAa,IAAI,0BAA0B,IAAI,GAAG,CAAC,UAAU,IAAI,WAAW,GAAG;AAChG;AACA;AACA,OAAO,aAAa,GAAG,oBAAoB;AAC3C,OAAO,IAAI,GAAG,CAAC,UAAU,IAAI,WAAW,GAAG;AAC3C,QAAQ,UAAU,EAAE;AACpB,QAAQ,SAAS,EAAE;AACnB,OAAO;AACP,OAAO,IAAI,GAAG,cAAc;AAC5B,MAAM,CAAC,MAAM;AACb,OAAO,MAAM,GAAG,KAAK;AACrB,OAAO,UAAU,EAAE,8CAA8C,EAAE,IAAI,EAAE,CAAC;AAC1E,MAAM;AACN,MAAM,QAAQ,GAAG,KAAK;AACtB,MAAM;;AAEN,KAAK;AACL,MAAM,QAAQ,IAAI;AAClB,MAAM;AACN,MAAM,IAAI,EAAE,aAAa,IAAI,eAAe;AAC5C,aAAa,aAAa,IAAI,0BAA0B,IAAI,IAAI,IAAI,cAAc;AAClF,aAAa,EAAE,aAAa,IAAI,oBAAoB,MAAM,IAAI,IAAI,cAAc;AAChF,aAAa,aAAa,IAAI,mBAAmB,EAAE,GAAG;AACtD,OAAO,QAAQ,IAAI;AACnB,OAAO,KAAK,EAAE,CAAC;AACf,OAAO,KAAK,EAAE,CAAC;AACf,OAAO,KAAK,EAAE;AACd,QAAQ,IAAI,IAAI,IAAI,cAAc,IAAI,IAAI,IAAI,cAAc,GAAG;AAC/D,SAAS,IAAI,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG;AACjC,UAAU,OAAO,CAAC,GAAG,EAAE,sBAAsB,EAAE;AAC/C,UAAU,GAAG,CAAC,SAAS,GAAG,GAAG,CAAC,MAAM;AACpC,UAAU,GAAG,CAAC,MAAM,GAAG,EAAE;AACzB,SAAS;AACT,SAAS,IAAI,aAAa,GAAG,YAAY,CAAC,IAAI,EAAE;AAChD;AACA,SAAS,IAAI,aAAa,GAAG;AAC7B,UAAU,GAAG,CAAC,UAAU,GAAG,YAAY;AACvC,SAAS,CAAC,MAAM;AAChB,UAAU,wBAAwB,GAAG,IAAI;AACzC,UAAU,eAAe,GAAG,IAAI;AAChC,SAAS;AACT,QAAQ,CAAC,MAAM;AACf,SAAS,UAAU,EAAE,uDAAuD,EAAE,IAAI,EAAE;AACpF,QAAQ;;AAER,QAAQ;AACR,OAAO,KAAK,EAAE;AACd,QAAQ,GAAG,CAAC,IAAI,EAAE;AAClB,QAAQ,GAAG,CAAC,GAAG,GAAG,CAAC;AACnB;AACA,OAAO,KAAK,EAAE,CAAC;AACf,OAAO,KAAK,EAAE,CAAC;AACf,OAAO,KAAK,MAAM,CAAC;AACnB,OAAO,KAAK,MAAM,CAAC;AACnB,OAAO,KAAK,CAAC,CAAC;AACd,OAAO,KAAK,MAAM;AAClB;AACA,QAAQ,IAAI,aAAa,KAAK,eAAe,IAAI,IAAI,KAAK,YAAY,GAAG;AACzE,SAAS,IAAI,GAAG,cAAc;AAC9B,SAAS,IAAI,aAAa,KAAK,eAAe,GAAG;AACjD,UAAU,SAAS,GAAG,IAAI;AAC1B,SAAS;AACT,SAAS;AACT,QAAQ;AACR,QAAQ,IAAI,IAAI,KAAK,cAAc,IAAI,IAAI,KAAK,oBAAoB,GAAG;AACvE,SAAS,IAAI,aAAa,IAAI,eAAe,IAAI,GAAG,CAAC,UAAU,GAAG;AAClE,UAAU,SAAS,GAAG,IAAI;AAC1B,SAAS;AACT,SAAS;AACT,QAAQ;AACR,aAAa,IAAI,IAAI,KAAK,cAAc,GAAG;AAC3C,SAAS,IAAI,aAAa,KAAK,eAAe,GAAG;AACjD,UAAU,IAAI,GAAG,cAAc;AAC/B,UAAU,SAAS,GAAG,IAAI;AAC1B,UAAU;AACV,SAAS;AACT,SAAS,IAAI,GAAG,CAAC,MAAM,CAAC,MAAM;AAC9B,UAAU,OAAO,CAAC,GAAG,EAAE,qBAAqB,EAAE;AAC9C,UAAU,IAAI,GAAG,oBAAoB;AACrC;AACA,QAAQ;AACR,aAAa;AACb,SAAS,MAAM,GAAG,KAAK;AACvB,SAAS,UAAU,EAAE,4CAA4C,EAAE,IAAI,EAAE;AACzE,QAAQ;AACR;AACA,QAAQ;AACR,OAAO;AAaP;AACA,QAAQ,IAAI,IAAI,IAAI,cAAc,MAAM,EAAE,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,EAAE,eAAe,IAAI,IAAI,EAAE,SAAS,MAAM,IAAI,IAAI,EAAE,SAAS,MAAM,IAAI,IAAI,EAAE,SAAS,EAAE,GAAG;AAClK,SAAS,OAAO,GAAG,KAAK;AACxB,SAAS,QAAQ,GAAG,KAAK;AACzB,SAAS,WAAW,GAAG,KAAK;AAC5B,SAAS,QAAQ,GAAG,KAAK;;AAEzB,SAAS,aAAa,GAAG,KAAK;AAC9B,SAAS,cAAc,GAAG,KAAK;AAC/B,SAAS,OAAO,GAAG,KAAK;AACxB,SAAS,GAAG,CAAC,MAAM,GAAG,GAAG;AACzB,SAAS,KAAK,CAAC,CAAC,GAAG,CAAC;AACpB,SAAS,aAAa,EAAE;AACxB,SAAS;AACT,QAAQ;;AAER,QAAQ,IAAI,IAAI,KAAK,oBAAoB,GAAG;AAC5C,SAAS,MAAM,GAAG,KAAK;AACvB,SAAS,UAAU,EAAE,2CAA2C,EAAE,IAAI,EAAE;AACxE,QAAQ;AACR,QAAQ,IAAI,IAAI,KAAK,cAAc,GAAG;AACtC,SAAS,IAAI,GAAG,cAAc;AAC9B,SAAS,GAAG,CAAC,UAAU,GAAG,YAAY;AACtC,SAAS,GAAG,CAAC,MAAM,IAAI,GAAG;AAC1B;AACA,SAAS;;AAET,QAAQ,CAAC;AACT,QAAQ,IAAI,GAAG,CAAC,UAAU,IAAI,WAAW,GAAG;AAC5C,SAAS,IAAI,IAAI,KAAK,cAAc,IAAI,IAAI,KAAK,YAAY;AAC7D,UAAU,YAAY,EAAE,IAAI,EAAE;AAC9B,QAAQ,CAAC,MAAM;AACf,SAAS,IAAI,IAAI,KAAK,YAAY,IAAI,IAAI,KAAK,cAAc,GAAG;AAChE;AACA;AACA;AACA;AACA,UAAU,GAAG,CAAC,MAAM,IAAI,GAAG;AAC3B,UAAU;AACV,SAAS;AACT,SAAS,IAAI,aAAa,IAAI,oBAAoB,GAAG;AACrD,UAAU,IAAI,IAAI,IAAI,cAAc,GAAG;AACvC,WAAW,GAAG,CAAC,MAAM,EAAE,GAAG;AAC1B,WAAW;AACX,UAAU;AACV,UAAU,UAAU,EAAE,qCAAqC,EAAE,IAAI,EAAE;AACnE,SAAS;AACT,SAAS,IAAI,aAAa,IAAI,0BAA0B,GAAG;AAC3D,UAAU,UAAU,EAAE,mBAAmB,EAAE,IAAI,EAAE;AACjD,SAAS;AACT,QAAQ;AACR,QAAQ,MAAM;AACd;AACA;AACA,MAAM,CAAC,KAAK;AACZ,OAAO,IAAI,IAAI,IAAI,cAAc,MAAM,EAAE,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,EAAE,eAAe,IAAI,IAAI,EAAE,SAAS,MAAM,IAAI,IAAI,EAAE,SAAS,MAAM,IAAI,IAAI,EAAE,SAAS,EAAE,GAAG;AACjK,QAAQ,OAAO,GAAG,KAAK;AACvB,QAAQ,QAAQ,GAAG,KAAK;AACxB,QAAQ,WAAW,GAAG,KAAK;AAC3B,QAAQ,QAAQ,GAAG,KAAK;;AAExB,QAAQ,aAAa,GAAG,KAAK;AAC7B,QAAQ,cAAc,GAAG,KAAK;AAC9B,QAAQ,OAAO,GAAG,KAAK;AACvB,QAAQ,GAAG,CAAC,MAAM,GAAG,GAAG;AACxB,QAAQ,KAAK,CAAC,CAAC,GAAG,CAAC;AACnB,QAAQ,aAAa,EAAE;AACvB,OAAO,CAAC,MAAM;AACd;AACA,QAAQ,IAAI,GAAG,CAAC,UAAU,IAAI,WAAW,GAAG;AAC5C,SAAS,IAAI,IAAI,IAAI,cAAc,GAAG;AACtC,UAAU,YAAY,EAAE,IAAI,EAAE;AAC9B,SAAS,CAAC,MAAM;AAChB,UAAU,IAAI,GAAG,YAAY;AAC7B,UAAU,GAAG,CAAC,MAAM,IAAI,GAAG;AAC3B,UAAU,GAAG,CAAC,UAAU,GAAG,YAAY;AACvC,SAAS;AACT,QAAQ,CAAC,MAAM;AACf,SAAS,IAAI,aAAa,IAAI,oBAAoB,GAAG;AACrD,UAAU,UAAU,EAAE,qCAAqC,EAAE,IAAI,EAAE;AACnE,SAAS;AACT,cAAc,IAAI,aAAa,IAAI,0BAA0B,GAAG;;AAEhE,UAAU,IAAI,GAAG,CAAC,UAAU,IAAI,YAAY,GAAG;AAC/C,WAAW,IAAI,GAAG,CAAC,UAAU,IAAI,YAAY,IAAI,GAAG,CAAC,UAAU,IAAI,WAAW,EAAE;AAChF,YAAY,UAAU,EAAE,mBAAmB,EAAE,IAAI,EAAE;AACnD,WAAW;AACX,WAAW,YAAY,CAAC,IAAI,CAAC;AAC7B,UAAU;AACV,UAAU,IAAI,IAAI,IAAI,oBAAoB,EAAE;AAC5C,WAAW,OAAO,QAAQ,GAAG,QAAQ,EAAE;AACvC,WAAW,IAAI,QAAQ,CAAC;AAExB,YAAY,GAAG,CAAC,MAAM,GAAG,GAAG;AAC5B,WAAW;AACX;AACA,YAAY,UAAU,EAAE,mBAAmB,EAAE,IAAI,EAAE;AACnD,UAAU,CAAC,MAAM;AACjB,WAAW,IAAI,IAAI,IAAI,YAAY,GAAG;AACtC,YAAY,GAAG,CAAC,MAAM,IAAI,GAAG;AAC7B,WAAW,CAAC;AACZ,YAAY,UAAU,EAAE,mBAAmB,EAAE,IAAI,EAAE;AACnD,UAAU;AACV,SAAS;AACT,cAAc,IAAI,aAAa,IAAI,gBAAgB,GAAG;AACtD,UAAU,IAAI,IAAI,IAAI,oBAAoB,EAAE;AAC5C,WAAW,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE;AAC/B;AACA,YAAY,GAAG,CAAC,SAAS,GAAG,GAAG,CAAC,MAAM;AACtC,YAAY,GAAG,CAAC,MAAM,GAAG,EAAE;AAC3B,WAAW;AACX,WAAW,GAAG,CAAC,MAAM,IAAI,GAAG;AAC5B,WAAW;AACX,UAAU,CAAC,MAAM;AACjB,WAAW,IAAI,IAAI,IAAI,YAAY;AACnC,YAAY,GAAG,CAAC,MAAM,IAAI,GAAG;AAC7B,UAAU;;AAEV,SAAS;AACT,QAAQ;AACR;AACA;AACA,OAAO;AACP,OAAO,MAAM;AACb,MAAM;AACN,MAAM;AACN,MAAM,KAAK,EAAE,CAAC;AACd,MAAM,KAAK,EAAE,CAAC;AACd,MAAM,KAAK,EAAE;AACb,MAAM;AACN,OAAO,IAAI,GAAG,CAAC,MAAM,GAAG,GAAG,CAAC,SAAS,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,MAAM,GAAG,EAAE;AACnE,OAAO,IAAI,aAAa,GAAG,YAAY,EAAE,IAAI,EAAE;AAC/C;AACA,OAAO,IAAI,aAAa,GAAG;AAC3B,QAAQ,GAAG,CAAC,UAAU,GAAG,YAAY;AACrC,QAAQ,IAAI,GAAG,YAAY;AAC3B,OAAO,CAAC,MAAM;AACd,QAAQ,wBAAwB,GAAG,IAAI;AACvC,QAAQ,eAAe,GAAG,IAAI;AAC9B,OAAO;AACP,OAAO;AACP,MAAM;AACN,MAAM,KAAK,EAAE;AACb,OAAO,GAAG,CAAC,IAAI,EAAE;AACjB,OAAO,GAAG,CAAC,GAAG,GAAG,CAAC;AAClB;AACA,MAAM,KAAK,EAAE,CAAC;AACd,MAAM,KAAK,CAAC,CAAC;AACb,MAAM,KAAK,EAAE,CAAC;AACd,MAAM,KAAK,MAAM,CAAC;AAClB,MAAM,KAAK,MAAM,CAAC;AAClB,MAAM,KAAK,MAAM;AACjB;AACA,OAAO,IAAI,IAAI,IAAI,YAAY,GAAG;AAClC,QAAQ,IAAI,aAAa,IAAI,eAAe,GAAG;AAC/C,SAAS,IAAI,GAAG,cAAc;AAC9B,SAAS,SAAS,GAAG,IAAI;AACzB,SAAS;AACT,QAAQ,CAAC,MAAM,IAAI,aAAa,IAAI,0BAA0B,GAAG;AACjE,SAAS,IAAI,GAAG,0BAA0B;AAC1C,SAAS;AACT,QAAQ,CAAC,MAAM,IAAI,aAAa,IAAI,oBAAoB,GAAG;AAC3D,SAAS,IAAI,GAAG,oBAAoB;AACpC,SAAS;AACT,QAAQ,CAAC,MAAM,IAAI,aAAa,IAAI,gBAAgB,GAAG;AACvD,SAAS,IAAI,GAAG,oBAAoB;AACpC,SAAS;AACT,QAAQ;AACR,OAAO;AACP,OAAO,IAAI,IAAI,IAAI,cAAc,MAAM,IAAI,IAAI,oBAAoB,EAAE;AACrE,QAAQ;AACR,YAAY,IAAI,IAAI,IAAI,cAAc,GAAG;AACzC,QAAQ,IAAI,GAAG,CAAC,MAAM,CAAC,MAAM;AAC7B,SAAS,IAAI,GAAG,oBAAoB;AACpC,OAAO;AACP,YAAY;AACZ,QAAQ,IAAI,IAAI,GAAG,YAAY;AAC/B,SAAS,YAAY,EAAE,IAAI,EAAE;AAC7B,OAAO;AACP,OAAO;AACP;AACA;AACA,MAAM,KAAK,GAAG;AACd,OAAO,IAAI,IAAI,IAAI,cAAc,GAAG,IAAI,GAAG,eAAe;AAC1D,YAAY,IAAI,IAAI,IAAI,mBAAmB,GAAG,IAAI,GAAG,mBAAmB;AACxE,YAAY,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnC,OAAO;AACP,MAAM,KAAK,GAAG;AACd,OAAO,IAAI,IAAI,IAAI,eAAe,GAAG,IAAI,GAAG,eAAe;AAC3D,YAAY,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnC,OAAO;AACP,MAAM,KAAK,GAAG;AACd,OAAO,IAAI,IAAI,IAAI,eAAe,GAAG,IAAI,GAAG,eAAe;AAC3D,YAAY,IAAI,IAAI,IAAI,eAAe,GAAG,IAAI,GAAG,eAAe;AAChE,YAAY,IAAI,IAAI,IAAI,cAAc,GAAG,IAAI,GAAG,oBAAoB;AACpE,YAAY,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnC,OAAO;AACP,MAAM,KAAK,GAAG;AACd,OAAO,IAAI,IAAI,IAAI,eAAe,GAAG;AACrC,QAAQ,GAAG,CAAC,UAAU,GAAG,UAAU;AACnC,QAAQ,IAAI,GAAG,YAAY;AAC3B,OAAO,CAAC,MAAM,IAAI,IAAI,IAAI,gBAAgB,GAAG;AAC7C,QAAQ,GAAG,CAAC,UAAU,GAAG,WAAW;AACpC,QAAQ,IAAI,GAAG,YAAY;AAC3B,OAAO,CAAC,MAAM,IAAI,IAAI,IAAI,oBAAoB,GAAG,IAAI,GAAG,oBAAoB;AAC5E,YAAY,IAAI,IAAI,IAAI,oBAAoB,GAAG,IAAI,GAAG,oBAAoB;AAC1E,YAAY,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnC,OAAO;AACP,MAAM,KAAK,GAAG;AACd,OAAO,IAAI,IAAI,IAAI,cAAc,GAAG,IAAI,GAAG,eAAe;AAC1D,YAAY,IAAI,IAAI,IAAI,oBAAoB,GAAG,IAAI,GAAG,oBAAoB;AAC1E,YAAY,IAAI,IAAI,IAAI,oBAAoB,GAAG,IAAI,GAAG,oBAAoB;AAC1E,YAAY,IAAI,IAAI,IAAI,mBAAmB,GAAG,IAAI,GAAG,mBAAmB;AACxE,YAAY,IAAI,IAAI,IAAI,mBAAmB,GAAG,IAAI,GAAG,mBAAmB;AACxE,YAAY,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnC,OAAO;AACP,MAAM,KAAK,GAAG;AACd,OAAO,IAAI,IAAI,IAAI,oBAAoB,GAAG,IAAI,GAAG,oBAAoB;AACrE,YAAY,IAAI,IAAI,IAAI,oBAAoB,GAAG,EAAE,GAAG,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,IAAI,GAAG,YAAY,CAAC,CAAC;AACtG,YAAY,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnC,OAAO;AACP,MAAM,KAAK,GAAG;AACd,OAAO,IAAI,IAAI,IAAI,oBAAoB,GAAG,IAAI,GAAG,oBAAoB;AACrE,YAAY,IAAI,IAAI,IAAI,mBAAmB,GAAG,IAAI,GAAG,mBAAmB;AACxE,YAAY,IAAI,IAAI,IAAI,mBAAmB,GAAG,IAAI,GAAG,mBAAmB;AACxE,YAAY,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnC,OAAO;AACP,MAAM,KAAK,GAAG;AACd,OAAO,IAAI,IAAI,IAAI,eAAe,GAAG,IAAI,GAAG,eAAe;AAC3D,YAAY,IAAI,IAAI,IAAI,eAAe,GAAG;AAC1C,QAAQ,GAAG,CAAC,UAAU,GAAG,UAAU;AACnC,QAAQ,IAAI,GAAG,YAAY;AAC3B,OAAO,CAAC,MAAM,IAAI,IAAI,IAAI,gBAAgB,GAAG,IAAI,GAAG,gBAAgB;AACpE,YAAY,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnC,OAAO;AACP,MAAM,KAAK,GAAG;AACd,OAAO,IAAI,IAAI,IAAI,cAAc,GAAG,IAAI,GAAG,gBAAgB;AAC3D,YAAY,IAAI,IAAI,IAAI,oBAAoB,GAAG,IAAI,GAAG,oBAAoB;AAC1E,YAAY,IAAI,IAAI,IAAI,mBAAmB,GAAG,IAAI,GAAG,mBAAmB;AACxE,YAAY,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnC,OAAO;AACP,MAAM,KAAK,EAAE;AACb,OAAO,IAAI,IAAI,IAAI,gBAAgB,GAAG,IAAI,GAAG,gBAAgB;AAC7D,YAAY,IAAI,IAAI,IAAI,cAAc,GAAG,IAAI,GAAG,cAAc;AAC9D,YAAY,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnC,OAAO;AACP,MAAM,KAAK,GAAG;AACd,OAAO,IAAI,IAAI,IAAI,gBAAgB,GAAG,IAAI,GAAG,gBAAgB;AAC7D,YAAY,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnC,OAAO;AACP,MAAM,KAAK,EAAE;AACb,OAAO,IAAI,IAAI,IAAI,cAAc,GAAG,IAAI,GAAG,mBAAmB;AAC9D,YAAY,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnC,OAAO;AACP,MAAM,KAAK,EAAE;AACb,OAAO,IAAI,IAAI,IAAI,cAAc,GAAG,IAAI,GAAG,cAAc;AACzD,YAAY,IAAI,IAAI,IAAI,cAAc,GAAG,EAAE,GAAG,CAAC,UAAU,GAAG,QAAQ,GAAG,aAAa,GAAG,SAAS,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC,CAAC,IAAI,GAAG,YAAY,CAAC,CAAC;AACzI,YAAY,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnC,OAAO;AACP,MAAM,KAAK,GAAG;AACd,OAAO,IAAI,IAAI,IAAI,mBAAmB,GAAG,EAAE,GAAG,CAAC,UAAU,GAAG,QAAQ,GAAG,kBAAkB,GAAG,cAAc,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC,CAAC,IAAI,GAAG,YAAY,CAAC,CAAC;AACnJ,YAAY,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnC,OAAO;AACP,MAAM,KAAK,EAAE;AACb,OAAO,IAAI,IAAI,IAAI,cAAc,GAAG,QAAQ,GAAG,CAAC,QAAQ;AACxD,YAAY,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnC,OAAO;AACP,MAAM,KAAK,EAAE;AACb,OAAO,IAAI,IAAI,KAAK,cAAc,GAAG,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC;AAC3D,OAAO;AACP;AACA,MAAM,MAAM;AACZ;AACA;AACA;AACA,KAAK,IAAI,SAAS,GAAG;AACrB,MAAM,IAAI,IAAI,IAAI,YAAY,GAAG;AACjC,OAAO,IAAI,GAAG,cAAc;AAC5B,MAAM;AACN,MAAM;AACN,KAAK;AACL,IAAI;;AAEJ,IAAI,IAAI,CAAC,IAAI,GAAG,CAAC,MAAM,GAAG;AAC1B,KAAK,UAAU,EAAE,KAAK,EAAE;AACxB,KAAK,IAAI,GAAG,CAAC,UAAU,IAAI,WAAW,MAAM,eAAe,IAAI,IAAI,IAAI,cAAc,EAAE,GAAG;AAC1F,MAAM,YAAY,EAAE,EAAE,EAAE,CAAC;AACzB,KAAK;AACL,KAAK,IAAI,eAAe,IAAI,eAAe,IAAI,aAAa,IAAI,oBAAoB,GAAG;AACvF,MAAM,MAAM,GAAG,CAAC;AAChB,KAAK;AACL,UAAU;AACV,MAAM,IAAI,aAAa,IAAI,eAAe,MAAM,GAAG,CAAC,UAAU,IAAI,WAAW,IAAI,MAAM,EAAE,GAAG;AAC5F,OAAO,SAAS,GAAG,IAAI;AACvB,OAAO,MAAM,GAAG,CAAC;AACjB,MAAM;AACN,KAAK;AACL,IAAI;AACJ,SAAS;AACT;AACA,KAAK,KAAK,CAAC,CAAC,GAAG,CAAC;AAChB,KAAK,OAAO,CAAC,OAAO,EAAE,KAAK,EAAE;AAC7B,KAAK,MAAM,GAAG,CAAC,CAAC;AAChB,IAAI;AACJ,IAAI,IAAI,SAAS,GAAG;AACpB,KAAK,UAAU,GAAG,IAAI;AACtB,KAAK;AACL,IAAI;AACJ,GAAG;;AAEH,GAAG,IAAI,CAAC,MAAM,GAAG,OAAO,EAAE;AAC1B,GAAG,IAAI,SAAS,IAAI,GAAG,CAAC,UAAU,IAAI,WAAW,GAAG;AACpD,IAAI,IAAI,GAAG,cAAc;AACzB,IAAI,MAAM,GAAG,YAAY,EAAE;AAC3B;AACA,IAAI,QAAQ,GAAG,KAAK;AACpB,IAAI,GAAG,CAAC,MAAM,GAAG,EAAE;AACnB,IAAI,GAAG,CAAC,UAAU,GAAG,WAAW;AAChC,GAAG;AACH,GAAG,SAAS,GAAG,KAAK;AACpB,GAAG,OAAO,MAAM;AAChB,EAAE;AACF;AACA;;;;AAIA,MAAM,OAAO,GAAG,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,EAAE,EAAE,CAAC;AAC/C,IAAI,YAAY,GAAG,CAAC;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC,KAAK,GAAG,UAAU,GAAG,EAAE,OAAO,GAAG;AACtC,CAAC,IAAI,WAAW,GAAG,YAAY,EAAE;AACjC,CAAC,IAAI,MAAM;AACX,CAAC,IAAI,OAAO,CAAC,MAAM,IAAI,WAAW;AAClC,EAAE,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,EAAE,EAAE,EAAE;AAC/C,CAAC,MAAM,GAAG,OAAO,CAAC,WAAW,CAAC;AAC9B,CAAC,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;AAC/C,CAAC,MAAM,CAAC,KAAK,EAAE;AACf,CAAC,MAAM,WAAW,GAAG,MAAM,CAAC,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE;AAC/C,CAAC,IAAI,WAAW,GAAG,CAAC,GAAG;AAKvB,EAAE,IAAI,MAAM,GAAG,MAAM,CAAC,KAAK,EAAE;AAC7B,EAAE,IAAI,EAAE,WAAW,KAAK,OAAO,MAAM,MAAM,WAAW,GAAG,CAAC,EAAE;AAC5D,GAAG,MAAM,IAAI,KAAK,EAAE,kCAAkC,CAAC;AACvD,EAAE;;AAEF,EAAE,MAAM,GAAG,OAAO,OAAO,KAAK,UAAU,IAAI,SAAS,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE;AACvE,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC;AAChC,GAAG,IAAI,KAAK,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;AAC3C,IAAI,KAAK,CAAC,IAAI,KAAK,EAAE;AACrB,KAAK,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE;AACzD,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;AACxB,MAAM,IAAI,CAAC,KAAK,SAAS,EAAE;AAC3B,OAAO,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC;AACnB,MAAM,CAAC,MAAM;AACb,OAAO,OAAO,KAAK,CAAC,CAAC,CAAC;AACtB,MAAM;AACN,KAAK;AACL,IAAI;AACJ,GAAG;AACH,GAAG,OAAO,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,CAAC;AAC1C,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,MAAM,CAAC,EAAE,EAAE,CAAC,IAAI,MAAM;AAC/B,EAAE,YAAY,EAAE;AAChB,EAAE,OAAO,MAAM;AACf,CAAC;AACD,CAAC,MAAM,CAAC,UAAU,EAAE;AACpB,CAAC,OAAO,SAAS;AACjB;;;AAGA,SAAS,UAAU,GAAG;AACtB,CAAC,OAAO,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE;AAC5B;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC,WAAW,GAAG,UAAU,IAAI,EAAE,GAAG,GAAG;AACzC,CAAC,IAAI,GAAG;AACR,CAAC,IAAI,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;AAClC,CAAC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,GAAG;AAC9C,EAAE,IAAI,CAAC,EAAE,CAAC;AACV,EAAE,IAAI,EAAE,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,EAAE,GAAG;AACxD,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;AACtB,GAAG,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC;AACpB,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;AAChB,QAAQ,CAAC,EAAE,CAAC;AACZ,EAAE;AACF,CAAC;AACD;AACA,CAAC,aAAa,CAAC,IAAI,EAAE,GAAG,GAAG,EAAE,IAAI,GAAG;AACpC,OAAO,GAAG,CAAC,UAAU,CAAC,QAAQ;AAC9B,OAAO,KAAK,GAAG,MAAM,CAAC,cAAc,CAAC,GAAG;AACxC,OAAO,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE;AACpC,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC5C,EAAE,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG;AACxC,GAAG,IAAI,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5B,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;AAClC,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG;AACtB,GAAG,IAAI,CAAC,GAAG,CAAC;AACZ,IAAI,CAAC,EAAE,CAAC;AACR,EAAE;AACF,CAAC;AACD,CAAC,IAAI,GAAG,CAAC,KAAK,KAAK,MAAM,CAAC,cAAc,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,KAAK,GAAG,IAAI;AACjE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC,cAAc,GAAG,UAAU,IAAI,EAAE,KAAK,EAAE,CAAC,GAAG;AACjD,CAAC,MAAM,IAAI,KAAK,EAAE,+CAA+C,GAAG,aAAa,GAAG,SAAS,CAAC,QAAQ,EAAE,EAAE;AAC1G;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC,MAAM,GAAG,UAAU,IAAI,EAAE,KAAK,EAAE,CAAC,GAAG;AACzC;AACA,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,IAAI,KAAK,CAAC,SAAS,KAAK,MAAM,CAAC,SAAS,GAAG;AAChE,EAAE,IAAI,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,MAAM,IAAI,KAAK,EAAE,mDAAmD,EAAE;AAChH;AACA,EAAE,YAAY,CAAC,GAAG,EAAE,KAAK,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,WAAW,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE;AAC7F,CAAC,CAAC,MAAM;AACR,EAAE,IAAI,GAAG,GAAG,MAAM,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,QAAQ,EAAE;AAC3C,EAAE,IAAI,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,MAAM,IAAI,KAAK,EAAE,qDAAqD,EAAE;AACvG;AACA,EAAE,aAAa,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE;AAC9D,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC,QAAQ,GAAG,UAAU,aAAa,EAAE,CAAC,EAAE,CAAC,GAAG;AAChD,CAAC,SAAS,YAAY,GAAG,EAAE;AAC3B,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,YAAY,CAAC,SAAS;AACrC,EAAE,IAAI,cAAc,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,MAAM,IAAI,KAAK,EAAE,qDAAqD,EAAE;AAClH,EAAE,IAAI,CAAC,IAAI,EAAE,aAAa,IAAI,CAAC,EAAE,CAAC;AAClC,GAAG,MAAM,IAAI,KAAK,EAAE,uCAAuC,CAAC;AAC5D,CAAC;AACD,CAAC,cAAc,CAAC,GAAG,EAAE,aAAa,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAC,SAAS,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE;;AAEhF;;;AAGA;AACA;AACA;AACA,IAAI,CAAC,gBAAgB,GAAG,UAAU,aAAa,EAAE,CAAC,WAAW;AAC7D,CAAC,MAAM,IAAI,KAAK,EAAE,iDAAiD,GAAG,aAAa,GAAG,CAAC,CAAC,QAAQ,EAAE,EAAE;AACpG;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC,OAAO,GAAG,UAAU,aAAa,EAAE,SAAS,EAAE,EAAE,EAAE,IAAI,GAAG;AAC9D,CAAC,IAAI,CAAC,MAAM,EAAE,aAAa,EAAE,SAAS,EAAE,EAAE,EAAE;AAC5C,CAAC,IAAI,CAAC,QAAQ,EAAE,aAAa,EAAE,SAAS,EAAE,IAAI,EAAE;AAChD;;AAEA,IAAI,CAAC,cAAc,GAAG,UAAU,aAAa,EAAE,SAAS,iBAAiB;AACzE,CAAC,MAAM,IAAI,KAAK,EAAE,gDAAgD,GAAG,aAAa,GAAG,SAAS,CAAC,QAAQ,EAAE,EAAE;AAC3G;;AAEA;AACA;AACA;AACA;AACA,IAAI,CAAC,WAAW,GAAG,WAAW;AAC9B,CAAC,IAAI,OAAO,GAAG,EAAE;AACjB,CAAC,IAAI,QAAQ,GAAG,GAAG;;AAEnB,CAAC,IAAI,QAAQ,GAAG,IAAI,OAAO,EAAE;AAC7B,CAAC,MAAM,IAAI,GAAG,EAAE;AAChB,CAAC,IAAI,QAAQ,GAAG,EAAE;AAClB,CAAC,MAAM,iBAAiB,GAAG,IAAI,OAAO,EAAE;AACxC,CAAC,MAAM,kBAAkB,GAAG,IAAI,GAAG,EAAE;AACrC,CAAC,IAAI,YAAY,GAAG,IAAI;AACxB,CAAC,MAAM,YAAY,GAAG,EAAE,CAAC;AACzB,CAAC,IAAI,mBAAmB,GAAG,KAAK;AAChC,CAAC,SAAS,aAAa,CAAC,CAAC,EAAE;AAC3B;AACA,EAAE,IAAI,EAAE,QAAQ,KAAK,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,OAAO,IAAI;AACzD,EAAE,IAAI,EAAE,QAAQ,KAAK,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,GAAG;AACjD,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;AACzC,EAAE;AACF;AACA,EAAE,IAAI,CAAC,CAAC,QAAQ,EAAE,UAAU,EAAE,GAAG,QAAQ,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,QAAQ;AAC5E,EAAE,SAAS,EAAE,CAAC,IAAI,QAAQ;AAC1B,MAAM,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AACzB,MAAM,oCAAoC,CAAC,IAAI,EAAE,CAAC,EAAE,IAAI,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,QAAQ,EAAE,CAAC;AAC9F,CAAC;;;AAGD;AACA,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,MAAM,CAAC,SAAS,EAAE;AAC1C,CAAC;AACD,EAAE,YAAY,CAAC,GAAG,EAAE,MAAM,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE;AAC3G;AACA;AACA,EAAE,YAAY,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,KAAK;AACpD,GAAG,IAAI,GAAG,MAAM;AAChB,GAAG,EAAE,GAAG,YAAY;AACpB,KAAK,IAAI,IAAI,CAAC,OAAO,EAAE,IAAI,YAAe;AAC1C,KAAK;AACL,MAAM,OAAO,0BAA0B;AACvC,KAAK;AACL,KAAK,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,iBAAiB,EAAE;AACxC,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG;AAC/B,KAAK,GAAG,GAAG,SAAS,GAAG,EAAE;AACzB,MAAM,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC1C,MAAM,OAAO,CAAC,IAAI,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,IAAI,IAAI;AAC1C,KAAK,CAAC;AACN,KAAK,IAAI,GAAG,SAAS,GAAG,EAAE;AAC1B,MAAM,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC1C,MAAM,OAAO,CAAC,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,KAAK,IAAI,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,IAAI;AACpE,KAAK,CAAC;AACN,IAAI,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE;AAC9B,KAAK,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;AACnC,KAAK,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;AAC9B,KAAK,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;AAC/B,KAAK,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;AACjC,KAAK,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;AACjC,KAAK,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC;AACvC,KAAK,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,EAAE,CAAC;AACxB,KAAK,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;AAClC,GAAG,CAAC;AACJ,GAAG,EAAE;AACL,EAAE,YAAY,CAAC,GAAG,EAAE,MAAM,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,KAAK;AACtD,GAAG,IAAI,GAAG,QAAQ;AAClB,GAAG,EAAE,GAAG,YAAY;AACpB,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,iBAAiB,EAAE;AACvC,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG;AAC/B,KAAK,GAAG,GAAG,SAAS,GAAG,EAAE;AACzB,MAAM,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC1C,MAAM,OAAO,CAAC,IAAI,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,IAAI,IAAI;AAC1C,KAAK,CAAC;AACN,KAAK,IAAI,GAAG,SAAS,GAAG,EAAE;AAC1B,MAAM,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC1C,MAAM,OAAO,CAAC,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,KAAK,IAAI,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,IAAI;AACpE,KAAK,CAAC;AACN,KAAK,IAAI,GAAG,SAAS,GAAG,EAAE;AAC1B,MAAM,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC1C,MAAM,OAAO,CAAC,IAAI,GAAG,MAAM,GAAG,GAAG,GAAG,EAAE,KAAK,IAAI,GAAG,KAAK,GAAG,GAAG,GAAG,EAAE,CAAC,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,EAAE,CAAC,IAAI,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC,IAAI,IAAI,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,CAAC,GAAG,IAAI;AACxJ,KAAK,CAAC;AACN,IAAI,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE;AAC9B,KAAK,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;AACnC,KAAK,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;AAC9B,KAAK,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;AAC/B,KAAK,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;AACjC,KAAK,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;AACjC,KAAK,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;AACvD,KAAK,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,EAAE,CAAC;AACxB,KAAK,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;AAClC,GAAG,CAAC;AACJ,GAAG,EAAE;AACL,EAAE,YAAY,CAAC,GAAG,EAAE,OAAO,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,EAAE,EAAE,CAAC,UAAU,GAAG,EAAE;AAC3F,EAAE,YAAY,CAAC,GAAG,EAAE,MAAM,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC;AAC7D,QAAQ,EAAE,CAAC,UAAU;AACrB,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,OAAO,KAAK;AACnC,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;AAC1B,OAAO,MAAM,CAAC,IAAI;AAClB,OAAO,CAAC,IAAI,CAAC,CAAC,EAAE,WAAW,CAAC,UAAU;AACtC,MAAM;AACN,GAAG,EAAE;AACL,EAAE,YAAY,CAAC,GAAG,EAAE,MAAM,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC;AACjD,QAAQ,IAAI,GAAG;AACf,QAAQ,EAAE,CAAC,UAAU,EAAE,OAAO,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,EAAE;AACnF,EAAE,IAAI,OAAO,MAAM,KAAK,UAAU;AAClC,GAAG,YAAY,CAAC,GAAG,EAAE,MAAM,CAAC;AAC5B,UAAU,EAAE,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC,WAAW,EAAE,OAAO,IAAI,GAAG,GAAG,CAAC,CAAC,EAAE,EAAE;AAClF;AACA,EAAE,YAAY,CAAC,GAAG,EAAE,WAAW,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC;AACjE,QAAQ,EAAE,CAAC,WAAW,EAAE,OAAO,GAAG,CAAC,aAAa,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC;AAC9E,GAAG,EAAE;AACL;AACA,EAAE,YAAY,CAAC,GAAG,EAAE,UAAU,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC;AAChE,QAAQ,EAAE,CAAC,WAAW,EAAE,OAAO,GAAG,CAAC,aAAa,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC;AACrF,GAAG,EAAE;AACL,EAAE,YAAY,CAAC,GAAG,EAAE,iBAAiB,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC;AACvE,QAAQ,EAAE,CAAC,WAAW,EAAE,OAAO,GAAG,CAAC,aAAa,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC;AACrF,GAAG,EAAE;AACL,EAAE,YAAY,CAAC,GAAG,EAAE,SAAS,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC;AAC/D,QAAQ,EAAE,CAAC,WAAW,EAAE,OAAO,GAAG,CAAC,aAAa,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC;AACrF,GAAG,EAAE;AACL,EAAE,YAAY,CAAC,GAAG,EAAE,WAAW,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC;AACjE,QAAQ,EAAE,CAAC,WAAW,EAAE,OAAO,GAAG,CAAC,aAAa,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC;AACrF,GAAG,EAAE;AACL,EAAE,YAAY,CAAC,GAAG,EAAE,UAAU,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC;AAChE,QAAQ,EAAE,CAAC,WAAW,EAAE,OAAO,GAAG,CAAC,aAAa,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC;AACrF,GAAG,EAAE;AACL,EAAE,YAAY,CAAC,GAAG,EAAE,WAAW,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC;AACjE,QAAQ,EAAE,CAAC,WAAW,EAAE,OAAO,GAAG,CAAC,aAAa,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC;AACrF,GAAG,EAAE;AACL,EAAE,YAAY,CAAC,GAAG,EAAE,UAAU,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC;AAChE,QAAQ,EAAE,CAAC,WAAW,EAAE,OAAO,GAAG,CAAC,aAAa,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC;AACrF,GAAG,EAAE;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,YAAY,CAAC,GAAG,EAAE,YAAY,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC;AAClE,QAAQ,EAAE,CAAC,WAAW,EAAE,OAAO,GAAG,CAAC,aAAa,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC;AACrF,GAAG,EAAE;AACL,EAAE,YAAY,CAAC,GAAG,EAAE,YAAY,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC;AAClE,QAAQ,EAAE,CAAC,WAAW,EAAE,OAAO,GAAG,CAAC,aAAa,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC;AACrF,GAAG,EAAE;AACL,EAAE,YAAY,CAAC,GAAG,EAAE,YAAY,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC;AAClE,QAAQ,EAAE,CAAC,WAAW,EAAE,OAAO,GAAG,CAAC,aAAa,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC;AACrF,GAAG,EAAE;AACL;AACA,EAAE,YAAY,CAAC,GAAG,EAAE,MAAM,CAAC,SAAS,EAAE,SAAS,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC;AACxE,QAAQ,EAAE,CAAC,SAAS,CAAC,CAAC,WAAW,CAAC;AAClC,IAAI,OAAO,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG;AACtC,GAAG;AACH,GAAG,EAAE;AACL,EAAE,cAAc,CAAC,GAAG,EAAE,OAAO,EAAE,EAAE,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC,UAAU,KAAK,CAAC,GAAG,CAAC;AACzE,GAAG,OAAO,IAAI,MAAM,EAAE,IAAI,EAAE;AAC5B,EAAE,CAAC,EAAE,EAAE;;AAEP,EAAE,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC,SAAS,EAAE,SAAS,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC;AACrE,QAAQ,EAAE,CAAC;AACX,GAAG,EAAE;AACL,EAAE,cAAc,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC,UAAU,KAAK,CAAC,GAAG,CAAC;AACpE,GAAG,IAAI,KAAK,GAAG;AACf,IAAI,IAAI,CAAC,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE;AAC1B,IAAI,OAAO,SAAS;AACpB,GAAG;AACH,GAAG,OAAO,IAAI;AACd,EAAE,CAAC,EAAE,EAAE;AACP;AACA,EAAE,YAAY,CAAC,GAAG,EAAE,KAAK,CAAC,SAAS,EAAE,WAAW,GAAG,EAAE,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,WAAW,CAAC;AACtG,QAAQ,EAAE,EAAE,IAAI;AAChB,GAAG,EAAE;;AAEL,CAAC;;AAED,CAAC,MAAM,WAAW,GAAG;AACrB,EAAE,WAAW,CAAC,IAAI,CAAC,GAAG,EAAE;AACxB,GAAG,IAAI,GAAG,CAAC;AACX,GAAG,IAAI,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;AACpC,GAAG,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,GAAG;AAChD;AACA,IAAI,IAAI,CAAC,EAAE,CAAC;AACZ,IAAI,IAAI,EAAE,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,EAAE,GAAG;AAC1D,KAAK,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;AACxB,KAAK,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC;AACtB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;AAClB,UAAU,CAAC,EAAE,CAAC;AACd,IAAI;AACJ,GAAG;AACH,GAAG,OAAO,CAAC,IAAI,EAAE,GAAG,GAAG,EAAE,IAAI,GAAG;AAChC,YAAY,GAAG,CAAC,UAAU,CAAC,QAAQ;AACnC,YAAY,KAAK,GAAG,MAAM,CAAC,cAAc,CAAC,GAAG;AAC7C,YAAY,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE;;AAEzC,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC9C,IAAI,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG;AAC1C,KAAK,IAAI,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9B,KAAK,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;AACpC,KAAK,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG;AACxB,KAAK,IAAI,CAAC,GAAG,CAAC;AACd,MAAM,CAAC,EAAE,CAAC;AACV,IAAI;AACJ,GAAG;AACH,GAAG,IAAI,GAAG,CAAC,KAAK,KAAK,MAAM,CAAC,cAAc,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,KAAK,GAAG,IAAI;AACnE,EAAE,CAAC;AACH,EAAE,sBAAsB,EAAE,EAAE,GAAG,EAAE,YAAY,GAAG,GAAE,CAAC,CAAC;AACpD,EAAE,UAAU,CAAC,CAAC,EAAE;AAChB;AACA,GAAG,OAAO,CAAC,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,IAAI,CAAC,IAAI,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;AACpE,EAAE,CAAC;AACH,EAAE,YAAY,CAAC,CAAC,EAAE;AAClB,GAAG,IAAI,YAAY;AACnB,IAAI,OAAO,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;AACxC,GAAG,OAAO,CAAC;AACX,EAAE,CAAC;AACH,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,OAAO,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9C,EAAE,QAAQ,CAAC,CAAC,EAAE,EAAE,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC;AAC/B,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,OAAO,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AACvD,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,GAAG;AAC3B,GAAG,IAAI,KAAK,CAAC,SAAS,IAAI,KAAK,CAAC,SAAS,KAAK,MAAM,CAAC,SAAS,GAAG;AACjE,IAAI,IAAI,iBAAiB,CAAC,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,MAAM,IAAI,KAAK,EAAE,mDAAmD,EAAE;AACvH,IAAI,iBAAiB,CAAC,GAAG,EAAE,KAAK,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,WAAW,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE;AACpG,GAAG,CAAC,MAAM;AACV,IAAI,IAAI,GAAG,GAAG,MAAM,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,QAAQ,EAAE;AAC7C,IAAI,IAAI,kBAAkB,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,MAAM,IAAI,KAAK,EAAE,qDAAqD,EAAE;AAC9G,IAAI,kBAAkB,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE;AACrE,GAAG;AACH,EAAE,CAAC;AACH,EAAE,IAAI,mBAAmB,GAAG,EAAE,OAAO,mBAAmB,CAAC,CAAC,CAAC;AAC3D,EAAE,IAAI,mBAAmB,CAAC,GAAG,EAAE,EAAE,mBAAmB,GAAG,GAAG,CAAC,CAAC,CAAC;AAC7D;AACA,CAAC,OAAO,WAAW;;AAEnB;AACA;AACA;AACA;AACA;AACA,CAAC,SAAS,YAAY,EAAE,IAAI,GAAG;AAC/B,EAAE,IAAI,IAAI,KAAK,IAAI,GAAG,OAAO,SAAS;AACtC,EAAE,IAAI,KAAK,GAAG,QAAQ,CAAC,GAAG,EAAE,IAAI,EAAE;AAClC;AACA,EAAE,IAAI,CAAC,KAAK,GAAG;AACf,GAAG,QAAQ,CAAC,GAAG,EAAE,IAAI,EAAE,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;AAC9C,GAAG,OAAO,SAAS;AACnB,EAAE;AACF,EAAE,OAAO,KAAK,CAAC,KAAK;AACpB,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,SAAS,WAAW,CAAC,CAAC,CAAC,IAAI,EAAE;AAC9B,EAAE,IAAI,CAAC;AACP,EAAE,IAAI,GAAG;AACT,EAAE,IAAI,GAAG,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC;AACpC,EAAE,GAAG,GAAG,OAAO,CAAC,IAAI,EAAE,GAAG,EAAE;AAC3B,GAAG,IAAI,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,KAAK,KAAK,GAAG,GAAG,OAAO,IAAI;AACnD,EAAE,CAAC,EAAE;AACL,EAAE,IAAI,GAAG,GAAG,OAAO,GAAG;;AAEtB,EAAE,IAAI,OAAO,CAAC,MAAM,IAAI,aAAa,CAAC,MAAM,GAAG;AAC/C,GAAG,IAAI,IAAI,IAAI;AACf,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,IAAI,OAAO,CAAC,KAAK,QAAQ,GAAG,OAAO,CAAC,CAAC,MAAM,OAAO,SAAS,CAAC,CAAC,CAAC,EAAE;AAC1F,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,EAAE;AACvB,GAAG,CAAC,MAAM;AACV,IAAI,IAAI,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;AACnC,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,GAAG;AACjD,KAAK,IAAI,CAAC,EAAE,CAAC;AACb,KAAK,IAAI,EAAE,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,EAAE,GAAG;AAC3D,MAAM,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;AACzB,MAAM,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC;AACvB,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;AACnB,WAAW,CAAC,EAAE,CAAC;AACf,KAAK;AACL,IAAI;AACJ,IAAI,CAAC,GAAG,UAAU,CAAC,QAAQ,EAAE;AAC7B,GAAG;AACH,GAAG,GAAG,GAAG,OAAO,CAAC,IAAI,EAAE,GAAG,EAAE;AAC5B,IAAI,IAAI,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,OAAO,IAAI;AACnC,GAAG,CAAC,EAAE;AACN,GAAG,IAAI,CAAC,GAAG;AACX,IAAI,GAAG,GAAG,aAAa,CAAC,IAAI,EAAE,GAAG,EAAE;AACnC,KAAK,IAAI,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,OAAO,IAAI;AACpC,IAAI,CAAC,EAAE;AACP,EAAE;AACF,EAAE,OAAO,GAAG;AACZ,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,SAAS,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,GAAG;AAC/C,EAAE,IAAI,MAAM,KAAK,SAAS,GAAG,OAAO,WAAW;AAC/C,EAAE,IAAI,MAAM,KAAK,IAAI,GAAG;AACxB,EAAE,IAAI,GAAG;AACT,EAAE,IAAI,MAAM;AACZ,EAAE,IAAI,GAAG;;AAET,EAAE,IAAI,CAAC;AACP,EAAE,MAAM,SAAS,GAAG,OAAO,KAAK;AAChC,EAAE,MAAM,OAAO,GAAG,OAAO,QAAQ;AACjC,EAAE,GAAG,GAAG,EAAE;AACV,EAAE,MAAM,GAAG,EAAE;;AAEb;AACA;;AAEA,EAAE,IAAI,SAAS,KAAK,QAAQ,EAAE;AAC9B,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,IAAI,CAAC,EAAE;AAClC,IAAI,MAAM,IAAI,GAAG;AACjB,GAAG;;AAEH;AACA,EAAE,CAAC,MAAM,IAAI,SAAS,KAAK,QAAQ,EAAE;AACrC,GAAG,MAAM,GAAG,KAAK;AACjB,EAAE;;AAEF;AACA;;AAEA,EAAE,GAAG,GAAG,QAAQ;AAChB,EAAE,IAAI,QAAQ,IAAI,OAAO,KAAK;AAC9B,WAAW,OAAO,KAAK;AACvB,YAAY,OAAO,QAAQ,CAAC,MAAM,KAAK;AACvC,MAAM,EAAE;AACR,GAAG,MAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC;AACpC,EAAE;;AAEF,EAAE,IAAI,CAAC,MAAM,GAAG,CAAC;AACjB,EAAE,QAAQ,GAAG,IAAI,OAAO,EAAE;;AAE1B,EAAE,MAAM,WAAW,GAAG,GAAG,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE;AAC5C,EAAE,aAAa,CAAC,MAAM,GAAG,CAAC;AAC1B,EAAE,OAAO,WAAW;;AAEpB;AACA,EAAE,SAAS,GAAG,CAAC,GAAG,EAAE,MAAM,EAAE;AAC5B,GAAG,IAAI,IAAI,GAAG,GAAG;AACjB,GAAG,MAAM,cAAc,GAAG,WAAW,CAAC,EAAE;AACxC,GAAG,MAAM,YAAY,GAAG,SAAS,CAAC,EAAE,CAAC;AACrC,GAAG,WAAW,CAAC,EAAE,GAAG,aAAa;AACjC,GAAG,SAAS,CAAC,EAAE,GAAG,WAAW;AAC7B,GAAG,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;AAC7B,GAAG,WAAW,CAAC,EAAE,GAAG,cAAc;AAClC,GAAG,SAAS,CAAC,EAAE,GAAG,YAAY;AAC9B,GAAG,OAAO,CAAC;;AAEX,GAAG,SAAS,aAAa,GAAG;AAC5B,IAAI,IAAI,CAAC;AACT,IAAI,IAAI,OAAO,GAAG,EAAE;AACpB,IAAI,IAAI,iBAAiB,GAAG,IAAI,CAAC,MAAM;;AAEvC;AACA;AACA;AACA,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;AAC7C,KAAK,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC;AAChC,KAAK,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,MAAM;AACxC,IAAI;AACJ,IAAI,IAAI,CAAC,MAAM,GAAG,iBAAiB;AACnC;AACA,IAAI,QAAQ,CAAC,MAAM,GAAG,iBAAiB;AACvC;AACA;AACA;AACA,IAAI,CAAC,KAAK,OAAO,CAAC,MAAM,KAAK;AAC7B,OAAO;AACP,OAAO;AACP,QAAQ;AACR,OAAO;AACP,SAAS;AACT,SAAS,OAAO,CAAC,IAAI,CAAC,KAAK,GAAG,GAAG;AACjC,SAAS;AACT,SAAS;AACT,SAAS;AACT,OAAO,CAAC,IAAI,CAAC,EAAE;AACf,QAAQ,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,EAAE;AACvC,IAAI,OAAO,CAAC;AACZ,GAAG,CAAC;AACJ,GAAG,SAAS,WAAW,EAAE;AACzB;AACA,IAAI,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC;AACxB,IAAI,IAAI,GAAG,GAAG;AACd,IAAI,IAAI,KAAK,GAAG,IAAI;AACpB;AACA,IAAI,KAAK,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,IAAI,EAAE;AACnC;AACA,KAAK,GAAG,CAAC,GAAG,GAAG,KAAK;AACpB,KAAK,IAAI,iBAAiB,GAAG,IAAI,CAAC,MAAM;AACxC,KAAK,IAAI,CAAC,iBAAiB,CAAC,GAAG,GAAG;AAClC;AACA,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,GAAG,IAAI,aAAa,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC;AACtE,KAAK,IAAI,CAAC,MAAM,GAAG,iBAAiB;AACpC,KAAK,KAAK,GAAG,KAAK;AAClB,IAAI;AACJ,IAAI,GAAG,IAAI,GAAG;AACd;AACA,IAAI,OAAO,GAAG;AACd,GAAG;;AAEH;AACA,EAAE,SAAS,IAAI,CAAC,GAAG,EAAE,MAAM,EAAE;;AAE7B,GAAG,IAAI,CAAC,CAAC;AACT,GAAG,IAAI,CAAC,CAAC;AACT,GAAG,IAAI,CAAC,CAAC;AACT,GAAG,IAAI,MAAM;AACb,GAAG,IAAI,YAAY;AACnB,GAAG,IAAI,OAAO;AACd,GAAG,IAAI,iBAAiB,GAAG,IAAI,CAAC,MAAM;AACtC,GAAG,IAAI,OAAO,GAAG,IAAI;AACrB,GAAG,IAAI,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC;AAC1B,GAAG,IAAI,QAAQ,IAAI,OAAO,KAAK,KAAK,QAAQ,CAAC;AAC7C,GAAG,IAAI,CAAC;;AAER,GAAG,IAAI,QAAQ,MAAM,KAAK,KAAK,IAAI,EAAE,GAAG;AACxC,IAAI,IAAI,YAAY,EAAE;AACtB,KAAK,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,GAAG,KAAK,EAAE,GAAG;AAClD,MAAM,YAAY,CAAC,IAAI,EAAE,KAAK,EAAE;AAChC,MAAM,QAAQ,CAAC,iBAAiB,CAAC,GAAG,KAAK;AACzC,MAAM,OAAO,GAAG,KAAK;AACrB,MAAM,KAAK,GAAG,YAAY,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,WAAW,CAAC,CAAC;AACtD;AACA;AACA,MAAM,QAAQ,KAAK,OAAO,KAAK,KAAK,QAAQ,EAAE;AAC9C,MAAM,YAAY,CAAC,GAAG,EAAE;AACxB,MAAM,QAAQ,CAAC,MAAM,GAAG,iBAAiB;AACzC,MAAM,QAAQ,IAAI,OAAO,KAAK,KAAK,QAAQ,CAAC;AAC5C,KAAK;AACL;AACA,IAAI;AACJ,GAAG;AACH,GAAG,MAAM,OAAO,GAAG,CAAC,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,IAAI,KAAK,MAAM,CAAC,cAAc,EAAE,KAAK,EAAE;AAC5F;AACA,GAAG,IAAI,cAAc,GAAG;AACxB,SAAS,iBAAiB,CAAC,GAAG,EAAE,OAAO,EAAE;AACzC,OAAO,YAAY,CAAC,GAAG,EAAE,OAAO,EAAE;AAClC,OAAO,IAAI;AACX,GAAG,IAAI,eAAe,GAAG,CAAC,cAAc,KAAK,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,IAAI,CAAC;AACnF,SAAS,kBAAkB,CAAC,GAAG,EAAE,MAAM,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,QAAQ,EAAE,EAAE;AAClE,OAAO,aAAa,CAAC,GAAG,EAAE,MAAM,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,QAAQ,EAAE,EAAE;AAC3D,OAAO,IAAI;;AAEX;AACA;;AAEA,GAAG,IAAI,OAAO,GAAG,KAAK,UAAU,EAAE;AAClC,IAAI,OAAO,GAAG,KAAK;AACnB,IAAI,KAAK,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,CAAC;AACxC,GAAG;AACH;AACA;AACA;AACA;;AAEA,GAAG,IAAI,MAAM,GAAG,EAAE,cAAc,IAAI,cAAc,CAAC,EAAE;AACrD,kBAAkB,eAAe,IAAI,eAAe,CAAC,EAAE,EAAE;AACzD;AACA;;AAEA,GAAG,IAAI,KAAK,KAAK;AACjB,UAAU,KAAK,KAAK;AACpB,OAAO,OAAO,KAAK,KAAK;AACxB,UAAU,OAAO,MAAM,KAAK;AAC5B,KAAK;AACL,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,GAAG,KAAK,EAAE,GAAG;AACjD,KAAK,IAAI,OAAO,KAAK,KAAK,QAAQ,GAAG;AACrC,MAAM,CAAC,GAAG,YAAY,EAAE,KAAK,EAAE;AAC/B,MAAM,IAAI,CAAC,GAAG,OAAO,CAAC;AACtB,KAAK;;AAEL,KAAK,YAAY,CAAC,IAAI,EAAE,KAAK,EAAE;AAC/B,KAAK,QAAQ,CAAC,iBAAiB,CAAC,GAAG,KAAK;AACxC,KAAK,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,WAAW,CAAC;AAC5C,KAAK,OAAO,GAAG,KAAK;AACpB,KAAK,YAAY,CAAC,GAAG,EAAE;AACvB,KAAK,IAAI,cAAc,IAAI,cAAc,CAAC,IAAI,GAAG;AACjD;AACA;AACA,MAAM,IAAI,QAAQ,KAAK,OAAO,KAAK;AACnC,UAAU,KAAK,CAAC,CAAC,CAAC,KAAK;AACvB,WAAW,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG;AAC3C,UAAU,KAAK,CAAC,CAAC,CAAC,KAAK;AACvB,UAAU,KAAK,CAAC,CAAC,CAAC,KAAK,IAAI;AAC3B,UAAU,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG;AAC1B,UAAU,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG;AAC1B,UAAU,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG;AAC1B,QAAQ;AACR,OAAO,KAAK,GAAG,GAAG,GAAG,KAAK;AAC1B,MAAM;AACN,KAAK;AACL;AACA,KAAK,QAAQ,CAAC,MAAM,GAAG,iBAAiB;AACxC,IAAI,CAAC,MAAM;AACX,KAAK,CAAC,GAAG,YAAY,EAAE,KAAK,EAAE;AAC9B,IAAI;AACJ,EAAE,CAAC;AACH,IAAI,IAAI,OAAO,KAAK,KAAK,QAAQ,GAAG;AACpC,KAAK,CAAC,GAAG,YAAY,EAAE,KAAK,EAAE;AAC9B,KAAK,IAAI,CAAC,GAAG,OAAO,CAAC;AACrB,IAAI;;AAEJ;AACA,GAAG,QAAQ,OAAO,KAAK;AACvB,GAAG,KAAK,QAAQ;AAChB,IAAI,OAAO,KAAK,GAAG,GAAG;AACtB,GAAG,KAAK,QAAQ;AAChB,IAAI;AACJ;AACA,KAAK,KAAK,GAAG,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,KAAK;AAC/C,KAAK,IAAI,CAAC,GAAG,EAAE;AACf,KAAK,IAAI,GAAG,GAAG,EAAE;AACjB,MAAM,CAAC,GAAG,OAAO,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC;AACtF,UAAU,aAAa,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;AAC3F,UAAU,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC;AACtB,KAAK,IAAI,cAAc,IAAI,cAAc,CAAC,QAAQ;AAClD,MAAM,OAAO,CAAC,GAAG,cAAc,CAAC,IAAI,GAAG,KAAK;AAC5C,KAAK,IAAI,eAAe,IAAI,eAAe,CAAC,QAAQ;AACpD,MAAM,OAAO,CAAC,GAAG,eAAe,CAAC,IAAI,GAAG,KAAK;AAC7C,KAAK,OAAO,CAAC,GAAG,KAAK,CAAC;AACtB,IAAI;AACJ,GAAG,KAAK,QAAQ;AAChB,GAAG,KAAK,SAAS;AACjB,GAAG,KAAK,MAAM;;AAEd;AACA;AACA;;AAEA,IAAI,OAAO,MAAM,CAAC,KAAK,CAAC;;AAExB;AACA;;AAEA,GAAG,KAAK,QAAQ;AAChB;AACA,IAAI,IAAI,CAAC,GAAG,OAAO,CAAC;;AAEpB;AACA;AACA,IAAI,IAAI,CAAC,KAAK,EAAE;AAChB,KAAK,OAAO,MAAM;AAClB,IAAI;;AAEJ;AACA,IAAI,GAAG,IAAI,MAAM;AACjB,IAAI,YAAY,GAAG,IAAI;AACvB,IAAI,OAAO,GAAG,EAAE;;AAEhB;AACA,IAAI,IAAI,GAAG,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;AACxC,KAAK,MAAM,GAAG,GAAG,CAAC,MAAM;AACxB,KAAK,YAAY,GAAG,WAAW,EAAE,KAAK,EAAE,GAAG,EAAE;AAC7C,KAAK,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;AACrC,MAAM,IAAI,OAAO,GAAG,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE;AACtC,OAAO,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AACjB,OAAO,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC;AAClC,OAAO,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC;;AAExB,OAAO,IAAI,CAAC,KAAK,SAAS,GAAG;AAC7B,QAAQ,IAAI,YAAY,GAAG;AAC3B,SAAS,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;AACxB,QAAQ,CAAC;AACT,SAAS,OAAO,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC,CAAC;AACvC;AACA,UAAU,CAAC,GAAG;AACd,aAAa;AACb,aAAa;AACb,UAAU,GAAG,CAAC,CAAC;AACf,OAAO;AACP,MAAM;AACN,KAAK;AACL,KAAK,IAAI,CAAC,MAAM,EAAE,iBAAiB,EAAE,CAAC,EAAE;AACxC,IAAI,CAAC,MAAM;;AAEX;AACA,KAAK,YAAY,GAAG,WAAW,EAAE,KAAK,EAAE;AACxC,KAAK,IAAI,IAAI,GAAG,EAAE;AAClB,KAAK,KAAK,CAAC,IAAI,KAAK,EAAE;AACtB,MAAM,IAAI,mBAAmB;AAC7B,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,oBAAoB,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,EAAE;AACpE;AACA,QAAQ;AACR,OAAO;AACP,MAAM,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE;AAC1D,OAAO,IAAI,CAAC;AACZ,OAAO,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE;AACvC,QAAQ,IAAI,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG;AAC1B,SAAS,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;AAC5B,SAAS;AACT,QAAQ;AACR,OAAO,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM;AAC3B,QAAQ,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AACpB,MAAM;AACN,KAAK;AACL,KAAK,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC1C,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AACjB,MAAM,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE;AAC1D,OAAO,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC;AAClC,OAAO,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC;;AAExB,OAAO,IAAI,CAAC,KAAK,SAAS,GAAG;AAC7B,QAAQ,IAAI,YAAY,GAAG;AAC3B,SAAS,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;AACxB,QAAQ,CAAC;AACT,SAAS,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;AACtC,UAAU,CAAC,GAAG;AACd,aAAa;AACb,aAAa;AACb,UAAU,GAAG,CAAC,CAAC;AACf,OAAO;AACP,MAAM;AACN,KAAK;AACL,KAAK,IAAI,CAAC,MAAM,EAAE,iBAAiB,EAAE,CAAC,EAAE;AACxC,IAAI;;AAEJ;AACA;AACA;;AAEA;AACA,IAAI,IAAI,GAAG,GAAG,EAAE;AAChB,KAAK,CAAC,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;AACtF,SAAS,aAAa,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC;AAC1G;AACA,KAAK,CAAC,GAAG,EAAE;;AAEX,IAAI,IAAI,cAAc,IAAI,cAAc,CAAC,QAAQ;AACjD,KAAK,CAAC,GAAG,CAAC,GAAG,aAAa,CAAC,cAAc,CAAC,IAAI,CAAC;;AAE/C;AACA,IAAI,IAAI,KAAK,GAAG,IAAI;AACpB,IAAI,IAAI,YAAY;AACpB,KAAK,KAAK,GAAG,aAAa,EAAE,YAAY,CAAC,IAAI,EAAE;AAC/C,IAAI,CAAC,GAAG,CAAC;AACT,OAAO,OAAO,CAAC,MAAM,KAAK;AAC1B,OAAO;AACP,OAAO;AACP,SAAS,CAAC,YAAY,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,GAAG,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,GAAG,IAAI,GAAG,IAAI,GAAG;AACzF,SAAS,CAAC,YAAY,CAAC,KAAK,CAAC,EAAE,EAAE,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG;AAC3D,MAAM;;AAEN,IAAI,GAAG,GAAG,IAAI;AACd,IAAI,OAAO,CAAC;AACZ;AACA,EAAE;AACF,CAAC;;AAED,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA,CAAC,MAAM,SAAS,GAAG;AACnB,CAAC,MAAM,SAAS,GAAG,EAAE,GAAG,CAAC;AACzB,GAAG,GAAG,CAAC;AACP,GAAG,GAAG,CAAC;AACP,GAAG,GAAG,CAAC;AACP,GAAG,GAAG,CAAC;AACP,GAAG,GAAG,CAAC;AACP,GAAG,GAAG,CAAC;AACP,GAAG,GAAG,CAAC;AACP,GAAG,GAAG,CAAC;AACP,EAAE;AACF;AACA,CAAC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,GAAG;AAC7C,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;AAC7B,CAAC;AACD,CAAC,MAAM,CAAC,MAAM,EAAE,SAAS,EAAE;AAC3B;AACA,CAAC,SAAS,iBAAiB,CAAC,WAAW,EAAE;AACzC,EAAE,IAAI,MAAM,MAAM;AAClB;AACA,EAAE,IAAI,KAAK,WAAW,IAAI,UAAU,CAAC,WAAW;AAChD,EAAE,IAAI,UAAU,MAAM,KAAK,CAAC;AAC5B,EAAE,IAAI,aAAa,GAAG,UAAU,GAAG;AACnC,EAAE,IAAI,UAAU,MAAM,UAAU,GAAG;AACnC;AACA,EAAE,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;AACf,EAAE,IAAI;AACN;AACA;AACA;AACA,EAAE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;AAC7C;AACA,GAAG,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,EAAE,KAAK,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,CAAC;;AAE/D;AACA,GAAG,CAAC,GAAG,CAAC,KAAK,GAAG,QAAQ,KAAK,GAAE;AAC/B,GAAG,CAAC,GAAG,CAAC,KAAK,GAAG,MAAM,OAAO,GAAE;AAC/B,GAAG,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,UAAU,EAAC;AAC/B,GAAG,CAAC,GAAG,KAAK,GAAG,GAAE;AACjB;AACA;AACA,GAAG,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC;AACrE,EAAE;AACF;AACA;AACA,EAAE,IAAI,aAAa,IAAI,CAAC,EAAE;AAC1B,GAAG,KAAK,GAAG,KAAK,CAAC,UAAU;AAC3B,GAAG,CAAC,GAAG,CAAC,KAAK,GAAG,GAAG,KAAK,EAAC;AACzB;AACA,GAAG,CAAC,GAAG,CAAC,KAAK,GAAG,CAAC,OAAO,EAAC;AACzB,GAAG,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG;AAC3C,EAAE,CAAC,MAAM,IAAI,aAAa,IAAI,CAAC,EAAE;AACjC,GAAG,KAAK,GAAG,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,UAAU,GAAG,CAAC;AAC1D,GAAG,CAAC,GAAG,CAAC,KAAK,GAAG,KAAK,KAAK,GAAE;AAC5B,GAAG,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,OAAO,EAAC;AAC5B;AACA,GAAG,CAAC,GAAG,CAAC,KAAK,GAAG,EAAE,SAAS,EAAC;AAC5B,GAAG,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG;AAC1D,EAAE;AACF;AACA,EAAE,OAAO;AACT,CAAC;AACD;AACA;AACA,CAAC,SAAS,YAAY,EAAE,GAAG,GAAG;AAC9B,EAAE,IAAI,OAAO;AACb,EAAE,IAAI,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC;AACzB,GAAG,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC;AACjD,OAAO,IAAI,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC;AAC9B,GAAG,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC;AACjD,OAAO,IAAI,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC;AAC9B,GAAG,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC;AACjD,OAAO,IAAI,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE;AAC/C,GAAG,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC;AACjD,OAAO,IAAI,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE;AAC/C,GAAG,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC;AACjD,OAAO,IAAI,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE;AAC/C,GAAG,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC;AACjD;AACA,GAAG,OAAO,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;AAC7C,EAAE,IAAI,EAAE,GAAG,IAAI,WAAW,EAAE,OAAO,EAAE;AACrC,EAAE,IAAI,GAAG,GAAG,IAAI,UAAU,CAAC,EAAE,CAAC;;AAE9B,EAAE,IAAI,CAAC;AACP,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC;AAC3B,EAAE,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,GAAG;AAC3B,GAAG,IAAI,MAAM,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACnC,GAAG,IAAI,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;AAC3D,GAAG,IAAI,MAAM,GAAG,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAQ;AAChF,GAAG,IAAI,MAAM,GAAG,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAQ;AAChF,GAAG,IAAI,MAAM,IAAI,CAAC;AAClB,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,MAAM,MAAM,CAAC,GAAG,EAAE,MAAM,MAAM,CAAC,CAAC;AACpD,GAAG,IAAI,MAAM,IAAI,CAAC;AAClB,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,MAAM,MAAM,CAAC,KAAK,EAAE,EAAE,MAAM,MAAM,CAAC,KAAK,IAAI,EAAE,CAAC;AACnE,GAAG,IAAI,MAAM,IAAI,CAAC;AAClB,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,MAAM,MAAM,CAAC,KAAK,EAAE,MAAM,KAAK,IAAI,EAAE,CAAC;AAC1D,EAAE;;AAEF,EAAE,OAAO,EAAE;AACX,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC,SAAS,GAAG,UAAU,MAAM,EAAE,QAAQ,EAAE,KAAK,GAAG;AACrD,CAAC,IAAI,WAAW,GAAG,IAAI,CAAC,WAAW,EAAE;AACrC,CAAC,OAAO,WAAW,CAAC,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE;AACxD;;AAGA,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC;AAC9E,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,OAAM,EAAE,SAAS,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;ACx8FvE,MAAM,mBAAgC;AAAA,EACzC,MAAM;AAAA,IACF,MAAM;AAAA,IACN,aAAa;AAAA,IACb,QAAQ;AAAA,IACR,SAAS;AAAA,IACT,SAAS;AAAA,IACT,mBAAmB;AAAA,IACnB,YAAY;AAAA,IACZ,KAAK;AAAA,MACD,kBAAkB;AAAA,MAClB,aAAa,EAAC;AAAA,MACd,WAAW,EAAC;AAAA,MACZ,aAAa;AAAC;AAClB,GACJ;AAAA,EACA,IAAI;AAAA,IACA,QAAQ;AAAA,IACR,SAAS;AAAA,IACT,OAAO;AAAA,IACP,aAAa;AAAA,IACb,KAAK,EAAC;AAAA,IACN,iBAAiB;AAAA,IACjB,mBAAmB;AAAA,IACnB,oBAAoB,EAAC;AAAA,IACrB,qBAAqB;AAAA,IACrB,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,IAClB,qBAAqB;AAAA,IACrB,gBAAgB;AAAA,MACZ,KAAK;AAAA;AAAA,MACL,QAAQ;AAAA;AAAA,MACR,MAAM;AAAA;AAAA,KACV;AAAA,IACA,YAAY;AAAA,GAChB;AAAA,EACA,QAAQ;AAAA,IACJ,KAAK;AAAA,IACL,UAAU;AAAA,IACV,UAAU;AAAA,IACV,OAAO;AAAA,GACX;AAAA,EACA,UAAU;AAAA,IACN,QAAQ;AAAA,GACZ;AAAA,EACA,YAAY;AAAA,IACR,OAAO;AAAA,IACP,UAAU;AAAA,IACV,OAAO;AAAA,GACX;AAAA,EACA,QAAQ;AAAA,IACJ,UAAU,OAAO,cAAc,cAAc,UAAU,WAAW;AAAA,GACtE;AAAA,EACA,MAAM;AAAA,IACF,SAAS;AAAA,IACT,MAAM;AAAA,IACN,OAAO;AAAA;AAEf;;AChLA,MAAM,SAAS,CAAC,OAAe,UAAU,SAAS;AAC9C,MAAI,IAAI,OAAO,SAAS,EAAE,EAAE,MAAK;AACjC,MAAI,SAAS,IAAI,EAAE,aAAY;AAE/B,MAAI,EAAE,QAAQ,QAAQ,GAAG;AAEzB,MAAI,EAAE,QAAQ,qBAAqB,GAAG;AAEtC,MAAI,EAAE,QAAQ,OAAO,GAAG;AACxB,SAAO;AACX;AAGA,MAAM,mBAAmB,CAAC,OAAO,OAAO;AACpC,MAAI,CAAC,MAAM,OAAO;AAClB,MAAI,KAAK,SAAS,MAAM,GAAG,OAAO;AAClC,MAAI,KAAK,SAAS,UAAU,GAAG,OAAO;AACtC,MAAI,KAAK,SAAS,OAAO,GAAG,OAAO;AACnC,MAAI,SAAS,gBAAgB,SAAS,aAAa,OAAO;AAC1D,MAAI,SAAS,aAAa,OAAO;AACjC,MAAI,KAAK,WAAW,QAAQ,GAAG,OAAO,KAAK,MAAM,GAAG,EAAE,KAAI,IAAK;AAC/D,MAAI,KAAK,SAAS,MAAM,GAAG,OAAO;AAClC,SAAO;AACX;AAGA,MAAM,YAAY,CAAC,SAAiB,OAAO,QAAQ,EAAE,EAAE,MAAM,GAAG,EAAE,OAAO,OAAO;AAChF,MAAM,YAAY,CAAC,MAAe,EAAE,SAAS,GAAG,IAAI,IAAI,IAAI;AAC5D,MAAME,UAAA,GAAW,CAAC,OAAiB,WAAW,UAAU,WAAW,MAAM,MAAM,MAAM,OAAO,OAAO,EAAE,KAAK,GAAG;AAG7G,MAAM,uBAAuB,CAAC,SAAiB;AAC3C,QAAM,QAAQ,UAAU,IAAI;AAC5B,SAAOA,UAAA,CAAS,MAAM,IAAI,CAAC,MAAM,OAAO,CAAC,CAAC,CAAC;AAC/C;AAgBA,MAAM,qBAAqB,CAAC,MAAM,OAAO,OAAO,QAAQ,MAAM;AAE9D,MAAM,gBAAgB,CAAC,MAAW,OAAO,UAAU,SAAS,KAAK,CAAC,MAAM;AAExE,SAAS,YAAY,OAAc,MAAwC;AACvE,QAAM,OAAO,MAAM,QAAQ,KAAK,QAAQ,IAAI,KAAK,WAAY,KAAK,WAAW,CAAC,KAAK,QAAQ,IAAI;AAC/F,QAAM,SAAgB,EAAC;AACvB,QAAM,mCAAmB,KAAS;AAClC,QAAM,6BAAa,KAAiB;AACpC,QAAM,qCAAqB,KAAY;AAEvC,aAAW,MAAM,OAAO;AACpB,QAAI,MAAM,MAAM;AAEhB,QAAI,cAAc,EAAE,GAAG;AAEnB,UAAI;AACJ,iBAAW,KAAK,MAAM;AAClB,YAAI,KAAK,MAAM,GAAG,CAAC,KAAK,MAAM;AAC1B,sBAAY,OAAO,GAAG,CAAC,CAAC;AACxB;AAAA,QACJ;AAAA,MACJ;AACA,UAAI,aAAa,MAAM;AACnB,YAAI,CAAC,OAAO,IAAI,SAAS,GAAG;AACxB,iBAAO,IAAI,WAAW,EAAE;AACxB,iBAAO,KAAK,EAAE;AAAA,QAClB;AAAA,MACJ,OAAO;AAEH,cAAM,MAAM,oBAAoB,EAAE;AAClC,YAAI,CAAC,eAAe,IAAI,GAAG,GAAG;AAC1B,yBAAe,IAAI,GAAG;AACtB,iBAAO,KAAK,EAAE;AAAA,QAClB;AAAA,MACJ;AAAA,IACJ,WAAW,MAAM,QAAQ,EAAE,GAAG;AAE1B,YAAM,MAAM,oBAAoB,EAAE;AAClC,UAAI,CAAC,eAAe,IAAI,GAAG,GAAG;AAC1B,uBAAe,IAAI,GAAG;AACtB,eAAO,KAAK,EAAE;AAAA,MAClB;AAAA,IACJ,OAAO;AAEH,UAAI,CAAC,aAAa,IAAI,EAAE,GAAG;AACvB,qBAAa,IAAI,EAAE;AACnB,eAAO,KAAK,EAAE;AAAA,MAClB;AAAA,IACJ;AAAA,EACJ;AAEA,SAAO;AACX;AAEA,SAAS,gBAAgB,GAAQ,GAAQ,MAAgF;AACrH,MAAI,MAAM,QAAQ,CAAC,KAAK,MAAM,QAAQ,CAAC,GAAG;AACtC,YAAQ,KAAK;AAAe,MACxB,KAAK;AACD,eAAO,EAAE,OAAM;AAAA,MACnB,KAAK;AACD,eAAO,EAAE,OAAO,CAAC;AAAA,MACrB,KAAK;AAAA,MACL;AACI,eAAO,YAAY,EAAE,OAAO,CAAC,GAAG,EAAE,UAAU,KAAK,UAAU;AAAA;AACnE,EACJ;AAEA,MAAI,cAAc,CAAC,KAAK,cAAc,CAAC,GAAG;AACtC,UAAM,MAAW,EAAE,GAAG,GAAE;AACxB,eAAW,KAAK,OAAO,KAAK,CAAC,GAAG;AAC5B,UAAI,KAAK,GAAG;AACR,YAAI,CAAC,IAAI,gBAAgB,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,IAAI;AAAA,MAC7C,OAAO;AACH,YAAI,CAAC,IAAI,EAAE,CAAC;AAAA,MAChB;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AAGA,SAAO;AACX;AAEA,SAAS,oBAAoB,KAAkB;AAE3C,MAAI,CAAC,cAAc,GAAG,GAAG,OAAO,KAAK,UAAU,GAAG;AAClD,QAAM,OAAO,OAAO,KAAK,GAAG,EAAE,MAAK;AACnC,QAAM,IAAS,EAAC;AAChB,aAAW,KAAK,MAAM,EAAE,CAAC,IAAI,IAAI,CAAC;AAClC,SAAO,KAAK,UAAU,CAAC;AAC3B;AAEA,eAAe,WAAW,MAA6B;AACnD,SAAO,MAAM,KAAK,MAAK;AAC3B;AAEA,eAAe,eAAe,MAAkB,UAAuC;AACnF,MAAI;AAEA,UAAM,WAAgB,MAAM,SAAS,MAAM,QAAQ,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AACxF,QAAI,CAAC,UAAU,OAAO;AACtB,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,QAAI,CAAC,MAAM,MAAK,EAAG,OAAO;AAC1B,WAAO,KAAK,MAAM,IAAI;AAAA,EAC1B,QAAQ;AACJ,WAAO;AAAA,EACX;AACJ;AAGO,MAAM,iBAAiB,OAC1B,MACA,WACA,MACA,UAA6B,EAAC,KAC7B;AACD,QAAM;AAAA,IACF;AAAA,IACA;AAAA,IACA,UAAU;AAAA,IACV,WAAW;AAAA,IACX;AAAA,IACA,gBAAgB;AAAA,IAChB;AAAA,IACA,YAAY;AAAA,GAChB,GAAI;AAGJ,MAAI,MAAM,OAAO,aAAa,EAAE,EAAE,MAAK;AACvC,QAAM,YAAY,IAAI,SAAS,GAAG;AAClC,QAAM,eAAe,CAAC,aAAa,UAAU,GAAG,EAAE,SAAS,KAAK,IAAI,SAAS,GAAG;AAEhF,MAAI,UAAU,YAAY,MAAO,eAAe,IAAI,MAAM,GAAG,EAAE,MAAM,GAAG,EAAE,EAAE,KAAK,GAAG,IAAI;AACxF,MAAI,cAAc,eAAe,IAAI,MAAM,GAAG,EAAE,KAAI,IAAK,KAAM,MAAc,QAAQ;AAGrF,YAAU,WAAW;AACrB,gBAAc,eAAgB,KAAK,KAAI,GAAI;AAG3C,QAAM,UAAU,YAAY,YAAY,GAAG;AAC3C,MAAI,OAAO,UAAU,IAAI,YAAY,MAAM,GAAG,OAAO,IAAI;AACzD,MAAI,MAAO,aAAa,aAAa,SAAU,UAAU,IAAI,YAAY,MAAM,UAAU,CAAC,IAAI,iBAAkB,MAAc,QAAQ,EAAE,MAAQ;AAEhJ,MAAI,UAAU;AACV,cAAU,qBAAqB,OAAO;AACtC,WAAO,OAAO,MAAM,OAAO;AAAA,EAC/B;AAEA,QAAM,YAAY,MAAM,GAAG,IAAI,IAAI,GAAG,KAAK;AAC3C,QAAM,WAAW,UAAU,OAAO,IAAI;AAGtC,QAAM,kBAAmB,cAAc,UAAW,cAAc,IAAI,aAAY,KAAM,UAAY,MAAc,SAAS;AAEzH,MAAI,iBAAiB;AACjB,QAAI;AAEA,UAAI;AACJ,UAAI,gBAAgB,QAAQ,gBAAgB,MAAM;AAC9C,cAAM,MAAM,MAAM,WAAW,IAAI;AACjC,uBAAe,KAAK,MAAK,GAAI,KAAK,MAAM,GAAG,IAAI,EAAC;AAAA,MACpD,OAAO;AACH,uBAAe;AAAA,MACnB;AAGA,YAAM,eAAe,MAAM,eAAe,MAAM,QAAQ,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AAE7F,UAAI,SAAS,gBAAgB,OACvB,gBAAgB,cAAc,cAAc,EAAE,eAAe,UAAU,IACvE;AAGN,YAAM,aAAa,KAAK,UAAU,QAAQ,QAAW,SAAS;AAG9D,YAAMC,WAAU,IAAI,KAAK,CAAC,UAAU,GAAG,WAAW,EAAE,MAAM,oBAAoB;AAC9E,YAAMC,MAAK,MAAM,UAAU,MAAM,UAAUD,QAAO,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AACvF,UAAI,OAAO,aAAa;AACpB,kBAAU,gBAAgB,IAAI,YAAY,iBAAiB;AAAA,UACvD,QAAQC;AAAA,UACR,SAAS;AAAA,UAAM,UAAU;AAAA,UAAM,YAAY;AAAA,SAC9C,CAAC;AACN,aAAOA;AAAA,IACX,SAAS,KAAK;AACV,cAAQ,KAAK,gEAAgE,GAAG;AAAA,IAEpF;AAAA,EACJ;AAGA,MAAI;AACJ,MAAI,gBAAgB,MAAM;AACtB,QAAI,KAAK,SAAS,WAAW;AACzB,gBAAU;AAAA,IACd,OAAO;AACH,YAAM,OAAQ,KAAa,SAAS,MAAM,eAAe,GAAG,KAAK;AACjE,YAAM,MAAM,MAAM,KAAK,aAAY;AACnC,gBAAU,IAAI,KAAK,CAAC,GAAG,GAAG,WAAW,EAAE,MAAM;AAAA,IACjD;AAAA,EACJ,OAAO;AACH,UAAM,OAAQ,KAAa,SAAS,MAAM,eAAe,GAAG,KAAK;AACjE,UAAM,OAAO;AACb,cAAU,IAAI,KAAK,CAAC,MAAM,KAAK,aAAa,GAAG,WAAW,EAAE,MAAM;AAAA,EACtE;AAEA,QAAM,KAAK,MAAM,UAAU,MAAM,UAAU,OAAO,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AACvF,MAAI,OAAO,aAAa;AACpB,cAAU,gBAAgB,IAAI,YAAY,iBAAiB;AAAA,MACvD,QAAQ;AAAA,MACR,SAAS;AAAA,MAAM,UAAU;AAAA,MAAM,YAAY;AAAA,KAC9C,CAAC;AACN,SAAO;AACX;;ACjRO,MAAM,eAAe;AAQrB,MAAM,UAAU;AAChB,MAAM,QAAQ;AAKrB,MAAM,yBAAyB,MAAe;AAC1C,MAAI;AAGA,QAAI,OAAO,WAAW,eAAe,CAAC,QAAQ,SAAS,OAAO;AAI9D,QAAI,OAAO,WAAW,eAAe,OAAO,UAAU,UAAU,WAAW,MAAM,GAAG;AAEhF,aAAO;AAAA,IACX;AAEA,WAAO;AAAA,EACX,QAAQ;AACJ,WAAO;AAAA,EACX;AACJ;AAGA,MAAM,mBAAmB,MAAM,OAAO,WAAW,eAAe,QAAQ,SAAS;AAGjF,eAAe,UAAgC;AAE3C,MAAI,OAAO,cAAc,aAAa;AAClC,UAAM,IAAI,MAAM,yBAAyB;AAAA,EAC7C;AAGA,MAAI,wBAAuB,EAAG;AAC1B,UAAM,IAAI,MAAM,oDAAoD;AAAA,EACxE;AAEA,SAAO,IAAI,QAAqB,CAAC,KAAK,QAAQ;AAC1C,QAAI;AACA,YAAM,MAAM,UAAU,KAAK,SAAS,CAAC;AACrC,UAAI,kBAAkB,MAAM,IAAI,OAAO,kBAAkB,OAAO,EAAE,SAAS,OAAO;AAClF,UAAI,YAAY,MAAM,IAAI,IAAI,MAAM;AACpC,UAAI,UAAU,MAAM,IAAI,IAAI,KAAK;AAAA,IACrC,SAAS,GAAG;AACR,UAAI,CAAC;AAAA,IACT;AAAA,EACJ,CAAC;AACL;AAGO,MAAM,iBAAiB,OAAO,MAAc,iBAA+B;AAC9E,MAAI;AACA,QAAI,kBAAiB,EAAG;AACpB,cAAQ,IAAI,+CAA+C;AAC3D,aAAO,IAAI,QAAQ,CAAC,QAAQ;AACxB,YAAI;AACA,iBAAO,QAAQ,MAAM,IAAI,CAAC,GAAG,GAAG,CAAC,WAAW;AACxC,gBAAI,OAAO,QAAQ,WAAW;AAC1B,sBAAQ,KAAK,8CAA8C,OAAO,QAAQ,SAAS;AACnF,kBAAI,IAAI;AAAA,YACZ,OAAO;AACH,sBAAQ,IAAI,0DAA0D,CAAC,CAAC,OAAO,GAAG,CAAC;AACnF,kBAAI,OAAO,GAAG,CAAC;AAAA,YACnB;AAAA,UACJ,CAAC;AAAA,QACL,SAAS,GAAG;AACR,kBAAQ,KAAK,4CAA4C,CAAC;AAC1D,cAAI,IAAI;AAAA,QACZ;AAAA,MACJ,CAAC;AAAA,IACL;AAGA,QAAI,OAAO,cAAc,aAAa;AAClC,cAAQ,KAAK,oCAAoC;AACjD,aAAO;AAAA,IACX;AAEA,YAAQ,IAAI,oCAAoC;AAChD,UAAM,KAAK,MAAM,SAAQ;AACzB,WAAO,IAAI,QAAQ,CAAC,KAAK,QAAQ;AAC7B,YAAM,KAAK,GAAG,YAAY,OAAO,UAAU;AAC3C,YAAM,MAAM,GAAG,YAAY,KAAK,EAAE,IAAI,GAAG;AACzC,UAAI,YAAY,MAAM;AAClB,gBAAQ,IAAI,+CAA+C,CAAC,CAAC,IAAI,QAAQ,KAAK;AAC9E,YAAI,IAAI,QAAQ,KAAK;AACrB,WAAG,OAAM;AAAA,MACb;AACA,UAAI,UAAU,MAAM;AAChB,gBAAQ,KAAK,mCAAmC,IAAI,KAAK;AACzD,YAAI,IAAI,KAAK;AACb,WAAG,OAAM;AAAA,MACb;AAAA,IACJ,CAAC;AAAA,EACL,SAAS,GAAG;AACR,YAAQ,KAAK,8CAA8C,CAAC;AAC5D,WAAO;AAAA,EACX;AACJ;AAGO,MAAM,iBAAiB,OAAO,OAAY,MAAc,iBAAgC;AAC3F,MAAI;AACA,QAAI,kBAAiB,EAAG;AACpB,aAAO,IAAI,QAAQ,CAAC,KAAK,QAAQ;AAC7B,YAAI;AACA,iBAAO,QAAQ,MAAM,IAAI,EAAE,CAAC,GAAG,GAAG,OAAM,EAAG,MAAM;AAC7C,gBAAI,OAAO,QAAQ,WAAW;AAC1B,kBAAI,OAAO,QAAQ,SAAS;AAAA,YAChC,OAAO;AACH,mBAAI;AAAA,YACR;AAAA,UACJ,CAAC;AAAA,QACL,SAAS,GAAG;AACR,kBAAQ,KAAK,gCAAgC,CAAC;AAC9C,cAAI,CAAC;AAAA,QACT;AAAA,MACJ,CAAC;AAAA,IACL;AAGA,QAAI,OAAO,cAAc,aAAa;AAClC,cAAQ,KAAK,yBAAyB;AACtC;AAAA,IACJ;AAEA,UAAM,KAAK,MAAM,SAAQ;AACzB,WAAO,IAAI,QAAQ,CAAC,KAAK,QAAQ;AAC7B,YAAM,KAAK,GAAG,YAAY,OAAO,WAAW;AAC5C,SAAG,YAAY,KAAK,EAAE,IAAI,EAAE,KAAK,OAAO;AACxC,SAAG,aAAa,MAAM;AAAE,YAAI,MAAM;AAAG,WAAG,OAAM;AAAA,MAAG;AACjD,SAAG,UAAU,MAAM;AAAE,YAAI,GAAG,KAAK;AAAG,WAAG,OAAM;AAAA,MAAG;AAAA,IACpD,CAAC;AAAA,EACL,SAAS,GAAG;AACR,YAAQ,KAAK,kCAAkC,CAAC;AAAA,EACpD;AACJ;AAGO,MAAM,eAAe,YAAkC;AAC1D,MAAI;AACA,UAAM,MAAM,MAAM,gBAAe;AACjC,UAAM,SAAS,OAAO,QAAQ,WAAW,KAAK,MAAM,GAAG,IAAW;AAElE,YAAQ,IAAI,uCAAuC,OAAO,KAAK,gBAAgB,OAAO,MAAM;AAE5F,QAAI,UAAU,OAAO,WAAW,UAAU;AACtC,YAAM,SAAS;AAAA,QACX,MAAM;AAAA,UACF,GAAG,iBAAiB;AAAA,UACpB,GAAI,QAAgB;AAAA,SACxB;AAAA,QACA,IAAI;AAAA,UACA,GAAG,iBAAiB;AAAA,UAAI,GAAI,QAAgB;AAAA,UAC5C,KAAM,QAAgB,IAAI,OAAO,EAAC;AAAA,UAClC,oBAAqB,QAAgB,IAAI,sBAAsB,EAAC;AAAA,UAChE,qBAAsB,QAAgB,IAAI,uBAAuB;AAAA,SACrE;AAAA,QACA,QAAQ,EAAE,GAAG,iBAAiB,QAAQ,GAAI,QAAgB,QAAO;AAAA,QACjE,UAAU,EAAE,GAAG,iBAAiB,UAAU,GAAI,QAAgB,UAAS;AAAA,QACvE,YAAY,EAAE,GAAG,iBAAiB,YAAY,GAAI,QAAgB,YAAW;AAAA,QAC7E,QAAQ,EAAE,GAAG,iBAAiB,QAAQ,GAAI,QAAgB,QAAO;AAAA,QACjE,MAAM,EAAE,GAAG,iBAAiB,MAAM,GAAI,QAAgB;AAAK,OAC/D;AAEA,cAAQ,IAAI,mCAAmC;AAAA,QAC3C,WAAW,CAAC,CAAC,OAAO,IAAI;AAAA,QACxB,kBAAkB,OAAO,IAAI,oBAAoB,UAAU;AAAA,QAC3D,qBAAqB,OAAO,IAAI,uBAAuB;AAAA,OAC1D;AAED,aAAO;AAAA,IACX;AAEA,YAAQ,IAAI,8DAA8D;AAAA,EAC9E,SAAS,GAAG;AACR,YAAQ,KAAK,kCAAkC,CAAC;AAAA,EACpD;AACA,SAAO,KAAK,MAAM,KAAK,UAAU,gBAAuB,CAAW;AACvE;AAGO,MAAM,eAAe,OAAO,aAA0B;AACzD,QAAM,UAAU,MAAM,cAAa;AAKnC,QAAM,SAAS,MAAM;AACjB,QAAI,SAAS,IAAI,QAAQ,QAAW,OAAO,SAAS,GAAG;AACvD,QAAI,QAAQ,IAAI,QAAQ,QAAW,OAAO,QAAQ,GAAG;AACrD,WAAO,EAAC;AAAA,EACZ;AAEA,QAAM,wBAAwB,MAAM;AAChC,QAAI,SAAS,IAAI,uBAAuB,QAAW,OAAO,SAAS,GAAG;AACtE,QAAI,QAAQ,IAAI,uBAAuB,QAAW,OAAO,QAAQ,GAAG;AACpE,WAAO,EAAC;AAAA,EACZ;AAEA,QAAM,yBAAyB,MAAM;AAEjC,QAAI,OAAO,UAAU,eAAe,KAAK,SAAS,MAAM,EAAC,EAAG,qBAAqB,GAAG;AAChF,aAAO,SAAS,IAAI,uBAAuB;AAAA,IAC/C;AAEA,QAAI,QAAQ,IAAI,wBAAwB,QAAW;AAC/C,aAAO,QAAQ,GAAG;AAAA,IACtB;AACA,WAAO;AAAA,EACX;AAEA,QAAM,SAAsB;AAAA,IACxB,MAAM;AAAA,MACF,GAAI,iBAAiB,QAAQ,EAAC;AAAA,MAC9B,GAAI,QAAQ,QAAQ,EAAC;AAAA,MACrB,GAAI,SAAS,QAAQ;AAAC,KAC1B;AAAA,IACA,IAAI;AAAA,MACA,GAAI,iBAAiB,MAAM,EAAC;AAAA,MAC5B,GAAI,QAAQ,MAAM,EAAC;AAAA,MACnB,GAAI,SAAS,MAAM,EAAC;AAAA,MACpB,KAAK,QAAO;AAAA,MACZ,oBAAoB,uBAAsB;AAAA,MAC1C,qBAAqB;AAAuB,KAChD;AAAA,IACA,QAAQ;AAAA,MACJ,GAAI,iBAAiB,UAAU,EAAC;AAAA,MAChC,GAAI,QAAQ,UAAU,EAAC;AAAA,MACvB,GAAI,SAAS,UAAU;AAAC,KAC5B;AAAA,IACA,UAAU;AAAA,MACN,GAAI,iBAAiB,YAAY,EAAC;AAAA,MAClC,GAAI,QAAQ,YAAY,EAAC;AAAA,MACzB,GAAI,SAAS,YAAY;AAAC,KAC9B;AAAA,IACA,YAAY;AAAA,MACR,GAAI,iBAAiB,cAAc,EAAC;AAAA,MACpC,GAAI,QAAQ,cAAc,EAAC;AAAA,MAC3B,GAAI,SAAS,cAAc;AAAC,KAChC;AAAA,IACA,QAAQ;AAAA,MACJ,GAAI,iBAAiB,UAAU,EAAC;AAAA,MAChC,GAAI,QAAQ,UAAU,EAAC;AAAA,MACvB,GAAI,SAAS,UAAU;AAAC,KAC5B;AAAA,IACA,MAAM;AAAA,MACF,GAAI,iBAAiB,QAAQ,EAAC;AAAA,MAC9B,GAAI,QAAQ,QAAQ,EAAC;AAAA,MACrB,GAAI,SAAS,QAAQ;AAAC;AAC1B,GACJ;AACA,QAAM,eAAe,MAAM;AAC3B,uBAAqB,MAAM,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AAChE,SAAO;AACX;AAGA,MAAM,WAAW,CAAC,MAAc,MAAe,mBAAmB,UAAU;AACxE,QAAM,KAAK,QAAQ,KAAK,QAAQ,SAAS,EAAE,KAAK;AAChD,QAAM,KAAK,QAAQ,IAAI,QAAQ,SAAS,EAAE;AAC1C,MAAI,MAAM,MAAM,MAAM,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC;AACzC,MAAI,kBAAkB,MAAM,IAAI,QAAQ,SAAS,GAAG;AACpD,SAAO,IAAI,QAAQ,WAAW,GAAG;AACrC;AAEA,MAAM,cAAc,CAAC,MAAY,GAAG,SAAS;AAC7C,MAAM,WAAW,CAAC,MAAW;AACzB,QAAM,IAAI,IAAI,KAAK,CAAQ,EAAE,SAAQ;AACrC,SAAO,OAAO,SAAS,CAAC,IAAI,IAAI;AACpC;AAUA,MAAM,yBAAyB,OAC3B,cACA,OAAO,KACP,OAAoB,EAAC,EACrB,aAA+C,SAC9C;AACD,QAAM,QAAQ,MAAM,cACd,uBAAuB,QAAQ,GAAG,GAClC,QAAQ,CAAC,MAAM;AAAE,YAAQ,KAAK,CAAC;AAAG,WAAO,EAAC;AAAA,EAAG,CAAC;AAGpD,MAAI,KAAK,cAAc,OAAO,SAAS,GAAG;AACtC,QAAI;AACA,YAAM,YAAY,MAAM,mBAAmB,YAAY,IAAI,GAAG,QAAQ,MAAM,IAAI;AAChF,UAAI,WAAW,SAAS;AACpB,cAAM,eAAe,MAAM,MAAM,UAAU,UAAU,SAAS;AAC9D,cAAM,cAAc,IAAI,IAAI,OAAO,MAAM,CAAC,MAAM,GAAG,QAAQ,EAAE,OAAO,OAAO,CAAC;AAC5E,cAAM,QAAQ;AAAA,UACT,aACI,OAAO,CAAC,CAAC,IAAI,MAAM,CAAC,YAAY,IAAI,IAAI,CAAC,EACzC;AAAA,YAAI,CAAC,CAAC,IAAI,MACP,UAAU,YAAY,MAAM,EAAE,WAAW,MAAM,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AAAA;AACxF,SACR;AAAA,MACJ;AAAA,IACJ,SAAS,GAAG;AACR,cAAQ,KAAK,CAAC;AAAA,IAClB;AAAA,EACJ;AAEA,SAAO,QAAQ;AAAA,IACX,MAAM,IAAI,OAAO,SAAS;AACtB,YAAM,QAAQ,MAAM,SAAS;AAE7B,YAAM,WAAW,QAAQ,SAAS,KAAK,UAAU,IAAI,IAAI,IAAI,KAAK;AAElE,UAAI,OAAO;AACP,eAAO,uBAAuB,cAAc,UAAU,MAAM,UAAU;AAAA,MAC1E;AAEA,UAAI,MAAM,SAAS,QAAQ;AACvB,cAAM,YAAY,MAAM,SAAS,YAAY,QAAQ,EAAE,MAAM,MAAM,IAAI;AACvE,cAAM,aAAa,SAAS,WAAW,YAAY;AACnD,cAAM,cAAc,SAAS,MAAM,OAAO;AAE1C,YAAI,cAAc,YAAY;AAC1B,gBAAM,WAAW,MAAM,aAClB,gBAAgB,QAAQ,EACxB,MAAM,CAAC,MAAM;AAAE,oBAAQ,KAAK,CAAC;AAAG,mBAAO;AAAA,UAAM,CAAC;AAEnD,cAAI,CAAC,YAAY,SAAS,eAAe,GAAG;AAG5C,gBAAM,OAAQ,MAAc,QAAQ;AACpC,iBAAO,eAAe,YAAY,UAAU,IAAI,KAAK,CAAC,QAAQ,GAAG,KAAK,UAAU,EAAE,MAAM,MAAM,CAAC;AAAA,QACnG;AAAA,MACJ;AAAA,IACJ,CAAC;AAAA,GACL;AACJ;AAGA,MAAM,qBAAqB,OACvB,cACA,YAA8C,MAC9C,OAAO,KACP,OAAoB,EAAC,KACpB;AACD,QAAM,qBAAqB,aAAc,MAAM,mBAAmB,MAAM,MAAM,EAAE,QAAQ,MAAM,GAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC;AACnI,QAAM,UAAU,MAAM,MAAM,UAAU,oBAAoB,WAAU,IAAK,EAAE;AAG3E,MAAI,QAAQ,KAAK;AAGb,QAAI,KAAK,eAAe,SAAS,UAAU,GAAG;AAC1C,YAAM,cAAc,MAAM,aACrB,qBAAqB,QAAQ,GAAG,EAChC,MAAM,CAAC,MAAM;AAAE,gBAAQ,KAAK,CAAC;AAAG,eAAO,EAAC;AAAA,MAAG,CAAC;AAGjD,YAAM,WAAW,IAAI;AAAA,QAChB,QACI,IAAI,CAAC,CAAC,IAAI,MAAM,KAAK,aAAa;AAAA,OAC3C;AAGA,YAAM,QAAQ,YAAY,OAAO,CAAC,MAAM;AACpC,cAAM,QAAQ,GAAG,YAAY,IAAI,aAAY;AAC7C,eAAO,QAAQ,CAAC,SAAS,IAAI,IAAI;AAAA,MACrC,CAAC;AAGD,YAAM,aAAa;AAAA,QACf,GAAG,MAAM,OAAO,CAAC,MAAM,EAAE,SAAS,WAAW;AAAA;AAAA,OAEjD;AAEA,iBAAW,KAAK,YAAY;AACxB,cAAM,aAAa,EAAE,YAAY,SAAS,MAAM,EAAE,UAAU,EAAE,SAAS,WAAW;AAClF,YAAI;AACA,gBAAM,aAAa,WAAW,UAAU;AAAA,QAC5C,SAAS,GAAG;AACR,kBAAQ,KAAK,kBAAkB,YAAY,CAAC;AAAA,QAChD;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AAGA,QAAM,QAAQ;AAAA,IACT,QACI,IAAI,OAAO,CAAC,MAAM,SAAS,MAAM;AAC9B,YAAM,QAAQ,YAAY,SAAS;AACnC,YAAM,aAAa,SAAS,MAAM,MAAM,KAAK;AAE7C,UAAI,OAAO;AACP,cAAM,iBAAiB,SAAS,MAAM,MAAM,KAAK;AACjD,cAAM,SAAS,MAAM,aAAa,OAAO,cAAc,EAAE,MAAM,CAAC,OAAO;AAAE,iBAAO;AAAA,QAAO,CAAC;AACxF,YAAI,CAAC,QAAQ;AACT,gBAAM,aAAa,gBAAgB,gBAAgB,EAAE,WAAW,MAAM,EAAE,MAAM,QAAQ,IAAI;AAAA,QAC9F;AACA,eAAO,mBAAmB,cAAc,WAAwC,YAAY,IAAI;AAAA,MACpG;AAGA,YAAM,aAAa;AACnB,YAAM,cAAc,MAAM,WAAW,SAAQ;AAC7C,UAAI,CAAC,eAAe,YAAY,SAAS,GAAG;AAG5C,YAAM,eAAe,SAAS,MAAM,MAAM,KAAK;AAC/C,YAAM,aAAa,MAAM,aAAa,KAAK,YAAY,EAAE,MAAM,MAAM,IAAI;AACzE,YAAM,cAAc,SAAS,YAAY,OAAO;AAChD,YAAM,aAAa,SAAS,YAAY,YAAY;AAGpD,UAAI,CAAC,cAAc,aAAa,aAAa;AACzC,cAAM,aAAa,gBAAgB,cAAc,MAAM,YAAY,aAAY,EAAG,EAAE,WAAW,MAAM,EAChG,MAAM,CAAC,OAAO;AAAE,iBAAO;AAAA,QAAM,CAAC;AAAA,MACvC;AAAA,IACJ,CAAC;AAAA,GACT;AAEJ;AAGA,MAAM,cAAc,CAAC,YAAoB;AACrC,QAAM,MAAM,IAAI,IAAI,OAAO;AAC3B,SAAO,IAAI,WAAW,IAAI,WAAW,MAAM,IAAI;AACnD;AAGO,MAAM,aAAa,CAAC,SAAiB,UAAe,EAAC,KAAM;AAC9D,QAAM,SAASC,EAAA,CAAa,YAAY,OAAO,GAAG,OAAO;AACzD,QAAM,SAAS,eAAe,MAAM,oBAAmB,EAAG,QAAQ,QAAQ,KAAK,KAAK,OAAO,CAAC,KAAK;AACjG,SAAO;AAAA,IACH;AAAA,IACA;AAAA,IACA,OAAO,YAAY,OAAO;AAAE,UAAI,KAAK,UAAU,MAAM;AAAE,eAAO,mBAAmB,QAAQ,MAAM,KAAK,EAAE,aAAa,WAAW,GAAG,QAAQ,CAAC,MAAM;AAAE,kBAAQ,KAAK,CAAC;AAAG,iBAAO,EAAC;AAAA,QAAG,CAAC;AAAA,MAAE;AAAA,IAAE;AAAA,IACnL,SAAS,YAAY,OAAO;AAAE,UAAI,KAAK,UAAU,MAAM;AAAE,eAAO,uBAAuB,QAAQ,KAAK,EAAE,YAAY,WAAW,GAAG,QAAQ,CAAC,MAAM;AAAE,kBAAQ,KAAK,CAAC;AAAG,iBAAO,EAAC;AAAA,QAAG,CAAC;AAAA,MAAE;AAAA,IAAE;AAAA,GACtL;AACJ;AAGO,MAAM,gBAA+B,EAAE,MAAM,MAAK;AAGzD,IAAI,CAAC,wBAAuB,EAAG;AAC3B,GAAC,YAAY;AACT,QAAI;AACA,YAAM,WAAW,MAAM,cAAa;AACpC,UAAI,UAAU,MAAM,SAAS,cAAc,UAAU,MAAM,mBAAmB;AAC1E;AAAA,MACJ;AACA,UAAI,CAAC,UAAU,QAAQ,KAAK;AAC5B,YAAM,SAAS,WAAW,SAAS,OAAO,KAAK;AAAA;AAAA,QAE3C,iBAAiB;AAAA,QACjB,UAAU,SAAS,OAAO;AAAA,QAC1B,UAAU,SAAS,OAAO;AAAA,QAC1B,OAAO,SAAS,OAAO;AAAA,OAC1B;AACD,oBAAc,OAAO,UAAU,cAAc;AAC7C,YAAM,eAAe,MAAM,SAAS,IAAI;AACxC,YAAM,eAAe,MAAM,WAAW,IAAI;AAAA,IAC9C,SAAS,GAAG;AAAA,IAEZ;AAAA,EACJ,IAAG;AACP;AAGO,MAAM,uBAAuB,OAAO,aAAkB;AACzD,eAAa,MAAM,cAAa;AAChC,MAAI,UAAU,MAAM,SAAS,cAAc,UAAU,MAAM,mBAAmB;AAC1E,kBAAc,OAAO;AACrB;AAAA,EACJ;AACA,MAAI,CAAC,UAAU,QAAQ,KAAK;AAC5B,gBAAc,OAAO,WAAW,SAAS,OAAO,KAAK;AAAA;AAAA,IAEjD,iBAAiB;AAAA,IACjB,UAAU,SAAS,OAAO;AAAA,IAC1B,UAAU,SAAS,OAAO;AAAA,IAC1B,OAAO,SAAS,OAAO;AAAA,GAC1B,KAAK,cAAc;AACpB,QAAM,eAAe,MAAM,UAAS;AACpC,QAAM,eAAe,MAAM,WAAW,IAAI;AAC9C;AAGA,IAAI,CAAC,wBAAuB,EAAG;AAC3B,MAAI;AACA,QAAI,OAAO,WAAW,eAAe,OAAO,qBAAqB,YAAY;AACzE,uBAAiB,YAAY,MAAM;AAC/B,uBAAe,MAAM,UAAS,EAAG,QAAQ,MAAM;AAAA,QAAC,CAAC;AAAA,MACrD,CAAC;AACD,uBAAiB,gBAAgB,MAAM;AACnC,uBAAe,MAAM,UAAS,EAAG,QAAQ,MAAM;AAAA,QAAC,CAAC;AAAA,MACrD,CAAC;AAAA,IACL;AAAA,EACJ,QAAQ;AAAA,EAER;AAGA,GAAC,YAAY;AACT,QAAI;AACA,aAAO,MAAM;AACT,cAAM,eAAe,MAAM,UAAS,EAAG,QAAQ,MAAM;AAAA,QAAC,CAAC;AACvD,cAAM,IAAI,QAAQ,CAAC,YAAY,WAAW,SAAS,GAAI,CAAC;AAAA,MAC5D;AAAA,IACJ,QAAQ;AAAA,IAER;AAAA,EACJ,IAAG;AACP","names":["ROOT","setIdleInterval","isValidParent","observer","attribute","camelToKebab","rules","rule","styles","t","e","o","n","i","r","s","a","u","c","l","d","m","g","y","v","h","b","w","p","f","x","N","A","P","O","E","T","j","S","$","C","I","k","M","H","Q","$behavior","unwrap","skip","$triggerLock","obj","value","old","self","a_tmp","b_tmp","store","deref","elMap","$set","name","array","selected","asArray","theirParent","isWeakCompatible","isObservable","attr","el","ClosePriority","ref","element","visibleRef","OPFSWorker","rootHandle","cleanPath","entries","updateResult","allRefs","joinPath","toWrite","rs","createClient"],"ignoreList":[15,54],"sources":["../../../../modules/projects/uniform.ts/src/newer/next/storage/Queued.ts","../../../../modules/projects/uniform.ts/src/newer/next/utils/Wrappers.ts","../../../../modules/projects/uniform.ts/src/newer/next/utils/Utils.ts","../../../../modules/projects/dom.ts/src/agate/Properties.ts","../../../../modules/projects/dom.ts/src/agate/Utils.ts","../../../../modules/projects/dom.ts/src/agate/Zoom.ts","../../../../modules/projects/dom.ts/src/agate/Viewport.ts","../../../../modules/projects/dom.ts/src/agate/Measure.ts","../../../../modules/projects/dom.ts/src/mixin/Observer.ts","../../../../modules/projects/dom.ts/src/decor/Canvas.ts","../../../../modules/projects/dom.ts/src/mixin/Style.ts","../../../../modules/projects/dom.ts/src/mixin/Behavior.ts","../../../../modules/projects/dom.ts/src/mixin/Store.ts","../../../../modules/projects/dom.ts/src/mixin/Mixins.ts","../../../../modules/projects/dom.ts/src/mixin/Handler.ts","../../../../node_modules/webdav/dist/web/index.js","../../../../modules/projects/object.ts/src/wrap/Symbol.ts","../../../../modules/projects/object.ts/src/wrap/Utils.ts","../../../../modules/projects/object.ts/src/core/Subscript.ts","../../../../modules/projects/object.ts/src/core/Specific.ts","../../../../modules/projects/object.ts/src/core/Primitives.ts","../../../../modules/projects/object.ts/src/core/Mainline.ts","../../../../modules/projects/object.ts/src/core/Assigned.ts","../../../../modules/projects/lur.e/src/extension/css-ref/Utils.ts","../../../../modules/projects/lur.e/src/extension/css-ref/CSSAnimated.ts","../../../../modules/projects/lur.e/src/lure/core/Binding.ts","../../../../modules/projects/lur.e/src/lure/node/Queried.ts","../../../../modules/projects/lur.e/src/lure/context/Reflect.ts","../../../../modules/projects/lur.e/src/lure/context/ReflectChildren.ts","../../../../modules/projects/lur.e/src/lure/node/Changeable.ts","../../../../modules/projects/lur.e/src/lure/context/Utils.ts","../../../../modules/projects/lur.e/src/lure/node/Mapped.ts","../../../../modules/projects/lur.e/src/lure/node/Bindings.ts","../../../../modules/projects/lur.e/src/lure/node/Normalizer.ts","../../../../modules/projects/lur.e/src/lure/node/Syntax.ts","../../../../modules/projects/lur.e/src/lure/core/Control.ts","../../../../modules/projects/lur.e/src/extension/tasking/History.ts","../../../../modules/projects/lur.e/src/extension/tasking/BackNavigation.ts","../../../../modules/projects/lur.e/src/lure/core/Links.ts","../../../../modules/projects/lur.e/src/lure/core/Refs.ts","../../../../modules/projects/lur.e/src/lure/misc/Glit.ts","../../../../modules/projects/lur.e/src/extension/controllers/LazyEvents.ts","../../../../modules/projects/lur.e/src/extension/controllers/Trigger.ts","../../../../modules/projects/lur.e/src/extension/controllers/PointerAPI.ts","../../../../modules/projects/lur.e/src/extension/interact/CtxMenu.ts","../../../../modules/projects/lur.e/src/extension/core/OPFS.ts","../../../../modules/projects/lur.e/src/layout/grid/Interact.ts","../../../../modules/projects/lur.e/src/layout/grid/GridBox.ts","../../../../modules/projects/lur.e/src/layout/orient/OrientBox.ts","../../../../modules/projects/lur.e/src/extension/color/DynamicEngine.ts","../../../../modules/projects/lur.e/src/extension/color/ThemeEngine.ts","../../../../modules/projects/lur.e/src/math/Point2D.ts","../../../../modules/projects/lur.e/src/math/Operations.ts","../../../../modules/projects/lur.e/src/extension/css-ref/CSSAdapter.ts","../../../../node_modules/jsox/lib/jsox.mjs","../../src/com/config/SettingsTypes.ts","../../src/core/storage/WriteFileSmart-v2.ts","../../src/com/config/Settings.ts"],"sourcesContent":["import { UUIDv4 } from \"fest/core\";\nimport { initChannelHandler } from \"../channel/Channels\";\n\n/**\n * Type definitions for fest/uniform\n * Centralized to avoid circular import issues\n */\n\nexport interface WorkerChannel {\n    request(method: string, args?: any[]): Promise<any>;\n    close(): void;\n}\n\nexport interface WorkerConfig {\n    name: string;\n    script: string | (() => Worker) | Worker;\n    options?: WorkerOptions;\n    context?: 'main' | 'service-worker' | 'chrome-extension';\n    tabsChannel?: boolean;\n    tabsOptions?: { tabFilter?: (tab: chrome.tabs.Tab) => boolean };\n    currentTabChannel?: boolean;\n    currentTabOptions?: {\n        tabIdGetter?: () => Promise<number> | number;\n        useVisibleTab?: boolean;\n    };\n}\n\nexport interface QueuedRequest {\n    id: string;\n    method: string;\n    args: any[];\n    resolve: (value: any) => void;\n    reject: (error: any) => void;\n    timestamp: number;\n}\n\nexport interface MessageEnvelope {\n    id: string;\n    type: string;\n    payload: any;\n    timestamp: number;\n    replyTo?: string;\n}\n\nexport interface ProtocolOptions {\n    timeout?: number;\n    retries?: number;\n    compression?: boolean;\n    batching?: boolean;\n}\n\n\n/**\n * Queued worker channel that buffers requests until the channel is available\n */\nexport class QueuedWorkerChannel implements WorkerChannel {\n    private underlyingChannel: WorkerChannel | null = null;\n    private isConnected = false;\n    private requestQueue: QueuedRequest[] = [];\n    private connectionPromise: Promise<void> | null = null;\n    private connectionResolver: (() => void) | null = null;\n    private context: 'main' | 'service-worker' | 'chrome-extension' | 'unknown';\n\n    constructor(\n        private config: WorkerConfig,\n        private onChannelReady?: (channel: WorkerChannel) => void\n    ) {\n        this.context = config.context ?? 'unknown';\n    }\n\n    /**\n     * Initialize the underlying channel\n     */\n    async connect(underlyingChannel: WorkerChannel | null = null): Promise<void> {\n        this.underlyingChannel = underlyingChannel;\n    }\n\n    /**\n     * Queue a request if channel isn't ready, otherwise send immediately\n     */\n    async request(method: string, args: any[] = []): Promise<any> {\n        if (this.isConnected && this.underlyingChannel) {\n            return this.underlyingChannel.request(method, args);\n        }\n\n        // Queue the request\n        return new Promise((resolve, reject) => {\n            const queuedRequest: QueuedRequest = {\n                id: UUIDv4(),\n                method,\n                args,\n                resolve,\n                reject,\n                timestamp: Date.now()\n            };\n\n            this.requestQueue.push(queuedRequest);\n\n            // Auto-connect if not already connecting\n            if (!this.connectionPromise) {\n                this.connect().catch((error) => {\n                    this.rejectAllQueued(error);\n                });\n            }\n        });\n    }\n\n    /**\n     * Process all queued requests\n     */\n    private async flushQueue(): Promise<void> {\n        if (!this.underlyingChannel) return;\n\n        const queueCopy = [...this.requestQueue];\n        this.requestQueue = [];\n\n        for (const queuedRequest of queueCopy) {\n            try {\n                const result = await this.underlyingChannel.request(queuedRequest.method, queuedRequest.args);\n                queuedRequest.resolve(result);\n            } catch (error) {\n                queuedRequest.reject(error);\n            }\n        }\n    }\n\n    /**\n     * Reject all queued requests with an error\n     */\n    private rejectAllQueued(error: Error): void {\n        const queueCopy = [...this.requestQueue];\n        this.requestQueue = [];\n\n        for (const queuedRequest of queueCopy) {\n            queuedRequest.reject(error);\n        }\n    }\n\n    /**\n     * Get queue status\n     */\n    getQueueStatus() {\n        return {\n            isConnected: this.isConnected,\n            queuedRequests: this.requestQueue.length,\n            isConnecting: !!this.connectionPromise && !this.isConnected\n        };\n    }\n\n    close(): void {\n        this.rejectAllQueued(new Error('Channel closed'));\n        this.underlyingChannel?.close();\n        this.underlyingChannel = null;\n        this.isConnected = false;\n        this.connectionPromise = null;\n    }\n}\n\n\n\n/**\n * Default tab ID getter - gets current active tab\n */\nexport const getCurrentTabId = async (): Promise<number> => {\n    const tabs = await chrome.tabs.query({ active: true, currentWindow: true });\n    if (tabs.length === 0) {\n        throw new Error('No active tab found');\n    }\n    if (!tabs[0].id) {\n        throw new Error('Active tab has no ID');\n    }\n    return tabs[0].id;\n};\n\n/**\n * Tab ID getter for visible tab (may be different from active)\n */\nexport const getVisibleTabId = async (): Promise<number> => {\n    // First try active tab\n    try {\n        return await getCurrentTabId();\n    } catch {\n        // Fallback to any visible tab\n        const tabs = await chrome.tabs.query({ currentWindow: true });\n        const visibleTab = tabs.find(tab => tab.active);\n        if (!visibleTab?.id) {\n            throw new Error('No visible tab found');\n        }\n        return visibleTab.id;\n    }\n};\n\n/**\n * Chrome Extension Runtime Module Interface\n */\nexport interface CrxRuntimeModule {\n    // Capture screenshot + AI processing in one call\n    capture(rect?: { x: number; y: number; width: number; height: number }, mode?: string): Promise<any>;\n\n    // Just capture screenshot, return image data\n    captureScreenshot(rect?: { x: number; y: number; width: number; height: number }): Promise<any>;\n\n    // Process captured image data with AI\n    processImage(imageData: string | Blob, mode?: string): Promise<any>;\n\n    processText(text: string, options?: { type?: string }): Promise<any>;\n    doCopy(data: { text?: string; data?: any }, options?: { showToast?: boolean }): Promise<any>;\n    loadMarkdown(src: string): Promise<any>;\n    captureWithRect(mode?: string): Promise<any>;\n    getCurrentTab(): Promise<chrome.tabs.Tab | null>;\n    sendMessage(type: string, data?: any): Promise<any>;\n    close(): void;\n}\n\n/**\n * Simplified worker registration for common patterns\n */\nexport const registerWorkerAPI = (api: Record<string, Function>, channelName: string = \"worker\") => {\n    // This will be called in worker context to register functions\n    const channelHandler = initChannelHandler(channelName ?? \"worker\");\n\n    // Register functions in the uniform data store\n    Object.keys(api).forEach(methodName => {\n        const method = api[methodName];\n        if (typeof method === 'function') {\n            // Functions are automatically available through the uniform reflection system\n            // The channel handler will proxy calls to these functions\n        }\n    });\n\n    return channelHandler;\n};\n\n/**\n * Optimized communication protocol for fest/uniform\n * Provides efficient message passing and state synchronization\n */\n\nexport interface ProtocolOptions {\n    timeout?: number;\n    retries?: number;\n    compression?: boolean;\n    batching?: boolean;\n}\n\nexport class OptimizedWorkerChannel {\n    private channel: WorkerChannel | null = null;\n    private isChannelReady = false;\n    private pendingRequests = new Map<string, {\n        resolve: Function;\n        reject: Function;\n        timeout: number;\n    }>();\n    private messageQueue: MessageEnvelope[] = [];\n    private queuedRequests: QueuedRequest[] = [];\n    private batchTimer?: number;\n    private options: Required<ProtocolOptions>;\n    private onChannelReady?: (channel: WorkerChannel) => void;\n\n    constructor(\n        channel: WorkerChannel | null = null,\n        options: ProtocolOptions = {},\n        onChannelReady?: (channel: WorkerChannel) => void\n    ) {\n        this.channel = channel;\n        this.isChannelReady = !!channel;\n        this.onChannelReady = onChannelReady;\n        this.options = {\n            timeout: 30000,\n            retries: 3,\n            compression: false,\n            batching: true,\n            ...options\n        };\n    }\n\n    /**\n     * Set the underlying channel when it becomes available\n     */\n    setChannel(channel: WorkerChannel): void {\n        this.channel = channel;\n        this.isChannelReady = true;\n        this.onChannelReady?.(channel);\n        this.flushQueuedRequests();\n    }\n\n    /**\n     * Send a request and wait for response\n     */\n    async request(type: string, payload: any, options?: Partial<ProtocolOptions>): Promise<any> {\n        // If channel is not ready, queue the request\n        if (!this.isChannelReady || !this.channel) {\n            return new Promise((resolve, reject) => {\n                const queuedRequest: QueuedRequest = {\n                    id: UUIDv4(),\n                    method: type,\n                    args: [payload],\n                    resolve,\n                    reject,\n                    timestamp: Date.now()\n                };\n                this.queuedRequests.push(queuedRequest);\n            });\n        }\n\n        const opts = { ...this.options, ...options };\n        const messageId = UUIDv4();\n\n        return new Promise((resolve, reject) => {\n            const timeout = setTimeout(() => {\n                this.pendingRequests.delete(messageId);\n                reject(new Error(`Request timeout: ${type}`));\n            }, opts.timeout);\n\n            this.pendingRequests.set(messageId, { resolve, reject, timeout });\n\n            const envelope: MessageEnvelope = {\n                id: messageId,\n                type,\n                payload,\n                timestamp: Date.now()\n            };\n\n            if (opts.batching) {\n                this.queueMessage(envelope);\n            } else {\n                this.sendMessage(envelope);\n            }\n        });\n    }\n\n    /**\n     * Process queued requests when channel becomes available\n     */\n    private async flushQueuedRequests(): Promise<void> {\n        if (!this.channel || this.queuedRequests.length === 0) return;\n\n        const queueCopy = [...this.queuedRequests];\n        this.queuedRequests = [];\n\n        for (const queuedRequest of queueCopy) {\n            try { // @ts-ignore\n                const result = await this.request(queuedRequest.method, ...((queuedRequest?.args ?? []) as any));\n                queuedRequest.resolve(result);\n            } catch (error) {\n                queuedRequest.reject(error);\n            }\n        }\n    }\n\n    /**\n     * Send a one-way message (fire and forget)\n     */\n    notify(type: string, payload: any): void {\n        const envelope: MessageEnvelope = {\n            id: UUIDv4(),\n            type,\n            payload,\n            timestamp: Date.now()\n        };\n\n        if (this.options.batching) {\n            this.queueMessage(envelope);\n        } else {\n            this.sendMessage(envelope);\n        }\n    }\n\n    /**\n     * Stream data with backpressure handling\n     */\n    async *stream(type: string, data: any[]): AsyncGenerator<any> {\n        for (const chunk of data) {\n            const result = await this.request(`${type}:chunk`, chunk);\n            yield result;\n        }\n    }\n\n    /**\n     * Queue message for batching\n     */\n    private queueMessage(envelope: MessageEnvelope): void {\n        this.messageQueue.push(envelope);\n\n        if (!this.batchTimer) {\n            this.batchTimer = setTimeout(() => {\n                this.flushBatch();\n            }, 16); // ~60fps\n        }\n    }\n\n    /**\n     * Send batched messages\n     */\n    private flushBatch(): void {\n        if (this.messageQueue.length === 0) return;\n\n        const batchEnvelope: MessageEnvelope = {\n            id: UUIDv4(),\n            type: \"batch\",\n            payload: this.messageQueue,\n            timestamp: Date.now()\n        };\n\n        this.sendMessage(batchEnvelope);\n        this.messageQueue = [];\n        this.batchTimer = undefined;\n    }\n\n    /**\n     * Send single message through channel\n     */\n    private async sendMessage(envelope: MessageEnvelope): Promise<void> {\n        try {\n            const result = await this.channel?.request?.(\"processMessage\", [envelope]);\n\n            // Handle response if it's a reply\n            if (envelope.replyTo && this.pendingRequests.has(envelope.replyTo)) {\n                const { resolve, timeout } = this.pendingRequests.get(envelope.replyTo)!;\n                clearTimeout(timeout);\n                this.pendingRequests.delete(envelope.replyTo);\n                resolve(result);\n            }\n        } catch (error) {\n            // Handle failed message\n            if (this.pendingRequests.has(envelope.id)) {\n                const { reject, timeout } = this.pendingRequests.get(envelope.id)!;\n                clearTimeout(timeout);\n                this.pendingRequests.delete(envelope.id);\n                reject(error);\n            }\n        }\n    }\n\n    /**\n     * Close the channel\n     */\n    close(): void {\n        if (this.batchTimer) {\n            clearTimeout(this.batchTimer);\n        }\n\n        // Reject all pending requests\n        for (const [id, { reject, timeout }] of this.pendingRequests) {\n            clearTimeout(timeout);\n            reject(new Error(\"Channel closed\"));\n        }\n\n        //\n        this.pendingRequests.clear();\n        this.channel?.close?.();\n    }\n}\n","type CrxSender = chrome.runtime.MessageSender;\ntype CrxSendResponse = (response: any) => void;\ntype CrxListener = (event: any, sender: CrxSender, sendResponse: CrxSendResponse) => void | Promise<void>;\n\nconst runtimeListenerRegistry = new Map<string, Set<CrxListener>>();\nlet runtimeListenerInstalled = false;\n\nconst ensureRuntimeListener = () => {\n    if (runtimeListenerInstalled) return;\n    runtimeListenerInstalled = true;\n\n    chrome?.runtime?.onMessage?.addListener?.((message: any, sender: CrxSender, sendResponse: CrxSendResponse) => {\n        const channelName = (message?.channelName ?? message?.target) as string | undefined;\n        if (!channelName) return;\n\n        const listeners = runtimeListenerRegistry.get(channelName);\n        if (!listeners || listeners.size === 0) return;\n\n        const event = {\n            data: message,\n            origin: sender?.url || \"chrome-extension\",\n            source: sender\n        };\n\n        // Dispatch (sync or async). Returning true keeps sendResponse alive.\n        for (const listener of listeners) {\n            try {\n                const out = listener(event, sender, sendResponse);\n                // avoid unhandled rejections on async listeners\n                if (out && typeof (out as any)?.catch === \"function\") {\n                    (out as Promise<void>).catch((error) => console.error(\"[ChromeExtensionBroadcastChannel] Listener error:\", error));\n                }\n            } catch (error) {\n                console.error(\"[ChromeExtensionBroadcastChannel] Listener error:\", error);\n            }\n        }\n\n        return true;\n    });\n};\n\n/**\n * Chrome Extension Broadcast-like Channel\n * Acts like a BroadcastChannel but uses chrome.runtime messaging\n */\nexport class ChromeExtensionBroadcastChannel {\n    private listeners: Set<CrxListener> = new Set();\n\n    constructor(private channelName: string) {\n        ensureRuntimeListener();\n    }\n\n    addEventListener(type: \"message\", listener: (event: any, sender: CrxSender, sendResponse: CrxSendResponse) => void | Promise<void>) {\n        if (type !== \"message\") return;\n        this.listeners.add(listener);\n        let set = runtimeListenerRegistry.get(this.channelName);\n        if (!set) {\n            set = new Set();\n            runtimeListenerRegistry.set(this.channelName, set);\n        }\n        set.add(listener);\n    }\n\n    removeEventListener(type: \"message\", listener: (event: any, sender: CrxSender, sendResponse: CrxSendResponse) => void | Promise<void>) {\n        if (type !== \"message\") return;\n        this.listeners.delete(listener);\n        runtimeListenerRegistry.get(this.channelName)?.delete(listener);\n    }\n\n    postMessage(message: any) {\n        const messageWithChannel = {\n            ...message,\n            channelName: this.channelName,\n            source: \"broadcast-channel\"\n        };\n\n        // Send via chrome runtime messaging (ignore response)\n        chrome?.runtime?.sendMessage?.(messageWithChannel, () => void 0);\n    }\n\n    close() {\n        for (const listener of this.listeners) {\n            runtimeListenerRegistry.get(this.channelName)?.delete(listener);\n        }\n        this.listeners.clear();\n    }\n}\n\n/**\n * Unified Chrome Extension Tabs Channel\n * Acts like a BroadcastChannel but uses chrome.tabs messaging to communicate with content scripts\n * Supports both broadcast-to-multiple-tabs and current-tab-only targeting\n */\nexport class ChromeExtensionTabsChannel {\n    private wrappedByOriginal = new Map<CrxListener, CrxListener>();\n    private wrappedListeners: Set<CrxListener> = new Set();\n    private channelName: string;\n    private mode: 'broadcast' | 'current-tab' = 'broadcast';\n    private tabFilter?: (tab: chrome.tabs.Tab) => boolean;\n    private tabIdGetter?: () => Promise<number> | number;\n\n    constructor(channelName: string, options?: {\n        mode?: 'broadcast' | 'current-tab';\n        tabFilter?: (tab: chrome.tabs.Tab) => boolean;\n        tabIdGetter?: () => Promise<number> | number;\n    }) {\n        this.channelName = channelName;\n        this.mode = options?.mode || 'broadcast';\n        this.tabFilter = options?.tabFilter;\n        this.tabIdGetter = options?.tabIdGetter || this.getCurrentTabId;\n        this.startListening();\n    }\n\n    private startListening() {\n        ensureRuntimeListener();\n\n        // No per-instance chrome.runtime.onMessage listener here; we reuse the global runtime listener.\n        // Filtering by tab is handled in our instance-level handler below.\n    }\n\n    addEventListener(type: \"message\", listener: CrxListener) {\n        if (type !== \"message\") return;\n\n        const existing = this.wrappedByOriginal.get(listener);\n        if (existing) return;\n\n        const wrapped: CrxListener = async (event, sender, sendResponse) => {\n            const message = event?.data;\n            if (!sender?.tab) return;\n\n            // For current-tab mode, verify this is from our target tab\n            if (this.mode === \"current-tab\") {\n                const targetTabId = await this.tabIdGetter?.();\n                if (typeof targetTabId === \"number\" && sender.tab.id !== targetTabId) return;\n            }\n\n            // For broadcast mode, apply tab filter if specified\n            if (this.mode === \"broadcast\" && this.tabFilter && !this.tabFilter(sender.tab)) return;\n\n            const enhancedEvent = {\n                ...event,\n                origin: sender.url || \"chrome-extension-tab\",\n                tab: sender.tab\n            };\n\n            return listener(enhancedEvent, sender, sendResponse);\n        };\n\n        this.wrappedByOriginal.set(listener, wrapped);\n        this.wrappedListeners.add(wrapped);\n        let set = runtimeListenerRegistry.get(this.channelName);\n        if (!set) {\n            set = new Set();\n            runtimeListenerRegistry.set(this.channelName, set);\n        }\n        set.add(wrapped);\n    }\n\n    removeEventListener(type: \"message\", listener: CrxListener) {\n        if (type !== \"message\") return;\n        const wrapped = this.wrappedByOriginal.get(listener);\n        if (!wrapped) return;\n        this.wrappedByOriginal.delete(listener);\n        this.wrappedListeners.delete(wrapped);\n        runtimeListenerRegistry.get(this.channelName)?.delete(wrapped);\n    }\n\n    /**\n     * Send message to specific tab\n     */\n    sendToTab(tabId: number, message: any): Promise<any> {\n        const messageWithChannel = {\n            channelName: this.channelName,\n            source: 'tabs-channel',\n            ...message\n        };\n\n        return new Promise((resolve, reject) => {\n            chrome?.tabs?.sendMessage?.(tabId, messageWithChannel, (response) => {\n                if (chrome?.runtime?.lastError) {\n                    reject(new Error(chrome.runtime.lastError.message));\n                } else {\n                    resolve(response);\n                }\n            });\n        });\n    }\n\n    /**\n     * Send message to active/current tab\n     */\n    async sendToActiveTab(message: any): Promise<any> {\n        if (this.mode === 'current-tab' && this.tabIdGetter) {\n            // Use the configured tab ID getter\n            const tabId = await this.tabIdGetter();\n            return this.sendToTab(tabId, message);\n        } else {\n            // Fallback to querying active tab\n            const tabs = await chrome.tabs.query({ active: true, currentWindow: true });\n            if (tabs.length === 0) {\n                throw new Error('No active tab found');\n            }\n            return this.sendToTab(tabs[0].id!, message);\n        }\n    }\n\n    /**\n     * Broadcast message to all matching tabs (only works in broadcast mode)\n     */\n    async broadcastToTabs(message: any, options?: { allWindows?: boolean; tabFilter?: (tab: chrome.tabs.Tab) => boolean }): Promise<any[]> {\n        if (this.mode === 'current-tab') {\n            // In current-tab mode, broadcast is just sending to the current tab\n            try {\n                const response = await this.sendToActiveTab(message);\n                return [{ tabId: await this.tabIdGetter!(), response }];\n            } catch (error) {\n                return [{ error }];\n            }\n        }\n\n        // Broadcast mode - send to multiple tabs\n        const query: chrome.tabs.QueryInfo = {\n            status: 'complete'\n        };\n\n        if (!options?.allWindows) {\n            query.currentWindow = true;\n        }\n\n        const tabs = await chrome.tabs.query(query);\n        const targetTabs = tabs.filter(tab => {\n            // Apply custom filter if provided\n            if (options?.tabFilter && !options.tabFilter(tab)) return false;\n            // Apply instance filter\n            if (this.tabFilter && !this.tabFilter(tab)) return false;\n            return true;\n        });\n\n        const messageWithChannel = {\n            channelName: this.channelName,\n            source: 'tabs-channel',\n            ...message\n        };\n\n        const promises = targetTabs.map(tab =>\n            new Promise<any>((resolve, reject) => {\n                chrome?.tabs?.sendMessage?.(tab.id!, messageWithChannel, (response) => {\n                    if (chrome?.runtime?.lastError) {\n                        reject(new Error(chrome.runtime.lastError.message));\n                    } else {\n                        resolve({ tabId: tab.id, response });\n                    }\n                });\n            })\n        );\n\n        return Promise.allSettled(promises);\n    }\n\n    /**\n     * Send message via chrome runtime (for service worker communication)\n     */\n    async postMessage(message: any) {\n        const tabId = await this.tabIdGetter!();\n\n        const messageWithChannel = {\n            channelName: this.channelName,\n            source: 'tabs-channel',\n            ...message\n        };\n\n        // Send via chrome.tabs messaging (ignore response)\n        return chrome?.tabs?.sendMessage?.(tabId, messageWithChannel, () => void 0);\n    }\n\n    /**\n     * Get current tab ID (convenience method)\n     */\n    async getCurrentTabId(): Promise<number> {\n        if (this.tabIdGetter) {\n            return await this.tabIdGetter();\n        }\n        return 0;\n    }\n\n    close() {\n        for (const wrapped of this.wrappedListeners) {\n            runtimeListenerRegistry.get(this.channelName)?.delete(wrapped);\n        }\n        this.wrappedListeners.clear();\n        this.wrappedByOriginal.clear();\n    }\n}\n\n/**\n * Chrome Extension Port Channel\n * Adapts chrome.runtime.Port into a BroadcastChannel-like interface.\n */\nexport class ChromeExtensionPortChannel {\n    private listeners = new Set<(event: any) => void>();\n\n    constructor(private port: chrome.runtime.Port, private channelName: string) {\n        this.port?.onMessage?.addListener?.((message: any) => {\n            if ((message?.channelName ?? message?.target) !== this.channelName) return;\n            const event = { data: message, origin: \"chrome-extension-port\", source: this.port };\n            for (const listener of this.listeners) {\n                try {\n                    listener(event);\n                } catch (error) {\n                    console.error(\"[ChromeExtensionPortChannel] Listener error:\", error);\n                }\n            }\n        });\n    }\n\n    addEventListener(type: \"message\", listener: (event: any) => void) {\n        if (type !== \"message\") return;\n        this.listeners.add(listener);\n    }\n\n    removeEventListener(type: \"message\", listener: (event: any) => void) {\n        if (type !== \"message\") return;\n        this.listeners.delete(listener);\n    }\n\n    postMessage(message: any) {\n        this.port?.postMessage?.({\n            ...message,\n            channelName: this.channelName,\n            source: \"port-channel\"\n        });\n    }\n\n    close() {\n        this.listeners.clear();\n        this.port?.disconnect?.();\n    }\n}\n","import { OptimizedWorkerChannel, QueuedWorkerChannel, type ProtocolOptions, type WorkerChannel, type WorkerConfig } from \"../storage/Queued\";\nimport { createOrUseExistingChannel } from \"../channel/Channels\";\nimport { UUIDv4 } from \"fest/core\";\nimport { ChromeExtensionBroadcastChannel } from \"./Wrappers\";\nimport { ChromeExtensionTabsChannel } from \"./Wrappers\";\nimport { initChannelHandler } from \"../channel/Channels\";\n\n/**\n * Create a chrome extension worker channel\n */\nexport const createChromeExtensionChannel = async (config: WorkerConfig): Promise<WorkerChannel> => {\n    // Chrome extensions can use dedicated workers, but might need special handling\n    let worker: Worker;\n    try {\n        // Try to use chrome.runtime.getURL for extension resources\n        if (typeof config.script !== \"string\") {\n            throw new Error(\"Chrome extension worker channel requires config.script to be a string path\");\n        }\n        worker = new Worker(chrome.runtime.getURL(config.script), config.options);\n    } catch (error) {\n        // Fallback for non-extension workers in extension context\n        if (typeof config.script === \"string\") {\n            worker = new Worker(new URL(config.script, import.meta.url), config.options);\n        } else if (typeof config.script === \"function\") {\n            worker = config.script();\n        } else {\n            worker = config.script;\n        }\n    }\n\n    const channel = await createOrUseExistingChannel(config.name, {}, worker);\n    return channel?.remote ?? channel;\n};\n\n/**\n * Create a chrome extension broadcast channel\n * Acts like BroadcastChannel but uses chrome.runtime messaging\n */\nexport const createChromeExtensionBroadcast = (channelName: string): BroadcastChannel => {\n    const worker = new ChromeExtensionBroadcastChannel(channelName) as any;\n    return worker as BroadcastChannel;\n};\n\n/**\n * Create a chrome extension broadcast-like channel\n * Acts like BroadcastChannel but uses chrome.runtime messaging\n */\nexport const createChromeExtensionBroadcastChannel = (channelName: string): WorkerChannel => {\n    const worker = new ChromeExtensionBroadcastChannel(channelName) as any;\n    const channel = createOrUseExistingChannel(channelName, {}, worker);\n    return channel?.remote ?? channel;\n};\n\n/**\n * Create a chrome extension tabs channel\n * Acts like BroadcastChannel but uses chrome.tabs messaging to communicate with content scripts\n */\n\n/**\n * Create a chrome extension tabs channel (unified)\n * Acts like BroadcastChannel but uses chrome.tabs messaging to communicate with content scripts\n * Supports both broadcast and current-tab modes\n */\nexport const createChromeExtensionTabsChannel = (\n    channelName: string,\n    options?: {\n        mode?: 'broadcast' | 'current-tab';\n        tabFilter?: (tab: chrome.tabs.Tab) => boolean;\n        tabIdGetter?: () => Promise<number> | number;\n    }\n): WorkerChannel => {\n    const worker = new ChromeExtensionTabsChannel(channelName, options) as any;\n    const channel = createOrUseExistingChannel(channelName, {}, worker);\n    return channel?.remote ?? channel;\n};\n\n/**\n * Create a chrome extension tabs messaging channel (unified)\n * Uses chrome.tabs.sendMessage for tab-to-content-script communication\n * Supports both broadcast and current-tab modes\n */\nexport const createChromeExtensionTabsMessagingChannel = (\n    channelName: string,\n    options?: {\n        mode?: 'broadcast' | 'current-tab';\n        tabFilter?: (tab: chrome.tabs.Tab) => boolean;\n        tabIdGetter?: () => Promise<number> | number;\n    }\n): WorkerChannel => {\n    // Create a tabs channel for chrome extension messaging\n    return createChromeExtensionTabsChannel(channelName, options);\n};\n\n/**\n * Initialize the main thread channel handler\n */\nexport const initMainChannel = (name: string = \"$host$\") => {\n    return initChannelHandler(name ?? \"$host$\");\n};\n\n/**\n * Create a queued worker channel that waits for connection\n */\nexport const createQueuedWorkerChannel = (\n    config: WorkerConfig,\n    onChannelReady?: (channel: WorkerChannel) => void\n): QueuedWorkerChannel => {\n    return new QueuedWorkerChannel(config, onChannelReady);\n};\n\n/**\n * Create a service worker channel (for when running in service worker context)\n */\nexport const createServiceWorkerChannel = async (config: WorkerConfig): Promise<WorkerChannel> => {\n    // In service worker context, we can't create dedicated workers\n    // Instead, we create a channel that communicates through alternative means\n    // This could be through BroadcastChannel, MessageChannel, or direct function calls\n\n    return {\n        async request(method: string, args: any[] = []) {\n            // For service worker context, we might need to handle operations differently\n            // This could involve:\n            // 1. Direct function calls if the API is available in SW context\n            // 2. Communication through BroadcastChannel to main thread\n            // 3. Using clients.matchAll() to communicate with controlled pages\n\n            // For now, we'll use a BroadcastChannel approach\n            return new Promise((resolve, reject) => {\n                const channel = new BroadcastChannel(`${config.name}-sw-channel`);\n                const messageId = UUIDv4();\n\n                const timeout = setTimeout(() => {\n                    channel.close();\n                    reject(new Error(`Service worker request timeout: ${method}`));\n                }, 10000); // 10 second timeout\n\n                channel.onmessage = (event) => {\n                    const { id, result, error } = event.data;\n                    if (id === messageId) {\n                        clearTimeout(timeout);\n                        channel.close();\n                        if (error) {\n                            reject(new Error(error));\n                        } else {\n                            resolve(result);\n                        }\n                    }\n                };\n\n                channel.postMessage({\n                    id: messageId,\n                    type: 'request',\n                    method,\n                    args\n                });\n            });\n        },\n\n        close() {\n            // Service worker channels don't need explicit closing\n            // as they use BroadcastChannel which auto-manages\n        }\n    };\n};\n\n/**\n * Create a worker channel with simplified API\n */\nexport const createWorkerChannel = async (config: WorkerConfig): Promise<WorkerChannel> => {\n    const context = config.context;\n\n    if (context === 'service-worker') {\n        // Service workers cannot create dedicated workers directly\n        // Instead, we create a channel that will use alternative communication\n        return createServiceWorkerChannel(config);\n    }\n\n    // Handle different script types\n    let worker: Worker;\n    if (typeof config.script === 'function') {\n        // Script is a constructor function\n        worker = config.script();\n    } else if (config.script instanceof Worker) {\n        // Script is already a Worker instance\n        worker = config.script;\n    } else {\n        // Script is a string path - handle context-specific loading\n        if (context === 'chrome-extension') {\n            // Chrome extensions might need special handling for worker scripts\n            try {\n                worker = new Worker(chrome.runtime.getURL(config.script), config.options);\n            } catch (error) {\n                // Fallback to regular worker creation\n                worker = new Worker(new URL(config.script, import.meta.url), config.options);\n            }\n        } else {\n            worker = new Worker(new URL(config.script, import.meta.url), config.options);\n        }\n    }\n\n    const channel = await createOrUseExistingChannel(config.name, {}, worker);\n    return channel as WorkerChannel;\n};\n\n/**\n * Create an optimized worker channel\n */\nexport const createOptimizedWorkerChannel = async (\n    config: WorkerConfig,\n    options?: ProtocolOptions\n): Promise<OptimizedWorkerChannel> => {\n    const baseChannel = await createWorkerChannel(config);\n    return new OptimizedWorkerChannel(baseChannel, options);\n};\n\n/**\n * Create an optimized worker channel with queuing support\n */\nexport const createQueuedOptimizedWorkerChannel = (\n    config: WorkerConfig,\n    options?: ProtocolOptions,\n    onChannelReady?: (channel: WorkerChannel) => void\n): OptimizedWorkerChannel => {\n    // Create the optimized channel first (without underlying channel)\n    const optimizedChannel = new OptimizedWorkerChannel(null, options, onChannelReady);\n\n    // Then create the underlying channel asynchronously\n    createWorkerChannel(config).then((baseChannel) => {\n        optimizedChannel.setChannel(baseChannel);\n    }).catch((error) => {\n        console.error('[createQueuedOptimizedWorkerChannel] Failed to create base channel:', error);\n        // Reject all queued requests\n        optimizedChannel.close();\n    });\n\n    return optimizedChannel;\n};\n","[   // @ts-ignore\n    { name: \"--screen-width\", syntax: \"<length-percentage>\", inherits: true, initialValue: \"0px\" },\n    { name: \"--screen-height\", syntax: \"<length-percentage>\", inherits: true, initialValue: \"0px\" },\n    { name: \"--visual-width\", syntax: \"<length-percentage>\", inherits: true, initialValue: \"0px\" },\n    { name: \"--visual-height\", syntax: \"<length-percentage>\", inherits: true, initialValue: \"0px\" },\n    { name: \"--clip-ampl\", syntax: \"<number>\", inherits: true, initialValue: \"0\" },\n    { name: \"--clip-freq\", syntax: \"<number>\", inherits: true, initialValue: \"0\" },\n    { name: \"--avail-width\", syntax: \"<length-percentage>\", inherits: true, initialValue: \"0px\" },\n    { name: \"--avail-height\", syntax: \"<length-percentage>\", inherits: true, initialValue: \"0px\" },\n    { name: \"--pixel-ratio\", syntax: \"<number>\", inherits: true, initialValue: \"1\" },\n    { name: \"--percent\", syntax: \"<number>\", inherits: true, initialValue: \"0\" },\n    { name: \"--percent-x\", syntax: \"<number>\", inherits: true, initialValue: \"0\" },\n    { name: \"--percent-y\", syntax: \"<number>\", inherits: true, initialValue: \"0\" },\n    { name: \"--scroll-left\", syntax: \"<number>\", inherits: true, initialValue: \"0\" },\n    { name: \"--scroll-top\", syntax: \"<number>\", inherits: true, initialValue: \"0\" },\n    { name: \"--drag-x\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--drag-y\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--resize-x\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--resize-y\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--shift-x\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--shift-y\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cs-grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cs-grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cs-p-grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cs-p-grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--os-grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--os-grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--rv-grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--rv-grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cell-x\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cell-y\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n].forEach((options: any) => {\n    if (typeof CSS != \"undefined\") {\n        try { CSS?.registerProperty?.(options); } catch (e) { console.warn(e); }\n    }\n});\n\n//\nexport const __exportProperties = ()=>{\n\n}\n","import { isArrayOrIterable } from \"fest/core\";\n\n//\nexport const getOffsetParent = (element: Element): Element | null => { return (element as HTMLElement)?.offsetParent ?? (element as any)?.host; }\nexport const getOffsetParentChain = (element: Element): Element[] => {\n    const parents: Element[] = []; let current: Element | null = element;\n    while (current) {\n        const parent = getOffsetParent(current);\n        if (parent && (parent instanceof HTMLHtmlElement)) { break; }\n        if (current = parent) { parents.push(current); }\n    }\n    return parents;\n}\n\n//\nexport const isNearlyIdentity = (matrix: DOMMatrix, epsilon: number = 1e-6): boolean => {\n    return (\n        Math.abs(matrix.a - 1) < epsilon &&\n        Math.abs(matrix.b) < epsilon &&\n        Math.abs(matrix.c) < epsilon &&\n        Math.abs(matrix.d - 1) < epsilon &&\n        Math.abs(matrix.e) < epsilon &&\n        Math.abs(matrix.f) < epsilon\n    );\n}\n\n//\nexport const makeRAFCycle = () => {\n    const control: any = {\n        canceled: false,\n        rAFs: new Set<any>(),\n        last: null,\n        cancel() { this.canceled = true; cancelAnimationFrame(this.last); return this; },\n        shedule(cb: any) { this.rAFs.add(cb); return this; }\n    };\n    (async () => {\n        while (!control?.canceled) { // @ts-ignore\n            await Promise.all((control?.rAFs?.values?.() ?? [])?.map?.((rAF) => Promise.try(rAF)?.catch?.(console.warn.bind(console)))); control.rAFs?.clear?.();\n            if (typeof requestAnimationFrame != \"undefined\") {\n                await new Promise((res) => { control.last = requestAnimationFrame(res); });\n            } else {\n                await new Promise((res) => { setTimeout(res, 16); });\n            }\n        }\n    })();\n    return control;\n};\n\n//\nexport const RAFBehavior = (shed = makeRAFCycle()) => {\n    return (cb)=>shed.shedule(cb);\n}\n\n//\nexport interface InteractStatus { pointerId?: number; };\nexport const ROOT = typeof document != \"undefined\" ? document?.documentElement : null;\nexport const setAttributesIfNull = (element, attrs = {})=>{\n    if (!attrs || (typeof attrs != \"object\") || !element) return;\n    return Array.from(Object.entries(attrs)).map(([name, value])=>{\n        const old = element.getAttribute(name);\n        if (value == null) {\n            element.removeAttribute(name);\n        } else\n        if (value != old) {\n            element.setAttribute(name, old == \"\" ? (value ?? old) : (old ?? value));\n        }\n    });\n}\n\n//\nexport const setAttributes = (element, attrs = {})=>{\n    return Array.from(Object.entries(attrs)).map(([name, value])=>{\n        if (value == null) {\n            element.removeAttribute(name);\n        } else {\n            element.setAttribute(name, value ?? element.getAttribute(name));\n        }\n    });\n}\n\n//\nexport const throttleMap = new Map<string, any>();\nexport const setIdleInterval = (cb, timeout = 1000, ...args)=>{\n    const status = { running: true, cancel: ()=>{ status.running = false; } };\n    requestIdleCallback(async ()=>{\n        if (!cb || (typeof cb != \"function\")) return;\n        while (status.running) {\n            await Promise.all([ // @ts-ignore\n                Promise.try(cb, ...args),\n                new Promise((r)=>setTimeout(r, timeout))\n            ]).catch?.(console.warn.bind(console));\n\n            //\n            await Promise.any([\n                new Promise((r)=>requestIdleCallback(r, { timeout })),\n                new Promise((r)=>setTimeout(r, timeout))\n                //new Promise((r)=>requestAnimationFrame(r))\n            ]);\n        }\n        status.cancel = ()=>{};\n    }, {timeout});\n    return status?.cancel;\n}\n\n//\nif (typeof requestAnimationFrame != \"undefined\") {\n    requestAnimationFrame(async () => {\n        while (true) {\n            throttleMap.forEach((cb) => cb?.());\n            await new Promise((r) => requestAnimationFrame(r));\n        }\n    });\n}\n\n//\nexport const borderBoxWidth   = Symbol(\"@border-box-width\") , borderBoxHeight  = Symbol(\"@border-box-height\");\nexport const contentBoxWidth  = Symbol(\"@content-box-width\"), contentBoxHeight = Symbol(\"@content-box-height\");\nexport const onBorderObserve  = new WeakMap<HTMLElement, ResizeObserver>();\nexport const onContentObserve = new WeakMap<HTMLElement, ResizeObserver>();\nexport const doContentObserve = (element, cb: any = ()=>{}) => {\n    if (!(element instanceof HTMLElement)) return;\n    if (!onContentObserve.has(element)) {\n        element[contentBoxWidth]  = (element.clientWidth );\n        element[contentBoxHeight] = (element.clientHeight);\n\n        //\n        const observer = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                if (entry.contentBoxSize) {\n                    const contentBoxSize = entry.contentBoxSize[0];\n                    if (contentBoxSize) {\n                        element[contentBoxWidth]  = Math.min(contentBoxSize.inlineSize, element.clientWidth);\n                        element[contentBoxHeight] = Math.min(contentBoxSize.blockSize, element.clientHeight);\n                        cb?.(element);\n                    }\n                }\n            }\n        });\n\n        //\n        onContentObserve.set(element, observer);\n        observer.observe((element as any)?.element ?? element, {box: \"content-box\"});\n    }\n};\n\n//\nexport const doBorderObserve = (element, cb: any = ()=>{}) => {\n    if (!(element instanceof HTMLElement)) return;\n    if (!onBorderObserve.has(element)) {\n        element[borderBoxWidth]  = element.offsetWidth;\n        element[borderBoxHeight] = element.offsetHeight;\n        const observer = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                if (entry.borderBoxSize) {\n                    const borderBoxSize = entry.borderBoxSize[0];\n                    if (borderBoxSize) {\n                        element[borderBoxWidth]  = Math.min(borderBoxSize.inlineSize, element.offsetWidth);\n                        element[borderBoxHeight] = Math.min(borderBoxSize.blockSize, element.offsetHeight);\n                        cb?.(element);\n                    }\n                }\n            }\n        });\n\n        //\n        onBorderObserve.set(element, observer);\n        observer.observe((element as any)?.element ?? element, {box: \"border-box\"});\n    }\n}\n\n//\nexport const url  = (type: string, ...source: any[]) => { return URL.createObjectURL(new Blob(source, {type})); };\nexport const html = (source: string, type: DOMParserSupportedType = 'text/html') => {\n    const parsed  = (new DOMParser()).parseFromString(source, type);\n    return parsed.querySelector('template') ?? parsed.querySelector(\"*\");\n};\n\n//\nexport const setChecked = (input: HTMLInputElement, value: boolean, ev?: any)=>{\n    if (value != null && input.checked != value) {\n        if (\n            (input?.['type'] == \"checkbox\") ||\n            (input?.['type'] == \"radio\" && !input?.checked)\n        ) { input?.click?.(); ev?.preventDefault?.(); } else {\n            input.checked = !!value;\n            input?.dispatchEvent?.(new Event(\"change\", { bubbles: true, cancelable: true, }));\n        }\n    }\n}\n\n\n\n//\nexport const isValidParent = (parent: Node | null) => {\n    return (parent != null && parent instanceof HTMLElement && !(parent instanceof DocumentFragment || parent instanceof HTMLBodyElement)) ? parent : null;\n}\n\n//\nexport const indexOf = (element: Node | null, node: Node | null) => {\n    if (element == null || node == null) return -1;\n    return Array.from(element?.childNodes ?? [])?.indexOf?.((node as ChildNode)) ?? -1;\n}\n\n//\nexport const\n    MATCH = '(-?[_a-zA-Z]+[_a-zA-Z0-9-]*)',\n    REGEX = '^(?:' + MATCH + ')|^#' + MATCH + '|^\\\\.' + MATCH + '|^\\\\[' + MATCH + '(?:([*$|~^]?=)([\"\\'])((?:(?=(\\\\\\\\?))\\\\8.)*?)\\\\6)?\\\\]';\n\n//\nexport const createElementVanilla = (selector): HTMLElement | DocumentFragment => {\n    if (selector == \":fragment:\") return document.createDocumentFragment();\n    const create = document.createElement.bind(document);\n    for (var node: any = create('div'), match, className = ''; selector && (match = selector.match(REGEX));) {\n        if (match[1]) node = create(match[1]);\n        if (match[2]) node.id = match[2];\n        if (match[3]) className += ' ' + match[3];\n        if (match[4]) node.setAttribute(match[4], match[7] || '');\n        selector = selector.slice(match[0].length);\n    }\n    if (className) node.className = className.slice(1);\n    return node;\n};\n\n//\nexport const isElement = (el: any) => { return el != null && (el instanceof Node || el instanceof Text || el instanceof Element || el instanceof Comment || el instanceof HTMLElement || el instanceof DocumentFragment) ? el : null; }\nexport const includeSelf = (target: HTMLElement, selector: string) => { return (target.querySelector(selector) ?? (target.matches(selector) ? target : null)); }\nexport const hasParent = (current: any, parent: any) => { while (current) { if (!(current?.element ?? current)) { return false; }; if ((current?.element ?? current) === (parent?.element ?? parent)) return true; current = current.parentElement ?? (current.parentNode == current?.getRootNode?.({ composed: true }) ? current?.getRootNode?.({ composed: true })?.host : current?.parentNode); } }\nexport const passiveOpts = {};\n\n//\nexport function addEvent(target, type, cb, opts: any = passiveOpts): any {\n    target?.addEventListener?.(type, cb, opts);\n    const wr = (typeof target == \"object\" || typeof target == \"function\" && !target?.deref) ? new WeakRef(target) : target;\n    return () => wr?.deref?.()?.removeEventListener?.(type, cb, opts);\n    //return () => target?.removeEventListener?.(type, cb, opts);\n}\n\n//\nexport function removeEvent(target, type, cb, opts: any = passiveOpts): any {\n    target?.removeEventListener?.(type, cb, opts);\n}\n\n// add events by map of [name, cb] in 'handlers'\n// where cb is Function or [Function, options]\nexport const addEvents = (root, handlers) => {\n    root = (root instanceof WeakRef ? root.deref() : root); // @ts-ignore\n    return [...Object.entries(handlers)]?.map?.(([name, cb]) => (Array.isArray(cb) ? addEvent(root, name, ...cb as any) : addEvent(root, name, cb)));\n}\n\n// add events by map of [name, cbs[]] in 'events'\n// where cb of cbs[] is Function or [Function, options]\n// however, [Function, options] not implemented yet\nexport const addEventsList = (el, events) => {\n    if (events) {\n        let entries: any[] = events;\n        if (events instanceof Map) {\n            entries = [...events.entries()];\n        } else {\n            entries = [...Object.entries(events)];\n        }\n        return entries.map(([name, list]) => ((isArrayOrIterable(list) ? [...list as any] : list) ?? [])?.map?.((cbs)=>{\n            return addEvent(el, name, cbs)\n        }));\n    }\n}\n\n//\nexport const removeEvents = (root, handlers) => {\n    root = (root instanceof WeakRef ? root.deref() : root); // @ts-ignore\n    return [...Object.entries(handlers)]?.map?.(([name, cb]) => (Array.isArray(cb) ? removeEvent(root, name, ...cb as any) : removeEvent(root, name, cb)));\n}\n\n//\n// Get the actual target element from an event, considering shadow DOM boundaries\nexport const getEventTarget = (ev: Event | any): HTMLElement | Element | null => {\n    if (!ev) return null;\n\n    // Use composedPath() for shadow DOM compatibility\n    if (ev?.composedPath && typeof ev.composedPath === 'function') {\n        const path = ev.composedPath();\n        // Return the first element in the path (the actual target)\n        for (const node of path) {\n            if (node instanceof HTMLElement || node instanceof Element) {\n                return node as HTMLElement;\n            }\n        }\n    }\n\n    // Fallback to target property\n    const target = ev?.target;\n    if (target instanceof HTMLElement || target instanceof Element) {\n        return target;\n    }\n\n    return null;\n};\n\n//\nexport const containsOrSelf = (a: any, b: any, ev?: Event)=>{\n    if (b == null || !(b instanceof Node) && b?.element == null) return false; // if isn't node with element or just null\n    if ((a == b)  || (a?.element ?? a) == (b?.element ?? b)) return true; // wrapper or element is same\n\n    // Use composedPath() for shadow DOM compatibility if event is provided\n    if (ev?.composedPath && typeof ev.composedPath === 'function') {\n        const path = ev.composedPath();\n        const aEl = a?.element ?? a;\n        const bEl = b?.element ?? b;\n        if (path.includes(aEl) && path.includes(bEl)) {\n            // Check if b appears before a in the path (b is deeper/child of a)\n            const aIndex = path.indexOf(aEl);\n            const bIndex = path.indexOf(bEl);\n            if (bIndex >= 0 && aIndex >= 0 && bIndex < aIndex) return true;\n        }\n    }\n\n    if (a?.contains?.(b?.element ?? b) || a?.getRootNode({ composed: true })?.host == (b?.element ?? b)) return true; // a contains b element\n    return false;\n}\n\n// get by selector self or parent, matches by selector, include shadow DOM host\nexport const MOCElement = (element: HTMLElement | null, selector: string, ev?: Event): HTMLElement | null => {\n    // Use composedPath() for shadow DOM compatibility if event is provided\n    if (ev?.composedPath && typeof ev.composedPath === 'function') {\n        const path = ev.composedPath();\n        // Search through the composed path for matching elements\n        for (const node of path) {\n            if (node instanceof HTMLElement || node instanceof Element) {\n                if ((node as HTMLElement).matches?.(selector)) {\n                    return node as HTMLElement;\n                }\n            }\n        }\n    }\n\n    const self = (element?.matches?.(selector) ? element : null);\n    const host = (element?.getRootNode({ composed: true }) as any ?? element?.parentElement?.getRootNode({ composed: true}) as any)?.host;\n    const hostMatched = host?.matches?.(selector) ? host : null;\n    const closest = (element as any)?.closest?.(selector) ?? (self as any)?.closest?.(selector) ?? (hostMatched as any)?.closest?.(selector) ?? null;\n    return (self ?? closest ?? hostMatched);\n};\n\n//\nexport const MOC = (element: HTMLElement | null, selector: string): boolean => { return !!MOCElement(element, selector); };\n\n//\nexport const isInFocus = (element: HTMLElement | null, selectorOrElement?: string | HTMLElement, dir: \"parent\" | \"child\" = \"parent\"): boolean => {\n    if (!element) return false;\n\n    // Visibility Check (if supported, otherwise basic offsetParent)\n    // @ts-ignore\n    if (element.checkVisibility && !element.checkVisibility({ checkOpacity: true, checkVisibilityCSS: true })) return false;\n    // @ts-ignore\n    if (!element.checkVisibility && element.offsetParent === null && element.style.position !== 'fixed') return false;\n\n    // Deep Active Element Resolution\n    let active = document.activeElement;\n    while (active && active.shadowRoot && active.shadowRoot.activeElement) {\n        active = active.shadowRoot.activeElement;\n    }\n\n    // Interaction Status\n    const isFocused = (active === element) || hasParent(active, element);\n    const isHovered = element.matches(\":hover\");\n\n    // Top-most check for hover (optional, but requested \"elementFromPoint\")\n    // Only worth checking if hovered but not focused, to see if it's occluded?\n    // Skipping expensive rect calc for now unless strictly needed, :hover is usually reliable for CSS pointer-events.\n\n    if (!isFocused && !isHovered && !selectorOrElement) return false;\n\n    // Constraints\n    if (selectorOrElement) {\n        if (typeof selectorOrElement === \"string\") {\n            if (dir === \"parent\") {\n                // Does the element (or its context) match the selector?\n                return !!MOCElement(element, selectorOrElement);\n            } else {\n                // Does the interaction target inside match the selector?\n                const target = isFocused ? active : (element.querySelector(\":hover\") || element);\n                const altCnd = !!MOCElement(target as HTMLElement, selectorOrElement);\n                return (element?.querySelector?.(selectorOrElement) != null || element?.matches?.(selectorOrElement) || altCnd);\n            }\n        } else if (selectorOrElement instanceof HTMLElement) {\n             if (dir === \"parent\") {\n                 return hasParent(element, selectorOrElement) || false;\n             } else {\n                 return hasParent(selectorOrElement, element) || false;\n             }\n        }\n    }\n\n    return true;\n}\n","import { cvt_cs_to_os } from \"fest/core\";\nimport { borderBoxHeight, borderBoxWidth, contentBoxHeight, contentBoxWidth } from \"./Utils\";\n\n//\nexport const getZoom = ()=>{\n    const zoomSupport = \"currentCSSZoom\" in document.documentElement;\n    // @ts-ignore\n    if (zoomSupport) { return ((document.documentElement.currentCSSZoom as number) || 1); }\n    return parseFloat(document.documentElement.style.getPropertyValue(\"--scaling\") || \"1\") || 1;\n}\n\n//\nconst zoomValues = new WeakMap<HTMLElement, number>();\n\n//\nexport const zoomOf = (element = document.documentElement) => {\n    // @ts-ignore\n    return zoomValues.getOrInsertComputed(element, ()=>{\n        // getting zoom performance broken...\n        const container: any = ((element?.matches?.(\".ui-orientbox\") ? element : null) || element?.closest?.(\".ui-orientbox\") || document.body) as HTMLElement;\n\n        // get software zoom value\n        if (container?.zoom) {\n            return (container?.zoom || 1);\n        }\n\n        // get and cache zoom value\n        // @ts-ignore\n        if (element?.currentCSSZoom) {\n            // @ts-ignore\n            return element?.currentCSSZoom || 1;\n        }\n    });\n}\n\n//\nexport const changeZoom = (scale = 1) => {\n    document.documentElement.style.setProperty(\"--scaling\", scale as unknown as string);\n    document.documentElement.dispatchEvent(new CustomEvent(\"scaling\", {\n        detail: {zoom: scale},\n        bubbles: true,\n        cancelable: true\n    }));\n    return scale;\n}\n\n//\nexport const fixedClientZoom = (element = document.documentElement)=>{\n    // @ts-ignore\n    return ((element?.currentCSSZoom != null ? 1 : zoomOf(element))) || 1;\n}\n\n//\nexport const unfixedClientZoom = (element = document.documentElement)=>{\n    // @ts-ignore\n    return ((element?.currentCSSZoom == null ? 1 : element?.currentCSSZoom)) || 1;\n}\n\n//\nexport const orientOf = (element = document.documentElement) => {\n    // legacy browser\n    const container: any = ((element?.matches?.(\"[orient], [data-mixin=\\\"ui-orientbox\\\"]\") ? element : null) || element?.closest?.(\"[orient], [data-mixin=\\\"ui-orientbox\\\"]\") || element);\n    if (container?.hasAttribute?.(\"orient\")) { return parseInt(container?.getAttribute?.(\"orient\") || \"0\") || 0; };\n    return (container?.orient || 0);\n}\n\n//\nexport const getBoundingOrientRect = (element, orient: number|null|undefined = null)=>{\n    const zoom = unfixedClientZoom(element) || 1;\n    const box = element?.getBoundingClientRect?.();\n    const nbx = {\n        left: box?.left / zoom,\n        right: box?.right / zoom,\n        top: box?.top / zoom,\n        bottom: box?.bottom / zoom,\n        width: box?.width / zoom,\n        height: box?.height / zoom,\n    };\n\n    //\n    const or_i: number = orient ?? (orientOf(element) || 0);\n    const size: [number, number] = [document.body.clientWidth / zoom, document.body.clientHeight / zoom];\n    const [left_, top_] = cvt_cs_to_os([nbx.left, nbx.top], size, or_i);\n    const [right_, bottom_] = cvt_cs_to_os([nbx.right, nbx.bottom], size, or_i);\n\n    //\n    const [left, right] = (or_i==0 || or_i==3) ? [left_, right_] : [right_, left_];\n    const [top, bottom] = (or_i==0 || or_i==1) ? [top_, bottom_] : [bottom_, top_];\n\n    //\n    const [width, height] = (or_i%2) ? [nbx.height, nbx.width] : [nbx.width, nbx.height];\n    return { left, top, right, bottom, width, height };\n}\n\n//\nexport const bbw    = (el, orient = null)=> ((orient??orientOf(el))%2 ? (el[borderBoxHeight] ?? el?.clientHeight) : (el[borderBoxWidth] ?? el?.clientWidth));\nexport const bbh    = (el, orient = null)=> ((orient??orientOf(el))%2 ? (el[borderBoxWidth] ?? el?.clientWidth) : (el[borderBoxHeight] ?? el?.clientHeight));\nexport const cbw    = (el, orient = null)=> ((orient??orientOf(el))%2 ? (el[contentBoxHeight] ?? el?.clientHeight) : (el[contentBoxWidth] ?? el?.clientWidth));\nexport const cbh    = (el, orient = null)=> ((orient??orientOf(el))%2 ? (el[contentBoxWidth] ?? el?.clientWidth) : (el[contentBoxHeight] ?? el?.clientHeight));\n","import type { StyleTuple } from \"../mixin/Style\";\nimport { addEvent } from \"./Utils\";\n\n//\nexport const getAvailSize = () => {\n    const l = typeof matchMedia != \"undefined\" ? matchMedia(\"(orientation: landscape)\")?.matches : false;\n    if (typeof screen != \"undefined\") {\n        const aw = screen?.availWidth + \"px\";\n        const ah = screen?.availHeight + \"px\";\n        return {\n            \"--screen-width\": Math.min(screen?.width, screen?.availWidth) + \"px\",\n            \"--screen-height\": Math.min(screen?.height, screen?.availHeight) + \"px\",\n            \"--avail-width\": l ? ah : aw,\n            \"--avail-height\": l ? aw : ah,\n            \"--view-height\": (Math.min(screen?.availHeight, window?.innerHeight) + \"px\"),\n            \"--pixel-ratio\": devicePixelRatio || 1,\n        };\n    };\n    return {\n        \"--screen-width\": 0 + \"px\",\n        \"--screen-height\": 0 + \"px\",\n        \"--avail-width\": 0 + \"px\",\n        \"--avail-height\": 0 + \"px\",\n        \"--view-height\": 0 + \"px\",\n        \"--pixel-ratio\": 1,\n    };\n}\n\n//\nexport const availSize = getAvailSize();\nexport const classes: StyleTuple[] = [ [\":root, :host, :scope\", availSize] ];\nexport const orientationNumberMap = {\n    \"portrait-primary\": 0, // as 0deg, aka. 360deg\n    \"landscape-primary\": 1, // as -90deg, aka. 270deg\n    \"portrait-secondary\": 2, // as -180deg, aka. 180deg\n    \"landscape-secondary\": 3 // as -270deg, aka. 90deg\n}\n\n//\nexport const updateVP = (ev?: any)=>{\n    const rule = document.documentElement;\n    Object.assign(availSize, getAvailSize());\n    Object.entries(availSize).forEach(([propName, propValue]) => {\n        const exists = rule?.style?.getPropertyValue(propName);\n        if (!exists || exists != propValue) {\n            rule?.style?.setProperty?.(propName, (propValue || \"\") as string, \"\");\n        }\n    });\n\n    // make secondary screen orientation detectable\n    document.documentElement.style.setProperty(\"--orientation-secondary\", screen?.orientation?.type?.endsWith?.(\"secondary\") ? \"1\" : \"0\");\n}\n\n//\nexport const getCorrectOrientation = () => {\n    let orientationType: string = screen.orientation.type;\n    if (!window.matchMedia(\"((display-mode: fullscreen) or (display-mode: standalone) or (display-mode: window-controls-overlay))\").matches) {\n        if (matchMedia(\"(orientation: portrait)\").matches) {orientationType = orientationType.replace(\"landscape\", \"portrait\");} else\n            if (matchMedia(\"(orientation: landscape)\").matches) {orientationType = orientationType.replace(\"portrait\", \"landscape\");};\n    }\n    return orientationType;\n};\n\n//\nconst passiveOpts = { passive: true };\n\n//\nexport const whenAnyScreenChanges = (cb) => {\n    let ticking = false;\n    const update = () => {\n        if (!ticking) {\n            requestAnimationFrame(() => {\n                cb();\n                ticking = false;\n            });\n            ticking = true;\n        }\n    };\n\n    const unsubscribers: any[] = [];\n\n    // @ts-ignore\n    unsubscribers.push(addEvent(navigator?.virtualKeyboard, \"geometrychange\", update, passiveOpts));\n    unsubscribers.push(addEvent(window?.visualViewport, \"scroll\", update, passiveOpts));\n    unsubscribers.push(addEvent(window?.visualViewport, \"resize\", update, passiveOpts));\n    unsubscribers.push(addEvent(screen?.orientation, \"change\", update));\n    unsubscribers.push(addEvent(window, \"resize\", update));\n    unsubscribers.push(addEvent(document?.documentElement, \"fullscreenchange\", update));\n    unsubscribers.push(addEvent(document, \"DOMContentLoaded\", update));\n    unsubscribers.push(addEvent(matchMedia(\"(orientation: portrait)\"), \"change\", update));\n\n    //\n    update();\n    requestIdleCallback(update, { timeout: 100 });\n    return () => unsubscribers.forEach((unsub) => unsub());\n};\n\n//\nexport const fixOrientToScreen = (element)=>{\n    if (!element?.classList?.contains?.(\"native-portrait-optimized\")) {\n        element?.classList?.add?.(\"native-portrait-optimized\");\n        return whenAnyScreenChanges(()=>{\n            element.orient = orientationNumberMap?.[getCorrectOrientation()] || 0;\n        });\n    }\n}\n","import { unfixedClientZoom } from \"./Zoom\";\n\n//\nconst canvas = new OffscreenCanvas(1, 1);\nconst ctx = canvas.getContext(\"2d\");\n\n//\nexport const initTextStyle = (element, ctx)=>{\n    const style = getComputedStyle(element, \"\");\n\n    //\n    if (ctx && style) {\n        const fontWeight  = (style.getPropertyValue('font-weight')  || 'normal');\n        const fontSize    = (style.getPropertyValue('font-size')    || '16px');\n        const fontFamily  = (style.getPropertyValue('font-family')  || 'Times New Roman');\n        const fontStretch = (style.getPropertyValue('font-stretch') || 'normal') as CanvasFontStretch;\n\n        //\n        try { ctx.fontStretch     = fontStretch.includes(\"%\") ? \"normal\" : fontStretch; } catch(e) {};\n        try { ctx.letterSpacing   = (style.getPropertyValue('letter-spacing') || 'normal'); } catch(e) {};\n        try { ctx.fontKerning     = (style.getPropertyValue('font-kerning') || 'auto') as CanvasFontKerning; } catch(e) {};\n        try { ctx.fontVariantCaps = (style.getPropertyValue('font-variant-caps') || 'normal') as CanvasFontVariantCaps; } catch(e) {};\n        try { ctx.font = `${fontWeight} ${fontSize} ${fontFamily}`; } catch(e) {};\n    }\n}\n\n//\nexport const measureText = (text, element)=>{\n    if (ctx) {\n        initTextStyle(element, ctx);\n        try { return ctx.measureText(text); } catch(e) {};\n    }\n    return { width: null };\n}\n\n//\nexport const measureInputInFocus = (input: HTMLInputElement)=>{\n    const text = input.value.slice(0, input.selectionEnd || 0);\n    return measureText(text, input);\n}\n\n// important: point WITHOUT padding!\nexport const computeCaretPosition = (input: HTMLInputElement, point: [number, number])=>{\n    const text  = input?.value || \"\";\n    if (ctx) {\n        initTextStyle(input, ctx);\n        let currentWidth = 0;\n        for (let i=0;i<text.length;i++) {\n            currentWidth = ctx.measureText(text.slice(0, i))?.width;\n            if (currentWidth == null) { return text.length; };\n            if (currentWidth != null && currentWidth >= point[0]) { return Math.max(i-1, 0); };\n        }\n    }\n    return text.length;\n}\n\n//\nexport const computeCaretPositionFromClient = (input: HTMLInputElement, client: [number, number])=>{\n    const box = input.getBoundingClientRect();\n    const point: [number, number] = [client[0] - box.left / unfixedClientZoom(), client[1] - box.top / unfixedClientZoom()];\n    return computeCaretPosition(input, point);\n}\n","const onBorderObserve = new WeakMap<HTMLElement, Function[]>(), onContentObserve = new WeakMap<HTMLElement, Function[]>();\nconst unwrapFromQuery = (element: any) => { if (typeof element?.current == \"object\") { element = element?.element ?? element?.current ?? (typeof element?.self == \"object\" ? element?.self : null) ?? element; }; return element; }\n\n// TODO: support of fragments\nexport const observeContentBox = (element, cb) => {\n    if (!onContentObserve.has(element = unwrapFromQuery(element))) {\n        const callbacks: Function[] = [];\n        const observer = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                if (entry.contentBoxSize) {\n                    const contentBoxSize = entry.contentBoxSize[0];\n                    if (contentBoxSize) {\n                        callbacks.forEach((cb) => cb?.(contentBoxSize, observer));\n                    }\n                }\n            }\n        });\n\n        //\n        cb?.({\n            inlineSize: element.clientWidth/* - (getPxValue(element, \"padding-left\") + getPxValue(element, \"padding-right\"))*/,\n            blockSize: element.clientHeight/* - (getPxValue(element, \"padding-top\") + getPxValue(element, \"padding-bottom\"))*/,\n        }, observer);\n\n        //\n        onContentObserve.set(element, callbacks);\n        if ((element?.element ?? element) instanceof Node) {\n            observer.observe(element?.element ?? element, {box: \"content-box\"});\n        }\n    }\n\n    //\n    onContentObserve.get(element)?.push?.(cb);\n    return { disconnect: ()=>(onContentObserve.get(element)?.splice?.(onContentObserve.get(element)?.indexOf(cb) || -1, 1)) };\n};\n\n// TODO: support of fragments\nexport const observeBorderBox = (element, cb) => {\n    if (!onBorderObserve.has(element = unwrapFromQuery(element))) {\n        const callbacks: Function[] = [];\n        const observer = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                if (entry.borderBoxSize) {\n                    const borderBoxSize = entry.borderBoxSize[0];\n                    if (borderBoxSize) {\n                        callbacks.forEach((cb) => cb?.(borderBoxSize, observer));\n                    }\n                }\n            }\n        });\n\n        //\n        cb?.({\n            inlineSize: element.offsetWidth,\n            blockSize: element.offsetHeight,\n        }, observer);\n\n        //\n        onBorderObserve.set(element, callbacks);\n        if ((element?.element ?? element) instanceof Node) {\n            observer.observe(element?.element ?? element, {box: \"border-box\"});\n        }\n    }\n\n    //\n    onBorderObserve.get(element)?.push?.(cb);\n    return { disconnect: ()=>(onBorderObserve.get(element)?.splice?.(onBorderObserve.get(element)?.indexOf(cb) || -1, 1)) };\n}\n\n/*\n    const config = {\n        attributeFilter: [attribute],\n        attributeOldValue: true,\n        attributes: true,\n        childList: false,\n        subtree: false,\n    };\n*/\n\n//\nexport const observeAttribute = (element, attribute, cb) => {\n    if (typeof element?.selector == \"string\") { return observeAttributeBySelector(element, element?.selector, attribute, cb); };\n\n    //\n    const attributeList = new Set<string>((attribute.split(\",\") || [attribute]).map((s) => s.trim()));\n    const observer = new MutationObserver((mutationList, observer) => {\n        for (const mutation of mutationList) {\n            if (mutation.attributeName && attributeList.has(mutation.attributeName))\n                { cb(mutation, observer); }\n        }\n    });\n\n    //\n    if ((element?.element ?? element) instanceof Node) {\n        observer.observe(element = unwrapFromQuery(element), { attributes: true, attributeOldValue: true, attributeFilter: [...attributeList] });\n    }\n    attributeList.forEach((attribute)=>cb({ target: element, type: \"attributes\", attributeName: attribute, oldValue: (element as HTMLElement)?.getAttribute?.(attribute) }, observer));\n    return observer;\n};\n\n//\nexport const observeAttributeBySelector = (element, selector, attribute, cb) => {\n    const attributeList = new Set<string>([...(attribute.split(\",\") || [attribute])].map((s) => s.trim()));\n    const observer = new MutationObserver((mutationList, observer) => {\n        for (const mutation of mutationList) {\n            if (mutation.type == \"childList\") {\n                const addedNodes   = Array.from(mutation.addedNodes)   || [];\n                const removedNodes = Array.from(mutation.removedNodes) || [];\n\n                //\n                addedNodes.push(...Array.from(mutation.addedNodes || []).flatMap((el)=>Array.from((el as HTMLElement)?.querySelectorAll?.(selector) || []) as Element[]));\n                removedNodes.push(...Array.from(mutation.removedNodes || []).flatMap((el)=>Array.from((el as HTMLElement)?.querySelectorAll?.(selector) || []) as Element[]));\n\n                //\n                [...new Set(addedNodes)]?.filter((el: any)=>el?.matches?.(selector))?.map?.((target)=>{\n                    attributeList.forEach((attribute)=>{\n                        cb({ target, type: \"attributes\", attributeName: attribute, oldValue: (target as HTMLElement)?.getAttribute?.(attribute) }, observer);\n                    });\n                });\n            } else\n            if ((mutation.target as HTMLElement)?.matches?.(selector) && (mutation.attributeName && attributeList.has(mutation.attributeName))) {\n                cb(mutation, observer);\n            }\n        }\n    });\n\n    //\n    observer.observe(element = unwrapFromQuery(element), {\n        attributeOldValue: true,\n        attributes: true,\n        attributeFilter: [...attributeList],\n        childList: true,\n        subtree: true,\n        characterData: true\n    });\n\n    //\n    [...element.querySelectorAll(selector)].map((target)=>attributeList.forEach((attribute)=>cb({ target, type: \"attributes\", attributeName: attribute, oldValue: (target as HTMLElement)?.getAttribute?.(attribute) }, observer)));\n    return observer;\n};\n\n//\nexport const observeBySelector = (element, selector = \"*\", cb = (mut, obs)=>{}) => {\n    const unwrapNodesBySelector = (nodes: NodeListOf<Element>): Element[]=>{\n        const $nodes = Array.from(nodes || []) || [];\n        $nodes.push(...Array.from(nodes || []).flatMap((el)=> Array.from((el as HTMLElement)?.querySelectorAll?.(selector) || []) as Element[]));\n        return [...Array.from((new Set($nodes)).values())].filter((el) => (<HTMLElement>el)?.matches?.(selector));\n    }\n\n    //\n    const handleMutation = (mutation)=>{\n        const observer      = obRef?.deref?.();\n        const addedNodes   = unwrapNodesBySelector(mutation.addedNodes);\n        const removedNodes = unwrapNodesBySelector(mutation.removedNodes);\n\n        //\n        if (addedNodes.length > 0 || removedNodes.length > 0) {\n            cb?.({\n                type: mutation.type,\n                target: mutation.target,\n                attributeName: mutation.attributeName,\n                attributeNamespace: mutation.attributeNamespace,\n                nextSibling: mutation.nextSibling,\n                oldValue: mutation.oldValue,\n                previousSibling: mutation.previousSibling,\n                addedNodes, removedNodes,\n            }, observer);\n        }\n    }\n\n    //\n    const handleCome = (ev)=>{\n        handleMutation({\n            addedNodes: [ev?.target].filter((el)=>!!el),\n            removedNodes: [ev?.relatedTarget].filter((el)=>!!el),\n            type: \"childList\",\n            target: ev?.currentTarget,\n        });\n    }\n\n    //\n    const handleOutCome = (ev)=>{\n        handleMutation({\n            addedNodes: [ev?.relatedTarget].filter((el)=>!!el),\n            removedNodes: [ev?.target].filter((el)=>!!el),\n            type: \"childList\",\n            target: ev?.currentTarget,\n        });\n    }\n\n    //\n    const handleFocusClick = (ev)=>{\n        handleMutation({\n            addedNodes: [ev?.target].filter((el)=>!!el),\n            removedNodes: [ev?.relatedTarget || document?.activeElement].filter((el)=>!!el),\n            type: \"childList\",\n            target: ev?.currentTarget,\n        });\n    }\n\n    // capture: false - from parents to children, true - from children to parents\n    // passive: true - optimal for selector events\n    const factors = {\n        passive: true,\n        capture: false,\n    };\n\n    //\n    if (selector?.includes?.(\":hover\") && selector?.includes?.(\":active\")) {\n        element.addEventListener(\"pointerover\", handleCome, factors);\n        element.addEventListener(\"pointerout\", handleOutCome, factors);\n        element.addEventListener(\"pointerdown\", handleCome, factors);\n        element.addEventListener(\"pointerup\", handleOutCome, factors);\n        element.addEventListener(\"pointercancel\", handleOutCome, factors);\n        return { disconnect: ()=>{\n            element.removeEventListener(\"pointerover\", handleCome, factors);\n            element.removeEventListener(\"pointerout\", handleOutCome, factors);\n            element.removeEventListener(\"pointerdown\", handleCome, factors);\n            element.removeEventListener(\"pointerup\", handleOutCome, factors);\n            element.removeEventListener(\"pointercancel\", handleOutCome, factors);\n        } };\n    }\n\n    //\n    if (selector?.includes?.(\":hover\")) {\n        element.addEventListener(\"pointerover\", handleCome, factors);\n        element.addEventListener(\"pointerout\", handleOutCome, factors);\n        return { disconnect: ()=>{\n            element.removeEventListener(\"pointerover\", handleCome, factors);\n            element.removeEventListener(\"pointerout\", handleOutCome, factors);\n        } };\n    }\n\n    //\n    if (selector?.includes?.(\":active\")) {\n        element.addEventListener(\"pointerdown\", handleCome, factors);\n        element.addEventListener(\"pointerup\", handleOutCome, factors);\n        element.addEventListener(\"pointercancel\", handleOutCome, factors);\n        return { disconnect: ()=>{\n            element.removeEventListener(\"pointerdown\", handleCome, factors);\n            element.removeEventListener(\"pointerup\", handleOutCome, factors);\n            element.removeEventListener(\"pointercancel\", handleOutCome, factors);\n        } };\n    }\n\n    //\n    if (selector?.includes?.(\":focus\") && selector?.includes?.(\":focus-within\") && selector?.includes?.(\":focus-visible\")) {\n        element.addEventListener(\"focusin\", handleCome, factors);\n        element.addEventListener(\"focusout\", handleOutCome, factors);\n        element.addEventListener(\"click\", handleFocusClick, factors);\n        return { disconnect: ()=>{\n            element.removeEventListener(\"focusin\", handleCome, factors);\n            element.removeEventListener(\"focusout\", handleOutCome, factors);\n            element.removeEventListener(\"click\", handleFocusClick, factors);\n        } };\n    }\n\n    //\n    const observer = new MutationObserver((mutationList, observer) => {\n        for (const mutation of mutationList) {\n            if (mutation.type == \"childList\") {\n                handleMutation(mutation);\n            }\n        }\n    });\n\n    //\n    const obRef = new WeakRef(observer);\n    if ((element?.element ?? element) instanceof Node) {\n        observer.observe(element = unwrapFromQuery(element), { childList: true, subtree : true });\n    }\n    const selected = Array.from(element.querySelectorAll(selector));\n    if (selected.length > 0) { cb?.({ addedNodes: selected }, observer); };\n    return observer;\n};\n","import { makeRAFCycle } from \"../agate/Utils\";\n\n//\nconst blobImageMap = new WeakMap(), delayed = new Map<number, Function | null>([]);\nconst sheduler = makeRAFCycle();\n\n//\nconst getImgWidth = (img)=>{\n    return img?.naturalWidth || img?.width || 1;\n}\n\n//\nconst getImgHeight = (img)=>{\n    return img?.naturalHeight || img?.height || 1;\n}\n\n//\nexport const callByFrame = (pointerId, cb)=>{ delayed.set(pointerId, cb); }\nexport const cover = (ctx, img, scale = 1, port, orient = 0) => {\n    const canvas = ctx.canvas;\n    ctx.translate(canvas.width / 2, canvas.height / 2);\n    ctx.rotate((-orient || 0) * (Math.PI * 0.5));\n    ctx.rotate((1 - port) * (Math.PI / 2));\n    ctx.translate(-(getImgWidth(img) / 2) * scale, -(getImgHeight(img) / 2) * scale);\n};\n\n//\nexport const createImageBitmapCache = (blob)=>{\n    if (!blobImageMap.has(blob) && (blob instanceof Blob || blob instanceof File || blob instanceof OffscreenCanvas || blob instanceof ImageBitmap || blob instanceof Image)) {\n        blobImageMap.set(blob, createImageBitmap(blob));\n    }\n    return blobImageMap.get(blob);\n}\n\n//\nconst bindCache = new WeakMap();\nconst bindCached = (cb, ctx)=>{\n    // @ts-ignore\n    return bindCache?.getOrInsertComputed?.(cb, ()=> cb?.bind?.(ctx));\n}\n\n//\nlet UICanvas: any = null;\nif (typeof HTMLCanvasElement != \"undefined\") {\n    UICanvas = class UICanvas extends HTMLCanvasElement {\n        static observedAttributes = [\"data-src\", \"data-orient\"];\n\n        //\n        ctx: CanvasRenderingContext2D | null = null;\n        image: ImageBitmap | null = null;\n        #size: [number, number] = [1, 1];\n        #loading: string | Blob | File = \"\";\n        #ready: string | Blob | File = \"\";\n\n        //\n        get #orient() { return parseInt(this.getAttribute(\"data-orient\") || \"0\") || 0; }\n        set #orient(value: number) { this.setAttribute(\"data-orient\", value.toString()); }\n\n        //\n        attributeChangedCallback(name, _, newValue) {\n            if (name == \"data-src\") { this.#preload(newValue); };\n            if (name == \"data-orient\") { this.#render(this.#ready); };\n        }\n\n        //\n        connectedCallback() {\n            const parent: HTMLElement = this.parentNode as HTMLElement;\n            this.style.setProperty(\"max-inline-size\", \"min(100%, min(100cqi, 100dvi))\");\n            this.style.setProperty(\"max-block-size\", \"min(100%, min(100cqb, 100dvb))\");\n            this.#size = [ // @ts-ignore\n                Math.min(Math.min(Math.max(this.clientWidth || parent?.clientWidth || 1, 1), parent?.clientWidth || 1) * (this.currentCSSZoom || 1), screen?.width || 1) * (devicePixelRatio || 1), // @ts-ignore\n                Math.min(Math.min(Math.max(this.clientHeight || parent?.clientHeight || 1, 1), parent?.clientHeight || 1) * (this.currentCSSZoom || 1), screen?.height || 1) * (devicePixelRatio || 1)\n            ];\n            this.#preload(this.#loading = this.dataset.src || this.#loading);\n        }\n\n        //\n        constructor() {\n            super();\n\n            //\n            const canvas = this as HTMLCanvasElement;\n            const parent = this.parentNode as HTMLElement;\n\n            //\n            const fixSize = () => {\n                const old = this.#size;\n                this.#size = [ // @ts-ignore\n                    Math.min(Math.min(Math.max(this.clientWidth || parent?.clientWidth || 1, 1), parent?.clientWidth || 1) * (this.currentCSSZoom || 1), screen?.width || 1) * (devicePixelRatio || 1), // @ts-ignore\n                    Math.min(Math.min(Math.max(this.clientHeight || parent?.clientHeight || 1, 1), parent?.clientHeight || 1) * (this.currentCSSZoom || 1), screen?.height || 1) * (devicePixelRatio || 1)\n                ];\n\n                //\n                if (old?.[0] != this.#size[0] || old?.[1] != this.#size[1]) {\n                    this.#render(this.#ready);\n                }\n            }\n\n            //\n            sheduler?.shedule?.(() => {\n                this.ctx = canvas.getContext(\"2d\", {\n                    alpha: true,\n                    desynchronized: true,\n                    powerPreference: \"high-performance\",\n                    preserveDrawingBuffer: true\n                }) as CanvasRenderingContext2D;\n\n                //\n                this.inert = true;\n                this.style.objectFit = \"cover\";\n                this.style.objectPosition = \"center\";\n                this.classList.add(\"u-canvas\");\n                this.classList.add(\"u2-canvas\");\n                this.classList.add(\"ui-canvas\");\n\n                //\n                this.style.setProperty(\"max-inline-size\", \"min(100%, min(100cqi, 100dvi))\");\n                this.style.setProperty(\"max-block-size\", \"min(100%, min(100cqb, 100dvb))\");\n\n                //\n                fixSize();\n\n                //\n                new ResizeObserver((entries) => {\n                    for (const entry of entries) {\n                        const box = entry?.devicePixelContentBoxSize?.[0];\n                        if (box) {\n                            const old = this.#size;\n                            this.#size = [ // @ts-ignore\n                                Math.max(/*contentBox.inlineSize * devicePixelRatio*/box.inlineSize || this.width, 1),\n                                Math.max(/*contentBox.blockSize  * devicePixelRatio*/box.blockSize || this.height, 1)\n                            ];\n                            if (old?.[0] != this.#size[0] || old?.[1] != this.#size[1]) {\n                                this.#render(this.#ready);\n                            }\n                        }\n                    }\n                }).observe(this, { box: \"device-pixel-content-box\" });\n\n                //\n                this.#preload(this.#loading = this.dataset.src || this.#loading);\n            });\n        }\n\n        //\n        async $useImageAsSource(blob, ready?: any | null) {\n            ready ||= this.#loading;\n            const img = (blob instanceof ImageBitmap) ? blob : (await createImageBitmapCache(blob).catch(console.warn.bind(console)));\n            if (img && ready == this.#loading) { this.image = img; this.#render(ready); }\n            return blob;\n        }\n\n        //\n        $renderPass(whatIsReady?: File | Blob | string) {\n            const canvas = this, ctx = this.ctx, img = this.image;\n            if (img && ctx && (whatIsReady == this.#loading || !whatIsReady)) {\n                if (whatIsReady) { this.#ready = whatIsReady; };\n                if (this.width != this.#size[0]) { this.width = this.#size[0]; };\n                if (this.height != this.#size[1]) { this.height = this.#size[1]; };\n                this.style.aspectRatio = `${this.width || 1} / ${this.height || 1}`;\n                //this.style.containIntrinsicInlineSize = `${this.width  || 1}px`;\n                //this.style.containIntrinsicBlockSize  = `${this.height || 1}px`;\n\n                //\n                const ox = (this.#orient % 2) || 0;\n                const port = getImgWidth(img) <= getImgHeight(img) ? 1 : 0;\n                const scale = Math.max(\n                    canvas[[\"height\", \"width\"][ox]] / (port ? getImgHeight(img) : getImgWidth(img)),\n                    canvas[[\"width\", \"height\"][ox]] / (port ? getImgWidth(img) : getImgHeight(img))\n                );\n\n                //\n                ctx.save();\n                ctx.clearRect(0, 0, canvas.width, canvas.height); cover(ctx, img, scale, port, this.#orient);\n                ctx.drawImage(img, 0, 0, img.width * scale, img.height * scale);\n                ctx.restore();\n            }\n        }\n\n        //\n        #preload(src) {\n            const ready = src || this.#loading; this.#loading = ready; return fetch(src, {\n            cache: \"force-cache\",\n            mode: \"same-origin\",\n            priority: \"high\",\n        })?.then?.(async (rsp) => this.$useImageAsSource(await rsp.blob(), ready)?.catch(console.warn.bind(console)))?.catch?.(console.warn.bind(console)); }\n        #render(whatIsReady?: File | Blob | string) {\n            const ctx = this.ctx, img = this.image;\n            if (img && ctx && (whatIsReady == this.#loading || !whatIsReady)) { sheduler?.shedule?.(bindCached(this.$renderPass, this)); }\n        }\n    }\n} else {\n    UICanvas = class UICanvas {\n        constructor() { }\n        $renderPass(whatIsReady?: File | Blob | string) { }\n        $useImageAsSource(blob, ready?: any | null) { return blob; }\n        #preload(src) { return Promise.resolve(); }\n        #render(whatIsReady?: File | Blob | string) { }\n        #orient: number = 0;\n        #loading: string | Blob | File = \"\";\n        #ready: string | Blob | File = \"\";\n        #size: [number, number] = [1, 1];\n        ctx: CanvasRenderingContext2D | null = null;\n        image: ImageBitmap | null = null;\n    }\n}\n\n//\nexport { UICanvas };\nexport default UICanvas;\n\n//\ntry { customElements.define('ui-canvas', UICanvas, {extends: 'canvas'}); } catch(e) {};\n","import { camelToKebab, hasValue, isValidNumber, tryStringAsNumber } from \"fest/core\";\n\n//\nconst OWNER = \"DOM\",\n    styleElement = typeof document != \"undefined\" ? document.createElement(\"style\") : null;\n\n//\nif (styleElement) {\n    typeof document != \"undefined\" ? document.querySelector(\"head\")?.appendChild?.(styleElement) : null; styleElement.dataset.owner = OWNER;\n}\n\n//\nexport type  StyleTuple    = [selector: string, sheet: object];\nexport const setStyleURL   = (base: [any, any], url: string, layer: string = \"\")=>{ base[0][base[1]] = (base[1] == \"innerHTML\") ? `@import url(\"${url}\") ${layer && (typeof layer == \"string\") ? `layer(${layer})` : \"\"};` : url; };\nexport const setStyleRules = (classes: StyleTuple[]) => { return classes?.map?.((args) => setStyleRule(...args)); };\nexport const getStyleLayer = (layerName, sheet?)=>{\n    sheet ||= styleElement?.sheet;\n\n    //    @layer\n    let layerRuleIndex = Array.from(sheet?.cssRules || []).findIndex((rule) => (rule instanceof CSSLayerBlockRule) && rule?.name === layerName);\n    let layerRule;\n\n    //   \n    if (layerRuleIndex === -1 && sheet)\n        { layerRule = sheet?.cssRules?.[layerRuleIndex = sheet.insertRule(`@layer ${layerName} {}`)]; } else\n        { layerRule = sheet?.cssRules?.[layerRuleIndex]; }\n\n    //\n    return layerRule;\n}\n\n//\nexport const getStyleRule = (selector, sheet?, layerName: string|null = \"ux-query\", basis: any = null) => {\n    const root = basis instanceof ShadowRoot ? basis : (basis?.getRootNode ? basis.getRootNode({ composed: true }) : typeof document != \"undefined\" ? document.documentElement : null);\n\n    // Making element defined for CSS query\n    const uqid = (root instanceof ShadowRoot || root instanceof HTMLDocument) ? \"\" : (basis?.getAttribute?.(\"data-style-id\") || (typeof crypto != \"undefined\" ? crypto?.randomUUID?.() : \"\"));\n    const usel = root instanceof HTMLDocument ? \":root\" : (root instanceof ShadowRoot ? \":host\" : `[data-style-id=\"${uqid}\"]`);\n    basis?.setAttribute?.(\"data-style-id\", uqid);\n\n    //\n    let $styleElement: any;// = styleElement;\n    if (root instanceof ShadowRoot) {\n        if (!($styleElement = root.querySelector('style'))) {\n            $styleElement = typeof document != \"undefined\" ? document.createElement('style[data-ux-query]') : null;\n            $styleElement.setAttribute('data-ux-query', '');\n            root.appendChild($styleElement);\n        }\n    } else { $styleElement = styleElement; }\n\n    //\n    sheet ||= $styleElement?.sheet || sheet;\n\n    //\n    if (!layerName) {\n        let ruleId = Array.from(sheet?.cssRules || []).findIndex((rule) => rule instanceof CSSStyleRule && rule.selectorText?.trim?.()?.endsWith?.(selector?.trim?.() ?? \"\"));\n        if (ruleId === -1 && sheet) { ruleId = sheet?.insertRule?.(`${usel || \"\"} ${selector}`?.trim?.() + \" {}\"); }\n        return sheet?.cssRules?.[ruleId];\n    }\n\n    //\n    return getStyleRule(selector, getStyleLayer(layerName, sheet), null, basis);\n};\n\n//\nconst hasTypedOM =\n    typeof CSSStyleValue !== \"undefined\" &&\n    typeof CSSUnitValue !== \"undefined\";\n\nconst isStyleValue = (val: any): val is CSSStyleValue =>\n    hasTypedOM && val instanceof CSSStyleValue;\n\nconst isUnitValue = (val: any): val is CSSUnitValue =>\n    hasTypedOM && val instanceof CSSUnitValue;\n\nconst setPropertyIfNotEqual = (\n    styleRef: CSSStyleDeclaration,\n    kebab: string,\n    value: string | null,\n    importance = \"\"\n) => {\n    if (!styleRef || !kebab) return;\n\n    if (value == null) {\n        if (styleRef.getPropertyValue(kebab) !== \"\") {\n        styleRef.removeProperty(kebab);\n        }\n        return;\n    }\n\n    const old = styleRef.getPropertyValue(kebab);\n    if (old !== value) {\n        styleRef.setProperty(kebab, value, importance);\n    }\n};\n\n//\nexport const setStylePropertyTyped = (\n    element?: HTMLElement | null,\n    name?: string,\n    value?: any,\n    importance = \"\"\n) => {\n    if (!element || !name) return element;\n\n    const kebab = camelToKebab(name);\n    const styleRef = element.style;\n    const styleMapRef: StylePropertyMap | undefined =\n        (element as any).attributeStyleMap ?? (element as any).styleMap;\n\n    //   Typed OM  styleMap     \n    if (!hasTypedOM || !styleMapRef) {\n        return setStylePropertyFallback(element, name, value, importance);\n    }\n\n    //  ref\n    let val: any = hasValue(value) && !(isStyleValue(value) || isUnitValue(value)) ? value?.value : value;\n\n    // null/undefined ->  \n    if (val == null) {\n        styleMapRef.delete?.(kebab);\n        //       style\n        if (styleRef) {\n            setPropertyIfNotEqual(styleRef, kebab, null, importance);\n        }\n        return element;\n    }\n\n    //  CSSStyleValue\n    if (isStyleValue(val)) {\n        const old = styleMapRef.get(kebab);\n        //   value/unit,    \n        if (isUnitValue(val) && isUnitValue(old)) {\n            if (old.value === val.value && old.unit === val.unit) {\n                return element; //  \n            }\n        } else if (old === val) {\n            return element; //   ,   \n        }\n        styleMapRef.set(kebab, val); //    \n        return element;\n    }\n\n    //  -> CSSUnitValue('number')   \n    if (typeof val === \"number\") {\n        //   :\n        // 1)  CSS.px / CSS.number,   Typed OM \n        // 2)   string,    CSSUnitValue  \n        //\n        //   CSS.number ( ):\n        if ((CSS as any)?.number && !kebab.startsWith(\"--\")) {\n            const newVal: CSSUnitValue = (CSS as any).number(val);\n            const old = styleMapRef.get(kebab);\n            if (isUnitValue(old) && old.value === newVal.value && old.unit === newVal.unit) {\n                return element;\n            }\n            styleMapRef.set(kebab, newVal);\n            return element;\n        } else {\n            // fallback   \n            setPropertyIfNotEqual(styleRef, kebab, String(val), importance);\n            return element;\n        }\n    }\n\n    //    :  Typed OM -> fallback  \n    if (typeof val === \"string\" && !isStyleValue(val)) {\n        const maybeNum = tryStringAsNumber(val);\n        if (typeof maybeNum === \"number\" && (CSS as any)?.number && !kebab.startsWith(\"--\")) {\n            const newVal: CSSUnitValue = (CSS as any).number(maybeNum);\n            const old = styleMapRef.get(kebab);\n            if (isUnitValue(old) && old.value === newVal.value && old.unit === newVal.unit) {\n                return element;\n            }\n            styleMapRef.set(kebab, newVal);\n            return element;\n        } else {\n            //   \n            setPropertyIfNotEqual(styleRef, kebab, val, importance);\n            return element;\n        }\n    }\n\n    //    -> \n    setPropertyIfNotEqual(styleRef, kebab, String(val), importance);\n    return element;\n};\n\n//\nexport const setStylePropertyFallback = (\n    element?: HTMLElement | null,\n    name?: string,\n    value?: any,\n    importance = \"\"\n) => {\n    if (!element || !name) return element;\n\n    const kebab = camelToKebab(name);\n    const styleRef = element.style;\n    if (!styleRef) return element;\n\n    //  ref,  \n    let val: any = (hasValue(value) && !(isStyleValue(value) || isUnitValue(value))) ? value?.value : value;\n\n    //    \n    if (typeof val === \"string\" && !isStyleValue(val)) {\n        val = tryStringAsNumber(val) ?? val;\n    }\n\n    // null/undefined  \n    if (val == null) {\n        setPropertyIfNotEqual(styleRef, kebab, null, importance);\n        return element;\n    }\n\n    // CSSStyleValue -> \n    if (isStyleValue(val)) {\n        setPropertyIfNotEqual(styleRef, kebab, String(val), importance);\n        return element;\n    }\n\n    //  ->  (     'px'   )\n    if (typeof val === \"number\") {\n        setPropertyIfNotEqual(styleRef, kebab, String(val), importance);\n        return element;\n    }\n\n    //   -> \n    setPropertyIfNotEqual(styleRef, kebab, String(val), importance);\n    return element;\n};\n\n//\nconst promiseOrDirect = (promise: any|Promise<any>, cb: (...args: any[]) => any) => {\n    if (typeof promise?.then == \"function\") { return promise?.then?.(cb); }\n    return cb(promise);\n}\n\n//\nconst blobURLMap = new WeakMap<Blob | File, string | Promise<string>>();\nconst cacheMap = new Map<string, string | Promise<string>>();\n\n//\nexport const fetchAndCache = (url: string | Blob | File): any => {\n    if (!url) return null;\n\n    //\n    if (cacheMap.has(url as string)) { return cacheMap.get(url as string); }\n\n    //\n    if (url instanceof Blob || (url as any) instanceof File) {\n        if (blobURLMap.has(url as Blob | File)) { return blobURLMap.get(url as Blob | File); }\n        const burl = URL.createObjectURL(url as Blob | File);\n        blobURLMap.set(url as Blob | File, burl);\n        cacheMap.set(burl as string, burl);\n        return burl;\n    }\n\n    //\n    if (URL.canParse(url as string) || url?.trim?.()?.startsWith?.(\"./\")) {\n        const promised = fetch(url?.replace?.(\"?url\", \"?raw\"), {\n            cache: \"force-cache\",\n            mode: \"same-origin\",\n            priority: \"high\",\n\n        })?.then?.(async (res: Response) => {\n            const blob = await res.blob();\n            const burl = URL.createObjectURL(blob);\n            blobURLMap.set(blob as Blob | File, burl);\n            cacheMap.set(url as string, burl);\n            cacheMap.set(burl as string, burl);\n            return burl;\n        });\n\n        //\n        cacheMap.set(url as string, promised as Promise<string>);\n        return promised;\n    }\n\n    //\n    if (typeof url == \"string\") {\n        const blob = new Blob([url], { type: \"text/css\" });\n        const burl = URL.createObjectURL(blob);\n        blobURLMap.set(blob as Blob | File, burl);\n        //cacheMap.set(url as string, burl);\n        cacheMap.set(burl as string, burl);\n        return burl;\n    }\n\n    //\n    return url as string;\n}\n\n//\nconst cacheContentMap = new Map<string, string | Promise<string>>();\nconst cacheBlobContentMap = new WeakMap<Blob | File, string | Promise<string>>();\nexport const fetchAsInline = (url: string | Blob | File): Promise<string>|string => {\n    if (!url) return \"\";\n\n    //\n    if (cacheContentMap.has(url as string)) { return cacheContentMap.get(url as string) ?? \"\"; }\n\n    //\n    if (url instanceof Blob || (url as any) instanceof File) {\n        if (cacheBlobContentMap.has(url as Blob | File)) { return cacheBlobContentMap.get(url as Blob | File) ?? \"\"; }\n\n        //\n        const promised = (url as any)?.text?.()?.then?.(text => {\n            cacheBlobContentMap.set(url as Blob | File, text);\n            return text;\n        });\n        cacheBlobContentMap.set(url as Blob | File, promised);\n        return promised;\n    }\n\n    //\n    if (URL.canParse(url as string) || url?.trim?.()?.startsWith?.(\"./\")) {\n        const promised = fetch(url?.replace?.(\"?url\", \"?raw\"), {\n            cache: \"force-cache\",\n            mode: \"same-origin\",\n            priority: \"high\",\n\n        })?.then?.(async (res: Response) => {\n            const text = await res.text();\n            cacheContentMap.set(url as string, text);\n            return text;\n        });\n        cacheContentMap.set(url as string, promised);\n        return promised;\n    }\n\n    //\n    if (typeof url == \"string\") {\n        cacheContentMap.set(url as string, url);\n        return url;\n    }\n\n    //\n    return url as string;\n}\n\n//\nconst adoptedSelectorMap = new Map<string, CSSStyleSheet>();\nconst adoptedShadowSelectorMap = new WeakMap<ShadowRoot, Map<string, CSSStyleSheet>>();\nconst adoptedLayerMap = new Map<string, CSSLayerBlockRule>();\nconst adoptedShadowLayerMap = new WeakMap<ShadowRoot, Map<string, CSSLayerBlockRule>>();\n\n//\nexport const getAdoptedStyleRule = (selector: string, layerName: string | null = \"ux-query\", basis: any = null) => {\n    if (!selector) return null;\n\n    const root = basis instanceof ShadowRoot ? basis : (basis?.getRootNode ? basis.getRootNode({ composed: true }) : null);\n    const isShadowRoot = root instanceof ShadowRoot;\n    const targetAdoptedSheets = isShadowRoot ? root.adoptedStyleSheets : (typeof document != \"undefined\" ? document.adoptedStyleSheets : null);\n\n    if (!targetAdoptedSheets) return null;\n\n    const selectorKey = `${layerName || \"\"}:${selector}`;\n    let sheet: CSSStyleSheet | undefined;\n\n    if (isShadowRoot) {\n        let shadowMap = adoptedShadowSelectorMap.get(root);\n        if (!shadowMap) {\n            shadowMap = new Map();\n            adoptedShadowSelectorMap.set(root, shadowMap);\n        }\n        sheet = shadowMap.get(selectorKey);\n\n        if (!sheet) {\n            sheet = new CSSStyleSheet();\n            shadowMap.set(selectorKey, sheet);\n\n            if (!targetAdoptedSheets.includes(sheet)) {\n                targetAdoptedSheets.push(sheet);\n            }\n        }\n    } else {\n        sheet = adoptedSelectorMap.get(selectorKey);\n\n        if (!sheet) {\n            sheet = new CSSStyleSheet();\n            adoptedSelectorMap.set(selectorKey, sheet);\n\n            if (!targetAdoptedSheets.includes(sheet)) {\n                targetAdoptedSheets.push(sheet);\n            }\n        }\n    }\n\n    if (layerName) {\n        let layerRule: CSSLayerBlockRule | undefined;\n\n        if (isShadowRoot) {\n            let shadowLayerMap = adoptedShadowLayerMap.get(root);\n            if (!shadowLayerMap) {\n                shadowLayerMap = new Map();\n                adoptedShadowLayerMap.set(root, shadowLayerMap);\n            }\n            layerRule = shadowLayerMap.get(layerName);\n        } else {\n            layerRule = adoptedLayerMap.get(layerName);\n        }\n\n        if (!layerRule) {\n            const rules = Array.from(sheet.cssRules || []);\n            const layerIndex = rules.findIndex((rule) =>\n                rule instanceof CSSLayerBlockRule && rule.name === layerName\n            );\n            if (layerIndex === -1) {\n                try {\n                    sheet.insertRule(`@layer ${layerName} {}`, sheet.cssRules.length);\n                    const newRule = sheet.cssRules[sheet.cssRules.length - 1];\n                    if (newRule instanceof CSSLayerBlockRule) {\n                        layerRule = newRule;\n                    }\n                } catch (e) {\n                    layerRule = undefined;\n                }\n            } else {\n                layerRule = rules[layerIndex] as CSSLayerBlockRule;\n            }\n            if (layerRule) {\n                if (isShadowRoot) {\n                    let shadowLayerMap = adoptedShadowLayerMap.get(root);\n                    if (!shadowLayerMap) {\n                        shadowLayerMap = new Map();\n                        adoptedShadowLayerMap.set(root, shadowLayerMap);\n                    }\n                    shadowLayerMap.set(layerName, layerRule);\n                } else {\n                    adoptedLayerMap.set(layerName, layerRule);\n                }\n            }\n        }\n\n        if (layerRule) {\n            const layerRules = Array.from(layerRule.cssRules || []);\n            let layerRuleIndex = layerRules.findIndex((r) =>\n                r instanceof CSSStyleRule && r.selectorText?.trim?.() === selector?.trim?.()\n            );\n            if (layerRuleIndex === -1) {\n                try {\n                    layerRuleIndex = layerRule.insertRule(`${selector} {}`, layerRule.cssRules.length);\n                } catch (e) {\n                    return null;\n                }\n            }\n            return layerRule.cssRules[layerRuleIndex] as CSSStyleRule;\n        }\n    }\n\n    const rules = Array.from(sheet.cssRules || []);\n    let ruleIndex = rules.findIndex((rule) =>\n        rule instanceof CSSStyleRule && rule.selectorText?.trim?.() === selector?.trim?.()\n    );\n\n    if (ruleIndex === -1) {\n        try {\n            ruleIndex = sheet.insertRule(`${selector} {}`, sheet.cssRules.length);\n        } catch (e) {\n            return null;\n        }\n    }\n\n    const rule = sheet.cssRules[ruleIndex];\n    if (rule instanceof CSSStyleRule) {\n        return rule;\n    }\n\n    return null;\n};\n\n//\nexport const setStyleProperty = (element?: HTMLElement | null, name?: string, value?: any, importance = \"\") => {\n    return hasTypedOM ? setStylePropertyTyped(element, name, value, importance) : setStylePropertyFallback(element, name, value, importance);\n}\n\n//\nexport const setStyleInRule = (selector: string, name: string, value: any) => {\n    return setStyleProperty(getStyleRule(selector), name, value);\n};\n\n//\nexport const setStyleRule = (selector: string, sheet: object) => {\n    const rule = getStyleRule(selector);\n    Object.entries(sheet).forEach(([propName, propValue]) => setStyleProperty(rule, propName, propValue));\n    return rule;\n};\n\n//\nexport const hash = async (string: string|ArrayBuffer|Blob|File) => {\n    const hashBuffer = await crypto?.subtle?.digest('SHA-256', typeof string == \"string\" ? new TextEncoder().encode(string) : (string instanceof ArrayBuffer ? string : (await ((string as any)?.arrayBuffer?.()))));\n    return \"sha256-\" + btoa(String.fromCharCode.apply(null, new Uint8Array(hashBuffer) as unknown as number[]));\n};\n\n//\nexport const loadStyleSheet = (inline: string|File|Blob, base?: [any, any], layer: string = \"\", integrity?: string|Promise<string>)=>{ // @ts-ignore\n    const load = fetchAndCache(inline);\n    const url = typeof inline == \"string\" ? (URL.canParse(inline) ? inline : load) : load;\n\n    //\n    if (base?.[0]) base[0].fetchPriority = \"high\";\n    if (base && url && typeof url == \"string\") { setStyleURL(base, url, layer); };\n    if (base?.[0] && (!URL.canParse(inline as string) || integrity) && base?.[0] instanceof HTMLLinkElement) {\n        const I: any = null;//(integrity ?? (typeof inline == \"string\" ? hash(inline) : null));\n        //if (typeof I?.then == \"function\") { I?.then?.((H) => base?.[0]?.setAttribute?.(\"integrity\", H)); } else\n            //if (I) { base?.[0]?.setAttribute?.(\"integrity\", I as string); }\n    }\n\n    //\n    return promiseOrDirect(load, (res?: any | null) => {\n        if (base?.[0] && res) {\n            setStyleURL(base, res, layer);\n            base?.[0].setAttribute(\"loaded\", \"\");\n        }\n    })?.catch?.((error: any) => { console.warn(\"Failed to load style sheet:\", error); });\n\n    //\n    return base?.[0];\n};\n\n//\nexport const loadBlobStyle = (inline: string) => {\n    const style = typeof document != \"undefined\" ? document.createElement(\"link\") : null;\n    if (style) style.fetchPriority = \"high\";\n    if (style) {\n        Object.assign(style, { rel: \"stylesheet\", type: \"text/css\", crossOrigin: \"same-origin\" }); style.dataset.owner = OWNER; loadStyleSheet(inline, [style, \"href\"]); typeof document != \"undefined\" ? document.head.append(style) : null; return style;\n    };\n    return null;\n};\n\n//\nexport const loadInlineStyle = (inline: string, rootElement: any = typeof document != \"undefined\" ? document?.head : null, layer: string = \"\") => {\n    //if (!rootElement) return;\n    const PLACE = (rootElement?.querySelector?.(\"head\") ?? rootElement); if (typeof HTMLHeadElement != \"undefined\" && PLACE instanceof HTMLHeadElement) { return loadBlobStyle(inline); } // @ts-ignore\n    const style = typeof document != \"undefined\" ? document.createElement(\"style\") : null; if (style) { style.dataset.owner = OWNER; loadStyleSheet(inline, [style, \"innerHTML\"], layer); PLACE?.prepend?.(style); return style; }\n    return null;\n};\n\n//\nexport const setProperty = (target, name, value, importance = \"\")=>{\n    return setStyleProperty(target, name, value, importance);\n}\n\n//\nexport const preloadStyle = (styles: string)=>{\n    // @ts-ignore\n    return loadAsAdopted(styles, \"ux-layer\");\n}\n\n//\nexport const adoptedMap = new Map<string, CSSStyleSheet>();\nexport const adoptedBlobMap = new WeakMap<Blob | File, CSSStyleSheet>();\n\n//\nlet layerCounter = 0;\nexport const loadAsAdopted = (styles: string | Blob | File, layerName: string | null = null) => {\n    if (typeof styles == \"string\" && adoptedMap?.has?.(styles)) { return adoptedMap.get(styles); }\n    if ((styles instanceof Blob || (styles as any) instanceof File) && adoptedBlobMap?.has?.(styles as Blob | File)) { return adoptedBlobMap.get(styles as Blob | File); }\n\n    //\n    if (!styles) return null; //@ts-ignore\n    const sheet = (typeof styles == \"string\" ?  //@ts-ignore\n        adoptedMap.getOrInsertComputed(styles, (styles) => new CSSStyleSheet() as CSSStyleSheet) :  //@ts-ignore\n        adoptedBlobMap.getOrInsertComputed(styles as Blob | File, (styles) => new CSSStyleSheet() as CSSStyleSheet));\n\n    //\n    //if (!layerName) { layerName = `ux-layer-${layerCounter++}`; }\n    if (typeof document != \"undefined\" && document.adoptedStyleSheets && !document.adoptedStyleSheets.includes(sheet as unknown as CSSStyleSheet)) {\n    document.adoptedStyleSheets.push(sheet as unknown as CSSStyleSheet);\n    }\n\n    //\n    if (typeof styles == \"string\" && !URL.canParse(styles)) {\n        const layerWrapped = layerName ? `@layer ${layerName} { ${styles} }` : styles;\n        adoptedMap.set(styles, sheet);\n        // Avoid blocking the main thread on huge styles (veela runtime can be big).\n        if (layerWrapped.length > 50_000 && typeof (sheet as any).replace === \"function\") {\n            (sheet as any).replace(layerWrapped).catch?.(() => {});\n        } else {\n        sheet.replaceSync(layerWrapped);\n        }\n        return sheet;\n    } else {\n        promiseOrDirect(fetchAsInline(styles), (cached: string) => {\n            adoptedMap.set(cached, sheet);\n            if (cached) {\n                const layerWrapped = layerName ? `@layer ${layerName} { ${cached} }` : cached;\n                if (layerWrapped.length > 50_000 && typeof (sheet as any).replace === \"function\") {\n                    (sheet as any).replace(layerWrapped).catch?.(() => {});\n                } else {\n                sheet.replaceSync(layerWrapped);\n                }\n                return sheet;\n            };\n        });\n    }\n\n    //\n    return sheet as CSSStyleSheet;\n}\n\n//\nexport const removeAdopted = (sheet: CSSStyleSheet | string | null | undefined): boolean => {\n    if (!sheet) return false;\n    const target = typeof sheet === \"string\" ? adoptedMap.get(sheet) : sheet;\n    if (!target || typeof document === \"undefined\") return false;\n    const sheets = document.adoptedStyleSheets;\n    const idx = sheets.indexOf(target);\n    if (idx !== -1) {\n        sheets.splice(idx, 1);\n        return true;\n    }\n    return false;\n};\n\n//\nexport type Point = DOMPoint;\nexport const parseOrigin = (origin: string, element: Element): Point => { const values = origin.split(' '); return new DOMPoint(parseLength(values[0], () => element.clientWidth), parseLength(values[1], () => element.clientHeight)); } // @ts-ignore\nexport const parseLength = (value: string, size: ()=>number): number => { if (value.endsWith('%')) { return (parseFloat(value) / 100) * size(); }; return parseFloat(value); }\n\n//\nexport const getTransform = (el)=>{\n    if (el?.computedStyleMap) {\n        const styleMap = el.computedStyleMap(), transform = styleMap.get(\"transform\"), matrix = transform?.toMatrix?.();\n        if (matrix) return matrix;\n    } else\n        // @ts-ignore\n    if (el) { const style = getComputedStyle(el); return new DOMMatrix(style?.getPropertyValue?.(\"transform\")); }\n    return new DOMMatrix();\n}\n\n//\nexport const getTransformOrigin = (el)=>{\n    // @ts-ignore\n    const style = getComputedStyle(el), cssOrigin = style?.getPropertyValue?.(\"transform-origin\") || `50% 50%`;\n    return parseOrigin(cssOrigin, el);\n}\n\n//\nexport const getPropertyValue = (src, name)=>{\n    if (\"computedStyleMap\" in src) {\n        const val = src?.computedStyleMap?.()?.get(name);\n        return val instanceof CSSUnitValue ? (val?.value || 0) : val?.toString?.();\n    }\n    // @ts-ignore\n    if (src instanceof HTMLElement) { const cs = getComputedStyle?.(src, \"\"); return (parseFloat(cs?.getPropertyValue?.(name)?.replace?.(\"px\", \"\")) || 0); }\n    return (parseFloat((src?.style ?? src).getPropertyValue?.(name)?.replace?.(\"px\", \"\")) || 0) || 0;\n}\n\n//\nexport const getElementZoom = (element: Element): number => {\n    let zoom = 1, currentElement: Element | null = element;\n    while (currentElement) {\n        if ('currentCSSZoom' in (currentElement as any)) {\n            const currentCSSZoom = (currentElement as any).currentCSSZoom;\n            if (typeof currentCSSZoom === 'number') { return (zoom *= currentCSSZoom); }\n        }\n\n        //\n        const style = getComputedStyle(currentElement); // @ts-ignore\n        if  (style.zoom && style.zoom !== 'normal') { return (zoom *= parseFloat(style.zoom)); } // @ts-ignore\n        if ((style.zoom && style.zoom !== 'normal') || 'currentCSSZoom' in (currentElement as any)) { return zoom; }\n        currentElement = (currentElement as HTMLElement)?.offsetParent ?? currentElement?.parentElement;\n    }\n    return zoom;\n}\n\n//\nexport const getPxValue = (element, name) => { return getPropertyValue?.(element, name); }\nexport const getPadding = (src, axis)=>{\n    if (axis == \"inline\") { return (getPropertyValue(src, \"padding-inline-start\") + getPropertyValue(src, \"padding-inline-end\")); };\n    return (getPropertyValue(src, \"padding-block-start\") + getPropertyValue(src, \"padding-block-end\"));\n}","export const boundBehaviors = new WeakMap();\n\n// currently, behaviors not triggers when initialized\nexport const bindBehavior = (element, behSet, behavior)=>{\n    const weak = new WeakRef(element);\n    if (!behSet.has(behavior)) { behSet.add(behavior); }\n    return element;\n}\n\n// behavior ([value, prop, old], [element, store, storeSets])=>{}\nexport const reflectBehaviors = (element, behaviors)=>{\n    if (!element) return;\n    if (behaviors) {\n        // !experimental `getOrInsert` feature!\n        // @ts-ignore\n        const behSet = boundBehaviors.getOrInsert(element, new Set());\n        [...(behaviors?.values?.() || [])].map((e)=>bindBehavior(element, behSet, e));\n    }\n    return element;\n}\n","export const namedStoreMaps = new Map<string, WeakMap<any, any>>(); // Map<name, WeakMap<element, obj>>\n\n//\nexport const getStoresOfElement = ( map: Map<any, WeakMap<any, any>>, element: any): Map<any, any> => {\n    const E = [...map.entries()||[]] as [any, any][];\n    return new Map<any, any>((E?.map?.(([n,m])=>[n,m?.get?.(element)])?.filter?.(([n,e])=>!!e)||[]) as any);;\n}\n\n//\nexport const bindStore = (element, name, obj) => {\n    let weakMap = namedStoreMaps.get(name);\n    if (!weakMap) {\n        weakMap = new WeakMap();\n        namedStoreMaps.set(name, weakMap);\n    }\n    if (!weakMap.has(element)) {\n        weakMap.set(element, obj);\n        //if (obj?.behavior) bindBeh(new WeakRef(element), [name, obj], obj?.behavior);\n    }\n    return element;\n};\n\n//\nexport const reflectStores = (element, stores) => {\n    if (!element || !stores) return;\n    for (const [name, obj] of stores.entries()) {\n        bindStore(element, name, obj);\n    }\n    return element;\n};\n","import { observeAttributeBySelector, observeBySelector } from \"./Observer\";\nimport { getStoresOfElement, namedStoreMaps } from \"./Store\";\nimport { boundBehaviors } from \"./Behavior\";\n\n// mixin { connect: (element, { ... })=>{},  disconnect: (element, { ... }): ()=>{}}\nexport const reflectMixins = (element, mixins)=>{\n    if (!element) return;\n    if (mixins) {\n        const mixinSet = boundMixinSet?.get?.(element) ?? new WeakSet();\n        if (!boundMixinSet?.has?.(element)) { boundMixinSet?.set?.(element, mixinSet); }\n        [...(mixins?.values?.() || [])].map((e)=>bindMixins(element, e, mixinSet));\n    }\n    return element;\n}\n\n//\nexport const getElementRelated = (element)=>{\n    return {\n        storeSet: getStoresOfElement(namedStoreMaps, element),\n        mixinSet: boundMixinSet?.get?.(element),\n        behaviorSet: boundBehaviors?.get?.(element)\n    }\n}\n\n//\nexport const bindMixins = (element, mixin, mixSet?)=>{\n    const wel = new WeakRef(element); mixSet ||= boundMixinSet?.get?.(element);\n    if (!mixSet?.has?.(mixin)) { mixSet?.add?.(mixin); mixinElements?.get?.(mixin)?.add?.(element);\n        if (mixin.name) { element?.setAttribute?.(\"data-mixin\", [...(element?.getAttribute?.(\"data-mixin\")?.split?.(\" \") || []), mixin.name].filter((n)=>!!n).join(\" \")); }\n        mixin?.connect?.(wel, mixin, getElementRelated(element));\n    }\n    return element;\n}\n\n// element <--> mixin-set\nexport const boundMixinSet  = new WeakMap<any, WeakSet<any>>();\nexport const mixinElements  = new WeakMap<any, any>();\n\n// mixin-set <--> naming\nexport const mixinRegistry  = new Map<string, any>();\nexport const mixinNamespace = new WeakMap<any, string>;\n\n//\nexport const updateMixinAttributes = (element, mixin)=>{\n    if (typeof mixin == \"string\") { mixin = mixinRegistry?.get?.(mixin); }\n    const names  = new Set([...(element?.getAttribute?.(\"data-mixin\")?.split?.(\" \") || [])]);\n    const mixins = new Set([...names].map((n)=>mixinRegistry?.get?.(n)).filter((m)=>!!m));\n    const mixinSet = boundMixinSet?.get?.(element) ?? new WeakSet();\n\n    //\n    if (!mixinElements?.has?.(mixin)) { mixinElements?.set?.(mixin, new WeakSet()); }\n    if (!boundMixinSet?.has?.(element)) { boundMixinSet?.set?.(element, mixinSet); }\n\n    //\n    const wel = new WeakRef(element);\n    if (!mixinSet?.has?.(mixin)) {\n        if (!mixins.has(mixin)) { mixin?.disconnect?.(wel, mixin, getElementRelated(element)); }\n        if ( mixins.has(mixin) || !mixinElements?.get?.(mixin)?.has?.(element)) { mixin?.connect?.(wel, mixin, getElementRelated(element));\n            names.add(mixinNamespace?.get?.(mixin)); mixinSet?.add?.(mixin);\n            element?.setAttribute?.(\"data-mixin\", [...names].filter((n)=>!!n).join(\" \"));\n        }\n        mixinElements?.get?.(mixin)?.add?.(element);\n    }\n    if (mixinSet?.has?.(mixin)) {\n        if (!mixins.has(mixin)) { mixinSet?.delete?.(mixin); mixin?.disconnect?.(wel, mixin, getElementRelated(element)); }\n    }\n}\n\n//\nexport const roots   = new Set<any>();\nexport const addRoot = (root: any = typeof document != \"undefined\" ? document : null) => {\n    if (!root) return;\n    if (!roots?.has?.(root)) {\n        roots?.add?.(root);\n\n        // as attribute (reacts on attribute changes)\n        observeAttributeBySelector(root, \"*\", \"data-mixin\", (mutation) => updateAllMixins(mutation.target));\n\n        // as DOM nodes (reacts on DOM changes)\n        observeBySelector(root, \"[data-mixin]\", (mutation) => {\n            for (const element of mutation.addedNodes) {\n                if (element instanceof HTMLElement) {\n                    updateAllMixins(element);\n                }\n            }\n        });\n    }\n    return root;\n};\n\n//\nexport const updateAllMixins = (element)=>{\n    const names  = new Set([...(element?.getAttribute?.(\"data-mixin\")?.split?.(\" \") || [])]);\n    const mixins = new Set([...names].map((n)=>mixinRegistry?.get?.(n)).filter((m)=>!!m));\n    [...mixins]?.map?.((m)=>updateMixinAttributes(element, m));\n}\n\n//\nexport const updateMixinAttributesAll = (elements, mixin)=>{ elements.forEach((e)=>(mixin ? updateMixinAttributes(e, mixin) : updateAllMixins(e))) }\nexport const updateMixinAttributesAllInRoots = (mixin) => {\n    for (const root of roots) { updateMixinAttributesAll(root?.querySelectorAll?.(\"[data-mixin]\"), mixin); }\n}\n\n//\nexport const nameRegistryF = new FinalizationRegistry((key: any)=>{ mixinRegistry?.delete?.(key); });\nexport const registerMixin = (name, mixin) => {\n    if (!mixinNamespace?.has?.(mixin)) {\n        const key = name?.trim?.();\n        if (key) {\n            mixinNamespace?.set?.(mixin, key);\n            mixinRegistry?.set?.(key, mixin);\n            nameRegistryF?.register?.(mixin, key);\n            updateMixinAttributesAllInRoots(mixin);\n        }\n    }\n};\n\n//\naddRoot(typeof document != \"undefined\" ? document : null);\n\n//\nexport class DOMMixin {\n    constructor(name: string|null = null) { if (name) { registerMixin(name, this); } }\n\n    //\n    public connect(wElement, wSelf, related) { return this; }\n    public disconnect(wElement, wSelf, related) { return this; }\n\n    //\n    public storeForElement(element) { return namedStoreMaps.get(this.name || \"\")?.get?.(element); };\n    public relatedForElement(element) { return getElementRelated(element); }\n\n    //\n    get elements() { return mixinElements?.get?.(this); }\n    get storage() { return namedStoreMaps?.get?.(this.name || \"\"); }\n    get name() { return mixinNamespace?.get?.(this); }\n}\n","import { setStyleProperty } from \"./Style\";\nimport { camelToKebab, DatasetValue, hasValue, isVal, isValueUnit, kebabToCamel, normalizePrimitive, $avoidTrigger } from \"fest/core\";\n\n//\nexport const handleHidden = (element, _, visible) => {\n    const $ref: any = visible;\n    if (hasValue(visible)) { visible = visible.value };\n    const isVisible = (visible = normalizePrimitive(visible)) != null && visible !== false;\n\n    //\n    $avoidTrigger($ref, ()=>{\n        if (element instanceof HTMLInputElement) { element.hidden = !isVisible; } else\n            { if (isVisible) { element?.removeAttribute?.(\"data-hidden\"); } else { element?.setAttribute?.(\"data-hidden\", \"\"); } }\n    });\n\n    //\n    return element;\n}\n\n//\nexport const handleProperty = (el?: HTMLElement|null, prop?: string|null, val?: any)=>{\n    if (!(prop = typeof prop == \"string\" ? kebabToCamel(prop) : prop) || !el || [\"style\", \"dataset\", \"attributeStyleMap\", \"styleMap\", \"computedStyleMap\"].indexOf(prop || \"\") != -1) return el;\n    const $ref: any = val;\n\n    //\n    if (hasValue(val)) { val = val.value; };\n\n    //\n    if (el?.[prop] === val) { return el; };\n    if (el?.[prop] !== val) {\n        $avoidTrigger($ref, ()=>{\n            if (val != null) { el[prop] = val; } else { delete el[prop]; };\n        })\n    }\n    return el;\n}\n\n//\nexport const handleDataset = (el?: HTMLElement|null, prop?: string, val?: DatasetValue) => {\n    const datasetRef = el?.dataset; if (!prop || !el || !datasetRef) return el;\n    const $ref: any = val;  // @ts-ignore\n    if (hasValue(val)) val = val?.value; prop = kebabToCamel(prop);\n    if (datasetRef?.[prop] === (val = normalizePrimitive(val))) return el;\n    if (val == null || val === false) { delete datasetRef[prop]; } else {\n        $avoidTrigger($ref, ()=>{\n            if (typeof val != \"object\" && typeof val != \"function\") {\n                datasetRef[prop] = String(val);\n            } else {\n                delete datasetRef[prop];\n            }\n        });\n    }\n    return el;\n};\n\n//\nexport const deleteStyleProperty = (el: HTMLElement, name: string) => el.style.removeProperty(camelToKebab(name));\n\n//\nexport const handleStyleChange = (el?: HTMLElement | null, prop?: string, val?: any) => {\n    const styleRef = el?.style;\n    if (!prop || typeof prop != \"string\" || !el || !styleRef) return el;\n    //if (hasValue(val) && !isValueUnit(val)) val = val.value;\n\n    //\n    const $ref: any = val;\n    $avoidTrigger($ref, ()=>{\n        //if (val == null) { deleteStyleProperty(el, prop); } else\n        if (isVal(val) || hasValue(val) || isValueUnit(val))\n            { setStyleProperty(el, prop, val); } else if (val == null)\n            { deleteStyleProperty(el, prop); }\n    });\n\n    //\n    return el;\n};\n\n//\nexport const handleAttribute = (el?: HTMLElement | null, prop?: string, val?: any) => {\n    if (!prop || !el) return el;\n\n    //\n    const $ref: any = val;\n    if (hasValue(val)) val = val.value; prop = camelToKebab(prop);\n    if (el?.getAttribute?.(prop) === (val = normalizePrimitive(val))) {\n        return el;\n    }\n\n    //\n    $avoidTrigger($ref, ()=>{\n        if ((typeof val != \"object\" && typeof val != \"function\") && val != null && (typeof val == \"boolean\" ? val == true : true)) {\n            el?.setAttribute?.(prop, String(val));\n        } else {\n            el?.removeAttribute?.(prop);\n        }\n    });\n\n    //\n    return el;\n};\n","/*! For license information please see index.js.LICENSE.txt */\nvar t={2:t=>{function e(t,e,o){t instanceof RegExp&&(t=n(t,o)),e instanceof RegExp&&(e=n(e,o));var i=r(t,e,o);return i&&{start:i[0],end:i[1],pre:o.slice(0,i[0]),body:o.slice(i[0]+t.length,i[1]),post:o.slice(i[1]+e.length)}}function n(t,e){var n=e.match(t);return n?n[0]:null}function r(t,e,n){var r,o,i,s,a,u=n.indexOf(t),c=n.indexOf(e,u+1),l=u;if(u>=0&&c>0){for(r=[],i=n.length;l>=0&&!a;)l==u?(r.push(l),u=n.indexOf(t,l+1)):1==r.length?a=[r.pop(),c]:((o=r.pop())<i&&(i=o,s=c),c=n.indexOf(e,l+1)),l=u<c&&u>=0?u:c;r.length&&(a=[i,s])}return a}t.exports=e,e.range=r},101:function(t,e,n){var r;t=n.nmd(t),function(o){var i=(t&&t.exports,\"object\"==typeof global&&global);i.global!==i&&i.window;var s=function(t){this.message=t};(s.prototype=new Error).name=\"InvalidCharacterError\";var a=function(t){throw new s(t)},u=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",c=/[\\t\\n\\f\\r ]/g,l={encode:function(t){t=String(t),/[^\\0-\\xFF]/.test(t)&&a(\"The string to be encoded contains characters outside of the Latin1 range.\");for(var e,n,r,o,i=t.length%3,s=\"\",c=-1,l=t.length-i;++c<l;)e=t.charCodeAt(c)<<16,n=t.charCodeAt(++c)<<8,r=t.charCodeAt(++c),s+=u.charAt((o=e+n+r)>>18&63)+u.charAt(o>>12&63)+u.charAt(o>>6&63)+u.charAt(63&o);return 2==i?(e=t.charCodeAt(c)<<8,n=t.charCodeAt(++c),s+=u.charAt((o=e+n)>>10)+u.charAt(o>>4&63)+u.charAt(o<<2&63)+\"=\"):1==i&&(o=t.charCodeAt(c),s+=u.charAt(o>>2)+u.charAt(o<<4&63)+\"==\"),s},decode:function(t){var e=(t=String(t).replace(c,\"\")).length;e%4==0&&(e=(t=t.replace(/==?$/,\"\")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&a(\"Invalid character: the string to be decoded is not correctly encoded.\");for(var n,r,o=0,i=\"\",s=-1;++s<e;)r=u.indexOf(t.charAt(s)),n=o%4?64*n+r:r,o++%4&&(i+=String.fromCharCode(255&n>>(-2*o&6)));return i},version:\"1.0.0\"};void 0===(r=function(){return l}.call(e,n,e,t))||(t.exports=r)}()},172:(t,e)=>{e.d=function(t){if(!t)return 0;for(var e=(t=t.toString()).length,n=t.length;n--;){var r=t.charCodeAt(n);56320<=r&&r<=57343&&n--,127<r&&r<=2047?e++:2047<r&&r<=65535&&(e+=2)}return e}},526:t=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join(\"\")}}};t.exports=e},298:t=>{var e,n;e=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join(\"\")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var o=t[r]<<16|t[r+1]<<8|t[r+2],i=0;i<4;i++)8*r+6*i<=8*t.length?n.push(e.charAt(o>>>6*(3-i)&63)):n.push(\"=\");return n.join(\"\")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\\/]/gi,\"\");for(var n=[],r=0,o=0;r<t.length;o=++r%4)0!=o&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|e.indexOf(t.charAt(r))>>>6-2*o);return n}},t.exports=n},635:(t,e,n)=>{const r=n(31),o=n(338),i=n(221);t.exports={XMLParser:o,XMLValidator:r,XMLBuilder:i}},118:t=>{t.exports=function(t){return\"function\"==typeof t?t:Array.isArray(t)?e=>{for(const n of t){if(\"string\"==typeof n&&e===n)return!0;if(n instanceof RegExp&&n.test(e))return!0}}:()=>!1}},705:(t,e)=>{const n=\":A-Za-z_\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD\",r=\"[\"+n+\"][\"+n+\"\\\\-.\\\\d\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]*\",o=new RegExp(\"^\"+r+\"$\");e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,n){if(e){const r=Object.keys(e),o=r.length;for(let i=0;i<o;i++)t[r[i]]=\"strict\"===n?[e[r[i]]]:e[r[i]]}},e.getValue=function(t){return e.isExist(t)?t:\"\"},e.isName=function(t){return!(null==o.exec(t))},e.getAllMatches=function(t,e){const n=[];let r=e.exec(t);for(;r;){const o=[];o.startIndex=e.lastIndex-r[0].length;const i=r.length;for(let t=0;t<i;t++)o.push(r[t]);n.push(o),r=e.exec(t)}return n},e.nameRegexp=r},31:(t,e,n)=>{const r=n(705),o={allowBooleanAttributes:!1,unpairedTags:[]};function i(t){return\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t}function s(t,e){const n=e;for(;e<t.length;e++)if(\"?\"!=t[e]&&\" \"!=t[e]);else{const r=t.substr(n,e-n);if(e>5&&\"xml\"===r)return d(\"InvalidXml\",\"XML declaration allowed only at the start of the document.\",m(t,e));if(\"?\"==t[e]&&\">\"==t[e+1]){e++;break}}return e}function a(t,e){if(t.length>e+5&&\"-\"===t[e+1]&&\"-\"===t[e+2]){for(e+=3;e<t.length;e++)if(\"-\"===t[e]&&\"-\"===t[e+1]&&\">\"===t[e+2]){e+=2;break}}else if(t.length>e+8&&\"D\"===t[e+1]&&\"O\"===t[e+2]&&\"C\"===t[e+3]&&\"T\"===t[e+4]&&\"Y\"===t[e+5]&&\"P\"===t[e+6]&&\"E\"===t[e+7]){let n=1;for(e+=8;e<t.length;e++)if(\"<\"===t[e])n++;else if(\">\"===t[e]&&(n--,0===n))break}else if(t.length>e+9&&\"[\"===t[e+1]&&\"C\"===t[e+2]&&\"D\"===t[e+3]&&\"A\"===t[e+4]&&\"T\"===t[e+5]&&\"A\"===t[e+6]&&\"[\"===t[e+7])for(e+=8;e<t.length;e++)if(\"]\"===t[e]&&\"]\"===t[e+1]&&\">\"===t[e+2]){e+=2;break}return e}e.validate=function(t,e){e=Object.assign({},o,e);const n=[];let u=!1,c=!1;\"\\ufeff\"===t[0]&&(t=t.substr(1));for(let o=0;o<t.length;o++)if(\"<\"===t[o]&&\"?\"===t[o+1]){if(o+=2,o=s(t,o),o.err)return o}else{if(\"<\"!==t[o]){if(i(t[o]))continue;return d(\"InvalidChar\",\"char '\"+t[o]+\"' is not expected.\",m(t,o))}{let g=o;if(o++,\"!\"===t[o]){o=a(t,o);continue}{let y=!1;\"/\"===t[o]&&(y=!0,o++);let v=\"\";for(;o<t.length&&\">\"!==t[o]&&\" \"!==t[o]&&\"\\t\"!==t[o]&&\"\\n\"!==t[o]&&\"\\r\"!==t[o];o++)v+=t[o];if(v=v.trim(),\"/\"===v[v.length-1]&&(v=v.substring(0,v.length-1),o--),h=v,!r.isName(h)){let e;return e=0===v.trim().length?\"Invalid space after '<'.\":\"Tag '\"+v+\"' is an invalid name.\",d(\"InvalidTag\",e,m(t,o))}const b=l(t,o);if(!1===b)return d(\"InvalidAttr\",\"Attributes for '\"+v+\"' have open quote.\",m(t,o));let w=b.value;if(o=b.index,\"/\"===w[w.length-1]){const n=o-w.length;w=w.substring(0,w.length-1);const r=p(w,e);if(!0!==r)return d(r.err.code,r.err.msg,m(t,n+r.err.line));u=!0}else if(y){if(!b.tagClosed)return d(\"InvalidTag\",\"Closing tag '\"+v+\"' doesn't have proper closing.\",m(t,o));if(w.trim().length>0)return d(\"InvalidTag\",\"Closing tag '\"+v+\"' can't have attributes or invalid starting.\",m(t,g));if(0===n.length)return d(\"InvalidTag\",\"Closing tag '\"+v+\"' has not been opened.\",m(t,g));{const e=n.pop();if(v!==e.tagName){let n=m(t,e.tagStartPos);return d(\"InvalidTag\",\"Expected closing tag '\"+e.tagName+\"' (opened in line \"+n.line+\", col \"+n.col+\") instead of closing tag '\"+v+\"'.\",m(t,g))}0==n.length&&(c=!0)}}else{const r=p(w,e);if(!0!==r)return d(r.err.code,r.err.msg,m(t,o-w.length+r.err.line));if(!0===c)return d(\"InvalidXml\",\"Multiple possible root nodes found.\",m(t,o));-1!==e.unpairedTags.indexOf(v)||n.push({tagName:v,tagStartPos:g}),u=!0}for(o++;o<t.length;o++)if(\"<\"===t[o]){if(\"!\"===t[o+1]){o++,o=a(t,o);continue}if(\"?\"!==t[o+1])break;if(o=s(t,++o),o.err)return o}else if(\"&\"===t[o]){const e=f(t,o);if(-1==e)return d(\"InvalidChar\",\"char '&' is not expected.\",m(t,o));o=e}else if(!0===c&&!i(t[o]))return d(\"InvalidXml\",\"Extra text at the end\",m(t,o));\"<\"===t[o]&&o--}}}var h;return u?1==n.length?d(\"InvalidTag\",\"Unclosed tag '\"+n[0].tagName+\"'.\",m(t,n[0].tagStartPos)):!(n.length>0)||d(\"InvalidXml\",\"Invalid '\"+JSON.stringify(n.map((t=>t.tagName)),null,4).replace(/\\r?\\n/g,\"\")+\"' found.\",{line:1,col:1}):d(\"InvalidXml\",\"Start tag expected.\",1)};const u='\"',c=\"'\";function l(t,e){let n=\"\",r=\"\",o=!1;for(;e<t.length;e++){if(t[e]===u||t[e]===c)\"\"===r?r=t[e]:r!==t[e]||(r=\"\");else if(\">\"===t[e]&&\"\"===r){o=!0;break}n+=t[e]}return\"\"===r&&{value:n,index:e,tagClosed:o}}const h=new RegExp(\"(\\\\s*)([^\\\\s=]+)(\\\\s*=)?(\\\\s*(['\\\"])(([\\\\s\\\\S])*?)\\\\5)?\",\"g\");function p(t,e){const n=r.getAllMatches(t,h),o={};for(let t=0;t<n.length;t++){if(0===n[t][1].length)return d(\"InvalidAttr\",\"Attribute '\"+n[t][2]+\"' has no space in starting.\",y(n[t]));if(void 0!==n[t][3]&&void 0===n[t][4])return d(\"InvalidAttr\",\"Attribute '\"+n[t][2]+\"' is without value.\",y(n[t]));if(void 0===n[t][3]&&!e.allowBooleanAttributes)return d(\"InvalidAttr\",\"boolean attribute '\"+n[t][2]+\"' is not allowed.\",y(n[t]));const r=n[t][2];if(!g(r))return d(\"InvalidAttr\",\"Attribute '\"+r+\"' is an invalid name.\",y(n[t]));if(o.hasOwnProperty(r))return d(\"InvalidAttr\",\"Attribute '\"+r+\"' is repeated.\",y(n[t]));o[r]=1}return!0}function f(t,e){if(\";\"===t[++e])return-1;if(\"#\"===t[e])return function(t,e){let n=/\\d/;for(\"x\"===t[e]&&(e++,n=/[\\da-fA-F]/);e<t.length;e++){if(\";\"===t[e])return e;if(!t[e].match(n))break}return-1}(t,++e);let n=0;for(;e<t.length;e++,n++)if(!(t[e].match(/\\w/)&&n<20)){if(\";\"===t[e])break;return-1}return e}function d(t,e,n){return{err:{code:t,msg:e,line:n.line||n,col:n.col}}}function g(t){return r.isName(t)}function m(t,e){const n=t.substring(0,e).split(/\\r?\\n/);return{line:n.length,col:n[n.length-1].length+1}}function y(t){return t.startIndex+t[1].length}},221:(t,e,n)=>{const r=n(87),o=n(118),i={attributeNamePrefix:\"@_\",attributesGroupName:!1,textNodeName:\"#text\",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:\"  \",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp(\"&\",\"g\"),val:\"&amp;\"},{regex:new RegExp(\">\",\"g\"),val:\"&gt;\"},{regex:new RegExp(\"<\",\"g\"),val:\"&lt;\"},{regex:new RegExp(\"'\",\"g\"),val:\"&apos;\"},{regex:new RegExp('\"',\"g\"),val:\"&quot;\"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function s(t){this.options=Object.assign({},i,t),!0===this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=o(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=c),this.processTextOrObjNode=a,this.options.format?(this.indentate=u,this.tagEndChar=\">\\n\",this.newLine=\"\\n\"):(this.indentate=function(){return\"\"},this.tagEndChar=\">\",this.newLine=\"\")}function a(t,e,n,r){const o=this.j2x(t,n+1,r.concat(e));return void 0!==t[this.options.textNodeName]&&1===Object.keys(t).length?this.buildTextValNode(t[this.options.textNodeName],e,o.attrStr,n):this.buildObjectNode(o.val,e,o.attrStr,n)}function u(t){return this.options.indentBy.repeat(t)}function c(t){return!(!t.startsWith(this.options.attributeNamePrefix)||t===this.options.textNodeName)&&t.substr(this.attrPrefixLen)}s.prototype.build=function(t){return this.options.preserveOrder?r(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0,[]).val)},s.prototype.j2x=function(t,e,n){let r=\"\",o=\"\";const i=n.join(\".\");for(let s in t)if(Object.prototype.hasOwnProperty.call(t,s))if(void 0===t[s])this.isAttribute(s)&&(o+=\"\");else if(null===t[s])this.isAttribute(s)?o+=\"\":\"?\"===s[0]?o+=this.indentate(e)+\"<\"+s+\"?\"+this.tagEndChar:o+=this.indentate(e)+\"<\"+s+\"/\"+this.tagEndChar;else if(t[s]instanceof Date)o+=this.buildTextValNode(t[s],s,\"\",e);else if(\"object\"!=typeof t[s]){const n=this.isAttribute(s);if(n&&!this.ignoreAttributesFn(n,i))r+=this.buildAttrPairStr(n,\"\"+t[s]);else if(!n)if(s===this.options.textNodeName){let e=this.options.tagValueProcessor(s,\"\"+t[s]);o+=this.replaceEntitiesValue(e)}else o+=this.buildTextValNode(t[s],s,\"\",e)}else if(Array.isArray(t[s])){const r=t[s].length;let i=\"\",a=\"\";for(let u=0;u<r;u++){const r=t[s][u];if(void 0===r);else if(null===r)\"?\"===s[0]?o+=this.indentate(e)+\"<\"+s+\"?\"+this.tagEndChar:o+=this.indentate(e)+\"<\"+s+\"/\"+this.tagEndChar;else if(\"object\"==typeof r)if(this.options.oneListGroup){const t=this.j2x(r,e+1,n.concat(s));i+=t.val,this.options.attributesGroupName&&r.hasOwnProperty(this.options.attributesGroupName)&&(a+=t.attrStr)}else i+=this.processTextOrObjNode(r,s,e,n);else if(this.options.oneListGroup){let t=this.options.tagValueProcessor(s,r);t=this.replaceEntitiesValue(t),i+=t}else i+=this.buildTextValNode(r,s,\"\",e)}this.options.oneListGroup&&(i=this.buildObjectNode(i,s,a,e)),o+=i}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const e=Object.keys(t[s]),n=e.length;for(let o=0;o<n;o++)r+=this.buildAttrPairStr(e[o],\"\"+t[s][e[o]])}else o+=this.processTextOrObjNode(t[s],s,e,n);return{attrStr:r,val:o}},s.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,\"\"+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&\"true\"===e?\" \"+t:\" \"+t+'=\"'+e+'\"'},s.prototype.buildObjectNode=function(t,e,n,r){if(\"\"===t)return\"?\"===e[0]?this.indentate(r)+\"<\"+e+n+\"?\"+this.tagEndChar:this.indentate(r)+\"<\"+e+n+this.closeTag(e)+this.tagEndChar;{let o=\"</\"+e+this.tagEndChar,i=\"\";return\"?\"===e[0]&&(i=\"?\",o=\"\"),!n&&\"\"!==n||-1!==t.indexOf(\"<\")?!1!==this.options.commentPropName&&e===this.options.commentPropName&&0===i.length?this.indentate(r)+`\\x3c!--${t}--\\x3e`+this.newLine:this.indentate(r)+\"<\"+e+n+i+this.tagEndChar+t+this.indentate(r)+o:this.indentate(r)+\"<\"+e+n+i+\">\"+t+o}},s.prototype.closeTag=function(t){let e=\"\";return-1!==this.options.unpairedTags.indexOf(t)?this.options.suppressUnpairedNode||(e=\"/\"):e=this.options.suppressEmptyNode?\"/\":`></${t}`,e},s.prototype.buildTextValNode=function(t,e,n,r){if(!1!==this.options.cdataPropName&&e===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${t}]]>`+this.newLine;if(!1!==this.options.commentPropName&&e===this.options.commentPropName)return this.indentate(r)+`\\x3c!--${t}--\\x3e`+this.newLine;if(\"?\"===e[0])return this.indentate(r)+\"<\"+e+n+\"?\"+this.tagEndChar;{let o=this.options.tagValueProcessor(e,t);return o=this.replaceEntitiesValue(o),\"\"===o?this.indentate(r)+\"<\"+e+n+this.closeTag(e)+this.tagEndChar:this.indentate(r)+\"<\"+e+n+\">\"+o+\"</\"+e+this.tagEndChar}},s.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const n=this.options.entities[e];t=t.replace(n.regex,n.val)}return t},t.exports=s},87:t=>{function e(t,s,a,u){let c=\"\",l=!1;for(let h=0;h<t.length;h++){const p=t[h],f=n(p);if(void 0===f)continue;let d=\"\";if(d=0===a.length?f:`${a}.${f}`,f===s.textNodeName){let t=p[f];o(d,s)||(t=s.tagValueProcessor(f,t),t=i(t,s)),l&&(c+=u),c+=t,l=!1;continue}if(f===s.cdataPropName){l&&(c+=u),c+=`<![CDATA[${p[f][0][s.textNodeName]}]]>`,l=!1;continue}if(f===s.commentPropName){c+=u+`\\x3c!--${p[f][0][s.textNodeName]}--\\x3e`,l=!0;continue}if(\"?\"===f[0]){const t=r(p[\":@\"],s),e=\"?xml\"===f?\"\":u;let n=p[f][0][s.textNodeName];n=0!==n.length?\" \"+n:\"\",c+=e+`<${f}${n}${t}?>`,l=!0;continue}let g=u;\"\"!==g&&(g+=s.indentBy);const m=u+`<${f}${r(p[\":@\"],s)}`,y=e(p[f],s,d,g);-1!==s.unpairedTags.indexOf(f)?s.suppressUnpairedNode?c+=m+\">\":c+=m+\"/>\":y&&0!==y.length||!s.suppressEmptyNode?y&&y.endsWith(\">\")?c+=m+`>${y}${u}</${f}>`:(c+=m+\">\",y&&\"\"!==u&&(y.includes(\"/>\")||y.includes(\"</\"))?c+=u+s.indentBy+y+u:c+=y,c+=`</${f}>`):c+=m+\"/>\",l=!0}return c}function n(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];if(t.hasOwnProperty(r)&&\":@\"!==r)return r}}function r(t,e){let n=\"\";if(t&&!e.ignoreAttributes)for(let r in t){if(!t.hasOwnProperty(r))continue;let o=e.attributeValueProcessor(r,t[r]);o=i(o,e),!0===o&&e.suppressBooleanAttributes?n+=` ${r.substr(e.attributeNamePrefix.length)}`:n+=` ${r.substr(e.attributeNamePrefix.length)}=\"${o}\"`}return n}function o(t,e){let n=(t=t.substr(0,t.length-e.textNodeName.length-1)).substr(t.lastIndexOf(\".\")+1);for(let r in e.stopNodes)if(e.stopNodes[r]===t||e.stopNodes[r]===\"*.\"+n)return!0;return!1}function i(t,e){if(t&&t.length>0&&e.processEntities)for(let n=0;n<e.entities.length;n++){const r=e.entities[n];t=t.replace(r.regex,r.val)}return t}t.exports=function(t,n){let r=\"\";return n.format&&n.indentBy.length>0&&(r=\"\\n\"),e(t,n,\"\",r)}},193:(t,e,n)=>{const r=n(705);function o(t,e){let n=\"\";for(;e<t.length&&\"'\"!==t[e]&&'\"'!==t[e];e++)n+=t[e];if(n=n.trim(),-1!==n.indexOf(\" \"))throw new Error(\"External entites are not supported\");const r=t[e++];let o=\"\";for(;e<t.length&&t[e]!==r;e++)o+=t[e];return[n,o,e]}function i(t,e){return\"!\"===t[e+1]&&\"-\"===t[e+2]&&\"-\"===t[e+3]}function s(t,e){return\"!\"===t[e+1]&&\"E\"===t[e+2]&&\"N\"===t[e+3]&&\"T\"===t[e+4]&&\"I\"===t[e+5]&&\"T\"===t[e+6]&&\"Y\"===t[e+7]}function a(t,e){return\"!\"===t[e+1]&&\"E\"===t[e+2]&&\"L\"===t[e+3]&&\"E\"===t[e+4]&&\"M\"===t[e+5]&&\"E\"===t[e+6]&&\"N\"===t[e+7]&&\"T\"===t[e+8]}function u(t,e){return\"!\"===t[e+1]&&\"A\"===t[e+2]&&\"T\"===t[e+3]&&\"T\"===t[e+4]&&\"L\"===t[e+5]&&\"I\"===t[e+6]&&\"S\"===t[e+7]&&\"T\"===t[e+8]}function c(t,e){return\"!\"===t[e+1]&&\"N\"===t[e+2]&&\"O\"===t[e+3]&&\"T\"===t[e+4]&&\"A\"===t[e+5]&&\"T\"===t[e+6]&&\"I\"===t[e+7]&&\"O\"===t[e+8]&&\"N\"===t[e+9]}function l(t){if(r.isName(t))return t;throw new Error(`Invalid entity name ${t}`)}t.exports=function(t,e){const n={};if(\"O\"!==t[e+3]||\"C\"!==t[e+4]||\"T\"!==t[e+5]||\"Y\"!==t[e+6]||\"P\"!==t[e+7]||\"E\"!==t[e+8])throw new Error(\"Invalid Tag instead of DOCTYPE\");{e+=9;let r=1,h=!1,p=!1,f=\"\";for(;e<t.length;e++)if(\"<\"!==t[e]||p)if(\">\"===t[e]){if(p?\"-\"===t[e-1]&&\"-\"===t[e-2]&&(p=!1,r--):r--,0===r)break}else\"[\"===t[e]?h=!0:f+=t[e];else{if(h&&s(t,e)){let r,i;e+=7,[r,i,e]=o(t,e+1),-1===i.indexOf(\"&\")&&(n[l(r)]={regx:RegExp(`&${r};`,\"g\"),val:i})}else if(h&&a(t,e))e+=8;else if(h&&u(t,e))e+=8;else if(h&&c(t,e))e+=9;else{if(!i)throw new Error(\"Invalid DOCTYPE\");p=!0}r++,f=\"\"}if(0!==r)throw new Error(\"Unclosed DOCTYPE\")}return{entities:n,i:e}}},63:(t,e)=>{const n={preserveOrder:!1,attributeNamePrefix:\"@_\",attributesGroupName:!1,textNodeName:\"#text\",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,n){return t}};e.buildOptions=function(t){return Object.assign({},n,t)},e.defaultOptions=n},299:(t,e,n)=>{const r=n(705),o=n(365),i=n(193),s=n(494),a=n(118);function u(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];this.lastEntities[r]={regex:new RegExp(\"&\"+r+\";\",\"g\"),val:t[r]}}}function c(t,e,n,r,o,i,s){if(void 0!==t&&(this.options.trimValues&&!r&&(t=t.trim()),t.length>0)){s||(t=this.replaceEntitiesValue(t));const r=this.options.tagValueProcessor(e,t,n,o,i);return null==r?t:typeof r!=typeof t||r!==t?r:this.options.trimValues||t.trim()===t?x(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function l(t){if(this.options.removeNSPrefix){const e=t.split(\":\"),n=\"/\"===t.charAt(0)?\"/\":\"\";if(\"xmlns\"===e[0])return\"\";2===e.length&&(t=n+e[1])}return t}const h=new RegExp(\"([^\\\\s=]+)\\\\s*(=\\\\s*(['\\\"])([\\\\s\\\\S]*?)\\\\3)?\",\"gm\");function p(t,e,n){if(!0!==this.options.ignoreAttributes&&\"string\"==typeof t){const n=r.getAllMatches(t,h),o=n.length,i={};for(let t=0;t<o;t++){const r=this.resolveNameSpace(n[t][1]);if(this.ignoreAttributesFn(r,e))continue;let o=n[t][4],s=this.options.attributeNamePrefix+r;if(r.length)if(this.options.transformAttributeName&&(s=this.options.transformAttributeName(s)),\"__proto__\"===s&&(s=\"#__proto__\"),void 0!==o){this.options.trimValues&&(o=o.trim()),o=this.replaceEntitiesValue(o);const t=this.options.attributeValueProcessor(r,o,e);i[s]=null==t?o:typeof t!=typeof o||t!==o?t:x(o,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[s]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const t={};return t[this.options.attributesGroupName]=i,t}return i}}const f=function(t){t=t.replace(/\\r\\n?/g,\"\\n\");const e=new o(\"!xml\");let n=e,r=\"\",s=\"\";for(let a=0;a<t.length;a++)if(\"<\"===t[a])if(\"/\"===t[a+1]){const e=v(t,\">\",a,\"Closing Tag is not closed.\");let o=t.substring(a+2,e).trim();if(this.options.removeNSPrefix){const t=o.indexOf(\":\");-1!==t&&(o=o.substr(t+1))}this.options.transformTagName&&(o=this.options.transformTagName(o)),n&&(r=this.saveTextToParentTag(r,n,s));const i=s.substring(s.lastIndexOf(\".\")+1);if(o&&-1!==this.options.unpairedTags.indexOf(o))throw new Error(`Unpaired tag can not be used as closing tag: </${o}>`);let u=0;i&&-1!==this.options.unpairedTags.indexOf(i)?(u=s.lastIndexOf(\".\",s.lastIndexOf(\".\")-1),this.tagsNodeStack.pop()):u=s.lastIndexOf(\".\"),s=s.substring(0,u),n=this.tagsNodeStack.pop(),r=\"\",a=e}else if(\"?\"===t[a+1]){let e=b(t,a,!1,\"?>\");if(!e)throw new Error(\"Pi Tag is not closed.\");if(r=this.saveTextToParentTag(r,n,s),this.options.ignoreDeclaration&&\"?xml\"===e.tagName||this.options.ignorePiTags);else{const t=new o(e.tagName);t.add(this.options.textNodeName,\"\"),e.tagName!==e.tagExp&&e.attrExpPresent&&(t[\":@\"]=this.buildAttributesMap(e.tagExp,s,e.tagName)),this.addChild(n,t,s)}a=e.closeIndex+1}else if(\"!--\"===t.substr(a+1,3)){const e=v(t,\"--\\x3e\",a+4,\"Comment is not closed.\");if(this.options.commentPropName){const o=t.substring(a+4,e-2);r=this.saveTextToParentTag(r,n,s),n.add(this.options.commentPropName,[{[this.options.textNodeName]:o}])}a=e}else if(\"!D\"===t.substr(a+1,2)){const e=i(t,a);this.docTypeEntities=e.entities,a=e.i}else if(\"![\"===t.substr(a+1,2)){const e=v(t,\"]]>\",a,\"CDATA is not closed.\")-2,o=t.substring(a+9,e);r=this.saveTextToParentTag(r,n,s);let i=this.parseTextData(o,n.tagname,s,!0,!1,!0,!0);null==i&&(i=\"\"),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:o}]):n.add(this.options.textNodeName,i),a=e+2}else{let i=b(t,a,this.options.removeNSPrefix),u=i.tagName;const c=i.rawTagName;let l=i.tagExp,h=i.attrExpPresent,p=i.closeIndex;this.options.transformTagName&&(u=this.options.transformTagName(u)),n&&r&&\"!xml\"!==n.tagname&&(r=this.saveTextToParentTag(r,n,s,!1));const f=n;if(f&&-1!==this.options.unpairedTags.indexOf(f.tagname)&&(n=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf(\".\"))),u!==e.tagname&&(s+=s?\".\"+u:u),this.isItStopNode(this.options.stopNodes,s,u)){let e=\"\";if(l.length>0&&l.lastIndexOf(\"/\")===l.length-1)\"/\"===u[u.length-1]?(u=u.substr(0,u.length-1),s=s.substr(0,s.length-1),l=u):l=l.substr(0,l.length-1),a=i.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(u))a=i.closeIndex;else{const n=this.readStopNodeData(t,c,p+1);if(!n)throw new Error(`Unexpected end of ${c}`);a=n.i,e=n.tagContent}const r=new o(u);u!==l&&h&&(r[\":@\"]=this.buildAttributesMap(l,s,u)),e&&(e=this.parseTextData(e,u,s,!0,h,!0,!0)),s=s.substr(0,s.lastIndexOf(\".\")),r.add(this.options.textNodeName,e),this.addChild(n,r,s)}else{if(l.length>0&&l.lastIndexOf(\"/\")===l.length-1){\"/\"===u[u.length-1]?(u=u.substr(0,u.length-1),s=s.substr(0,s.length-1),l=u):l=l.substr(0,l.length-1),this.options.transformTagName&&(u=this.options.transformTagName(u));const t=new o(u);u!==l&&h&&(t[\":@\"]=this.buildAttributesMap(l,s,u)),this.addChild(n,t,s),s=s.substr(0,s.lastIndexOf(\".\"))}else{const t=new o(u);this.tagsNodeStack.push(n),u!==l&&h&&(t[\":@\"]=this.buildAttributesMap(l,s,u)),this.addChild(n,t,s),n=t}r=\"\",a=p}}else r+=t[a];return e.child};function d(t,e,n){const r=this.options.updateTag(e.tagname,n,e[\":@\"]);!1===r||(\"string\"==typeof r?(e.tagname=r,t.addChild(e)):t.addChild(e))}const g=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const n=this.docTypeEntities[e];t=t.replace(n.regx,n.val)}for(let e in this.lastEntities){const n=this.lastEntities[e];t=t.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const n=this.htmlEntities[e];t=t.replace(n.regex,n.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function m(t,e,n,r){return t&&(void 0===r&&(r=0===Object.keys(e.child).length),void 0!==(t=this.parseTextData(t,e.tagname,n,!1,!!e[\":@\"]&&0!==Object.keys(e[\":@\"]).length,r))&&\"\"!==t&&e.add(this.options.textNodeName,t),t=\"\"),t}function y(t,e,n){const r=\"*.\"+n;for(const n in t){const o=t[n];if(r===o||e===o)return!0}return!1}function v(t,e,n,r){const o=t.indexOf(e,n);if(-1===o)throw new Error(r);return o+e.length-1}function b(t,e,n){const r=function(t,e){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\">\",o=\"\";for(let i=e;i<t.length;i++){let e=t[i];if(n)e===n&&(n=\"\");else if('\"'===e||\"'\"===e)n=e;else if(e===r[0]){if(!r[1])return{data:o,index:i};if(t[i+1]===r[1])return{data:o,index:i}}else\"\\t\"===e&&(e=\" \");o+=e}}(t,e+1,arguments.length>3&&void 0!==arguments[3]?arguments[3]:\">\");if(!r)return;let o=r.data;const i=r.index,s=o.search(/\\s/);let a=o,u=!0;-1!==s&&(a=o.substring(0,s),o=o.substring(s+1).trimStart());const c=a;if(n){const t=a.indexOf(\":\");-1!==t&&(a=a.substr(t+1),u=a!==r.data.substr(t+1))}return{tagName:a,tagExp:o,closeIndex:i,attrExpPresent:u,rawTagName:c}}function w(t,e,n){const r=n;let o=1;for(;n<t.length;n++)if(\"<\"===t[n])if(\"/\"===t[n+1]){const i=v(t,\">\",n,`${e} is not closed`);if(t.substring(n+2,i).trim()===e&&(o--,0===o))return{tagContent:t.substring(r,n),i};n=i}else if(\"?\"===t[n+1])n=v(t,\"?>\",n+1,\"StopNode is not closed.\");else if(\"!--\"===t.substr(n+1,3))n=v(t,\"--\\x3e\",n+3,\"StopNode is not closed.\");else if(\"![\"===t.substr(n+1,2))n=v(t,\"]]>\",n,\"StopNode is not closed.\")-2;else{const r=b(t,n,\">\");r&&((r&&r.tagName)===e&&\"/\"!==r.tagExp[r.tagExp.length-1]&&o++,n=r.closeIndex)}}function x(t,e,n){if(e&&\"string\"==typeof t){const e=t.trim();return\"true\"===e||\"false\"!==e&&s(t,n)}return r.isExist(t)?t:\"\"}t.exports=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:\"'\"},gt:{regex:/&(gt|#62|#x3E);/g,val:\">\"},lt:{regex:/&(lt|#60|#x3C);/g,val:\"<\"},quot:{regex:/&(quot|#34|#x22);/g,val:'\"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:\"&\"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:\" \"},cent:{regex:/&(cent|#162);/g,val:\"\"},pound:{regex:/&(pound|#163);/g,val:\"\"},yen:{regex:/&(yen|#165);/g,val:\"\"},euro:{regex:/&(euro|#8364);/g,val:\"\"},copyright:{regex:/&(copy|#169);/g,val:\"\"},reg:{regex:/&(reg|#174);/g,val:\"\"},inr:{regex:/&(inr|#8377);/g,val:\"\"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,e)=>String.fromCharCode(Number.parseInt(e,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,e)=>String.fromCharCode(Number.parseInt(e,16))}},this.addExternalEntities=u,this.parseXml=f,this.parseTextData=c,this.resolveNameSpace=l,this.buildAttributesMap=p,this.isItStopNode=y,this.replaceEntitiesValue=g,this.readStopNodeData=w,this.saveTextToParentTag=m,this.addChild=d,this.ignoreAttributesFn=a(this.options.ignoreAttributes)}}},338:(t,e,n)=>{const{buildOptions:r}=n(63),o=n(299),{prettify:i}=n(728),s=n(31);t.exports=class{constructor(t){this.externalEntities={},this.options=r(t)}parse(t,e){if(\"string\"==typeof t);else{if(!t.toString)throw new Error(\"XML data is accepted in String or Bytes[] form.\");t=t.toString()}if(e){!0===e&&(e={});const n=s.validate(t,e);if(!0!==n)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}const n=new o(this.options);n.addExternalEntities(this.externalEntities);const r=n.parseXml(t);return this.options.preserveOrder||void 0===r?r:i(r,this.options)}addEntity(t,e){if(-1!==e.indexOf(\"&\"))throw new Error(\"Entity value can't have '&'\");if(-1!==t.indexOf(\"&\")||-1!==t.indexOf(\";\"))throw new Error(\"An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'\");if(\"&\"===e)throw new Error(\"An entity with value '&' is not permitted\");this.externalEntities[t]=e}}},728:(t,e)=>{function n(t,e,s){let a;const u={};for(let c=0;c<t.length;c++){const l=t[c],h=r(l);let p=\"\";if(p=void 0===s?h:s+\".\"+h,h===e.textNodeName)void 0===a?a=l[h]:a+=\"\"+l[h];else{if(void 0===h)continue;if(l[h]){let t=n(l[h],e,p);const r=i(t,e);l[\":@\"]?o(t,l[\":@\"],p,e):1!==Object.keys(t).length||void 0===t[e.textNodeName]||e.alwaysCreateTextNode?0===Object.keys(t).length&&(e.alwaysCreateTextNode?t[e.textNodeName]=\"\":t=\"\"):t=t[e.textNodeName],void 0!==u[h]&&u.hasOwnProperty(h)?(Array.isArray(u[h])||(u[h]=[u[h]]),u[h].push(t)):e.isArray(h,p,r)?u[h]=[t]:u[h]=t}}}return\"string\"==typeof a?a.length>0&&(u[e.textNodeName]=a):void 0!==a&&(u[e.textNodeName]=a),u}function r(t){const e=Object.keys(t);for(let t=0;t<e.length;t++){const n=e[t];if(\":@\"!==n)return n}}function o(t,e,n,r){if(e){const o=Object.keys(e),i=o.length;for(let s=0;s<i;s++){const i=o[s];r.isArray(i,n+\".\"+i,!0,!0)?t[i]=[e[i]]:t[i]=e[i]}}}function i(t,e){const{textNodeName:n}=e,r=Object.keys(t).length;return 0===r||!(1!==r||!t[n]&&\"boolean\"!=typeof t[n]&&0!==t[n])}e.prettify=function(t,e){return n(t,e)}},365:t=>{t.exports=class{constructor(t){this.tagname=t,this.child=[],this[\":@\"]={}}add(t,e){\"__proto__\"===t&&(t=\"#__proto__\"),this.child.push({[t]:e})}addChild(t){\"__proto__\"===t.tagname&&(t.tagname=\"#__proto__\"),t[\":@\"]&&Object.keys(t[\":@\"]).length>0?this.child.push({[t.tagname]:t.child,\":@\":t[\":@\"]}):this.child.push({[t.tagname]:t.child})}}},135:t=>{function e(t){return!!t.constructor&&\"function\"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return\"function\"==typeof t.readFloatLE&&\"function\"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},542:(t,e,n)=>{!function(){var e=n(298),r=n(526).utf8,o=n(135),i=n(526).bin,s=function(t,n){t.constructor==String?t=n&&\"binary\"===n.encoding?i.stringToBytes(t):r.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var a=e.bytesToWords(t),u=8*t.length,c=1732584193,l=-271733879,h=-1732584194,p=271733878,f=0;f<a.length;f++)a[f]=16711935&(a[f]<<8|a[f]>>>24)|4278255360&(a[f]<<24|a[f]>>>8);a[u>>>5]|=128<<u%32,a[14+(u+64>>>9<<4)]=u;var d=s._ff,g=s._gg,m=s._hh,y=s._ii;for(f=0;f<a.length;f+=16){var v=c,b=l,w=h,x=p;c=d(c,l,h,p,a[f+0],7,-680876936),p=d(p,c,l,h,a[f+1],12,-389564586),h=d(h,p,c,l,a[f+2],17,606105819),l=d(l,h,p,c,a[f+3],22,-1044525330),c=d(c,l,h,p,a[f+4],7,-176418897),p=d(p,c,l,h,a[f+5],12,1200080426),h=d(h,p,c,l,a[f+6],17,-1473231341),l=d(l,h,p,c,a[f+7],22,-45705983),c=d(c,l,h,p,a[f+8],7,1770035416),p=d(p,c,l,h,a[f+9],12,-1958414417),h=d(h,p,c,l,a[f+10],17,-42063),l=d(l,h,p,c,a[f+11],22,-1990404162),c=d(c,l,h,p,a[f+12],7,1804603682),p=d(p,c,l,h,a[f+13],12,-40341101),h=d(h,p,c,l,a[f+14],17,-1502002290),c=g(c,l=d(l,h,p,c,a[f+15],22,1236535329),h,p,a[f+1],5,-165796510),p=g(p,c,l,h,a[f+6],9,-1069501632),h=g(h,p,c,l,a[f+11],14,643717713),l=g(l,h,p,c,a[f+0],20,-373897302),c=g(c,l,h,p,a[f+5],5,-701558691),p=g(p,c,l,h,a[f+10],9,38016083),h=g(h,p,c,l,a[f+15],14,-660478335),l=g(l,h,p,c,a[f+4],20,-405537848),c=g(c,l,h,p,a[f+9],5,568446438),p=g(p,c,l,h,a[f+14],9,-1019803690),h=g(h,p,c,l,a[f+3],14,-187363961),l=g(l,h,p,c,a[f+8],20,1163531501),c=g(c,l,h,p,a[f+13],5,-1444681467),p=g(p,c,l,h,a[f+2],9,-51403784),h=g(h,p,c,l,a[f+7],14,1735328473),c=m(c,l=g(l,h,p,c,a[f+12],20,-1926607734),h,p,a[f+5],4,-378558),p=m(p,c,l,h,a[f+8],11,-2022574463),h=m(h,p,c,l,a[f+11],16,1839030562),l=m(l,h,p,c,a[f+14],23,-35309556),c=m(c,l,h,p,a[f+1],4,-1530992060),p=m(p,c,l,h,a[f+4],11,1272893353),h=m(h,p,c,l,a[f+7],16,-155497632),l=m(l,h,p,c,a[f+10],23,-1094730640),c=m(c,l,h,p,a[f+13],4,681279174),p=m(p,c,l,h,a[f+0],11,-358537222),h=m(h,p,c,l,a[f+3],16,-722521979),l=m(l,h,p,c,a[f+6],23,76029189),c=m(c,l,h,p,a[f+9],4,-640364487),p=m(p,c,l,h,a[f+12],11,-421815835),h=m(h,p,c,l,a[f+15],16,530742520),c=y(c,l=m(l,h,p,c,a[f+2],23,-995338651),h,p,a[f+0],6,-198630844),p=y(p,c,l,h,a[f+7],10,1126891415),h=y(h,p,c,l,a[f+14],15,-1416354905),l=y(l,h,p,c,a[f+5],21,-57434055),c=y(c,l,h,p,a[f+12],6,1700485571),p=y(p,c,l,h,a[f+3],10,-1894986606),h=y(h,p,c,l,a[f+10],15,-1051523),l=y(l,h,p,c,a[f+1],21,-2054922799),c=y(c,l,h,p,a[f+8],6,1873313359),p=y(p,c,l,h,a[f+15],10,-30611744),h=y(h,p,c,l,a[f+6],15,-1560198380),l=y(l,h,p,c,a[f+13],21,1309151649),c=y(c,l,h,p,a[f+4],6,-145523070),p=y(p,c,l,h,a[f+11],10,-1120210379),h=y(h,p,c,l,a[f+2],15,718787259),l=y(l,h,p,c,a[f+9],21,-343485551),c=c+v>>>0,l=l+b>>>0,h=h+w>>>0,p=p+x>>>0}return e.endian([c,l,h,p])};s._ff=function(t,e,n,r,o,i,s){var a=t+(e&n|~e&r)+(o>>>0)+s;return(a<<i|a>>>32-i)+e},s._gg=function(t,e,n,r,o,i,s){var a=t+(e&r|n&~r)+(o>>>0)+s;return(a<<i|a>>>32-i)+e},s._hh=function(t,e,n,r,o,i,s){var a=t+(e^n^r)+(o>>>0)+s;return(a<<i|a>>>32-i)+e},s._ii=function(t,e,n,r,o,i,s){var a=t+(n^(e|~r))+(o>>>0)+s;return(a<<i|a>>>32-i)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,n){if(null==t)throw new Error(\"Illegal argument \"+t);var r=e.wordsToBytes(s(t,n));return n&&n.asBytes?r:n&&n.asString?i.bytesToString(r):e.bytesToHex(r)}}()},285:(t,e,n)=>{var r=n(2);t.exports=function(t){return t?(\"{}\"===t.substr(0,2)&&(t=\"\\\\{\\\\}\"+t.substr(2)),m(function(t){return t.split(\"\\\\\\\\\").join(o).split(\"\\\\{\").join(i).split(\"\\\\}\").join(s).split(\"\\\\,\").join(a).split(\"\\\\.\").join(u)}(t),!0).map(l)):[]};var o=\"\\0SLASH\"+Math.random()+\"\\0\",i=\"\\0OPEN\"+Math.random()+\"\\0\",s=\"\\0CLOSE\"+Math.random()+\"\\0\",a=\"\\0COMMA\"+Math.random()+\"\\0\",u=\"\\0PERIOD\"+Math.random()+\"\\0\";function c(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function l(t){return t.split(o).join(\"\\\\\").split(i).join(\"{\").split(s).join(\"}\").split(a).join(\",\").split(u).join(\".\")}function h(t){if(!t)return[\"\"];var e=[],n=r(\"{\",\"}\",t);if(!n)return t.split(\",\");var o=n.pre,i=n.body,s=n.post,a=o.split(\",\");a[a.length-1]+=\"{\"+i+\"}\";var u=h(s);return s.length&&(a[a.length-1]+=u.shift(),a.push.apply(a,u)),e.push.apply(e,a),e}function p(t){return\"{\"+t+\"}\"}function f(t){return/^-?0\\d/.test(t)}function d(t,e){return t<=e}function g(t,e){return t>=e}function m(t,e){var n=[],o=r(\"{\",\"}\",t);if(!o)return[t];var i=o.pre,a=o.post.length?m(o.post,!1):[\"\"];if(/\\$$/.test(o.pre))for(var u=0;u<a.length;u++){var l=i+\"{\"+o.body+\"}\"+a[u];n.push(l)}else{var y,v,b=/^-?\\d+\\.\\.-?\\d+(?:\\.\\.-?\\d+)?$/.test(o.body),w=/^[a-zA-Z]\\.\\.[a-zA-Z](?:\\.\\.-?\\d+)?$/.test(o.body),x=b||w,N=o.body.indexOf(\",\")>=0;if(!x&&!N)return o.post.match(/,.*\\}/)?m(t=o.pre+\"{\"+o.body+s+o.post):[t];if(x)y=o.body.split(/\\.\\./);else if(1===(y=h(o.body)).length&&1===(y=m(y[0],!1).map(p)).length)return a.map((function(t){return o.pre+y[0]+t}));if(x){var A=c(y[0]),P=c(y[1]),O=Math.max(y[0].length,y[1].length),E=3==y.length?Math.abs(c(y[2])):1,T=d;P<A&&(E*=-1,T=g);var j=y.some(f);v=[];for(var S=A;T(S,P);S+=E){var $;if(w)\"\\\\\"===($=String.fromCharCode(S))&&($=\"\");else if($=String(S),j){var C=O-$.length;if(C>0){var I=new Array(C+1).join(\"0\");$=S<0?\"-\"+I+$.slice(1):I+$}}v.push($)}}else{v=[];for(var k=0;k<y.length;k++)v.push.apply(v,m(y[k],!1))}for(k=0;k<v.length;k++)for(u=0;u<a.length;u++)l=i+v[k]+a[u],(!e||x||l)&&n.push(l)}return n}},829:t=>{function e(t){return e=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},e(t)}function n(t){var e=\"function\"==typeof Map?new Map:void 0;return n=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf(\"[native code]\")))return t;var n;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,s)}function s(){return r(t,arguments,i(this).constructor)}return s.prototype=Object.create(t.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),o(s,t)},n(t)}function r(t,e,n){return r=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&o(i,n.prototype),i},r.apply(null,arguments)}function o(t,e){return o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},o(t,e)}function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}var s=function(t){function n(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,n),(r=function(t,n){return!n||\"object\"!==e(n)&&\"function\"!=typeof n?function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t):n}(this,i(n).call(this,t))).name=\"ObjectPrototypeMutationError\",r}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(n,t),n}(n(Error));function a(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=n.split(\".\"),i=o.length,s=function(e){var n=o[e];if(!t)return{v:void 0};if(\"+\"===n){if(Array.isArray(t))return{v:t.map((function(n,i){var s=o.slice(e+1);return s.length>0?a(n,s.join(\".\"),r):r(t,i,o,e)}))};var i=o.slice(0,e).join(\".\");throw new Error(\"Object at wildcard (\".concat(i,\") is not an array\"))}t=r(t,n,o,e)},u=0;u<i;u++){var c=s(u);if(\"object\"===e(c))return c.v}return t}function u(t,e){return t.length===e+1}t.exports={set:function(t,n,r){if(\"object\"!=e(t)||null===t)return t;if(void 0===n)return t;if(\"number\"==typeof n)return t[n]=r,t[n];try{return a(t,n,(function(t,e,n,o){if(t===Reflect.getPrototypeOf({}))throw new s(\"Attempting to mutate Object.prototype\");if(!t[e]){var i=Number.isInteger(Number(n[o+1])),a=\"+\"===n[o+1];t[e]=i||a?[]:{}}return u(n,o)&&(t[e]=r),t[e]}))}catch(e){if(e instanceof s)throw e;return t}},get:function(t,n){if(\"object\"!=e(t)||null===t)return t;if(void 0===n)return t;if(\"number\"==typeof n)return t[n];try{return a(t,n,(function(t,e){return t[e]}))}catch(e){return t}},has:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(\"object\"!=e(t)||null===t)return!1;if(void 0===n)return!1;if(\"number\"==typeof n)return n in t;try{var o=!1;return a(t,n,(function(t,e,n,i){if(!u(n,i))return t&&t[e];o=r.own?t.hasOwnProperty(e):e in t})),o}catch(t){return!1}},hasOwn:function(t,e,n){return this.has(t,e,n||{own:!0})},isIn:function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(\"object\"!=e(t)||null===t)return!1;if(void 0===n)return!1;try{var i=!1,s=!1;return a(t,n,(function(t,n,o,a){return i=i||t===r||!!t&&t[n]===r,s=u(o,a)&&\"object\"===e(t)&&n in t,t&&t[n]})),o.validPath?i&&s:i}catch(t){return!1}},ObjectPrototypeMutationError:s}},47:(t,e,n)=>{var r=n(410),o=function(t){return\"string\"==typeof t};function i(t,e){for(var n=[],r=0;r<t.length;r++){var o=t[r];o&&\".\"!==o&&(\"..\"===o?n.length&&\"..\"!==n[n.length-1]?n.pop():e&&n.push(\"..\"):n.push(o))}return n}var s=/^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/,a={};function u(t){return s.exec(t).slice(1)}a.resolve=function(){for(var t=\"\",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var r=n>=0?arguments[n]:process.cwd();if(!o(r))throw new TypeError(\"Arguments to path.resolve must be strings\");r&&(t=r+\"/\"+t,e=\"/\"===r.charAt(0))}return(e?\"/\":\"\")+(t=i(t.split(\"/\"),!e).join(\"/\"))||\".\"},a.normalize=function(t){var e=a.isAbsolute(t),n=\"/\"===t.substr(-1);return(t=i(t.split(\"/\"),!e).join(\"/\"))||e||(t=\".\"),t&&n&&(t+=\"/\"),(e?\"/\":\"\")+t},a.isAbsolute=function(t){return\"/\"===t.charAt(0)},a.join=function(){for(var t=\"\",e=0;e<arguments.length;e++){var n=arguments[e];if(!o(n))throw new TypeError(\"Arguments to path.join must be strings\");n&&(t+=t?\"/\"+n:n)}return a.normalize(t)},a.relative=function(t,e){function n(t){for(var e=0;e<t.length&&\"\"===t[e];e++);for(var n=t.length-1;n>=0&&\"\"===t[n];n--);return e>n?[]:t.slice(e,n+1)}t=a.resolve(t).substr(1),e=a.resolve(e).substr(1);for(var r=n(t.split(\"/\")),o=n(e.split(\"/\")),i=Math.min(r.length,o.length),s=i,u=0;u<i;u++)if(r[u]!==o[u]){s=u;break}var c=[];for(u=s;u<r.length;u++)c.push(\"..\");return(c=c.concat(o.slice(s))).join(\"/\")},a._makeLong=function(t){return t},a.dirname=function(t){var e=u(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):\".\"},a.basename=function(t,e){var n=u(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},a.extname=function(t){return u(t)[3]},a.format=function(t){if(!r.isObject(t))throw new TypeError(\"Parameter 'pathObject' must be an object, not \"+typeof t);var e=t.root||\"\";if(!o(e))throw new TypeError(\"'pathObject.root' must be a string or undefined, not \"+typeof t.root);return(t.dir?t.dir+a.sep:\"\")+(t.base||\"\")},a.parse=function(t){if(!o(t))throw new TypeError(\"Parameter 'pathString' must be a string, not \"+typeof t);var e=u(t);if(!e||4!==e.length)throw new TypeError(\"Invalid path '\"+t+\"'\");return e[1]=e[1]||\"\",e[2]=e[2]||\"\",e[3]=e[3]||\"\",{root:e[0],dir:e[0]+e[1].slice(0,e[1].length-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},a.sep=\"/\",a.delimiter=\":\",t.exports=a},647:(t,e)=>{var n=Object.prototype.hasOwnProperty;function r(t){try{return decodeURIComponent(t.replace(/\\+/g,\" \"))}catch(t){return null}}function o(t){try{return encodeURIComponent(t)}catch(t){return null}}e.stringify=function(t,e){e=e||\"\";var r,i,s=[];for(i in\"string\"!=typeof e&&(e=\"?\"),t)if(n.call(t,i)){if((r=t[i])||null!=r&&!isNaN(r)||(r=\"\"),i=o(i),r=o(r),null===i||null===r)continue;s.push(i+\"=\"+r)}return s.length?e+s.join(\"&\"):\"\"},e.parse=function(t){for(var e,n=/([^=?#&]+)=?([^&]*)/g,o={};e=n.exec(t);){var i=r(e[1]),s=r(e[2]);null===i||null===s||i in o||(o[i]=s)}return o}},670:t=>{t.exports=function(t,e){if(e=e.split(\":\")[0],!(t=+t))return!1;switch(e){case\"http\":case\"ws\":return 80!==t;case\"https\":case\"wss\":return 443!==t;case\"ftp\":return 21!==t;case\"gopher\":return 70!==t;case\"file\":return!1}return 0!==t}},494:t=>{const e=/^[-+]?0x[a-fA-F0-9]+$/,n=/^([\\-\\+])?(0*)(\\.[0-9]+([eE]\\-?[0-9]+)?|[0-9]+(\\.[0-9]+([eE]\\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const r={hex:!0,leadingZeros:!0,decimalPoint:\".\",eNotation:!0};t.exports=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o=Object.assign({},r,o),!t||\"string\"!=typeof t)return t;let i=t.trim();if(void 0!==o.skipLike&&o.skipLike.test(i))return t;if(o.hex&&e.test(i))return Number.parseInt(i,16);{const e=n.exec(i);if(e){const n=e[1],r=e[2];let a=(s=e[3])&&-1!==s.indexOf(\".\")?(\".\"===(s=s.replace(/0+$/,\"\"))?s=\"0\":\".\"===s[0]?s=\"0\"+s:\".\"===s[s.length-1]&&(s=s.substr(0,s.length-1)),s):s;const u=e[4]||e[6];if(!o.leadingZeros&&r.length>0&&n&&\".\"!==i[2])return t;if(!o.leadingZeros&&r.length>0&&!n&&\".\"!==i[1])return t;{const e=Number(i),s=\"\"+e;return-1!==s.search(/[eE]/)||u?o.eNotation?e:t:-1!==i.indexOf(\".\")?\"0\"===s&&\"\"===a||s===a||n&&s===\"-\"+a?e:t:r?a===s||n+a===s?e:t:i===s||i===n+s?e:t}}return t}var s}},737:(t,e,n)=>{var r=n(670),o=n(647),i=/^[\\x00-\\x20\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]+/,s=/[\\n\\r\\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//,u=/:\\d+$/,c=/^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\\\/]+)?([\\S\\s]*)/i,l=/^[a-zA-Z]:/;function h(t){return(t||\"\").toString().replace(i,\"\")}var p=[[\"#\",\"hash\"],[\"?\",\"query\"],function(t,e){return g(e.protocol)?t.replace(/\\\\/g,\"/\"):t},[\"/\",\"pathname\"],[\"@\",\"auth\",1],[NaN,\"host\",void 0,1,1],[/:(\\d*)$/,\"port\",void 0,1],[NaN,\"hostname\",void 0,1,1]],f={hash:1,query:1};function d(t){var e,n=(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{}).location||{},r={},o=typeof(t=t||n);if(\"blob:\"===t.protocol)r=new y(unescape(t.pathname),{});else if(\"string\"===o)for(e in r=new y(t,{}),f)delete r[e];else if(\"object\"===o){for(e in t)e in f||(r[e]=t[e]);void 0===r.slashes&&(r.slashes=a.test(t.href))}return r}function g(t){return\"file:\"===t||\"ftp:\"===t||\"http:\"===t||\"https:\"===t||\"ws:\"===t||\"wss:\"===t}function m(t,e){t=(t=h(t)).replace(s,\"\"),e=e||{};var n,r=c.exec(t),o=r[1]?r[1].toLowerCase():\"\",i=!!r[2],a=!!r[3],u=0;return i?a?(n=r[2]+r[3]+r[4],u=r[2].length+r[3].length):(n=r[2]+r[4],u=r[2].length):a?(n=r[3]+r[4],u=r[3].length):n=r[4],\"file:\"===o?u>=2&&(n=n.slice(2)):g(o)?n=r[4]:o?i&&(n=n.slice(2)):u>=2&&g(e.protocol)&&(n=r[4]),{protocol:o,slashes:i||g(o),slashesCount:u,rest:n}}function y(t,e,n){if(t=(t=h(t)).replace(s,\"\"),!(this instanceof y))return new y(t,e,n);var i,a,u,c,f,v,b=p.slice(),w=typeof e,x=this,N=0;for(\"object\"!==w&&\"string\"!==w&&(n=e,e=null),n&&\"function\"!=typeof n&&(n=o.parse),i=!(a=m(t||\"\",e=d(e))).protocol&&!a.slashes,x.slashes=a.slashes||i&&e.slashes,x.protocol=a.protocol||e.protocol||\"\",t=a.rest,(\"file:\"===a.protocol&&(2!==a.slashesCount||l.test(t))||!a.slashes&&(a.protocol||a.slashesCount<2||!g(x.protocol)))&&(b[3]=[/(.*)/,\"pathname\"]);N<b.length;N++)\"function\"!=typeof(c=b[N])?(u=c[0],v=c[1],u!=u?x[v]=t:\"string\"==typeof u?~(f=\"@\"===u?t.lastIndexOf(u):t.indexOf(u))&&(\"number\"==typeof c[2]?(x[v]=t.slice(0,f),t=t.slice(f+c[2])):(x[v]=t.slice(f),t=t.slice(0,f))):(f=u.exec(t))&&(x[v]=f[1],t=t.slice(0,f.index)),x[v]=x[v]||i&&c[3]&&e[v]||\"\",c[4]&&(x[v]=x[v].toLowerCase())):t=c(t,x);n&&(x.query=n(x.query)),i&&e.slashes&&\"/\"!==x.pathname.charAt(0)&&(\"\"!==x.pathname||\"\"!==e.pathname)&&(x.pathname=function(t,e){if(\"\"===t)return e;for(var n=(e||\"/\").split(\"/\").slice(0,-1).concat(t.split(\"/\")),r=n.length,o=n[r-1],i=!1,s=0;r--;)\".\"===n[r]?n.splice(r,1):\"..\"===n[r]?(n.splice(r,1),s++):s&&(0===r&&(i=!0),n.splice(r,1),s--);return i&&n.unshift(\"\"),\".\"!==o&&\"..\"!==o||n.push(\"\"),n.join(\"/\")}(x.pathname,e.pathname)),\"/\"!==x.pathname.charAt(0)&&g(x.protocol)&&(x.pathname=\"/\"+x.pathname),r(x.port,x.protocol)||(x.host=x.hostname,x.port=\"\"),x.username=x.password=\"\",x.auth&&(~(f=x.auth.indexOf(\":\"))?(x.username=x.auth.slice(0,f),x.username=encodeURIComponent(decodeURIComponent(x.username)),x.password=x.auth.slice(f+1),x.password=encodeURIComponent(decodeURIComponent(x.password))):x.username=encodeURIComponent(decodeURIComponent(x.auth)),x.auth=x.password?x.username+\":\"+x.password:x.username),x.origin=\"file:\"!==x.protocol&&g(x.protocol)&&x.host?x.protocol+\"//\"+x.host:\"null\",x.href=x.toString()}y.prototype={set:function(t,e,n){var i=this;switch(t){case\"query\":\"string\"==typeof e&&e.length&&(e=(n||o.parse)(e)),i[t]=e;break;case\"port\":i[t]=e,r(e,i.protocol)?e&&(i.host=i.hostname+\":\"+e):(i.host=i.hostname,i[t]=\"\");break;case\"hostname\":i[t]=e,i.port&&(e+=\":\"+i.port),i.host=e;break;case\"host\":i[t]=e,u.test(e)?(e=e.split(\":\"),i.port=e.pop(),i.hostname=e.join(\":\")):(i.hostname=e,i.port=\"\");break;case\"protocol\":i.protocol=e.toLowerCase(),i.slashes=!n;break;case\"pathname\":case\"hash\":if(e){var s=\"pathname\"===t?\"/\":\"#\";i[t]=e.charAt(0)!==s?s+e:e}else i[t]=e;break;case\"username\":case\"password\":i[t]=encodeURIComponent(e);break;case\"auth\":var a=e.indexOf(\":\");~a?(i.username=e.slice(0,a),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=e.slice(a+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(e))}for(var c=0;c<p.length;c++){var l=p[c];l[4]&&(i[l[1]]=i[l[1]].toLowerCase())}return i.auth=i.password?i.username+\":\"+i.password:i.username,i.origin=\"file:\"!==i.protocol&&g(i.protocol)&&i.host?i.protocol+\"//\"+i.host:\"null\",i.href=i.toString(),i},toString:function(t){t&&\"function\"==typeof t||(t=o.stringify);var e,n=this,r=n.host,i=n.protocol;i&&\":\"!==i.charAt(i.length-1)&&(i+=\":\");var s=i+(n.protocol&&n.slashes||g(n.protocol)?\"//\":\"\");return n.username?(s+=n.username,n.password&&(s+=\":\"+n.password),s+=\"@\"):n.password?(s+=\":\"+n.password,s+=\"@\"):\"file:\"!==n.protocol&&g(n.protocol)&&!r&&\"/\"!==n.pathname&&(s+=\"@\"),(\":\"===r[r.length-1]||u.test(n.hostname)&&!n.port)&&(r+=\":\"),s+=r+n.pathname,(e=\"object\"==typeof n.query?t(n.query):n.query)&&(s+=\"?\"!==e.charAt(0)?\"?\"+e:e),n.hash&&(s+=n.hash),s}},y.extractProtocol=m,y.location=d,y.trimLeft=h,y.qs=o,t.exports=y},410:()=>{},388:()=>{},805:()=>{},345:()=>{},800:()=>{}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var r={};n.d(r,{hT:()=>C,O4:()=>I,Kd:()=>S,YK:()=>$,UU:()=>en,Gu:()=>F,ky:()=>oe,h4:()=>ne,ch:()=>re,hq:()=>Xt,i5:()=>ie});var o=n(737),i=n.n(o);function s(t){if(!a(t))throw new Error(\"Parameter was not an error\")}function a(t){return!!t&&\"object\"==typeof t&&\"[object Error]\"===(e=t,Object.prototype.toString.call(e))||t instanceof Error;var e}class u extends Error{constructor(t,e){const n=[...arguments],{options:r,shortMessage:o}=function(t){let e,n=\"\";if(0===t.length)e={};else if(a(t[0]))e={cause:t[0]},n=t.slice(1).join(\" \")||\"\";else if(t[0]&&\"object\"==typeof t[0])e=Object.assign({},t[0]),n=t.slice(1).join(\" \")||\"\";else{if(\"string\"!=typeof t[0])throw new Error(\"Invalid arguments passed to Layerr\");e={},n=n=t.join(\" \")||\"\"}return{options:e,shortMessage:n}}(n);let i=o;if(r.cause&&(i=`${i}: ${r.cause.message}`),super(i),this.message=i,r.name&&\"string\"==typeof r.name?this.name=r.name:this.name=\"Layerr\",r.cause&&Object.defineProperty(this,\"_cause\",{value:r.cause}),Object.defineProperty(this,\"_info\",{value:{}}),r.info&&\"object\"==typeof r.info&&Object.assign(this._info,r.info),Error.captureStackTrace){const t=r.constructorOpt||this.constructor;Error.captureStackTrace(this,t)}}static cause(t){return s(t),t._cause&&a(t._cause)?t._cause:null}static fullStack(t){s(t);const e=u.cause(t);return e?`${t.stack}\\ncaused by: ${u.fullStack(e)}`:t.stack??\"\"}static info(t){s(t);const e={},n=u.cause(t);return n&&Object.assign(e,u.info(n)),t._info&&Object.assign(e,t._info),e}toString(){let t=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(t=`${t}: ${this.message}`),t}}var c=n(47),l=n.n(c);const h=\"__PATH_SEPARATOR_POSIX__\",p=\"__PATH_SEPARATOR_WINDOWS__\";function f(t){try{const e=t.replace(/\\//g,h).replace(/\\\\\\\\/g,p);return encodeURIComponent(e).split(p).join(\"\\\\\\\\\").split(h).join(\"/\")}catch(t){throw new u(t,\"Failed encoding path\")}}function d(t){return t.startsWith(\"/\")?t:\"/\"+t}function g(t){let e=t;return\"/\"!==e[0]&&(e=\"/\"+e),/^.+\\/$/.test(e)&&(e=e.substr(0,e.length-1)),e}function m(t){let e=new(i())(t).pathname;return e.length<=0&&(e=\"/\"),g(e)}function y(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){return function(t){var e=[];if(0===t.length)return\"\";if(\"string\"!=typeof t[0])throw new TypeError(\"Url must be a string. Received \"+t[0]);if(t[0].match(/^[^/:]+:\\/*$/)&&t.length>1){var n=t.shift();t[0]=n+t[0]}t[0].match(/^file:\\/\\/\\//)?t[0]=t[0].replace(/^([^/:]+):\\/*/,\"$1:///\"):t[0]=t[0].replace(/^([^/:]+):\\/*/,\"$1://\");for(var r=0;r<t.length;r++){var o=t[r];if(\"string\"!=typeof o)throw new TypeError(\"Url must be a string. Received \"+o);\"\"!==o&&(r>0&&(o=o.replace(/^[\\/]+/,\"\")),o=r<t.length-1?o.replace(/[\\/]+$/,\"\"):o.replace(/[\\/]+$/,\"/\"),e.push(o))}var i=e.join(\"/\"),s=(i=i.replace(/\\/(\\?|&|#[^!])/g,\"$1\")).split(\"?\");return s.shift()+(s.length>0?\"?\":\"\")+s.join(\"&\")}(\"object\"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}(e.reduce(((t,e,n)=>((0===n||\"/\"!==e||\"/\"===e&&\"/\"!==t[t.length-1])&&t.push(e),t)),[]))}var v=n(542),b=n.n(v);const w=\"abcdef0123456789\";function x(t,e){const n=t.url.replace(\"//\",\"\"),r=-1==n.indexOf(\"/\")?\"/\":n.slice(n.indexOf(\"/\")),o=t.method?t.method.toUpperCase():\"GET\",i=!!/(^|,)\\s*auth\\s*($|,)/.test(e.qop)&&\"auth\",s=`00000000${e.nc}`.slice(-8),a=function(t,e,n,r,o,i,s){const a=s||b()(`${e}:${n}:${r}`);return t&&\"md5-sess\"===t.toLowerCase()?b()(`${a}:${o}:${i}`):a}(e.algorithm,e.username,e.realm,e.password,e.nonce,e.cnonce,e.ha1),u=b()(`${o}:${r}`),c=i?b()(`${a}:${e.nonce}:${s}:${e.cnonce}:${i}:${u}`):b()(`${a}:${e.nonce}:${u}`),l={username:e.username,realm:e.realm,nonce:e.nonce,uri:r,qop:i,response:c,nc:s,cnonce:e.cnonce,algorithm:e.algorithm,opaque:e.opaque},h=[];for(const t in l)l[t]&&(\"qop\"===t||\"nc\"===t||\"algorithm\"===t?h.push(`${t}=${l[t]}`):h.push(`${t}=\"${l[t]}\"`));return`Digest ${h.join(\", \")}`}function N(t){return\"digest\"===(t.headers&&t.headers.get(\"www-authenticate\")||\"\").split(/\\s/)[0].toLowerCase()}var A=n(101),P=n.n(A);function O(t){return P().decode(t)}function E(t,e){var n;return`Basic ${n=`${t}:${e}`,P().encode(n)}`}const T=\"undefined\"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:\"undefined\"!=typeof window?window:globalThis,j=T.fetch.bind(T),S=(T.Headers,T.Request),$=T.Response;let C=function(t){return t.Auto=\"auto\",t.Digest=\"digest\",t.None=\"none\",t.Password=\"password\",t.Token=\"token\",t}({}),I=function(t){return t.DataTypeNoLength=\"data-type-no-length\",t.InvalidAuthType=\"invalid-auth-type\",t.InvalidOutputFormat=\"invalid-output-format\",t.LinkUnsupportedAuthType=\"link-unsupported-auth\",t.InvalidUpdateRange=\"invalid-update-range\",t.NotSupported=\"not-supported\",t}({});function k(t,e,n,r,o){switch(t.authType){case C.Auto:e&&n&&(t.headers.Authorization=E(e,n));break;case C.Digest:t.digest=function(t,e,n){return{username:t,password:e,ha1:n,nc:0,algorithm:\"md5\",hasDigestAuth:!1}}(e,n,o);break;case C.None:break;case C.Password:t.headers.Authorization=E(e,n);break;case C.Token:t.headers.Authorization=`${(i=r).token_type} ${i.access_token}`;break;default:throw new u({info:{code:I.InvalidAuthType}},`Invalid auth type: ${t.authType}`)}var i}n(345),n(800);const R=\"@@HOTPATCHER\",L=()=>{};function _(t){return{original:t,methods:[t],final:!1}}class M{constructor(){this._configuration={registry:{},getEmptyAction:\"null\"},this.__type__=R}get configuration(){return this._configuration}get getEmptyAction(){return this.configuration.getEmptyAction}set getEmptyAction(t){this.configuration.getEmptyAction=t}control(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t||t.__type__!==R)throw new Error(\"Failed taking control of target HotPatcher instance: Invalid type or object\");return Object.keys(t.configuration.registry).forEach((n=>{this.configuration.registry.hasOwnProperty(n)?e&&(this.configuration.registry[n]=Object.assign({},t.configuration.registry[n])):this.configuration.registry[n]=Object.assign({},t.configuration.registry[n])})),t._configuration=this.configuration,this}execute(t){const e=this.get(t)||L;for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return e(...r)}get(t){const e=this.configuration.registry[t];if(!e)switch(this.getEmptyAction){case\"null\":return null;case\"throw\":throw new Error(`Failed handling method request: No method provided for override: ${t}`);default:throw new Error(`Failed handling request which resulted in an empty method: Invalid empty-action specified: ${this.getEmptyAction}`)}return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0===e.length)throw new Error(\"Failed creating sequence: No functions provided\");return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let o=n;const i=this;for(;e.length>0;)o=[e.shift().apply(i,o)];return o[0]}}(...e.methods)}isPatched(t){return!!this.configuration.registry[t]}patch(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{chain:r=!1}=n;if(this.configuration.registry[t]&&this.configuration.registry[t].final)throw new Error(`Failed patching '${t}': Method marked as being final`);if(\"function\"!=typeof e)throw new Error(`Failed patching '${t}': Provided method is not a function`);if(r)this.configuration.registry[t]?this.configuration.registry[t].methods.push(e):this.configuration.registry[t]=_(e);else if(this.isPatched(t)){const{original:n}=this.configuration.registry[t];this.configuration.registry[t]=Object.assign(_(e),{original:n})}else this.configuration.registry[t]=_(e);return this}patchInline(t,e){this.isPatched(t)||this.patch(t,e);for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return this.execute(t,...r)}plugin(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.forEach((e=>{this.patch(t,e,{chain:!0})})),this}restore(t){if(!this.isPatched(t))throw new Error(`Failed restoring method: No method present for key: ${t}`);if(\"function\"!=typeof this.configuration.registry[t].original)throw new Error(`Failed restoring method: Original method not found or of invalid type for key: ${t}`);return this.configuration.registry[t].methods=[this.configuration.registry[t].original],this}setFinal(t){if(!this.configuration.registry.hasOwnProperty(t))throw new Error(`Failed marking '${t}' as final: No method found for key`);return this.configuration.registry[t].final=!0,this}}let U=null;function F(){return U||(U=new M),U}function D(t){return function(t){if(\"object\"!=typeof t||null===t||\"[object Object]\"!=Object.prototype.toString.call(t))return!1;if(null===Object.getPrototypeOf(t))return!0;let e=t;for(;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t)?Object.assign({},t):Object.setPrototypeOf(Object.assign({},t),Object.getPrototypeOf(t))}function B(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let r=null,o=[...e];for(;o.length>0;){const t=o.shift();r=r?V(r,t):D(t)}return r}function V(t,e){const n=D(t);return Object.keys(e).forEach((t=>{n.hasOwnProperty(t)?Array.isArray(e[t])?n[t]=Array.isArray(n[t])?[...n[t],...e[t]]:[...e[t]]:\"object\"==typeof e[t]&&e[t]?n[t]=\"object\"==typeof n[t]&&n[t]?V(n[t],e[t]):D(e[t]):n[t]=e[t]:n[t]=e[t]})),n}function W(t){const e={};for(const n of t.keys())e[n]=t.get(n);return e}function z(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0===e.length)return{};const r={};return e.reduce(((t,e)=>(Object.keys(e).forEach((n=>{const o=n.toLowerCase();r.hasOwnProperty(o)?t[r[o]]=e[n]:(r[o]=n,t[n]=e[n])})),t)),{})}n(805);const G=\"function\"==typeof ArrayBuffer,{toString:q}=Object.prototype;function H(t){return G&&(t instanceof ArrayBuffer||\"[object ArrayBuffer]\"===q.call(t))}function X(t){return null!=t&&null!=t.constructor&&\"function\"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function Z(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}function Y(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}const K=Z((function(t){const e=t._digest;return delete t._digest,e.hasDigestAuth&&(t=B(t,{headers:{Authorization:x(t,e)}})),Y(et(t),(function(n){let r=!1;return o=function(t){return r?t:n},(i=function(){if(401==n.status)return e.hasDigestAuth=function(t,e){if(!N(t))return!1;const n=/([a-z0-9_-]+)=(?:\"([^\"]+)\"|([a-z0-9_-]+))/gi;for(;;){const r=t.headers&&t.headers.get(\"www-authenticate\")||\"\",o=n.exec(r);if(!o)break;e[o[1]]=o[2]||o[3]}return e.nc+=1,e.cnonce=function(){let t=\"\";for(let e=0;e<32;++e)t=`${t}${w[Math.floor(16*Math.random())]}`;return t}(),!0}(n,e),function(){if(e.hasDigestAuth)return Y(et(t=B(t,{headers:{Authorization:x(t,e)}})),(function(t){return 401==t.status?e.hasDigestAuth=!1:e.nc++,r=!0,t}))}();e.nc++}())&&i.then?i.then(o):o(i);var o,i}))})),J=Z((function(t,e){return Y(et(t),(function(n){return n.ok?(e.authType=C.Password,n):401==n.status&&N(n)?(e.authType=C.Digest,k(e,e.username,e.password,void 0,void 0),t._digest=e.digest,K(t)):n}))})),Q=Z((function(t,e){return e.authType===C.Auto?J(t,e):t._digest?K(t):et(t)}));function tt(t,e,n){const r=D(t);return r.headers=z(e.headers,r.headers||{},n.headers||{}),void 0!==n.data&&(r.data=n.data),n.signal&&(r.signal=n.signal),e.httpAgent&&(r.httpAgent=e.httpAgent),e.httpsAgent&&(r.httpsAgent=e.httpsAgent),e.digest&&(r._digest=e.digest),\"boolean\"==typeof e.withCredentials&&(r.withCredentials=e.withCredentials),r}function et(t){const e=F();return e.patchInline(\"request\",(t=>e.patchInline(\"fetch\",j,t.url,function(t){let e={};const n={method:t.method};if(t.headers&&(e=z(e,t.headers)),void 0!==t.data){const[r,o]=function(t){if(\"string\"==typeof t)return[t,{}];if(X(t))return[t,{}];if(H(t))return[t,{}];if(t&&\"object\"==typeof t)return[JSON.stringify(t),{\"content-type\":\"application/json\"}];throw new Error(\"Unable to convert request body: Unexpected body type: \"+typeof t)}(t.data);n.body=r,e=z(e,o)}return t.signal&&(n.signal=t.signal),t.withCredentials&&(n.credentials=\"include\"),n.headers=e,n}(t))),t)}var nt=n(285);const rt=t=>{if(\"string\"!=typeof t)throw new TypeError(\"invalid pattern\");if(t.length>65536)throw new TypeError(\"pattern is too long\")},ot={\"[:alnum:]\":[\"\\\\p{L}\\\\p{Nl}\\\\p{Nd}\",!0],\"[:alpha:]\":[\"\\\\p{L}\\\\p{Nl}\",!0],\"[:ascii:]\":[\"\\\\x00-\\\\x7f\",!1],\"[:blank:]\":[\"\\\\p{Zs}\\\\t\",!0],\"[:cntrl:]\":[\"\\\\p{Cc}\",!0],\"[:digit:]\":[\"\\\\p{Nd}\",!0],\"[:graph:]\":[\"\\\\p{Z}\\\\p{C}\",!0,!0],\"[:lower:]\":[\"\\\\p{Ll}\",!0],\"[:print:]\":[\"\\\\p{C}\",!0],\"[:punct:]\":[\"\\\\p{P}\",!0],\"[:space:]\":[\"\\\\p{Z}\\\\t\\\\r\\\\n\\\\v\\\\f\",!0],\"[:upper:]\":[\"\\\\p{Lu}\",!0],\"[:word:]\":[\"\\\\p{L}\\\\p{Nl}\\\\p{Nd}\\\\p{Pc}\",!0],\"[:xdigit:]\":[\"A-Fa-f0-9\",!1]},it=t=>t.replace(/[[\\]\\\\-]/g,\"\\\\$&\"),st=t=>t.join(\"\"),at=(t,e)=>{const n=e;if(\"[\"!==t.charAt(n))throw new Error(\"not in a brace expression\");const r=[],o=[];let i=n+1,s=!1,a=!1,u=!1,c=!1,l=n,h=\"\";t:for(;i<t.length;){const e=t.charAt(i);if(\"!\"!==e&&\"^\"!==e||i!==n+1){if(\"]\"===e&&s&&!u){l=i+1;break}if(s=!0,\"\\\\\"!==e||u){if(\"[\"===e&&!u)for(const[e,[s,u,c]]of Object.entries(ot))if(t.startsWith(e,i)){if(h)return[\"$.\",!1,t.length-n,!0];i+=e.length,c?o.push(s):r.push(s),a=a||u;continue t}u=!1,h?(e>h?r.push(it(h)+\"-\"+it(e)):e===h&&r.push(it(e)),h=\"\",i++):t.startsWith(\"-]\",i+1)?(r.push(it(e+\"-\")),i+=2):t.startsWith(\"-\",i+1)?(h=e,i+=2):(r.push(it(e)),i++)}else u=!0,i++}else c=!0,i++}if(l<i)return[\"\",!1,0,!1];if(!r.length&&!o.length)return[\"$.\",!1,t.length-n,!0];if(0===o.length&&1===r.length&&/^\\\\?.$/.test(r[0])&&!c){return[(p=2===r[0].length?r[0].slice(-1):r[0],p.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g,\"\\\\$&\")),!1,l-n,!1]}var p;const f=\"[\"+(c?\"^\":\"\")+st(r)+\"]\",d=\"[\"+(c?\"\":\"^\")+st(o)+\"]\";return[r.length&&o.length?\"(\"+f+\"|\"+d+\")\":r.length?f:d,a,l-n,!0]},ut=function(t){let{windowsPathsNoEscape:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?t.replace(/\\[([^\\/\\\\])\\]/g,\"$1\"):t.replace(/((?!\\\\).|^)\\[([^\\/\\\\])\\]/g,\"$1$2\").replace(/\\\\([^\\/])/g,\"$1\")},ct=new Set([\"!\",\"?\",\"+\",\"*\",\"@\"]),lt=t=>ct.has(t),ht=\"(?!\\\\.)\",pt=new Set([\"[\",\".\"]),ft=new Set([\"..\",\".\"]),dt=new Set(\"().*{}+?[]^$\\\\!\"),gt=\"[^/]\",mt=gt+\"*?\",yt=gt+\"+?\";class vt{type;#t;#e;#n=!1;#r=[];#o;#i;#s;#a=!1;#u;#c;#l=!1;constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.type=t,t&&(this.#e=!0),this.#o=e,this.#t=this.#o?this.#o.#t:this,this.#u=this.#t===this?n:this.#t.#u,this.#s=this.#t===this?[]:this.#t.#s,\"!\"!==t||this.#t.#a||this.#s.push(this),this.#i=this.#o?this.#o.#r.length:0}get hasMagic(){if(void 0!==this.#e)return this.#e;for(const t of this.#r)if(\"string\"!=typeof t&&(t.type||t.hasMagic))return this.#e=!0;return this.#e}toString(){return void 0!==this.#c?this.#c:this.type?this.#c=this.type+\"(\"+this.#r.map((t=>String(t))).join(\"|\")+\")\":this.#c=this.#r.map((t=>String(t))).join(\"\")}#h(){if(this!==this.#t)throw new Error(\"should only call on root\");if(this.#a)return this;let t;for(this.toString(),this.#a=!0;t=this.#s.pop();){if(\"!\"!==t.type)continue;let e=t,n=e.#o;for(;n;){for(let r=e.#i+1;!n.type&&r<n.#r.length;r++)for(const e of t.#r){if(\"string\"==typeof e)throw new Error(\"string part in extglob AST??\");e.copyIn(n.#r[r])}e=n,n=e.#o}}return this}push(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const t of e)if(\"\"!==t){if(\"string\"!=typeof t&&!(t instanceof vt&&t.#o===this))throw new Error(\"invalid part: \"+t);this.#r.push(t)}}toJSON(){const t=null===this.type?this.#r.slice().map((t=>\"string\"==typeof t?t:t.toJSON())):[this.type,...this.#r.map((t=>t.toJSON()))];return this.isStart()&&!this.type&&t.unshift([]),this.isEnd()&&(this===this.#t||this.#t.#a&&\"!\"===this.#o?.type)&&t.push({}),t}isStart(){if(this.#t===this)return!0;if(!this.#o?.isStart())return!1;if(0===this.#i)return!0;const t=this.#o;for(let e=0;e<this.#i;e++){const n=t.#r[e];if(!(n instanceof vt&&\"!\"===n.type))return!1}return!0}isEnd(){if(this.#t===this)return!0;if(\"!\"===this.#o?.type)return!0;if(!this.#o?.isEnd())return!1;if(!this.type)return this.#o?.isEnd();const t=this.#o?this.#o.#r.length:0;return this.#i===t-1}copyIn(t){\"string\"==typeof t?this.push(t):this.push(t.clone(this))}clone(t){const e=new vt(this.type,t);for(const t of this.#r)e.copyIn(t);return e}static#p(t,e,n,r){let o=!1,i=!1,s=-1,a=!1;if(null===e.type){let u=n,c=\"\";for(;u<t.length;){const n=t.charAt(u++);if(o||\"\\\\\"===n)o=!o,c+=n;else if(i)u===s+1?\"^\"!==n&&\"!\"!==n||(a=!0):\"]\"!==n||u===s+2&&a||(i=!1),c+=n;else if(\"[\"!==n)if(r.noext||!lt(n)||\"(\"!==t.charAt(u))c+=n;else{e.push(c),c=\"\";const o=new vt(n,e);u=vt.#p(t,o,u,r),e.push(o)}else i=!0,s=u,a=!1,c+=n}return e.push(c),u}let u=n+1,c=new vt(null,e);const l=[];let h=\"\";for(;u<t.length;){const n=t.charAt(u++);if(o||\"\\\\\"===n)o=!o,h+=n;else if(i)u===s+1?\"^\"!==n&&\"!\"!==n||(a=!0):\"]\"!==n||u===s+2&&a||(i=!1),h+=n;else if(\"[\"!==n)if(lt(n)&&\"(\"===t.charAt(u)){c.push(h),h=\"\";const e=new vt(n,c);c.push(e),u=vt.#p(t,e,u,r)}else if(\"|\"!==n){if(\")\"===n)return\"\"===h&&0===e.#r.length&&(e.#l=!0),c.push(h),h=\"\",e.push(...l,c),u;h+=n}else c.push(h),h=\"\",l.push(c),c=new vt(null,e);else i=!0,s=u,a=!1,h+=n}return e.type=null,e.#e=void 0,e.#r=[t.substring(n-1)],u}static fromGlob(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new vt(null,void 0,e);return vt.#p(t,n,0,e),n}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();const t=this.toString(),[e,n,r,o]=this.toRegExpSource();if(!(r||this.#e||this.#u.nocase&&!this.#u.nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase()))return n;const i=(this.#u.nocase?\"i\":\"\")+(o?\"u\":\"\");return Object.assign(new RegExp(`^${e}$`,i),{_src:e,_glob:t})}get options(){return this.#u}toRegExpSource(t){const e=t??!!this.#u.dot;if(this.#t===this&&this.#h(),!this.type){const n=this.isStart()&&this.isEnd(),r=this.#r.map((e=>{const[r,o,i,s]=\"string\"==typeof e?vt.#f(e,this.#e,n):e.toRegExpSource(t);return this.#e=this.#e||i,this.#n=this.#n||s,r})).join(\"\");let o=\"\";if(this.isStart()&&\"string\"==typeof this.#r[0]&&(1!==this.#r.length||!ft.has(this.#r[0]))){const n=pt,i=e&&n.has(r.charAt(0))||r.startsWith(\"\\\\.\")&&n.has(r.charAt(2))||r.startsWith(\"\\\\.\\\\.\")&&n.has(r.charAt(4)),s=!e&&!t&&n.has(r.charAt(0));o=i?\"(?!(?:^|/)\\\\.\\\\.?(?:$|/))\":s?ht:\"\"}let i=\"\";return this.isEnd()&&this.#t.#a&&\"!\"===this.#o?.type&&(i=\"(?:$|\\\\/)\"),[o+r+i,ut(r),this.#e=!!this.#e,this.#n]}const n=\"*\"===this.type||\"+\"===this.type,r=\"!\"===this.type?\"(?:(?!(?:\":\"(?:\";let o=this.#d(e);if(this.isStart()&&this.isEnd()&&!o&&\"!\"!==this.type){const t=this.toString();return this.#r=[t],this.type=null,this.#e=void 0,[t,ut(this.toString()),!1,!1]}let i=!n||t||e?\"\":this.#d(!0);i===o&&(i=\"\"),i&&(o=`(?:${o})(?:${i})*?`);let s=\"\";return s=\"!\"===this.type&&this.#l?(this.isStart()&&!e?ht:\"\")+yt:r+o+(\"!\"===this.type?\"))\"+(!this.isStart()||e||t?\"\":ht)+mt+\")\":\"@\"===this.type?\")\":\"?\"===this.type?\")?\":\"+\"===this.type&&i?\")\":\"*\"===this.type&&i?\")?\":`)${this.type}`),[s,ut(o),this.#e=!!this.#e,this.#n]}#d(t){return this.#r.map((e=>{if(\"string\"==typeof e)throw new Error(\"string type in extglob ast??\");const[n,r,o,i]=e.toRegExpSource(t);return this.#n=this.#n||i,n})).filter((t=>!(this.isStart()&&this.isEnd()&&!t))).join(\"|\")}static#f(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!1,o=\"\",i=!1;for(let s=0;s<t.length;s++){const a=t.charAt(s);if(r)r=!1,o+=(dt.has(a)?\"\\\\\":\"\")+a;else if(\"\\\\\"!==a){if(\"[\"===a){const[n,r,a,u]=at(t,s);if(a){o+=n,i=i||r,s+=a-1,e=e||u;continue}}\"*\"!==a?\"?\"!==a?o+=a.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g,\"\\\\$&\"):(o+=gt,e=!0):(o+=n&&\"*\"===t?yt:mt,e=!0)}else s===t.length-1?o+=\"\\\\\\\\\":r=!0}return[o,ut(t),!!e,i]}}const bt=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return rt(e),!(!n.nocomment&&\"#\"===e.charAt(0))&&new Gt(e,n).match(t)},wt=/^\\*+([^+@!?\\*\\[\\(]*)$/,xt=t=>e=>!e.startsWith(\".\")&&e.endsWith(t),Nt=t=>e=>e.endsWith(t),At=t=>(t=t.toLowerCase(),e=>!e.startsWith(\".\")&&e.toLowerCase().endsWith(t)),Pt=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),Ot=/^\\*+\\.\\*+$/,Et=t=>!t.startsWith(\".\")&&t.includes(\".\"),Tt=t=>\".\"!==t&&\"..\"!==t&&t.includes(\".\"),jt=/^\\.\\*+$/,St=t=>\".\"!==t&&\"..\"!==t&&t.startsWith(\".\"),$t=/^\\*+$/,Ct=t=>0!==t.length&&!t.startsWith(\".\"),It=t=>0!==t.length&&\".\"!==t&&\"..\"!==t,kt=/^\\?+([^+@!?\\*\\[\\(]*)?$/,Rt=t=>{let[e,n=\"\"]=t;const r=Ut([e]);return n?(n=n.toLowerCase(),t=>r(t)&&t.toLowerCase().endsWith(n)):r},Lt=t=>{let[e,n=\"\"]=t;const r=Ft([e]);return n?(n=n.toLowerCase(),t=>r(t)&&t.toLowerCase().endsWith(n)):r},_t=t=>{let[e,n=\"\"]=t;const r=Ft([e]);return n?t=>r(t)&&t.endsWith(n):r},Mt=t=>{let[e,n=\"\"]=t;const r=Ut([e]);return n?t=>r(t)&&t.endsWith(n):r},Ut=t=>{let[e]=t;const n=e.length;return t=>t.length===n&&!t.startsWith(\".\")},Ft=t=>{let[e]=t;const n=e.length;return t=>t.length===n&&\".\"!==t&&\"..\"!==t},Dt=\"object\"==typeof process&&process?\"object\"==typeof process.env&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:\"posix\";bt.sep=\"win32\"===Dt?\"\\\\\":\"/\";const Bt=Symbol(\"globstar **\");bt.GLOBSTAR=Bt,bt.filter=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>bt(n,t,e)};const Vt=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({},t,e)};bt.defaults=t=>{if(!t||\"object\"!=typeof t||!Object.keys(t).length)return bt;const e=bt;return Object.assign((function(n,r){return e(n,r,Vt(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}))}),{Minimatch:class extends e.Minimatch{constructor(e){super(e,Vt(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}static defaults(n){return e.defaults(Vt(t,n)).Minimatch}},AST:class extends e.AST{constructor(e,n){super(e,n,Vt(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}))}static fromGlob(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.AST.fromGlob(n,Vt(t,r))}},unescape:function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.unescape(n,Vt(t,r))},escape:function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.escape(n,Vt(t,r))},filter:function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.filter(n,Vt(t,r))},defaults:n=>e.defaults(Vt(t,n)),makeRe:function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.makeRe(n,Vt(t,r))},braceExpand:function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.braceExpand(n,Vt(t,r))},match:function(n,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.match(n,r,Vt(t,o))},sep:e.sep,GLOBSTAR:Bt})};const Wt=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return rt(t),e.nobrace||!/\\{(?:(?!\\{).)*\\}/.test(t)?[t]:nt(t)};bt.braceExpand=Wt,bt.makeRe=function(t){return new Gt(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).makeRe()},bt.match=function(t,e){const n=new Gt(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return t=t.filter((t=>n.match(t))),n.options.nonull&&!t.length&&t.push(e),t};const zt=/[?*]|[+@!]\\(.*?\\)|\\[|\\]/;class Gt{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};rt(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||Dt,this.isWindows=\"win32\"===this.platform,this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||!1===e.allowWindowsEscape,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\\\/g,\"/\")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=void 0!==e.windowsNoMagicRoot?e.windowsNoMagicRoot:!(!this.isWindows||!this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const t of this.set)for(const e of t)if(\"string\"!=typeof e)return!0;return!1}debug(){}make(){const t=this.pattern,e=this.options;if(!e.nocomment&&\"#\"===t.charAt(0))return void(this.comment=!0);if(!t)return void(this.empty=!0);this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=function(){return console.error(...arguments)}),this.debug(this.pattern,this.globSet);const n=this.globSet.map((t=>this.slashSplit(t)));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let r=this.globParts.map(((t,e,n)=>{if(this.isWindows&&this.windowsNoMagicRoot){const e=!(\"\"!==t[0]||\"\"!==t[1]||\"?\"!==t[2]&&zt.test(t[2])||zt.test(t[3])),n=/^[a-z]:/i.test(t[0]);if(e)return[...t.slice(0,4),...t.slice(4).map((t=>this.parse(t)))];if(n)return[t[0],...t.slice(1).map((t=>this.parse(t)))]}return t.map((t=>this.parse(t)))}));if(this.debug(this.pattern,r),this.set=r.filter((t=>-1===t.indexOf(!1))),this.isWindows)for(let t=0;t<this.set.length;t++){const e=this.set[t];\"\"===e[0]&&\"\"===e[1]&&\"?\"===this.globParts[t][2]&&\"string\"==typeof e[3]&&/^[a-z]:$/i.test(e[3])&&(e[2]=\"?\")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let e=0;e<t.length;e++)for(let n=0;n<t[e].length;n++)\"**\"===t[e][n]&&(t[e][n]=\"*\");const{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):t=e>=1?this.levelOneOptimize(t):this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map((t=>{let e=-1;for(;-1!==(e=t.indexOf(\"**\",e+1));){let n=e;for(;\"**\"===t[n+1];)n++;n!==e&&t.splice(e,n-e)}return t}))}levelOneOptimize(t){return t.map((t=>0===(t=t.reduce(((t,e)=>{const n=t[t.length-1];return\"**\"===e&&\"**\"===n?t:\"..\"===e&&n&&\"..\"!==n&&\".\"!==n&&\"**\"!==n?(t.pop(),t):(t.push(e),t)}),[])).length?[\"\"]:t))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let n=1;n<t.length-1;n++){const r=t[n];1===n&&\"\"===r&&\"\"===t[0]||\".\"!==r&&\"\"!==r||(e=!0,t.splice(n,1),n--)}\".\"!==t[0]||2!==t.length||\".\"!==t[1]&&\"\"!==t[1]||(e=!0,t.pop())}let n=0;for(;-1!==(n=t.indexOf(\"..\",n+1));){const r=t[n-1];r&&\".\"!==r&&\"..\"!==r&&\"**\"!==r&&(e=!0,t.splice(n-1,2),n-=2)}}while(e);return 0===t.length?[\"\"]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let n of t){let r=-1;for(;-1!==(r=n.indexOf(\"**\",r+1));){let o=r;for(;\"**\"===n[o+1];)o++;o>r&&n.splice(r+1,o-r);let i=n[r+1];const s=n[r+2],a=n[r+3];if(\"..\"!==i)continue;if(!s||\".\"===s||\"..\"===s||!a||\".\"===a||\"..\"===a)continue;e=!0,n.splice(r,1);const u=n.slice(0);u[r]=\"**\",t.push(u),r--}if(!this.preserveMultipleSlashes){for(let t=1;t<n.length-1;t++){const r=n[t];1===t&&\"\"===r&&\"\"===n[0]||\".\"!==r&&\"\"!==r||(e=!0,n.splice(t,1),t--)}\".\"!==n[0]||2!==n.length||\".\"!==n[1]&&\"\"!==n[1]||(e=!0,n.pop())}let o=0;for(;-1!==(o=n.indexOf(\"..\",o+1));){const t=n[o-1];if(t&&\".\"!==t&&\"..\"!==t&&\"**\"!==t){e=!0;const t=1===o&&\"**\"===n[o+1]?[\".\"]:[];n.splice(o-1,2,...t),0===n.length&&n.push(\"\"),o-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let n=e+1;n<t.length;n++){const r=this.partsMatch(t[e],t[n],!this.preserveMultipleSlashes);if(r){t[e]=[],t[n]=r;break}}return t.filter((t=>t.length))}partsMatch(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0,o=0,i=[],s=\"\";for(;r<t.length&&o<e.length;)if(t[r]===e[o])i.push(\"b\"===s?e[o]:t[r]),r++,o++;else if(n&&\"**\"===t[r]&&e[o]===t[r+1])i.push(t[r]),r++;else if(n&&\"**\"===e[o]&&t[r]===e[o+1])i.push(e[o]),o++;else if(\"*\"!==t[r]||!e[o]||!this.options.dot&&e[o].startsWith(\".\")||\"**\"===e[o]){if(\"*\"!==e[o]||!t[r]||!this.options.dot&&t[r].startsWith(\".\")||\"**\"===t[r])return!1;if(\"a\"===s)return!1;s=\"b\",i.push(e[o]),r++,o++}else{if(\"b\"===s)return!1;s=\"a\",i.push(t[r]),r++,o++}return t.length===e.length&&i}parseNegate(){if(this.nonegate)return;const t=this.pattern;let e=!1,n=0;for(let r=0;r<t.length&&\"!\"===t.charAt(r);r++)e=!e,n++;n&&(this.pattern=t.slice(n)),this.negate=e}matchOne(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=this.options;if(this.isWindows){const n=\"string\"==typeof t[0]&&/^[a-z]:$/i.test(t[0]),r=!n&&\"\"===t[0]&&\"\"===t[1]&&\"?\"===t[2]&&/^[a-z]:$/i.test(t[3]),o=\"string\"==typeof e[0]&&/^[a-z]:$/i.test(e[0]),i=r?3:n?0:void 0,s=!o&&\"\"===e[0]&&\"\"===e[1]&&\"?\"===e[2]&&\"string\"==typeof e[3]&&/^[a-z]:$/i.test(e[3])?3:o?0:void 0;if(\"number\"==typeof i&&\"number\"==typeof s){const[n,r]=[t[i],e[s]];n.toLowerCase()===r.toLowerCase()&&(e[s]=n,s>i?e=e.slice(s):i>s&&(t=t.slice(i)))}}const{optimizationLevel:o=1}=this.options;o>=2&&(t=this.levelTwoFileOptimize(t)),this.debug(\"matchOne\",this,{file:t,pattern:e}),this.debug(\"matchOne\",t.length,e.length);for(var i=0,s=0,a=t.length,u=e.length;i<a&&s<u;i++,s++){this.debug(\"matchOne loop\");var c=e[s],l=t[i];if(this.debug(e,c,l),!1===c)return!1;if(c===Bt){this.debug(\"GLOBSTAR\",[e,c,l]);var h=i,p=s+1;if(p===u){for(this.debug(\"** at the end\");i<a;i++)if(\".\"===t[i]||\"..\"===t[i]||!r.dot&&\".\"===t[i].charAt(0))return!1;return!0}for(;h<a;){var f=t[h];if(this.debug(\"\\nglobstar while\",t,h,e,p,f),this.matchOne(t.slice(h),e.slice(p),n))return this.debug(\"globstar found match!\",h,a,f),!0;if(\".\"===f||\"..\"===f||!r.dot&&\".\"===f.charAt(0)){this.debug(\"dot detected!\",t,h,e,p);break}this.debug(\"globstar swallow a segment, and continue\"),h++}return!(!n||(this.debug(\"\\n>>> no match, partial?\",t,h,e,p),h!==a))}let o;if(\"string\"==typeof c?(o=l===c,this.debug(\"string match\",c,l,o)):(o=c.test(l),this.debug(\"pattern match\",c,l,o)),!o)return!1}if(i===a&&s===u)return!0;if(i===a)return n;if(s===u)return i===a-1&&\"\"===t[i];throw new Error(\"wtf?\")}braceExpand(){return Wt(this.pattern,this.options)}parse(t){rt(t);const e=this.options;if(\"**\"===t)return Bt;if(\"\"===t)return\"\";let n,r=null;(n=t.match($t))?r=e.dot?It:Ct:(n=t.match(wt))?r=(e.nocase?e.dot?Pt:At:e.dot?Nt:xt)(n[1]):(n=t.match(kt))?r=(e.nocase?e.dot?Lt:Rt:e.dot?_t:Mt)(n):(n=t.match(Ot))?r=e.dot?Tt:Et:(n=t.match(jt))&&(r=St);const o=vt.fromGlob(t,this.options).toMMPattern();return r&&\"object\"==typeof o&&Reflect.defineProperty(o,\"test\",{value:r}),o}makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;const t=this.set;if(!t.length)return this.regexp=!1,this.regexp;const e=this.options,n=e.noglobstar?\"[^/]*?\":e.dot?\"(?:(?!(?:\\\\/|^)(?:\\\\.{1,2})($|\\\\/)).)*?\":\"(?:(?!(?:\\\\/|^)\\\\.).)*?\",r=new Set(e.nocase?[\"i\"]:[]);let o=t.map((t=>{const e=t.map((t=>{if(t instanceof RegExp)for(const e of t.flags.split(\"\"))r.add(e);return\"string\"==typeof t?t.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g,\"\\\\$&\"):t===Bt?Bt:t._src}));return e.forEach(((t,r)=>{const o=e[r+1],i=e[r-1];t===Bt&&i!==Bt&&(void 0===i?void 0!==o&&o!==Bt?e[r+1]=\"(?:\\\\/|\"+n+\"\\\\/)?\"+o:e[r]=n:void 0===o?e[r-1]=i+\"(?:\\\\/|\"+n+\")?\":o!==Bt&&(e[r-1]=i+\"(?:\\\\/|\\\\/\"+n+\"\\\\/)\"+o,e[r+1]=Bt))})),e.filter((t=>t!==Bt)).join(\"/\")})).join(\"|\");const[i,s]=t.length>1?[\"(?:\",\")\"]:[\"\",\"\"];o=\"^\"+i+o+s+\"$\",this.negate&&(o=\"^(?!\"+o+\").+$\");try{this.regexp=new RegExp(o,[...r].join(\"\"))}catch(t){this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split(\"/\"):this.isWindows&&/^\\/\\/[^\\/]+/.test(t)?[\"\",...t.split(/\\/+/)]:t.split(/\\/+/)}match(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.partial;if(this.debug(\"match\",t,this.pattern),this.comment)return!1;if(this.empty)return\"\"===t;if(\"/\"===t&&e)return!0;const n=this.options;this.isWindows&&(t=t.split(\"\\\\\").join(\"/\"));const r=this.slashSplit(t);this.debug(this.pattern,\"split\",r);const o=this.set;this.debug(this.pattern,\"set\",o);let i=r[r.length-1];if(!i)for(let t=r.length-2;!i&&t>=0;t--)i=r[t];for(let t=0;t<o.length;t++){const s=o[t];let a=r;if(n.matchBase&&1===s.length&&(a=[i]),this.matchOne(a,s,e))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate}static defaults(t){return bt.defaults(t).Minimatch}}function qt(t){const e=new Error(`${arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\"}Invalid response: ${t.status} ${t.statusText}`);return e.status=t.status,e.response=t,e}function Ht(t,e){const{status:n}=e;if(401===n&&t.digest)return e;if(n>=400)throw qt(e);return e}function Xt(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?{data:e,headers:t.headers?W(t.headers):{},status:t.status,statusText:t.statusText}:e}bt.AST=vt,bt.Minimatch=Gt,bt.escape=function(t){let{windowsPathsNoEscape:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?t.replace(/[?*()[\\]]/g,\"[$&]\"):t.replace(/[?*()[\\]\\\\]/g,\"\\\\$&\")},bt.unescape=ut;const Zt=(Yt=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=tt({url:y(t.remoteURL,f(e)),method:\"COPY\",headers:{Destination:y(t.remoteURL,f(n)),Overwrite:!1===r.overwrite?\"F\":\"T\",Depth:r.shallow?\"0\":\"infinity\"}},t,r);return s=function(e){Ht(t,e)},(i=Q(o,t))&&i.then||(i=Promise.resolve(i)),s?i.then(s):i;var i,s},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(Yt.apply(this,t))}catch(t){return Promise.reject(t)}});var Yt,Kt=n(635),Jt=n(829),Qt=n.n(Jt),te=function(t){return t.Array=\"array\",t.Object=\"object\",t.Original=\"original\",t}(te||{});function ee(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:te.Original;const r=Qt().get(t,e);return\"array\"===n&&!1===Array.isArray(r)?[r]:\"object\"===n&&Array.isArray(r)?r[0]:r}function ne(t){return new Promise((e=>{e(function(t){const{multistatus:e}=t;if(\"\"===e)return{multistatus:{response:[]}};if(!e)throw new Error(\"Invalid response: No root multistatus found\");const n={multistatus:Array.isArray(e)?e[0]:e};return Qt().set(n,\"multistatus.response\",ee(n,\"multistatus.response\",te.Array)),Qt().set(n,\"multistatus.response\",Qt().get(n,\"multistatus.response\").map((t=>function(t){const e=Object.assign({},t);return e.status?Qt().set(e,\"status\",ee(e,\"status\",te.Object)):(Qt().set(e,\"propstat\",ee(e,\"propstat\",te.Object)),Qt().set(e,\"propstat.prop\",ee(e,\"propstat.prop\",te.Object))),e}(t)))),n}(new Kt.XMLParser({allowBooleanAttributes:!0,attributeNamePrefix:\"\",textNodeName:\"text\",ignoreAttributes:!1,removeNSPrefix:!0,numberParseOptions:{hex:!0,leadingZeros:!1},attributeValueProcessor:(t,e,n)=>\"true\"===e||\"false\"===e?\"true\"===e:e,tagValueProcessor(t,e,n){if(!n.endsWith(\"propstat.prop.displayname\"))return e}}).parse(t)))}))}function re(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{getlastmodified:r=null,getcontentlength:o=\"0\",resourcetype:i=null,getcontenttype:s=null,getetag:a=null}=t,u=i&&\"object\"==typeof i&&void 0!==i.collection?\"directory\":\"file\",c={filename:e,basename:l().basename(e),lastmod:r,size:parseInt(o,10),type:u,etag:\"string\"==typeof a?a.replace(/\"/g,\"\"):null};return\"file\"===u&&(c.mime=s&&\"string\"==typeof s?s.split(\";\")[0]:\"\"),n&&(void 0!==t.displayname&&(t.displayname=String(t.displayname)),c.props=t),c}function oe(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=null;try{t.multistatus.response[0].propstat&&(r=t.multistatus.response[0])}catch(t){}if(!r)throw new Error(\"Failed getting item stat: bad response\");const{propstat:{prop:o,status:i}}=r,[s,a,u]=i.split(\" \",3),c=parseInt(a,10);if(c>=400){const t=new Error(`Invalid response: ${c} ${u}`);throw t.status=c,t}return re(o,g(e),n)}function ie(t){switch(String(t)){case\"-3\":return\"unlimited\";case\"-2\":case\"-1\":return\"unknown\";default:return parseInt(String(t),10)}}function se(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}const ae=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}((function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{details:r=!1}=n,o=tt({url:y(t.remoteURL,f(e)),method:\"PROPFIND\",headers:{Accept:\"text/plain,application/xml\",Depth:\"0\"}},t,n);return se(Q(o,t),(function(n){return Ht(t,n),se(n.text(),(function(t){return se(ne(t),(function(t){const o=oe(t,e,r);return Xt(n,o,r)}))}))}))}));function ue(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}const ce=le((function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=function(t){if(!t||\"/\"===t)return[];let e=t;const n=[];do{n.push(e),e=l().dirname(e)}while(e&&\"/\"!==e);return n}(g(e));r.sort(((t,e)=>t.length>e.length?1:e.length>t.length?-1:0));let o=!1;return function(t,e,n){if(\"function\"==typeof t[fe]){var r,o,i,s=t[fe]();function l(t){try{for(;!(r=s.next()).done;)if((t=e(r.value))&&t.then){if(!me(t))return void t.then(l,i||(i=de.bind(null,o=new ge,2)));t=t.v}o?de(o,1,t):o=t}catch(t){de(o||(o=new ge),2,t)}}if(l(),s.return){var a=function(t){try{r.done||s.return()}catch(t){}return t};if(o&&o.then)return o.then(a,(function(t){throw a(t)}));a()}return o}if(!(\"length\"in t))throw new TypeError(\"Object is not iterable\");for(var u=[],c=0;c<t.length;c++)u.push(t[c]);return function(t,e,n){var r,o,i=-1;return function s(a){try{for(;++i<t.length&&(!n||!n());)if((a=e(i))&&a.then){if(!me(a))return void a.then(s,o||(o=de.bind(null,r=new ge,2)));a=a.v}r?de(r,1,a):r=a}catch(t){de(r||(r=new ge),2,t)}}(),r}(u,(function(t){return e(u[t])}),n)}(r,(function(r){return i=function(){return function(n,o){try{var i=ue(ae(t,r),(function(t){if(\"directory\"!==t.type)throw new Error(`Path includes a file: ${e}`)}))}catch(t){return o(t)}return i&&i.then?i.then(void 0,o):i}(0,(function(e){const i=e;return function(){if(404===i.status)return o=!0,pe(ye(t,r,{...n,recursive:!1}));throw e}()}))},(s=function(){if(o)return pe(ye(t,r,{...n,recursive:!1}))}())&&s.then?s.then(i):i();var i,s}),(function(){return!1}))}));function le(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}function he(){}function pe(t,e){if(!e)return t&&t.then?t.then(he):Promise.resolve()}const fe=\"undefined\"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol(\"Symbol.iterator\")):\"@@iterator\";function de(t,e,n){if(!t.s){if(n instanceof ge){if(!n.s)return void(n.o=de.bind(null,t,e));1&e&&(e=n.s),n=n.v}if(n&&n.then)return void n.then(de.bind(null,t,e),de.bind(null,t,2));t.s=e,t.v=n;const r=t.o;r&&r(t)}}const ge=function(){function t(){}return t.prototype.then=function(e,n){const r=new t,o=this.s;if(o){const t=1&o?e:n;if(t){try{de(r,1,t(this.v))}catch(t){de(r,2,t)}return r}return this}return this.o=function(t){try{const o=t.v;1&t.s?de(r,1,e?e(o):o):n?de(r,1,n(o)):de(r,2,o)}catch(t){de(r,2,t)}},r},t}();function me(t){return t instanceof ge&&1&t.s}const ye=le((function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!0===n.recursive)return ce(t,e,n);const r=tt({url:y(t.remoteURL,(o=f(e),o.endsWith(\"/\")?o:o+\"/\")),method:\"MKCOL\"},t,n);var o;return ue(Q(r,t),(function(e){Ht(t,e)}))}));var ve=n(388),be=n.n(ve);const we=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}((function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={};if(\"object\"==typeof n.range&&\"number\"==typeof n.range.start){let t=`bytes=${n.range.start}-`;\"number\"==typeof n.range.end&&(t=`${t}${n.range.end}`),r.Range=t}const o=tt({url:y(t.remoteURL,f(e)),method:\"GET\",headers:r},t,n);return s=function(e){if(Ht(t,e),r.Range&&206!==e.status){const t=new Error(`Invalid response code for partial request: ${e.status}`);throw t.status=e.status,t}return n.callback&&setTimeout((()=>{n.callback(e)}),0),e.body},(i=Q(o,t))&&i.then||(i=Promise.resolve(i)),s?i.then(s):i;var i,s})),xe=()=>{},Ne=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}((function(t,e,n){n.url||(n.url=y(t.remoteURL,f(e)));const r=tt(n,t,{});return i=function(e){return Ht(t,e),e},(o=Q(r,t))&&o.then||(o=Promise.resolve(o)),i?o.then(i):o;var o,i})),Ae=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}((function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=tt({url:y(t.remoteURL,f(e)),method:\"DELETE\"},t,n);return i=function(e){Ht(t,e)},(o=Q(r,t))&&o.then||(o=Promise.resolve(o)),i?o.then(i):o;var o,i})),Pe=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}((function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r,o){try{var i=(s=ae(t,e,n),a=function(){return!0},u?a?a(s):s:(s&&s.then||(s=Promise.resolve(s)),a?s.then(a):s))}catch(t){return o(t)}var s,a,u;return i&&i.then?i.then(void 0,o):i}(0,(function(t){if(404===t.status)return!1;throw t}))}));function Oe(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}const Ee=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}((function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=tt({url:y(t.remoteURL,f(e),\"/\"),method:\"PROPFIND\",headers:{Accept:\"text/plain,application/xml\",Depth:n.deep?\"infinity\":\"1\"}},t,n);return Oe(Q(r,t),(function(r){return Ht(t,r),Oe(r.text(),(function(o){if(!o)throw new Error(\"Failed parsing directory contents: Empty response\");return Oe(ne(o),(function(o){const i=d(e);let s=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=l().join(e,\"/\"),{multistatus:{response:s}}=t,a=s.map((t=>{const e=function(t){try{return t.replace(/^https?:\\/\\/[^\\/]+/,\"\")}catch(t){throw new u(t,\"Failed normalising HREF\")}}(t.href),{propstat:{prop:n}}=t;return re(n,\"/\"===i?decodeURIComponent(g(e)):g(l().relative(decodeURIComponent(i),decodeURIComponent(e))),r)}));return o?a:a.filter((t=>t.basename&&(\"file\"===t.type||t.filename!==n.replace(/\\/$/,\"\"))))}(o,d(t.remoteBasePath||t.remotePath),i,n.details,n.includeSelf);return n.glob&&(s=function(t,e){return t.filter((t=>bt(t.filename,e,{matchBase:!0})))}(s,n.glob)),Xt(r,s,n.details)}))}))}))}));function Te(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}const je=Te((function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=tt({url:y(t.remoteURL,f(e)),method:\"GET\",headers:{Accept:\"text/plain\"},transformResponse:[Ie]},t,n);return Se(Q(r,t),(function(e){return Ht(t,e),Se(e.text(),(function(t){return Xt(e,t,n.details)}))}))}));function Se(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}const $e=Te((function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=tt({url:y(t.remoteURL,f(e)),method:\"GET\"},t,n);return Se(Q(r,t),(function(e){let r;return Ht(t,e),function(t,e){var n=t();return n&&n.then?n.then(e):e()}((function(){return Se(e.arrayBuffer(),(function(t){r=t}))}),(function(){return Xt(e,r,n.details)}))}))})),Ce=Te((function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{format:r=\"binary\"}=n;if(\"binary\"!==r&&\"text\"!==r)throw new u({info:{code:I.InvalidOutputFormat}},`Invalid output format: ${r}`);return\"text\"===r?je(t,e,n):$e(t,e,n)})),Ie=t=>t;function ke(t){return new Kt.XMLBuilder({attributeNamePrefix:\"@_\",format:!0,ignoreAttributes:!1,suppressEmptyNode:!0}).build(Re({lockinfo:{\"@_xmlns:d\":\"DAV:\",lockscope:{exclusive:{}},locktype:{write:{}},owner:{href:t}}},\"d\"))}function Re(t,e){const n={...t};for(const t in n)n.hasOwnProperty(t)&&(n[t]&&\"object\"==typeof n[t]&&-1===t.indexOf(\":\")?(n[`${e}:${t}`]=Re(n[t],e),delete n[t]):!1===/^@_/.test(t)&&(n[`${e}:${t}`]=n[t],delete n[t]));return n}function Le(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function _e(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}const Me=_e((function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=tt({url:y(t.remoteURL,f(e)),method:\"UNLOCK\",headers:{\"Lock-Token\":n}},t,r);return Le(Q(o,t),(function(e){if(Ht(t,e),204!==e.status&&200!==e.status)throw qt(e)}))})),Ue=_e((function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{refreshToken:r,timeout:o=Fe}=n,i={Accept:\"text/plain,application/xml\",Timeout:o};r&&(i.If=r);const s=tt({url:y(t.remoteURL,f(e)),method:\"LOCK\",headers:i,data:ke(t.contactHref)},t,n);return Le(Q(s,t),(function(e){return Ht(t,e),Le(e.text(),(function(t){const n=(i=t,new Kt.XMLParser({removeNSPrefix:!0,parseAttributeValue:!0,parseTagValue:!0}).parse(i)),r=Qt().get(n,\"prop.lockdiscovery.activelock.locktoken.href\"),o=Qt().get(n,\"prop.lockdiscovery.activelock.timeout\");var i;if(!r)throw qt(e,\"No lock token received: \");return{token:r,serverTimeout:o}}))}))})),Fe=\"Infinite, Second-4100000000\";function De(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}const Be=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}((function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.path||\"/\",r=tt({url:y(t.remoteURL,n),method:\"PROPFIND\",headers:{Accept:\"text/plain,application/xml\",Depth:\"0\"}},t,e);return De(Q(r,t),(function(n){return Ht(t,n),De(n.text(),(function(t){return De(ne(t),(function(t){const r=function(t){try{const[e]=t.multistatus.response,{propstat:{prop:{\"quota-used-bytes\":n,\"quota-available-bytes\":r}}}=e;return void 0!==n&&void 0!==r?{used:parseInt(String(n),10),available:ie(r)}:null}catch(t){}return null}(t);return Xt(n,r,e.details)}))}))}))}));function Ve(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}const We=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}((function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{details:r=!1}=n,o=tt({url:y(t.remoteURL,f(e)),method:\"SEARCH\",headers:{Accept:\"text/plain,application/xml\",\"Content-Type\":t.headers[\"Content-Type\"]||\"application/xml; charset=utf-8\"}},t,n);return Ve(Q(o,t),(function(n){return Ht(t,n),Ve(n.text(),(function(t){return Ve(ne(t),(function(t){const o=function(t,e,n){const r={truncated:!1,results:[]};return r.truncated=t.multistatus.response.some((t=>\"507\"===(t.status||t.propstat?.status).split(\" \",3)?.[1]&&t.href.replace(/\\/$/,\"\").endsWith(f(e).replace(/\\/$/,\"\")))),t.multistatus.response.forEach((t=>{if(void 0===t.propstat)return;const e=t.href.split(\"/\").map(decodeURIComponent).join(\"/\");r.results.push(re(t.propstat.prop,e,n))})),r}(t,e,r);return Xt(n,o,r)}))}))}))})),ze=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}((function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=tt({url:y(t.remoteURL,f(e)),method:\"MOVE\",headers:{Destination:y(t.remoteURL,f(n)),Overwrite:!1===r.overwrite?\"F\":\"T\"}},t,r);return s=function(e){Ht(t,e)},(i=Q(o,t))&&i.then||(i=Promise.resolve(i)),s?i.then(s):i;var i,s}));var Ge=n(172);const qe=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}((function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{contentLength:o=!0,overwrite:i=!0}=r,s={\"Content-Type\":\"application/octet-stream\"};!1===o||(s[\"Content-Length\"]=\"number\"==typeof o?`${o}`:`${function(t){if(H(t))return t.byteLength;if(X(t))return t.length;if(\"string\"==typeof t)return(0,Ge.d)(t);throw new u({info:{code:I.DataTypeNoLength}},\"Cannot calculate data length: Invalid type\")}(n)}`),i||(s[\"If-None-Match\"]=\"*\");const a=tt({url:y(t.remoteURL,f(e)),method:\"PUT\",headers:s,data:n},t,r);return l=function(e){try{Ht(t,e)}catch(t){const e=t;if(412!==e.status||i)throw e;return!1}return!0},(c=Q(a,t))&&c.then||(c=Promise.resolve(c)),l?c.then(l):c;var c,l})),He=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}((function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=tt({url:y(t.remoteURL,f(e)),method:\"OPTIONS\"},t,n);return i=function(e){try{Ht(t,e)}catch(t){throw t}return{compliance:(e.headers.get(\"DAV\")??\"\").split(\",\").map((t=>t.trim())),server:e.headers.get(\"Server\")??\"\"}},(o=Q(r,t))&&o.then||(o=Promise.resolve(o)),i?o.then(i):o;var o,i}));function Xe(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}const Ze=Je((function(t,e,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(n>r||n<0)throw new u({info:{code:I.InvalidUpdateRange}},`Invalid update range ${n} for partial update`);const s={\"Content-Type\":\"application/octet-stream\",\"Content-Length\":\"\"+(r-n+1),\"Content-Range\":`bytes ${n}-${r}/*`},a=tt({url:y(t.remoteURL,f(e)),method:\"PUT\",headers:s,data:o},t,i);return Xe(Q(a,t),(function(e){Ht(t,e)}))}));function Ye(t,e){var n=t();return n&&n.then?n.then(e):e(n)}const Ke=Je((function(t,e,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(n>r||n<0)throw new u({info:{code:I.InvalidUpdateRange}},`Invalid update range ${n} for partial update`);const s={\"Content-Type\":\"application/x-sabredav-partialupdate\",\"Content-Length\":\"\"+(r-n+1),\"X-Update-Range\":`bytes=${n}-${r}`},a=tt({url:y(t.remoteURL,f(e)),method:\"PATCH\",headers:s,data:o},t,i);return Xe(Q(a,t),(function(e){Ht(t,e)}))}));function Je(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}const Qe=Je((function(t,e,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return Xe(He(t,e,i),(function(s){let a=!1;return Ye((function(){if(s.compliance.includes(\"sabredav-partialupdate\"))return Xe(Ke(t,e,n,r,o,i),(function(t){return a=!0,t}))}),(function(c){let l=!1;return a?c:Ye((function(){if(s.server.includes(\"Apache\")&&s.compliance.includes(\"<http://apache.org/dav/propset/fs/1>\"))return Xe(Ze(t,e,n,r,o,i),(function(t){return l=!0,t}))}),(function(t){if(l)return t;throw new u({info:{code:I.NotSupported}},\"Not supported\")}))}))}))})),tn=\"https://github.com/perry-mitchell/webdav-client/blob/master/LOCK_CONTACT.md\";function en(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{authType:n=null,remoteBasePath:r,contactHref:o=tn,ha1:i,headers:s={},httpAgent:a,httpsAgent:c,password:l,token:h,username:p,withCredentials:d}=e;let g=n;g||(g=p||l?C.Password:C.None);const v={authType:g,remoteBasePath:r,contactHref:o,ha1:i,headers:Object.assign({},s),httpAgent:a,httpsAgent:c,password:l,remotePath:m(t),remoteURL:t,token:h,username:p,withCredentials:d};return k(v,p,l,h,i),{copyFile:(t,e,n)=>Zt(v,t,e,n),createDirectory:(t,e)=>ye(v,t,e),createReadStream:(t,e)=>function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new(0,be().PassThrough);return we(t,e,n).then((t=>{t.pipe(r)})).catch((t=>{r.emit(\"error\",t)})),r}(v,t,e),createWriteStream:(t,e,n)=>function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xe;const o=new(0,be().PassThrough),i={};!1===n.overwrite&&(i[\"If-None-Match\"]=\"*\");const s=tt({url:y(t.remoteURL,f(e)),method:\"PUT\",headers:i,data:o,maxRedirects:0},t,n);return Q(s,t).then((e=>Ht(t,e))).then((t=>{setTimeout((()=>{r(t)}),0)})).catch((t=>{o.emit(\"error\",t)})),o}(v,t,e,n),customRequest:(t,e)=>Ne(v,t,e),deleteFile:(t,e)=>Ae(v,t,e),exists:(t,e)=>Pe(v,t,e),getDirectoryContents:(t,e)=>Ee(v,t,e),getFileContents:(t,e)=>Ce(v,t,e),getFileDownloadLink:t=>function(t,e){let n=y(t.remoteURL,f(e));const r=/^https:/i.test(n)?\"https\":\"http\";switch(t.authType){case C.None:break;case C.Password:{const e=O(t.headers.Authorization.replace(/^Basic /i,\"\").trim());n=n.replace(/^https?:\\/\\//,`${r}://${e}@`);break}default:throw new u({info:{code:I.LinkUnsupportedAuthType}},`Unsupported auth type for file link: ${t.authType}`)}return n}(v,t),getFileUploadLink:t=>function(t,e){let n=`${y(t.remoteURL,f(e))}?Content-Type=application/octet-stream`;const r=/^https:/i.test(n)?\"https\":\"http\";switch(t.authType){case C.None:break;case C.Password:{const e=O(t.headers.Authorization.replace(/^Basic /i,\"\").trim());n=n.replace(/^https?:\\/\\//,`${r}://${e}@`);break}default:throw new u({info:{code:I.LinkUnsupportedAuthType}},`Unsupported auth type for file link: ${t.authType}`)}return n}(v,t),getHeaders:()=>Object.assign({},v.headers),getQuota:t=>Be(v,t),lock:(t,e)=>Ue(v,t,e),moveFile:(t,e,n)=>ze(v,t,e,n),putFileContents:(t,e,n)=>qe(v,t,e,n),partialUpdateFileContents:(t,e,n,r,o)=>Qe(v,t,e,n,r,o),getDAVCompliance:t=>He(v,t),search:(t,e)=>We(v,t,e),setHeaders:t=>{v.headers=Object.assign({},t)},stat:(t,e)=>ae(v,t,e),unlock:(t,e,n)=>Me(v,t,e,n)}}var nn=r.hT,rn=r.O4,on=r.Kd,sn=r.YK,an=r.UU,un=r.Gu,cn=r.ky,ln=r.h4,hn=r.ch,pn=r.hq,fn=r.i5;export{nn as AuthType,rn as ErrorCode,on as Request,sn as Response,an as createClient,un as getPatcher,cn as parseStat,ln as parseXML,hn as prepareFileFromProps,pn as processResponsePayload,fn as translateDiskSpace};","// @ts-ignore\nSymbol.observable  ||= Symbol.for('observable'); // @ts-ignore\nSymbol.subscribe   ||= Symbol.for(\"subscribe\"); // @ts-ignore\nSymbol.unsubscribe ||= Symbol.for(\"unsubscribe\");\n\n//\nexport const $fxy          = Symbol.for(\"@fix\");\nexport const $value        = Symbol.for(\"@value\");\nexport const $extractKey$  = Symbol.for(\"@extract\");\nexport const $originalKey$ = Symbol.for(\"@origin\");\nexport const $registryKey$ = Symbol.for(\"@registry\");\nexport const $target       = Symbol.for(\"@target\");\nexport const $rootKey$     = Symbol.for(\"@root\");\nexport const $nodeKey$     = Symbol.for(\"@node\");\nexport const $behavior     = Symbol.for(\"@behavior\");\nexport const $promise      = Symbol.for(\"@promise\");\nexport const $triggerLess  = Symbol.for(\"@trigger-less\");\nexport const $triggerLock  = Symbol.for(\"@trigger-lock\");\nexport const $trigger      = Symbol.for(\"@trigger\");\nexport const $affected    = Symbol.for(\"@subscribe\");\nexport const $isNotEqual   = Symbol.for(\"@isNotEqual\");\n","import { hasValue, isPrimitive } from \"fest/core\";\nimport { $extractKey$, $originalKey$, $registryKey$ } from \"./Symbol\";\n\n/*\n//\ntype AnyFn = (...args: any[]) => any;\ntype MethodKeys<T> = {\n    [K in keyof T]-?: T[K] extends AnyFn ? K : never\n}[keyof T];\n\n//\ntype MethodsOf<T> = Pick<T, MethodKeys<T>>;\ntype WithMethods<Under, T> = MethodsOf<Under> & MethodsOf<T>;\n\n//\nexport type WeakKey = object;\nexport type keyType = string | number | symbol;\n\n//\nexport type refValid<Under = any, T = any, K = any> =\n    | (T & WithMethods<Under, T>)\n    | (Under[] & WithMethods<Under, T>)\n    | (Map<K, Under> & WithMethods<Under, T>)\n    | (Set<any> & WithMethods<Under, T>)\n    | (WeakMap<(K extends WeakKey ? K : never), Under> & WithMethods<Under, T>)\n    | (WeakSet<(Under extends WeakKey ? Under : never)> & WithMethods<Under, T>)\n    | (Function & WithMethods<Under, T>);\n\n//\nexport type subValid<Under = any, T = any, K = any> =\n    | refValid<Under, T, K>\n    | ([refValid<Under, T, K>, keyType | Function] & WithMethods<Under, T>)\n    | ([refValid<Under, T, K>, keyType | Function, ...any[]] & WithMethods<Under, T>);\n*/\n\n//\nexport type AnyFn = (...args: any[]) => any;\nexport type MethodKeys<T> = {\n    [K in keyof T]-?: T[K] extends AnyFn ? K : never\n}[keyof T];\nexport type MethodsOf<T> = Pick<T, MethodKeys<T>>;\n\n//\nexport type WeakKey = object | Function;\nexport type keyType = string | number | symbol;\n\n//\nexport type ContainerMethods<X> =\n    X extends (any[] | Array<any>) ? MethodsOf<Array<any>> :\n    X extends Map<keyType, any> ? MethodsOf<Map<keyType, any>> :\n    X extends Set<any> ? MethodsOf<Set<any>> :\n    X extends WeakMap<WeakKey, any> ? MethodsOf<WeakMap<WeakKey, any>> :\n    X extends WeakSet<WeakKey> ? MethodsOf<WeakSet<WeakKey>> :\n    X extends Function ? MethodsOf<Function> :\n    {};\n\n// extends by [key: symbol] internals, such as Symbol.observable, Symbol.dispose, $trigger$, etc...\nexport type observeSpecificKeys<T extends Record<keyType, any> = any> = T & {\n    [K in keyof T]: T[K] extends AnySuitable<keyType, any> ? Ui<T[K], keyType, any> : T[K];\n}[keyof T & keyType];\n\n//\nexport type MapLike<K = any, V = any> = Map<K, V> | WeakMap<K extends WeakKey ? K : never, V> | Record<K extends keyType ? K : never, V>;\nexport type SetLike<V = any, _ = unknown> = Set<V> | WeakSet<V extends WeakKey ? V : never> | V[];\nexport type AnySuitable<K = any, V = any|unknown> = Function | Record<K extends keyType ? K : never, V> | MapLike<K, V> | SetLike<K, V extends unknown ? V : unknown>;\nexport type Ui<W extends AnySuitable<any, any>, K = any, V = any> = W | W[] | AnySuitable<K, V> | AnySuitable<K, V>[];\nexport type observeValid<T = any> = T & {\n    value?: any;\n    [key: symbol]: any;\n    [key: string]: any;\n};\n\n//\nexport type TupleWithInheritedMethods<RV> =\n    RV extends unknown ? ([RV, keyType | Function] & ContainerMethods<RV>) : never;\n\n//\nexport type TupleVariadicWithInheritedMethods<RV> =\n    RV extends unknown ? ([RV, keyType | Function, ...any[]] & ContainerMethods<RV>) : never;\n\n//\nexport type subValid<T = any> =\n    | observeValid<T>\n    | TupleWithInheritedMethods<observeValid<T>>\n    | TupleVariadicWithInheritedMethods<observeValid<T>>;\n\n//\nexport const $originalObjects$ = new WeakMap();\n\n//\nexport const safe = (target)=>{\n    const unwrap: any = (typeof target == \"object\" || typeof target == \"function\") ? (target?.[$extractKey$] ?? target) : target, mapped = (e)=>safe(e);\n    if (Array.isArray(unwrap)) { return unwrap?.map?.(mapped) || Array.from(unwrap || [])?.map?.(mapped) || []; } else // @ts-ignore\n    if (unwrap instanceof Map || unwrap instanceof WeakMap) { return new Map(Array.from(unwrap?.entries?.() || [])?.map?.(([K,V])=>[K,safe(V)])); } else  // @ts-ignore\n    if (unwrap instanceof Set || unwrap instanceof WeakSet) { return new Set(Array.from(unwrap?.values?.() || [])?.map?.(mapped)); } else  // @ts-ignore\n    if (unwrap != null && typeof unwrap == \"function\" || typeof unwrap == \"object\") { return Object.fromEntries(Array.from(Object.entries(unwrap || {}) || [])?.filter?.(([K])=>(K != $extractKey$ && K != $originalKey$ && K != $registryKey$))?.map?.(([K,V])=>[K,safe(V)])); }\n    return unwrap;\n}\n\n//\nexport const unwrap = (arr)=>{ return arr?.[$extractKey$] ?? arr?.[\"@target\"] ?? arr; }\nexport const deref  = (target?: any, discountValue: boolean|null = false)=>{\n    const original = target;\n    if (isPrimitive(target) || typeof target == \"symbol\") return target;\n    if (target != null && (target instanceof WeakRef || (\"deref\" in target && typeof target?.deref == \"function\"))) { target = target?.deref?.(); };\n    if (target != null && (typeof target == \"object\" || typeof target == \"function\")) {\n        target = unwrap(target);\n        const $val = discountValue && hasValue(target) && target?.value;\n        if ($val != null && (typeof $val == \"object\" || typeof $val == \"function\"))\n            { target = $val; }\n        if (original != target)\n            { return deref(target, discountValue); }\n    }\n    return target;\n}\n\n//\nexport const isThenable = (val: any): val is PromiseLike<any> => val != null && typeof val.then === \"function\";\nexport const withPromise = (target, cb) => {\n    if (isPrimitive(target) || typeof target == \"function\") { return cb?.(target); };\n    if (isThenable(target)) return target.then(cb);\n    if (target?.promise && isThenable(target.promise)) return target.promise.then(cb);\n    return cb?.(target);\n}\n\n//\nconst disposeMap = new WeakMap();\nconst disposeRegistry = new FinalizationRegistry((callstack: any)=>{ callstack?.forEach?.((cb: any)=>cb?.()); });\n\n//\nexport function addToCallChain(obj, methodKey, callback?: any|null) {\n    if (!callback || typeof callback != \"function\" || (typeof obj != \"object\" && typeof obj != \"function\")) return;\n    if (methodKey == Symbol.dispose) {\n        // @ts-ignore\n        disposeMap?.getOrInsertComputed?.(obj, ()=>{\n            const CallChain = new Set();\n            if (typeof obj == \"object\" || typeof obj == \"function\") {\n                disposeRegistry.register(obj, CallChain);\n                disposeMap.set(obj, CallChain);\n                obj[Symbol.dispose] ??= ()=>CallChain.forEach((cb: any)=>{ cb?.(); });\n            }\n            return CallChain;\n        })?.add?.(callback);\n    } else {\n        obj[methodKey] = function(...args) { const original = obj?.[methodKey]; if (typeof original == 'function') { original.apply(this, args); }; callback.apply(this, args); };\n    }\n}\n\n\ntype DuplicateContext = 'set' | 'push' | 'unshift' | 'splice';\n\ninterface DuplicateEvent<T> {\n    value: T;\n    via: DuplicateContext;\n    index?: number;\n}\n\ninterface SetArrayOptions<T> {\n    onDuplicate?: (event: DuplicateEvent<T>) => void;\n}\n\ninterface SetArrayMethods<T> {\n    push(...items: T[]): number;\n    pop(): T | undefined;\n    shift(): T | undefined;\n    unshift(...items: T[]): number;\n    splice(start: number, deleteCount?: number, ...items: T[]): T[];\n    includes(value: T): boolean;\n    indexOf(value: T): number;\n    toArray(): T[];\n    toSet(): Set<T>;\n    clear(): void;\n    delete(value: T): boolean;\n    [Symbol.iterator](): IterableIterator<T>;\n}\n\nexport type SetArray<T> = SetArrayMethods<T> & {\n    readonly length: number;\n    [index: number]: T;\n};\n\nconst isArrayIndex = (prop: PropertyKey): prop is `${number}` => {\n    if (typeof prop !== 'string') return false;\n    if (prop === '') return false;\n    const num = Number(prop);\n    return Number.isInteger(num) && num >= 0 && String(num) === prop;\n};\n\nexport function wrapSetAsArray<T>(\n    source: Iterable<T> = [],\n    options: SetArrayOptions<T> = {}\n): SetArray<T> {\n    let backingSet: Set<T> = new Set<T>();\n\n    const notifyDuplicate = (value: T, via: DuplicateContext, index?: number) => {\n        options.onDuplicate?.({ value, via, index });\n    };\n\n    if (source instanceof Set) { backingSet = source; } else {\n        for (const item of source) {\n            if (backingSet.has(item)) {\n                notifyDuplicate(item, 'push');\n                continue;\n            }\n            backingSet.add(item);\n        }\n    }\n\n    const snapshot = () => Array.from(backingSet);\n    const rebuildFrom = (arr: T[]) => {\n        backingSet.clear();\n        for (const item of arr) {\n            backingSet.add(item);\n        }\n    };\n\n\n\n    const methods: SetArrayMethods<T> = {\n        push: (...items: T[]) => {\n            let size = backingSet.size;\n            for (const item of items) {\n                if (backingSet.has(item)) {\n                    notifyDuplicate(item, 'push');\n                    continue;\n                }\n                backingSet.add(item);\n                size++;\n            }\n            return size;\n        },\n        pop: () => {\n            const arr = snapshot();\n            if (!arr.length) return undefined;\n            const value = arr[arr.length - 1];\n            backingSet.delete(value);\n            return value;\n        },\n        shift: () => {\n            const iterator = backingSet.values().next();\n            if (iterator.done) return undefined;\n            const value = iterator.value;\n            backingSet.delete(value);\n            return value;\n        },\n        unshift: (...items: T[]) => {\n            if (!items.length) return backingSet.size;\n            const current = snapshot();\n            const toPrepend: T[] = [];\n\n            for (const item of items) {\n                if (current.includes(item) || toPrepend.includes(item)) {\n                    notifyDuplicate(item, 'unshift', 0);\n                    continue;\n                }\n                toPrepend.push(item);\n            }\n\n            if (!toPrepend.length) return current.length;\n\n            const next = [...toPrepend, ...current];\n            rebuildFrom(next);\n            return next.length;\n        },\n        splice: (start: number, deleteCount?: number, ...items: T[]) => {\n            const arr = snapshot();\n            const normalizedStart = Math.min(Math.max(start, 0), arr.length);\n            const actualDeleteCount =\n                deleteCount === undefined\n                    ? arr.length - normalizedStart\n                    : Math.max(0, Math.min(deleteCount, arr.length - normalizedStart));\n\n            const removed = arr.splice(normalizedStart, actualDeleteCount);\n\n            let insertPosition = normalizedStart;\n            for (const item of items) {\n                if (arr.includes(item)) {\n                    notifyDuplicate(item, 'splice', insertPosition);\n                    continue;\n                }\n                arr.splice(insertPosition++, 0, item);\n            }\n\n            rebuildFrom(arr);\n            return removed;\n        },\n        includes: (value: T) => backingSet.has(value),\n        indexOf: (value: T) => snapshot().indexOf(value),\n        clear: () => {\n            backingSet.clear();\n        },\n        delete: (value: T) => backingSet.delete(value),\n        toArray: () => snapshot(),\n        toSet: () => new Set(backingSet),\n        [Symbol.iterator]: () => backingSet[Symbol.iterator](),\n    };\n\n    const handler: ProxyHandler<SetArrayMethods<T>> = {\n        get: (_, prop) => {\n            if (prop === 'length') {\n                return backingSet.size;\n            }\n\n            if (isArrayIndex(prop)) {\n                const arr = snapshot();\n                return arr[Number(prop)];\n            }\n\n            const value = (methods as unknown as Record<PropertyKey, unknown>)[prop];\n            if (typeof value === 'function') {\n                return value;\n            }\n            return value;\n        },\n        set: (_, prop, value) => {\n            if (prop === 'length') {\n                if (typeof value !== 'number' || !Number.isFinite(value) || value < 0) {\n                    throw new RangeError('length must be a finite non-negative number');\n                }\n                const nextLength = Math.floor(value);\n                if (nextLength >= backingSet.size) {\n                    //   \"\"     \n                    return true;\n                }\n                const arr = snapshot().slice(0, nextLength);\n                rebuildFrom(arr);\n                return true;\n            }\n\n            if (isArrayIndex(prop)) {\n                const arr = snapshot();\n                const index = Number(prop);\n\n                if (index > arr.length) {\n                    return true; //   \"\" \n                }\n\n                const nextValue = value as T;\n                if (index < arr.length) {\n                    const currentValue = arr[index];\n                    if (Object.is(currentValue, nextValue)) {\n                        return true;\n                    }\n                    const duplicateElsewhere = arr.some(\n                        (item, idx) => idx !== index && Object.is(item, nextValue)\n                    );\n                    if (duplicateElsewhere) {\n                        notifyDuplicate(nextValue, 'set', index);\n                        return true;\n                    }\n                    arr[index] = nextValue;\n                } else {\n                    if (arr.includes(nextValue)) {\n                        notifyDuplicate(nextValue, 'set', index);\n                        return true;\n                    }\n                    arr.push(nextValue);\n                }\n\n                rebuildFrom(arr);\n                return true;\n            }\n\n            return Reflect.set(methods, prop, value);\n        },\n        deleteProperty: (_, prop) => {\n            if (prop === 'length') {\n                return false; //    \n            }\n\n            if (isArrayIndex(prop)) {\n                const arr = snapshot();\n                const index = Number(prop);\n                if (index >= arr.length) {\n                    return true;\n                }\n                arr.splice(index, 1);\n                rebuildFrom(arr);\n                return true;\n            }\n\n            return Reflect.deleteProperty(methods, prop);\n        },\n        ownKeys: () => {\n            const keys: (string | symbol)[] = [];\n            let i = 0;\n            for (const _ of backingSet) {\n                keys.push(String(i++));\n            }\n            keys.push('length');\n            return keys;\n        },\n        getOwnPropertyDescriptor: (_, prop) => {\n            if (prop === 'length') {\n                return {\n                    configurable: false,\n                    enumerable: false,\n                    writable: true,\n                    value: backingSet.size,\n                };\n            }\n\n            if (isArrayIndex(prop)) {\n                const arr = snapshot();\n                const index = Number(prop);\n                if (index >= arr.length) return undefined;\n                return {\n                    configurable: true,\n                    enumerable: true,\n                    writable: true,\n                    value: arr[index],\n                };\n            }\n\n            return Reflect.getOwnPropertyDescriptor(methods, prop);\n        },\n        has: (_, prop) => {\n            if (prop === 'length') return true;\n            if (isArrayIndex(prop)) {\n                const index = Number(prop);\n                return index >= 0 && index < backingSet.size;\n            }\n            return prop in methods;\n        },\n    };\n\n    return new Proxy(methods, handler) as SetArray<T>;\n}\n","import { $extractKey$ } from \"../wrap/Symbol\";\nimport { deref, type keyType } from \"../wrap/Utils\";\nimport { WR } from \"fest/core\";\n\n//\nconst withUnsub = new WeakMap();\nconst completeWithUnsub = (subscriber, weak: WeakRef<any> | WR<any>, handler: Subscript) => {\n    // @ts-ignore\n    return withUnsub.getOrInsert(subscriber, () => {\n        const registry = weak?.deref?.(); registry?.affected?.(handler);\n        const savComplete = subscriber?.complete?.bind?.(subscriber);\n        const unaffected = () => { const r = savComplete?.(); registry?.unaffected?.(handler); return r; };\n        subscriber.complete = unaffected;\n        return {\n            unaffected,\n            [Symbol.dispose]: unaffected,\n            [Symbol.asyncDispose]: unaffected,\n        }\n    });\n}\n\n//\nexport const subscriptRegistry = new WeakMap<any, Subscript>();\n\n// @ts-ignore\nconst wrapped = new WeakMap();\n\n//\nexport const register = (what: any, handle: any): any => {\n    const unwrap = what?.[$extractKey$] ?? what;  // @ts-ignore\n    subscriptRegistry.getOrInsert(unwrap, new Subscript());\n    return handle;\n}\n\n//\nexport const wrapWith = (what: any, handle: any): any => {\n    what = deref(what?.[$extractKey$] ?? what);\n    if (typeof what == \"symbol\" || !(typeof what == \"object\" || typeof what == \"function\") || what == null) return what; // @ts-ignore\n    return wrapped.getOrInsertComputed(what, () => new Proxy(what, register(what, handle)));\n}; // !experimental `getOrInsert` feature!\n\n//\nconst forAll = Symbol.for(\"@allProps\");\n\n//\nexport class Subscript {\n    compatible: any;\n    #listeners: Map<(value: any, prop: keyType, oldValue?: any, operation?: string | null) => void, any>;\n    #flags = new WeakSet();\n    #native: any;\n    #iterator: any;\n    #inDispatch = new Set<keyType>();\n\n    // : #triggerLock = new Set<keyType>();\n    #pending = new Map<keyType | null, [keyType | null, any, any, any[]]>();\n    #pendingByProp = new Map<keyType | null, Map<string, [keyType | null, any, any, (string | null), any[]]>>();\n    #flushScheduled = false;\n\n    // last run timestamp per callback\n    #lastPerfNow = new WeakMap<Function, number>();\n\n    //  \"now\"  /\n    #now() {\n        // performance     \n        return (globalThis.performance?.now?.() ?? Date.now());\n    }\n\n    constructor() {\n        this.#listeners = new Map();\n        this.#flags = new WeakSet();\n\n        this.#iterator = {\n            next: (args: any) => {\n                if (args) {\n                    Array.isArray(args) ? this.#dispatch(...(args as [any, any, any, any])) : this.#dispatch(args);\n                }\n            }\n        };\n\n        const weak = new WeakRef(this);\n        const controller = function (subscriber) {\n            const handler = subscriber?.next?.bind?.(subscriber);\n            return completeWithUnsub(subscriber, weak, handler);\n        };\n\n        // @ts-ignore\n        this.#native = (typeof Observable != \"undefined\" ? (new Observable(controller)) : null)\n        this.compatible = () => this.#native;\n    }\n\n    $safeExec(cb, ...args) {\n        if (!cb || this.#flags.has(cb)) return;\n        this.#flags.add(cb);\n\n        //\n        if (this.#lastPerfNow.get(cb) === this.#now()) return;\n        this.#lastPerfNow.set(cb, this.#now());\n\n        //\n        try {\n            const res = cb(...args);\n            if (res && typeof (res as any).then === \"function\") return (res as Promise<any>).catch(console.warn);\n            return res;\n        } catch (e) {\n            console.warn(e);\n        } finally {\n            this.#flags.delete(cb);\n        }\n    }\n\n    #dispatch(name, value = null, oldValue?: any, ...etc: any[]) {\n        const listeners = this.#listeners;\n        if (!listeners?.size) return;\n\n        const promises: Promise<any>[] = Array.from(listeners.entries())\n            .map(([cb, prop]) => {\n                if (prop === name || prop === forAll || prop === null) {\n                    return this.$safeExec(cb, value, name, oldValue, ...etc);\n                }\n                return undefined;\n            })\n            .filter((res: any) => res && typeof res.then === \"function\");\n\n        return promises.length ? Promise.allSettled(promises) : undefined;\n    }\n\n    wrap(nw: any[] | unknown) { if (Array.isArray(nw)) return wrapWith(nw, this); return nw; }\n\n    affected(cb: (value: any, prop: keyType) => void, prop?: keyType | null) {\n        if (cb == null || typeof cb != \"function\") return;\n        this.#listeners.set(cb, prop || forAll);\n        return () => this.unaffected(cb, prop || forAll);\n    }\n\n    unaffected(cb?: (value: any, prop: keyType) => void, prop?: keyType | null) {\n        if (cb != null && typeof cb == \"function\") {\n            const listeners = this.#listeners;\n            if (listeners?.has(cb) && (listeners.get(cb) == prop || prop == null || prop == forAll)) {\n                listeners.delete(cb);\n                return () => this.affected(cb, prop || forAll);\n            }\n        }\n        return this.#listeners.clear();\n    }\n\n    /**\n     *  :\n     * -  dispatch  name  -\n     * -  trigger(name)  flush    dispatch,    \n     * -  name  \n     */\n    trigger(name: keyType | null, value?: any | null, oldValue?: any, operation: string | null = null, ...etc: any[]) {\n        if (typeof name === \"symbol\") return;\n\n        // operation   undefined   \n        if (operation === undefined) operation = null;\n\n        //    operation\n        // null/undefined -> \"__\"\n        const opKey = operation ?? \"__\";\n\n        //     name  dispatch ()  \n        //      ,  flush    -\n        let byOp = this.#pendingByProp.get(name);\n        if (!byOp) {\n            byOp = new Map();\n            this.#pendingByProp.set(name, byOp);\n        }\n\n        // A:    (name + operation)   -\n        byOp.set(opKey, [name, value, oldValue, operation, etc]);\n\n        //   flush  \n        if (this.#flushScheduled) return;\n        this.#flushScheduled = true;\n\n        queueMicrotask(() => {\n            this.#flushScheduled = false;\n\n            //    ,     dispatch    \n            const batch = this.#pendingByProp;\n            this.#pendingByProp = new Map();\n\n            // : dispatch  prop,          prop\n            // (   dispatch   trigger(prop, ...),     -)\n            for (const [prop, opMap] of batch) {\n                if (prop != null && this.#inDispatch.has(prop)) continue;\n\n                if (prop != null) this.#inDispatch.add(prop);\n                try {\n                    for (const [, args] of opMap) {\n                        const [nm, v, ov, op, rest] = args;\n                        try {\n                            // #dispatch  (name, value, oldValue, ...etc)\n                            this.#dispatch(nm, v, ov, op, ...(rest ?? []));\n                        } catch (e) {\n                            console.warn(e);\n                        }\n                    }\n                } finally {\n                    if (prop != null) this.#inDispatch.delete(prop);\n                }\n            }\n        });\n    }\n\n    get iterator() { return this.#iterator; }\n}\n","import { affected, unaffected } from \"./Mainline\";\nimport { subscriptRegistry, wrapWith } from \"./Subscript\";\nimport { $extractKey$, $originalKey$, $registryKey$, $triggerLock, $triggerLess, $value, $trigger, $isNotEqual, $affected } from \"../wrap/Symbol\";\nimport type { keyType, MapLike, observeValid, SetLike } from \"../wrap/Utils\";\nimport { bindCtx, hasValue, isNotEqual, isPrimitive, makeTriggerLess, potentiallyAsync, potentiallyAsyncMap, tryParseByHint } from \"fest/core\";\n\n//\nconst __systemSkip = new Set<any>([\n    Symbol.toStringTag,\n    Symbol.iterator,\n    Symbol.asyncIterator,\n    Symbol.toPrimitive,\n\n    \"toString\",\n    \"valueOf\",\n    \"inspect\",          // node\n    \"constructor\",\n    \"__proto__\",\n    \"prototype\",\n    \"then\",\n    \"catch\",\n    \"finally\",\n    \"next\"\n]);\n\n//\nconst systemSkipGet = (target: any, name: any) => {\n    if (!__systemSkip.has(name)) return null;\n  \n    // :  undefined,   \n    const got = safeGet(target, name);\n    return (typeof got === \"function\") ? bindCtx(target, got) : got;\n};\n\n//\nconst __safeGetGuard = new WeakMap<any, Set<any>>();\nfunction isGetter(obj, propName) {\n    let got = true;\n    try { // @ts-ignore\n        __safeGetGuard?.getOrInsert?.(obj, new Set())?.add?.(propName);\n        if (__safeGetGuard?.get?.(obj)?.has?.(propName)) { got = true; }\n        const descriptor = Reflect.getOwnPropertyDescriptor(obj, propName);\n        got = (typeof descriptor?.get == \"function\");\n    } catch (e) {\n        got = true;\n    } finally {\n        __safeGetGuard?.get?.(obj)?.delete?.(propName);\n    }\n    return got;\n}\n\n//\nexport const fallThrough = (obj: any, key: any) => {\n    if (isPrimitive(obj)) return obj;\n\n    //\n    const value = safeGet(obj, key);\n    if (value == null && key != \"value\") {\n        const tmp = safeGet(obj, \"value\");\n        if (tmp != null && !isPrimitive(tmp))\n            { return fallThrough(tmp, key); } else\n            { return value; };\n    } else\n        // temp-fix: functions isn't supported correctly\n        if (key == \"value\" && value != null && !isPrimitive(value) && (typeof value != \"function\")) {\n            return fallThrough(value, key) ?? value ?? obj;\n        }\n    return value ?? obj;\n}\n\n// Safe getter with global re-entrancy guard to avoid recursive accessor loops\nexport const safeGet = (obj: any, key: any, rec?: any) => {\n    //const result = Reflect.get(obj, key, rec != null ? rec : obj);\n    //return typeof result == \"function\" ? bindCtx(obj, result) : result;\n\n    //\n    let result = undefined;\n    if (obj == null) { return obj; }\n\n    // @ts-ignore\n    let active = __safeGetGuard.getOrInsert(obj, new Set());\n    if (active?.has?.(key)) { return null; }\n\n    // directly return if not a getter\n    if (!isGetter(obj, key)) {\n        result ??= Reflect.get(obj, key, rec != null ? rec : obj);\n    } else {\n        active?.add?.(key);\n\n        //\n        try {\n            result = Reflect.get(obj, key, rec != null ? rec : obj);\n        } catch (_e) {\n            result = undefined;\n        } finally {\n            active.delete(key);\n            if (active?.size === 0) { __safeGetGuard?.delete?.(obj); }\n        }\n    }\n\n    //\n    return typeof result == \"function\" ? bindCtx(obj, result) : result;\n}\n\n// get reactive primitives (if native iterator is available, use it)\nconst systemGet = (target: any, name: any, registry: any)=>{\n    if (target == null || isPrimitive(target)) { return target; }\n\n    //\n    const exists = [\"deref\", \"bind\", \"@target\", $originalKey$, $extractKey$, $registryKey$]?.indexOf(name as any) < 0 ? safeGet(target, name as any)?.bind?.(target) : null;\n    if (exists != null) return null;\n\n    //\n    const $extK = [$extractKey$, $originalKey$];\n\n    //\n    if ($extK.indexOf(name as any) >= 0) { return safeGet(target, name as any) ?? target; }\n    if (name == $value)               { return safeGet(target, name) ?? safeGet(target, \"value\"); }\n    if (name == $registryKey$)        { return registry; } // @ts-ignore\n    if (name == Symbol.observable)    { return registry?.compatible; } // @ts-ignore\n    if (name == Symbol.subscribe)     { return (cb, prop?)=>affected(prop != null ? [target, prop] : target, cb); }\n    if (name == Symbol.iterator)      { return safeGet(target, name as any); }\n    if (name == Symbol.asyncIterator) { return safeGet(target, name as any); }\n    if (name == Symbol.dispose)       { return (prop?)=>{ safeGet(target, Symbol.dispose)?.(prop); unaffected(prop != null ? [target, prop] : target)}; }\n    if (name == Symbol.asyncDispose)  { return (prop?)=>{ safeGet(target, Symbol.asyncDispose)?.(prop); unaffected(prop != null ? [target, prop] : target); } } // @ts-ignore\n    if (name == Symbol.unsubscribe)   { return (prop?)=>unaffected(prop != null ? [target, prop] : target); }\n    if (typeof name == \"symbol\" && (name in target || safeGet(target, name) != null)) { return safeGet(target, name); }\n\n    /*\n    if (name == Symbol.toPrimitive)   { return (hint?)=>{\n        if (typeof safeGet(target, name) == \"function\") { return safeGet(target, name)?.(hint); };\n        if (safeGet(target, \"value\") != null && hasValue(target)) { return tryParseByHint(safeGet(target, \"value\"), hint); }\n    } }\n    if (name == Symbol.toStringTag) { return ()=>{\n        if (typeof safeGet(target, name) == \"function\") { return safeGet(target, name)?.(); };\n        if (safeGet(target, \"value\") != null && hasValue(target) && isPrimitive(safeGet(target, \"value\"))) { return String(safeGet(target, \"value\") ?? \"\") || \"\"; };\n        return String(safeGet(target, \"toString\")?.() ?? safeGet(target, \"valueOf\")?.() ?? target);\n    } }*/\n}\n\n//\nconst observableAPIMethods = (target, name, registry)=>{\n    if (name == \"subscribe\") {\n        return registry?.compatible?.[name] ?? ((handler)=>{\n            if (typeof handler == \"function\") {\n                return affected(target, handler);\n            } else\n            if (\"next\" in handler && handler?.next != null) {\n                const usub = affected(target, handler?.next), comp = handler?.[\"complete\"];\n                handler[\"complete\"] = (...args)=>{ usub?.(); return comp?.(...args); };\n                return handler[\"complete\"];\n            }\n        })\n    }\n}\n\n//\nexport class ObserveArrayMethod {\n    #name: string; #self: any; #handle: any;\n    constructor(name, self, handle) {\n        this.#name = name;\n        this.#self = self;\n        this.#handle = handle;\n    }\n\n    //\n    get(target, name, rec) {\n        const skip = systemSkipGet(target, name);\n        if (skip !== null) { return skip; }\n        return Reflect.get(target, name, rec);\n    }\n\n    //\n    apply(target, ctx, args) {\n        let added: [number, any, any][] = [], removed: [number, any, any][] = [];\n        let setPairs: [number, any, any][] = [];\n        let oldState: any[] = [...this.#self];\n        let idx: number = -1;\n\n        // execute operation\n        const result = Reflect.apply(target, ctx || this.#self, args);\n        if (this.#handle?.[$triggerLock]) {\n            if (Array.isArray(result)) { return observeArray(result); }\n            return result;\n        }\n\n        //\n        switch (this.#name) {\n            case \"push\"   : idx = oldState?.length; added = args; break;\n            case \"unshift\": idx = 0; added = args; break;\n            case \"pop\":\n                idx = oldState?.length - 1;\n                if (oldState.length > 0) { removed = [[idx - 1, oldState[idx - 1], null]]; }\n                break;\n            case \"shift\":\n                idx = 0;\n                if (oldState.length > 0) removed = [[idx, oldState[idx], null]];\n                break;\n            case \"splice\":\n                const [start, deleteCount, ...items] = args; idx = start;\n                added = deleteCount > 0 ? items.slice(deleteCount) : [];\n\n                // discount of replaced (assigned) elements\n                removed = deleteCount > 0 ? oldState?.slice?.(items?.length + start, start + (deleteCount - (items?.length || 0))) : [];\n\n                // fix index for remaining removed or added elements\n                idx += (deleteCount || 0) - (items?.length || 1);\n\n                // index assignment\n                if (deleteCount > 0 && items?.length > 0) {\n                    for (let i = 0; i < Math.min(deleteCount, items?.length ?? 0); i++) {\n                        setPairs.push([start + i, items[i], oldState?.[start + i] ?? null]);\n                    }\n                }\n                break;\n            case \"sort\":\n            case \"fill\":\n            case \"reverse\":\n            case \"copyWithin\":\n                // compare old and new state, find changed elements\n                idx = 0; for (let i = 0; i < oldState.length; i++) {\n                    if (isNotEqual(oldState[i], this.#self[i]))\n                        {\n                            setPairs.push([idx+i, this.#self[i], oldState[i]]);\n                        }\n                }\n                break;\n            // index assignment, args: [value, index]\n            case \"set\": idx = args[1];\n            setPairs.push([idx, args[0], oldState?.[idx] ?? null]); break;\n        }\n\n        // triggers on adding\n        const reg = subscriptRegistry.get(this.#self);\n        if (added?.length == 1) {\n            reg?.trigger?.(idx, added[0], null, added[0] == null ? \"@add\" : \"@set\");\n        } else if (added?.length > 1) {\n            reg?.trigger?.(idx, added, null, \"@addAll\");\n            added.forEach((item, I)=>reg?.trigger?.(idx+I, item, null, item == null ? \"@add\" : \"@set\"));\n        }\n\n        // triggers on changing\n        if (setPairs?.length == 1) {\n            reg?.trigger?.(setPairs[0]?.[0] ?? idx, setPairs[0]?.[1], setPairs[0]?.[2], setPairs[0]?.[2] == null ? \"@add\" : \"@set\");\n        } else if (setPairs?.length > 1) {\n            reg?.trigger?.(idx, setPairs, oldState, \"@setAll\");\n            setPairs.forEach((pair, I)=>reg?.trigger?.(pair?.[0] ?? idx+I, pair?.[1], pair?.[2], pair?.[2] == null ? \"@add\" : \"@set\"));\n        }\n\n        // triggers on removing\n        if (removed?.length == 1) {\n            reg?.trigger?.(idx, null, removed[0], removed[0] == null ? \"@add\" : \"@delete\");\n        } else if (removed?.length > 1) {\n            reg?.trigger?.(idx, null, removed, \"@clear\");\n            removed.forEach((item, I)=>reg?.trigger?.(idx+I, null, item, item == null ? \"@add\" : \"@delete\"));\n        }\n\n        //\n        if (result == target) { return new Proxy(result as any, this.#handle); };\n        if (Array.isArray(result)) { return observeArray(result); }\n        return result;\n    }\n}\n\n\n\n//\nconst triggerWhenLengthChange = (self, target, oldLen, newLen)=>{\n    const removedItems = (Number.isInteger(oldLen) && Number.isInteger(newLen) && newLen < oldLen) ? target.slice(newLen, oldLen) : [];\n    if (!self[$triggerLock] && oldLen !== newLen) {\n        const registry = (subscriptRegistry).get(target);\n\n        // emit removals if shrunk\n        if (removedItems.length === 1) {\n            registry?.trigger?.(newLen, null, removedItems[0], \"@delete\");\n        } else if (removedItems.length > 1) {\n            registry?.trigger?.(newLen, null, removedItems, \"@clear\");\n            removedItems.forEach((item, I) => registry?.trigger?.(newLen + I, null, item, \"@delete\"));\n        }\n\n        // emit additions if grown (holes are considered added undefined entries)\n        const addedCount = (Number.isInteger(oldLen) && Number.isInteger(newLen) && newLen > oldLen)\n            ? (newLen - oldLen) : 0;\n        if (addedCount === 1) {\n            registry?.trigger?.(oldLen, undefined, null, \"@add\");\n        } else if (addedCount > 1) {\n            const added = Array(addedCount).fill(undefined);\n            registry?.trigger?.(oldLen, added, null, \"@addAll\");\n            added.forEach((_, I) => registry?.trigger?.(oldLen + I, undefined, null, \"@add\"));\n        }\n    }\n}\n\n\n\n//\nexport class ObserveArrayHandler {\n    [$triggerLock]?: boolean;\n    constructor() {\n    }\n\n    //\n    has(target, name) { return Reflect.has(target, name); }\n\n    // TODO: some target with target[n] may has also reactive target[n]?.value, which (sometimes) needs to observe too...\n    // TODO: also, subscribe can't be too simply used more than once...\n    get(target, name, rec) {\n        const skip = systemSkipGet(target, name);\n        if (skip !== null) { return skip; }\n\n        //\n        if ([$extractKey$, $originalKey$, \"@target\", \"deref\"].indexOf(name as any) >= 0 && safeGet(target, name) != null && safeGet(target, name) != target) {\n            return typeof safeGet(target, name) == \"function\" ? safeGet(target, name)?.bind?.(target) : safeGet(target, name);\n        };\n\n        //\n        const registry = (subscriptRegistry)?.get?.(target);\n        const sys = systemGet(target, name, registry); if (sys != null) return sys;\n        const obs = observableAPIMethods(target, name, registry); if (obs != null) return obs;\n\n        //\n        if (name == $triggerLess) { return makeTriggerLess.call(this, this); }\n        if (name == $trigger) {\n            return (key: any = 0) => {\n                const v = safeGet(target, key);\n                return subscriptRegistry.get(target)?.trigger?.(key, v, undefined, \"@invalidate\");\n            };\n        }\n\n        //\n        if (name == \"@target\" || name == $extractKey$) return target;\n\n        //\n        if (name == \"x\") { return () => { return target?.x ?? target?.[0]; }; };\n        if (name == \"y\") { return () => { return target?.y ?? target?.[1]; }; };\n        if (name == \"z\") { return () => { return target?.z ?? target?.[2]; }; };\n        if (name == \"w\") { return () => { return target?.w ?? target?.[3]; }; };\n\n        //\n        if (name == \"r\") { return () => { return target?.r ?? target?.[0]; }; };\n        if (name == \"g\") { return () => { return target?.g ?? target?.[1]; }; };\n        if (name == \"b\") { return () => { return target?.b ?? target?.[2]; }; };\n        if (name == \"a\") { return () => { return target?.a ?? target?.[3]; }; };\n\n        // that case: target[n]?.(?{.?value})?\n        const got = safeGet(target, name) ?? (name == \"value\" ? safeGet(target, $value) : null);\n        if (typeof got == \"function\") { return new Proxy(typeof got == \"function\" ? got?.bind?.(target) : got, new ObserveArrayMethod(name, target, this)); };\n        return got;\n    }\n\n    //\n    set(target, name, value) {\n        if (typeof name != \"symbol\") {\n            // handle Array.length explicitly before numeric index normalization\n            if (Number.isInteger(parseInt(name))) { name = parseInt(name) ?? name; };\n        }\n\n        //\n        if (name == $triggerLock && value) { this[$triggerLock] = !!value; return true; }\n        if (name == $triggerLock && !value) { delete this[$triggerLock]; return true; }\n\n        // array property changes\n        const old = safeGet(target, name);\n\n        //\n        const xyzw = [\"x\", \"y\", \"z\", \"w\"];\n        const rgba = [\"r\", \"g\", \"b\", \"a\"];\n\n        //\n        const xyzw_idx = xyzw.indexOf(name);\n        const rgba_idx = rgba.indexOf(name);\n\n        //\n        let got = false;\n        if (xyzw_idx >= 0) { got = Reflect.set(target, xyzw_idx, value); } else\n        if (rgba_idx >= 0) { got = Reflect.set(target, rgba_idx, value); } else\n        { got = Reflect.set(target, name, value); }\n\n        // bit different trigger rules\n        if (name == \"length\") {\n            if (isNotEqual(old, value)) {\n                triggerWhenLengthChange(this, target, old, value);\n            }\n        }\n\n        //\n        if (!this[$triggerLock] && typeof name != \"symbol\" && isNotEqual(old, value)) {\n            (subscriptRegistry)?.get?.(target)?.trigger?.(name, value, old, typeof name == \"number\" ? \"@set\" : null);\n        }\n\n        //\n        return got;\n    }\n\n    //\n    deleteProperty(target, name) {\n        if (typeof name != \"symbol\") {\n            // handle Array.length explicitly before numeric index normalization\n            if (Number.isInteger(parseInt(name))) { name = parseInt(name) ?? name; };\n        }\n\n        //\n        if (name == $triggerLock) { delete this[$triggerLock]; return true; }\n\n        //\n        const old = safeGet(target, name);\n        const got = Reflect.deleteProperty(target, name);\n\n        //\n        if (!this[$triggerLock] && (name != \"length\" && name != $triggerLock && typeof name != \"symbol\")) {\n            if (old != null) {\n                (subscriptRegistry).get(target)?.trigger?.(name, name, old, typeof name == \"number\" ? \"@delete\" : null);\n            }\n        }\n\n        //\n        return got;\n    }\n}\n\n//\nexport class ObserveObjectHandler<T=any> {\n    [$triggerLock]?: boolean;\n    constructor() {}\n\n    // supports nested \"value\" objects and values\n    get(target, name: keyType, ctx) {\n        if ([$extractKey$, $originalKey$, \"@target\", \"deref\", \"then\", \"catch\", \"finally\"].indexOf(name as any) >= 0 && safeGet(target, name) != null && safeGet(target, name) != target) {\n            return typeof safeGet(target, name) == \"function\" ? bindCtx(target, safeGet(target, name)) : safeGet(target, name);\n        };\n\n        //\n        const registry = (subscriptRegistry).get(target) ?? subscriptRegistry.get(safeGet(target, \"value\") ?? target);\n        const sys = systemGet(target, name, registry); if (sys != null) return sys;\n\n        // drop into value if has\n        if (safeGet(target, name) == null &&\n            name != \"value\" && hasValue(target) &&\n            safeGet(target, \"value\") != null &&\n            (\n                typeof safeGet(target, \"value\") == \"object\" ||\n                typeof safeGet(target, \"value\") == \"function\"\n            ) &&\n            safeGet(safeGet(target, \"value\"), name) != null\n        ) {\n            target = safeGet(target, \"value\") ?? target;\n        }\n\n        //\n        const obs = observableAPIMethods(target, name, registry); if (obs != null) return obs;\n\n        //\n        // redirect to value key\n        if (name == $triggerLess) { return makeTriggerLess.call(this, this); }\n        if (name == $trigger) {\n            return (key: any = \"value\") => {\n                const v = safeGet(target, key);\n                const old = (key == \"value\") ? safeGet(target, $value) : undefined;\n                return subscriptRegistry.get(target)?.trigger?.(key, v, old, \"@invalidate\");\n            };\n        }\n\n        //\n        if (name == Symbol.toPrimitive) {\n            return (hint?) => {\n                const ft = fallThrough(target, name);\n                if (safeGet(ft, name)) return safeGet(ft, name)?.(hint);\n                if (isPrimitive(ft)) return tryParseByHint(ft, hint);\n                if (isPrimitive(safeGet(ft, \"value\"))) return tryParseByHint(safeGet(ft, \"value\"), hint);\n                return tryParseByHint(safeGet(ft, \"value\") ?? ft, hint);\n            }\n        }\n\n        //\n        if (name == Symbol.toStringTag) {\n            return () => {\n                const ft = fallThrough(target, name);\n                if (safeGet(ft, name)) return safeGet(ft, name)?.();\n                if (isPrimitive(ft)) return String(ft ?? \"\") || \"\";\n                if (isPrimitive(safeGet(ft, \"value\"))) return String(safeGet(ft, \"value\") ?? \"\") || \"\";\n                return String(safeGet(ft, \"value\") ?? ft ?? \"\") || \"\";\n            }\n        }\n\n        //\n        if (name == \"toString\") {\n            return () => {\n                const ft = fallThrough(target, name);\n                if (safeGet(ft, name)) return safeGet(ft, name)?.();\n                if (safeGet(ft, Symbol.toStringTag)) return safeGet(ft, Symbol.toStringTag)?.();\n                if (isPrimitive(ft)) return String(ft ?? \"\") || \"\";\n                if (isPrimitive(safeGet(ft, \"value\"))) return String(safeGet(ft, \"value\") ?? \"\") || \"\";\n                return String(safeGet(ft, \"value\") ?? ft ?? \"\") || \"\";\n            }\n        }\n\n        //\n        if (name == \"valueOf\") {\n            return () => {\n                const ft = fallThrough(target, name);\n                if (safeGet(ft, name)) return safeGet(ft, name)?.();\n                if (safeGet(ft, Symbol.toPrimitive)) return safeGet(ft, Symbol.toPrimitive)?.();\n                if (isPrimitive(ft)) return ft;\n                if (isPrimitive(safeGet(ft, \"value\"))) return safeGet(ft, \"value\");\n                return safeGet(ft, \"value\") ?? ft;\n            }\n        }\n\n        //\n        if (typeof name == \"symbol\" && (name in target || safeGet(target, name) != null)) { return safeGet(target, name); }\n\n        //\n        return fallThrough(target, name);\n    }\n\n    //\n    apply(target, ctx, args) { return Reflect.apply(target, ctx, args); }\n    ownKeys(target) { return Reflect.ownKeys(target); }\n    construct(target, args, newT) { return Reflect.construct(target, args, newT); }\n    isExtensible(target) { return Reflect.isExtensible(target); }\n\n    //\n    getOwnPropertyDescriptor(target, key) {\n        let got: TypedPropertyDescriptor<any> | undefined = undefined;\n        try { // @ts-ignore\n            __safeGetGuard?.getOrInsert?.(target, new Set())?.add?.(key);\n            if (__safeGetGuard?.get?.(target)?.has?.(key)) { got = undefined; }\n            got = Reflect.getOwnPropertyDescriptor(target, key);\n        } catch (e) {\n            got = undefined;\n        } finally {\n            __safeGetGuard?.get?.(target)?.delete?.(key);\n        }\n        return got;\n    }\n\n    // supports nested \"value\" objects\n    has(target, prop: keyType) { return (prop in target); }\n    set(target, name: keyType, value) {\n        const skip = systemSkipGet(target, name);\n        if (skip !== null) return skip;\n\n        //\n        return potentiallyAsync(value, (v) => {\n            const skip = systemSkipGet(v, name);\n            if (skip !== null) return skip;\n    \n            //\n            if (name == $triggerLock && value) { this[$triggerLock] = !!value; return true; }\n            if (name == $triggerLock && !value) { delete this[$triggerLock]; return true; }\n\n            // drop into value if has\n            const $original = target;\n\n            // drop into value if has\n            if (safeGet(target, name) == null &&\n                name != \"value\" && hasValue(target) &&\n                safeGet(target, \"value\") != null &&\n                (\n                    typeof safeGet(target, \"value\") == \"object\" ||\n                    typeof safeGet(target, \"value\") == \"function\"\n                ) &&\n                safeGet(safeGet(target, \"value\"), name) != null\n            ) {\n                target = safeGet(target, \"value\") ?? target;\n            }\n\n            //\n            if (typeof name == \"symbol\" && !(safeGet(target, name) != null && name in target)) return;\n            const oldValue = name == \"value\" ? (safeGet(target, $value) ?? safeGet(target, name)) : safeGet(target, name); target[name] = v; const newValue = safeGet(target, name) ?? v;\n            if (!this[$triggerLock] && typeof name != \"symbol\" && (safeGet(target, $isNotEqual) ?? isNotEqual)?.(oldValue, newValue)) {\n                const subscript = subscriptRegistry.get(target) ?? subscriptRegistry.get($original);\n                subscript?.trigger?.(name, v, oldValue);\n            };\n            return true;\n        })\n    }\n\n    //\n    deleteProperty(target, name: keyType) {\n        if (name == $triggerLock) { delete this[$triggerLock]; return true; }\n\n        // drop into value if has\n        if (safeGet(target, name) == null &&\n            name != \"value\" && hasValue(target) &&\n            safeGet(target, \"value\") != null &&\n            (\n                typeof safeGet(target, \"value\") == \"object\" ||\n                typeof safeGet(target, \"value\") == \"function\"\n            ) &&\n            safeGet(safeGet(target, \"value\"), name) != null\n        ) {\n            target = safeGet(target, \"value\") ?? target;\n        }\n\n        //\n        const oldValue = safeGet(target, name);\n        const result = Reflect.deleteProperty(target, name);\n\n        //\n        if (!this[$triggerLock] && (name != $triggerLock && typeof name != \"symbol\")) { (subscriptRegistry).get(target)?.trigger?.(name, null, oldValue); }\n        return result;\n    }\n}\n\n\n\n//\nexport class ObserveMapHandler<K=any, V=any> {\n    [$triggerLock]?: boolean;\n    constructor() { }\n\n    //\n    get(target, name: keyType, ctx) {\n        if ([$extractKey$, $originalKey$, \"@target\", \"deref\"].indexOf(name as any) >= 0 && safeGet(target, name) != null && safeGet(target, name) != target) {\n            return typeof safeGet(target, name) == \"function\" ?\n                bindCtx(target, safeGet(target, name)) : safeGet(target, name);\n        };\n\n        //\n        const registry = (subscriptRegistry).get(target);\n        const sys = systemGet(target, name, registry); if (sys != null) return sys;\n        const obs = observableAPIMethods(target, name, registry); if (obs != null) return obs;\n\n        //\n        target = (safeGet(target, $extractKey$) ?? safeGet(target, $originalKey$) ?? target);\n        const valueOrFx = bindCtx(target, /*Reflect.get(, name, ctx)*/safeGet(target, name));\n        if (typeof name == \"symbol\" && (name in target || safeGet(target, name) != null)) { return valueOrFx; }\n\n        //\n        if (name == $triggerLess) { return makeTriggerLess.call(this, this); }\n        if (name == $trigger) {\n            return (key: any) => {\n                if (key == null) { return; }\n                const v = target.get(key); if (v == null) { return; }\n                return subscriptRegistry.get(target)?.trigger?.(key, v, undefined, \"@set\");\n            };\n        }\n        \n        //\n        if (name == \"clear\") {\n            return () => {\n                const oldValues: any = Array.from(target?.entries?.() || []), result = valueOrFx();\n                oldValues.forEach(([prop, oldValue])=>{\n                    if (!this[$triggerLock] && oldValue) { (subscriptRegistry).get(target)?.trigger?.(prop, null, oldValue, \"@delete\"); }\n                });\n                return result;\n            };\n        }\n\n        //\n        if (name == \"delete\") {\n            return (prop, _ = null) => {\n                const oldValue = target.get(prop), result = valueOrFx(prop);\n                if (!this[$triggerLock] && oldValue) { (subscriptRegistry).get(target)?.trigger?.(prop, null, oldValue, \"@delete\"); }\n                return result;\n            };\n        }\n\n        //\n        if (name == \"set\") {\n            return (prop, value) => potentiallyAsyncMap(value, (v)=>{\n                const oldValue = target.get(prop), result = valueOrFx(prop, value);\n                if (isNotEqual(oldValue, result)) { if (!this[$triggerLock]) { (subscriptRegistry).get(target)?.trigger?.(prop, result, oldValue, oldValue == null ? \"@add\" : \"@set\"); } };\n                return result;\n            });\n        }\n\n        //\n        return valueOrFx;\n    }\n\n    //\n    set(target, name: keyType, value) {\n        if (name == $triggerLock) { this[$triggerLock] = !!value; return true; }\n        if (name == $triggerLock && !value) { delete this[$triggerLock]; return true; };\n        return Reflect.set(target, name, value);\n    }\n\n    // redirect to value key\n    has(target, prop: keyType) { return Reflect.has(target, prop); }\n    apply(target, ctx, args) { return Reflect.apply(target, ctx, args); }\n    construct(target, args, newT) { return Reflect.construct(target, args, newT); }\n    ownKeys(target) { return Reflect.ownKeys(target); }\n    isExtensible(target) { return Reflect.isExtensible(target); }\n\n    //\n    getOwnPropertyDescriptor(target, key) {\n        let got: TypedPropertyDescriptor<any> | undefined = undefined;\n        try { // @ts-ignore\n            __safeGetGuard?.getOrInsert?.(target, new Set())?.add?.(key);\n            if (__safeGetGuard?.get?.(target)?.has?.(key)) { got = undefined; }\n            got = Reflect.getOwnPropertyDescriptor(target, key);\n        } catch (e) {\n            got = undefined;\n        } finally {\n            __safeGetGuard?.get?.(target)?.delete?.(key);\n        }\n        return got;\n    }\n\n    //\n    deleteProperty(target, name: keyType) {\n        if (name == $triggerLock) { delete this[$triggerLock]; return true; }\n        const result = Reflect.deleteProperty(target, name);\n        return result;\n    }\n}\n\n//\nexport class ObserveSetHandler<T=any> {\n    [$triggerLock]?: boolean = false;\n    constructor() {}\n\n    //\n    get(target, name: keyType, ctx) {\n        if ([$extractKey$, $originalKey$, \"@target\", \"deref\"].indexOf(name as any) >= 0 && safeGet(target, name) != null && safeGet(target, name) != target) {\n            return typeof safeGet(target, name) == \"function\" ? bindCtx(target, safeGet(target, name)) : safeGet(target, name);\n        };\n\n        //\n        const registry = (subscriptRegistry).get(target);\n        const sys = systemGet(target, name, registry); if (sys != null) return sys;\n        const obs = observableAPIMethods(target, name, registry); if (obs != null) return obs;\n\n        // redirect to value key\n        target = (safeGet(target, $extractKey$) ?? safeGet(target, $originalKey$) ?? target);\n        const valueOrFx = bindCtx(target, safeGet(target, name));\n        if (typeof name == \"symbol\" && (name in target || safeGet(target, name) != null)) { return valueOrFx; }\n\n        //\n        if (name == $triggerLess) { return makeTriggerLess.call(this, this); }\n        if (name == $trigger) {\n            return (key: any) => {\n                if (key == null) return;\n                const v = target.has(key);\n                return subscriptRegistry.get(target)?.trigger?.(key, v, undefined, \"@invalidate\");\n            };\n        }\n        \n        //\n        if (name == \"clear\") {\n            return () => {\n                const oldValues = Array.from(target?.values?.() || []), result = valueOrFx();\n                oldValues.forEach((oldValue)=>{ if (!this[$triggerLock] && oldValue) { (subscriptRegistry).get(target)?.trigger?.(null, null, oldValue, \"@delete\"); } });\n                return result;\n            };\n        }\n\n        //\n        if (name == \"delete\") {\n            return (value) => {\n                const oldValue = target.has(value) ? value : null, result = valueOrFx(value);\n                if (!this[$triggerLock] && oldValue) { (subscriptRegistry).get(target)?.trigger?.(value, null, oldValue, \"@delete\"); }\n                return result;\n            };\n        }\n\n        //\n        if (name == \"add\") {\n            // TODO: add potentially async set\n            return (value) => {\n                const oldValue = target.has(value) ? value : null, result = valueOrFx(value);\n                if (isNotEqual(oldValue, value)) { if (!this[$triggerLock] && !oldValue) { (subscriptRegistry).get(target)?.trigger?.(value, value, oldValue, \"@add\"); } };\n                return result;\n            };\n        }\n\n        //\n        return valueOrFx;\n    }\n\n    //\n    set(target, name: keyType, value) {\n        if (name == $triggerLock && value) { this[$triggerLock] = !!value; return true; }\n        if (name == $triggerLock && !value) { delete this[$triggerLock]; return true; }\n        return Reflect.set(target, name, value);\n    }\n\n    // redirect to value key i\n    has(target, prop: keyType) { return Reflect.has(target, prop); }\n    apply(target, ctx, args) { return Reflect.apply(target, ctx, args); }\n    construct(target, args, newT) { return Reflect.construct(target, args, newT); }\n    ownKeys(target) { return Reflect.ownKeys(target); }\n    isExtensible(target) { return Reflect.isExtensible(target); }\n\n    //\n    getOwnPropertyDescriptor(target, key) {\n        let got: TypedPropertyDescriptor<any> | undefined = undefined;\n        try { // @ts-ignore\n            __safeGetGuard?.getOrInsert?.(target, new Set())?.add?.(key);\n            if (__safeGetGuard?.get?.(target)?.has?.(key)) { got = undefined; }\n            got = Reflect.getOwnPropertyDescriptor(target, key);\n        } catch (e) {\n            got = undefined;\n        } finally {\n            __safeGetGuard?.get?.(target)?.delete?.(key);\n        }\n        return got;\n    }\n\n    //\n    deleteProperty(target, name: keyType) {\n        if (name == $triggerLock) { delete this[$triggerLock]; return true; }\n        const result = Reflect.deleteProperty(target, name);\n        return result;\n    }\n}\n\n//\nexport const $isObservable = (target: any) => {\n    return !!((typeof target == \"object\" || typeof target == \"function\") && target != null && (target?.[$extractKey$] || target?.[$affected]));\n}\n\n//\nexport const observeArray  = <T = any>(arr: T[]): observeValid<T[]> => { return ($isObservable(arr) ? arr : wrapWith(arr, new ObserveArrayHandler())); };\nexport const observeObject = <T = any>(obj: T): observeValid<T> => { return ($isObservable(obj) ? (obj as observeValid<T>) : wrapWith(obj, new ObserveObjectHandler())); };\nexport const observeMap    = <K = any, V = any, T extends MapLike<K, V> = Map<K, V>>(map: T): observeValid<T> => { return ($isObservable(map) ? map : wrapWith(map, new ObserveMapHandler())); };\nexport const observeSet    = <K = any, V = any, T extends SetLike<K, V> = Set<K>>(set: T): observeValid<T> => { return ($isObservable(set) ? set : wrapWith(set, new ObserveSetHandler())); };\n","import { defaultByType, isPrimitive, $triggerLock, tryParseByHint, isArrayInvalidKey, type keyType } from \"fest/core\";\nimport { $value, $behavior, $promise, $extractKey$, $affected, $trigger } from \"../wrap/Symbol\";\nimport { addToCallChain, deref, type observeValid, type WeakKey } from \"../wrap/Utils\";\nimport { $isObservable, observeArray, observeMap, observeObject, observeSet } from \"./Specific\";\nimport { subscriptRegistry } from \"./Subscript\";\nimport { MethodsOf } from \"../wrap/Utils\";\nimport { affected } from \"./Mainline\";\nimport { hasValue } from \"fest/core\";\n\n//\nexport interface refWrap<T = any> {\n    [$promise]?: Promise<T>|null|undefined;\n    [$behavior]?: any;\n    [Symbol.toStringTag]?(): string;\n    [Symbol.toPrimitive]?(hint: any): any;\n    [$value]?: T;\n    set value(v: T|null|undefined);\n    get value(): T|null|undefined;\n}\n\n//\nexport type refType<T = any> = (refWrap<T> | (T extends object ? T : any)) & MethodsOf<T> & (T extends symbol | object | Function ? T : any);\n\n//\nexport const numberRef = (initial?: number|null|undefined|Promise<number>, behavior?: any): refType<number> => {\n    const isPromise = initial instanceof Promise || typeof (initial as unknown as Promise<number>)?.then == \"function\";\n    const obj: refWrap<number> = {\n        [$promise]: isPromise ? (initial as unknown as Promise<number>) : null as unknown as Promise<number>,\n        [$value]: isPromise ? 0 : (Number(deref(initial) || 0) || 0),\n        [$behavior]: behavior,\n        [Symbol?.toStringTag]() { return String(this?.[$value] ?? \"\") || \"\"; },\n        [Symbol?.toPrimitive](hint: any) { return tryParseByHint((typeof this?.[$value] != \"object\" ? this?.[$value] : (this?.[$value]?.value || 0)) ?? 0, hint); },\n        set value(v: any) { this[$value] = ((v != null && !Number.isNaN(v)) ? Number(v) : this[$value]) || 0; },\n        get value() { return Number(this[$value] || 0) || 0; }\n    };\n    const $r = observe(obj) as observeValid<refType<number>>; (initial as unknown as Promise<number>)?.then?.((v)=>$r.value = v); return $r;\n}\n\n//\nexport const stringRef = (initial?: string|null|undefined|Promise<string>, behavior?: any): refType<string> => {\n    const isPromise = initial instanceof Promise || typeof (initial as unknown as Promise<string>)?.then == \"function\";\n    const obj: refWrap<string> = {\n        [$promise]: isPromise ? (initial as unknown as Promise<string>) : null as unknown as Promise<string>,\n        [$value]: (isPromise ? \"\" : String(deref(typeof initial == \"number\" ? String(initial) : (initial || \"\")))) ?? \"\",\n        [$behavior]: behavior,\n        [Symbol?.toStringTag]() { return String(this?.[$value] ?? \"\") ?? \"\"; },\n        [Symbol?.toPrimitive](hint: any) { return tryParseByHint(this?.[$value] ?? \"\", hint); },\n        set value(v: any) { this[$value] = String(typeof v == \"number\" ? String(v) : (v || \"\")) ?? \"\"; },\n        get value() { return String(this[$value] ?? \"\") ?? \"\"; },\n    };\n    const $r = observe(obj) as observeValid<refType<string>>; (initial as unknown as Promise<string>)?.then?.((v)=>$r.value = v); return $r;\n}\n\n//\nexport const booleanRef = (initial?: boolean|null|undefined|Promise<boolean>, behavior?: any): refType<boolean> => {\n    const isPromise = initial instanceof Promise || typeof (initial as unknown as Promise<boolean>)?.then == \"function\";\n    const obj: refWrap<boolean> = {\n        [$promise]: isPromise ? (initial as unknown as Promise<boolean>) : null as unknown as Promise<boolean>,\n        [$value]: (isPromise ? false : ((deref(initial) != null ? (typeof deref(initial) == \"string\" ? true : !!deref(initial)) : false) || false)) || false,\n        [$behavior]: behavior,\n        [Symbol?.toStringTag]() { return String(this?.[$value] ?? \"\") || \"\"; },\n        [Symbol?.toPrimitive](hint: any) { return tryParseByHint(!!this?.[$value] || false, hint); },\n        set value(v: any) { this[$value] = (v != null ? (typeof v == \"string\" ? true : !!v) : this[$value]) || false; },\n        get value() { return this[$value] || false; }\n    };\n    const $r = observe(obj) as observeValid<refType<boolean>>; (initial as unknown as Promise<boolean>)?.then?.((v)=>$r.value = v); return $r;\n}\n\n//\nexport const wrapRef = <T = any>(initial?: T|null|undefined|Promise<T>, behavior?: any): observeValid<refType<T>> => {\n    const isPromise = initial instanceof Promise || typeof (initial as unknown as Promise<T>)?.then == \"function\";\n    const obj: refWrap<T> = {\n        [$promise]: isPromise ? (initial as unknown as Promise<T>) : null as unknown as Promise<T>,\n        [$behavior]: behavior,\n        [Symbol?.toStringTag]() { return String(this.value ?? \"\") || \"\"; },\n        [Symbol?.toPrimitive](hint: any) { return tryParseByHint(this.value, hint); },\n        value: isPromise ? null : deref(initial)\n    };\n    const $r = observe(obj) as observeValid<refType<T>>;\n    (initial as unknown as Promise<T>)?.then?.((v) => $r.value = v);\n    affected(initial, (v) => { /*wr?.deref?.()*/$r?.[$trigger]?.(); });\n    return $r;\n}\n\n//\nexport const propRef = <T = any>(src: observeValid<T>, srcProp: keyType | null = \"value\", initial?: any, behavior?: any): any => {\n    if (isPrimitive(src) || !src) return src;\n\n    //\n    if (Array.isArray(src) && !isArrayInvalidKey(src?.[1], src) && (Array.isArray(src?.[0]) || typeof src?.[0] == \"object\" || typeof src?.[0] == \"function\")) { src = src?.[0]; };\n\n    //\n    if ((srcProp ??= Array.isArray(src) ? null : \"value\") == null || isArrayInvalidKey(srcProp, src)) { return; }\n\n    // isn't needed to proxy reactive value, it's already reactive\n    if (srcProp && hasValue(src?.[srcProp]) && isObservable(src?.[srcProp])) {\n        return recoverReactive(src?.[srcProp]);\n    }\n\n    // legally use in LUR.E/GLit properties\n    if (srcProp && typeof src?.getProperty == \"function\" && isObservable(src?.getProperty?.(srcProp))) {\n        return src?.getProperty?.(srcProp);\n    }\n\n    // is regular object, isn't can be reactive (or reactive one-directional, not duplex), just return the value directly\n    //if (srcProp && !isObservable(src)) { return src?.[srcProp]; } // commented line means enabled one directional reactivity\n    //if (isReactive(src)) { src = recoverReactive(src); }; // recover no necessary, subscribe already checks if reactive\n\n    // truly reflective for object property key/index\n    const r: any = observe({\n        [$value]: ((src as any)[srcProp] ??= initial ?? (src as any)[srcProp]),\n        [$behavior]: behavior,\n        [Symbol?.toStringTag]() { return String(src?.[srcProp] ?? this[$value] ?? \"\") || \"\"; },\n        [Symbol?.toPrimitive](hint: any) { return tryParseByHint(src?.[srcProp], hint); },\n        set value(v) { r[$triggerLock] = true; (src as any)[srcProp] = (this[$value] = v ?? defaultByType((src as any)[srcProp])); r[$triggerLock] = false; },\n        get value() { return (this[$value] = src?.[srcProp] ?? this[$value]); }\n    });\n\n    // a reason, why regular objects isn't reactive directly, and may be single directional\n    // from 09.02.2026, do more aggresively reactive the source object\n    const usb = affected(src, (v) => { r?.[$trigger]?.(); /*r.value = src?.[srcProp] ?? r?.[$value];*/ });\n    addToCallChain(r, Symbol.dispose, usb);\n    return r;\n}\n\n//\nexport const $ref = <T = any>(typed: T|null|undefined|Promise<T>, behavior?: any): (T extends object|Function|symbol ? observeValid<T>|refType<T> : refType<T>) => {\n    switch (typeof typed) {\n        case \"boolean\": return booleanRef(typed, behavior) as refType<boolean>;\n        case \"number\" : return numberRef(typed, behavior) as refType<number>;\n        case \"string\" : return stringRef(typed, behavior) as refType<string>;\n        case \"object\" : if (typed != null) { return wrapRef(observe(typed), behavior) as any; }\n        default: return wrapRef(typed, behavior) as any;\n    }\n}\n\n//\nexport const ref = <T = any>(\n    typed: T | null | undefined | Promise<T>,\n    prop: keyType | null = \"value\",\n    behavior?: any\n): (\n    T extends object | Function | symbol ? observeValid<T> | refType<T> : refType<T>\n) & (\n    T extends symbol | object | Function ? T : any\n) => {\n    // 1. Ensure we have an observable or ref for the input\n    const $r = isObservable(typed)\n        ? (typed as observeValid<T>)\n        : ($ref(typed, behavior) as observeValid<T>);\n    \n    // 2. If a prop is given, get a ref to that prop, otherwise use the value as is\n    if (prop != null) {\n        // propRef always returns a refType<X> or observeValid<X>\n        // We cannot guarantee T extends prop type. So just return as best match\n        return propRef(\n            $r as unknown as refType<T>,\n            prop,\n            behavior\n        ) as any;\n    } else {\n        return $r as any;\n    }\n};\n\n//\nexport const promised = (promise: any, behavior?: any) => {\n    return ref(promise, behavior);\n}\n\n//\nexport const triggerWithDelay = (ref: any, cb: Function, delay = 100): ReturnType<typeof setTimeout> | undefined => { if (ref?.value ?? ref) { return setTimeout(()=>{ if (ref.value) cb?.(); }, delay); } }\n\n//\nexport const delayedBehavior  = (delay = 100) => {\n    return (cb: Function, [val], [sig]) => { let tm = triggerWithDelay(val, cb, delay); sig?.addEventListener?.(\"abort\", ()=>{ if (tm) clearTimeout(tm); }, { once: true }); };\n}\n\n//\nexport const delayedOrInstantBehavior = (delay = 100) => {\n    return (cb: Function, [val], [sig]) => { let tm = triggerWithDelay(val, cb, delay); sig?.addEventListener?.(\"abort\", ()=>{ if (tm) clearTimeout(tm); }, { once: true }); if (!tm) { cb?.(); }; };\n}\n\n\n\n//\nexport const observe = <T = any>(target: T, stateName?: string): observeValid<T> => {\n    if (target == null || typeof target == \"symbol\" || !(typeof target == \"object\" || typeof target == \"function\") || $isObservable(target)) {\n        return target as observeValid<T>;\n    }\n\n    //\n    if ((target = deref?.(target)) == null || target instanceof Promise || target instanceof WeakRef || $isObservable(target)) {\n        return target as observeValid<T>; // promise forbidden\n    }\n\n    //\n    const unwrap: any = target;\n    if (unwrap == null ||\n        typeof unwrap == \"symbol\" || !(typeof unwrap == \"object\" || typeof unwrap == \"function\") ||\n        unwrap instanceof Promise || unwrap instanceof WeakRef\n    ) { return unwrap as observeValid<T>; };\n\n    //\n    let reactive = unwrap;\n    if (Array.isArray(unwrap)) { reactive = observeArray(unwrap); return reactive; } else\n    if (unwrap instanceof Map) { reactive = observeMap(unwrap); return reactive; } else\n    if (unwrap instanceof Set) { reactive = observeSet(unwrap); return reactive; } else\n    if (typeof unwrap == \"function\" || typeof unwrap == \"object\") { reactive = observeObject(unwrap); return reactive; }\n    return reactive;\n}\n\n//\nexport const isObservable = (target: any) => {\n    if (typeof HTMLInputElement != \"undefined\" && target instanceof HTMLInputElement) { return true; }\n    return !!((typeof target == \"object\" || typeof target == \"function\") && target != null && (target?.[$extractKey$] || target?.[$affected] || subscriptRegistry?.has?.(target)));\n}\n\n//\nexport const recoverReactive = (target: any): any => {\n    return isObservable(target) ? observe(target) : null;\n}\n","import { callByAllProp, callByProp, hasValue, isKeyType, isNotEqual, isPrimitive, objectAssign } from \"fest/core\";\nimport { $extractKey$, $registryKey$, $affected, $trigger } from \"../wrap/Symbol\";\nimport { addToCallChain, safe, withPromise, type keyType, subValid, observeValid, isThenable } from \"../wrap/Utils\";\nimport { subscriptRegistry } from \"./Subscript\";\nimport { observableBySet, observableByMap } from \"./Assigned\";\nimport { isObservable } from \"./Primitives\";\n\n//\nexport const useObservable = <Under = any>(unwrap: any): observeValid<Under> => { // @ts-ignore\n    if (unwrap == null || (typeof unwrap != \"object\" && typeof unwrap != \"function\") || unwrap?.[Symbol.observable] != null) { return unwrap; } // @ts-ignore\n    try { unwrap[Symbol.observable] = self?.compatible; } catch (e) { console.warn(\"Unable to assign <[Symbol.observable]>, object will not observable by other frameworks\"); };\n    unwrap[$affected] = (cb)=>{ // @ts-ignore\n        const observable = unwrap?.[Symbol?.observable];\n        observable?.()?.affected?.(cb);\n        return () => observable?.()?.unaffected?.(cb);\n    }; // @ts-ignore\n    return unwrap;\n}\n\n//\ntype callable = (value: any, prop: keyType, old?: any, operation?: string | null) => void;\ntype subscript = (target: any, prop: keyType | null, cb: callable, ctx?: any) => any;\nexport const specializedSubscribe = new WeakMap<any, subscript>();\n\n//\nconst checkValidObj = (obj: any) => {\n    if (typeof obj == \"symbol\" || obj == null || !(typeof obj == \"object\" || typeof obj == \"function\")) return;\n    return obj;\n}\n\n//\nexport const subscribeDirectly: subscript = (target: any, prop: keyType | null, cb: (value: any, prop: keyType, old?: any, operation?: string|null) => void, ctx: any | null = null) => { if (!target) return;\n    if (!checkValidObj(target)) return;\n    const tProp = (prop != Symbol.iterator) ? prop : null;\n\n    //\n    let registry = target?.[$registryKey$] ?? (subscriptRegistry).get(target);\n\n    //\n    target = target?.[$extractKey$] ?? target;\n\n    //\n    queueMicrotask(() => {\n        if (tProp != null && tProp != Symbol.iterator) { callByProp(target, tProp, cb, ctx); } else { callByAllProp(target, cb, ctx); }\n    });\n\n    //\n    let unSub: any = registry?.affected?.(cb, tProp);\n    if (target?.[Symbol.dispose]) return unSub;\n\n    //\n    addToCallChain(unSub, Symbol.dispose, unSub);\n    addToCallChain(unSub, Symbol.asyncDispose, unSub);\n    addToCallChain(target, Symbol.dispose, unSub);\n    addToCallChain(target, Symbol.asyncDispose, unSub);\n    return unSub;\n}\n\n//\nexport const subscribeInput: subscript = (tg: HTMLInputElement, _: keyType | null, cb: (value: any, _: keyType, old?: any, operation?: string|null) => void, ctx: any | null = null) => {\n    // inputs now can be regally subscribed directly\n    const $opt: any = { }; let oldValue = tg?.value;\n    const $cb = (ev: any) => { cb?.(ev?.target?.value, \"value\", oldValue); oldValue = ev?.target?.value; };\n    (tg as any)?.addEventListener?.(\"change\", $cb, $opt);\n    return () => (tg as any)?.removeEventListener?.(\"change\", $cb, $opt);\n}\n\n//\nconst checkIsPaired = (tg: any) => {\n    return (Array.isArray(tg) && tg?.length == 2 && checkValidObj(tg?.[0])) && (isKeyType(tg?.[1]) || tg?.[1] == Symbol.iterator);\n}\n\n// split from prop pairs\nexport const subscribePaired: subscript = <Under = any>(tg: subValid<Under>, _: keyType | null, cb: (value: any, prop: keyType, old?: any, operation?: string|null) => void, ctx: any | null = null) => {\n    const prop = isKeyType(tg?.[1]) ? tg?.[1] : null;\n    return affected(tg?.[0], prop, cb, ctx);\n}\n\n//\nexport const subscribeThenable: subscript = (obj: any, prop: keyType | null, cb: (value: any, prop: keyType, old?: any, operation?: string|null) => void, ctx: any | null = null) => {\n    return obj?.then?.((obj: any) => affected?.(obj, prop, cb, ctx))?.catch?.((e: any) => { console.warn(e); return null; });\n}\n\n//\nexport const affected = (obj: any, prop: keyType | callable | null, cb: callable = ()=>{}, ctx?: any) => {\n    if (typeof prop == \"function\") { cb = prop; prop = null; }\n\n    //\n    if (isPrimitive(obj) || typeof obj == \"symbol\") { return queueMicrotask(() => { return cb?.(obj, null as any, null, null); }); }\n    if (typeof obj?.[$affected] == \"function\") {\n        return obj?.[$affected]?.(cb, prop, ctx);\n    } else\n    if (checkValidObj(obj)) {\n        const wrapped = obj;\n        obj = obj?.[$extractKey$] ?? obj;\n        if (specializedSubscribe?.has?.(obj)) {\n            return specializedSubscribe?.get?.(obj)?.(wrapped, prop, cb, ctx);\n        }\n\n        //\n        if (isObservable(wrapped) || (checkIsPaired(obj) && isObservable(obj?.[0]))) {\n            // when no exists, add a new specialized subscribe function\n            if (isThenable(obj)) //@ts-ignore\n                { return specializedSubscribe?.getOrInsert?.(obj, subscribeThenable)?.(obj, prop, cb, ctx); } else\n            if (checkIsPaired(obj))  //@ts-ignore\n                { return specializedSubscribe?.getOrInsert?.(obj, subscribePaired)?.(obj, prop, cb, ctx); } else\n            if (typeof HTMLInputElement != \"undefined\" && obj instanceof HTMLInputElement)  //@ts-ignore\n                { return specializedSubscribe?.getOrInsert?.(obj, subscribeInput)?.(obj, prop, cb, ctx); } else  //@ts-ignore\n                { return specializedSubscribe?.getOrInsert?.(obj, subscribeDirectly)?.(wrapped, prop, cb, ctx); }\n        } else {\n            return queueMicrotask(() => {\n                if (checkIsPaired(obj)) { return callByProp?.(obj?.[0], obj?.[1] as any, cb, ctx); }\n                if (prop != null && prop != Symbol.iterator) { return callByProp?.(obj, prop, cb, ctx); }\n                return callByAllProp?.(obj, cb, ctx);\n            });\n        }\n    }\n};\n\n//\nexport const makeArrayObservable = (tg)=>{\n    if (tg instanceof Set) return observableBySet(tg);\n    if (tg instanceof Map) return observableByMap(tg);\n    return tg;\n}\n\n//\nexport class DoubleWeakMap {\n    #top = new WeakMap(); // key1 -> WeakMap(key2 -> value)\n  \n    #ensureInner(key1) {\n        let inner = this.#top.get(key1);\n        if (!inner) {\n            inner = new WeakMap();\n            this.#top.set(key1, inner);\n        }\n        return inner;\n    }\n  \n    #splitPair(pair) {\n        if (!Array.isArray(pair) || pair.length !== 2) {\n            //throw new TypeError(\"Key must be a pair: [keyL1, keyL2]\");\n            return [null, null];\n        }\n        return pair;\n    }\n\n    hasL1(key1) {\n        return this.#top.has(key1);\n    }\n  \n    set(pair, value) {\n        const [key1, key2] = this.#splitPair(pair);\n        this.#ensureInner(key1).set(key2, value);\n        return this;\n    }\n  \n    get(pair) {\n        const [key1, key2] = this.#splitPair(pair);\n        return this.#top.get(key1)?.get(key2);\n    }\n  \n    has(pair) {\n        const [key1, key2] = this.#splitPair(pair);\n        return this.#top.get(key1)?.has(key2) ?? false;\n    }\n  \n    delete(pair) {\n        const [key1, key2] = this.#splitPair(pair);\n        const inner = this.#top.get(key1);\n        return inner ? inner.delete(key2) : false;\n    }\n  \n    deleteTop(key1) {\n        return this.#top.delete(key1);\n    }\n  \n    //  :  get-or-create (  \"computed\")\n    getOrCreate(pair, factory) {\n        const [key1, key2] = this.#splitPair(pair);\n        const inner = this.#ensureInner(key1);\n    \n        if (inner.has(key2)) return inner.get(key2);\n    \n        const value = factory();\n        inner.set(key2, value);\n        return value;\n    }\n  \n    // getOrInsert:     **  ( )\n    getOrInsert(pair, value) {\n        const [key1, key2] = this.#splitPair(pair);\n        const inner = this.#ensureInner(key1);\n    \n        if (inner.has(key2)) return inner.get(key2);\n    \n        inner.set(key2, value);\n        return value;\n    }\n  \n    // getOrInsertComputed:      fn(pair)  \n    // (,      )\n    getOrInsertComputed(pair, compute) {\n        const [key1, key2] = this.#splitPair(pair);\n        const inner = this.#ensureInner(key1);\n    \n        if (inner.has(key2)) return inner.get(key2);\n    \n        const value = compute([key1, key2]);\n        inner.set(key2, value);\n        return value;\n    }\n}\n\n//\nconst registeredIterated = new DoubleWeakMap();\n\n//\nexport const iterated = <T = any>(tg: subValid<T>, cb: (value: any, prop: keyType, old?: any, operation?: string|null) => void, ctx: any | null = null)=>{\n    if (!tg) return;\n\n    //\n    if (registeredIterated.has([tg, cb])) { return registeredIterated.get([tg, cb]); }\n\n    //\n    const $sub = (value: any, name: keyType, old?: any) => {\n        if (name == \"value\") {\n            //TODO: needs notify, that elements of arrayold is removed\n            const entries = (old?.value ?? old)?.entries?.();\n            const basis = (tg as any)?.value ?? value?.value ?? value;\n\n            //\n            if (entries) {\n                for (const [idx, item] of entries) {\n                    const ofOld = item ?? ((old?.value ?? old)?.[idx] ?? null);\n                    const ofNew = basis?.[idx];\n                    if (ofOld == null && ofNew != null) {\n                        cb(ofNew, idx, null, \"@add\");\n                    } else if (ofOld != null && ofNew == null) {\n                        cb(null, idx, ofOld, \"@delete\");\n                    } else if (isNotEqual(ofOld, ofNew)) {\n                        cb(ofNew, idx, ofOld, \"@set\");\n                    }\n                }\n            }\n            \n            //\n            return iterated(value ?? (tg as any)?.value, (value, prop, old, operation) => {\n                cb(value, prop, old, operation);\n            });\n        }\n        return tg[name];\n    }\n\n    // @ts-ignore\n    return registeredIterated.getOrInsertComputed([tg, cb], () => {\n        if (tg instanceof Set) { return affected([observableBySet(tg) as T, Symbol.iterator], cb, ctx); }\n        if (tg instanceof Map) { return affected(tg, cb, ctx); }\n        if (hasValue(tg)) { return affected(tg, $sub, ctx); }\n        if (Array.isArray(tg) && !(tg?.length == 2 && isKeyType(tg?.[1]) && isObservable(tg?.[0]))) { return affected([tg, Symbol.iterator], cb, ctx); }\n        return affected(tg, cb, ctx);\n    });\n}\n\n//\nexport const unaffected = <T = any>(tg: T, cb?: (value: any, prop: keyType, old?: any) => void, ctx: any | null = null) => {\n    return withPromise(tg, (target: any) => {\n        const isPair = Array.isArray(target) && target?.length == 2 && [\"object\", \"function\"].indexOf(typeof target?.[0]) >= 0 && isKeyType(target?.[1]);\n        const prop = isPair ? target?.[1] : null; target = (isPair && prop != null) ? (target?.[0] ?? target) : target;\n        const unwrap: any = (typeof target == \"object\" || typeof target == \"function\") ? (target?.[$extractKey$] ?? target) : target;\n        let self = target?.[$registryKey$] ?? (subscriptRegistry).get(unwrap);\n        self?.unaffected?.(cb, prop);\n    });\n}\n\n//\nexport const bindBy = <Under = any>(target, reactive: subValid<Under>, watch?) => {\n    affected(reactive, null, (v, p) => { objectAssign(target, v, p, true); });\n    watch?.(() => target, (N) => { for (const k in N) { objectAssign(reactive, N[k], k, true); } }, { deep: true });\n    return target;\n};\n\n//\nexport const derivate = <Under = any, T = observeValid<Under>>(from, reactFn: (value: any) => any, watch?) => bindBy(reactFn(safe(from)), from, watch);\nexport const bindByKey = <Under = any>(target, reactive: subValid<Under>, key = () => \"\") => affected(reactive, null, (value, p) => { if (p == key()) { objectAssign(target, value, null, true); } });\n","import { affected } from \"./Mainline\";\nimport { addToCallChain, observeValid, subValid, type keyType } from \"../wrap/Utils\";\nimport { observe, isObservable, triggerWithDelay, recoverReactive } from \"./Primitives\";\nimport { $promise, $triggerLock, $value, $behavior, $trigger } from \"../wrap/Symbol\";\nimport { $avoidTrigger, $getValue, hasValue, isArrayInvalidKey, isKeyType, isNotEqual, isPrimitive, objectAssignNotEqual, tryParseByHint, defaultByType, deref } from \"fest/core\";\n\n//\nexport const conditionalIndex = <Under = any>(condList: any[] = []): observeValid<Under> => { return computed(condList, () => condList.findIndex(cb => cb?.()), \"value\"); } // TODO: check\n\n//\n/*\nexport const conditionalRef = <Under = any>(cond: any, ifTrue: any, ifFalse: any, behavior?: any): refValid<Under> => {\n    const cur = autoRef((cond?.value ?? cond) ? ifTrue : ifFalse, behavior);\n    const usb = affected([cond, \"value\"], (val) => { if (cur != null && (typeof cur == \"object\" || typeof cur == \"function\")) cur.value = val ? ifTrue : ifFalse; });\n    addToCallChain(cur, Symbol.dispose, usb); return cur;\n}*/\n\n//\nexport const conditionalRef = <T = any>(cond: any, ifTrue: any, ifFalse: any, behavior?: any): observeValid<T> => {\n    if (isPrimitive(cond)) return cond ? ifTrue : ifFalse;\n\n    //\n    const getTrue = ()=>{ return ifTrue; };\n    const getFalse = ()=>{ return ifFalse; };\n\n    //\n    const valueOf = (n?: any)=>{\n        if (n != null) { cond.value = hasValue(n) ? n?.value : n; };\n        const cnd = hasValue(cond) ? cond?.value : cond;\n        return cnd ? getTrue() : getFalse();\n    }\n\n    // truly reflective\n    const r = observe({\n        [$value]: valueOf(),\n        [$behavior]: behavior,\n        [Symbol?.toStringTag]() { return String(valueOf() ?? this[$value] ?? \"\") || \"\"; },\n        [Symbol?.toPrimitive](hint: any) { return tryParseByHint(valueOf() ?? this[$value], hint); },\n        set value(v) { this[$value] = valueOf(v); },\n        get value() { return (this[$value] = valueOf() ?? this[$value]); }\n    });\n\n    //\n    const usb = affected([cond, \"value\"], (val)=>{ r?.[$trigger]?.(); });\n    addToCallChain(r, Symbol.dispose, usb); return r as unknown as observeValid<T>;\n}\n\n// alias\nexport const conditional = conditionalRef;\n\n//\n// used for redirection properties\n// !one-directional\nexport const remap = <T = any>(sub: subValid<T>, cb?: Function | null, dest?: any | null) => {\n    if (!dest) dest = observe({}) as any;\n    const usb = affected(sub, (value, prop, old) => {\n        const got = cb?.(value, prop, old);\n        if (typeof got == \"object\") { objectAssignNotEqual(dest, got); } else\n            if (isNotEqual(dest[prop], got)) dest[prop] = got;\n    });\n    if (dest) { addToCallChain(dest, Symbol.dispose, usb); }; return dest; // return reactive value\n}\n\n//\n// !one-directional\nexport const unified = <Under = any>(...subs: subValid<Under>[]) => {\n    const dest = observe({});\n    subs?.forEach?.((sub) => affected(sub, (value, prop, _) => {\n        if (isNotEqual(dest[prop], value)) { dest[prop] = value; };\n    })); return dest;\n}\n\n//\nexport const observableBySet = <T = any>(set: Set<T>): observeValid<T[]> => { // @ts-ignore\n    const obs: T[] = observe<T[]>([]) as observeValid<T[]>; // @ts-ignore\n    // Initialize with existing set entries\n    obs.push(...Array.from(set?.values?.() || [])); // @ts-ignore\n    addToCallChain(obs, Symbol.dispose, affected(set, (value, _, old) => { // @ts-ignore\n        if (isNotEqual(value, old)) {\n            if (old == null && value != null) {\n                obs.push(value);\n            } else\n                if (old != null && value == null) {\n                    const idx = obs.indexOf(old);\n                    if (idx >= 0) obs.splice(idx, 1);\n                } else {\n                    const idx = obs.indexOf(old);\n                    if (idx >= 0 && isNotEqual(obs[idx], value)) obs[idx] = value;\n                }\n        }\n    }));\n    return obs;\n}\n\n//\nexport const observableByMap = <T = any>(map: Map<any, T>): observeValid<[any, T][]> => { // @ts-ignore\n    const obs: [any, T][] = observe<[any, T][]>([]) as observeValid<[any, T][]>; // @ts-ignore\n\n    // Initialize with existing map entries\n    const initialEntries: [any, T][] = Array.from(map.entries());\n    obs.push(...initialEntries);\n\n    //\n    addToCallChain(obs, Symbol.dispose, affected(map, (value, prop, old) => {\n        if (isNotEqual(value, old) || (old == null && value != null) || (old != null && value == null)) {\n            if (old != null && value == null) {\n                // Map entry deleted (by name)\n                let idx = obs.findIndex(([name, _]) => (name == prop));\n\n                // alternative index search\n                if (idx < 0) idx = obs.findLastIndex(([_, val]) => (old === val));\n\n                // remove entry\n                if (idx >= 0) obs.splice(idx, 1);\n            } else {\n                // Map entry added or updated (by name)\n                let idx = obs.findIndex(([name, _]) => (name == prop));\n\n                // alternative index search\n                //if (idx < 0) idx = obs.findLastIndex(([_, val]) => (old === val));\n\n                //\n                if (idx >= 0 && idx < obs.length) {\n                    // Entry exists - update if value changed\n                    if (isNotEqual(obs[idx]?.[1], value)) {\n                        //obs[idx][1] = value;\n                        obs[idx] = [prop, value];\n                    }\n                } else {\n                    // New entry - add to array\n                    obs.push([prop, value]);\n                }\n            }\n        }\n    }));\n\n    //\n    return obs;\n}\n\n//\nexport interface PropStore {\n    unsub?: any;\n    bound?: any;\n    cmpfx?: any;\n    compute?: any;\n    dispose?: any;\n}\n\n//\nexport const assignMap = new WeakMap<any, Map<any, PropStore>>();\nexport const assign = <T = any>(a: subValid<T>, b: subValid<T>, prop: keyType | null = \"value\") => {\n    const isACompute = typeof a?.[1] == \"function\" && (a as [any, keyType])?.length == 2, isBCompute = typeof b?.[1] == \"function\" && (b as [any, keyType])?.length == 2, cmpBFnc = isBCompute ? b?.[1] : null;\n    const isAProp = (isKeyType(a?.[1]) || a?.[1] == Symbol.iterator) && (a as [any, keyType])?.length == 2; let a_prop = (isAProp && !isACompute) ? a?.[1] : (Array.isArray(a) ? null : prop); if (!isAProp && !isACompute) { a = [a, a_prop] as subValid<T>; }; if (isACompute) { a[1] = a_prop; };\n    const isBProp = (isKeyType(b?.[1]) || b?.[1] == Symbol.iterator) && (b as [any, keyType])?.length == 2; let b_prop = (isBProp && !isBCompute) ? b?.[1] : (Array.isArray(b) ? null : prop); if (!isBProp && !isBCompute) { b = [b, b_prop] as subValid<T>; }; if (isBCompute) { b[1] = b_prop; };\n\n    //\n    if (a_prop == null || b_prop == null || isArrayInvalidKey(a_prop, a?.[0]) || isArrayInvalidKey(b_prop, b?.[0])) { return; };\n    if (!((typeof b?.[0] == \"object\" || typeof b?.[0] == \"function\") && b?.[0] != null) && !Array.isArray(a[0]))\n        { $avoidTrigger(b, ()=>{ a[0][a_prop] = b?.[0]; }); return () => { }; };\n\n    //\n    const compute = (v, p) => {\n        const a_tmp = aRef?.deref?.();\n        const b_tmp = bRef?.deref?.();\n        if (assignMap?.get?.(a_tmp)?.get?.(a_prop)?.bound == b_tmp) {\n            let val: any = null;\n            const cmpfx = assignMap?.get?.(a_tmp)?.get?.(a_prop)?.cmpfx;\n            $avoidTrigger(b_tmp, ()=>{\n                if (typeof cmpfx == \"function\") { val = cmpfx?.($getValue(b_tmp) ?? v, p, null); } else { val = b_tmp?.[p] ?? v; };\n            });\n\n            //\n            const nv = $getValue(val);\n            if (isNotEqual(a_tmp[a_prop], nv)) {\n                $avoidTrigger(b_tmp, ()=>{ a_tmp[a_prop] = nv; });\n            };\n        } else {\n            const map = assignMap?.get?.(a_tmp);\n            const store = map?.get?.(a_prop);\n            store?.dispose?.();\n        }\n    };\n\n    //\n    const dispose = () => {\n        const a_tmp = aRef?.deref?.();\n        const map = assignMap?.get?.(a_tmp);\n        const store = map?.get?.(a_prop);\n        map?.delete?.(a_prop);\n        store?.unsub?.();\n    };\n\n    //\n    const\n        bRef = b?.[0] != null && (typeof b?.[0] == \"object\" || typeof b?.[0] == \"function\") && !(b?.[0] instanceof WeakRef || typeof b?.[0]?.deref == \"function\") ? new WeakRef(b?.[0]) : b?.[0],\n        aRef = a?.[0] != null && (typeof a?.[0] == \"object\" || typeof a?.[0] == \"function\") && !(a?.[0] instanceof WeakRef || typeof a?.[0]?.deref == \"function\") ? new WeakRef(a?.[0]) : a?.[0];\n\n    //\n    let store: PropStore = { compute, dispose, cmpfx: cmpBFnc };\n\n    //\n    const a_tmp = aRef?.deref?.(), b_tmp = bRef?.deref?.();\n    if (aRef instanceof WeakRef) {\n        if (assignMap?.get?.(a_tmp)?.get?.(a_prop)?.bound != b_tmp) {\n            assignMap?.get?.(a_tmp)?.delete?.(a_prop);\n        };\n\n        // @ts-ignore\n        const map = assignMap?.getOrInsert?.(a_tmp, new Map());\n        store = map?.getOrInsertComputed?.(a_prop, () => ({\n            bound: b_tmp,\n            cmpfx: cmpBFnc,\n            unsub: null,\n            compute,\n            dispose,\n        }));\n\n        //\n        store.unsub = affected(b, compute);\n        store.cmpfx = cmpBFnc;\n        addToCallChain(a_tmp, Symbol.dispose, store?.dispose);\n        addToCallChain(b_tmp, Symbol.dispose, store?.dispose);\n    }\n\n    // normalization isn't allowed for arrays\n    if (b_tmp && !Array.isArray(b_tmp)) {\n        $avoidTrigger(a_tmp, ()=>{\n            b_tmp[b_prop] ??= a_tmp?.[a_prop] ?? b_tmp[b_prop];\n        });\n    }\n\n    //\n    return store?.dispose;\n}\n\n//\nexport const link = <T = any>(a: subValid<T>, b: subValid<T>, prop: keyType | null = \"value\") => {\n    /*const isACompute = typeof a?.[1] == \"function\", isBCompute = typeof b?.[1] == \"function\";\n    const isAProp = (isKeyType(a?.[1]) || a?.[1] == Symbol.iterator) && (a as [any, keyType])?.length == 2; let a_prop = (isAProp && !isACompute) ? a?.[1] : prop; if (!isAProp && !isACompute) { a = [a, a_prop]; }; if (isACompute) { a[1] = a_prop; };\n    const isBProp = (isKeyType(b?.[1]) || b?.[1] == Symbol.iterator) && (b as [any, keyType])?.length == 2; let b_prop = (isBProp && !isBCompute) ? b?.[1] : prop; if (!isBProp && !isBCompute) { b = [b, b_prop]; }; if (isBCompute) { b[1] = b_prop; };\n    const usub = [ assign(a, b, b_prop), assign(b, a, a_prop) ];*/\n    const usub = [assign(a, b, prop), assign(b, a, prop)];\n    return () => usub?.map?.((c) => c?.());\n}\n\n//\nexport const computed = <T = any, OT = T>(src: subValid<T>, cb?: Function | null, behavior?: any, prop: keyType | null = \"value\"): observeValid<OT> => {\n    const isACompute = typeof src?.[1] == \"function\" && (src as [any, keyType])?.length == 2;\n    const isAProp = (isKeyType(src?.[1]) || src?.[1] == Symbol.iterator) && (src as [any, keyType])?.length == 2;\n    let a_prop = (isAProp && !isACompute) ? src?.[1] : (Array.isArray(src) ? null : prop);\n    if (!isAProp && !isACompute) { src = [(isAProp ? src?.[0] : src), a_prop] as subValid<T>; }; if (isACompute) { src[1] = a_prop; };\n    if (a_prop == null || isArrayInvalidKey(a_prop, src?.[0])) { return undefined as any; }\n\n    //\n    const cmp = (v?: any)=>{\n        let oldValue: any = undefined;\n        if (v != undefined) {\n            oldValue = src[0][a_prop];\n            src[0][a_prop] = v;\n        }\n        return cb?.(src?.[0]?.[a_prop], a_prop, oldValue);\n    };\n\n    //\n    const isPromise = false; const initial = cmp();\n    const rf: any = observe({\n        [$promise]: isPromise ? initial : undefined,\n        [$value]: initial,\n        [$behavior]: behavior,\n        [Symbol?.toStringTag]() { return String(cmp() ?? this[$value] ?? \"\") || \"\"; },\n        [Symbol?.toPrimitive](hint: any) { return tryParseByHint(cmp() ?? this[$value], hint); },\n        set value(v) { this[$value] = cmp(v); },\n        get value() { return (this[$value] = cmp() ?? this[$value]); }\n    });\n\n    //\n    const usb = affected([src?.[0] ?? src, a_prop ?? \"value\"], ()=>/*wr?.deref?.()*/rf?.[$trigger]?.())\n    //const usb = assign([rf, \"value\"], src, a_prop)\n    addToCallChain(rf, Symbol.dispose, usb); return rf;\n}\n\n//\nexport const delayedSubscribe = <Under = any>(ref: any, cb: Function, delay = 100): observeValid<Under> => {\n    let tm: any; //= triggerWithDelay(ref, cb, delay);\n    return affected([ref, \"value\"], (v) => {\n        if (!v && tm) { clearTimeout(tm); tm = null; } else\n            if (v && !tm) { tm = triggerWithDelay(ref, cb, delay) ?? tm; };\n    });\n}\n","import { numberRef } from \"fest/object\";\nimport { CSSBinder, CSSUnitConverter, CSSTransform, CSSCalc } from \"fest/lure\";\n\n// generate only random letters, NOT numbers\nexport const generateAnchorId = () => {\n    const randLetters = Math.random().toString(36).substring(2, 15).replace(/[0-9]/g, '');\n    return (\"--\" + randLetters);\n}\n\n//\nexport const getComputedZIndex = (element: HTMLElement): number => {\n    if (element?.computedStyleMap) {\n        return Number(element.computedStyleMap().get(\"z-index\")?.toString() || 0) || 0;\n    } else {\n        return Number(getComputedStyle((element as any)?.element ?? element).getPropertyValue(\"z-index\") || 0) || 0;\n    }\n}\n\n//\nexport const getExistsZIndex = (element: HTMLElement): number => {\n    if (!element) { return 0; }\n    if ((element as any)?.attributeStyleMap && (element as any).attributeStyleMap.get(\"z-index\") != null) { return Number((element as any).attributeStyleMap.get(\"z-index\")?.value ?? 0) || 0; }\n    if ((element as any)?.style && \"zIndex\" in (element as any).style && (element as any).style.zIndex != null) { return Number((element as any).style.zIndex || 0) || 0; }\n    return getComputedZIndex(element);\n}\n\n// Enhanced CSS utilities that work with reactive math\n\n// Reactive CSS value parser with unit conversion\nexport class ReactiveCSSValue {\n    private value: ReturnType<typeof numberRef>;\n    private unit: string;\n\n    constructor(initialValue: string | number, unit: string = 'px') {\n        const parsed = typeof initialValue === 'string'\n            ? CSSUnitConverter.parseValue(initialValue)\n            : { value: initialValue, unit };\n\n        this.value = numberRef(parsed.value);\n        this.unit = parsed.unit;\n    }\n\n    // Get reactive CSS string\n    get cssValue(): ReturnType<typeof numberRef> {\n        return CSSBinder.bindWithUnit({} as HTMLElement, '', this.value, this.unit);\n    }\n\n    // Convert to different unit reactively\n    toUnit(targetUnit: string): ReturnType<typeof numberRef> {\n        return CSSCalc.multiply(this.value, numberRef(1)); // Placeholder for unit conversion\n    }\n\n    // Bind to element property\n    bindTo(element: HTMLElement, property: string): () => void {\n        return CSSBinder.bindWithUnit(element, property, this.value, this.unit);\n    }\n}\n\n// Reactive transform builder\nexport class ReactiveTransform {\n    private transforms: ReturnType<typeof numberRef>[] = [];\n\n    translate(x: number | ReturnType<typeof numberRef>, y: number | ReturnType<typeof numberRef>): this {\n        const vector = typeof x === 'number' && typeof y === 'number'\n            ? { x: numberRef(x), y: numberRef(y) }\n            : { x: typeof x === 'number' ? numberRef(x) : x,\n                y: typeof y === 'number' ? numberRef(y) : y };\n        this.transforms.push(CSSTransform.translate2D(vector as any));\n        return this;\n    }\n\n    scale(x: number | ReturnType<typeof numberRef>, y?: number | ReturnType<typeof numberRef>): this {\n        const scaleX = typeof x === 'number' ? numberRef(x) : x;\n        const scaleY = y !== undefined ? (typeof y === 'number' ? numberRef(y) : y) : scaleX;\n        this.transforms.push(CSSTransform.scale2D({ x: scaleX, y: scaleY } as any));\n        return this;\n    }\n\n    rotate(angle: number | ReturnType<typeof numberRef>): this {\n        const angleRef = typeof angle === 'number' ? numberRef(angle) : angle;\n        this.transforms.push(CSSTransform.rotate(angleRef));\n        return this;\n    }\n\n    // Get combined transform string\n    get value(): ReturnType<typeof numberRef> {\n        return CSSTransform.combine(this.transforms);\n    }\n\n    // Bind to element\n    bindTo(element: HTMLElement): () => void {\n        return CSSBinder.bindTransform(element, { x: numberRef(0), y: numberRef(0) } as any);\n        // Note: This is a simplified binding - in practice you'd need to track all transform components\n    }\n}\n\n// Reactive CSS animation helper\nexport class ReactiveAnimation {\n    private element: HTMLElement;\n    private properties: Map<string, ReturnType<typeof numberRef>>;\n    private duration: number;\n    private easing: string;\n\n    constructor(element: HTMLElement, duration: number = 1000, easing: string = 'ease-out') {\n        this.element = element;\n        this.properties = new Map();\n        this.duration = duration;\n        this.easing = easing;\n    }\n\n    // Animate CSS property\n    animateProperty(property: string, from: number, to: number): this {\n        const value = numberRef(from);\n        this.properties.set(property, value);\n\n        // Bind to element\n        CSSBinder.bindWithUnit(this.element, property, value);\n\n        // Start animation\n        this.animateValue(value, from, to);\n        return this;\n    }\n\n    private animateValue(ref: ReturnType<typeof numberRef>, from: number, to: number): void {\n        const startTime = performance.now();\n\n        const animate = (currentTime: number) => {\n            const elapsed = currentTime - startTime;\n            const progress = Math.min(elapsed / this.duration, 1);\n\n            // Apply easing\n            const easedProgress = this.applyEasing(progress);\n            ref.value = from + (to - from) * easedProgress;\n\n            if (progress < 1) {\n                requestAnimationFrame(animate);\n            }\n        };\n\n        requestAnimationFrame(animate);\n    }\n\n    private applyEasing(t: number): number {\n        // Simple easing implementation\n        switch (this.easing) {\n            case 'ease-out':\n                return 1 - Math.pow(1 - t, 3);\n            case 'ease-in':\n                return t * t * t;\n            case 'ease-in-out':\n                return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;\n            default:\n                return t;\n        }\n    }\n}\n\n// Reactive CSS media query helper\nexport class ReactiveMediaQuery {\n    private query: string;\n    private matches: ReturnType<typeof numberRef>;\n\n    constructor(query: string) {\n        this.query = query;\n        this.matches = numberRef(0);\n\n        const mediaQuery = window?.matchMedia(query);\n        this.matches.value = mediaQuery.matches ? 1 : 0;\n\n        mediaQuery?.addEventListener('change', (e) => {\n            this.matches.value = e.matches ? 1 : 0;\n        });\n    }\n\n    get reactiveMatches(): ReturnType<typeof numberRef> {\n        return this.matches;\n    }\n\n    // Get reactive value based on media query\n    valueIfMatches<T>(ifTrue: T, ifFalse: T): T {\n        // This would need a computed value that switches based on matches\n        return this.matches.value ? ifTrue : ifFalse;\n    }\n}\n\n// Reactive viewport dimensions\nexport class ReactiveViewport {\n    static width: ReturnType<typeof numberRef> = numberRef(typeof window != \"undefined\" ? window?.innerWidth : 0);\n    static height: ReturnType<typeof numberRef> = numberRef(typeof window != \"undefined\" ? window?.innerHeight : 0);\n\n    static init(): void {\n        const updateSize = () => {\n            this.width.value = window?.innerWidth;\n            this.height.value = window?.innerHeight;\n        };\n\n        if (typeof window != \"undefined\") {\n            window?.addEventListener?.('resize', updateSize);\n        }\n    }\n\n    // Get reactive viewport center\n    static center(): { x: ReturnType<typeof numberRef>, y: ReturnType<typeof numberRef> } {\n        return {\n            x: CSSCalc.divide(this.width, numberRef(2)),\n            y: CSSCalc.divide(this.height, numberRef(2))\n        };\n    }\n}\n\n// Initialize viewport tracking\nReactiveViewport.init();\n\n// Reactive element dimensions\nexport class ReactiveElementSize {\n    private element: HTMLElement;\n    private size: { width: ReturnType<typeof numberRef>, height: ReturnType<typeof numberRef> };\n    private observer: ResizeObserver;\n\n    constructor(element: HTMLElement) {\n        this.element = element;\n        this.size = {\n            width: numberRef(element.offsetWidth),\n            height: numberRef(element.offsetHeight)\n        };\n\n        this.observer = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                if (entry.target === element) {\n                    this.size.width.value = entry.contentRect.width;\n                    this.size.height.value = entry.contentRect.height;\n                }\n            }\n        });\n\n        this.observer.observe(element);\n    }\n\n    get width(): ReturnType<typeof numberRef> { return this.size.width; }\n    get height(): ReturnType<typeof numberRef> { return this.size.height; }\n\n    // Get reactive center point\n    center(): { x: ReturnType<typeof numberRef>, y: ReturnType<typeof numberRef> } {\n        return {\n            x: CSSCalc.divide(this.size.width, numberRef(2)),\n            y: CSSCalc.divide(this.size.height, numberRef(2))\n        };\n    }\n\n    destroy(): void {\n        this.observer.disconnect();\n    }\n}\n\n// Reactive scroll position\nexport class ReactiveScroll {\n    private element: HTMLElement;\n    private scrollLeft: ReturnType<typeof numberRef>;\n    private scrollTop: ReturnType<typeof numberRef>;\n\n    constructor(element: HTMLElement = document.documentElement) {\n        this.element = element;\n        this.scrollLeft = numberRef(element.scrollLeft);\n        this.scrollTop = numberRef(element.scrollTop);\n\n        element.addEventListener('scroll', () => {\n            this.scrollLeft.value = element.scrollLeft;\n            this.scrollTop.value = element.scrollTop;\n        });\n    }\n\n    get left(): ReturnType<typeof numberRef> { return this.scrollLeft; }\n    get top(): ReturnType<typeof numberRef> { return this.scrollTop; }\n\n    // Get reactive scroll progress (0-1)\n    progress(axis: 'x' | 'y' = 'y'): ReturnType<typeof numberRef> {\n        const scrollSize = axis === 'x'\n            ? this.element.scrollWidth - this.element.clientWidth\n            : this.element.scrollHeight - this.element.clientHeight;\n\n        const scrollPos = axis === 'x' ? this.scrollLeft : this.scrollTop;\n\n        return CSSCalc.divide(scrollPos, numberRef(Math.max(scrollSize, 1)));\n    }\n}\n","// CSS Animated Reference (by JS Animation API)\n// Has previous (started) state\n// And current (to) state\n// Animates when bound with style property, by change value\n\nimport { numberRef, stringRef, affected } from \"fest/object\";\nimport { toRef, deref, $getValue } from \"fest/core\";\nimport { makeRAFCycle, setProperty } from \"fest/dom\";\nimport { $extract } from \"./CSSTimeline\";\n\n/**\n * Animation configuration options\n */\nexport interface AnimationOptions {\n    duration?: number;\n    easing?: string;\n    delay?: number;\n    direction?: 'normal' | 'reverse' | 'alternate' | 'alternate-reverse';\n    iterations?: number;\n    fill?: 'none' | 'forwards' | 'backwards' | 'both';\n}\n\n/**\n * Transition configuration options\n */\nexport interface TransitionOptions {\n    duration?: number;\n    easing?: string;\n    delay?: number;\n    property?: string;\n}\n\n/**\n * Animation binding state for tracking active animations\n */\nclass AnimationState {\n    private animations = new Map<string, Animation>();\n    private transitions = new Map<string, string>();\n\n    setAnimation(property: string, animation: Animation) {\n        this.animations.set(property, animation);\n    }\n\n    getAnimation(property: string): Animation | undefined {\n        return this.animations.get(property);\n    }\n\n    cancelAnimation(property: string) {\n        const animation = this.animations.get(property);\n        if (animation) {\n            animation.cancel();\n            this.animations.delete(property);\n        }\n    }\n\n    setTransition(element: HTMLElement, property: string, options: TransitionOptions) {\n        const duration = options.duration || 200;\n        const easing = options.easing || 'ease';\n        const delay = options.delay || 0;\n\n        const transitionValue = `${property} ${duration}ms ${easing} ${delay}ms`;\n        const existingTransition = this.transitions.get(property);\n\n        if (existingTransition !== transitionValue) {\n            this.transitions.set(property, transitionValue);\n            this.updateElementTransitions(element);\n        }\n    }\n\n    private updateElementTransitions(element: HTMLElement) {\n        const transitions = Array.from(this.transitions.values()).join(', ');\n        element.style.transition = transitions;\n    }\n\n    clearTransitions(element: HTMLElement) {\n        this.transitions.clear();\n        element.style.transition = '';\n    }\n\n    cancelAll(element: HTMLElement) {\n        // Use Array.from to create a copy for iteration (fixes downlevelIteration issue)\n        const animationValues = Array.from(this.animations.values());\n        for (const animation of animationValues) {\n            animation.cancel();\n        }\n        this.animations.clear();\n        this.clearTransitions(element);\n    }\n\n    getAnimations(): Map<string, Animation> {\n        return this.animations;\n    }\n}\n\n// Global animation state registry\nconst animationStates = new WeakMap<HTMLElement, AnimationState>();\n\n/**\n * Get or create animation state for an element\n */\nfunction getAnimationState(element: HTMLElement): AnimationState {\n    let state = animationStates.get(element);\n    if (!state) {\n        state = new AnimationState();\n        animationStates.set(element, state);\n    }\n    return state;\n}\n\n/**\n * Animation binding options for different animation types\n */\nexport interface SpringOptions {\n    stiffness?: number;\n    damping?: number;\n    mass?: number;\n    velocity?: number;\n}\n\n/**\n * Animated style change handler using Web Animations API\n * Creates smooth transitions between values\n */\nexport function handleAnimatedStyleChange(\n    element: HTMLElement,\n    property: string,\n    value: any,\n    options: AnimationOptions = {}\n): void {\n    if (!element || !property) return;\n\n    const state = getAnimationState(element);\n    const currentValue = element.style.getPropertyValue(property) || getComputedStyle(element)[property as any];\n    const targetValue = $getValue(value);\n\n    // Skip animation if values are the same\n    if (currentValue === targetValue) return;\n\n    // Cancel any existing animation for this property\n    state.cancelAnimation(property);\n\n    // Create animation keyframes\n    const keyframes = [\n        { [property]: currentValue },\n        { [property]: targetValue }\n    ];\n\n    // Set default animation options\n    const animationOptions: KeyframeAnimationOptions = {\n        duration: options.duration || 200,\n        easing: options.easing || 'ease',\n        delay: options.delay || 0,\n        direction: options.direction || 'normal',\n        iterations: options.iterations || 1,\n        fill: options.fill || 'forwards'\n    };\n\n    // Create and start animation\n    const animation = element.animate(keyframes, animationOptions);\n    state.setAnimation(property, animation);\n\n    // Clean up when animation finishes\n    animation.addEventListener('finish', () => {\n        state.cancelAnimation(property);\n        // Ensure final value is set\n        element.style.setProperty(property, targetValue);\n    });\n}\n\n/**\n * Transition-based style change handler using CSS transitions\n * More efficient for simple transitions, uses browser's native transition system\n */\nexport function handleTransitionStyleChange(\n    element: HTMLElement,\n    property: string,\n    value: any,\n    options: TransitionOptions = {}\n): void {\n    if (!element || !property) return;\n\n    const state = getAnimationState(element);\n    const targetValue = $getValue(value);\n\n    // Set up transition for the property\n    state.setTransition(element, property, options);\n\n    // Apply the new value (transition will handle the animation)\n    element.style.setProperty(property, targetValue);\n}\n\n/**\n * Spring-based animation handler for natural-feeling animations\n * Uses spring physics for more organic motion\n */\nexport function handleSpringStyleChange(\n    element: HTMLElement,\n    property: string,\n    value: any,\n    options: {\n        stiffness?: number;\n        damping?: number;\n        mass?: number;\n        velocity?: number;\n    } = {}\n): void {\n    if (!element || !property) return;\n\n    const state = getAnimationState(element);\n    const targetValue = $getValue(value);\n    const currentValue = parseFloat(element.style.getPropertyValue(property)) ||\n                        parseFloat(getComputedStyle(element)[property as any]) || 0;\n\n    // Skip if values are the same\n    if (Math.abs(currentValue - targetValue) < 0.01) return;\n\n    // Cancel existing animation\n    state.cancelAnimation(property);\n\n    // Spring parameters\n    const stiffness = options.stiffness || 100;\n    const damping = options.damping || 10;\n    const mass = options.mass || 1;\n    const initialVelocity = options.velocity || 0;\n\n    let currentPosition = currentValue;\n    let currentVelocity = initialVelocity;\n    let animationId: number;\n\n    const animate = () => {\n        const springForce = -stiffness * (currentPosition - targetValue);\n        const dampingForce = -damping * currentVelocity;\n        const totalForce = springForce + dampingForce;\n        const acceleration = totalForce / mass;\n\n        currentVelocity += acceleration * 0.016; // 60fps\n        currentPosition += currentVelocity * 0.016;\n\n        // Apply the current position\n        const cssValue = property.includes('scale') || property.includes('opacity') ?\n            currentPosition.toString() :\n            `${currentPosition}px`;\n        element.style.setProperty(property, cssValue);\n\n        // Continue animation if not settled\n        if (Math.abs(currentPosition - targetValue) > 0.01 || Math.abs(currentVelocity) > 0.01) {\n            animationId = requestAnimationFrame(animate);\n                } else {\n                    // Ensure final value is exact\n                    element.style.setProperty(property, property.includes('scale') || property.includes('opacity') ?\n                        targetValue.toString() : `${targetValue}px`);\n                    state.cancelAnimation(property);\n                }\n    };\n\n    // Store animation reference for cancellation\n    const mockAnimation = {\n        cancel: () => cancelAnimationFrame(animationId)\n    } as any;\n    state.setAnimation(property, mockAnimation);\n\n    // Start animation\n    animationId = requestAnimationFrame(animate);\n}\n\n/**\n * Morphing animation handler for complex style changes\n * Can animate multiple properties simultaneously with coordinated timing\n */\nexport function handleMorphStyleChange(\n    element: HTMLElement,\n    properties: Record<string, any>,\n    options: AnimationOptions & { stagger?: number } = {}\n): void {\n    if (!element || !properties) return;\n\n    const state = getAnimationState(element);\n    const keyframes: Keyframe[] = [{}, {}];\n\n    // Build keyframes from current and target values\n    for (const [property, value] of Object.entries(properties)) {\n        const currentValue = element.style.getPropertyValue(property) ||\n                           getComputedStyle(element)[property as any];\n        const targetValue = $getValue(value);\n\n        keyframes[0][property] = currentValue;\n        keyframes[1][property] = targetValue;\n    }\n\n    // Cancel existing animations\n    for (const property of Object.keys(properties)) {\n        state.cancelAnimation(property);\n    }\n\n    const animationOptions: KeyframeAnimationOptions = {\n        duration: options.duration || 300,\n        easing: options.easing || 'ease-out',\n        delay: options.delay || 0,\n        direction: options.direction || 'normal',\n        iterations: options.iterations || 1,\n        fill: options.fill || 'forwards'\n    };\n\n    const animation = element.animate(keyframes, animationOptions);\n\n    // Store animation reference for each property\n    for (const property of Object.keys(properties)) {\n        state.setAnimation(property, animation);\n    }\n\n    animation.addEventListener('finish', () => {\n        for (const property of Object.keys(properties)) {\n            state.cancelAnimation(property);\n            // Ensure final values are set\n            const targetValue = $getValue(properties[property]);\n            element.style.setProperty(property, targetValue);\n        }\n    });\n}\n\n/**\n * Reactive animation binding that automatically animates when values change\n */\nexport function bindAnimatedStyle(\n    element: HTMLElement,\n    propertyOrProperties: string | Record<string, any>,\n    reactiveValue: any,\n    animationType: 'animate' | 'transition' | 'spring' | 'morph' = 'animate',\n    options: AnimationOptions | TransitionOptions = {}\n): () => void {\n    const wel = toRef(element);\n    const wv = toRef(reactiveValue);\n\n    if (animationType === 'morph') {\n        // For morph animations, propertyOrProperties should be a Record<string, any>\n        const properties = propertyOrProperties as Record<string, any>;\n\n        // Initial value\n        handleMorphStyleChange(deref(wel), properties, options);\n\n        // Subscribe to changes - for morph, we expect reactiveValue to be an object with reactive properties\n        const unaffected = affected(reactiveValue, (newValue) => {\n            handleMorphStyleChange(deref(wel), properties, options);\n        });\n\n        return unsubscribe;\n    } else {\n        // For other animation types, propertyOrProperties should be a string\n        const property = propertyOrProperties as string;\n\n        const handler = (animationType === 'animate') ? handleAnimatedStyleChange :\n                       (animationType === 'transition') ? handleTransitionStyleChange :\n                       handleSpringStyleChange;\n\n        // Initial value\n        handler(deref(wel), property, $getValue(deref(wv)), options);\n\n        // Subscribe to changes\n        const unaffected = affected(reactiveValue, (newValue) => {\n            handler(deref(wel), property, newValue, options);\n        });\n\n        return unsubscribe;\n    }\n}\n\n/**\n * Animation sequence builder for complex multi-stage animations\n */\nexport class AnimationSequence {\n    private steps: Array<{\n        properties: Record<string, any>;\n        options: AnimationOptions;\n        delay?: number;\n    }> = [];\n\n    addStep(properties: Record<string, any>, options: AnimationOptions = {}, delay = 0) {\n        this.steps.push({ properties, options, delay });\n        return this;\n    }\n\n    async play(element: HTMLElement): Promise<void> {\n        for (const step of this.steps) {\n            if (step.delay) {\n                await new Promise(resolve => setTimeout(resolve, step.delay));\n            }\n\n            await new Promise<void>((resolve) => {\n                handleMorphStyleChange(element, step.properties, {\n                    ...step.options,\n                    fill: 'forwards'\n                });\n\n                // Wait for animation to complete\n                setTimeout(resolve, step.options.duration || 200);\n            });\n        }\n    }\n\n    static create(): AnimationSequence {\n        return new AnimationSequence();\n    }\n}\n\n/**\n * Animation presets for common use cases\n */\nexport const AnimationPresets = {\n    // Smooth fade in/out\n    fade: {\n        duration: 200,\n        easing: 'ease-in-out'\n    },\n\n    // Bounce effect\n    bounce: {\n        duration: 400,\n        easing: 'cubic-bezier(0.68, -0.55, 0.265, 1.55)'\n    },\n\n    // Elastic effect\n    elastic: {\n        duration: 600,\n        easing: 'cubic-bezier(0.68, -0.55, 0.265, 1.55)'\n    },\n\n    // Slide in from direction\n    slideIn: (direction: 'left' | 'right' | 'up' | 'down') => ({\n        duration: 300,\n        easing: 'ease-out',\n        transform: `translate${direction === 'left' || direction === 'right' ? 'X' : 'Y'}(${direction === 'left' || direction === 'up' ? '-' : ''}100%)`\n    }),\n\n    // Scale effect\n    scale: {\n        duration: 200,\n        easing: 'ease-in-out'\n    }\n};\n\n/**\n * Cleanup function to cancel all animations for an element\n */\nexport function cancelElementAnimations(element: HTMLElement): void {\n    const state = animationStates.get(element);\n    if (state) {\n        state.cancelAll(element);\n        animationStates.delete(element);\n    }\n}\n\n/**\n * Utility to create animated reactive references\n */\nexport function animatedRef(initialValue: any, animationType: 'animate' | 'transition' | 'spring' = 'animate', options: any = {}) {\n    const ref = typeof initialValue === 'number' ? numberRef(initialValue) : stringRef(initialValue);\n\n    // Extend ref with animation metadata\n    (ref as any).$animationType = animationType;\n    (ref as any).$animationOptions = options;\n\n    return ref;\n}\n\n//\nexport const effectProperty = { fill: \"both\", delay: 0, easing: \"linear\", rangeStart: \"cover 0%\", rangeEnd: \"cover 100%\", duration: 1 };\nexport const animateByTimeline = async (source: HTMLElement, properties = {}, timeline?: any) => {\n    if (!source || !timeline) return;\n\n    // @ts-ignore\n    if (timeline instanceof ScrollTimeline || timeline instanceof ViewTimeline) {\n        return source?.animate?.(properties, { ...effectProperty as any, timeline: timeline?.[$extract] ?? timeline });\n    }\n\n    //\n    const  target  = toRef(source), wk = toRef(timeline);\n    const renderCb = ([name, $v]) => {\n        const tg = deref(target); if (tg) {\n            const val = deref(wk)?.value || 0, values = $v as [any, any];\n            setProperty(tg, name, (values[0] * (1 - val) + values[1] * val))\n        }\n    }\n\n    //\n    const scheduler = makeRAFCycle();\n    const  everyCb  = ()=>Object.entries(properties)?.forEach?.(renderCb);\n    return affected(timeline, (val: any) => scheduler?.schedule?.(everyCb));\n}\n\n\n\n// ============================================================================\n// Export Animation Binding Functions\n// ============================================================================\n\n/*\nexport {\n    bindAnimated,\n    bindTransition,\n    bindSpring,\n    bindMorph,\n    bindAnimatedBatch,\n    bindPreset,\n    bindConditionalAnimation,\n    createAnimationSequence,\n    cancelElementAnimations,\n    animatedRef,\n    AnimationPresets,\n    type AnimationOptions,\n    type TransitionOptions\n};\n*/\n","import { addToCallChain, observe, affected, unaffected } from \"fest/object\";\nimport {\n    handleAttribute,\n    handleProperty,\n    namedStoreMaps,\n    observeAttribute,\n    observeBySelector,\n    includeSelf,\n    setChecked,\n    getEventTarget,\n    handleStyleChange,\n} from \"fest/dom\";\nimport {\n    $getValue,\n    camelToKebab,\n    $set,\n    toRef,\n    deref,\n    isNotEqual,\n    handleListeners,\n    $avoidTrigger,\n} from \"fest/core\";\n\nimport {\n    handleAnimatedStyleChange,\n    handleTransitionStyleChange,\n    handleSpringStyleChange,\n    handleMorphStyleChange,\n    bindAnimatedStyle,\n    AnimationSequence,\n    AnimationPresets,\n    cancelElementAnimations,\n    animatedRef,\n    type AnimationOptions,\n    type TransitionOptions,\n} from \"../../extension/css-ref/CSSAnimated\";\n\n// ,      \nimport { DoubleWeakMap } from \"fest/object\"; // <--    \n\n// ============================================================================\n// Bank storage (pair-keyed)\n// ============================================================================\n\ntype Unsub = (() => void) | void;\ntype BankEntry = [any, Unsub];\ntype Bank = Record<string | symbol, BankEntry>;\n\n//\nexport const elMap = new DoubleWeakMap();\nexport const alives = new FinalizationRegistry((unsub: any) => unsub?.());\n\n//\nexport const $mapped = Symbol.for(\"@mapped\");\nexport const $virtual = Symbol.for(\"@virtual\");\nexport const $behavior = Symbol.for(\"@behavior\");\n\n//\nexport const bindBeh = (element: any, store: any, behavior: any) => {\n    const weak = toRef(element);\n    const name = store?.[0] ?? store?.name;\n    const value = store?.[1] ?? store?.value;\n\n    if (behavior) {\n        const usub = affected?.(store, (value, prop, old) => {\n            const valMap = namedStoreMaps?.get?.(name as string);\n            behavior?.([value, prop, old], [weak, store, valMap?.get(deref(weak))]);\n        });\n        addToCallChain(store, Symbol.dispose, usub);\n    }\n    return element;\n};\n\n//\nexport const bindCtrl = (element: any, ctrlCb: any) => {\n    const hdl = { click: ctrlCb, input: ctrlCb, change: ctrlCb };\n    ctrlCb?.({ target: element });\n    const unsub = handleListeners?.(element, \"addEventListener\", hdl);\n    addToCallChain(element, Symbol.dispose, unsub);\n    return unsub;\n};\n\n//\nexport const reflectControllers = (element: any, ctrls: any) => {\n    if (ctrls) for (let ctrl of ctrls) bindCtrl(element, ctrl);\n    return element;\n};\n\n//\nexport const $observeInput = (element: any, ref?: any | null, prop: string = \"value\") => {\n    const wel = toRef(element);\n    const rf = toRef(ref);\n\n    const ctrlCb = (_ev: any) => {\n        $set(rf, \"value\", deref(wel)?.[prop ?? \"value\"] ?? $getValue(deref(rf)));\n    };\n\n    const hdl = { click: ctrlCb, input: ctrlCb, change: ctrlCb };\n    ctrlCb?.({ target: element });\n    handleListeners?.(element, \"addEventListener\", hdl);\n\n    $set(rf, \"value\", element?.[prop ?? \"value\"] ?? $getValue(deref(ref)));\n    return () => handleListeners?.(element, \"removeEventListener\", hdl);\n};\n\n//\nexport const $observeAttribute = (el: any, ref?: any | null, prop: string = \"\") => {\n    const wel = toRef(el);\n    const wv = toRef(ref);\n\n    const attrName = camelToKebab(prop)!;\n\n    const cb = (mutation: any) => {\n        if (mutation.type == \"attributes\" && mutation.attributeName == attrName) {\n            const value = mutation?.target?.getAttribute?.(mutation.attributeName);\n            const valRef = deref(wv),\n                reVal = $getValue(valRef);\n\n            if (\n                isNotEqual(mutation.oldValue, value) &&\n                valRef != null &&\n                (typeof valRef == \"object\" || typeof valRef == \"function\")\n            ) {\n                if (isNotEqual(reVal, value) || reVal == null) {\n                    $set(valRef, \"value\", value);\n                }\n            }\n        }\n    };\n\n    return observeAttribute(el, attrName, cb);\n};\n\n// ============================================================================\n// Bank helpers (adapted to pair-key map)\n// ============================================================================\n\n// @ts-ignore // Stable Universal Key Assignation - eg. [S.U.K.A.]\nexport const removeFromBank = (el: any, handler: any, prop: any) => {\n    const bank = elMap.get([el, handler]);\n    if (bank) {\n        const old = bank[prop]?.[1];\n        delete bank[prop];\n        old?.();\n    }\n};\n\n//\nexport const addToBank = (el: any, handler: any, prop: any, forLink: any) => {\n    // bank is stored by pair [el, handler]\n    const bank = elMap.getOrInsertComputed([el, handler], () => ({} as Bank));\n    bank?.[prop]?.[1]?.();\n    bank[prop] = forLink;\n    return true;\n};\n\n//\nexport const hasInBank = (el: any, handler: any) => {\n    return elMap.has([el, handler]);\n};\n\n// ============================================================================\n// Core binding\n// ============================================================================\n\nexport const bindHandler = (\n    element: any,\n    value: any,\n    prop: any,\n    handler: any,\n    set?: any,\n    withObserver?: boolean | Function\n) => {\n    const wel = toRef(element);\n    element = deref(wel);\n    if (!element || !(element instanceof Node || element?.element instanceof Node)) return;\n\n    //\n    let controller: AbortController | null = null;\n    controller?.abort?.();\n    controller = new AbortController();\n\n    //\n    const wv = toRef(value);\n    handler?.(element, prop, value);\n\n    const un = affected?.([value, \"value\"], (curr: any, _p: any, old: any) => {\n        const valueRef = deref(wv);\n        const setRef = deref(set);\n        const elementRef = deref(wel);\n\n        const v = $getValue(valueRef) ?? $getValue(curr);\n        if (!setRef || setRef?.[prop] == valueRef) {\n            if (typeof valueRef?.[$behavior] == \"function\") {\n                valueRef?.[$behavior]?.(\n                    (_val: any = curr) => handler(elementRef, prop, v),\n                    [curr, prop, old],\n                    [controller?.signal, prop, wel]\n                );\n            } else {\n                handler(elementRef, prop, v);\n            }\n        }\n    });\n\n    //\n    let obs: any = null;\n    if (typeof withObserver == \"boolean\" && withObserver) {\n        if (handler == handleAttribute) obs = $observeAttribute(element, value, prop);\n        if (handler == handleProperty) obs = $observeInput(element, value, prop);\n    }\n    if (typeof withObserver == \"function\") {\n        obs = withObserver(element, prop, value);\n    }\n\n    //\n    const unsub = () => {\n        obs?.disconnect?.();\n        obs != null && typeof obs == \"function\" ? obs?.() : null;\n        un?.();\n        controller?.abort?.();\n        removeFromBank?.(element, handler, prop);\n    };\n\n    // @ts-ignore\n    addToCallChain(value, Symbol.dispose, unsub);\n    alives.register(element, unsub);\n\n    // register in bank\n    if (!addToBank(element, handler, prop, [value, unsub])) return unsub;\n};\n\n// ============================================================================\n// Updating forms\n// ============================================================================\n\nexport const updateInput = (target: any, state: any) => {\n    const selector = 'input:where([type=\"text\"], [type=\"number\"], [type=\"range\"])';\n    const input = includeSelf(target, \"input\");\n    const name = (input as HTMLInputElement)?.name || (target as HTMLElement)?.dataset?.name || \"\";\n\n    if (state?.[name] != null || name in state) {\n        if (state && input?.matches?.(selector)) {\n            if ((input as HTMLInputElement).value != state[name]) {\n                $avoidTrigger(state, () => {\n                    (input as HTMLInputElement).value = state[name];\n                    input.dispatchEvent(new Event(\"change\", { bubbles: true, cancelable: true }));\n                }, name);\n            }\n        }\n\n        // radio\n        if (state) {\n            const radio = includeSelf(\n                target,\n                `input:where([type=\"radio\"][name=\"${name}\"][value=\"${state?.[name]}\"])`\n            );\n            if (state && radio && state[name] == (radio as HTMLInputElement).value && !(radio as HTMLInputElement).checked) {\n                $avoidTrigger(state, () => {\n                    setChecked(radio as HTMLInputElement, state[name]);\n                }, name);\n            }\n        }\n\n        // checkbox\n        const checkbox = includeSelf(target, 'input:where([type=\"checkbox\"])');\n        if (state && checkbox) {\n            if (state[name] != (checkbox as HTMLInputElement).checked) {\n                $avoidTrigger(state, () => {\n                    setChecked(checkbox as HTMLInputElement, state[name]);\n                }, name);\n            }\n        }\n    }\n};\n\n//\nexport const bindWith = (\n    el: any,\n    prop: any,\n    value: any,\n    handler: any,\n    set?: any,\n    withObserver?: boolean | Function\n) => {\n    handler(el, prop, value);\n    return bindHandler(el, value, prop, handler, set, withObserver);\n};\n\n//\nexport const bindForms = (\n    fields: any = document.documentElement,\n    wrapper: string = \".u2-input\",\n    state: any = {}\n) => {\n    state ??= observe({});\n\n    const wst = new WeakRef(state);\n\n    const onChange = (ev: any) => {\n        const state = deref(wst);\n        if (!state) return;\n\n        const eventTarget = getEventTarget(ev) ?? ev?.target;\n        const input = eventTarget?.matches?.(\"input\") ? eventTarget : eventTarget?.querySelector?.(\"input\");\n        const target = (eventTarget?.matches?.(wrapper) ? eventTarget : input?.closest?.(wrapper)) ?? input;\n        const name = input?.name || target?.name || target?.dataset?.name;\n\n        if (state?.[name] != null || name in state) {\n            if (input?.matches?.('input:where([type=\"text\"], [type=\"number\"], [type=\"range\"])')) {\n                const value =\n                    input.valueAsNumber != null && !isNaN(input.valueAsNumber)\n                        ? input.valueAsNumber\n                        : input.value;\n                if (state[name] != value) state[name] = value;\n            }\n\n            if (input?.matches?.('input[type=\"radio\"]') && state[name] != input?.value && input?.checked) {\n                state[name] = input.value;\n            }\n\n            if (input?.matches?.('input[type=\"checkbox\"]') && state[name] != input?.checked) {\n                state[name] = input.checked;\n            }\n        }\n    };\n\n    const appearHandler = () =>\n        requestIdleCallback(\n            () => fields.querySelectorAll(wrapper).forEach((target: any) => updateInput(target, state)),\n            { timeout: 100 }\n        );\n\n    const observer = observeBySelector(fields, wrapper, (mutations: any) =>\n        mutations.addedNodes.forEach((target: any) =>\n            requestIdleCallback(() => updateInput(state, target), { timeout: 100 })\n        )\n    );\n\n    const unsubscribe = affected?.(state, (_value: any, _property: any) =>\n        fields.querySelectorAll(wrapper).forEach((target: any) => updateInput(target, state))\n    );\n\n    requestIdleCallback(\n        () => fields.querySelectorAll(wrapper).forEach((target: any) => updateInput(target, state)),\n        { timeout: 100 }\n    );\n\n    fields.addEventListener(\"input\", onChange);\n    fields.addEventListener(\"change\", onChange);\n    fields.addEventListener(\"u2-appear\", appearHandler);\n\n    const wf = new WeakRef(fields);\n    addToCallChain(state, Symbol.dispose, () => {\n        const fields = deref(wf);\n        fields?.removeEventListener?.(\"input\", onChange);\n        fields?.removeEventListener?.(\"change\", onChange);\n        fields?.removeEventListener?.(\"u2-appear\", appearHandler);\n        observer?.disconnect?.();\n        unsubscribe?.(); // <-- :   unsubscribe,    unaffected(state)\n        unaffected(state);\n    });\n\n    return state;\n};\n\n// ============================================================================\n// Animation-Based Binding Functions (unchanged)\n// ============================================================================\n\nexport const bindAnimated = (element: any, property: any, value: any, options: AnimationOptions = {}) => {\n    return bindAnimatedStyle(element, property, value, \"animate\", options);\n};\n\nexport const bindTransition = (\n    element: any,\n    property: any,\n    value: any,\n    options: TransitionOptions = {}\n) => {\n    return bindAnimatedStyle(element, property, value, \"transition\", options);\n};\n\nexport const bindSpring = (\n    element: any,\n    property: any,\n    value: any,\n    options: { stiffness?: number; damping?: number; mass?: number; velocity?: number } = {}\n) => {\n    return bindAnimatedStyle(element, property, value, \"spring\", options as any);\n};\n\nexport const bindMorph = (element: any, properties: Record<string, any>, options: AnimationOptions = {}) => {\n    return bindAnimatedStyle(element, \"\", properties, \"morph\", options);\n};\n\nexport const createAnimatedRef = animatedRef;\nexport const createAnimationSequence = () => AnimationSequence.create();\nexport const cancelAnimations = cancelElementAnimations;\n\nexport const bindWithAnimation = (\n    el: any,\n    prop: any,\n    value: any,\n    animationType: \"instant\" | \"animate\" | \"transition\" | \"spring\" = \"instant\",\n    animationOptions: AnimationOptions | TransitionOptions = {}\n) => {\n    if (animationType === \"instant\") {\n        return bindWith(el, prop, value, handleStyleChange);\n    }\n\n    const binder =\n        animationType === \"animate\" ? bindAnimated : animationType === \"transition\" ? bindTransition : bindSpring;\n\n    return binder(el, prop, value, animationOptions as any);\n};\n\nexport const bindAnimatedBatch = (\n    element: any,\n    bindings: Array<{\n        property: string;\n        value: any;\n        animationType?: \"animate\" | \"transition\" | \"spring\";\n        options?: AnimationOptions | TransitionOptions;\n        delay?: number;\n    }>\n) => {\n    const unbinders: (() => void)[] = [];\n\n    bindings.forEach((binding, index) => {\n        const delay = binding.delay || index * 50;\n        const options = {\n            ...binding.options,\n            delay: (binding.options?.delay || 0) + delay,\n        };\n\n        const unbinder = bindAnimatedStyle(\n            element,\n            binding.property,\n            binding.value,\n            binding.animationType || \"animate\",\n            options\n        );\n        unbinders.push(unbinder);\n    });\n\n    return () => unbinders.forEach((unbind) => unbind?.());\n};\n\nexport const bindPreset = {\n    fade: (element: any, value: any, duration = 200) =>\n        bindAnimated(element, \"opacity\", value, { duration, easing: \"ease-in-out\" }),\n\n    slideX: (element: any, value: any, duration = 300) =>\n        bindAnimated(element, \"transform\", value, { duration, easing: \"ease-out\" }),\n\n    slideY: (element: any, value: any, duration = 300) =>\n        bindAnimated(element, \"transform\", value, { duration, easing: \"ease-out\" }),\n\n    scale: (element: any, value: any, duration = 200) =>\n        bindAnimated(element, \"transform\", value, { duration, easing: \"ease-in-out\" }),\n\n    color: (element: any, value: any, duration = 300) =>\n        bindTransition(element, \"color\", value, { duration, easing: \"ease-in-out\" }),\n\n    backgroundColor: (element: any, value: any, duration = 300) =>\n        bindTransition(element, \"background-color\", value, { duration, easing: \"ease-in-out\" }),\n\n    bounce: (element: any, property: string, value: any) =>\n        bindSpring(element, property, value, { stiffness: 200, damping: 15 }),\n\n    elastic: (element: any, property: string, value: any) =>\n        bindAnimated(element, property, value, AnimationPresets.elastic),\n};\n\nexport const bindConditionalAnimation = (\n    element: any,\n    condition: any,\n    animations: {\n        true?: { property: string; value: any; options?: AnimationOptions }[];\n        false?: { property: string; value: any; options?: AnimationOptions }[];\n    }\n) => {\n    const wel = toRef(element);\n    const wcond = toRef(condition);\n\n    let currentUnbinders: (() => void)[] = [];\n\n    const applyAnimations = (isTrue: boolean) => {\n        currentUnbinders.forEach((un) => un?.());\n        currentUnbinders = [];\n\n        const animationSet = isTrue ? animations.true : animations.false;\n        if (animationSet) {\n            animationSet.forEach((anim) => {\n                const unbinder = bindAnimated(deref(wel), anim.property, anim.value, anim.options);\n                currentUnbinders.push(unbinder);\n            });\n        }\n    };\n\n    applyAnimations($getValue(deref(wcond)));\n\n    const unSub = affected(condition, (newValue: any) => {\n        applyAnimations(!!newValue);\n    });\n\n    return () => {\n        currentUnbinders.forEach((un) => un?.());\n        unSub?.();\n    };\n};\n\n//\nexport const withInsetWithPointer = (exists: HTMLElement, pRef: any) => {\n    if (!exists) return () => { };\n    const ubs = [\n        bindWith(exists, \"--client-x\", pRef?.[0], handleStyleChange),\n        bindWith(exists, \"--client-y\", pRef?.[1], handleStyleChange),\n    ];\n    if (pRef?.[2]) ubs.push(bindWith(exists, \"--anchor-width\", pRef?.[2], handleStyleChange));\n    if (pRef?.[3]) ubs.push(bindWith(exists, \"--anchor-height\", pRef?.[3], handleStyleChange));\n    return () => ubs?.forEach?.((ub: any) => ub?.());\n};\n\ntype Unbind = (() => void) | void;\n\nexport const bindWhileConnected = (element: Element | null | undefined, bind: () => Unbind) => {\n    if (!element) return () => { };\n\n    let cleanup: (() => void) | null = null;\n    let disposed = false;\n\n    const ensureBound = () => {\n        if (disposed) return;\n\n        if (!element.isConnected) {\n            if (cleanup) {\n                cleanup();\n                cleanup = null;\n            }\n            return;\n        }\n\n        if (!cleanup) {\n            const c = bind();\n            cleanup = typeof c === \"function\" ? c : null;\n        }\n    };\n\n    const root = typeof document !== \"undefined\" ? document.documentElement : null;\n    const el = ((element as any)?.element ?? element) as Element;\n\n    const mo =\n        typeof MutationObserver !== \"undefined\" && root\n            ? new MutationObserver((records) => {\n                for (const r of records) {\n                    if (r.target === el || (r.target as any)?.contains?.(el)) {\n                        ensureBound();\n                        return;\n                    }\n\n                    const nodes = [...Array.from(r?.addedNodes || []), ...Array.from(r?.removedNodes || [])];\n                    for (const n of nodes) {\n                        if (n === el || (n as Node).contains?.(el)) {\n                            ensureBound();\n                            return;\n                        }\n                    }\n                }\n            })\n            : null;\n\n    if (mo && root) mo.observe(root, { childList: true, subtree: true });\n\n    queueMicrotask(() => ensureBound());\n\n    return () => {\n        disposed = true;\n        mo?.disconnect?.();\n        cleanup?.();\n        cleanup = null;\n    };\n};","import { observeAttributeBySelector, getAdoptedStyleRule, handleAttribute, containsOrSelf, MOCElement, observeBySelector, observeAttribute } from \"fest/dom\";\nimport { bindWith, elMap } from \"../core/Binding\";\nimport { $affected } from \"fest/object\";\n\n//\nconst existsQueries = new WeakMap<any, Map<string|HTMLElement, any>>();\nconst alreadyUsed   = new WeakMap();\nconst queryExtensions = {\n    logAll (ctx) { return ()=> console.log(\"attributes:\", [...ctx?.attributes].map(x => ({ name: x.name, value: x.value })) ); },\n    append (ctx) { return (...args)=> ctx?.append?.(...([...args||[]]?.map?.((e)=>e?.element??e) || args)) },\n    current(ctx) { return ctx; } // direct getter\n}\n\n//\nclass UniversalElementHandler {\n    direction: \"children\" | \"parent\" = \"children\";\n    selector: string | HTMLElement;\n    index: number = 0;\n\n    //\n    private _eventMap = new WeakMap<object, Map<string, Map<Function, {wrap: Function, option: any}>>>();\n    constructor(selector, index = 0, direction: \"children\" | \"parent\" = \"children\") {\n        this.index     = index;\n        this.selector  = selector;\n        this.direction = direction;\n    }\n\n    //\n    _observeDOMChange(target: any, selector: any, cb: any) {\n        // no possible to listen to DOM change for non-string selector\n        return (typeof selector == \"string\" ? observeBySelector(target, selector, cb) : null);\n    }\n\n    //\n    _observeAttributes(target: any, attribute: any, cb: any)\n        { return (typeof this.selector == \"string\" ? observeAttributeBySelector(target, this.selector, attribute, cb) : observeAttribute(target ?? this.selector, attribute, cb)); }\n\n    //\n    _getArray(target: any) {\n        if (typeof target == \"function\") { target = this.selector || target?.(this.selector); }; if (!this.selector) return [target];\n        if (typeof this.selector == \"string\") {\n            const inclusion = ((typeof target?.matches == \"function\" && target?.element != null) && target?.matches?.(this.selector)) ? [target] : [];\n            if (this.direction == \"children\") {\n                const list = (typeof target?.querySelectorAll == \"function\" && target?.element != null) ? [...target?.querySelectorAll?.(this.selector)] : [];\n                return list?.length >= 1 ? [...list] : inclusion;\n            } else if (this.direction == \"parent\") {\n                const closest = target?.closest?.(this.selector);\n                return closest ? [closest] : inclusion;\n            }\n            return inclusion;\n        }\n        return Array.isArray(this.selector) ? this.selector : [this.selector];\n    }\n\n    //\n    _getSelected(target: any) {\n        const tg = target?.self ?? target;\n        const sel = this._selector(target);\n        if (typeof sel == \"string\") {\n            if (this.direction == \"children\") { return tg?.matches?.(sel) ? tg : tg?.querySelector?.(sel); }\n            if (this.direction == \"parent\"  ) { return tg?.matches?.(sel) ? tg : tg?.closest?.(sel); }\n        }\n        return tg == ((sel as any)?.element ?? sel) ? ((sel as any)?.element ?? sel) : null;\n    }\n\n    // if selector isn't string, can't be redirected\n    _redirectToBubble(eventName: any) {\n        const sel: any = this._selector();\n        if (typeof sel == \"string\") {\n            return {\n                [\"pointerenter\"]: \"pointerover\",\n                [\"pointerleave\"]: \"pointerout\",\n                [\"mouseenter\"]: \"mouseover\",\n                [\"mouseleave\"]: \"mouseout\",\n                [\"focus\"]: \"focusin\",\n                [\"blur\"]: \"focusout\",\n            }?.[eventName] || eventName;\n        }\n        return eventName;\n    }\n\n    //\n    _addEventListener(target: any, name: any, cb: any, option?: any) {\n        const selector = this._selector(target);\n        if (typeof selector != \"string\") {\n            selector?.addEventListener?.(name, cb, option);\n            return cb;\n        }\n\n        //\n        const eventName = this._redirectToBubble(name);\n        const parent = target?.self ?? target;\n        const wrap = (ev) => {\n            const sel: any = this._selector(target);\n            const rot = ev?.currentTarget ?? parent;\n\n            // Use composedPath() for shadow DOM compatibility\n            let tg: any = null;\n            if (ev?.composedPath && typeof ev.composedPath === 'function') {\n                const path = ev.composedPath();\n                // Find the first element in the composed path that matches our selector or is within our target\n                for (const node of path) {\n                    if (node instanceof HTMLElement || node instanceof Element) {\n                        const nodeEl = (node as any)?.element ?? node;\n                        if (typeof sel == \"string\") {\n                            if (MOCElement(nodeEl, sel, ev)) {\n                                tg = nodeEl;\n                                break;\n                            }\n                        } else {\n                            if (containsOrSelf(sel, nodeEl, ev)) {\n                                tg = nodeEl;\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n\n            // Fallback to original logic if composedPath didn't find a match\n            if (!tg) {\n                tg = (ev?.target ?? this._getSelected(target)) ?? rot;\n                tg = tg?.element ?? tg;\n            }\n\n            if (typeof sel == \"string\")\n                { if (containsOrSelf(rot, MOCElement(tg, sel, ev), ev)) { cb?.call?.(tg, ev); } } else\n                { if (containsOrSelf(rot, sel, ev) && containsOrSelf(sel, tg, ev)) { cb?.call?.(tg, ev); }\n            }\n        };\n        parent?.addEventListener?.(eventName, wrap, option);\n\n        // @ts-ignore\n        const eventMap = this._eventMap.getOrInsert(parent, new Map())!;\n        const cbMap = eventMap.getOrInsert(eventName, new WeakMap())!;\n        cbMap.set(cb, {wrap, option});\n        return wrap;\n    }\n\n    //\n    _removeEventListener(target: any, name: any, cb: any, option?: any) {\n        const selector = this._selector(target);\n        if (typeof selector != \"string\") {\n            selector?.removeEventListener?.(name, cb, option);\n            return cb;\n        }\n\n        //\n        const parent = target?.self ?? target;\n        const eventName = this._redirectToBubble(name), eventMap = this._eventMap.get(parent);\n        if (!eventMap) return; const cbMap = eventMap.get(eventName), entry = cbMap?.get?.(cb);\n        parent?.removeEventListener?.(eventName, entry?.wrap ?? cb, option ?? entry?.option ?? {});\n        cbMap?.delete?.(cb); if (cbMap?.size == 0) eventMap?.delete?.(eventName);\n        if (eventMap.size == 0) this._eventMap.delete(parent);\n    }\n\n    //\n    _selector(tg?: any) {\n        if (typeof this.selector == \"string\" && typeof tg?.selector == \"string\") { return ((tg?.selector || \"\") + \" \" + this.selector)?.trim?.(); }\n        return this.selector;\n    }\n\n    //\n    get(target: any, name: any, ctx: any) {\n        const array = this._getArray(target);\n        const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n\n        // Extensions\n        if (name in queryExtensions) { return queryExtensions?.[name]?.(selected); }\n        if (name == \"length\" && array?.length != null) { return array?.length; }\n\n        //\n        if (name == \"_updateSelector\") return (sel)=>(this.selector = sel || this.selector);\n        if ([\"style\", \"attributeStyleMap\"].indexOf(name) >= 0) {\n            const tg = target?.self ?? target;\n            const selector = this._selector(target);\n            const basis = (typeof selector == \"string\" ?\n                getAdoptedStyleRule(selector, \"ux-query\", tg) :\n                selected\n            );\n            if (name == \"attributeStyleMap\") {\n                return basis?.styleMap ?? basis?.attributeStyleMap;\n            }\n            return basis?.[name];\n        }\n\n        //\n        if (name == \"self\") return (target?.self ?? target);\n        if (name == \"selector\") return this._selector(target);\n\n        //\n        if (name == \"observeAttr\") return (name, cb)=>this._observeAttributes(target, name, cb);\n        if (name == \"DOMChange\") return (cb)=>this._observeDOMChange(target, this.selector, cb);\n        if (name == \"addEventListener\") return (name, cb, opt?)=>this._addEventListener(target, name, cb, opt);\n        if (name == \"removeEventListener\") return (name, cb, opt?)=>this._removeEventListener(target, name, cb, opt);\n\n        // get compatible reactive value, if bound\n        if (name == \"getAttribute\") {\n            return (key)=>{\n                const array = this._getArray(target);\n                const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n                const query: any = existsQueries?.get?.(target)?.get?.(this.selector) ?? selected;\n                if (elMap?.get?.(query)?.get?.(handleAttribute)?.has?.(key)) {\n                    return elMap?.get?.(query)?.get?.(handleAttribute)?.get?.(key)?.[0];\n                }\n                return selected?.getAttribute?.(key);\n            }\n        }\n\n        // set attribute\n        if (name == \"setAttribute\") {\n            return (key, value)=>{\n                // TODO:\n                // - support for multiple elements\n                // - support for newer elements by DOM Observer\n                const array = this._getArray(target);\n                const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n                if (typeof value == \"object\" && (value?.value != null || \"value\" in value)) {\n                    return bindWith(selected, key, value, handleAttribute, null, true);\n                }\n                return selected?.setAttribute?.(key, value);\n            }\n        }\n\n        //\n        if (name == \"removeAttribute\") {\n            return (key)=>{\n                const array = this._getArray(target);\n                const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n                const query: any = existsQueries?.get?.(target)?.get?.(this.selector) ?? selected;\n                if (elMap?.get?.(query)?.get?.(handleAttribute)?.has?.(key)) {\n                    return elMap?.get?.(query)?.get?.(handleAttribute)?.get?.(key)?.[1]?.();\n                }\n                return selected?.removeAttribute?.(key);\n            }\n        }\n\n        //\n        if (name == \"hasAttribute\") {\n            return (key)=>{\n                const array = this._getArray(target);\n                const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n                const query: any = existsQueries?.get?.(target)?.get?.(this.selector) ?? selected;\n                if (elMap?.get?.(query)?.get?.(handleAttribute)?.has?.(key)) {\n                    return true;\n                }\n                return selected?.hasAttribute?.(key);\n            }\n        }\n\n        // for BLU.E\n        if (name == \"element\") {\n            if (array?.length <= 1) return selected?.element ?? selected;\n            const fragment = document.createDocumentFragment();\n            fragment.append(...array); return fragment;\n        }\n\n        //\n        if (name == Symbol.toPrimitive) {\n            if ((this.selector as any)?.includes?.(\"input\") || (this.selector as any)?.matches?.(\"input\")) {\n                return (hint)=>{\n                    if (hint == \"number\") return (selected?.element ?? selected)?.valueAsNumber ?? parseFloat((selected?.element ?? selected)?.value);\n                    if (hint == \"string\") return String((selected?.element ?? selected)?.value ?? (selected?.element ?? selected));\n                    if (hint == \"boolean\") return (selected?.element ?? selected)?.checked;\n                    return (selected?.element ?? selected)?.checked ?? (selected?.element ?? selected)?.value ?? (selected?.element ?? selected);\n                }\n            }\n        }\n\n        //\n        if (name == \"checked\") {\n            if ((this.selector as any)?.includes?.(\"input\") || (this.selector as any)?.matches?.(\"input\")) {\n                return (selected?.element ?? selected)?.checked;\n            }\n        }\n\n        //\n        if (name == \"value\") {\n            if ((this.selector as any)?.includes?.(\"input\") || (this.selector as any)?.matches?.(\"input\")) {\n                return (selected?.element ?? selected)?.valueAsNumber ?? (selected?.element ?? selected)?.valueAsDate ?? (selected?.element ?? selected)?.value ?? (selected?.element ?? selected)?.checked;\n            }\n        }\n\n        // can be subscribed\n        if (name == $affected) {\n            if ((this.selector as any)?.includes?.(\"input\") || (this.selector as any)?.matches?.(\"input\")) {\n                return (cb) => {\n                    let oldValue = selected?.value;\n                    const evt: [any, any] = [\n                        (ev)=>{\n                            const input = this._getSelected(ev?.target);\n                            cb?.(input?.value, \"value\", oldValue);\n                            oldValue = input?.value;\n                        }, {passive: true}\n                    ];\n                    this._addEventListener(target, \"change\", ...evt)\n                    return ()=>this._removeEventListener(target, \"change\", ...evt)\n                }\n            }\n        }\n\n        //\n        if (name == \"deref\" && (typeof selected == \"object\" || typeof selected == \"function\") && selected != null) {\n            const wk = new WeakRef(selected);\n            return ()=>(wk?.deref?.()?.element ?? wk?.deref?.());\n        }\n\n        //\n        if (typeof name == \"string\" && /^\\d+$/.test(name)) { return array[parseInt(name)]; };\n\n        //\n        const origin = selected; //selected?.element ?? selected;\n        if (origin?.[name] != null) { return typeof origin[name] == \"function\" ? origin[name].bind(origin) : origin[name]; }\n        if ( array?.[name] != null) { return typeof  array[name] == \"function\" ?  array[name].bind(array)  :  array[name]; }\n\n        // remains possible getters\n        //return Reflect.get(target, name, ctx);\n        return typeof target?.[name] == \"function\" ? target?.[name].bind(origin) : target?.[name];\n    }\n\n    //\n    set(target: any, name: any, value: any) {\n        const array = this._getArray(target);\n        const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n\n        //\n        if (typeof name == \"string\" && /^\\d+$/.test(name)) { return false; }\n        if (array[name] != null) { return false; }\n        if (selected) { selected[name] = value; return true; }\n        return true;\n    }\n\n    //\n    has(target: any, name: any) {\n        const array = this._getArray(target);\n        const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n        return (\n            (typeof name == \"string\" && /^\\d+$/.test(name) && array[parseInt(name)] != null) ||\n            (array[name] != null) ||\n            (selected && name in selected)\n        );\n    }\n\n    //\n    deleteProperty(target: any, name: any) {\n        const array = this._getArray(target);\n        const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n        if (selected && name in selected) { delete selected[name]; return true; }\n        return false;\n    }\n\n    //\n    ownKeys(target: any) {\n        const array = this._getArray(target);\n        const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n        const keys = new Set();\n        array.forEach((el, i) => keys.add(i.toString()));\n        Object.getOwnPropertyNames(array).forEach(k => keys.add(k));\n        if (selected) Object.getOwnPropertyNames(selected).forEach(k => keys.add(k));\n        return Array.from(keys);\n    }\n\n    //\n    defineProperty(target: any, name: any, desc: any) {\n        const array = this._getArray(target);\n        const selected = array.length > 0 ? array[this.index] : this._getSelected(target);\n        if (selected) { Object.defineProperty(selected, name, desc); return true; }\n        return false;\n    }\n\n    //\n    apply(target: any, self: any, args: any) {\n        args[0] ||= this.selector;\n        const result = target?.apply?.(self, args);\n        this.selector = result || this.selector;\n        return new Proxy(target, this as ProxyHandler<any>);\n    }\n}\n\n//\nexport const Q = (selector: any, host = document.documentElement, index = 0, direction: \"children\" | \"parent\" = \"children\") => {\n    // is wrapped element or element itself\n    if ((selector?.element ?? selector) instanceof HTMLElement) {\n        const el = selector?.element ?? selector; // @ts-ignore\n        return alreadyUsed.getOrInsert(el, new Proxy(el, new UniversalElementHandler(\"\", index, direction) as ProxyHandler<any>));\n    }\n\n    // is \"ref\" hook!\n    if (typeof selector == \"function\") {\n        const el = selector; // @ts-ignore\n        return alreadyUsed.getOrInsert(el, new Proxy(el, new UniversalElementHandler(\"\", index, direction) as ProxyHandler<any>));\n    }\n\n    //\n    if (host == null || typeof host == \"string\" || typeof host == \"number\" || typeof host == \"boolean\" || typeof host == \"symbol\" || typeof host == \"undefined\") { return null; }\n    if (existsQueries?.get?.(host)?.has?.(selector)) { return existsQueries?.get?.(host)?.get?.(selector); }\n\n    // @ts-ignore // is selector by host\n    return existsQueries?.getOrInsert?.(host, new Map())?.getOrInsertComputed?.(selector, ()=>{\n        return new Proxy(host, new UniversalElementHandler(selector, index, direction) as ProxyHandler<any>);\n    });\n}\n\n// syntax:\n// - [name]: (ctx) => function() {}\nexport const extendQueryPrototype = (extended: any = {})=>{ // @ts-ignore\n    return Object.assign(queryExtensions, extended);\n}\n\n//\nexport default Q;\n","import { addToCallChain, affected, iterated } from \"fest/object\";\nimport { isNotEqual, isPrimitive } from \"fest/core\";\n\n//\nimport { bindHandler, bindWith } from \"../core/Binding\";\nimport { handleDataset, handleProperty, handleAttribute, handleStyleChange } from \"fest/dom\";\nimport Q from \"../node/Queried\";\nimport { setChecked } from \"fest/dom\";\n\n// !\n// TODO! - add support for un-subscribe for everyone...\n// !\n\n//\nconst $entries = (obj: any) => {\n    if (isPrimitive(obj)) { return []; }\n    if (Array.isArray(obj)) { return obj.map((item, idx) => [idx, item]); }\n    if (obj instanceof Map) { return Array.from(obj.entries()); }\n    if (obj instanceof Set) { return Array.from(obj.values()); }\n    return Array.from(Object.entries(obj));\n}\n\n//\nexport const reflectAttributes = (element: HTMLElement, attributes: any)=>{\n    if (!attributes) return element;\n    const weak = new WeakRef(attributes), wel = new WeakRef(element);\n    if (typeof attributes == \"object\" || typeof attributes == \"function\") {\n        $entries(attributes).forEach(([prop, value])=>{\n            handleAttribute(wel?.deref?.(), prop, value);\n        });\n        const usub = affected(attributes, (value, prop: any)=>{\n            handleAttribute(wel?.deref?.(), prop, value);\n            bindHandler(wel?.deref?.(), value, prop, handleAttribute, weak, true);\n        });\n        addToCallChain(attributes, Symbol.dispose, usub);\n        addToCallChain(element, Symbol.dispose, usub);\n    } else\n    { console.warn(\"Invalid attributes object:\", attributes); }\n}\n\n//\nexport const reflectARIA = (element: HTMLElement, aria: any)=>{\n    if (!aria) return element;\n    const weak = new WeakRef(aria), wel = new WeakRef(element);\n    if (typeof aria == \"object\" || typeof aria == \"function\") {\n        $entries(aria).forEach(([prop, value])=>{\n            handleAttribute(wel?.deref?.(), \"aria-\"+(prop?.toString?.()||prop||\"\"), value);\n        });\n        const usub = affected(aria, (value, prop)=>{ // @ts-ignore\n            handleAttribute(wel?.deref?.(), \"aria-\"+(prop?.toString?.()||prop||\"\"), value, true);\n            bindHandler(wel, value, prop, handleAttribute, weak, true);\n        });\n        addToCallChain(aria, Symbol.dispose, usub);\n        addToCallChain(element, Symbol.dispose, usub);\n    } else\n    { console.warn(\"Invalid ARIA object:\", aria);}; return element;\n}\n\n//\nexport const reflectDataset = (element: HTMLElement, dataset: any)=>{\n    if (!dataset) return element;\n    const weak = new WeakRef(dataset), wel = new WeakRef(element);\n    if (typeof dataset == \"object\" || typeof dataset == \"function\") {\n        $entries(dataset).forEach(([prop, value])=>{\n            handleDataset(wel?.deref?.(), prop, value);\n        });\n        const usub = affected(dataset, (value, prop: any)=>{\n            handleDataset(wel?.deref?.(), prop, value);\n            bindHandler(wel?.deref?.(), value, prop, handleDataset, weak);\n        });\n        addToCallChain(dataset, Symbol.dispose, usub);\n        addToCallChain(element, Symbol.dispose, usub);\n    } else\n    { console.warn(\"Invalid dataset object:\", dataset); }; return element;\n}\n\n// TODO! support observe styles\nexport const reflectStyles = (element: HTMLElement, styles: string|any)=>{\n    if (!styles) return element;\n    if (typeof styles == \"string\") { element.style.cssText = styles; } else\n    if (typeof styles?.value == \"string\") { affected([styles, \"value\"], (val) => { element.style.cssText = val; }); } else\n    if (typeof styles == \"object\" || typeof styles == \"function\") {\n        const weak = new WeakRef(styles), wel = new WeakRef(element);\n        $entries(styles).forEach(([prop, value])=>{\n            handleStyleChange(wel?.deref?.(), prop, value);\n        });\n        const usub = affected(styles, (value, prop: any)=>{\n            handleStyleChange(wel?.deref?.(), prop, value);\n            bindHandler(wel?.deref?.(), value, prop, handleStyleChange, weak?.deref?.());\n        });\n\n        //\n        addToCallChain(styles, Symbol.dispose, usub);\n        addToCallChain(element, Symbol.dispose, usub);\n    } else\n    { console.warn(\"Invalid styles object:\", styles); } return element;\n}\n\n// one-shot update\nexport const reflectWithStyleRules = async (element: HTMLElement, rule: any)=>{ const styles = await rule?.(element); return reflectStyles(element, styles); }\nexport const reflectProperties = (element: HTMLElement, properties: any)=>{\n    if (!properties) return element; const weak = new WeakRef(properties), wel = new WeakRef(element);\n\n    //\n    const onChange = (ev: any)=>{\n        const input = Q(\"input\", ev?.target);\n        if (input?.value != null && isNotEqual(input?.value, properties?.value)) properties.value = input?.value;\n        if (input?.valueAsNumber != null && isNotEqual(input?.valueAsNumber, properties?.valueAsNumber)) properties.valueAsNumber = input?.valueAsNumber;\n        if (input?.checked != null && isNotEqual(input?.checked, properties?.checked)) properties.checked = input?.checked;\n    };\n\n    //\n    $entries(properties).forEach(([prop, value])=>{\n        handleProperty(wel?.deref?.(), prop, value);\n    });\n\n    //\n    const usub = affected(properties, (value, prop: any) => {\n        const el = wel.deref();\n        if (el) {\n            if (prop == \"checked\") {\n                setChecked(el as HTMLInputElement, value);\n            } else {\n                bindWith(el, prop, value, handleProperty, weak?.deref?.(), true);\n            }\n        }\n    });\n\n    //\n    addToCallChain(properties, Symbol.dispose, usub); addToCallChain(element, Symbol.dispose, usub); element.addEventListener(\"change\", onChange); return element;\n}\n\n//\nexport const reflectClassList = (element: HTMLElement, classList?: Set<string>)=>{\n    if (!classList) return element; const wel = new WeakRef(element);\n\n    //\n    $entries(classList).forEach(([prop, value]) => {\n        const el = element;\n        if (typeof value == \"undefined\" || value == null)\n            { if ( el.classList.contains(value)) { el.classList.remove(value); } } else\n            { if (!el.classList.contains(value)) { el.classList.add(value); }\n        }\n    });\n\n    const usub = iterated(classList, (value: string)=>{\n        const el = wel?.deref?.();\n        if (el) {\n            if (typeof value == \"undefined\" || value == null)\n                { if ( el.classList.contains(value)) { el.classList.remove(value); } } else\n                { if (!el.classList.contains(value)) { el.classList.add(value); }\n            }\n        }\n    });\n\n    //\n    addToCallChain(classList, Symbol.dispose, usub);\n    addToCallChain(element, Symbol.dispose, usub); return element;\n}\n","import { addToCallChain, iterated, ref, affected } from \"fest/object\";\n\n//\nimport getNode, { appendChild, removeNotExists, replaceChildren } from \"./Utils\";\nimport { removeChild, removeChildDirectly } from \"./Utils\";\nimport { $mapped, $behavior, addToBank, hasInBank } from \"../core/Binding\";\nimport { indexOf, isValidParent } from \"fest/dom\";\n\n//\nexport const makeUpdater = (defaultParent: Node | null = null, mapper?: Function | null, isArray: boolean = true) => {\n    /*const toBeRemoved: any[] = [], toBeAppend: any[] = [], toBeReplace: any[] = [];\n    const merge = () => { // @ts-ignore\n        toBeAppend.forEach((args) => appendChild(...args)); toBeAppend.splice(0, toBeAppend.length); // @ts-ignore\n        toBeRemoved.forEach((args) => removeChild(...args)); toBeRemoved.splice(0, toBeRemoved.length); // @ts-ignore\n        toBeReplace.forEach((args) => replaceChildren(...args)); toBeReplace.splice(0, toBeReplace.length); // @ts-ignore\n    }*/\n\n    //\n    const commandBuffer: any[] = [];\n    const merge = ()=>{\n        commandBuffer?.forEach?.(([fn, args])=>fn?.(...args));\n        commandBuffer?.splice?.(0, commandBuffer?.length);\n    }\n\n    //\n    const updateChildList = (newEl, idx, oldEl, op: string | null, boundParent: Node | null = null) => {\n        const $requestor = isValidParent(boundParent) ?? isValidParent(defaultParent);\n        const newNode = getNode(newEl, mapper, idx, $requestor);\n        const oldNode = getNode(oldEl, mapper, idx, $requestor);\n\n        //\n        let doubtfulParent = newNode?.parentElement ?? oldNode?.parentElement;\n        let element = isValidParent(doubtfulParent) ?? $requestor;\n        if (!element) return; if (defaultParent != element) { defaultParent = element; }\n\n        //\n        const oldIdx = indexOf(element, oldNode);\n\n        //\n        if (([\"@add\", \"@set\", \"@delete\"].indexOf(op || \"\") >= 0 || !op)) {\n            // due splice already removed that index, we need to add +1 to the index in exists children\n            if ((newNode == null && oldNode != null) || op == \"@delete\") { commandBuffer?.push?.([removeChild, [element, oldNode, null, oldIdx >= 0 ? oldIdx : idx]]); } else\n            if ((newNode != null && oldNode == null) || op == \"@add\") { commandBuffer?.push?.([appendChild, [element, newNode, null, idx]]); } else\n            if ((newNode != null && oldNode != null) || op == \"@set\") { commandBuffer?.push?.([replaceChildren, [element, newNode, null, oldIdx >= 0 ? oldIdx : idx, oldNode]]); }; // TODO: add support for oldNode in replace method\n        }\n\n        //\n        if ((op && op != \"@get\" && [\"@add\", \"@set\", \"@delete\"].indexOf(op) >= 0) || (!op && !isArray)) { merge?.(); }\n    }\n\n    //\n    return updateChildList;\n}\n\n//\nconst asArray = (children)=>{\n    if (children instanceof Map || children instanceof Set) {\n        children = Array.from(children?.values?.());\n    }\n    return children;\n}\n\n// TODO! use handlerMap registry\nexport const reflectChildren = (element: HTMLElement | DocumentFragment, children: any[] = [], mapper?: Function) => {\n    const $parent = getNode(Array.from(children?.values?.() || [])?.[0], mapper, 0)?.parentElement;\n    if (!isValidParent(element)) { element = (isValidParent($parent) ? $parent : element) ?? element; }\n    if (!children || hasInBank(element, children)) return element;\n\n    //\n    mapper = (children?.[$mapped] ? (children as any)?.mapper : mapper) ?? mapper;\n    children = (children?.[$mapped] ? (children as any)?.children : children) ?? children;\n\n    //\n    removeNotExists(element, asArray(children)?.map?.((nd, index) => getNode(nd, mapper, index, element)));\n    const updater = makeUpdater(element, mapper, true);\n    const unsub = iterated(children, (...args) => {\n        const firstOf = getNode(Array.from(children?.values?.() || [])?.[0], mapper, 0);\n        const boundParent = firstOf?.parentElement; // @ts-ignore\n        return updater(args?.[0], args?.[1], args?.[2], args?.[3], boundParent);\n    });\n\n    //\n    addToBank(element, reflectChildren, \"childNodes\", [children, unsub]);\n    addToCallChain(children, Symbol.dispose, unsub);\n    addToCallChain(element, Symbol.dispose, unsub); return element;\n}\n\n// forcely update child nodes (and erase current content)\nexport const reformChildren = (element: HTMLElement | DocumentFragment, children: any[] = [], mapper?: Function) => {\n    if (!children || !element) return element;\n\n    //\n    mapper = (children?.[$mapped] ? (children as any)?.mapper : mapper) ?? mapper;\n    children = (children?.[$mapped] ? (children as any)?.children : children) ?? children;\n\n    //\n    const keys = Array.from(children?.keys?.() || []);\n    const cvt = asArray(children)?.map?.((nd, index) => getNode(nd, mapper, keys?.[index] ?? index, element));\n\n    //\n    removeNotExists(element, cvt); cvt?.forEach?.((nd) => appendChild(element, nd));\n    return element;\n}\n","import { affected } from \"fest/object\";\nimport { appendFix, elMap, getNode, Ps, T } from \"../context/Utils\";\nimport { makeUpdater } from \"../context/ReflectChildren\";\nimport { isPrimitive, hasValue } from \"fest/core\";\nimport { indexOf, isValidParent } from \"fest/dom\";\nimport { $mapped } from \"../core/Binding\";\nimport Q from \"./Queried\";\n\n//\ninterface ChangeableOptions {\n    boundParent?: Node | null;\n}\n\n//\nclass Ch {\n    #stub = document.createComment(\"\");\n    #valueRef?: { value: any };\n    #fragments: DocumentFragment;\n    #updater: any = null;\n    #internal: any = null;\n    #updating: boolean = false;\n    #options: ChangeableOptions = {} as ChangeableOptions;\n    #oldNode: any; // in case, if '.value' is primitive, and can't be reused by maps\n    #mapCb: any = null;\n    //#reMap: WeakMap<any, any>; // reuse same object from value\n\n    //\n    #boundParent: Node | null = null;\n\n    //\n    makeUpdater(basisParent: Node | null = null) {\n        if (basisParent) {\n            this.#internal?.(); this.#internal = null; this.#updater = null;\n            this.#updater ??= makeUpdater(basisParent, null, false);\n            this.#internal ??= affected?.([this.#valueRef, \"value\"], this._onUpdate.bind(this));\n        }\n    }\n\n    //\n    get boundParent() { return this.#boundParent; }\n    set boundParent(value: Node | null) {\n        if (value instanceof HTMLElement && isValidParent(value) && value != this.#boundParent) {\n            this.#boundParent = value; this.makeUpdater(value);\n            if (this.#oldNode) {\n                //this.#oldNode?.parentNode != null && this.#oldNode?.replaceWith?.(this.#stub); this.#oldNode = this.#stub;\n                this.#oldNode?.parentNode != null && this.#oldNode?.remove?.(); this.#oldNode = null;\n            };\n\n            //\n            const element = this.element;\n            //if (element) { appendFix(this.#boundParent, element); };\n        }\n    }\n\n    //\n    constructor(valueRef, mapCb: any = (el) => el, options: Node | null | ChangeableOptions = /*{ removeNotExistsWhenHasPrimitives: true, uniquePrimitives: true, preMap: true } as MappedOptions*/ null) {\n        this.#stub = document.createComment(\"\");\n\n        // swap arguments (JSX compatibility)\n        if (hasValue(mapCb) && ((typeof valueRef == \"function\" || typeof valueRef == \"object\") && !hasValue(valueRef))) {\n            [valueRef, mapCb] = [mapCb, valueRef] as [any, any];\n        }\n\n        // may be unified with options, if isn't exists (JSX compatibility)\n        if (!options && (mapCb != null && typeof mapCb == \"object\") && !hasValue(mapCb)) {\n            options = mapCb as ChangeableOptions;\n        }\n\n        //\n        this.#mapCb = (mapCb != null ? (typeof mapCb == \"function\" ? mapCb : (typeof mapCb == \"object\" ? mapCb?.mapper : null)) : null) ?? ((el) => el);\n        this.#oldNode = null;//this.#stub;\n        this.#valueRef  = (!hasValue(valueRef) ? mapCb?.(valueRef, -1) : valueRef) ?? valueRef;\n        this.#fragments = document.createDocumentFragment();\n\n        //\n        const $baseOptions = { removeNotExistsWhenHasPrimitives: true, uniquePrimitives: true, preMap: true } as ChangeableOptions;\n        const $newOptions = (isValidParent(options as any) ? null : (options as ChangeableOptions|null)) || {};\n        this.#options = Object.assign($baseOptions, $newOptions);\n\n        //\n        this.boundParent = isValidParent(this.#options?.boundParent as any) ?? (isValidParent(options as any) ?? null);\n    }\n\n    //\n    $getNodeBy(requestor?: any, value?: any) {\n        const node = isPrimitive(hasValue(value) ? value?.value : value) ? T(value) : getNode(value, (value == requestor) ? null : this.#mapCb, -1, requestor);\n        return node;\n    }\n\n    //\n    $getNode(requestor?: any, reassignOldNode: boolean | null = true) {\n        // TODO: resolve somehow returning this.#valueRef as element...\n        const node = isPrimitive(this.#valueRef?.value) ? T(this.#valueRef) : getNode(this.#valueRef?.value, (requestor == this.#valueRef?.value) ? null : this.#mapCb, -1, requestor);\n        if (node != null && reassignOldNode) { this.#oldNode = node; };\n        return node;\n    }\n\n    //\n    get [$mapped]() { return true; }\n\n    //\n    elementForPotentialParent(requestor: any) {\n        /*if (isValidParent(requestor)) {\n            this.boundParent = requestor;\n            this.#valueRef?.[$trigger]?.();\n        }*/\n        Promise.try(() => {\n            const element = this.$getNode(requestor);\n            if (!element || !requestor || element?.contains?.(requestor) || requestor == element) {\n                return;\n            }\n            if (requestor instanceof HTMLElement && isValidParent(requestor)) {\n                if (Array.from(requestor?.children).find((node) => node === element)) {\n                    this.boundParent = requestor;\n                } else {\n                    const observer = new MutationObserver((records) => {\n                        for (const record of records) {\n                            if (record.type === \"childList\") {\n                                if (record.addedNodes.length > 0) {\n                                    const connectedNode = Array.from((record.addedNodes as any) || []).find((node) => node === element);\n                                    if (connectedNode) {\n                                        this.boundParent = requestor;\n                                        observer.disconnect();\n                                    }\n                                }\n                            }\n                        }\n                    });\n                    observer.observe(requestor, { childList: true });\n                }\n            }\n        })?.catch?.(console.warn.bind(console));\n        return this.element;\n    }\n\n    //\n    get self(): HTMLElement | DocumentFragment | Text | null {\n        const existsNode = this.$getNode(this.boundParent) ?? this.#stub;\n        const theirParent = isValidParent(existsNode?.parentElement) ? existsNode?.parentElement : this.boundParent;\n        this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n\n        //\n        queueMicrotask(() => {\n            const theirParent = isValidParent(existsNode?.parentElement) ? existsNode?.parentElement : this.boundParent;\n            this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n        })\n\n        //\n        return (theirParent ?? this.boundParent ?? existsNode);\n    }\n\n    //\n    get element(): HTMLElement | DocumentFragment | Text | null {\n        const children = this.$getNode(this.boundParent) ?? this.#stub;\n        const theirParent = isValidParent(children?.parentElement) ? children?.parentElement : this.boundParent;\n        this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n\n        //\n        queueMicrotask(() => {\n            const theirParent = isValidParent(children?.parentElement) ? children?.parentElement : this.boundParent;\n            this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n        })\n\n        //\n        return children;\n    }\n\n    //\n    _onUpdate(newVal, idx, oldVal, op) {\n        //if (this.#updating) { return; }\n        if (isPrimitive(oldVal) && isPrimitive(newVal)) { return; }\n\n        //\n        let oldEl = (isPrimitive(oldVal) ? this.#oldNode : this.$getNodeBy(this.boundParent, oldVal)); //?? this.#oldNode;\n        let newEl = this.$getNode(this.boundParent, false) ?? this.#stub;\n        if ((oldEl && !oldEl?.parentNode) || this.#oldNode?.parentNode) { oldEl = this.#oldNode ?? oldEl; };\n\n        //\n        let updated: any = this.#updater?.(newEl, indexOf(this.boundParent, oldEl), oldEl, op, this.boundParent);\n        if (newEl != null && newEl != this.#oldNode) { this.#oldNode = newEl; } else\n        if (newEl == null && oldEl != this.#oldNode) { this.#oldNode = oldEl; };\n        return updated;\n    }\n}\n\n//\nconst isWeakCompatible = (key: any) => { \n    return (typeof key == \"object\" || typeof key == \"function\" || typeof key == \"symbol\") && key != null;\n}\n\n//\nexport const C = (observable, mapCb?, boundParent: Node | null | ChangeableOptions = null) => {\n    if (observable instanceof HTMLElement) { return Q(observable); }\n    if (observable == null) return document.createComment(\":NULL:\");\n    const checkable = (typeof mapCb == \"function\" ? mapCb(observable, -1) : observable) ?? observable;\n    if (isPrimitive(checkable)) { return T(checkable); }\n\n    //\n    if (checkable != null && hasValue(checkable)) {\n        if (isPrimitive(checkable?.value)) {\n            return checkable?.value != null ? T(checkable) : document.createComment(\":NULL:\");\n        } else\n        if (typeof checkable == \"object\" || typeof checkable == \"function\") {\n            // @ts-ignore\n            return elMap.getOrInsertComputed(isWeakCompatible(observable) ? observable : checkable, () => {\n                return new Ch(observable, mapCb, boundParent);\n            });\n        }\n    }\n\n    //\n    return getNode(checkable, null, -1, boundParent);\n};\n\n//\nexport default C;\n","import { unwrap, affected } from \"fest/object\";\nimport { $virtual, $mapped } from \"../core/Binding\";\nimport { isElement, isValidParent } from \"fest/dom\";\nimport { hasValue, isNotEqual, isPrimitive } from \"fest/core\";\nimport C from \"../node/Changeable\";\nimport Q from \"../node/Queried\";\n\n//\nexport const KIDNAP_WITHOUT_HANG = (el: any, requestor: any | null) => {\n    return ((requestor && requestor != el && !el?.contains?.(requestor) && isValidParent(requestor)) ? el?.elementForPotentialParent?.(requestor) : null) ?? el?.element;\n}\n\n//\nexport const isElementValue = (el: any, requestor?: any | null) => { return KIDNAP_WITHOUT_HANG(el, requestor) ?? (hasValue(el) && isElement(el?.value) ? el?.value : el); }\n\n//\nexport const elMap = new WeakMap();\nexport const tmMap = new WeakMap();\n\n//\nconst getMapped = (obj: any)=>{\n    if (isPrimitive(obj)) return obj;\n    if (hasValue(obj) && isPrimitive(obj?.value)) return tmMap?.get(obj);\n    return elMap?.get?.(obj);\n}\n\n//\nconst $promiseResolvedMap = new WeakMap();\nconst $makePromisePlaceholder = (promised, getNodeCb)=>{\n    if ($promiseResolvedMap?.has?.(promised)) {\n        return $promiseResolvedMap?.get?.(promised);\n    }\n\n    //\n    const comment = document.createComment(\":PROMISE:\");\n    promised?.then?.((elem)=>{\n        const element = typeof getNodeCb == \"function\" ? getNodeCb(elem) : elem;\n        $promiseResolvedMap?.set?.(promised, element);\n\n        // avoid vain (not) replacement\n        queueMicrotask(() => {\n            try {\n                if (typeof comment?.replaceWith == \"function\") {\n                    if (!comment?.isConnected) return;\n                    if (isElement(element)) { comment?.replaceWith?.(element); }\n                } else\n                    if (comment?.isConnected && isElement(element)) {\n                        comment?.parentNode?.replaceChild?.(comment, element);\n                    }\n            } catch (error) {\n                if (!comment?.isConnected) return;\n                comment?.remove?.();\n            }\n        })\n    });\n    return comment;\n}\n\n//\nexport const $getBase = (el, mapper?: Function | null, index: number = -1, requestor?: any | null)=>{\n    if (mapper != null) { return (el = $getBase(mapper?.(el, index), null, -1, requestor)); }\n    if (el instanceof WeakRef || typeof (el as any)?.deref == \"function\") { el = el.deref(); } // promise unsupported\n    if (el instanceof Promise || typeof (el as any)?.then == \"function\") { return $makePromisePlaceholder(el, (nd)=>$getBase(nd, mapper, index, requestor)); };\n    if (isElement(el) && !el?.element) { return el; } else\n    if (isElement(el?.element)) { return el; } else\n    if (hasValue(el)) { return ((el instanceof HTMLElement) ? Q : C)(el); } else\n    if (typeof el == \"object\" && el != null) { return getMapped(el); } else\n    if (typeof el == \"function\") { return $getBase(el?.(), mapper, index, requestor); }  // mapped arrays always empties after\n    if (isPrimitive(el) && el != null) return T(el);\n    return document.createComment(\":NULL:\");\n}\n\n//\nexport const isValidElement = (el)=>{\n    return (isValidParent(el) || (el instanceof DocumentFragment) || (el instanceof Text)) ? el : null;\n}\n\n//\nexport const $getLeaf = (el, requestor?: any | null)=>{\n    return isElementValue(el, requestor) ?? isElement(el);\n}\n\n//\nexport const $getNode = (el, mapper?: Function | null, index: number = -1, requestor?: any | null) => {\n    if (mapper != null) { return (el = getNode(mapper?.(el, index), null, -1, requestor)); }\n    if (el instanceof WeakRef || typeof (el as any)?.deref == \"function\") { el = el.deref(); } // promise unsupported\n    if (el instanceof Promise || typeof (el as any)?.then == \"function\") { return $makePromisePlaceholder(el, (nd)=>getNode(nd, mapper, index, requestor)); };\n    if (isElement(el) && !el?.element) { return el; } else\n    if (isElement(el?.element)) { return isElementValue(el, requestor); } else\n    if (hasValue(el)) { return ((el instanceof HTMLElement) ? Q : C)(el)?.element; } else\n    if (typeof el == \"object\" && el != null) { return getMapped(el); } else\n    if (typeof el == \"function\") { return getNode(el?.(), mapper, index, requestor); } else\n    if (isPrimitive(el) && el != null) return T(el);\n    return document.createComment(\":NULL:\");\n};\n\n//\nconst isWeakCompatible = (el: any)=>{\n    return (typeof el == \"object\" || typeof el == \"function\" || typeof el == \"symbol\") && el != null;\n}\n\n//\nconst __nodeGuard = new WeakSet<any>();\nconst __getNode = (el, mapper?: Function | null, index: number = -1, requestor?: any | null)=>{\n    if (el instanceof WeakRef || typeof (el as any)?.deref == \"function\") { el = el.deref(); }\n    if (el instanceof Promise || typeof (el as any)?.then == \"function\") { return $makePromisePlaceholder(el, (nd)=>__getNode(nd, mapper, index, requestor)); };\n    if (isWeakCompatible(el) && !isElement(el)) {\n        if (elMap.has(el)) {\n            const obj: any = getMapped(el) ?? $getBase(el, mapper, index, requestor);\n            return $getLeaf(obj instanceof WeakRef ? obj?.deref?.() : obj, requestor);\n        };\n        const $node = $getBase(el, mapper, index, requestor);\n        if (!mapper && $node != null && $node != el && isWeakCompatible(el) && !isElement(el)) { elMap.set(el, $node); }\n        return $getLeaf($node, requestor);\n    }\n    return $getNode(el, mapper, index, requestor);\n}\n\n// (obj instanceof WeakRef ? obj?.deref?.() : obj)\nexport const getNode = (el, mapper?: Function | null, index: number = -1, requestor?: any | null) => {\n    if (isWeakCompatible(el) && __nodeGuard.has(el)) { return getMapped(el) ?? isElement(el); }\n    if (isWeakCompatible(el)) __nodeGuard.add(el); const result = __getNode(el, mapper, index, requestor);\n    if (isWeakCompatible(el)) __nodeGuard.delete(el); return result;\n}\n\n/*\nexport const getNode = (el, mapper?: Function | null, index: number = -1, requestor?: any | null) => {\n    return __getNode(el, mapper, index, requestor);\n}*/\n\n//\nconst appendOrEmplaceByIndex = (parent: any, child: any, index: number = -1) => {\n    if (isElement(child) && child != null && child?.parentNode != parent) {\n        if (Number.isInteger(index) && index >= 0 && index < parent?.childNodes?.length) {\n            parent?.insertBefore?.(child, parent?.childNodes?.[index]);\n        } else {\n            parent?.append?.(child);\n        }\n    }\n}\n\n//\nexport const appendFix = (parent: any, child: any, index: number = -1) => {\n    if (!isElement(child) || parent == child || child?.parentNode == parent) return;\n    child = (child as any)?._onUpdate ? KIDNAP_WITHOUT_HANG(child, parent) : child;\n    if (!child?.parentNode && isElement(child)) { appendOrEmplaceByIndex(parent, child, index); return; };\n    if (parent?.parentNode == child?.parentNode) { return; }\n    if (isElement(child)) { appendOrEmplaceByIndex(parent, child, index); };\n}\n\n//\nconst asArray = (children)=>{\n    if (children instanceof Map || children instanceof Set) {\n        children = Array.from(children?.values?.());\n    }\n    return children;\n}\n\n//\nexport const appendArray = (parent: any, children: any[], mapper?: Function | null, index: number = -1) => {\n    const len = children?.length ?? 0;\n    if (Array.isArray(unwrap(children)) || children instanceof Map || children instanceof Set) {\n        const list = asArray(children)?.map?.((cl, I: number) => getNode(cl, mapper, I, parent))?.filter?.((el) => el != null)\n        const frag = document.createDocumentFragment();\n        list?.forEach?.((cl)=>appendFix(frag, cl));\n        appendFix(parent, frag, index);\n    } else {\n        const node = getNode(children, mapper, len, parent);\n        if (node != null) { appendFix(parent, node, index); }\n    }\n}\n\n//\nexport const appendChild = (element, cp, mapper?: Function | null, index: number = -1) => {\n    if (mapper != null) { cp = mapper?.(cp, index); }\n\n    // has children lists\n    if (cp?.children && Array.isArray(unwrap(cp?.children)) && (cp?.[$virtual] || cp?.[$mapped])) {\n        appendArray(element, cp?.children, null, index);\n    } else {\n        appendArray(element, cp, null, index);\n    }\n}\n\n\n\n//\nexport const dePhantomNode = (parent, node, index: number = -1)=>{\n    if (!parent) return node;\n    if (node?.parentNode == parent && node?.parentNode != null) {\n        return node;\n    } else\n    if (node?.parentNode != parent && !isValidParent(node?.parentNode)) {\n        if (Number.isInteger(index) && index >= 0 && Array.from(parent?.childNodes || [])?.length > index) {\n            return parent.childNodes?.[index];\n        }\n    }\n    return node;\n}\n\n//\nexport const replaceOrSwap = (parent, oldEl, newEl) => {\n    if (oldEl?.parentNode) {\n        if (oldEl?.parentNode == newEl?.parentNode) {\n            parent = oldEl?.parentNode ?? parent;\n            if (oldEl.nextSibling === newEl) { parent.insertBefore(newEl, oldEl); } else\n            if (newEl.nextSibling === oldEl) { parent.insertBefore(oldEl, newEl); } else\n            {\n                const nextSiblingOfElement1 = oldEl.nextSibling;\n                parent.replaceChild(newEl, oldEl);\n                parent.insertBefore(oldEl, nextSiblingOfElement1);\n            }\n        } else {\n            oldEl?.replaceWith?.(newEl);\n        }\n    }\n}\n\n\n\n// TODO: what exactly to replace, if has (i.e. object itself, not index)\nexport const replaceChildren = (element, cp, mapper?: Function | null, index: number = -1, old?: any|null) => {\n    if (mapper != null) { cp = mapper?.(cp, index); }; if (!element) element = old?.parentNode;\n    const cn = dePhantomNode(element, getNode(old, mapper, index), index);\n    if (cn instanceof Text && typeof cp == \"string\") { cn.textContent = cp; } else\n    if (cp != null) {\n        const node = getNode(cp); // oldNode is always unknown and phantom\n\n        if (cn?.parentNode == element && cn != node && (cn instanceof Text && node instanceof Text)) {\n            if (cn?.textContent != node?.textContent) { cn.textContent = node?.textContent?.trim?.() ?? \"\"; }\n        } else\n        if (cn?.parentNode == element && cn != node && cn != null && cn?.parentNode != null) {\n            replaceOrSwap(element, cn, node);\n        } else\n        if (cn?.parentNode != element || cn?.parentNode == null) {\n            appendChild(element, node, null, index);\n        }\n    }\n}\n\n//\nexport const removeChildDirectly = (element, node, _?: Function | null, index: number = -1) => {\n    if (Array.from(element?.childNodes ?? [])?.length < 1) return;\n    const whatToRemove = dePhantomNode(element, node, index);\n    if (whatToRemove?.parentNode == element) whatToRemove?.remove?.();\n    return element;\n}\n\n//\nexport const removeChild = (element, cp, mapper?: Function | null, index: number = -1) => {\n    const $node = getNode(cp, mapper);\n    if (!element) element = $node?.parentNode;\n    if (Array.from(element?.childNodes ?? [])?.length < 1) return;\n    const whatToRemove = dePhantomNode(element, $node, index);\n    if (whatToRemove?.parentNode == element) whatToRemove?.remove?.();\n    return element;\n}\n\n//\nexport const removeNotExists = (element, children, mapper?: Function | null) => {\n    const list = Array.from(unwrap(children) || [])?.map?.((cp, index) => getNode(cp, mapper, index));\n    Array.from(element.childNodes).forEach((nd: any) => { if (!list?.find?.((cp) => (!isNotEqual?.(cp, nd)))) nd?.remove?.(); });\n    return element;\n}\n\n//\nexport const T = (ref) => {\n    if (isPrimitive(ref) && ref != null) { return document.createTextNode(ref); }\n    if (ref == null) return document.createComment(\":NULL:\");\n\n    // @ts-ignore\n    return tmMap.getOrInsertComputed(ref, () => {\n        const element = document.createTextNode(((hasValue(ref) ? ref?.value : ref) ?? \"\")?.trim?.() ?? \"\");\n        //affected([ref, \"value\"], (val) => (element.textContent = (val?.innerText ?? val?.textContent ?? val ?? \"\")?.trim?.() ?? \"\"));\n        affected([ref, \"value\"], (val) => {\n            const untrimmed = \"\" + (val?.innerText ?? val?.textContent ?? val?.value ?? val ?? \"\");\n            (element.textContent = untrimmed?.trim?.() ?? \"\");\n        });\n        return element;\n    });\n}\n\n//\nexport default getNode;\n","import { iterated, ref } from \"fest/object\";\nimport { $mapped } from \"../core/Binding\";\nimport { getNode, appendFix, removeNotExists, removeChild, removeChildDirectly, appendChild } from \"../context/Utils\";\nimport { makeUpdater, reformChildren } from \"../context/ReflectChildren\";\nimport { canBeInteger, isObservable, isPrimitive, isHasPrimitives } from \"fest/core\";\nimport { isValidParent } from \"fest/dom\";\nimport C from \"./Changeable\";\n\n//\ninterface MappedOptions {\n    uniquePrimitives?: boolean;\n    removeNotExistsWhenHasPrimitives?: boolean;\n    boundParent?: Node | null;\n    preMap?: boolean;\n}\n\n//\nconst asArray = (children)=>{\n    if (children instanceof Map || children instanceof Set) {\n        children = Array.from(children?.values?.());\n    }\n    return children;\n}\n\n//\nclass Mp {\n    #observable?: any[];\n    #fragments: DocumentFragment;\n    #mapCb: any;\n    #reMap: WeakMap<any, any>;\n    #pmMap: Map<any, any>;\n    #updater: any = null;\n    #internal: any = null;\n    #options: MappedOptions = {} as MappedOptions;\n    #stub = document.createComment(\"\");\n\n    //\n    #indexMap: Map<any, any> = new Map();\n\n    //\n    #boundParent: Node | null = null;\n\n    //\n    makeUpdater(basisParent: Node | null = null) {\n        if (basisParent) {\n            this.#internal?.(); this.#internal = null; this.#updater = null;\n            this.#updater ??= makeUpdater(basisParent, this.mapper.bind(this), Array.isArray(this.#observable));\n            this.#internal ??= iterated?.(this.#observable, this._onUpdate.bind(this));\n        }\n    }\n\n    //\n    get boundParent() {\n        return this.#boundParent;\n    }\n\n    //\n    set boundParent(value: Node | null) {\n        if (value instanceof HTMLElement && isValidParent(value) && value != this.#boundParent) {\n            this.#boundParent = value; this.makeUpdater(value); const element = this.element;\n            //if (element && element instanceof DocumentFragment) { appendFix(this.#boundParent, element); };\n        }\n    }\n\n    //\n    constructor(observable, mapCb: any = (el) => el, options: Node | null | MappedOptions = /*{ removeNotExistsWhenHasPrimitives: true, uniquePrimitives: true, preMap: true } as MappedOptions*/ null) {\n        // swap arguments (JSX compatibility)\n        if (isObservable(mapCb) && ((typeof observable == \"function\" || typeof observable == \"object\") && !isObservable(observable))) {\n            [observable, mapCb] = [mapCb, observable] as [any, any];\n        }\n\n        // may be unified with options, if isn't exists (JSX compatibility)\n        if (!options && (mapCb != null && typeof mapCb == \"object\") && !isObservable(mapCb)) {\n            options = mapCb as MappedOptions;\n        }\n\n        //\n        this.#stub = document.createComment(\"\");\n        this.#reMap = new WeakMap();\n        this.#pmMap = new Map<any, any>(); // make 'mapper' compatible with React syntax ('mapper' property instead of function)\n        this.#mapCb = (mapCb != null ? (typeof mapCb == \"function\" ? mapCb : (typeof mapCb == \"object\" ? mapCb?.mapper : null)) : null) ?? ((el) => el);\n        this.#observable = (isObservable(observable) ? observable : (observable?.iterator ?? mapCb?.iterator ?? observable)) ?? [];\n        this.#fragments = document.createDocumentFragment();\n\n        //\n        const $baseOptions = { removeNotExistsWhenHasPrimitives: true, uniquePrimitives: true, preMap: true } as MappedOptions;\n        const $newOptions = (isValidParent(options as any) ? null : (options as MappedOptions|null)) || {};\n        this.#options = Object.assign($baseOptions, $newOptions);\n\n        //\n        this.boundParent = isValidParent(this.#options?.boundParent as any) ?? (isValidParent(options as any) ?? null);\n        if (!this.boundParent) {\n            if (this.#options.preMap) {\n                reformChildren(\n                    this.#fragments, this.#observable,\n                    this.mapper.bind(this)\n                );\n                if (this.#fragments.childNodes.length === 0) {\n                    this.#fragments.appendChild(this.#stub);\n                }\n            }\n        }\n    }\n\n    //\n    get [$mapped]() { return true; }\n\n    //\n    elementForPotentialParent(requestor: any) {\n        Promise.try(() => {\n            const element = getNode(this.#observable?.[0], this.mapper.bind(this), 0);\n            if (!element || !requestor || element?.contains?.(requestor) || requestor == element) {\n                return;\n            }\n            if (requestor instanceof HTMLElement && isValidParent(requestor)) {\n                if (Array.from(requestor?.children).find((node) => node === element)) {\n                    this.boundParent = requestor;\n                } else {\n                    const observer = new MutationObserver((records) => {\n                        for (const record of records) {\n                            if (record.type === \"childList\") {\n                                if (record.addedNodes.length > 0) {\n                                    const connectedNode = Array.from((record.addedNodes as any) || []).find((node) => node === element);\n                                    if (connectedNode) {\n                                        this.boundParent = requestor;\n                                        observer.disconnect();\n                                    }\n                                }\n                            }\n                        }\n                    });\n                    observer.observe(requestor, { childList: true });\n                }\n            }\n        })?.catch?.(console.warn.bind(console));\n\n        //\n        return this.element;\n    }\n\n    //\n    get children() { return asArray(this.#observable); }\n\n    //\n    get self(): HTMLElement | DocumentFragment | Text | null {\n        const existsNode = getNode(this.#observable?.[0], this.mapper.bind(this), 0);\n        const theirParent = isValidParent(existsNode?.parentElement) ? existsNode?.parentElement : this.boundParent;\n        this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n\n        //\n        queueMicrotask(() => {\n            const theirParent = isValidParent(existsNode?.parentElement) ? existsNode?.parentElement : this.boundParent;\n            this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n        });\n\n        //\n        return (theirParent ?? this.boundParent ?? (reformChildren(\n            this.#fragments, this.#observable,\n            this.mapper.bind(this)\n        )));\n    }\n\n    //\n    get element(): HTMLElement | DocumentFragment | Text | null {\n        const children = this.#fragments?.childNodes?.length > 0 ? this.#fragments : getNode(this.#observable?.[0], this.mapper.bind(this), 0);\n        const theirParent = isValidParent(children?.parentElement) ? children?.parentElement : this.boundParent;\n        this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n\n        //\n        queueMicrotask(() => {\n            const theirParent = isValidParent(children?.parentElement) ? children?.parentElement : this.boundParent;\n            this.boundParent ??= isValidParent(theirParent) ?? this.boundParent;\n        });\n\n        //\n        return children;\n    }\n\n    //\n    get mapper() {\n        return (...args) => {\n            if (args?.[0] == null) { return null; }\n\n            //\n            if (args?.[0] instanceof Node) { return args?.[0]; };\n\n            // unsupported\n            if (args?.[0] instanceof Promise || typeof (args?.[0] as any)?.then == \"function\") { return null; };\n\n            //\n            if (\n                (args?.[1] == null || args?.[1] < 0 || (typeof args?.[1] != \"number\" || !canBeInteger(args?.[1] as any))) &&\n                (Array.isArray(this.#observable) || ((this.#observable as any) instanceof Set))\n            ) { return; }\n\n            //\n            if (args?.[0] != null && (typeof args?.[0] == \"object\" || typeof args?.[0] == \"function\" || typeof args?.[0] == \"symbol\")) // @ts-ignore\n                { return this.#reMap.getOrInsert(args?.[0], this.#mapCb(...args)); }\n\n            // prevalence of Set typed\n            if (args?.[0] != null && this.#observable instanceof Set) // @ts-ignore\n                { return this.#pmMap.getOrInsert(args?.[0], this.#mapCb(...args)); }\n\n            // prevalence of Map typed\n            if (args?.[0] != null && this.#observable instanceof Map) {\n                // unique value in map\n                if (typeof args?.[0] == \"object\" || typeof args?.[0] == \"function\" || typeof args?.[0] == \"symbol\") // @ts-ignore\n                    { return this.#reMap.getOrInsert(args?.[0], this.#mapCb(...args)); } else\n                // unique key in map (objects)\n                if (typeof args?.[1] == \"object\" || typeof args?.[1] == \"function\" || typeof args?.[1] == \"symbol\") // @ts-ignore\n                    { return this.#reMap.getOrInsert(args?.[1], this.#mapCb(...args)); } else // @ts-ignore\n                    { return this.#pmMap.getOrInsert(args?.[1], this.#mapCb(...args)); }\n            }\n\n            // array may has same values twice, no viable solution...\n            if (args?.[0] != null) {\n                if (this.#options?.uniquePrimitives && isPrimitive(args?.[0])) // @ts-ignore\n                    { return this.#pmMap.getOrInsert(args?.[0], this.#mapCb(...args)); } else\n                    { return this.#mapCb(...args); }\n            }\n        }\n    }\n\n    //\n    _onUpdate(newEl, idx, oldEl, op: string | null = \"\") {\n        //\n        if (op == \"@add\" || (newEl != null && oldEl == null)) {\n            if (this.#indexMap.has(idx)) { return; }\n            const indexRef = ref(this.#observable, idx);\n            const withElement = C(indexRef, (...args) => {\n                if (args?.[1] == null || args?.[1] < 0) { args[1] = idx ?? args?.[1]; };\n                return this.mapper(...args);\n            });\n            this.#indexMap.set(idx, withElement);\n            appendChild(this.boundParent, withElement, null, idx);\n        }\n\n        //\n        if (op == \"@delete\" || (newEl == null && oldEl != null)) {\n            const withElement = this.#indexMap.get(idx);\n            if (withElement) { removeChild(this.boundParent, withElement, null, idx); }\n            this.#indexMap.delete(idx);\n        }\n    }\n\n    // generator and iterator\n    *[Symbol.iterator]() {\n        let i=0;\n        if (this.#observable) {\n            for (let el of this.#observable)\n                { yield this.mapper(el, i++); }\n        }\n        return;\n    }\n}\n\n//\nexport const M = (observable, mapCb?, boundParent: Node | null | MappedOptions = null) => {\n    return new Mp(observable, mapCb, boundParent);\n};\n\n//\nexport default M;\n","import { reflectBehaviors, reflectStores, reflectMixins, handleProperty, handleAttribute, handleHidden, addEventsList, createElementVanilla } from \"fest/dom\";\nimport { reflectClassList, reflectStyles, reflectDataset, reflectAttributes, reflectProperties, reflectWithStyleRules, reflectARIA } from '../context/Reflect';\nimport { reflectControllers, bindWith } from '../core/Binding';\n\n//\nimport { affected } from \"fest/object\";\nimport { Q } from \"./Queried\";\nimport { M } from \"./Mapped\";\nimport { getNode } from \"../context/Utils\";\n\n//\ninterface Params {\n    classList?: Set<string>;\n    attributes?: any;\n    dataset?: any;\n    properties?: any;\n    behaviors?: any;\n    stores?: any[] | Set<any> | Map<any, any>;\n    style?: any | string;\n    slot?: any | string;\n    name?: any | string;\n    type?: any | string;\n    icon?: any | string;\n    role?: any | string;\n    inert?: boolean | string;\n    mixins?: any;\n    ctrls?: any;\n    is?: any | string;\n    part?: any | string;\n    on?: any;\n    visible?: any;\n    hidden?: any;\n    aria?: any;\n    rules?: any[];\n};\n\n// WILL not be released!\nexport const Qp = (ref, host = document.documentElement)=>{\n    if (ref?.value == null) { return Q(ref, host); }\n    const actual = Q(ref?.value, host);\n    affected(ref, (value, prop)=>actual?._updateSelector(value));\n    return actual;\n}\n\n//\nexport const $createElement = (selector: string | HTMLElement | Node | DocumentFragment | Document | Element)=>{\n    if (typeof selector == \"string\") {\n        const nl = Qp(createElementVanilla(selector));\n        return nl?.element ?? nl;\n    } else if (selector instanceof HTMLElement || selector instanceof Element || selector instanceof DocumentFragment || selector instanceof Document || selector instanceof Node) {\n        return selector;\n    } else {\n        return null;\n    }\n}\n\n//\nexport const E = (selector: string | HTMLElement | Node | DocumentFragment | Document | Element, params: Params = {}, children?: any[]|any|null) => {\n    const element = getNode(typeof selector == \"string\" ? $createElement(selector) : selector, null, -1);\n    if (element && children) { M(children, (el)=>el, element); /*reflectChildren(element, children);*/ }\n    if (element && params) {\n        if (params.ctrls != null) reflectControllers(element, params.ctrls);\n        if (params.attributes != null) reflectAttributes(element, params.attributes);\n        if (params.properties != null) reflectProperties(element, params.properties);\n        if (params.classList != null) reflectClassList(element, params.classList);\n        if (params.behaviors != null) reflectBehaviors(element, params.behaviors);\n        if (params.dataset != null) reflectDataset(element, params.dataset);\n        if (params.stores != null) reflectStores(element, params.stores);\n        if (params.mixins != null) reflectMixins(element, params.mixins);\n        if (params.style != null) reflectStyles(element, params.style);\n        if (params.aria != null) reflectARIA(element, params.aria);\n\n        //\n        if (params.is != null) bindWith(element, \"is\", params.is, handleAttribute, params, true);\n        if (params.role != null) bindWith(element, \"role\", params.role, handleProperty, params);\n        if (params.slot != null) bindWith(element, \"slot\", params.slot, handleProperty, params);\n        if (params.part != null) bindWith(element, \"part\", params.part, handleAttribute, params, true);\n        if (params.name != null) bindWith(element, \"name\", params.name, handleAttribute, params, true);\n        if (params.type != null) bindWith(element, \"type\", params.type, handleAttribute, params, true);\n        if (params.icon != null) bindWith(element, \"icon\", params.icon, handleAttribute, params, true);\n        if (params.inert != null) bindWith(element, \"inert\", params.inert, handleAttribute, params, true);\n        if (params.hidden != null) bindWith(element, \"hidden\", params.visible ?? params.hidden, handleHidden, params);\n        if (params.on != null) addEventsList(element, params.on);\n\n        //\n        if (params.rules != null) params.rules.forEach?.((rule) => reflectWithStyleRules(element, rule));\n    };\n    return Q(element);\n}\n\n//\nexport default E;\n","\n//\nexport function getIndentColumns(line: string, tabWidth = 4): number {\n    let col = 0;\n    for (let i = 0; i < line.length; i++) {\n        const ch = line[i];\n        if (ch === ' ') col += 1;\n        else if (ch === '\\t') col += tabWidth - (col % tabWidth);\n        else break;\n    }\n    return col;\n}\n\n//\nexport function stripIndentColumns(line: string, columns: number, tabWidth = 4): string {\n    let col = 0, i = 0;\n    while (i < line.length && col < columns) {\n        const ch = line[i];\n        if (ch === ' ') { col += 1; i++; }\n        else if (ch === '\\t') { col += tabWidth - (col % tabWidth); i++; }\n        else break;\n    }\n    return line.slice(i);\n}\n\n//\nexport function pickEOL(s: string): string {\n    if (s.includes('\\r\\n')) return '\\r\\n';\n    if (s.includes('\\r')) return '\\r';\n    return '\\n';\n}\n\n//\nexport function gcd(a: number, b: number): number {\n    a = Math.abs(a); b = Math.abs(b);\n    while (b) [a, b] = [b, a % b];\n    return a;\n}\n\n//\nexport function detectIndentStep(\n    text: string,\n    { ignoreFirstLine = true, tabWidth = 4 } = {}\n): { min: number; step: number; allEven: boolean; allDiv4: boolean } {\n    const lines = text.split(/\\r\\n|\\n|\\r/);\n    const start = ignoreFirstLine ? 1 : 0;\n\n    const indents: number[] = [];\n    for (let i = start; i < lines.length; i++) {\n        const ln = lines[i];\n        if (ln.trim() === '') continue;\n        indents.push(getIndentColumns(ln, tabWidth));\n    }\n    if (indents.length === 0) return { min: 0, step: 0, allEven: true, allDiv4: true };\n\n    const min = Math.min(...indents);\n    const shifted = indents.map(v => v - min).filter(v => v > 0);\n    let step = 0;\n    for (const v of shifted) step = step ? gcd(step, v) : v;\n\n    const allEven = indents.every(v => v % 2 === 0);\n    const allDiv4 = indents.every(v => v % 4 === 0);\n\n    //  :  4,  2,  1\n    if (step === 0) {\n        //   ;    \n        step = allDiv4 ? 4 : allEven ? 2 : 1;\n    } else {\n        if (step % 4 === 0) step = 4;\n        else if (step % 2 === 0) step = 2;\n        else step = 1;\n    }\n\n    return { min, step, allEven, allDiv4 };\n}\n\n//\nexport function adjustIndentToGrid(\n    line: string,\n    step: number,\n    mode: 'floor' | 'nearest' | 'ceil' = 'floor',\n    tabWidth = 4\n): string {\n    if (!step || step <= 1) return line; //     1n\n    const cur = getIndentColumns(line, tabWidth);\n    if (cur === 0) return line; //  \n    let target: number;\n    if (mode === 'nearest') target = Math.round(cur / step) * step;\n    else if (mode === 'ceil') target = Math.ceil(cur / step) * step;\n    else target = Math.floor(cur / step) * step;\n\n    const delta = cur - target;\n    if (delta > 0) {\n        //    delta \n        return stripIndentColumns(line, delta, tabWidth);\n    } else if (delta < 0) {\n        //   (  )  \n        return ' '.repeat(-delta) + line;\n    }\n    return line;\n}\n\n//\nexport function normalizeStartTagWhitespace(\n    html: string,\n    { scope = 'void-only' as 'void-only' | 'input-only' | 'all' } = {}\n): string {\n    if (!html || typeof html !== 'string') return html;\n\n    const VOID = new Set([\n        'area', 'base', 'br', 'col', 'embed', 'hr', 'img', 'input', 'link', 'meta',\n        'param', 'source', 'track', 'wbr'\n    ]);\n\n    let out = '';\n    let i = 0;\n    const n = html.length;\n\n    while (i < n) {\n        const ch = html[i];\n        if (ch !== '<') { out += ch; i++; continue; }\n\n        //  <!-- ... -->\n        if (html.startsWith('<!--', i)) {\n            const end = html.indexOf('-->', i + 4);\n            if (end === -1) { out += html.slice(i); break; }\n            out += html.slice(i, end + 3);\n            i = end + 3;\n            continue;\n        }\n        // DOCTYPE/DECL/CDATA/PI\n        if (html[i + 1] === '!' || html[i + 1] === '?') {\n            const end = html.indexOf('>', i + 2);\n            if (end === -1) { out += html.slice(i); break; }\n            out += html.slice(i, end + 1);\n            i = end + 1;\n            continue;\n        }\n        //  \n        if (html[i + 1] === '/') {\n            const end = html.indexOf('>', i + 2);\n            if (end === -1) { out += html.slice(i); break; }\n            out += html.slice(i, end + 1);\n            i = end + 1;\n            continue;\n        }\n\n        //  \n        let j = i + 1;\n        //    \"<\"\n        while (j < n && /\\s/.test(html[j])) j++;\n        const nameStart = j;\n        while (j < n && /[A-Za-z0-9:-]/.test(html[j])) j++;\n        const tagName = html.slice(nameStart, j).toLowerCase();\n        //      \n        let k = j;\n        let quote: '\"' | \"'\" | null = null;\n        while (k < n) {\n            const c = html[k];\n            if (quote) {\n                if (c === quote) quote = null;\n                k++;\n            } else {\n                if (c === '\"' || c === \"'\") { quote = c as '\"' | \"'\"; k++; }\n                else if (c === '>') { break; }\n                else { k++; }\n            }\n        }\n        if (k >= n) { out += html.slice(i); break; }\n        const rawTag = html.slice(i, k + 1); //  '>'\n\n        const shouldNormalize =\n            scope === 'all' ||\n            (scope === 'input-only' && tagName === 'input') ||\n            (scope === 'void-only' && VOID.has(tagName));\n\n        if (!shouldNormalize) {\n            out += rawTag;\n            i = k + 1;\n            continue;\n        }\n\n        //     ( )\n        let res = '';\n        let q: '\"' | \"'\" | null = null;\n        let ws = false;\n        for (let p = 0; p < rawTag.length; p++) {\n            const c = rawTag[p];\n            if (q) {\n                res += c;\n                if (c === q) q = null;\n                continue;\n            }\n            if (c === '\"' || c === \"'\") { q = c as '\"' | \"'\"; res += c; ws = false; continue; }\n            if (c === '\\n' || c === '\\r' || c === '\\t' || c === ' ') {\n                if (!ws) { res += ' '; ws = true; }\n                continue;\n            }\n            res += c;\n            ws = false;\n        }\n        //    '>'  '/>'\n        res = res.replace(/\\s*(\\/?)\\s*>$/, '$1>');\n\n        out += res;\n        i = k + 1;\n    }\n\n    return out;\n}\n\n//\nexport function collapseInterTagWhitespaceSmart(\n    html: string,\n    { preserveCommentGaps = true } = {}\n): string {\n    if (!html || typeof html !== 'string') return html;\n\n    if (!preserveCommentGaps) {\n        //  \n        return html.replace(/>\\s+</g, '><');\n    }\n\n    //  - \n    const SENT = '\\u0001';\n\n    let s = html;\n\n    // 1)  -   :\n    //    <!-- -->  <!-- -->,  <!-- -->  <tag,  <tag>  <!-- -->\n    //    [^\\S\\r\\n]+     (  )\n    s = s\n        .replace(/-->([^\\S\\r\\n]+)<!--/g, `-->${SENT}<!--`)\n        .replace(/-->([^\\S\\r\\n]+)</g, `-->${SENT}<`)\n        .replace(/>([^\\S\\r\\n]+)<!--/g, `>${SENT}<!--`);\n\n    // 2)     (   )\n    s = s.replace(/>\\s+</g, '><');\n\n    // 3)    ,   \n    s = s.replace(new RegExp(SENT, 'g'), ' ');\n\n    return s;\n}\n\n//\nexport function cleanupInterTagWhitespaceAndIndent(\n    html: string,\n    {\n        normalizeIndent = true,          //    \n        ignoreFirstLine = true,          //      \n        tabWidth = 4,                    //    \n        alignStep = 'auto' as 'auto' | 1 | 2 | 4, //  2n/4n/1n\n        quantize = 'none' as 'none' | 'floor' | 'nearest' | 'ceil', //   \n    } = {}\n): string {\n    if (!html || typeof html !== 'string' || html.indexOf('<') === -1) return html;\n    html = html?.trim?.();\n\n    //\n    const placeholders: string[] = [];\n    const protectedHtml = html.replace(\n        /<(pre|textarea|script|style)\\b[\\s\\S]*?<\\/\\1>/gi,\n        (m) => {\n            const i = placeholders.push(m) - 1;\n            return `\\u0000${i}\\u0000`;\n        }\n    );\n\n    const eol = pickEOL(protectedHtml);\n    const lines = protectedHtml.split(/\\r\\n|\\n|\\r/);\n    const start = ignoreFirstLine ? 1 : 0;\n\n    // 1)     \n    const { min, step: autoStep } = detectIndentStep(protectedHtml, { ignoreFirstLine, tabWidth });\n\n    // 2) Dedent:    \n    if (normalizeIndent && min > 0) {\n        for (let i = start; i < lines.length; i++) {\n            const ln = lines[i];\n            if (ln.trim() === '') continue;\n            lines[i] = stripIndentColumns(ln, min, tabWidth);\n        }\n    }\n\n    // 3)    2n/4n  \n    let step = alignStep === 'auto' ? autoStep : alignStep;\n    if (quantize !== 'none' && step > 1) {\n        for (let i = start; i < lines.length; i++) {\n            const ln = lines[i];\n            if (ln.trim() === '') continue;\n            lines[i] = adjustIndentToGrid(ln, step, quantize, tabWidth);\n        }\n    }\n\n    // 4)     / \n    let working = lines.join(eol);\n\n    // 5) ...dedent/\n    working = normalizeStartTagWhitespace(working, { scope: 'void-only' });\n\n    // 6)   \n    working = collapseInterTagWhitespaceSmart(working);\n\n    // 7)   \n    const cleaned = working.replace(/\\u0000(\\d+)\\u0000/g, (_, i) => placeholders[+i]);\n    return cleaned?.trim?.();\n}\n\n//\nexport function checkInsideTagBlock(contextParts: string[], ...str: string[]) {\n    const current = str?.[0] ?? \"\";\n    const idx = contextParts.indexOf(current);\n    // Fallback simple heuristic if index not found\n    if (idx < 0) {\n        const tail = (str?.join?.(\"\") ?? \"\");\n        return /<([A-Za-z\\/!?])[\\w\\W]*$/.test(tail) && !/>[\\w\\W]*$/.test(tail);\n    }\n\n    // Scan all static parts up to and including the current part\n    const prefix = contextParts.slice(0, idx + 1).join(\"\");\n    let inTag = false, inSingle = false, inDouble = false;\n\n    for (let i = 0; i < prefix.length; i++) {\n        const ch = prefix[i];\n        const next = prefix[i + 1] ?? '';\n\n        if (!inTag) {\n            if (ch === '<') {\n                // Treat as a tag only if followed by a likely opener: letter, '/', '!', or '?'\n                if (/[A-Za-z\\/!?]/.test(next)) {\n                    inTag = true; inSingle = false; inDouble = false;\n                }\n            }\n            continue;\n        }\n\n        if (!inSingle && !inDouble) {\n            if (ch === '\"') { inDouble = true; continue; }\n            if (ch === \"'\") { inSingle = true; continue; }\n            if (ch === '>') { inTag = false; continue; }\n        } else if (inDouble) {\n            if (ch === '\"') { inDouble = false; continue; }\n        } else if (inSingle) {\n            if (ch === \"'\") { inSingle = false; continue; }\n        }\n    }\n\n    return inTag;\n}\n","import { bindEvent, hasValue, isPrimitive } from \"fest/core\";\nimport { getNode } from \"../context/Utils\";\nimport { E } from \"./Bindings\";\nimport { M } from \"./Mapped\";\nimport { isElement } from \"fest/dom\";\nimport { checkInsideTagBlock, cleanupInterTagWhitespaceAndIndent } from \"./Normalizer\";\n\n//\nconst EMap = new WeakMap(), parseTag = (str) => { const match = str.match(/^([a-zA-Z0-9\\-]+)?(?:#([a-zA-Z0-9\\-_]+))?((?:\\.[a-zA-Z0-9\\-_]+)*)$/); if (!match) return { tag: str, id: null, className: null }; const [, tag = 'div', id, classStr] = match; const className = classStr ? classStr.replace(/\\./g, ' ').trim() : null; return { tag, id, className }; }\nconst preserveWhitespaceTags = new Set([\"PRE\", \"TEXTAREA\", \"SCRIPT\", \"STYLE\"]);\n\n//\nconst parseIndex = (value: string | any | null): number => {\n    if (typeof value != \"string\" || !value?.trim?.()) return -1;\n    const match = value.match(/^#{(\\d+)}$/);\n    return match ? parseInt(match?.[1] ?? \"-1\") : -1;\n}\n\n//\nconst connectElement = (el: HTMLElement | null, atb: any[], psh: any[], mapped: WeakMap<HTMLElement, any>) => {\n    if (!el) return el;\n    if (el != null) {\n        const entriesIdc: [string, number][] = [];\n        const addEntryIfExists = (name: string): [string, any] => {\n            const attr = Array.from(el?.attributes || []).find((attr) => (attr.name == name && attr.value?.includes?.(\"#{\")));\n            if (attr) {\n                const pair: [string, any] = [name, parseIndex(attr?.value) ?? -1];\n                entriesIdc.push(pair); return pair;\n            }\n            return [name, -1];\n        }\n\n        //\n        const specialEntryNames = [\"dataset\", \"style\", \"classList\", \"visible\", \"aria\", \"value\", \"ref\"];\n        specialEntryNames.forEach((name) => addEntryIfExists(name));\n\n        //\n        const makeEntries = (startsWith: string[] | string, except: string[] | string): [string, any][] => {\n            const entries: [string, any][] = [];\n            for (const attr of Array.from(el?.attributes || [])) {\n                // needs review startsWith with \"\" i.e. attributes itself, just #{}\n                const allowedNoPrefix: boolean = (Array.isArray(startsWith) ? startsWith?.some?.((str: string)=>str==\"\") : (startsWith == \"\"));\n                const prefix: string = (Array.isArray(startsWith) ? startsWith.find((start) => attr.name?.startsWith?.(start)) : (startsWith = attr.name?.startsWith?.(startsWith) ? startsWith : \"\") as string) ?? \"\";\n                const trueAttributeName = attr.name.trim()?.replace?.(prefix, \"\");\n                const isPlaceholder = attr.value?.includes?.(\"#{\") && attr.value?.includes?.(\"}\");\n                const atbIndex = parseIndex(attr?.value);\n                const excepted: boolean = (Array.isArray(except) ? except?.some?.((str: string)=>trueAttributeName?.startsWith?.(str)) : (except == trueAttributeName));\n\n                if (isPlaceholder && ((prefix == \"\" && allowedNoPrefix) || prefix != \"\") && atbIndex >= 0 && !excepted) {\n                    entries.push([trueAttributeName, atbIndex]);\n                }\n            }\n            return entries;\n        }\n\n        //\n        const makeCumulativeEntries = (startsWith: string[] | string, except: string[] | string, specific: string[] | string = \"\") => {\n            const entriesMap = new Map<string, any[]>();\n            for (const attr of Array.from(el?.attributes || [])) {\n                const allowedNoPrefix: boolean = (Array.isArray(startsWith) ? startsWith?.some?.((str: string)=>str==\"\") : (startsWith == \"\"));\n                const prefix: string = (Array.isArray(startsWith) ? startsWith.find((start) => attr.name?.startsWith?.(start)) : (startsWith = attr.name?.startsWith?.(startsWith) ? startsWith : \"\") as string) ?? \"\";\n                const trueAttributeName = attr.name.trim()?.replace?.(prefix, \"\");\n                const isPlaceholder = attr.value?.includes?.(\"#{\") && attr.value?.includes?.(\"}\");\n                const atbIndex = parseIndex(attr?.value) ?? -1;\n\n                const excepted: boolean = (Array.isArray(except) ? except?.some?.((str: string)=>trueAttributeName?.startsWith?.(str)) : (except == trueAttributeName));\n                const isSpecific: boolean = (Array.isArray(specific) ? specific?.some?.((str: string)=>attr.name === str) : (attr.name === specific)) && specific !== \"\";\n\n                if (isPlaceholder && (((prefix == \"\" && allowedNoPrefix) || prefix != \"\") || isSpecific) && atbIndex >= 0 && !excepted) {\n                    const key = isSpecific ? attr.name : trueAttributeName;\n                    if (!entriesMap.has(key)) {\n                        entriesMap.set(key, []);\n                    }\n                    entriesMap.get(key)?.push(atbIndex);\n                }\n            }\n            return Array.from(entriesMap.entries());\n        }\n\n        //\n        let attributesEntries: [string, any][] = makeEntries([\"attr:\", \"\"], [\"ref\"]);\n        let propertiesEntries: [string, any][] = makeEntries([\"prop:\"], []);\n        let onEntries: [string, any[]][] = makeCumulativeEntries([\"on:\", \"@\"], [], \"\");\n        let refEntries: [string, any[]][] = makeCumulativeEntries([\"ref:\"], [], [\"ref\"]);\n\n        // remove entries that are already in properties or on\n        //attributesEntries = attributesEntries?.filter?.((pair) => !(propertiesEntries?.some?.((p) => p[0] == pair[0]) || onEntries?.some?.((p) => p[0] == pair[0]) || refEntries?.some?.((p) => p[0] == pair[0]))) ?? [];\n\n        //\n        const bindings: any = Object.fromEntries(entriesIdc?.filter?.((pair) => pair[1] >= 0)?.map?.((pair) => [pair[0], atb?.[pair[1]] ?? null]) ?? []);\n        bindings.attributes = Object.fromEntries(attributesEntries?.filter?.((pair) => pair[1] >= 0)?.map?.((pair) => [pair[0], atb?.[pair[1]] ?? null]) ?? []);\n        bindings.properties = Object.fromEntries(propertiesEntries?.filter?.((pair) => pair[1] >= 0)?.map?.((pair) => [pair[0], atb?.[pair[1]] ?? null]) ?? []);\n        bindings.on = Object.fromEntries(onEntries?.filter?.((pair) => pair[1]?.some?.((idx: number) => idx >= 0))?.map?.((pair) => [pair[0], pair[1]?.map?.((idx: number) => atb?.[idx]).filter((v: any) => v != null)]) ?? []);\n\n        //\n        const refIndex = entriesIdc?.find?.((pair) => (pair[0] == \"ref\" && pair[1] >= 0))?.[1];\n        if (refIndex != null && refIndex >= 0) {\n            const ref = atb?.[refIndex];\n            if (typeof ref == \"function\") { ref?.(el); } else if (ref != null && typeof ref == \"object\") { ref.value = el; }\n        }\n\n        //\n        refEntries?.forEach?.((pair: [string, number[]]) => {\n            const handlers: any[] = pair?.[1]\n                ?.filter?.((idx: number) => idx != null && idx >= 0)\n                ?.map?.((idx: number) => atb?.[idx])\n                ?.filter?.((v: any) => v != null);\n\n            //\n            handlers?.forEach?.((ref: any) => {\n                if (typeof ref == \"function\") { ref?.(el); } else if (ref != null && typeof ref == \"object\") { ref.value = el; }\n            });\n        });\n\n        //\n        const clearPlaceholdersFromAttributesOfElement = (el: HTMLElement | null)=>{\n            if (el == null) return;\n\n            //\n            const attributeIsInRegistry = (name: string) => {\n                return attributesEntries?.some?.((pair) => pair[0] == name) || name?.startsWith?.(\"ref:\") || name == \"ref\";\n            }\n\n            // needs by splice or remove, DOM element.attributes is a live collection\n            for (const attr of Array.from(el?.attributes || [])) {\n                if ( // relaxed syntax for placeholder, if in registry\n                    (attr.value?.includes?.(\"#{\") && attr.value?.includes?.(\"}\") && attributeIsInRegistry(attr.name as string)) ||\n\n                    // stricter check of placeholder, if none in registry\n                    attr.value?.startsWith?.(\"#{\") && attr.value?.endsWith?.(\"}\") ||\n\n                    // if attribute name contains colon, it is a property\n                    attr.name?.includes?.(\":\") || attr.name?.includes?.(\"ref:\") || attr.name == \"ref\"\n                ) { el?.removeAttribute?.(attr.name as string); }\n            };\n        }\n\n        //\n        clearPlaceholdersFromAttributesOfElement(el);\n        if (!EMap?.has?.(el)) { EMap?.set?.(el, E(el, bindings)); };\n    };\n    return EMap?.get?.(el) ?? el;\n}\n\n//\nconst linearBuilder = (strings, ...values) => {\n    const nodes: any[] = [];\n    for (let i = 0; i < strings?.length; i++) {\n        const str = strings?.[i];\n        const val = values?.[i];\n        nodes.push(H(str));\n        nodes.push(val);\n    }\n    if (nodes?.length <= 1) return getNode(nodes?.[0], null, 0);\n\n    // TODO! fix parent node bound support\n    const fragment = document.createDocumentFragment();\n    fragment.append(...nodes?.filter?.((nd) => (nd != null))?.map?.((en, i: number) => getNode(en, null, i))?.filter?.((nd) => (nd != null)));\n    return fragment;\n}\n\n//\nexport function html(strings, ...values) {\n    if (strings?.at?.(0)?.trim?.()?.startsWith?.(\"<\") && strings?.at?.(-1)?.trim?.()?.endsWith?.(\">\")) {\n        return htmlBuilder({ createElement: null })(strings, ...values);\n    }\n    return linearBuilder(strings, ...values);\n};\n\n//\nconst isValidParent = (parent: Node) => {\n    return (parent != null && parent instanceof HTMLElement && !(parent instanceof DocumentFragment || (parent instanceof HTMLBodyElement && parent != document.body)));\n}\n\n//\nconst replaceNode = (parent: Node, node: Node, el: any) => {\n    if (el != null) { el.boundParent = parent; }\n\n    //\n    let newNode = getNode(el, null, -1, parent);\n    if (isElement(newNode)) {\n        if (newNode?.parentNode != parent && !newNode?.contains?.(parent) && newNode != null) {\n            (node as any)?.replaceWith?.((hasValue(newNode) && (typeof newNode?.value == \"object\" || typeof newNode?.value == \"function\") && isElement(newNode?.value)) ? newNode?.value : newNode);\n        }\n    } else\n    { (node as any)?.remove?.(); }\n}\n\n//\nexport function htmlBuilder({ createElement = null } = {}) {\n    return function (strings, ...values) {\n        let parts: string[] = [];\n        const psh: any[] = [], atb: any[] = [];\n        for (let i = 0; i < strings.length; i++) {\n            parts.push(strings?.[i] || \"\");\n            if (i < values.length) {\n                if (strings[i]?.trim()?.endsWith?.(\"<\")) {\n                    const dat = parseTag(values?.[i]);\n                    parts.push((dat.tag || \"div\"));\n                    if (dat.id) parts.push(` id=\"${dat.id}\"`);\n                    if (dat.className) parts.push(` class=\"${dat.className}\"`);\n                } else {\n                    // sequences such as inside of `<...>`\n                    const $inTagOpen = checkInsideTagBlock(strings, strings?.[i] || \"\", strings?.[i + 1] || \"\");\n                    const $afterEquals = /[\\w:\\-\\.\\]]\\s*=\\s*$/.test(strings[i]?.trim?.() ?? \"\") || strings[i]?.trim?.()?.endsWith?.(\"=\");\n\n                    //\n                    const $isQuoteBegin = strings[i]?.trim?.()?.match?.(/['\"]$/);\n                    const $isQuoteEnd = strings[i + 1]?.trim?.()?.match?.(/^['\"]/) ?? $isQuoteBegin;\n\n                    //\n                    const $betweenQuotes = ($isQuoteBegin && $isQuoteEnd);\n                    const $attributePattern = $afterEquals;\n\n                    //\n                    const isAttr = ($attributePattern || $betweenQuotes) && $inTagOpen;\n                    if (isAttr) {\n                        const $needsToQuoteWrap = ($attributePattern && !($betweenQuotes));\n                        const ati = atb.length;\n                        parts.push((typeof values?.[i] == \"string\" ? values?.[i]?.trim?.() != \"\" : values?.[i] != null) ? (($needsToQuoteWrap ? `\"#{${ati}}\"` : `#{${ati}}`)) : \"\");\n                        atb.push(values?.[i]);\n                    } else\n                    if (!$inTagOpen) {\n                        const psi = psh.length;\n                        parts.push((typeof values?.[i] == \"string\" ? values?.[i]?.trim?.() != \"\" : values?.[i] != null) ? (isPrimitive(values?.[i]) ? String(values?.[i])?.trim?.() : `<!--o:${psi}-->`) : \"\");\n                        psh.push(values?.[i]);\n                    }\n                }\n            }\n        }\n\n        //\n        const sourceCode = cleanupInterTagWhitespaceAndIndent(parts.join(\"\").trim());\n        const mapped = new WeakMap(), parser = new DOMParser(), doc: any = parser.parseFromString(sourceCode, \"text/html\");\n\n        //\n        const isTemplate = doc instanceof HTMLTemplateElement || doc?.matches?.(\"template\");\n        const sources: any = (isTemplate ? doc : doc.querySelector(\"template\"))?.content ?? (doc.body ?? doc);\n\n        //\n        const frag = document.createDocumentFragment();\n        const bucket = Array.from(sources.childNodes)?.filter((e: any) => { return e instanceof Node; }).map((node: any) => {\n            if (!isValidParent(node?.parentNode) && node?.parentNode != frag) {\n                node?.remove?.();\n                if (node != null) { frag?.append?.(node); };\n            }\n            return node;\n        });\n\n        //\n        let walkedNodes: any[] = [];\n\n        //\n        bucket.forEach((nodeSet: any) => {\n            const walker: any = nodeSet ? document.createTreeWalker(nodeSet, NodeFilter.SHOW_ALL, null) : null;\n            do {\n                const node: any = walker?.currentNode;\n                walkedNodes.push(node);\n            } while (walker?.nextNode?.());\n        });\n\n        //\n        walkedNodes?.filter?.((node: any) => node?.nodeType == Node.COMMENT_NODE)?.forEach?.((node: any) => {\n            if (node?.nodeValue?.trim?.()?.includes?.(\"o:\") && Number.isInteger(parseInt(node?.nodeValue?.trim?.()?.slice?.(2) ?? \"-1\"))) {\n                let el: any = psh?.[parseInt(node?.nodeValue?.trim?.()?.slice?.(2) ?? \"-1\") ?? -1];\n\n                // make iteratable array and set\n                if (el == null || el === undefined || (typeof el == \"string\" ? el : null)?.trim?.() == \"\") {\n                    node?.remove?.();\n                } else {\n                    const $parent = node?.parentNode;\n                    if (Array.isArray(el) || el instanceof Map || el instanceof Set) {\n                        replaceNode?.($parent, node, el = M(el, null, $parent));\n                    } else\n                    if (el != null) {\n                        replaceNode?.($parent, node, el);\n                    }\n                }\n            }\n\n            // remove comment node if it is connected\n            if (node?.isConnected) {\n                node?.remove?.();\n            }\n        });\n\n        //\n        walkedNodes?.filter((node: any) => node.nodeType == Node.ELEMENT_NODE)?.map?.((node) => {\n            connectElement(node as HTMLElement, atb, psh, mapped);\n        });\n\n        // Final whitespace cleanup to ensure :empty works even after dynamic insertions\n        return Array.from(frag?.childNodes)?.length > 1 ? frag : frag?.childNodes?.[0];\n    };\n}\n\n//\nexport const H = (str: any, ...values: any[]) => {\n    //if (typeof str == \"object\" && hasValue(str)) return C(str);\n    if (typeof str == \"string\") {\n        if (str?.trim?.()?.startsWith?.(\"<\") && str?.trim?.()?.endsWith?.(\">\")) {\n            const parser = new DOMParser(), doc = parser.parseFromString(cleanupInterTagWhitespaceAndIndent(str?.trim?.()), \"text/html\");\n            const basis = doc.querySelector(\"template\")?.content ?? doc.body;\n            // Normalize and clean whitespace-only text nodes between tags\n            if (basis instanceof HTMLBodyElement) {\n                const frag = document.createDocumentFragment();\n                frag.append(...Array.from(basis.childNodes ?? []));\n                return (Array.from(frag.childNodes)?.length > 1 ? frag : frag?.childNodes?.[0]);\n            }\n            if (basis instanceof DocumentFragment) { return basis; }\n            if (basis?.childNodes?.length > 1) { const frag = document.createDocumentFragment(); frag.append(...Array.from(basis?.childNodes ?? [])); return frag; }\n            return basis?.childNodes?.[0] ?? (new Text(str));\n        }\n        return new Text(str);\n    } else\n    if (typeof str == \"function\") { return H(str?.()); } else\n    if (Array.isArray(str) && values) { return html(str, ...values); } else\n    if (str instanceof Node) { return str; };\n    return getNode(str);\n}\n\n//\nexport default H;\n","import { deref, isNotEqual, toRef, unref } from \"fest/core\";\nimport { Q } from \"../node/Queried\";\nimport { makeRAFCycle, setProperty } from \"fest/dom\";\nimport { affected } from \"fest/object\";\n\n//\nexport const checkboxCtrl = (ref) => { ref = toRef(ref); return (ev) => { const $ref = unref(ref); if ($ref != null) { $ref.value = Q(`input[type=\"radio\"], input[type=\"checkbox\"], input:checked`, ev?.target)?.checked ?? $ref?.value; } } }\nexport const numberCtrl = (ref) => { ref = toRef(ref); return (ev) => { const $ref = unref(ref); if ($ref != null && isNotEqual($ref?.value, ev?.target?.valueAsNumber)) { $ref.value = Number(Q(\"input\", ev?.target)?.valueAsNumber || 0) ?? 0; } } }\nexport const valueCtrl = (ref) => { ref = toRef(ref); return (ev) => { const $ref = unref(ref); if ($ref != null && isNotEqual(ev?.target?.value, $ref?.value)) { $ref.value = (Q(\"input\", ev?.target)?.value ?? $ref?.value) || \"\"; } } }\n\n//\nexport const radioCtrl = (ref, name) => {\n    ref = toRef(ref);\n    return (ev) => {\n        let $ref = unref(ref);\n        const selector = `input[name=\"${name}\"]:checked`;\n        if ($ref) { $ref.value = (ev?.target?.matches?.(selector) ? ev?.target : ev?.target?.querySelector?.(selector))?.value ?? $ref.value; }\n    }\n}\n\n//\nexport const controlVisible = (source: HTMLElement, coef: any = null)=>{\n    if (!source) return; const target = toRef(source), wk = toRef(coef);\n    const renderCb = ()=>{\n        const tg = deref(target); if (tg) {\n            const val = deref(wk)?.value || 0, hidden = val < 0.001 || val > 0.999;\n            setProperty(tg, \"visibility\", hidden ? \"collapse\" : \"visible\");\n            setProperty(tg?.querySelector?.(\"*\"), \"pointer-events\", hidden ? \"none\" : \"auto\");\n        }\n    };\n    return affected(coef, (val: any)=>makeRAFCycle()?.schedule(renderCb))\n}\n","import { observe, propRef, affected } from \"fest/object\";\nimport { addEvent, hash } from \"fest/dom\";\nimport { isPrimitive } from \"fest/core\";\nimport { getIgnoreNextPopState, setIgnoreNextPopState } from \"./BackNavigation\";\n\n//\nexport type NavigationAction = \"PUSH\" | \"REPLACE\" | \"POP\" | \"BACK\" | \"FORWARD\" | \"MANUAL\";\n\n//\nexport interface IHistoryState {\n    index: number;\n    depth: number;\n    action: NavigationAction;\n    view: string;\n    timestamp: number;\n    [key: string]: any;\n}\n\n//\nconst STATE_KEY = \"rs-nav-ctx\";\nconst STACK_KEY = \"rs-nav-stack\";\n\n//\nexport interface IHistoryManager {\n    index: number;\n    length: number;\n    action: NavigationAction;\n    view: string;\n    canBack: boolean;\n    canForward: boolean;\n    entries: IHistoryState[];\n}\n\n// Global reactive state for history\nexport const historyState = observe({\n    index: 0,\n    length: 0,\n    action: \"MANUAL\" as NavigationAction,\n    view: \"\",\n    canBack: false,\n    canForward: false,\n    entries: [] as IHistoryState[]\n}) as unknown as IHistoryManager;\n\n// Helper to get current state safely\nconst getCurrentState = (): Partial<IHistoryState> => {\n    try {\n        return history.state?.[STATE_KEY] || historyState?.entries?.[historyState?.index] || {};\n    } catch (e) {\n        return {};\n    }\n};\n\n// Helper to save/load stack\nconst saveStack = () => {\n    try {\n        sessionStorage.setItem(STACK_KEY, JSON.stringify(historyState?.entries));\n    } catch (e) { }\n};\n\nconst loadStack = (): IHistoryState[] => {\n    try {\n        const stored = sessionStorage.getItem(STACK_KEY);\n        return stored ? JSON.parse(stored) : [];\n    } catch (e) {\n        return [];\n    }\n};\n\n// Helper to merge state\nconst mergeState = (newState: any, existingData?: any) => {\n    try {\n        const current = existingData !== undefined ? existingData : (history?.state || {});\n        if (isPrimitive(current) && current !== null) return { value: current, [STATE_KEY]: newState };\n        if (current === null) return { [STATE_KEY]: newState };\n        return { ...current, [STATE_KEY]: newState };\n    } catch (e) {\n        return { [STATE_KEY]: newState };\n    }\n};\n\n//\nlet initialized = false;\n\n// Patch pushState and replaceState\nexport const originalPush = typeof history != \"undefined\" ? history.pushState.bind(history) : undefined;\nexport const originalReplace = typeof history != \"undefined\" ? history.replaceState.bind(history) : undefined;\nexport const originalGo = typeof history != \"undefined\" ? history.go.bind(history) : undefined;\nexport const originalForward = typeof history != \"undefined\" ? history.forward.bind(history) : undefined;\nexport const originalBack = typeof history != \"undefined\" ? history.back.bind(history) : undefined;\n\n// Initialize history tracking\nexport const initHistory = (initialView: string = \"\") => {\n    if (initialized) return;\n    initialized = true;\n\n    //\n    const current = getCurrentState();\n    const view = initialView || location.hash || \"#\";\n\n    // Load or init stack\n    let stack = loadStack();\n    const idx = current.index || 0;\n\n    // Validate stack against current state\n    if (stack && (stack?.length === 0 || idx >= stack?.length) /* || stack[idx]?.view !== (current.view || view) */) {\n        // If stack is invalid or empty, we try to reconstruct or reset\n        // For a new session, we might want to start fresh or trust the stack if it seems plausible\n        // But if history.state has an index that doesn't match stack, trust history.state (browser truth)\n        if (stack.length <= idx) {\n            // Stack missing or too short. Reset/Expand\n            stack[idx] = {\n                index: idx,\n                depth: history.length,\n                action: current?.action || \"REPLACE\",\n                view: view,\n                timestamp: Date.now()\n            };\n        }\n    }\n    historyState.entries = stack;\n\n    // Set initial state if needed\n    if (!current.timestamp) {\n        const state: IHistoryState = {\n            index: idx,\n            depth: history.length,\n            action: \"REPLACE\",\n            view: view,\n            timestamp: Date.now()\n        };\n        history?.replaceState?.(mergeState(state), \"\", location.hash);\n\n        // Update stack\n        if (historyState?.entries) {\n            historyState.entries[idx] = state;\n        }\n        saveStack();\n    } else {\n        // Sync reactive state with existing history state\n        historyState.index = current.index || 0;\n        historyState.view = current.view || view;\n\n        // Ensure stack matches current\n        if (!historyState?.entries?.[historyState?.index]) {\n             historyState.entries[historyState.index] = current as IHistoryState;\n             saveStack();\n        }\n    }\n\n    updateReactiveState(getCurrentState()?.action || \"REPLACE\", view);\n\n    //\n    history.go = (delta = 0) => {\n        const currentState = getCurrentState();\n        currentState.index = Math.max(0, Math.min(historyState.length, (currentState.index || 0) + delta));\n        const existsState = historyState.entries[currentState.index];\n        Object.assign(currentState, existsState || {});\n\n        //\n        setIgnoreNextPopState(true);\n        const result = originalGo?.(delta);\n        setTimeout(() => { setIgnoreNextPopState(false); }, 0);\n\n        //\n        updateReactiveState((currentState?.action || \"POP\") || (delta > 0 ? \"FORWARD\" : \"BACK\") as any, currentState?.view);\n        return result;\n    };\n\n    history.back = () => { return history.go(-1); };\n    history.forward = () => { return history.go(1); };\n    history.pushState = (data: any, unused: string, url?: string | URL | null) => {\n        const currentState = getCurrentState();\n        const nextIndex = (currentState.index || 0) + 1;\n\n        const newState: IHistoryState = {\n            index: nextIndex,\n            depth: history.length + 1,\n            action: \"PUSH\",\n            view: url ? String(url) : (currentState.view || \"\"),\n            timestamp: Date.now()\n        };\n\n        const result = originalPush?.(mergeState(newState, data), unused, url);\n\n        // Update stack: wipe forward history\n        historyState.entries = historyState?.entries?.slice?.(0, nextIndex);\n        historyState.entries?.push?.(newState);\n        saveStack();\n\n        updateReactiveState(\"PUSH\", newState.view);\n        return result;\n    };\n\n    //\n    history.replaceState = (data: any, unused: string, url?: string | URL | null) => {\n        const currentState = getCurrentState();\n        const index = currentState?.index || 0;\n\n        //\n        const newState: IHistoryState = {\n            ...currentState,\n            index: index,\n            depth: history.length,\n            action: \"REPLACE\",\n            view: url ? String(url) : (currentState?.view || \"\"),\n            timestamp: Date.now()\n        };\n\n        //\n        const result = originalReplace?.(mergeState(newState, data), unused, url);\n\n        // Update stack: replace current\n        if (historyState?.entries) {\n            historyState.entries[index] = newState;\n            historyState.entries[historyState.index].view = url ? String(url) : (currentState?.view || \"\");\n        }\n\n        //\n        saveStack();\n        updateReactiveState(\"REPLACE\", newState.view);\n        return result;\n    };\n\n    // Listen for popstate\n    addEvent(window, \"popstate\", (ev) => {\n        const state = ev.state?.[STATE_KEY] as IHistoryState;\n        const currentIndex = historyState.index ?? 0;\n\n        if (!state) {\n            // Likely a hash change or external navigation\n            // We treat it as a PUSH for now if we can't determine otherwise\n            // But if we have entries, we might check if hash matches?\n            // For now, keep existing logic\n            const newState: IHistoryState = {\n                index: currentIndex + 1,\n                depth: history.length,\n                action: \"PUSH\",\n                view: location.hash || \"#\",\n                timestamp: Date.now()\n            };\n\n            // Inject state but preserve any existing state if present (unlikely if ev.state is null)\n            history.replaceState(mergeState(newState, ev.state), \"\", location.hash);\n\n            // Update stack\n            historyState.entries = historyState?.entries?.slice?.(0, newState.index);\n            historyState?.entries?.push?.(newState);\n            saveStack();\n\n            updateReactiveState(\"PUSH\", newState.view);\n            return;\n        } else {\n            const newIndex = state?.index ?? 0;\n            let action: NavigationAction = \"POP\";\n            if (newIndex < currentIndex) {\n                action = \"BACK\";\n            } else if (newIndex > currentIndex) {\n                action = \"FORWARD\";\n            }\n            updateReactiveState(action, state?.view || location.hash);\n        }\n    });\n\n    // Listen for hashchange as fallback/augment\n    // This ensures we catch changes that might bypass popstate in some scenarios\n    // or when manual location.hash assignment occurs without history API\n    addEvent(window, \"hashchange\", (ev) => {\n        if (getIgnoreNextPopState()) return;\n\n        const currentHash = location.hash || \"#\";\n        // Only update if historyState hasn't caught up yet (deduplication with popstate)\n        if (historyState.view !== currentHash) {\n\n            // prevent hatching popstate event\n            updateReactiveState(\"PUSH\", currentHash);\n        }\n    });\n};\n\n//\nconst updateReactiveState = (action?: NavigationAction, view?: string) => {\n    const current = getCurrentState();\n    historyState.index = current.index || 0;\n    historyState.length = history.length;\n    historyState.action = action || \"POP\";\n    historyState.view = view || current.view || location.hash;\n    historyState.canBack = historyState.index > 0;\n};\n\n// Navigation helpers\nexport const navigate = (view: string, replace: boolean = false) => {\n    const hash = view.startsWith(\"#\") ? view : `#${view}`;\n\n    // Optimization: if replacing, check if we are just going back to previous view\n    if (replace && historyState?.index > 0) {\n        const prev = historyState?.entries?.[historyState?.index - 1];\n        if (prev && prev.view === hash) {\n            // prevent hatching popstate event\n            history.back();\n            return;\n        }\n    }\n\n    // when doing navigation, stop hatching popstate event\n    if (replace) {\n        // don't do anything if the current view is the same as the new view\n        if (historyState?.entries?.[historyState.index]?.view !== hash || historyState?.entries?.[historyState.index]?.view) {\n            history?.replaceState?.(null, \"\", hash);\n        }\n    } else {\n        history?.pushState?.(null, \"\", hash);\n    }\n};\n\n//\nexport const historyViewRef = (initialValue: string = `#${location.hash?.replace?.(/^#/, \"\") || \"home\"}`, options: { ignoreBack?: boolean, withoutHashPrefix?: boolean } = {}) => {\n    const internal = observe({ value: initialValue }) as unknown as { value: string };\n\n    // Prevent circular updates between history and internal value\n    let isUpdatingFromHistory = false;\n    let isUpdatingFromInternal = false;\n\n    // Sync from history to ref\n    // The historyState acts as a bridge:\n    // 1. User Action (Back/Forward) -> Window 'popstate' -> initHistory listener -> historyState -> This Subscription\n    // 2. User Action (Hash Change) -> Window 'hashchange' -> initHistory listener -> historyState -> This Subscription\n    affected([historyState, \"view\"], (view: string) => {\n        if (isUpdatingFromInternal) return; // Prevent circular update\n\n        if (options.ignoreBack && historyState.action === \"BACK\") {\n            return;\n        }\n\n        let nextValue = view;\n        if (options.withoutHashPrefix) {\n            nextValue = view.replace(/^#/, \"\");\n        }\n\n        if (internal.value !== nextValue) {\n            isUpdatingFromHistory = true;\n            internal.value = nextValue;\n            isUpdatingFromHistory = false;\n        }\n    });\n\n    // Sync from ref to history\n    // Application Action (Programmatic) -> ref.value change -> This Subscription -> navigate() -> pushState() -> historyState\n    affected([internal, \"value\"], (val: string) => {\n        if (isUpdatingFromHistory) return; // Prevent circular update\n\n        let viewToNavigate = val;\n        if (options.withoutHashPrefix && !val.startsWith(\"#\")) {\n            viewToNavigate = `#${val}`;\n        }\n\n        if (historyState.view !== viewToNavigate) {\n            isUpdatingFromInternal = true;\n            // This is a programmatic change, so we PUSH\n            navigate(viewToNavigate);\n            isUpdatingFromInternal = false;\n        }\n    });\n\n    // Proxy to return the ref but with special behavior if needed\n    return internal;\n};\n","/**\n * BackNavigation - Priority-based back gesture/button navigation manager\n *\n * Handles mobile/browser back gestures/buttons for closing:\n * - Context menus (highest priority)\n * - Modal dialogs\n * - Sidebars/overlays\n * - Tasks/views (lowest priority)\n *\n * Usage:\n * 1. Register closable elements/callbacks with priority\n * 2. On back navigation, closes the highest priority active element first\n * 3. Supports custom close handlers and visibility checks\n */\n\nimport { addEvent } from \"fest/dom\";\nimport { historyState, initHistory, originalForward } from \"./History\";\n\n//\nexport enum ClosePriority {\n// ... existing ...\n    CONTEXT_MENU = 100,\n    DROPDOWN = 90,\n    MODAL = 80,\n    DIALOG = 70,\n    SIDEBAR = 60,\n    OVERLAY = 50,\n    PANEL = 40,\n    TOAST = 30,\n    TASK = 20,\n    VIEW = 10,\n    DEFAULT = 0\n}\n\n//\nexport interface CloseableEntry {\n    // in general, hashId is getter\n    hashId?: string;\n    id: string;\n    priority: ClosePriority | number;\n    isActive: (view?: string) => boolean;\n    close: (view?: string) => boolean | void;\n    element?: WeakRef<HTMLElement> | null;\n    group?: string;\n}\n\n//\ninterface BackNavigationOptions {\n    preventDefaultNavigation?: boolean;\n    pushInitialState?: boolean;\n    skipPopstateHandler?: boolean; // Skip adding popstate handler (when managed externally)\n    debug?: boolean;\n}\n\n//\nconst registry = new Map<string, CloseableEntry>();\nlet navigationInitialized = false;\nlet processingBack = false;\nlet historyDepth = 0;\nlet options: BackNavigationOptions = {};\n\n// Shared state for coordination between handlers\nexport let ignoreNextPopState = false;\nexport const setIgnoreNextPopState = (value: boolean) => { ignoreNextPopState = value; };\nexport const getIgnoreNextPopState = () => ignoreNextPopState;\n\n//\nconst generateId = () => `closeable-${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\n\n/**\n * Register a closeable element/callback with the back navigation system\n */\nexport const registerCloseable = (\n    entry: Omit<CloseableEntry, \"id\"> & { id?: string }\n): (() => void) => {\n    const id = entry.id || generateId();\n    const fullEntry: CloseableEntry = Object.assign(entry, { id });//{ ...entry, id };\n    if (fullEntry?.hashId == null) {\n        fullEntry.hashId = id;\n    }\n\n    registry.set(id, fullEntry);\n\n    if (options.debug) {\n        console.log(\"[BackNav] Registered:\", id, \"priority:\", entry.priority);\n    }\n\n    return () => unregisterCloseable(id);\n};\n\n/**\n * Unregister a closeable by ID\n */\nexport const unregisterCloseable = (id: string): boolean => {\n    const removed = registry.delete(id);\n    if (options.debug && removed) {\n        console.log(\"[BackNav] Unregistered:\", id);\n    }\n    return removed;\n};\n\n/**\n * Get all active closeables sorted by priority (highest first)\n */\nexport const getActiveCloseables = (view?: string): CloseableEntry[] => {\n    return Array.from(registry.values())\n        .filter((entry) => {\n            // Check if element still exists (if WeakRef is provided)\n            if (entry.element) {\n                const el = entry.element.deref();\n                // If element is gone, remove from registry\n                if (!el) {\n                    registry.delete(entry.id);\n                    return false;\n                }\n            }\n\n            // Check if closeable is active\n            return entry.isActive(view);\n        })\n        .sort((a, b) => (b.priority as number) - (a.priority as number));\n};\n\n/**\n * Get the highest priority active closeable\n */\nexport const getActiveCloseable = (view?: string): CloseableEntry | null => {\n    const active = getActiveCloseables(view);\n    return active[0] || null;\n};\n\n/**\n * Attempt to close the highest priority active closeable\n * @returns true if something was closed, false otherwise\n */\nexport const closeHighestPriority = (view?: string): CloseableEntry | null => {\n    const entry = getActiveCloseable(view);\n    if (!entry) return null;\n\n    if (options.debug) {\n        console.log(\"[BackNav] Closing:\", entry.id, \"priority:\", entry.priority);\n    }\n\n    //\n    // registry?.delete?.(entry?.id);\n    const result = entry?.close?.(view);\n    return result != false ? entry : null;\n};\n\n/**\n * Close all active closeables in a specific group\n */\nexport const closeByGroup = (group: string): number => {\n    let closedCount = 0;\n\n    for (const entry of registry.values()) {\n        if (entry.group === group && entry.isActive()) {\n            registry?.delete?.(entry.id);\n            const result = entry.close();\n            if (result !== false) closedCount++;\n        }\n    }\n\n    return closedCount;\n};\n\n/**\n * Check if any closeable is currently active\n */\nexport const hasActiveCloseable = (view?: string): boolean => {\n    return getActiveCloseable(view) != null;\n};\n\n/**\n * Handle back navigation (popstate event)\n */\nconst handleBackNavigation = (ev: PopStateEvent): boolean => {\n    if (processingBack) return false;\n    if (ignoreNextPopState) {\n        ignoreNextPopState = false;\n        return false;\n    }\n    if (ev?.state?.action) return false;\n    processingBack = true;\n\n    try {\n        ignoreNextPopState = true;\n\n        // Determine closing view\n        let closingView: string | undefined;\n        // Check if we have history state available and it was a back action\n        if (historyState.entries && (historyState.action === \"BACK\" || historyState.action === \"POP\")) {\n             // If we went back, we came from the next index\n             // Note: historyState.index is the *current* index (destination)\n             const prevEntry = historyState.entries[historyState.index + 1];\n             if (prevEntry) {\n                 closingView = prevEntry.view;\n             }\n        }\n\n        //\n        // try to close the highest priority active closeable\n        const closed = closeHighestPriority(closingView) ?? true;\n\n        // now, in negative, if isn't closed, may be forward back navigation...\n        if (!closed) {\n            // Prevent actual back navigation by going forward\n            // This preserves the current URL/hash without modification\n            ev.preventDefault?.();\n            ignoreNextPopState = true;\n            originalForward?.();\n            setTimeout(() => { ignoreNextPopState = false; }, 0);\n            processingBack = false;\n            return true;\n        }\n\n        ignoreNextPopState = false;\n        processingBack = false;\n        return false;\n    } finally {\n        ignoreNextPopState = false;\n        processingBack = false;\n        return false;\n    }\n};\n\n/**\n * Initialize back navigation handling\n */\nexport const initBackNavigation = (opts: BackNavigationOptions = {}): (() => void) => {\n    if (navigationInitialized) {\n        console.warn(\"[BackNav] Already initialized\");\n        return () => {};\n    }\n\n    options = { ...opts };\n    navigationInitialized = true;\n\n    // Initialize history wrapper\n    initHistory(location.hash);\n\n    // Push initial state to enable back detection\n    if (opts.pushInitialState !== false && !opts.skipPopstateHandler) {\n        historyDepth = 0;\n        setIgnoreNextPopState(true);\n        // Use historyState wrapper compliant push if possible, or manual merge\n        // We'll trust initHistory has set up basic state.\n        // But BackNavigation logic relies on `backNav` property.\n        // Let's merge it properly.\n        const current = history.state || {};\n        const newState = { ...current, backNav: true, depth: historyDepth };\n        history.pushState(newState, \"\", location.hash || \"#\");\n        setIgnoreNextPopState(false);\n    }\n\n    //\n    let unbind: (() => void) | undefined;\n\n    // Only add popstate handler if not managed externally (e.g., by Manager.ts)\n    if (!opts.skipPopstateHandler) {\n        const popstateHandler = (ev: PopStateEvent) => {\n            if (!ev?.state?.action) {\n                const wasHandled = handleBackNavigation(ev);\n                if (!wasHandled && !opts.preventDefaultNavigation) {\n                    // Allow normal back navigation\n                }\n            }\n        };\n\n        unbind = addEvent(window, \"popstate\", popstateHandler);\n    }\n\n    if (options.debug) {\n        console.log(\"[BackNav] Initialized\", opts.skipPopstateHandler ? \"(external handler)\" : \"\");\n    }\n\n    return () => {\n        unbind?.();\n        navigationInitialized = false;\n        registry.clear();\n        if (options.debug) {\n            console.log(\"[BackNav] Destroyed\");\n        }\n    };\n};\n\n/**\n * Register a context menu as closeable\n */\nexport const registerContextMenu = (\n    element: HTMLElement,\n    visibleRef: { value: boolean },\n    onClose?: () => void\n): (() => void) => {\n    return registerCloseable({\n        id: `ctx-menu-${element.id || generateId()}`,\n        priority: ClosePriority.CONTEXT_MENU,\n        element: new WeakRef(element),\n        group: \"context-menu\",\n        isActive: () => visibleRef.value === true,\n        close: () => {\n            visibleRef.value = false;\n            onClose?.();\n            return false;\n        }\n    });\n};\n\n/**\n * Register a modal dialog as closeable\n */\nexport const registerModal = (\n    element: HTMLElement,\n    isActiveCheck?: () => boolean,\n    onClose?: () => void\n): (() => void) => {\n    return registerCloseable({\n        id: `modal-${element.id || generateId()}`,\n        priority: ClosePriority.MODAL,\n        element: new WeakRef(element),\n        group: \"modal\",\n        isActive: isActiveCheck ?? (() => {\n            const el = element;\n            return el?.isConnected &&\n                   !el?.hasAttribute?.(\"data-hidden\") &&\n                   el?.checkVisibility?.({ opacityProperty: true, visibilityProperty: true }) !== false;\n        }),\n        close: () => {\n            onClose?.();\n            element?.remove?.();\n            return false;\n        }\n    });\n};\n\n/**\n * Register a sidebar as closeable\n */\nexport const registerSidebar = (\n    element: HTMLElement,\n    openedRef: { value: any },\n    onClose?: () => void\n): (() => void) => {\n    return registerCloseable({\n        id: `sidebar-${element.id || generateId()}`,\n        priority: ClosePriority.SIDEBAR,\n        element: new WeakRef(element),\n        group: \"sidebar\",\n        isActive: () => {\n            const val = openedRef.value;\n            return !!val && String(val) !== \"false\";\n        },\n        close: () => {\n            openedRef.value = false;\n            onClose?.();\n            return false;\n        }\n    });\n};\n\n/**\n * Register an overlay/panel as closeable\n */\nexport const registerOverlay = (\n    element: HTMLElement,\n    isActiveCheck: () => boolean,\n    onClose: () => void,\n    priority: ClosePriority = ClosePriority.OVERLAY\n): (() => void) => {\n    return registerCloseable({\n        id: `overlay-${element.id || generateId()}`,\n        priority,\n        element: new WeakRef(element),\n        group: \"overlay\",\n        isActive: isActiveCheck,\n        close: () => {\n            onClose();\n            return false;\n        }\n    });\n};\n\n/**\n * Create a modal backdrop with back navigation support\n * Wraps an existing modal creation pattern\n */\nexport const createBackNavigableModal = (\n    content: HTMLElement | DocumentFragment,\n    options: {\n        backdropClass?: string;\n        closeOnBackdropClick?: boolean;\n        closeOnEscape?: boolean;\n        onClose?: () => void;\n    } = {}\n): { element: HTMLElement; close: () => void; unregister: () => void } => {\n    const {\n        backdropClass = \"rs-modal-backdrop\",\n        closeOnBackdropClick = true,\n        closeOnEscape = true,\n        onClose\n    } = options;\n\n    const backdrop = document.createElement(\"div\");\n    backdrop.className = backdropClass;\n    backdrop.appendChild(content);\n\n    const close = () => {\n        onClose?.();\n        backdrop.remove();\n        document.removeEventListener(\"keydown\", escHandler);\n    };\n\n    const escHandler = (ev: KeyboardEvent) => {\n        if (ev.key === \"Escape\" && closeOnEscape) {\n            close();\n        }\n    };\n\n    if (closeOnEscape) {\n        document.addEventListener(\"keydown\", escHandler);\n    }\n\n    if (closeOnBackdropClick) {\n        backdrop.addEventListener(\"click\", (ev) => {\n            if (ev.target === backdrop) {\n                close();\n            }\n        });\n    }\n\n    const unregister = registerModal(backdrop, undefined, close);\n\n    return { element: backdrop, close, unregister };\n};\n\n//\nexport default {\n    register: registerCloseable,\n    unregister: unregisterCloseable,\n    init: initBackNavigation,\n    close: closeHighestPriority,\n    hasActive: hasActiveCloseable,\n    getActive: getActiveCloseable,\n    getAllActive: getActiveCloseables,\n    closeByGroup,\n    registerContextMenu,\n    registerModal,\n    registerSidebar,\n    registerOverlay,\n    createBackNavigableModal,\n    ClosePriority\n};\n","import { boundBehaviors, getCorrectOrientation, orientationNumberMap, whenAnyScreenChanges, handleHidden, handleAttribute, getPadding, addEvent, iterateContentBox } from \"fest/dom\";\nimport { observe, booleanRef, numberRef, affected, stringRef, ref } from \"fest/object\";\nimport { isNotEqual, isValueRef, $avoidTrigger, isObject, getValue, isPrimitive, normalizePrimitive, $getValue, deref, hasValue } from \"fest/core\";\nimport { checkboxCtrl, numberCtrl, valueCtrl } from \"./Control\";\nimport { bindCtrl, bindWith } from \"./Binding\";\nimport { setChecked } from \"fest/dom\";\nimport { getIgnoreNextPopState, setIgnoreNextPopState } from \"../../extension/tasking/BackNavigation\";\n\n//\nexport const localStorageLinkMap = new Map<string, any>();\nexport const localStorageLink = (existsStorage?: any|null, exists?: any|null, key?: string, initial?: any|null) => {\n    if (key == null) return;\n    // de-assign local storage link for key\n    if (localStorageLinkMap.has(key)) {\n        localStorageLinkMap.get(key)?.[0]?.();\n        localStorageLinkMap.delete(key);\n    }\n\n    // @ts-ignore // assign new local storage link for key\n    return localStorageLinkMap.getOrInsertComputed?.(key, ()=>{\n        const def  = (existsStorage ?? localStorage).getItem(key) ?? (initial?.value ?? initial);\n        const ref = isValueRef(exists) ? exists : stringRef(def); /*if (typeof ref == \"object\" || typeof ref == \"function\")*/ ref.value ??= def;\n        const $val = new WeakRef(ref);\n        const unsb = affected([ref, \"value\"], (val) => {\n            $avoidTrigger($val?.deref?.(), ()=>{\n                (existsStorage ?? localStorage).setItem(key, val);\n            });\n        });\n        const list = (ev) => { if (ev.storageArea == (existsStorage ?? localStorage) && ev.key == key) {\n            if (isNotEqual(ref.value, ev.newValue)) { ref.value = ev.newValue; };\n        } };\n        addEventListener(\"storage\", list);\n        return [() => { unsb?.(); removeEventListener(\"storage\", list); }, ref];\n    });\n}\n\n//\nconst normalizeHash = (hash: string | null, withHashCharacter: boolean = true) => {\n    if (hash == null) return (withHashCharacter ? \"#\" : \"\");\n    if (!withHashCharacter && hash?.startsWith?.(\"#\")) { return (hash?.replace?.(\"#\", \"\") || \"\"); };\n    if (withHashCharacter && !hash?.startsWith?.(\"#\")) { return `#${hash || \"\"}`; };\n    return (withHashCharacter ? (hash?.startsWith?.(\"#\") ? hash : `#${hash || \"\"}`) : hash?.replace?.(\"#\", \"\")) || \"\";\n}\n\n//\nexport const hashTargetLink = (_?: any|null, exists?: any|null, initial?: any|null, withHashCharacter: boolean = false)=>{\n    const locationHash = normalizeHash(normalizeHash(location?.hash || \"\", false) || normalizeHash(initial || \"\", false) || \"\", withHashCharacter) || \"\";\n\n    //\n    const ref = isValueRef(exists) ? exists : stringRef(locationHash);\n    if (isObject(ref)) ref.value ||= locationHash;\n\n    //\n    let processingStateChange = false;\n    let nanoThrottle = 0;\n    const evf = (ev) => {\n        if (getIgnoreNextPopState()) return;\n        if (nanoThrottle <= 0) {\n            nanoThrottle = 1;\n            setTimeout(() => {\n                const normalizedLocationHash = normalizeHash(location?.hash, false);\n                const newValue = normalizeHash(normalizedLocationHash || normalizeHash(ref.value || \"\", false), withHashCharacter) || \"\";\n                if (normalizeHash(ref.value, false) !== normalizeHash(newValue, false)) {\n                    if (!processingStateChange) {\n                        processingStateChange = true;\n                        ref.value = newValue;\n                        setTimeout(() => (processingStateChange = false), 0);\n                    }\n                }\n                nanoThrottle = 0;\n            }, 0);\n        }\n    };\n\n    //\n    const $val = new WeakRef(ref);\n    const usb = affected([ref, \"value\"], (val) => {\n        const newHash = normalizeHash(normalizeHash($getValue($val?.deref?.()) || val, false) || normalizeHash(location?.hash, false), true);\n        if (newHash != location.hash) {\n            $avoidTrigger($val?.deref?.(), () => {\n                if (!processingStateChange) {\n                    setIgnoreNextPopState(true);\n                    //location.hash = `#${(newHash || location.hash)?.replace?.(/^#/, \"\")?.trim?.()?.replace?.(/^#/, \"\")?.trim?.() || \"\"}`;\n                    history.pushState(\"\", \"\", newHash || location.hash);\n                    setTimeout(() => setIgnoreNextPopState(false), 0);\n                }\n            });\n        }\n    });\n\n    //\n    addEventListener(\"popstate\", evf);\n    addEventListener(\"hashchange\", evf);\n    return () => { usb?.();\n        removeEventListener(\"popstate\", evf);\n        removeEventListener(\"hashchange\", evf);\n    };\n}\n\n//\nexport const matchMediaLink = (existsMedia?: any|null, exists?: any|null, condition?: string) => {\n    if (condition == null) return;\n    const med = existsMedia ?? matchMedia(condition), def = med?.matches || false;\n    const ref = isValueRef(exists) ? exists : booleanRef(def); ref.value ??= def;\n    const evf = (ev) => (ref.value = ev.matches); med?.addEventListener?.(\"change\", evf);\n    return () => { med?.removeEventListener?.(\"change\", evf); };\n}\n\n//\nexport const visibleLink = (element?: any|null, exists?: any|null, initial?: any|null) => {\n    if (element == null) return;\n    const def = (initial?.value ?? (typeof initial != \"object\" ? initial : null)) ?? (element?.getAttribute?.(\"data-hidden\") == null);\n    const val = isValueRef(exists) ? exists : booleanRef(!!def);\n    const usb = bindWith(element, \"data-hidden\", val, handleHidden);\n    const evf = [(ev) => { val.value = ev?.type == \"u2-hidden\" ? false : true; }, { passive: true }], wel = new WeakRef(element);\n    element?.addEventListener?.(\"u2-hidden\" , ...evf);\n    element?.addEventListener?.(\"u2-appear\", ...evf);\n    return () => {\n        const element = wel?.deref?.(); usb?.();\n        element?.removeEventListener?.(\"u2-hidden\" , ...evf);\n        element?.removeEventListener?.(\"u2-appear\", ...evf);\n    };\n}\n\n//\nexport const attrLink = (element?: any|null, exists?: any|null, attribute?: string, initial?: any|null) => {\n    const def = element?.getAttribute?.(attribute) ?? (typeof initial == \"boolean\" ? (initial ? \"\" : null) : getValue(initial));\n    if (!element) return; const val = isValueRef(exists) ? exists : stringRef(def);\n    if (isObject(val) && !normalizePrimitive(val.value)) val.value = normalizePrimitive(def) ?? val.value ?? \"\";\n    return bindWith(element, attribute, val, handleAttribute, null, true);\n}\n\n//\nexport const sizeLink = (element?: any|null, exists?: any|null, axis?: \"inline\" | \"block\", box?: ResizeObserverBoxOptions) => {\n    const def = box == \"border-box\" ? element?.[axis == \"inline\" ? \"offsetWidth\" : \"offsetHeight\"] : (element?.[axis == \"inline\" ? \"clientWidth\" : \"clientHeight\"] - getPadding(element, axis));\n    const val = isValueRef(exists) ? exists : numberRef(def); if (isObject(val)) val.value ||= (def ?? val.value) || 1;\n    const obs = new ResizeObserver((entries) => {\n        if (isObject(val)) {\n            if (box == \"border-box\") { val.value = axis == \"inline\" ? entries[0].borderBoxSize[0].inlineSize : entries[0].borderBoxSize[0].blockSize };\n            if (box == \"content-box\") { val.value = axis == \"inline\" ? entries[0].contentBoxSize[0].inlineSize : entries[0].contentBoxSize[0].blockSize };\n            if (box == \"device-pixel-content-box\") { val.value = axis == \"inline\" ? entries[0].devicePixelContentBoxSize[0].inlineSize : entries[0].devicePixelContentBoxSize[0].blockSize };\n        }\n    });\n    if ((element?.element ?? element?.self ?? element) instanceof HTMLElement) { obs?.observe?.(element?.element ?? element?.self ?? element, { box }); };\n    return ()=>obs?.disconnect?.();\n}\n\n//\nexport const scrollLink = (element?: any|null, exists?: any|null, axis?: \"inline\" | \"block\", initial?: any|null) => {\n    const wel = element instanceof WeakRef ? element : new WeakRef(element);\n    if (initial != null && typeof (initial?.value ?? initial) == \"number\") { element?.scrollTo?.({ [axis == \"block\" ? \"top\" : \"left\"]: (initial?.value ?? initial) }); };\n    const def = element?.[axis == \"block\" ? \"scrollTop\" : \"scrollLeft\"];\n    const val = isValueRef(exists) ? exists : numberRef(def || 0); if (isObject(val)) val.value ||= (def ?? val.value) || 1; val.value ||= (def ?? val.value) || 0;\n    const usb = affected([val, \"value\"], (v) => { if (Math.abs((axis == \"block\" ? element?.scrollTop : element?.scrollLeft) - (val?.value ?? val)) > 0.001) element?.scrollTo?.({ [axis == \"block\" ? \"top\" : \"left\"]: (val?.value ?? val) })});\n    const scb = [(ev) => { val.value = (axis == \"block\" ? wel?.deref?.()?.scrollTop : wel?.deref?.()?.scrollLeft) || 0; }, { passive: true }];\n    element?.addEventListener?.(\"scroll\", ...scb); return ()=>{ wel?.deref?.()?.removeEventListener?.(\"scroll\", ...scb); usb?.(); };\n}\n\n//\nexport const checkedLink = (element?: any|null, exists?: any|null) => {\n    const def = (!!element?.checked) || false;\n    const val = isValueRef(exists) ? exists : booleanRef(def); if (isObject(val)) val.value ??= def;\n    const dbf = bindCtrl(element, checkboxCtrl(val));\n    const usb = affected([val, \"value\"], (v) => {\n        if (element && element?.checked != v) {\n            setChecked(element, v);\n        }\n    });\n    return ()=>{ usb?.(); dbf?.(); };\n}\n\n//\nexport const valueLink = (element?: any|null, exists?: any|null) => {\n    if (isPrimitive(element)) return;\n    if (!element || !(element instanceof Node || element?.element instanceof Node)) return;\n\n    //\n    const def = element?.value ?? \"\";\n    const val = isValueRef(exists) ? exists : stringRef(def); if (isObject(val)) val.value ??= def;\n    const dbf = bindCtrl(element, valueCtrl(val));\n    const $val = new WeakRef(val);\n    const usb = affected([val, \"value\"], (v) => {\n        if (element && isNotEqual(element?.value, (v?.value ?? v))) {\n            $avoidTrigger(deref($val), ()=>{\n                element.value = $getValue(deref($val)) ?? $getValue(v);\n                element?.dispatchEvent?.(new Event(\"change\", { bubbles: true }));\n            });\n        }\n    });\n    return ()=>{ usb?.(); dbf?.(); };\n}\n\n//\nexport const valueAsNumberLink = (element?: any|null, exists?: any|null) => {\n    if (isPrimitive(element)) return;\n    if (!element || !(element instanceof Node || element?.element instanceof Node)) return;\n\n    //\n    const def = Number(element?.valueAsNumber) || 0;\n    const val = isValueRef(exists) ? exists : numberRef(def); if (isObject(val)) val.value ??= def;\n    const dbf = bindCtrl(element, numberCtrl(val));\n    const usb = affected([val, \"value\"], (v) => {\n        if (element && (element.type == \"range\" || element.type == \"number\") && typeof element?.valueAsNumber == \"number\" && isNotEqual(element?.valueAsNumber, v)) {\n            element.valueAsNumber = Number(v);\n            element?.dispatchEvent?.(new Event(\"change\", { bubbles: true }));\n        }\n    });\n    return ()=>{ usb?.(); dbf?.(); };\n}\n\n//\nexport const observeSizeLink = (element?: any|null, exists?: any|null, box?: any|null, styles?: any|null) => {\n    if (isPrimitive(element)) return;\n    if (!element || !(element instanceof Node || element?.element instanceof Node)) return;\n\n    //\n    if (!styles) styles = isValueRef(exists) ? exists : observe({}); let obs: any = null;\n    (obs = new ResizeObserver((mut) => {\n        if (box == \"border-box\") {\n            styles.inlineSize = `${mut[0].borderBoxSize[0].inlineSize}px`;\n            styles.blockSize  = `${mut[0].borderBoxSize[0].blockSize}px`;\n        }\n        if (box == \"content-box\") {\n            styles.inlineSize = `${mut[0].contentBoxSize[0].inlineSize}px`;\n            styles.blockSize  = `${mut[0].contentBoxSize[0].blockSize}px`;\n        }\n        if (box == \"device-pixel-content-box\") {\n            styles.inlineSize = `${mut[0].devicePixelContentBoxSize[0].inlineSize}px`;\n            styles.blockSize  = `${mut[0].devicePixelContentBoxSize[0].blockSize}px`;\n        }\n    })).observe(element?.element ?? element?.self ?? element, { box });\n    return () => { obs?.disconnect?.(); };\n}\n\n//\nexport const refCtl = (value?: any|null) => {\n    if (isPrimitive(value)) return;\n\n    //\n    let self: any = null, ctl = ref(value, self = ([val, prop, old], [weak, ctl, valMap]) => boundBehaviors?.get?.(weak?.deref?.())?.values?.()?.forEach?.((beh) => {\n        (beh != self ? beh : null)?.([val, prop, old], [weak, ctl, valMap]);\n    })); return ctl;\n}\n\n//\nexport const orientLink = (host?: any|null, exists?: any|null)=>{\n    const orient = orientationNumberMap?.[getCorrectOrientation()] || 0;\n    const def = Number(orient) || 0;\n    const val = isValueRef(exists) ? exists : numberRef(def);\n    if (hasValue(val)) val.value = def;\n\n    // !Change orientation? You are seious?!\n    //affected([exists, \"value\"], (orient)=>{ // pickup name...\n        //screen?.orientation?.lock?.($NAME$?.(orient));\n    //});\n\n    return whenAnyScreenChanges(()=>{\n        val.value = orientationNumberMap?.[getCorrectOrientation()] || 0;\n    });\n}\n","import { stringRef, numberRef, booleanRef, deref, observe, addToCallChain, affected, computed, $trigger, ref } from \"fest/object\";\nimport { attrLink, valueLink, checkedLink, valueAsNumberLink, localStorageLink, sizeLink, scrollLink, visibleLink, matchMediaLink, orientLink, localStorageLinkMap, hashTargetLink } from \"./Links\";\nimport { addEvent, getPadding, handleAttribute } from \"fest/dom\";\nimport { elMap } from \"./Binding\";\nimport { isValidObj, WRef } from \"fest/core\";\nimport { operated } from \"fest/lure\";\n\n//\nexport const makeRef = (host?: any, type?: any, link?: any, ...args)=>{\n    if (link == attrLink || link == handleAttribute) {\n        const exists = elMap?.get?.(host)?.get?.(handleAttribute)?.get?.(args[0])?.[0];\n        if (exists) { return exists; };\n    }\n    const rf = (type ?? ref)?.(null), usub = link?.(host, rf, ...args);\n    if (usub && rf) addToCallChain(rf, Symbol.dispose, usub); return rf;\n}\n\n//\nexport const orientRef = (host?: any, ...args)=>makeRef(host, numberRef, orientLink, ...args);\nexport const attrRef = (host?: any, ...args)=>makeRef(host, stringRef, attrLink, ...args);\nexport const valueRef = (host?: any, ...args)=>makeRef(host, stringRef, valueLink, ...args);\nexport const valueAsNumberRef = (host?: any, ...args)=>makeRef(host, numberRef, valueAsNumberLink, ...args);\nexport const localStorageRef = (...args)=>{\n    if (localStorageLinkMap.has(args[0])) return localStorageLinkMap.get(args[0])?.[1];\n    const link: any = localStorageLink, type: any = stringRef;\n    const rf = (type ?? ref)?.(null), pair = link?.(null, rf, ...args);\n    const [usub, _] = pair;\n    if (usub && rf) addToCallChain(rf, Symbol.dispose, usub);\n    /*localStorageLinkMap.set(args[0], pair);*/ return rf;\n};\n\n//\nexport const sizeRef = (host?: any, ...args)=>makeRef(host, numberRef, sizeLink, ...args);\nexport const checkedRef = (host?: any, ...args)=>makeRef(host, booleanRef, checkedLink, ...args);\nexport const scrollRef = (host?: any, ...args)=>makeRef(host, numberRef, scrollLink, ...args);\nexport const visibleRef = (host?: any, ...args)=>makeRef(host, booleanRef, visibleLink, ...args);\nexport const matchMediaRef = (...args)=>makeRef(null, booleanRef, matchMediaLink, ...args);\nexport const hashTargetRef = (...args)=>makeRef(null, stringRef, hashTargetLink, ...args);\n\n//\nexport const makeWeakRef = (/*host?: any,*/ initial?: any, behavior?: any)=>{\n    const obj = deref(initial);\n    return isValidObj(obj) ? observe(WRef(obj)) : ref(obj, behavior);\n};\n\n//\nexport const scrollSize  = (source: HTMLElement, axis: number = 0, inputChange?: any|null)=>{ // @ts-ignore\n    const target  = toRef(source);\n    const compute = (vl: any)=>((deref(target)?.[['scrollWidth', 'scrollHeight'][axis] || 'scrollWidth'] - 1) || 1);\n    const scroll  = scrollRef(source, ([\"inline\", \"block\"] as [\"inline\", \"block\"])[axis]);\n    const conRef  = sizeRef(source, ([\"inline\", \"block\"] as [\"inline\", \"block\"])[axis], \"content-box\");\n    const percent = computed(scroll, compute);\n    const recompute = ()=>{ scroll?.[$trigger]?.(); percent?.[$trigger]?.(); }\n\n    //\n    affected(conRef, (vl: any)=>{ recompute?.(); });\n    addEvent(inputChange || source, \"input\" , ()=>{ recompute?.(); });\n    addEvent(inputChange || source, \"change\", ()=>{ recompute?.(); });\n    queueMicrotask(()=>{ recompute?.(); });\n    return percent;\n}\n\n// Enhanced reactive scrollbar sizing with CSS calc integration\nexport const reactiveScrollbarSize = (source: HTMLElement, axis: number, contentSize: ReturnType<typeof numberRef>) => {\n    const containerSize = axis === 0\n        ? operated([], () => source.clientWidth)\n        : operated([], () => source.clientHeight);\n\n    return operated([containerSize, contentSize], () => {\n        const ratio = containerSize.value / contentSize.value;\n        const minSize = 20; // Minimum thumb size in pixels\n        return Math.max(minSize, ratio * containerSize.value);\n    });\n};\n\n// All classes are exported above when declared\nexport const paddingBoxSize  = (source: HTMLElement, axis: number, inputChange?: any|null)=>{ // @ts-ignore\n    const target  = asWeak(source);\n    const scroll  = scrollRef(source, ([\"inline\", \"block\"] as [\"inline\", \"block\"])[axis]);\n    const conRef  = sizeRef(source, ([\"inline\", \"block\"] as [\"inline\", \"block\"])[axis], \"content-box\");\n    const content = computed(conRef, (v: any)=>(v + (getPadding(source, ([\"inline\", \"block\"] as [\"inline\", \"block\"])[axis]) || 0)));\n    const recompute = ()=>{ conRef?.[$trigger]?.(); content?.[$trigger]?.(); }\n\n    //\n    affected(scroll, (vl: any)=>{ recompute?.(); });\n    addEvent(inputChange || source, \"input\" , ()=>{ recompute?.(); });\n    addEvent(inputChange || source, \"change\", ()=>{ recompute?.(); });\n    queueMicrotask(()=>{ recompute?.(); });\n    return content;\n}\n","import { ref } from \"fest/object\";\nimport { addRoot, isElement, loadAsAdopted, loadInlineStyle, setAttributesIfNull } from \"fest/dom\";\n\nimport {\n    valueAsNumberRef,\n    localStorageRef,\n    matchMediaRef,\n    checkedRef,\n    scrollRef,\n    valueRef,\n    sizeRef,\n    attrRef\n} from \"../../lure/core/Refs\";\n\nimport { Q } from \"../../lure/node/Queried\";\nimport { E } from \"../../lure/node/Bindings\";\nimport { H } from \"../../lure/node/Syntax\";\n\n//\nconst styleCache = new Map();\nconst styleElementCache = new WeakMap();\nconst propStore = new WeakMap<object, Map<string, any>>();\nconst CSM = new WeakMap<WeakKey | HTMLElement, any>();\n\nconst camelToKebab = (str: string) => str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\nconst kebabToCamel = (str: string) => str.replace(/-([a-z])/g, (_, char) => char.toUpperCase());\nconst whenBoxValid = (name: string) => {\n    const cb = camelToKebab(name);\n    if ([\"border-box\", \"content-box\", \"device-pixel-content-box\"].indexOf(cb) >= 0) return cb;\n    return null;\n};\nconst whenAxisValid = (name: string) => {\n    const cb = camelToKebab(name);\n    if (cb?.startsWith?.(\"inline\")) return \"inline\";\n    if (cb?.startsWith?.(\"block\")) return \"block\";\n    return null;\n};\n\nconst characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\nconst inRenderKey = Symbol.for(\"@render@\");\nconst defKeys = Symbol.for(\"@defKeys@\");\nconst defaultStyle = typeof document != \"undefined\" ? document?.createElement?.(\"style\") : null;\n\nconst defineSource = (source: string | any, holder: any, name?: string | null) => {\n    if (source == \"attr\") return attrRef.bind(null, holder, name || \"\");\n    if (source == \"media\") return matchMediaRef;\n    if (source == \"query\") return (val: string) => Q?.(name || val || \"\", holder);\n    if (source == \"query-shadow\") return (val: string) => Q?.(name || val || \"\", holder?.shadowRoot ?? holder);\n    if (source == \"localStorage\") return localStorageRef;\n    if (source == \"inline-size\") return sizeRef.bind(null, holder, \"inline\", whenBoxValid(name!) || \"border-box\");\n    if (source == \"content-box\") return sizeRef.bind(null, holder, whenAxisValid(name!) || \"inline\", \"content-box\");\n    if (source == \"block-size\") return sizeRef.bind(null, holder, \"block\", whenBoxValid(name!) || \"border-box\");\n    if (source == \"border-box\") return sizeRef.bind(null, holder, whenAxisValid(name!) || \"inline\", \"border-box\");\n    if (source == \"scroll\") return scrollRef.bind(null, holder, whenAxisValid(name!) || \"inline\");\n    if (source == \"device-pixel-content-box\") return sizeRef.bind(null, holder, whenAxisValid(name!) || \"inline\", \"device-pixel-content-box\");\n    if (source == \"checked\") return checkedRef.bind(null, holder);\n    if (source == \"value\") return valueRef.bind(null, holder);\n    if (source == \"value-as-number\") return valueAsNumberRef.bind(null, holder);\n    return ref;\n};\n\nif (defaultStyle) {\n    typeof document != \"undefined\" ? document.querySelector?.(\"head\")?.appendChild?.(defaultStyle) : null;\n}\n\nconst getDef = (source?: string | any | null): any => {\n    if (source == \"query\") return \"input\";\n    if (source == \"query-shadow\") return \"input\";\n    if (source == \"media\") return false;\n    if (source == \"localStorage\") return null;\n    if (source == \"attr\") return null;\n    if (source == \"inline-size\") return 0;\n    if (source == \"block-size\") return 0;\n    if (source == \"border-box\") return 0;\n    if (source == \"content-box\") return 0;\n    if (source == \"scroll\") return 0;\n    if (source == \"device-pixel-content-box\") return 0;\n    if (source == \"checked\") return false;\n    if (source == \"value\") return \"\";\n    if (source == \"value-as-number\") return 0;\n    return null;\n};\n\nif (defaultStyle) {\n    defaultStyle.innerHTML = `@layer ux-preload {\n        :host { display: none; }\n    }`;\n}\n\n// ============================================\n//   WEB COMPONENTS LIFECYCLE\n// ============================================\n\n/**\n *  lifecycle callbacks  Custom Elements\n */\nexport interface CustomElementLifecycle {\n    connectedCallback?(): this|void|undefined;\n    disconnectedCallback?(): this|void|undefined;\n    adoptedCallback?(): this|void|undefined;\n    attributeChangedCallback?(name: string, oldValue: string | null, newValue: string | null): this|void|undefined;\n}\n\n/**\n *   Custom Element\n */\nexport interface CustomElementStatic {\n    observedAttributes?: string[];\n    formAssociated?: boolean;\n}\n\n/**\n *    Custom Element  lifecycle\n */\nexport interface CustomElementBase extends HTMLElement, CustomElementLifecycle {}\n\n/**\n *     GLitElement\n */\nexport interface GLitElementInstance extends CustomElementLifecycle {\n    styles?: any;\n    initialAttributes?: Record<string, any> | (() => Record<string, any>);\n    styleLibs: HTMLStyleElement[];\n    adoptedStyleSheets: CSSStyleSheet[];\n    styleLayers(): string[];\n    render(weak?: WeakRef<any>): HTMLElement | DocumentFragment | Node;\n    onInitialize(weak?: WeakRef<any>): this|void|undefined;\n    onRender(weak?: WeakRef<any>): this|void|undefined;\n    loadStyleLibrary(module: any): this|void|undefined;\n    createShadowRoot(): ShadowRoot;\n    $init?(): void;\n}\n\n/**\n *    HTMLElement      lifecycle\n */\nexport type HTMLElementConstructor<T extends HTMLElement = HTMLElement> = {\n    new(...args: any[]): T & CustomElementLifecycle;\n    prototype: T & CustomElementLifecycle;\n} & CustomElementStatic;\n\n/**\n *    GLitElement -     lifecycle\n */\nexport type GLitElementConstructor<T extends HTMLElement = HTMLElement> = {\n    new(...args: any[]): T & GLitElementInstance;\n    prototype: T & GLitElementInstance;\n} & CustomElementStatic;\n\n/**\n *   ,   \n */\nexport type GLitElementClass<T extends HTMLElement = HTMLElement> = \n    GLitElementConstructor<T> & {\n        new(...args: any[]): T & GLitElementInstance & CustomElementLifecycle;\n    };\n\n// ============================================\n//   \n// ============================================\n\nexport function withProperties<T extends HTMLElementConstructor>(ctr: T): T {\n    const proto = ctr.prototype as any ?? Object.getPrototypeOf(ctr) ?? ctr;\n    const $prev = (proto as any)?.$init ?? (ctr as any)?.$init;\n    (proto as any).$init = function (this: any, ...args: any[]) {\n        $prev?.call?.(this, ...args);\n\n        // Collect defKeys from entire prototype chain (child-first, skip duplicates)\n        const allDefs: Record<string, any> = {};\n        let p: any = Object.getPrototypeOf(this) ?? this;\n        while (p) {\n            if (Object.hasOwn(p, defKeys)) {\n                const defs = Object.assign({}, Object.getOwnPropertyDescriptors(p), p[defKeys] ?? {});\n                for (const k of Object.keys(defs)) {\n                    if (!(k in allDefs)) { allDefs[k] = defs[k]; };\n                }\n            }\n            p = Object.getPrototypeOf(p);\n        }\n\n        for (const [key, def] of Object.entries(allDefs)) {\n            const exists = this[key];\n            if (def != null) {\n                Object.defineProperty(this, key, def as PropertyDescriptor);\n            }\n            try { this[key] = exists || this[key]; } catch (e) {}\n        }\n\n        return this;\n    };\n\n    return ctr;\n}\n\nexport function generateName(length = 8) {\n    let r = '';\n    const l = characters.length;\n    for (let i = 0; i < length; i++) {\n        r += characters.charAt(Math.floor(Math.random() * l));\n    }\n    return r;\n}\n\nexport function defineElement(name: string, options?: ElementDefinitionOptions) {\n    return function <T extends HTMLElementConstructor>(target: T, _key?: string): T {\n        try {\n            if (typeof customElements === \"undefined\" || !name) return target;\n            const existing = customElements.get(name);\n            if (existing) return existing as unknown as T;\n            customElements.define(name, target as unknown as CustomElementConstructor, options);\n        } catch (e: any) {\n            if (e?.name === \"NotSupportedError\" || /has already been used|already been defined/i.test(e?.message || \"\")) {\n                return (customElements?.get?.(name) ?? target) as T;\n            }\n            throw e;\n        }\n        return target;\n    };\n}\n\nexport interface PropertyOptions {\n    attribute?: string | boolean;\n    source?: string | any;\n    name?: string | null;\n    from?: any | null;\n}\n\nexport function property(options: PropertyOptions = {}) {\n    const { attribute, source, name, from } = options;\n\n    return function (target: any, key: string) {\n        const attrName = typeof attribute == \"string\" ? attribute : (name ?? key);\n\n        if (attribute !== false && attrName != null) {\n            const ctor = target.constructor;\n            if (!ctor.observedAttributes) {\n                ctor.observedAttributes = [];\n            }\n            if (ctor.observedAttributes.indexOf(attrName) < 0) {\n                ctor.observedAttributes.push(attrName);\n            }\n        }\n\n        if (!Object.hasOwn(target, defKeys)) target[defKeys] = {};\n\n        target[defKeys][key] = {\n            get(this: any) {\n                const ROOT = this;\n                const inRender = ROOT[inRenderKey];\n                const sourceTarget = !from ? ROOT : (from instanceof HTMLElement ? from : (typeof from == \"string\" ? Q?.(from, ROOT) : ROOT));\n\n                let store = propStore.get(ROOT);\n                let stored = store?.get?.(key);\n\n                if (stored == null && source != null) {\n                    if (!store) {\n                        propStore.set(ROOT, store = new Map());\n                    }\n                    if (!store?.has?.(key)) {\n                        store?.set?.(key, stored = defineSource(source, sourceTarget, name || key)?.(getDef(source)));\n                    }\n                }\n\n                if (inRender) return stored;\n                if (stored?.element instanceof HTMLElement) return stored?.element;\n                return ((typeof stored == \"object\" || typeof stored == \"function\") && (stored?.value != null || \"value\" in stored)) ? stored?.value : stored;\n            },\n            set(this: any, newValue: any) {\n                const ROOT = this;\n                const sourceTarget = !from ? ROOT : (from instanceof HTMLElement ? from : (typeof from == \"string\" ? Q?.(from, ROOT) : ROOT));\n\n                let store = propStore.get(ROOT);\n                let stored = store?.get?.(key);\n\n                if (stored == null && source != null) {\n                    if (!store) {\n                        propStore.set(ROOT, store = new Map());\n                    }\n                    if (!store?.has?.(key)) {\n                        const initialValue = (((typeof newValue == 'object' || typeof newValue == 'function') ? (newValue?.value) : null) ?? newValue) ?? getDef(source);\n                        store?.set?.(key, stored = defineSource(source, sourceTarget, name || key)?.(initialValue));\n                    }\n                } else if (typeof stored == \"object\" || typeof stored == \"function\") {\n                    try {\n                        if (typeof newValue == 'object' && newValue != null && ((newValue?.value == null && !(\"value\" in newValue)) || typeof newValue?.value == \"object\" || typeof newValue?.value == \"function\")) {\n                            Object.assign(stored, newValue?.value ?? newValue);\n                        } else {\n                            stored.value = ((typeof newValue == 'object' || typeof newValue == 'function') ? (newValue?.value) : null) ?? newValue;\n                        }\n                    } catch (e) {\n                        console.warn(\"Error setting property value:\", e);\n                    }\n                }\n            },\n            enumerable: true,\n            configurable: true,\n        };\n    };\n}\n\n// ============================================\n// \n// ============================================\n\nconst adoptedStyleSheetsCache = new WeakMap<object, CSSStyleSheet[]>();\n\nconst addAdoptedSheetToElement = (bTo: any, sheet: CSSStyleSheet) => {\n    let adoptedSheets = adoptedStyleSheetsCache.get(bTo);\n    if (!adoptedSheets) {\n        adoptedStyleSheetsCache.set(bTo, adoptedSheets = []);\n    }\n    if (sheet && adoptedSheets.indexOf(sheet) < 0) {\n        adoptedSheets.push(sheet);\n    }\n    if (bTo.shadowRoot) {\n        bTo.shadowRoot.adoptedStyleSheets = [\n            ...(bTo.shadowRoot.adoptedStyleSheets || []),\n            ...adoptedSheets.filter((s: CSSStyleSheet) => !bTo.shadowRoot.adoptedStyleSheets?.includes(s))\n        ];\n    }\n};\n\nexport const loadCachedStyles = (bTo: any, src: any): HTMLStyleElement | null => {\n    if (!src) return null;\n\n    let resolvedSrc = src;\n    if (typeof src == \"function\") {\n        try {\n            const weak = new WeakRef(bTo);\n            resolvedSrc = src.call(bTo, weak);\n        } catch (e) {\n            console.warn(\"Error calling styles function:\", e);\n            return null;\n        }\n    }\n\n    if (resolvedSrc && typeof CSSStyleSheet != \"undefined\" && resolvedSrc instanceof CSSStyleSheet) {\n        addAdoptedSheetToElement(bTo, resolvedSrc);\n        return null;\n    }\n\n    if (resolvedSrc instanceof Promise) {\n        resolvedSrc.then((result: any) => {\n            if (result instanceof CSSStyleSheet) {\n                addAdoptedSheetToElement(bTo, result);\n            } else if (result != null) {\n                loadCachedStyles(bTo, result);\n            }\n        }).catch((e: any) => {\n            console.warn(\"Error loading adopted stylesheet:\", e);\n        });\n        return null;\n    }\n\n    if (typeof resolvedSrc == \"string\" || resolvedSrc instanceof Blob || (resolvedSrc as any) instanceof File) {\n        const adopted = loadAsAdopted(resolvedSrc, \"ux-layer\");\n        if (adopted) {\n            let adoptedSheets = adoptedStyleSheetsCache.get(bTo);\n            if (!adoptedSheets) {\n                adoptedStyleSheetsCache.set(bTo, adoptedSheets = []);\n            }\n            const addAdoptedSheet = (sheet: CSSStyleSheet) => {\n                if (sheet && adoptedSheets!.indexOf(sheet) < 0) {\n                    adoptedSheets!.push(sheet);\n                }\n                if (bTo.shadowRoot) {\n                    bTo.shadowRoot.adoptedStyleSheets = [\n                        ...(bTo.shadowRoot.adoptedStyleSheets || []),\n                        ...adoptedSheets!.filter((s: CSSStyleSheet) => !bTo.shadowRoot.adoptedStyleSheets?.includes(s))\n                    ];\n                }\n            };\n            if (adopted instanceof Promise) {\n                adopted.then(addAdoptedSheet).catch((e: any) => {\n                    console.warn(\"Error loading adopted stylesheet:\", e);\n                });\n                return null;\n            } else {\n                addAdoptedSheet(adopted);\n                return null;\n            }\n        }\n    }\n\n    const source = ((typeof src == \"function\" || typeof src == \"object\") ? styleElementCache : styleCache);\n    const cached = source.get(src);\n    let styleElement = cached?.styleElement;\n    let vars = cached?.vars;\n\n    if (!cached) {\n        let styles = ``;\n        let props: any[] = [];\n\n        if (typeof resolvedSrc == \"string\") {\n            styles = resolvedSrc || \"\";\n        } else if (typeof resolvedSrc == \"object\" && resolvedSrc != null) {\n            if (resolvedSrc instanceof HTMLStyleElement) {\n                styleElement = resolvedSrc;\n            } else {\n                styles = typeof (resolvedSrc as any).css == \"string\" ? (resolvedSrc as any).css : (typeof resolvedSrc == \"string\" ? resolvedSrc : String(resolvedSrc));\n                props = (resolvedSrc as any)?.props ?? props;\n                vars = (resolvedSrc as any)?.vars ?? vars;\n            }\n        }\n\n        if (!styleElement && styles) {\n            styleElement = loadInlineStyle(styles, bTo, \"ux-layer\");\n        }\n\n        source.set(src, { css: styles, props, vars, styleElement });\n    }\n\n    return styleElement;\n};\n\nexport const isNotExtended = (el: HTMLElement): boolean => {\n    return !(\n        (el instanceof HTMLDivElement) ||\n        (el instanceof HTMLImageElement) ||\n        (el instanceof HTMLVideoElement) ||\n        (el instanceof HTMLCanvasElement)\n    ) && !(el?.hasAttribute?.(\"is\") || el?.getAttribute?.(\"is\") != null);\n};\n\nexport const customElement = defineElement;\n\n// ============================================\n//   GLitElement\n// ============================================\n\n/**\n * GLitElement:         .\n *   lifecycle callbacks Web Components.\n * \n * @param derivate -     (  HTMLElement).\n * @returns       lifecycle.\n * \n * @example\n * ```typescript\n * //  \n * class MyElement extends GLitElement() {\n *     connectedCallback() {\n *         super.connectedCallback();\n *         console.log('Connected!');\n *     }\n *     \n *     render() {\n *         return H`<div>Hello</div>`;\n *     }\n * }\n * \n * //     \n * class MyButton extends GLitElement(HTMLButtonElement) {\n *     static observedAttributes = ['disabled'];\n *     \n *     attributeChangedCallback(name, oldVal, newVal) {\n *         console.log(`${name} changed from ${oldVal} to ${newVal}`);\n *     }\n * }\n * \n * //  \n * @defineElement('my-element')\n * class MyElement extends GLitElement() {\n *     @property({ source: 'attr', name: 'value' })\n *     value: string = '';\n *     \n *     disconnectedCallback() {\n *         console.log('Disconnected!');\n *     }\n * }\n * ```\n */\nexport function GLitElement<T extends HTMLElement = HTMLElement>(\n    derivate?: HTMLElementConstructor<T>\n): GLitElementClass<T> {\n    const Base = (derivate ?? HTMLElement) as HTMLElementConstructor<T>;\n\n    //  \n    const cached = CSM.get(Base);\n    if (cached) return cached as GLitElementClass<T>;\n\n    /**\n     *      lifecycle\n     */\n    abstract class GLitElementImpl extends (Base as unknown as new (...args: any[]) => HTMLElement & CustomElementLifecycle) implements GLitElementInstance {\n        #shadowDOM?: ShadowRoot | null;\n        #styleElement?: HTMLStyleElement;\n        #defaultStyle?: HTMLStyleElement;\n        #initialized: boolean = false;\n\n        styleLibs: HTMLStyleElement[] = [];\n        adoptedStyleSheets: CSSStyleSheet[] = [];\n\n        //     \n        get styles(): any { return undefined; }\n        get initialAttributes(): Record<string, any> | (() => Record<string, any>) | undefined { return undefined; }\n\n        styleLayers(): string[] { return []; }\n\n        render(_weak?: WeakRef<any>): HTMLElement | DocumentFragment | Node {\n            return document.createElement(\"slot\");\n        }\n\n        constructor(...args: any[]) {\n            super(...args);\n            if (isNotExtended(this)) {\n                const shadowRoot = addRoot(\n                    this.shadowRoot ?? \n                    (this as any).createShadowRoot?.() ?? \n                    this.attachShadow({ mode: \"open\" })\n                );\n                const defStyle = (this.#defaultStyle ??= defaultStyle?.cloneNode?.(true) as HTMLStyleElement);\n                const layersStyle = shadowRoot.querySelector(`style[data-type=\"ux-layer\"]`);\n                if (layersStyle) {\n                    layersStyle.after(defStyle);\n                } else {\n                    shadowRoot.prepend(defStyle);\n                }\n            }\n            this.styleLibs ??= [];\n        }\n\n        protected $makeLayers(): string {\n            return `@layer ${[\"ux-preload\", \"ux-layer\", ...(this.styleLayers?.() ?? [])].join?.(\",\") ?? \"\"};`;\n        }\n\n        $init?(): void;\n\n        onInitialize(_weak?: WeakRef<any>): this {\n            return this;\n        }\n\n        onRender(_weak?: WeakRef<any>): this {\n            return this;\n        }\n\n        protected getProperty(key: string): any {\n            const current = (this as any)[inRenderKey];\n            (this as any)[inRenderKey] = true;\n            const cp = (this as any)[key];\n            (this as any)[inRenderKey] = current;\n            if (!current) {\n                delete (this as any)[inRenderKey];\n            }\n            return cp;\n        }\n\n        loadStyleLibrary($module: any): this {\n            const root = this.shadowRoot;\n            const module = typeof $module == \"function\" ? $module?.(root) : $module;\n\n            if (module instanceof HTMLStyleElement) {\n                this.styleLibs?.push?.(module);\n                if (this.#styleElement?.isConnected) {\n                    this.#styleElement?.before?.(module);\n                } else {\n                    this.shadowRoot?.prepend?.(module);\n                }\n            } else if (module instanceof CSSStyleSheet) {\n                let adoptedSheets = adoptedStyleSheetsCache.get(this);\n                if (!adoptedSheets) {\n                    adoptedStyleSheetsCache.set(this, adoptedSheets = []);\n                }\n                if (adoptedSheets.indexOf(module) < 0) {\n                    adoptedSheets.push(module);\n                }\n                if (root) {\n                    root.adoptedStyleSheets = [\n                        ...(root.adoptedStyleSheets || []),\n                        ...adoptedSheets.filter((s: CSSStyleSheet) => !root.adoptedStyleSheets?.includes(s))\n                    ];\n                }\n            } else {\n                const adopted = loadAsAdopted(module, \"ux-layer\");\n                let adoptedSheets = adoptedStyleSheetsCache.get(this);\n                if (!adoptedSheets) {\n                    adoptedStyleSheetsCache.set(this, adoptedSheets = []);\n                }\n                const addAdoptedSheet = (sheet: CSSStyleSheet) => {\n                    if (sheet && adoptedSheets!.indexOf(sheet) < 0) {\n                        adoptedSheets!.push(sheet);\n                    }\n                    if (root) {\n                        root.adoptedStyleSheets = [\n                            ...(root.adoptedStyleSheets || []),\n                            ...adoptedSheets!.filter((s: CSSStyleSheet) => !root.adoptedStyleSheets?.includes(s))\n                        ];\n                    }\n                };\n                if (adopted instanceof Promise) {\n                    adopted.then(addAdoptedSheet).catch(() => { });\n                } else if (adopted) {\n                    addAdoptedSheet(adopted);\n                }\n            }\n            return this;\n        }\n\n        createShadowRoot(): ShadowRoot {\n            return addRoot(this.shadowRoot ?? this.attachShadow({ mode: \"open\" })) as ShadowRoot;\n        }\n\n        // ============================================\n        // LIFECYCLE CALLBACKS\n        // ============================================\n\n        /**\n         *      DOM\n         */\n        connectedCallback(): void {\n            //     \n            if (super.connectedCallback) {\n                super.connectedCallback();\n            }\n\n            const weak = new WeakRef(this);\n\n            if (!this.#initialized) {\n                this.#initialized = true;\n                const shadowRoot = isNotExtended(this)\n                    ? (this.createShadowRoot?.() ?? this.shadowRoot ?? this.attachShadow({ mode: \"open\" }))\n                    : this.shadowRoot;\n\n                //  \n                const ctor = this.constructor as any;\n                const init = (this as any).$init ?? (ctor as any).prototype?.$init;\n                if (typeof init === \"function\") init.call(this);\n\n                //  \n                const attrs = typeof this.initialAttributes == \"function\"\n                    ? (this.initialAttributes as () => Record<string, any>)()\n                    : this.initialAttributes;\n                setAttributesIfNull(this, attrs);\n\n                this.onInitialize?.call(this, weak);\n\n                (this as any)[inRenderKey] = true;\n\n                if (isNotExtended(this) && shadowRoot) {\n                    const rendered = this.render?.call?.(this, weak) ?? document.createElement(\"slot\");\n                    const styleElement = loadCachedStyles(this, this.styles);\n\n                    if (styleElement instanceof HTMLStyleElement) {\n                        this.#styleElement = styleElement;\n                    }\n\n                    const elements = [\n                        H`<style data-type=\"ux-layer\" prop:innerHTML=${this.$makeLayers()}></style>`,\n                        this.#defaultStyle,\n                        ...(this.styleLibs.map(x => x.cloneNode?.(true)) || []),\n                        styleElement,\n                        rendered\n                    ].filter((x): x is Node => x != null && (isElement(x) as unknown as boolean));\n\n                    shadowRoot.append(...elements);\n\n                    const adoptedSheets = adoptedStyleSheetsCache.get(this) || [];\n                    if (adoptedSheets.length > 0) {\n                        shadowRoot.adoptedStyleSheets = [\n                            ...adoptedSheets.filter((s: CSSStyleSheet) => !shadowRoot.adoptedStyleSheets?.includes(s)),\n                            ...new Set([...(shadowRoot.adoptedStyleSheets || [])])\n                        ];\n                    }\n                }\n\n                this.onRender?.call?.(this, weak);\n                delete (this as any)[inRenderKey];\n            }\n        }\n\n        /**\n         *      DOM\n         */\n        disconnectedCallback(): void {\n            if (super.disconnectedCallback) {\n                super.disconnectedCallback();\n            }\n        }\n\n        /**\n         *       \n         */\n        adoptedCallback(): void {\n            if (super.adoptedCallback) {\n                super.adoptedCallback();\n            }\n        }\n\n        /**\n         *     \n         */\n        attributeChangedCallback(name: string, oldValue: string | null, newValue: string | null): void {\n            if (super.attributeChangedCallback) {\n                super.attributeChangedCallback(name, oldValue, newValue);\n            }\n        }\n    }\n\n    //  withProperties  \n    const result = withProperties(GLitElementImpl as unknown as HTMLElementConstructor<T & GLitElementInstance>);\n    CSM.set(Base, result);\n    console.log(\"result\", result);\n\n    return result as unknown as GLitElementClass<T>;\n}\n\n// ============================================\n//    \n// ============================================\n\n/**\n *      \n */\nexport type GLitElementDecorated<T extends HTMLElement = HTMLElement> = \n    InstanceType<GLitElementClass<T>>;\n\n/**\n *    observedAttributes\n */\nexport type ObservedAttributes<T extends string[]> = {\n    observedAttributes: T;\n    attributeChangedCallback(name: T[number], oldValue: string | null, newValue: string | null): void;\n};\n","type AnyHandler<E extends Event = Event> = (ev: E) => any;\n\ntype Hub = {\n    handlers: Set<AnyHandler>;\n    listener: (ev: Event) => void;\n    options: AddEventListenerOptions;\n};\n\nconst hubsByTarget = new WeakMap<EventTarget, Map<string, Hub>>();\n\nconst keyOf = (type: string, options: AddEventListenerOptions) => {\n    const capture = options?.capture ? \"1\" : \"0\";\n    const passive = options?.passive ? \"1\" : \"0\";\n    return `${type}|c:${capture}|p:${passive}`;\n};\n\nexport const lazyAddEventListener = <E extends Event = Event>(\n    target: EventTarget | null | undefined,\n    type: string,\n    handler: AnyHandler<E>,\n    options: AddEventListenerOptions = {}\n) => {\n    if (!target || typeof (target as any).addEventListener !== \"function\") return () => { };\n\n    // `once` is not compatible with a shared hub listener; callers should implement their own once-logic.\n    const normalized: AddEventListenerOptions = {\n        capture: Boolean(options.capture),\n        passive: Boolean(options.passive),\n    };\n\n    const key = keyOf(type, normalized);\n    let hubs = hubsByTarget.get(target);\n    if (!hubs) {\n        hubs = new Map();\n        hubsByTarget.set(target, hubs);\n    }\n\n    let hub = hubs.get(key);\n    if (!hub) {\n        const handlers = new Set<AnyHandler>();\n        const listener = (ev: Event) => {\n            for (const cb of Array.from(handlers)) {\n                try {\n                    cb(ev);\n                } catch (e) {\n                    console.warn(e);\n                }\n            }\n        };\n        hubs.set(key, hub = { handlers, listener, options: normalized });\n        (target as any).addEventListener(type, listener, normalized);\n    }\n\n    hub.handlers.add(handler as AnyHandler);\n\n    return () => {\n        const hubsNow = hubsByTarget.get(target);\n        const hubNow = hubsNow?.get(key);\n        if (!hubNow) return;\n\n        hubNow.handlers.delete(handler as AnyHandler);\n        if (hubNow.handlers.size > 0) return;\n\n        (target as any).removeEventListener(type, hubNow.listener, hubNow.options);\n        hubsNow?.delete(key);\n        if (hubsNow && hubsNow.size === 0) hubsByTarget.delete(target);\n    };\n};\n\ntype ProxiedStrategy = \"closest\" | \"bubble\";\ntype When = boolean | \"handled\";\n\ntype ProxiedConfig = {\n    strategy?: ProxiedStrategy;\n    preventDefault?: When;\n    stopPropagation?: When;\n    stopImmediatePropagation?: When;\n};\n\ntype ProxiedHub = {\n    targets: Map<HTMLElement, Set<AnyHandler>>;\n    unbindGlobal: (() => void) | null;\n    options: AddEventListenerOptions;\n    strategy: ProxiedStrategy;\n    config: ProxiedConfig;\n    dispatch: (ev: Event) => void;\n};\n\nconst proxiedByRoot = new WeakMap<EventTarget, Map<string, ProxiedHub>>();\n\nconst resolveHTMLElement = (el: any): HTMLElement | null => {\n    const resolved = (el as any)?.element ?? el;\n    return resolved instanceof HTMLElement ? resolved : null;\n};\n\nconst shouldApply = (when: When | undefined, hadMatch: boolean, hadHandled: boolean) => {\n    if (!when) return false;\n    if (when === \"handled\") return hadHandled;\n    return hadMatch;\n};\n\n/**\n * Proxied events:\n * - Installs **one** real DOM listener on `root` (per event/options/config), but only after the first element handler registers.\n * - Routes events to registered element handlers based on the composed path.\n * - Can conditionally call preventDefault/stop* only when a trigger matches (or when handled).\n */\nexport const addProxiedEvent = <E extends Event = Event>(\n    root: EventTarget | null | undefined,\n    type: string,\n    options: AddEventListenerOptions = { capture: true, passive: false },\n    config: ProxiedConfig = {}\n) => {\n    const target = root;\n    if (!target || typeof (target as any).addEventListener !== \"function\") {\n        return (_element: any, _handler: AnyHandler<E>) => () => { };\n    }\n\n    const normalized: AddEventListenerOptions = {\n        capture: Boolean(options.capture),\n        passive: Boolean(options.passive),\n    };\n    const strategy: ProxiedStrategy = config.strategy ?? \"closest\";\n\n    const key = `${type}|c:${normalized.capture ? \"1\" : \"0\"}|p:${normalized.passive ? \"1\" : \"0\"}|s:${strategy}|pd:${String(config.preventDefault ?? \"\")}|sp:${String(config.stopPropagation ?? \"\")}|sip:${String(config.stopImmediatePropagation ?? \"\")}`;\n\n    let hubs = proxiedByRoot.get(target);\n    if (!hubs) {\n        hubs = new Map();\n        proxiedByRoot.set(target, hubs);\n    }\n\n    let hub = hubs.get(key);\n    if (!hub) {\n        const targets = new Map<HTMLElement, Set<AnyHandler>>();\n\n        const dispatch = (ev: Event) => {\n            let hadMatch = false;\n            let hadHandled = false;\n\n            const callSet = (set: Set<AnyHandler> | undefined) => {\n                if (!set || set.size === 0) return;\n                hadMatch = true;\n                for (const cb of Array.from(set)) {\n                    const r = cb(ev);\n                    if (r) hadHandled = true;\n                }\n            };\n\n            const path = (ev as any)?.composedPath?.() as any[] | undefined;\n            if (Array.isArray(path)) {\n                if (strategy === \"closest\") {\n                    for (const n of path) {\n                        const el = resolveHTMLElement(n);\n                        if (!el) continue;\n                        const set = targets.get(el);\n                        if (!set) continue;\n                        callSet(set);\n                        break;\n                    }\n                } else {\n                    for (const n of path) {\n                        const el = resolveHTMLElement(n);\n                        if (!el) continue;\n                        callSet(targets.get(el));\n                    }\n                }\n            } else {\n                let cur = resolveHTMLElement((ev as any)?.target) as HTMLElement | null;\n                while (cur) {\n                    const set = targets.get(cur);\n                    if (set) {\n                        callSet(set);\n                        if (strategy === \"closest\") break;\n                    }\n                    const r = cur.getRootNode?.() as (ShadowRoot | Document | null);\n                    cur = (cur.parentElement || (r instanceof ShadowRoot ? r.host : null)) as HTMLElement | null;\n                }\n            }\n\n            if (shouldApply(config.preventDefault, hadMatch, hadHandled)) (ev as any)?.preventDefault?.();\n            if (shouldApply(config.stopImmediatePropagation, hadMatch, hadHandled)) (ev as any)?.stopImmediatePropagation?.();\n            if (shouldApply(config.stopPropagation, hadMatch, hadHandled)) (ev as any)?.stopPropagation?.();\n        };\n\n        hub = { targets, unbindGlobal: null, options: normalized, strategy, config, dispatch };\n        hubs.set(key, hub);\n    }\n\n    return (element: any, handler: AnyHandler<E>) => {\n        const el = resolveHTMLElement(element);\n        if (!el) return () => { };\n\n        // Attach the single real DOM listener only when the first trigger registers.\n        if (hub!.targets.size === 0 && !hub!.unbindGlobal) {\n            hub!.unbindGlobal = lazyAddEventListener(target, type, hub!.dispatch, hub!.options);\n        }\n\n        let set = hub!.targets.get(el);\n        if (!set) {\n            set = new Set();\n            hub!.targets.set(el, set);\n        }\n        set.add(handler as AnyHandler);\n\n        return () => {\n            const hubsNow = proxiedByRoot.get(target);\n            const h = hubsNow?.get(key);\n            if (!h) return;\n\n            const resolved = resolveHTMLElement(element);\n            if (!resolved) return;\n\n            const s = h.targets.get(resolved);\n            if (!s) return;\n            s.delete(handler as AnyHandler);\n            if (s.size === 0) h.targets.delete(resolved);\n\n            if (h.targets.size === 0) {\n                h.unbindGlobal?.();\n                h.unbindGlobal = null;\n                hubsNow?.delete(key);\n                if (hubsNow && hubsNow.size === 0) proxiedByRoot.delete(target);\n            }\n        };\n    };\n};\n","import { doBorderObserve, doContentObserve, addEvents, handleStyleChange, iterateContentBox, addEvent } from \"fest/dom\";\nimport { addToCallChain, numberRef, stringRef, booleanRef } from \"fest/object\";\nimport { lazyAddEventListener } from \"./LazyEvents\";\nimport { unref } from \"fest/core\";\nimport { toRef } from \"fest/core\";\n\n//\nconst ROOT = typeof document != \"undefined\" ? document?.documentElement : null;\nconst SELECTOR = \"ui-modal[type=\\\"contextmenu\\\"], ui-button, ui-taskbar, ui-navbar, ui-statusbar, button, label, input, ui-longtext, ui-focustext, ui-row-select, ui-row-button, .u2-input, .ui-input\";\nconst $set = (rv, key, val)=>{ if (rv?.deref?.() != null) { return (rv.deref()[key] = val); }; }\n\n//\ntype RefBool = { value: boolean };\ntype Area = {\n    left  : number;\n    top   : number;\n    right : number;\n    bottom: number;\n    width : number;\n    height: number;\n};\n\n//\ninterface TriggerOptions {\n    root?: any;\n    selector?: string;     // ,      \"dispose\"\n    closeEvents?: string[]; //    \"dispose\"\n    mouseLeaveDelay?: number; //   mouseleave\n}\n\n//\nexport function makeInterruptTrigger(\n    except: any = null,\n    ref: RefBool|Function = booleanRef(false),\n    closeEvents: string[] = [\"pointerdown\", \"click\", \"contextmenu\", \"scroll\"],\n    element: any = document?.documentElement\n) {\n    if (!element) return () => { };\n    const wr = new WeakRef(ref);\n    const close = typeof ref === \"function\" ? ref : (ev) => { (!(except?.contains?.(ev?.target) || ev?.target == (except?.element ?? except)) || !except) ? $set(wr, \"value\", false) : false; };\n    const listening = closeEvents.map((event) =>\n        lazyAddEventListener(element, event, close as any, { capture: false, passive: false })\n    );\n    const dispose = () => listening.forEach((ub) => ub?.());\n    addToCallChain(ref, Symbol.dispose, dispose);\n    return dispose;\n}\n\n//\nexport const doObserve = (holder, parent)=>{\n    if (!holder) { throw Error(\"Element is null...\"); };\n    if ( parent) { doContentObserve(parent); };\n    doBorderObserve(holder);\n}\n\n//\nexport const makeShiftTrigger = (callable, newItem?)=> ((evc)=>{\n    const ev = evc;\n    newItem ??= ev?.target ?? newItem;\n    if (!newItem.dataset.dragging) {\n        const n_coord: [number, number] = [ev.clientX, ev.clientY];\n        if (ev?.pointerId >= 0) {\n            (newItem as HTMLElement)?.setPointerCapture?.(ev?.pointerId);\n        };\n\n        //\n        const shifting = ((evc_l: any)=>{\n            const ev_l = evc_l;\n            ev_l?.preventDefault?.();\n            if (ev_l?.pointerId == ev?.pointerId) {\n                const coord: [number, number] = [evc_l.clientX, evc_l.clientY];\n                const shift: [number, number] = [coord[0] - n_coord[0], coord[1] - n_coord[1]];\n                if (Math.hypot(...shift) > 2) {\n                    newItem?.style?.setProperty?.(\"will-change\", \"inset, transform, translate, z-index\");\n\n                    //\n                    unbind?.(ev_l);\n                    callable?.(ev);\n                }\n            }\n        });\n\n        //\n        const releasePointer = ((evc_l)=>{\n            const ev_l = evc_l;\n            if (ev_l?.pointerId == ev?.pointerId) {\n                (newItem as HTMLElement)?.releasePointerCapture?.(ev?.pointerId);\n                unbind?.(ev_l);\n            }\n        });\n\n        //\n        const handler = {\n            \"pointermove\": shifting,\n            \"pointercancel\": releasePointer,\n            \"pointerup\": releasePointer\n        }\n\n        //\n        const unbind = ((evc_l)=>{\n            const ev_l = evc_l;\n            if (ev_l?.pointerId == ev?.pointerId) {\n                bindings?.forEach(binding => binding?.());\n            }\n        });\n\n        //\n        const bindings = addEvents(ROOT, handler);\n    }\n});\n\n//\nfunction deepContains(container: Node, target: Node): boolean {\n    let node: Node | null = target;\n\n    while (node) {\n        if (node === container) return true;\n\n        //\n        const anyNode = node as any;\n        if (anyNode.assignedSlot) {\n            node = anyNode.assignedSlot as Node;\n            continue;\n        }\n\n        //\n        if (node.parentNode) {\n            node = node.parentNode;\n            continue;\n        }\n\n        //\n        const root = (node as any).getRootNode?.();\n        if (root && (root as ShadowRoot).host) {\n            node = (root as ShadowRoot).host;\n        } else {\n            node = null;\n        }\n    }\n\n    return false;\n}\n\n//\nfunction isInside(target: Event | Node, container: Element): boolean {\n    if ('composedPath' in (target as Event) && typeof (target as Event).composedPath === 'function') {\n        return (target as Event).composedPath().includes(container);\n    }\n\n    //\n    const node = (target as any).target ? (target as any).target as Node : target as Node;\n    return node ? deepContains(container, node) : false;\n}\n\n//\nexport function makeClickOutsideTrigger(ref: RefBool, except: any = null, element: any, options: TriggerOptions = {}) {\n    const {\n        root = typeof document != \"undefined\" ? document?.documentElement : null,\n        closeEvents = [\"scroll\", \"click\", \"pointerdown\"],\n        mouseLeaveDelay = 100\n    } = options;\n\n    //\n    let mouseLeaveTimer: any = null;\n\n    //\n    const wr = new WeakRef(ref);\n    function onMouseLeave() { mouseLeaveTimer = setTimeout(() => { $set(wr, \"value\", false); }, mouseLeaveDelay); }\n    function onMouseEnter() { if (mouseLeaveTimer) clearTimeout(mouseLeaveTimer); }\n    function onDisposeEvent(ev: Event) { if (!isInside(ev, element?.element ?? element) && !isInside(ev, except?.element ?? except)) $set(wr, \"value\", false); }\n    function onPointerDown(ev: Event) {\n        const t = ev;\n        if (!isInside(t, element?.element ?? element) && !isInside(t, except?.element ?? except)) $set(wr, \"value\", false);\n    }\n\n    //\n    const listening = [\n        ...addEvents(root, Object.fromEntries(closeEvents.map(event => [event, onDisposeEvent]))),\n        addEvent(root, \"pointerdown\", onPointerDown)\n    ];\n    if (element) {\n        //listening.push(addEvent(element, \"mouseleave\", onMouseLeave), addEvent(element, \"mouseenter\", onMouseEnter));\n    }\n\n    //\n    function destroy() {\n        listening.forEach(ub=>ub?.());\n    }\n\n    //\n    addToCallChain(ref, Symbol.dispose, destroy);\n    return ref;\n}\n\n//\nexport const OOBTrigger = (element, ref, selector?, root = typeof document != \"undefined\" ? document?.documentElement : null) => {\n    ref = toRef(ref);\n    const checker = (ev) => {\n        let $ref = unref(ref);\n        const target = selector ? (ev?.target?.matches?.(selector) ? ev?.target : (ev?.target ?? root)?.querySelector?.(selector)) : ev?.target;\n        if (!target || (element != target)) { $ref.value = false; }\n    }\n    const cancel = () => { root?.removeEventListener?.(\"click\", checker); }\n    if (root) root.addEventListener?.(\"click\", checker); return cancel;\n}\n","import { getBoundingOrientRect, orientOf, addEvent, addEvents, hasParent, removeEvent } from \"fest/dom\";\nimport { cvt_cs_to_os, withCtx } from \"fest/core\";\nimport { Vector2D, vector2Ref } from \"fest/lure\";\n\n//\nexport class DecorWith {\n    #addition: any;\n\n    // needs prototype extends with Reflect\n    constructor(addition) { this.#addition = addition; }\n    get(target, name) { return withCtx(this.#addition, this.#addition?.[name]) ?? withCtx(target, target?.[name]); }\n    set(target, name, val) {\n        if (!Reflect.set(target, name, val)) {\n            this.#addition[name] = val;\n        }\n        return true;\n    }\n\n    ownKeys(target) { return [...(Reflect.ownKeys(target) ?? []), ...(Reflect.ownKeys(this.#addition) ?? [])]; }\n    getOwnPropertyDescriptor(target, name) { return Reflect.getOwnPropertyDescriptor(target, name) ?? Reflect.getOwnPropertyDescriptor(this.#addition, name); }\n    getPrototypeOf(target) { return Reflect.getPrototypeOf(target) ?? Reflect.getPrototypeOf(this.#addition); }\n    setPrototypeOf(target, proto) { return Reflect.setPrototypeOf(target, proto) ?? Reflect.setPrototypeOf(this.#addition, proto); }\n    isExtensible(target) { return Reflect.isExtensible(target) ?? Reflect.isExtensible(this.#addition); }\n    preventExtensions(target) { return Reflect.preventExtensions(target) ?? Reflect.preventExtensions(this.#addition); }\n    defineProperty(target, name, desc) { return Reflect.defineProperty(this.#addition, name, desc) ?? Reflect.defineProperty(target, name, desc); }\n    deleteProperty(target, name) { return Reflect.deleteProperty(this.#addition, name) ?? Reflect.deleteProperty(target, name); }\n    //construct(target, args, newTarget) { return Reflect.construct(this.#addition, args, newTarget) ?? Reflect.construct(target, args, newTarget); }\n}\n\n//\nexport const elementPointerMap = new WeakMap<any, any>();\nexport const agWrapEvent = (cb)=>{\n\n    //\n    const wpb = (ev: any)=>{\n        const el = (ev?.target?.matches?.(\".ui-orientbox\") ? ev?.target : null) || ev?.target?.closest?.(\".ui-orientbox\");\n        if (!el) { return cb(ev); }; //\n\n        // @ts-ignore\n        let {pointerCache, pointerMap} = elementPointerMap?.getOrInsert?.(el, { pointerCache: new Map<number, any>(), pointerMap: new Map<number, any>() });\n\n        //const zoom: number = zoomOf(ev?.target || el) || 1;\n        const coord: [number, number] = [(ev?.clientX || 0), (ev?.clientY || 0)];\n        const cache: any = pointerCache?.getOrInsert?.(ev?.pointerId || 0, {\n            client: coord,\n            orient: null,\n            boundingBox: null,\n            movement: vector2Ref(0, 0)\n        });\n\n        //\n        cache.delta  = [coord[0] - cache.client[0], coord[1] - cache.client[1]];\n        cache.movement.x.value = cache.delta[0];\n        cache.movement.y.value = cache.delta[1];\n        cache.orient = null, cache.client = coord;\n\n        //\n        const pointer = pointerMap?.getOrInsert?.(ev?.pointerId || 0, {\n            type: (ev?.type||\"pointer\"),\n            event: ev,\n            target: ev?.target || el,\n            cs_box: [el?.offsetWidth || 1, el?.offsetHeight || 1],\n            cap_element: null,\n\n            //\n            get client() { return cache.client; },\n            get orient() { return cache.orient ??= cvt_cs_to_os([...(pointer.client || cache.client)] as [number, number], [el?.offsetWidth || 1, el?.offsetHeight || 1], orientOf(ev.target || el) || 0); },\n            get movement() { return [cache.movement.x.value, cache.movement.y.value]; },\n            get boundingBox() { return (cache.boundingBox ??= getBoundingOrientRect(ev?.target || el, orientOf(ev.target || el) || 0)); },\n\n            //\n            capture(element = ev?.target || el) { return (pointer.cap_element = element?.setPointerCapture?.(ev?.pointerId || 0)); },\n            release(element = null) {\n                (element || pointer.cap_element || ev?.target || el)?.releasePointerCapture?.(ev?.pointerId || 0);\n                pointer.cap_element = null;\n            },\n        });\n\n        //\n        Object.assign(pointer, {\n            type: (ev?.type||\"pointer\"),\n            event: ev,\n            target: ev?.target || el,\n            cs_box: [el?.offsetWidth || 1, el?.offsetHeight || 1],\n            pointerId: ev?.pointerId || 0\n        });\n\n        //\n        if (ev?.type == \"contextmenu\" || ev?.type == \"click\" || ev?.type == \"pointerup\" || ev?.type == \"pointercancel\") {\n            pointerMap?.delete?.(ev?.pointerId || 0);\n            pointerCache?.delete?.(ev?.pointerId || 0);\n            if (ev?.type == \"pointercancel\") {\n                pointer?.release?.();\n            }\n        };\n\n        //\n        if (pointer && ev) { return cb(new Proxy(ev, new DecorWith(pointer))); };\n    }\n\n    //\n    return wpb;\n};\n\n//\nclass PointerEdge {\n    pointer: [number, number] = [0, 0];\n    results: any;\n\n    //\n    constructor(pointer: [number, number] = [0, 0]) {\n        this.pointer = pointer;\n        this.results = { left: false, top: false, bottom: false, right: false };\n    }\n\n    //\n    get left() { const current = Math.abs(this.pointer[0] - 0) < 10; return (this.results.left = current); }\n    get top () { const current = Math.abs(this.pointer[1] - 0) < 10; return (this.results.top  = current); }\n    get right () { const current = Math.abs(this.pointer[0] - window.innerWidth)  < 10; return (this.results.right  = current); }\n    get bottom() { const current = Math.abs(this.pointer[1] - window.innerHeight) < 10; return (this.results.bottom = current); }\n}\n\n//\ninterface EvStub { pointerId: number; }\ninterface HoldingElement {\n    shifting?: [number, number];\n    modified?: [number, number];\n    element?: WeakRef<HTMLElement>;\n    result?: [any, any];\n    propertyName?: string;\n}\n\n//\ninterface PointerObject {\n    id: number;\n    down?: [number, number],\n    event?: MouseEvent | PointerEvent | EvStub;\n    edges?: PointerEdge;\n    current: [number, number],\n    holding?: HoldingElement[];\n    movement: [number, number];\n};\n\n//\nconst preventedPointers = new Map<number, any>();\nexport const clickPrevention = (element, pointerId = 0)=>{\n    if (preventedPointers.has(pointerId)) { return; }\n\n    //\n    const rmev = ()=>{\n        preventedPointers.delete(pointerId);\n        dce?.forEach?.(unbind => unbind?.());\n        ece?.forEach?.(unbind => unbind?.());\n    }\n\n    //\n    const preventClick = (e: PointerEvent | MouseEvent | CustomEvent | any) => {\n        if (e?.pointerId == pointerId || e?.pointerId == null || pointerId == null || pointerId < 0) {\n            //e.stopPropagation();\n            e.preventDefault();\n            preventedPointers.set(pointerId, true);\n            rmev();\n        } else {\n            preventedPointers.delete(pointerId);\n        }\n    };\n\n    //\n    const emt: [(e: PointerEvent | MouseEvent | CustomEvent | any) => any, AddEventListenerOptions] = [preventClick, {once: true}];\n    const doc: [(e: PointerEvent | MouseEvent | CustomEvent | any) => any, AddEventListenerOptions] = [preventClick, {once: true, capture: true}];\n\n    //\n    const dce = addEvents(document.documentElement, {\n        \"click\": doc,\n        \"pointerdown\": doc,\n        \"contextmenu\": doc\n    });\n    const ece = addEvents(element, {\n        \"click\": emt,\n        \"pointerdown\": emt,\n        \"contextmenu\": emt\n    });\n    setTimeout(rmev, 10);\n}\n\n//\nlet PointerEventDrag: any = null;\nif (typeof PointerEvent != \"undefined\") {\n    PointerEventDrag = class PointerEventDrag extends PointerEvent {\n        #holding: any;\n        constructor(type, eventInitDict) { super(type, eventInitDict); this.#holding = eventInitDict?.holding; }\n        get holding() { return this.#holding; }\n        get event() { return this.#holding?.event; }\n        get result() { return this.#holding?.result; }\n        get shifting() { return this.#holding?.shifting; }\n        get modified() { return this.#holding?.modified; }\n        get canceled() { return this.#holding?.canceled; }\n        get duration() { return this.#holding?.duration; }\n        get element() { return this.#holding?.element?.deref?.() ?? null; }\n        get propertyName() { return this.#holding?.propertyName ?? \"drag\"; }\n    }\n} else {\n    PointerEventDrag = class PointerEventDrag {\n        #holding: any;\n        constructor(type, eventInitDict) { this.#holding = eventInitDict?.holding; }\n        get holding() { return this.#holding; }\n    }\n}\n\n//\nexport const draggingPointerMap = new WeakMap<any, any>();\nexport const grabForDrag = (\n    em,\n    ex: PointerEvent|any = { pointerId: 0, pointerType: \"mouse\" },\n    {\n        shifting = [0, 0],\n        result   = [{value: 0}, {value: 0}]\n    } = {}\n) => {\n    let last: any = ex;\n    let frameTime = 0.01, lastLoop = performance.now(), thisLoop;\n    const filterStrength  = 100;\n    const computeDuration = () => {\n        var thisFrameTime = (thisLoop=performance.now()) - lastLoop;\n        frameTime += (thisFrameTime - frameTime) / filterStrength;\n        lastLoop = thisLoop;\n        return frameTime;\n    }\n\n    //\n    const hm: any = {\n        result,\n        movement: [...(ex?.movement || [0, 0])],\n        shifting: [...shifting],\n        modified: [...shifting],\n        canceled: false,\n        duration: frameTime,\n        element: new WeakRef(em),\n        client: null///[0, 0]\n    };\n\n    //\n    const moveEvent = [/*agWrapEvent*/((evc)=>{\n        if (ex?.pointerId == evc?.pointerId) {\n            evc?.preventDefault?.();\n            if (hasParent(evc?.target, em)) {\n                const client = [...(evc?.client  || [evc?.clientX || 0, evc?.clientY || 0] || [0, 0])]; hm.duration = computeDuration();\n                hm.movement  = [...(hm.client ? [client?.[0] - (hm.client?.[0] || 0), client?.[1] - (hm.client?.[1] || 0)] : [0, 0])];\n                hm.client    = client;\n                hm.shifting[0] +=  hm.movement[0] || 0                   , hm.shifting[1] +=  hm.movement[1] || 0;\n                hm.modified[0]  = (hm.shifting[0] ?? hm.modified[0]) || 0, hm.modified[1]  = (hm.shifting[1] ?? hm.modified[1]) | 0;\n                em?.dispatchEvent?.(new PointerEventDrag(\"m-dragging\", {\n                    ...evc,\n                    bubbles: true,\n                    holding: hm,\n                    event: evc,\n                }));\n                if (hm?.result?.[0] != null) hm.result[0].value = hm.modified[0] || 0;\n                if (hm?.result?.[1] != null) hm.result[1].value = hm.modified[1] || 0;\n                if (hm?.result?.[2] != null) hm.result[2].value = 0;\n            }\n        }\n    }), {capture: true}];\n\n    // @ts-ignore\n    const promised = Promise.withResolvers();\n    const releaseEvent = [/*agWrapEvent*/((evc)=>{\n        if (ex?.pointerId == evc?.pointerId) {\n            const elm = em?.element || em;\n            if (hasParent(evc?.target, elm) || evc?.currentTarget?.contains?.(elm) || evc?.target == elm) {\n                if (evc?.type == \"pointerup\") { clickPrevention(elm, evc?.pointerId); };\n\n                //\n                queueMicrotask(() => promised?.resolve?.(result));\n                bindings?.forEach?.(binding => binding?.());\n                elm?.releaseCapturePointer?.(evc?.pointerId);\n                elm?.dispatchEvent?.(new PointerEventDrag(\"m-dragend\", { ...evc, bubbles: true, holding: hm, event: evc }));\n                hm.canceled = true; try { ex.pointerId = -1; } catch (_) { /* noop */ }\n            }\n        }\n    }), {capture: true}];\n\n    //\n    let bindings: any = null;\n    clickPrevention(em, ex?.pointerId);\n    queueMicrotask(() => {\n        if (em?.dispatchEvent?.(new PointerEventDrag(\"m-dragstart\", { ...ex, bubbles: true, holding: hm, event: ex }))) {\n            //ex?.capture?.(em);\n            em?.setPointerCapture?.(ex?.pointerId);\n\n            //\n            bindings = addEvents(em, {\n                \"pointermove\": moveEvent,\n                \"pointercancel\": releaseEvent,\n                \"pointerup\": releaseEvent\n            });\n\n            //\n            bindings?.push?.(...addEvents(document.documentElement, {\n                \"pointercancel\": releaseEvent,\n                \"pointerup\": releaseEvent\n            }));\n        } else { hm.canceled = true; }\n    });\n\n    //\n    return promised?.promise ?? result;\n};\n\n//\nexport const bindDraggable = (elementOrEventListener, onEnd:any = ()=>{}, draggable: any|null = [{value: 0}, {value: 0}], shifting: any = [0, 0])=>{\n    if (!draggable) { return; }\n    const process = (ev, el)=>grabForDrag(el ?? elementOrEventListener, ev, {result: draggable, shifting: typeof shifting == \"function\" ? shifting?.(draggable) : shifting})?.then?.(onEnd);\n\n    //\n    if (typeof elementOrEventListener?.addEventListener == \"function\") { addEvent(elementOrEventListener, \"pointerdown\", process); } else\n    if (typeof elementOrEventListener == \"function\")  { elementOrEventListener(process); } else\n    { throw new Error(\"bindDraggable: elementOrEventListener is not a function or an object with addEventListener\"); }\n\n    //\n    const dispose = ()=>{ if (typeof elementOrEventListener?.removeEventListener == \"function\") { removeEvent(elementOrEventListener, \"pointerdown\", process); } };\n    return { draggable, dispose, process };\n}\n","//import { visibleRef, H, Q } from \"fest/lure\";\nimport { addEvent } from \"fest/dom\";\nimport { visibleRef } from \"../../lure/core/Refs\";\nimport { addProxiedEvent } from \"../controllers/LazyEvents\";\nimport { bindWhileConnected } from \"../../lure/core/Binding\";\n\n//\nimport { registerContextMenu } from \"../tasking/BackNavigation\";\nimport Q from \"../../lure/node/Queried\";\nimport H from \"../../lure/node/Syntax\";\nimport { boundingBoxAnchorRef } from \"../space-ref/BBoxAnchor\";\nimport { makeInterruptTrigger } from \"../controllers/Trigger\";\nimport { withInsetWithPointer } from \"../../lure/core/Binding\";\n\n//\nexport interface RefBool { value?: boolean; }\nexport interface MenuItem {\n    id: string;\n    label: string;\n    icon: string;\n    action?: (initiator: HTMLElement, item: MenuItem, ev: MouseEvent) => void;\n}\n\n//\nexport interface CtxMenuDesc {\n    items?: MenuItem[][];\n    defaultAction?: (initiator: HTMLElement, item: MenuItem, ev: MouseEvent) => void;\n    buildItems?: (details: { event: MouseEvent; initiator: HTMLElement; trigger: HTMLElement; menu: HTMLElement; ctxMenuDesc: CtxMenuDesc }) => MenuItem[][] | void;\n    onBeforeOpen?: (details: { event: MouseEvent; initiator: HTMLElement; trigger: HTMLElement; menu: HTMLElement; ctxMenuDesc: CtxMenuDesc }) => boolean | void;\n    context?: any;\n    openedWith?: {\n        event: MouseEvent;\n        initiator: HTMLElement;\n        element: HTMLElement;\n        close: () => void;\n        context?: any;\n    } | null;\n}\n\n//\nexport const itemClickHandle = (ev: MouseEvent, ctxMenuDesc: CtxMenuDesc) => {\n    const id = Q(`[data-id]`, ev?.target as HTMLElement, 0, \"parent\")?.getAttribute?.(\"data-id\");\n    const item: MenuItem | undefined = ctxMenuDesc?.items\n        ?.find?.((I?: MenuItem[]) => I?.some?.((I: MenuItem) => I?.id == id))\n        ?.find?.((I: MenuItem) => I?.id == id);\n\n    (item?.action ?? ctxMenuDesc?.defaultAction)?.(\n        ctxMenuDesc?.openedWith?.initiator as HTMLElement,\n        item as MenuItem,\n        ctxMenuDesc?.openedWith?.event ?? ev\n    );\n\n    ctxMenuDesc?.openedWith?.close?.();\n\n    const vr = getBoundVisibleRef(ctxMenuDesc?.openedWith?.element as HTMLElement);\n    if (vr != null) vr.value = false;\n};\n\nconst visibleMap = new WeakMap<HTMLElement, RefBool | null>();\n\n// Proxied trigger handling: guarantees ONE real `contextmenu` listener on documentElement.\n// preventDefault/stopImmediatePropagation ONLY when the handler returns truthy (\"handled\").\nconst registerCtxMenu = typeof document !== \"undefined\" && document?.documentElement\n    ? addProxiedEvent<MouseEvent>(\n        document.documentElement,\n        \"contextmenu\",\n        { capture: true, passive: false },\n        { strategy: \"closest\", preventDefault: \"handled\", stopImmediatePropagation: \"handled\" }\n    )\n    : (_el: any, _handler: any) => () => { };\n\nconst getBoundVisibleRef = (menuElement: HTMLElement): RefBool | null => {\n    if (menuElement == null) return null; // @ts-ignore\n    return visibleMap?.getOrInsertComputed?.(menuElement, () => visibleRef(menuElement, false)) as RefBool;\n};\n\nexport const bindMenuItemClickHandler = (menuElement: HTMLElement, menuDesc: CtxMenuDesc) => {\n    const handler = (ev: MouseEvent) => { itemClickHandle(ev, menuDesc); };\n    const listening = addEvent(menuElement, \"click\", handler, { composed: true });\n    return () => listening?.();\n};\n\nexport const getGlobalContextMenu = (parent: HTMLElement | Document = document) => {\n    let menu = Q('ui-modal[type=\"contextmenu\"]', parent as HTMLElement);\n    if (!menu) {\n        menu = H`<ui-modal type=\"contextmenu\"></ui-modal>`;\n        (parent instanceof Document ? parent.body : parent).append(menu);\n    }\n    return menu as HTMLElement;\n};\n\nexport const makeMenuHandler = (\n    triggerElement: HTMLElement,\n    placement: any,\n    ctxMenuDesc: CtxMenuDesc,\n    menuElement?: HTMLElement\n) => {\n    return (ev: MouseEvent) => {\n        let handled = false;\n\n        const menu = menuElement || getGlobalContextMenu();\n        const visibleRef = getBoundVisibleRef(menu);\n\n        const initiator = (ev?.target as HTMLElement | null) ?? triggerElement ?? (document.elementFromPoint(ev?.clientX || 0, ev?.clientY || 0) as HTMLElement);\n        const details = { event: ev, initiator: initiator as HTMLElement, trigger: triggerElement, menu: menu, ctxMenuDesc };\n        ctxMenuDesc.context = details;\n\n        if (ctxMenuDesc?.onBeforeOpen?.(details) === false) {\n            return handled;\n        }\n\n        const builtItems = ctxMenuDesc?.buildItems?.(details);\n        if (Array.isArray(builtItems) && builtItems.length) {\n            ctxMenuDesc.items = builtItems;\n        }\n\n        if (visibleRef?.value && ev?.type !== \"contextmenu\") {\n            visibleRef.value = false;\n            ctxMenuDesc?.openedWith?.close?.();\n            return handled;\n        }\n\n        if (initiator && visibleRef) {\n            handled = true;\n\n            // TODO: use reactive mapped ctx-menu element\n            menu.innerHTML = \"\";\n            visibleRef.value = true;\n\n            menu?.append?.(\n                ...(ctxMenuDesc?.items\n                    ?.map?.((section, sIdx) => {\n                        const items = section?.map?.((item) =>\n                            H`<li data-id=${item?.id || \"\"}><ui-icon icon=${item?.icon || \"\"}></ui-icon><span>${item?.label || \"\"}</span></li>`\n                        );\n                        const separator = (section?.length > 1 && sIdx !== ((ctxMenuDesc?.items?.length || 0) - 1))\n                            ? H`<li class=\"ctx-menu-separator\"></li>`\n                            : null;\n                        return [...items, separator];\n                    })\n                    ?.flat?.()\n                    ?.filter?.((E) => !!E) || [])\n            );\n\n            const where = withInsetWithPointer?.(menu, placement?.(ev, initiator));\n            const unbindClick = bindMenuItemClickHandler(menu, ctxMenuDesc);\n\n            // Close when interacting outside the menu.\n            const untrigger = makeInterruptTrigger?.(\n                menu,\n                (e: MouseEvent) => { // @ts-ignore\n                    const menuAny = menu as any;\n                    if (!(menu?.contains?.((e?.target ?? null) as any) || e?.target == (menuAny?.element ?? menuAny)) || !e?.target) {\n                        ctxMenuDesc?.openedWith?.close?.();\n                        const vr = getBoundVisibleRef(menu);\n                        if (vr != null) vr.value = false;\n                    }\n                },\n                [\"click\", \"pointerdown\", \"scroll\"]\n            );\n\n            // While open: suppress native context menu on the menu element itself.\n            const unmenuCtx = registerCtxMenu(menu, () => true);\n\n            ctxMenuDesc.openedWith = {\n                initiator: initiator as HTMLElement,\n                element: menu,\n                event: ev,\n                context: ctxMenuDesc?.context,\n                close() {\n                    visibleRef.value = false;\n                    ctxMenuDesc.openedWith = null;\n                    unbindClick?.();\n                    where?.();\n                    untrigger?.();\n                    unmenuCtx?.();\n                    // @ts-ignore\n                    if (ctxMenuDesc._backUnreg) { ctxMenuDesc._backUnreg(); ctxMenuDesc._backUnreg = null; }\n                },\n            };\n\n            // Register with back navigation\n            // @ts-ignore\n            if (!ctxMenuDesc._backUnreg && visibleRef) {\n                // @ts-ignore\n                ctxMenuDesc._backUnreg = registerContextMenu(menu, visibleRef, () => {\n                    ctxMenuDesc?.openedWith?.close?.();\n                });\n            }\n        }\n\n        return handled;\n    };\n};\n\n// use cursor as anchor based on contextmenu\nexport const ctxMenuTrigger = (triggerElement: HTMLElement, ctxMenuDesc: CtxMenuDesc, menuElement?: HTMLElement) => {\n    const evHandler = makeMenuHandler(triggerElement, (ev) => [ev?.clientX, ev?.clientY, 200], ctxMenuDesc, menuElement);\n\n    // Activate trigger + global listener only when trigger element is actually connected.\n    const unbindConnected = bindWhileConnected(triggerElement, () => {\n        return registerCtxMenu(triggerElement, evHandler as any);\n    });\n\n    return () => {\n        unbindConnected?.();\n    };\n};\n\n// bit same as contextmenu, but different by anchor and trigger (from element drop-down)\nexport const dropMenuTrigger = (triggerElement: HTMLElement, ctxMenuDesc: CtxMenuDesc, menuElement?: HTMLElement) => {\n    const menu = menuElement || Q('ui-modal[type=\"menulist\"]', document.body) || getGlobalContextMenu();\n\n    const anchorElement = triggerElement; // @ts-ignore\n    const evHandler = makeMenuHandler(triggerElement, (ev) => boundingBoxAnchorRef(anchorElement)?.slice?.(0, 3), ctxMenuDesc, menu);\n    const untrigger = makeInterruptTrigger?.(\n        menu,\n        (ev: MouseEvent) => { // @ts-ignore\n            if (!(menu?.contains?.(ev?.target) || ev?.target == (triggerElement?.element ?? triggerElement)) || !ev?.target) {\n                ctxMenuDesc?.openedWith?.close?.();\n                const vr = getBoundVisibleRef(menu);\n                if (vr != null) vr.value = false;\n            }\n        },\n        [\"click\", \"pointerdown\", \"scroll\"]\n    );\n\n    const listening = addEvent(triggerElement, \"click\", evHandler, { composed: true });\n    return () => { untrigger?.(); listening?.(); };\n};\n","import { UUIDv4, Promised } from 'fest/core';\nimport { observe } from 'fest/object';\nimport { createWorkerChannel, createQueuedOptimizedWorkerChannel, QueuedWorkerChannel } from 'fest/uniform';\n\n// Import the OPFS worker using Vite's worker syntax\nimport OPFSWorker from './OPFS.uniform.worker.ts?worker';\n\n//\nlet workerChannel: any = null;\nconst isServiceWorker = typeof ServiceWorkerGlobalScope !== \"undefined\" && self instanceof ServiceWorkerGlobalScope;\n\n//\nconst observers = new Map();\n\nlet workerInitPromise: Promise<any> | null = null;\n\nexport const ensureWorker = (): Promise<any> => {\n    if (workerInitPromise) return workerInitPromise;\n\n    workerInitPromise = new Promise(async (resolve) => {\n        // In Service Worker context we never instantiate dedicated worker, directHandlers are used instead\n        if (typeof Worker !== \"undefined\" && !isServiceWorker) {\n            try {\n                // Create basic worker channel first to test\n                const baseChannel = await createWorkerChannel({\n                    name: \"opfs-worker\",\n                    script: OPFSWorker\n                });\n\n                // Create queued optimized worker channel using the base channel\n                workerChannel = new QueuedWorkerChannel(\"opfs-worker\", async () => baseChannel, {\n                    timeout: 30000, // 30 second timeout for file operations (file ops can be slow)\n                    retries: 3,\n                    batching: true, // Enable message batching for better performance\n                    compression: false // File operations don't benefit from compression\n                });\n\n                // Resolve immediately - operations will queue until channel is ready\n                resolve(workerChannel);\n            } catch (e) {\n                console.warn(\"OPFSUniformWorker instantiation failed, falling back to main thread...\", e);\n                workerChannel = null;\n                resolve(null);\n            }\n        } else {\n            workerChannel = null;\n            resolve(null);\n        }\n    });\n\n    return workerInitPromise;\n};\n\n// Direct OPFS handlers for Service Worker context (where postMessage doesn't work as expected)\n// Direct OPFS handlers for Service Worker context (where postMessage doesn't work as expected)\nexport const directHandlers: Record<string, (payload: any) => Promise<any>> = {\n    readDirectory: async ({ rootId, path, create }: any) => {\n        try {\n            const root = await navigator.storage.getDirectory();\n            const parts = (path || \"\").trim().replace(/\\/+/g, \"/\").split(\"/\").filter((p: string) => p);\n            let current = root;\n            for (const part of parts) {\n                current = await current.getDirectoryHandle(part, { create });\n            }\n            const entries: any[] = [];\n            // @ts-ignore\n            for await (const [name, entry] of current.entries()) {\n                entries.push([name, entry]);\n            }\n            return entries;\n        } catch (e) {\n            console.warn(\"Direct readDirectory error:\", e);\n            return [];\n        }\n    },\n\n    readFile: async ({ rootId, path, type }: any) => {\n        try {\n            const root = await navigator.storage.getDirectory();\n            const parts = (path || \"\").trim().replace(/\\/+/g, \"/\").split(\"/\").filter((p: string) => p);\n            const filename = parts.pop();\n            let dir = root;\n            for (const part of parts) {\n                dir = await dir.getDirectoryHandle(part, { create: false });\n            }\n            const fileHandle = await dir.getFileHandle(filename!, { create: false });\n            const file = await fileHandle.getFile();\n            if (type === \"text\") return await file.text();\n            if (type === \"arrayBuffer\") return await file.arrayBuffer();\n            return file;\n        } catch (e) {\n            console.warn(\"Direct readFile error:\", e);\n            return null;\n        }\n    },\n\n    writeFile: async ({ rootId, path, data }: any) => {\n        try {\n            const root = await navigator.storage.getDirectory();\n            const parts = (path || \"\").trim().replace(/\\/+/g, \"/\").split(\"/\").filter((p: string) => p);\n            const filename = parts.pop();\n            let dir = root;\n            for (const part of parts) {\n                dir = await dir.getDirectoryHandle(part, { create: true });\n            }\n            const fileHandle = await dir.getFileHandle(filename!, { create: true });\n            const writable = await fileHandle.createWritable();\n            await writable.write(data);\n            await writable.close();\n            return true;\n        } catch (e) {\n            console.warn(\"Direct writeFile error:\", e);\n            return false;\n        }\n    },\n\n    remove: async ({ rootId, path, recursive }: any) => {\n        try {\n            const root = await navigator.storage.getDirectory();\n            const parts = (path || \"\").trim().replace(/\\/+/g, \"/\").split(\"/\").filter((p: string) => p);\n            const name = parts.pop();\n            let dir = root;\n            for (const part of parts) {\n                dir = await dir.getDirectoryHandle(part, { create: false });\n            }\n            await dir.removeEntry(name!, { recursive });\n            return true;\n        } catch {\n            return false;\n        }\n    },\n\n    copy: async ({ from, to }: any) => {\n        try {\n            const copyRecursive = async (source: any, dest: any) => {\n                if (source.kind === 'directory') {\n                    for await (const [name, entry] of source.entries()) {\n                        if (entry.kind === 'directory') {\n                            const newDest = await dest.getDirectoryHandle(name, { create: true });\n                            await copyRecursive(entry, newDest);\n                        } else {\n                            const file = await entry.getFile();\n                            const newFile = await dest.getFileHandle(name, { create: true });\n                            const writable = await newFile.createWritable();\n                            await writable.write(file);\n                            await writable.close();\n                        }\n                    }\n                } else {\n                    const file = await source.getFile();\n                    const writable = await dest.createWritable();\n                    await writable.write(file);\n                    await writable.close();\n                }\n            };\n            await copyRecursive(from, to);\n            return true;\n        } catch (e) {\n            console.warn(\"Direct copy error:\", e);\n            return false;\n        }\n    },\n\n    // Placeholder for observe/unobserve (FileSystemObserver not available in all contexts)\n    observe: async () => false,\n    unobserve: async () => true,\n    mount: async () => true,\n    unmount: async () => true\n};\n\n//\nexport const post = (type: string, payload: any = {}, transfer: any[] = []) => {\n    // In Service Worker context, execute directly instead of using postMessage\n    if (isServiceWorker && directHandlers[type]) {\n        return directHandlers[type](payload);\n    }\n\n    return new Promise(async (resolve, reject) => {\n        try {\n            const channel = await ensureWorker();\n            if (!channel) {\n                // Fallback to direct handlers if no worker channel available\n                if (directHandlers[type]) {\n                    return resolve(directHandlers[type](payload));\n                }\n                return reject(new Error('No worker channel available'));\n            }\n\n            // Use optimized uniform channel API\n            const result = await channel.request(type, payload);\n            resolve(result);\n        } catch (err) {\n            reject(err);\n        }\n    });\n};\n\n//\nexport const getDir = (dest) => {\n    if (typeof dest != \"string\") return dest; dest = dest?.trim?.() || dest;\n    if (!dest?.endsWith?.(\"/\")) { dest = dest?.trim?.()?.split?.(\"/\")?.slice(0, -1)?.join?.(\"/\")?.trim?.() || dest; };\n    const p1 = !dest?.trim()?.endsWith(\"/\") ? (dest + \"/\") : dest; return (!p1?.startsWith(\"/\") ? (\"/\" + p1) : p1);\n}\n\n//\nexport const imageImportDesc = {\n    startIn: \"pictures\", multiple: false,\n    types: [{ description: \"wallpaper\", accept: { \"image/*\": [\".png\", \".gif\", \".jpg\", \".jpeg\", \".webp\", \".jxl\",] }, }]\n}\n\n//\nexport const generalFileImportDesc = {\n    startIn: \"documents\", multiple: false,\n    types: [{ description: \"files\", accept: { \"application/*\": [\".txt\", \".md\", \".html\", \".htm\", \".css\", \".js\", \".json\", \".csv\", \".xml\", \".jpg\", \".jpeg\", \".png\", \".gif\", \".webp\", \".svg\", \".ico\", \".mp3\", \".wav\", \".mp4\", \".webm\", \".pdf\", \".zip\", \".rar\", \".7z\",] }, }]\n}\n\n// \"/\" default is OPFS root (but may another root), \"/user/\" is OPFS root by default too, \"/assets/\" is unknown backend related assets\nexport const mappedRoots = new Map<string, () => Promise<any>>([\n    [\"/\", async () => ((await navigator?.storage?.getDirectory?.()))],\n    [\"/user/\", async () => (await navigator?.storage?.getDirectory?.())],\n    [\"/assets/\", async () => { console.warn(\"Backend related API not implemented!\"); return null; }],\n]);\n\n//\nexport const currentHandleMap = new Map<string, any>()\n\n//\nexport const mountAsRoot = async (forId: string, copyFromInternal?: boolean) => {\n    const cleanId = forId?.trim?.()?.replace?.(/^\\//, \"\")?.trim?.()?.split?.(\"/\")?.filter?.(p => !!p?.trim?.())?.at?.(0);\n\n    // @ts-ignore\n    const rootHandle = currentHandleMap?.get(cleanId) ?? (await showDirectoryPicker?.({\n        mode: \"readwrite\",\n        id: `${cleanId}`\n    })?.catch?.(console.warn.bind(console)));\n\n    //\n    if (rootHandle && cleanId && typeof cleanId == \"string\") { currentHandleMap?.set?.(cleanId, rootHandle); };\n    if (rootHandle && typeof localStorage != \"undefined\") {\n        localStorage?.setItem?.(\"opfs.mounted\", JSON.stringify([...JSON.parse(localStorage?.getItem?.(\"opfs.mounted\") || \"[]\"), cleanId]));\n    };\n\n    //\n    if (rootHandle) {\n        // Sync to worker\n        post('mount', { id: cleanId, handle: rootHandle });\n    }\n\n    //\n    if (copyFromInternal && rootHandle && cleanId == \"user\") {\n        const internalRoot = await navigator?.storage?.getDirectory?.();\n        await copyFromOneHandlerToAnother(internalRoot, rootHandle, {})?.catch?.(console.warn.bind(console));\n    };\n\n    //\n    return rootHandle;\n}\n\n//\nexport const unmountAsRoot = async (forId: string) => {\n    if (typeof localStorage != \"undefined\") {\n        localStorage?.setItem?.(\"opfs.mounted\", JSON.stringify(JSON.parse(localStorage?.getItem?.(\"opfs.mounted\") || \"[]\").filter((id: string) => id != forId)));\n    }\n    // Sync to worker\n    post('unmount', { id: forId });\n}\n\n// Enhanced root resolution function\nexport async function resolveRootHandle(rootHandle: any, relPath: string = \"\"): Promise<any> {\n    // if is null, just return OPFS root\n    if (rootHandle == null || rootHandle == undefined || rootHandle?.trim?.()?.length == 0) {\n        rootHandle = \"/user/\";\n    }\n\n    //\n    const cleanId = typeof rootHandle == \"string\" ? rootHandle?.trim?.()?.replace?.(/^\\//, \"\")?.trim?.()?.split?.(\"/\")?.filter?.(p => !!p?.trim?.())?.at?.(0) : null;\n    if (cleanId) {\n        if (typeof localStorage != \"undefined\" && JSON.parse(localStorage?.getItem?.(\"opfs.mounted\") || \"[]\").includes(cleanId)) {\n            // @ts-ignore\n            rootHandle = currentHandleMap?.get(cleanId);\n        }\n        if (!rootHandle) { rootHandle = (await mappedRoots?.get?.(`/${cleanId}/`)?.()) ?? (await navigator.storage.getDirectory()); };\n    }\n\n    //\n    if (rootHandle instanceof FileSystemDirectoryHandle) {\n        return rootHandle;\n    }\n\n    // Normalize relPath for root matching\n    const normalizedPath = relPath?.trim?.() || \"/\";\n    const pathForMatch = normalizedPath.startsWith(\"/\") ? normalizedPath : \"/\" + normalizedPath;\n\n    // Find the best matching root from mappedRoots\n    let bestMatch: (() => Promise<any>) | null = null;\n    let bestMatchLength = 0;\n\n    //\n    for (const [rootPath, rootResolver] of mappedRoots.entries()) {\n        if (pathForMatch.startsWith(rootPath) && rootPath.length > bestMatchLength) {\n            bestMatch = rootResolver;\n            bestMatchLength = rootPath.length;\n        }\n    }\n\n    // Use the best matching root resolver, fallback to OPFS root\n    try {\n        const resolvedRoot = bestMatch ? await bestMatch() : null;\n        return resolvedRoot || await navigator?.storage?.getDirectory?.();\n    } catch (error) {\n        console.warn(\"Failed to resolve root handle, falling back to OPFS root:\", error);\n        return await navigator?.storage?.getDirectory?.();\n    }\n}\n\n// Enhanced path normalization with relative directory support\nexport function normalizePath(basePath: string = \"\", relPath: string): string {\n    if (!relPath?.trim()) return basePath;\n\n    const cleanRelPath = relPath.trim();\n\n    // Handle absolute paths (starting with /)\n    if (cleanRelPath.startsWith(\"/\")) {\n        return cleanRelPath;\n    }\n\n    // Handle relative paths\n    const baseParts = basePath.split(\"/\").filter(p => p?.trim());\n    const relParts = cleanRelPath.split(\"/\").filter(p => p?.trim());\n\n    for (const part of relParts) {\n        if (part === \".\") {\n            // Current directory - no change\n            continue;\n        } else if (part === \"..\") {\n            // Parent directory - go up one level\n            if (baseParts.length > 0) {\n                baseParts.pop();\n            }\n        } else {\n            // Regular directory/file name\n            baseParts.push(part);\n        }\n    }\n\n    return \"/\" + baseParts.join(\"/\");\n}\n\n// Enhanced path resolution that combines root mapping and relative path handling\nexport async function resolvePath(rootHandle: any, relPath: string, basePath: string = \"\"): Promise<{ rootHandle: any, resolvedPath: string }> {\n    // First normalize the relative path\n    const normalizedRelPath = normalizePath(basePath, relPath);\n\n    // Then resolve the root handle\n    const resolvedRootHandle = await resolveRootHandle(rootHandle, normalizedRelPath);\n\n    return {\n        rootHandle: resolvedRootHandle,\n        resolvedPath: normalizedRelPath\n    };\n}\n\n\n//\nexport function handleError(logger, status, message) { logger?.(status, message); return null; }\nexport function defaultLogger(status, message) { console.trace(`[${status}] ${message}`); };\nexport function getFileExtension(path) { return path?.trim?.()?.split?.(\".\")?.[1]; }\nexport function detectTypeByRelPath(relPath) { if (relPath?.trim()?.endsWith?.('/')) return 'directory'; return 'file'; }\nexport function getMimeTypeByFilename(filename) {\n    const ext = filename?.split?.('.')?.pop?.()?.toLowerCase?.();\n    const mimeTypes = {\n        'txt': 'text/plain',\n        'md': 'text/markdown',\n        'html': 'text/html',\n        'htm': 'text/html',\n        'css': 'text/css',\n        'js': 'application/javascript',\n        'json': 'application/json',\n        'csv': 'text/csv',\n        'xml': 'application/xml',\n        'jpg': 'image/jpeg',\n        'jpeg': 'image/jpeg',\n        'png': 'image/png',\n        'gif': 'image/gif',\n        'webp': 'image/webp',\n        'svg': 'image/svg+xml',\n        'ico': 'image/x-icon',\n        'mp3': 'audio/mpeg',\n        'wav': 'audio/wav',\n        'mp4': 'video/mp4',\n        'webm': 'video/webm',\n        'pdf': 'application/pdf',\n        'zip': 'application/zip',\n        'rar': 'application/vnd.rar',\n        '7z': 'application/x-7z-compressed',\n        // ...\n    };\n    return mimeTypes[ext] || 'application/octet-stream';\n}\n\n//\nexport const hasFileExtension = (path: string) => {\n    return path?.trim?.()?.split?.(\".\")?.[1]?.trim?.()?.length > 0;\n}\n\n//\nexport async function getDirectoryHandle(rootHandle, relPath, { create = false, basePath = \"\" } = {}, logger = defaultLogger) {\n    try {\n        const { rootHandle: resolvedRoot, resolvedPath } = await resolvePath(rootHandle, relPath, basePath);\n        // Remove /user/ prefix\n        const cleanPath = resolvedPath?.trim?.()?.startsWith?.(\"/user/\") ?\n            resolvedPath?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.() : resolvedPath;\n\n        const parts = cleanPath.split('/').filter((p) => (!!p?.trim?.()));\n        if (parts.length > 0 && hasFileExtension(parts[parts.length - 1]?.trim?.())) { parts?.pop?.(); };\n\n        // Fallback to direct access if we need to return a Handle\n        // But we want to use worker for operations.\n        // Current API returns Handle.\n        // If we want optimization, we should use worker.\n        // But getDirectoryHandle returns a Handle.\n\n        let dir = resolvedRoot;\n        if (parts?.length > 0) {\n            for (const part of parts) {\n                dir = await dir?.getDirectoryHandle?.(part, { create });\n                if (!dir) { break; };\n            }\n        }\n        return dir;\n    } catch (e: any) { return handleError(logger, 'error', `getDirectoryHandle: ${e.message}`); }\n}\n\n//\nexport async function getFileHandle(rootHandle, relPath, { create = false, basePath = \"\" } = {}, logger = defaultLogger) {\n    try {\n        const { rootHandle: resolvedRoot, resolvedPath } = await resolvePath(rootHandle, relPath, basePath);\n        const cleanPath = resolvedPath?.trim?.()?.startsWith?.(\"/user/\") ?\n            resolvedPath?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.() : resolvedPath;\n\n        const parts = cleanPath.split('/').filter((d) => (!!d?.trim?.()));\n        if (parts?.length == 0) return null;\n\n        const filePath = parts.length > 0 ? parts[parts.length - 1]?.trim?.()?.replace?.(/\\s+/g, '-') : '';\n        const dirName = parts.length > 1 ? parts?.slice(0, -1)?.join?.('/')?.trim?.()?.replace?.(/\\s+/g, '-') : '';\n\n        if (cleanPath?.trim?.()?.endsWith?.(\"/\")) { return null; };\n\n        // Delegate to getDirectoryHandle (which is currently main thread)\n        const dir = await getDirectoryHandle(resolvedRoot, dirName, { create, basePath }, logger);\n        return dir?.getFileHandle?.(filePath, { create });\n    } catch (e: any) { return handleError(logger, 'error', `getFileHandle: ${e.message}`); }\n}\n\n//\nexport async function getHandler(rootHandle, relPath, options: { basePath?: string } = {}, logger = defaultLogger) {\n    try {\n        const { rootHandle: resolvedRootHandle, resolvedPath } = await resolvePath(rootHandle, relPath, options?.basePath || \"\");\n        const type = detectTypeByRelPath(resolvedPath);\n        if (type == 'directory') {\n            const dir = await getDirectoryHandle(resolvedRootHandle, resolvedPath?.trim?.()?.replace?.(/\\/$/, ''), options, logger);\n            if (dir) return { type: 'directory', handle: dir };\n        } else {\n            const file = await getFileHandle(resolvedRootHandle, resolvedPath, options, logger);\n            if (file) return { type: 'file', handle: file };\n        }\n        return null;\n    } catch (e: any) { return handleError(logger, 'error', `getHandler: ${e.message}`); }\n}\n\n//\nexport async function createHandler(rootHandle, relPath, options: { basePath?: string } = {}, logger = defaultLogger) {\n    try {\n        const { rootHandle: resolvedRootHandle, resolvedPath } = await resolvePath(rootHandle, relPath, options?.basePath || \"\");\n        const type = detectTypeByRelPath(resolvedPath);\n        if (type == 'directory') {\n            return await getDirectoryHandle(resolvedRootHandle, resolvedPath?.trim?.()?.replace?.(/\\/$/, ''), options, logger);\n        } else {\n            return await getFileHandle(resolvedRootHandle, resolvedPath, options, logger);\n        }\n    } catch (e: any) { return handleError(logger, 'error', `createHandler: ${e.message}`); }\n}\n\n// Shared State Structure\ninterface DirectoryState {\n    mapCache: Map<string, any>;\n    dirHandle: Promise<any>;\n    resolvePath: string;\n    observationId: string;\n    refCount: number;\n    cleanup: () => void;\n    updateCache: () => Promise<any>;\n}\n\nexport const directoryCacheMap = new Map<string, DirectoryState>();\n\n\n//\nexport const mayNotPromise = (pms: any, cb: (pms: any) => any, errCb: (e: any) => any = console.warn.bind(console)) => {\n    if (typeof pms?.then == \"function\") {\n        return pms?.then?.(cb)?.catch?.(errCb);\n    } else {\n        try {\n            return cb(pms);\n        } catch (e: any) {\n            errCb(e);\n            return null;\n        }\n    }\n}\n\n//\nexport function openDirectory(\n    rootHandle,\n    relPath,\n    options: { create: boolean; basePath?: string } = { create: false },\n    logger = defaultLogger\n) {\n    let cacheKey = \"\";\n\n    // :     reactive-map\n    // ( ,     shared mapCache  state)\n    let localMapCache: Map<string, any> = observe(new Map<string, any>()) as any;\n\n    const pathPromise = (async () => {\n        try {\n            const { rootHandle: resolvedRootHandle, resolvedPath } = await resolvePath(\n                rootHandle,\n                relPath,\n                options?.basePath || \"\"\n            );\n            cacheKey = `${resolvedRootHandle?.name || \"root\"}:${resolvedPath}`;\n            return { rootHandle: resolvedRootHandle, resolvedPath };\n        } catch {\n            return { rootHandle: null, resolvedPath: \"\" };\n        }\n    })();\n\n    const statePromise: Promise<DirectoryState | null> = pathPromise.then(async ({ rootHandle, resolvedPath }) => {\n        if (!resolvedPath) return null;\n\n        const existing = directoryCacheMap.get(cacheKey);\n        if (existing) {\n            existing.refCount++;\n            //   proxy  shared map\n            localMapCache = existing.mapCache;\n            return existing;\n        }\n\n        const mapCache = observe(new Map<string, any>()) as Map<string, any>;\n        localMapCache = mapCache;\n\n        const observationId = UUIDv4();\n        const dirHandlePromise = getDirectoryHandle(rootHandle, resolvedPath, options, logger);\n\n        const updateCache = async () => {\n            const cleanPath = resolvedPath?.trim?.()?.startsWith?.(\"/user/\")\n                ? resolvedPath?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.()\n                : resolvedPath;\n\n            const entries: any = await post(\n                \"readDirectory\",\n                {\n                    rootId: \"\",\n                    path: cleanPath,\n                    create: options.create,\n                },\n                rootHandle ? [rootHandle] : []\n            );\n\n            if (!entries) return mapCache;\n\n            const entryMap = new Map(entries);\n\n            // remove deleted\n            for (const key of mapCache.keys()) {\n                if (!entryMap.has(key)) mapCache.delete(key);\n            }\n\n            // add new\n            for (const [key, handle] of entryMap) {\n                if (!mapCache.has(key as string)) mapCache.set(key as string, handle);\n            }\n\n            return mapCache;\n        };\n\n        const cleanup = () => {\n            post(\"unobserve\", { id: observationId });\n            observers.delete(observationId);\n            directoryCacheMap.delete(cacheKey);\n        };\n\n        observers.set(observationId, (changes: any[]) => {\n            for (const change of changes) {\n                if (!change?.name) continue;\n\n                if (change.type === \"modified\" || change.type === \"created\" || change.type === \"appeared\") {\n                    mapCache.set(change.name, change.handle);\n                } else if (change.type === \"deleted\" || change.type === \"disappeared\") {\n                    mapCache.delete(change.name);\n                }\n            }\n        });\n\n        const cleanPath = resolvedPath?.trim?.()?.startsWith?.(\"/user/\")\n            ? resolvedPath?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.()\n            : resolvedPath;\n\n        post(\n            \"observe\",\n            {\n                rootId: \"\",\n                path: cleanPath,\n                id: observationId,\n            },\n            rootHandle ? [rootHandle] : []\n        );\n\n        // initial load (fire and forget)\n        updateCache();\n\n        const newState: DirectoryState = {\n            mapCache,\n            dirHandle: dirHandlePromise,\n            resolvePath: resolvedPath,\n            observationId,\n            refCount: 1,\n            cleanup,\n            updateCache,\n        };\n\n        directoryCacheMap.set(cacheKey, newState);\n\n        const entries: any = await Promise.all(await Array.fromAsync((await dirHandlePromise)?.entries?.() ?? []));\n        for (const [name, handle] of entries) {\n            if (!mapCache.has(name)) mapCache.set(name, handle);\n        }\n\n        return { ...newState, mapCache };\n    });\n\n    //\n    let disposed = false;\n    const dispose = () => {\n        if (disposed) return;\n        disposed = true;\n        statePromise\n            .then((s) => {\n                if (!s) return;\n                s.refCount--;\n                if (s.refCount <= 0) s.cleanup();\n            })\n            .catch(console.warn);\n    };\n\n    //\n    const handler: ProxyHandler<any> = {\n        get(_target, prop) {\n            // 0)   /     \n            //    /\n            if (\n                prop === Symbol.toStringTag ||\n                prop === Symbol.iterator ||\n                prop === \"toString\" ||\n                prop === \"valueOf\" ||\n                prop === \"inspect\" ||\n                prop === \"constructor\" ||\n                prop === \"__proto__\" ||\n                prop === \"prototype\"\n            ) {\n                return undefined;\n            }\n\n            if (prop === \"dispose\") return dispose;\n\n            //    Map (  backup)\n            if (prop === \"getMap\") return () => localMapCache;\n\n            // map-like  (!)\n            if (prop === \"entries\") return () => localMapCache.entries();\n            if (prop === \"keys\") return () => localMapCache.keys();\n            if (prop === \"values\") return () => localMapCache.values();\n            if (prop === Symbol.iterator) return () => localMapCache[Symbol.iterator]();\n\n            //  \n            if (prop === \"size\") return localMapCache.size;\n            if (prop === \"has\") return (k: string) => localMapCache.has(k);\n            if (prop === \"get\") return (k: string) => localMapCache.get(k);\n\n            //  \n            if (prop === \"entries\") return () => localMapCache.entries();\n            if (prop === \"keys\") return () => localMapCache.keys();\n            if (prop === \"values\") return () => localMapCache.values();\n\n            //\n            if (prop === \"refresh\") {\n                return () =>\n                    statePromise\n                        .then((s) => s?.updateCache?.())\n                        .then(() => pxy);\n            }\n\n            // Promise-like:    await openDirectory(...)\n            if (prop === \"then\" || prop === \"catch\" || prop === \"finally\") {\n                //  proxy awaitable\n                const p = statePromise.then(() => true);\n                // @ts-ignore\n                return p[prop].bind(p);\n            }\n\n            // :    dirHandle ( )\n            return (...args: any[]) =>\n                statePromise.then(async (s) => {\n                    if (!s) return undefined;\n                    const dh = await s.dirHandle;\n                    const v = dh?.[prop];\n                    if (typeof v === \"function\") return v.apply(dh, args);\n                    return v;\n                });\n        },\n\n        // : ownKeys   \n        ownKeys() {\n            return Array.from(localMapCache.keys());\n        },\n\n        getOwnPropertyDescriptor() {\n            return { enumerable: true, configurable: true };\n        },\n    };\n\n    const fx: any = function () { };\n    const pxy = new Proxy(fx, handler);\n    return pxy;\n}\n\n//\nexport async function readFile(rootHandle, relPath, options: { basePath?: string } = {}, logger = defaultLogger) {\n    try {\n        const { rootHandle: resolvedRoot, resolvedPath } = await resolvePath(rootHandle, relPath, options?.basePath || \"\");\n        const cleanPath = resolvedPath?.trim?.()?.startsWith?.(\"/user/\") ?\n            resolvedPath?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.() : resolvedPath;\n\n        // Use Worker\n        const file = await post('readFile', { rootId: \"\", path: cleanPath, type: \"blob\" }, resolvedRoot ? [resolvedRoot] : []);\n        return file;\n    } catch (e: any) { return handleError(logger, 'error', `readFile: ${e.message}`); }\n}\n\n//\nexport async function readAsObjectURL(rootHandle, relPath, options: { basePath?: string } = {}, logger = defaultLogger) {\n    try {\n        const file: any = await readFile(rootHandle, relPath, options, logger);\n        return file ? URL.createObjectURL(file) : null;\n    } catch (e: any) { return handleError(logger, 'error', `readAsObjectURL: ${e.message}`); }\n}\n\n//\nexport async function readFileUTF8(rootHandle, relPath, options: { basePath?: string } = {}, logger = defaultLogger) {\n    try {\n        const file: any = await readFile(rootHandle, relPath, options, logger);\n        if (!file) return \"\";\n        return await file.text();\n    } catch (e: any) { return handleError(logger, 'error', `readFileUTF8: ${e.message}`); }\n}\n\n\n\n//\nexport async function writeFile(rootHandle, relPath, data, logger = defaultLogger) {\n    if (data instanceof FileSystemFileHandle) { data = await data.getFile(); }\n    if (data instanceof FileSystemDirectoryHandle) {\n        const dstHandle = await getDirectoryHandle(await resolveRootHandle(rootHandle), relPath + (relPath?.trim?.()?.endsWith?.(\"/\") ? \"\" : \"/\") + (data?.name || \"\")?.trim?.()?.replace?.(/\\s+/g, '-'), { create: true });\n        return await copyFromOneHandlerToAnother(data, dstHandle, {})?.catch?.(console.warn.bind(console));\n    } else\n\n        //\n        try {\n            const { rootHandle: resolvedRoot, resolvedPath } = await resolvePath(rootHandle, relPath, \"\");\n            const cleanPath = resolvedPath?.trim?.()?.startsWith?.(\"/user/\") ?\n                resolvedPath?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.() : resolvedPath;\n\n            await post('writeFile', { rootId: \"\", path: cleanPath, data }, resolvedRoot ? [resolvedRoot] : []);\n            return true;\n        } catch (e: any) { return handleError(logger, 'error', `writeFile: ${e.message}`); }\n}\n\n//\nexport async function getFileWriter(rootHandle, relPath, options: { create?: boolean, basePath?: string } = { create: true }, logger = defaultLogger) {\n    try {\n        const { rootHandle: resolvedRootHandle, resolvedPath } = await resolvePath(rootHandle, relPath, options?.basePath || \"\");\n        return (await getFileHandle(resolvedRootHandle, resolvedPath, options, logger))?.createWritable?.();\n    } catch (e: any) { return handleError(logger, 'error', `getFileWriter: ${e.message}`); }\n}\n\n\n\n\n\n//\nexport async function removeFile(rootHandle, relPath, options: { recursive?: boolean, basePath?: string } = { recursive: true }, logger = defaultLogger) {\n    try {\n        const { rootHandle: resolvedRoot, resolvedPath } = await resolvePath(rootHandle, relPath, options?.basePath || \"\");\n        const cleanPath = resolvedPath?.trim?.()?.startsWith?.(\"/user/\") ?\n            resolvedPath?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.() : resolvedPath;\n\n        await post('remove', { rootId: \"\", path: cleanPath, recursive: options.recursive }, resolvedRoot ? [resolvedRoot] : []);\n        return true;\n    } catch (e: any) { return handleError(logger, 'error', `removeFile: ${e.message}`); }\n}\n\n//\nexport async function removeDirectory(rootHandle, relPath, options: { recursive?: boolean, basePath?: string } = { recursive: true }, logger = defaultLogger) {\n    try {\n        // Reuse logic from removeFile as worker distinguishes via path handling or just removeEntry\n        return removeFile(rootHandle, relPath, options, logger);\n    } catch (e: any) { return handleError(logger, 'error', `removeDirectory: ${e.message}`); }\n}\n\n//\nexport async function remove(rootHandle, relPath, options: { basePath?: string } = {}, logger = defaultLogger) {\n    try {\n        return removeFile(rootHandle, relPath, { recursive: true, ...options }, logger);\n    } catch (e: any) { return handleError(logger, 'error', `remove: ${e.message}`); }\n}\n\n//\nexport const openImageFilePicker = async () => {\n    const $e = \"showOpenFilePicker\"; // @ts-ignore\n    const showOpenFilePicker = window?.[$e]?.bind?.(window) ?? (await import(\"fest/polyfill/showOpenFilePicker.mjs\"))?.[$e];\n    return showOpenFilePicker(imageImportDesc);\n}\n\n//\nexport const downloadFile = async (file) => {\n    // as file\n    if (file instanceof FileSystemFileHandle) { file = await file.getFile(); }\n    if (typeof file == \"string\") { file = await provide(file); }; const filename = file?.name; if (!filename) return; // @ts-ignore // IE10+\n    if (\"msSaveOrOpenBlob\" in self.navigator) { self.navigator.msSaveOrOpenBlob(file, filename); };\n\n    // for directory\n    if (file instanceof FileSystemDirectoryHandle) {\n        // @ts-ignore\n        let dstHandle = await showDirectoryPicker?.({\n            mode: \"readwrite\"\n        })?.catch?.(console.warn.bind(console));\n\n        //\n        if (file && dstHandle) {\n            // open handle relative to selected directory\n            dstHandle = (await getDirectoryHandle(dstHandle, file?.name || \"\", { create: true })?.catch?.(console.warn.bind(console))) || dstHandle;\n            return await copyFromOneHandlerToAnother(file, dstHandle, {})?.catch?.(console.warn.bind(console));\n        }\n\n        // currently, different methods are unsupported... (not implemented)\n        return;\n    }\n\n    // @ts-ignore\n    const fx = await (self?.showOpenFilePicker ? new Promise((r) => r({ // @ts-ignore\n        showOpenFilePicker: self?.showOpenFilePicker?.bind?.(window), // @ts-ignore\n        showSaveFilePicker: self?.showSaveFilePicker?.bind?.(window), // @ts-ignore\n    })) // @ts-ignore\n        : import(/* @vite-ignore */ \"fest/polyfill/showOpenFilePicker.mjs\"));\n\n    // @ts-ignore\n    if (window?.showSaveFilePicker) { // @ts-ignore\n        const fileHandle = await fx?.showSaveFilePicker?.({ suggestedName: filename })?.catch?.(console.warn.bind(console));\n        const writableFileStream = await fileHandle?.createWritable?.({ keepExistingData: true })?.catch?.(console.warn.bind(console));\n        await writableFileStream?.write?.(file)?.catch?.(console.warn.bind(console));\n        await writableFileStream?.close?.()?.catch?.(console.warn.bind(console));\n    } else {\n        const a = document.createElement(\"a\");\n        try { a.href = URL.createObjectURL(file); } catch (e) { console.warn(e); };\n        a.download = filename; document.body.appendChild(a); a.click();\n        setTimeout(function () {\n            document.body.removeChild(a);\n            window.URL.revokeObjectURL(a.href);\n        }, 0);\n    }\n}\n\n//\nexport const provide = async (req: string | Request = \"\", rw = false) => {\n    const url: string = (req as Request)?.url ?? req;\n    const cleanUrl = url?.replace?.(location.origin, \"\")?.trim?.();\n\n    //\n    if (cleanUrl?.startsWith?.(\"/user\")) {\n        const path = cleanUrl?.replace?.(/^\\/user/g, \"\")?.trim?.();\n        const root = await navigator?.storage?.getDirectory?.();\n        const handle = await getFileHandle(root, path, { create: !!rw });\n\n        if (rw) {\n            return handle?.createWritable?.();\n        }\n        return handle?.getFile?.();\n    } else {\n        try {\n            if (!req) return null;\n            const r = await fetch(req);\n            const blob = await r?.blob()?.catch?.(console.warn.bind(console));\n            const lastModifiedHeader = r?.headers?.get?.(\"Last-Modified\");\n            const lastModified = lastModifiedHeader ? Date.parse(lastModifiedHeader) : 0;\n\n            if (blob) {\n                return new File([blob], url?.substring(url?.lastIndexOf('/') + 1), {\n                    type: blob?.type,\n                    lastModified: isNaN(lastModified) ? 0 : lastModified\n                })\n            }\n        } catch (e: any) { return handleError(defaultLogger, 'error', `provide: ${e.message}`); }\n    }\n}\n\n//\nexport const getLeast = (item) => {\n    if (item?.types?.length > 0) {\n        return item?.getType?.(Array.from(item?.types || [])?.at?.(-1));\n    }\n    return null;\n}\n\n//\nexport const dropFile = async (file, dest = \"/user/\"?.trim?.()?.replace?.(/\\s+/g, '-'), current?: any) => {\n    const fs = await resolveRootHandle(null);\n    const path = getDir(dest?.trim?.()?.startsWith?.(\"/user/\") ? dest?.replace?.(/^\\/user/g, \"\")?.trim?.() : dest);\n    const user = path?.replace?.(\"/user\", \"\")?.trim?.();\n\n    //\n    file = file instanceof File ? file : (new File([file], UUIDv4() + \".\" + (file?.type?.split?.(\"/\")?.[1] || \"tmp\")))\n\n    //\n    const fp = user + (file?.name || \"wallpaper\")?.trim?.()?.replace?.(/\\s+/g, '-');\n    await writeFile(fs, fp, file);\n\n    // TODO! needs to fix same directory scope\n    current?.set?.(\"/user\" + fp?.trim?.()?.replace?.(/\\s+/g, '-'), file);\n    return \"/user\" + fp?.trim?.();\n}\n\n//\nexport const uploadDirectory = async (dest = \"/user/\", id: any = null) => {\n    dest = dest?.trim?.()?.startsWith?.(\"/user/\") ? dest?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.() : dest;\n    if (!globalThis.showDirectoryPicker) {\n        return;\n    }\n\n    // @ts-ignore\n    const srcHandle = await showDirectoryPicker?.({\n        mode: \"readonly\", id\n    })?.catch?.(console.warn.bind(console));\n    if (!srcHandle) return;\n\n    //\n    const dstHandle = await getDirectoryHandle(await resolveRootHandle(null), dest + (dest?.trim?.()?.endsWith?.(\"/\") ? \"\" : \"/\") + srcHandle.name?.trim?.()?.replace?.(/\\s+/g, '-'), { create: true });\n    if (!dstHandle) return;\n    return await copyFromOneHandlerToAnother(srcHandle, dstHandle, {})?.catch?.(console.warn.bind(console));\n}\n\n//\nexport const uploadFile = async (dest = \"/user/\"?.trim?.()?.replace?.(/\\s+/g, '-'), current?: any) => {\n    const $e = \"showOpenFilePicker\"; dest = dest?.trim?.()?.startsWith?.(\"/user/\") ? dest?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.() : dest;\n\n    // @ts-ignore\n    const showOpenFilePicker = window?.[$e]?.bind?.(window) ?? (await import(\"fest/polyfill/showOpenFilePicker.mjs\"))?.[$e];\n    return showOpenFilePicker({ ...generalFileImportDesc, multiple: true } as any)?.then?.(async (handles = []) => {\n        for (const handle of handles) {\n            const file = (handle as any) instanceof File ? (handle as any) : (await (handle as any)?.getFile?.());\n            await dropFile(file, dest, current);\n        }\n    });\n}\n\n//\nexport const ghostImage = typeof Image != \"undefined\" ? new Image() : null;\nif (ghostImage) {\n    ghostImage.decoding = \"async\";\n    ghostImage.width = 24;\n    ghostImage.height = 24;\n\n\n    //\n    try {\n        ghostImage.src = URL.createObjectURL(new Blob([`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 384 512\"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d=\"M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 288c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128z\"/></svg>`], { type: \"image/svg+xml\" }));\n    } catch (e) { }\n}\n\n\n/*  // in drag-start\n    ev.dataTransfer.effectAllowed = \"copyLink\";\n    ev?.dataTransfer?.clearData?.();\n    ev?.dataTransfer?.setDragImage?.(ghostImage, 0, 0);\n*/\n\n//\nexport const attachFile = (transfer, file, path = \"\") => {\n    try {\n        const url = URL.createObjectURL(file);\n        if (file?.type && file?.type != \"text/plain\") {\n            transfer?.items?.add?.(file, file?.type || \"text/plain\");\n        } else {\n            transfer?.add?.(file);\n        }\n        if (path) { transfer?.items?.add?.(path, \"text/plain\"); };\n        transfer?.setData?.(\"text/uri-list\", url);\n        transfer?.setData?.(\"DownloadURL\", file?.type + \":\" + file?.name + \":\" + url);\n    } catch (e) { }\n}\n\n//\nexport const dropAsTempFile = async (data: any) => {\n    const items = (data)?.items;\n    const item = items?.[0];\n    const isImage = item?.types?.find?.((n) => n?.startsWith?.(\"image/\"));\n    const blob = await (data?.files?.[0] ?? ((isImage ? item?.getType?.(isImage) : null) || getLeast(item)));\n    return dropFile(blob, \"/user/temp/\"?.trim?.()?.replace?.(/\\s+/g, '-'));\n}\n\n//\nexport const clearAllInDirectory = async (rootHandle: any = null, relPath = \"\", options: { basePath?: string } = {}, logger = defaultLogger) => {\n    try {\n        const { rootHandle: resolvedRoot, resolvedPath } = await resolvePath(rootHandle, relPath, options?.basePath || \"\");\n        const cleanPath = resolvedPath?.trim?.()?.startsWith?.(\"/user/\") ?\n            resolvedPath?.trim?.()?.replace?.(/^\\/user/g, \"\")?.trim?.() : resolvedPath;\n\n        await post('remove', { rootId: \"\", path: cleanPath, recursive: true }, resolvedRoot ? [resolvedRoot] : []);\n    } catch (e: any) { return handleError(logger, 'error', `clearAllInDirectory: ${e.message}`); }\n}\n\n// used for import/export by file pickers (OPFS, FileSystem, etc. )\nexport const copyFromOneHandlerToAnother = async (fromHandle: FileSystemDirectoryHandle | FileSystemFileHandle, toHandle: FileSystemDirectoryHandle | FileSystemFileHandle, options = {}, logger = defaultLogger) => {\n    // We delegate to worker\n    return post('copy', { from: fromHandle, to: toHandle }, [fromHandle, toHandle]);\n}\n\n//\nexport const handleIncomingEntries = (\n    data: DataTransfer | FileList | File[] | any,\n    destPath: string = \"/user/\",\n    rootHandle: any = null,\n    onItemHandled?: (file: File, path: string) => void | Promise<void>\n) => {\n    const tasks: Promise<any>[] = [];\n    const items = Array.from(data?.items ?? []);\n    const files = Array.from(data?.files ?? []);\n    const dataArray = Array.isArray(data) ? data : [...((data?.[Symbol.iterator] ? data : [data]))];\n\n    //\n    return Promise.try(async () => {\n        const resolvedRoot = await resolveRootHandle(rootHandle);\n\n        //\n        const processItem = async (item: any) => {\n            // Handle FileSystemHandle (modern drag/drop)\n            let handle: any;\n            if (item.kind === 'file' || item.kind === 'directory') {\n                try {\n                    // @ts-ignore\n                    handle = await item.getAsFileSystemHandle?.();\n                } catch { }\n            }\n\n            if (handle) {\n                if (handle.kind === 'directory') {\n                    const nwd = await getDirectoryHandle(resolvedRoot, destPath + (handle.name || \"\").trim().replace(/\\s+/g, '-'), { create: true });\n                    if (nwd) tasks.push(copyFromOneHandlerToAnother(handle, nwd, { create: true }));\n                } else {\n                    const file = await handle.getFile();\n                    const path = destPath + (file.name || handle.name).trim().replace(/\\s+/g, '-');\n                    tasks.push(writeFile(resolvedRoot, path, file).then(() => onItemHandled?.(file, path)));\n                }\n                return;\n            }\n\n            // Handle File object (fallback)\n            if (item.kind === 'file' || item instanceof File) {\n                const file = item instanceof File ? item : item.getAsFile();\n                if (file) {\n                    const path = destPath + (file.name).trim().replace(/\\s+/g, '-');\n                    tasks.push(writeFile(resolvedRoot, path, file).then(() => onItemHandled?.(file, path)));\n                }\n                return;\n            }\n        };\n        // 1. Try DataTransfer items\n        if (items?.length > 0) {\n            for (const item of items as any) {\n                await processItem(item);\n            }\n        }\n        // 2. Try Files\n        if (files?.length > 0) {\n            for (const file of files as any) {\n                await processItem(file);\n            }\n        }\n        // 3. Array of Files\n        if (dataArray?.length > 0) {\n            for (const item of dataArray) {\n                await processItem(item);\n            }\n        }\n\n        // 4. Handle text/uri-list\n        const uriList = data?.getData?.(\"text/uri-list\") || data?.getData?.(\"text/plain\");\n        if (uriList && typeof uriList === \"string\") {\n            const urls = uriList.split(/\\r?\\n/).filter(Boolean);\n            for (const url of urls) {\n                if (url.startsWith(\"file://\")) continue;\n                // Detect if it's internal /user/ path\n                if (url.startsWith(\"/user/\")) {\n                    const src = url.trim();\n                    // Copy internal\n                    tasks.push(Promise.try(async () => {\n                        const srcHandle = await getHandler(resolvedRoot, src);\n                        if (srcHandle?.handle) {\n                            const name = src.split(\"/\").filter(Boolean).pop();\n                            if (srcHandle.type === 'directory') {\n                                const nwd = await getDirectoryHandle(resolvedRoot, destPath + name, { create: true });\n                                await copyFromOneHandlerToAnother(srcHandle.handle, nwd, { create: true });\n                            } else {\n                                const file = await srcHandle.handle.getFile();\n                                const path = destPath + name;\n                                await writeFile(resolvedRoot, path, file);\n                                onItemHandled?.(file, path);\n                            }\n                        }\n                    }));\n                } else {\n                    // External URL\n                    tasks.push(Promise.try(async () => {\n                        const file = await provide(url);\n                        if (file) {\n                            const path = destPath + file.name;\n                            await writeFile(resolvedRoot, path, file);\n                            onItemHandled?.(file, path);\n                        }\n                    }));\n                }\n            }\n        }\n\n        // 5. Handle ClipboardItems (for async clipboard API)\n        // This is usually passed as an array of ClipboardItem objects, but `data` here might be DataTransfer.\n        // If passed explicitly:\n        if (dataArray?.[0] instanceof ClipboardItem) {\n            for (const item of dataArray) {\n                for (const type of item.types) {\n                    if (type.startsWith(\"image/\") || type.startsWith(\"text/\")) {\n                        const blob = await item.getType(type);\n                        const ext = type.split(\"/\")[1].split(\"+\")[0] || \"txt\"; // simplified\n                        const file = new File([blob], `clipboard-${Date.now()}.${ext}`, { type });\n                        const path = destPath + file.name;\n                        tasks.push(writeFile(resolvedRoot, path, file).then(() => onItemHandled?.(file, path)));\n                    }\n                }\n            }\n        }\n\n        //\n        await Promise.allSettled(tasks).catch(console.warn.bind(console));\n    });\n}\n","import { RAFBehavior, orientOf, getBoundingOrientRect, setStyleProperty } from \"fest/dom\";\nimport { makeObjectAssignable, observe, affected, numberRef } from \"fest/object\";\nimport { makeShiftTrigger, LongPressHandler, clampCell, floorCell, bindDraggable } from \"fest/lure\";\nimport { convertOrientPxToCX, redirectCell } from \"fest/core\";\nimport type { GridArgsType as GridArgsType, GridItemType } from \"fest/core\";\n\n//\n// Track registered CSS properties to avoid duplicate registration errors during HMR\nconst registeredCSSProperties = new Set<string>();\n\n[   // @ts-ignore\n    { name: \"--drag-x\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--drag-y\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--resize-x\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--resize-y\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--shift-x\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--shift-y\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cs-grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cs-grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cs-transition-r\", syntax: \"<length-percentage>\", inherits: false, initialValue: \"0px\" },\n    { name: \"--cs-transition-c\", syntax: \"<length-percentage>\", inherits: false, initialValue: \"0px\" },\n    { name: \"--cs-p-grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cs-p-grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--os-grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--os-grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--rv-grid-r\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--rv-grid-c\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cell-x\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n    { name: \"--cell-y\", syntax: \"<number>\", inherits: false, initialValue: \"0\" },\n].forEach((options: any) => {\n    if (typeof CSS != \"undefined\" && !registeredCSSProperties.has(options.name)) {\n        try {\n            CSS?.registerProperty?.(options);\n            registeredCSSProperties.add(options.name);\n        } catch (e) {\n            // Silently ignore duplicate registration errors (common during HMR)\n        }\n    }\n});\n\n//\n//const setStyleProperty = (item, prop, value) => {\n    /*if (value == null || item?.style?.getPropertyValue?.(prop) === String(value)) { return; }\n    return item?.style?.setProperty?.(prop, value);*/\n//}\n\n//\n//const computed = Symbol(\"@computed\");\nconst depAxis  = (axis: string = \"x\")=>{ const m = /*matchMedia(\"(orientation: portrait)\").matches*/true; return {[\"x\"]: m?\"c\":\"r\", [\"y\"]: m?\"r\":\"c\"}[axis]; }\nconst swapped  = (axis: string = \"x\")=>{ const m = matchMedia(\"(orientation: portrait)\").matches; return {[\"x\"]: m?\"x\":\"y\", [\"y\"]: m?\"y\":\"x\"}[axis]; }\n\n// DragCoord\nexport const animationSequence = (DragCoord = 0, axis = \"x\") => {\n    const drag = \"--drag-\" + axis;\n    const axisKey = depAxis(axis);\n    const rvProp = `--rv-grid-${axisKey}`;\n    const gridProp = `--cs-grid-${axisKey}`;\n    const prevGridProp = `--cs-p-grid-${axisKey}`;\n    return [\n        { [rvProp]: `var(${prevGridProp})`, [drag]: DragCoord }, // starting...\n        { [rvProp]: `var(${gridProp})`, [drag]: 0 }\n    ];\n};\n\n//\nexport const doAnimate = async (newItem, axis: any = \"x\", animate = false, signal?: AbortSignal)=>{\n\n    //\n    //setProperty(newItem, \"--cs-p-offset-\" + swp, `${newItem?.[{\"x\": \"offsetLeft\", \"y\": \"offsetTop\"}[swp as any]] || 0}px`);\n    //const oldOffset = `${newItem?.[{\"x\": \"offsetLeft\", \"y\": \"offsetTop\"}[swp as any]] || 0}px`;\n    //setProperty(newItem, \"--cs-p-grid-\" + depAxis(axis), oldValue);\n    const dragCoord = parseFloat(newItem?.style?.getPropertyValue?.(\"--drag-\" + axis) || \"0\") || 0;\n\n    //\n    if (!animate) { await new Promise((r)=>requestAnimationFrame(r)); };\n\n    //\n    const animation = animate && !matchMedia(\"(prefers-reduced-motion: reduce)\")?.matches ? newItem.animate(animationSequence(dragCoord, axis), {\n        fill: \"none\",\n        duration: 200,\n        //duration: 150,\n        easing: \"linear\"\n    }) : null;\n\n    //\n    let shifted = false;\n    const onShift: [any, any] = [(ev)=>{\n        if (!shifted) {\n            shifted = true;\n            animation?.finish?.();\n        }\n\n        //\n        newItem?.removeEventListener?.(\"m-dragstart\", ...onShift);\n        signal?.removeEventListener?.(\"abort\", ...onShift);\n    }, {once: true}];\n\n    // not fact, but for animation\n    signal?.addEventListener?.(\"abort\", ...onShift);\n    newItem?.addEventListener?.(\"m-dragstart\", ...onShift);\n    //await new Promise((r)=>requestAnimationFrame(r));\n    return animation?.finished?.catch?.(console.warn.bind(console));\n    //if (!shifted) { onShift?.[0]?.(); } // commit dragging result\n}\n\n//\nexport const reflectCell = async (newItem: HTMLElement, pArgs: GridArgsType, withAnimate = false): Promise<void> => {\n    const layout: [number, number] = [(pArgs?.layout as any)?.columns || pArgs?.layout?.[0] || 4, (pArgs?.layout as any)?.rows || pArgs?.layout?.[1] || 8];\n    const {item, list, items} = pArgs;\n    await new Promise((r)=>queueMicrotask(()=>r(true)));\n    return affected?.(item, (state, property)=>{\n        const gridSystem = newItem?.parentElement;\n        layout[0] = parseInt(gridSystem?.getAttribute?.(\"data-grid-columns\") || \"4\") || layout[0];\n        layout[1] = parseInt(gridSystem?.getAttribute?.(\"data-grid-rows\") || \"8\") || layout[1];\n        const args = {item, list, items, layout, size: [gridSystem?.clientWidth, gridSystem?.clientHeight]};\n        if (item && !item?.cell) { item.cell = makeObjectAssignable(observe([0, 0])); }; // @ts-ignore\n        if (property == \"cell\") {\n            const nc = redirectCell(item?.cell || [0, 0], args as GridArgsType);\n            if (nc[0] != item?.cell?.[0] && item?.cell) { item.cell[0] = nc?.[0]; }\n            if (nc[1] != item?.cell?.[1] && item?.cell) { item.cell[1] = nc?.[1]; }\n            setStyleProperty(newItem, \"--p-cell-x\", nc?.[0]);\n            setStyleProperty(newItem, \"--p-cell-y\", nc?.[1]);\n            setStyleProperty(newItem, \"--cell-x\", nc?.[0]);\n            setStyleProperty(newItem, \"--cell-y\", nc?.[1]);\n        }\n    });\n}\n\n//\nexport const makeDragEvents = async (\n    newItem: HTMLElement,\n    { layout, dragging, currentCell, syncDragStyles }: {\n        layout: [number, number],\n        dragging: [any, any],\n        currentCell: [any, any],\n        syncDragStyles: (flush: boolean) => void\n    },\n    { item, items, list }: {\n        item: GridItemType,\n        items: Map<string, GridItemType> | Set<GridItemType> | GridItemType[],\n        list: Set<string> | string[]\n    }): Promise<{ dispose: () => void, draggable: any, process: (ev: MouseEvent, el: HTMLElement) => Promise<unknown> } | undefined> => {\n\n    //\n    const $updateLayout = (newItem: HTMLElement): [number, number] => {\n        const gridSystem = newItem?.parentElement as HTMLElement | null;\n        if (!gridSystem) { return layout; }\n        layout[0] = parseInt(gridSystem.getAttribute?.(\"data-grid-columns\") as string || \"4\") || layout[0];\n        layout[1] = parseInt(gridSystem.getAttribute?.(\"data-grid-rows\") as string || \"8\") || layout[1];\n        return layout;\n    };\n\n    //\n    const getSpanOffset = (bounds: DOMRect | null, layoutSnapshot: [number, number] | null, size: [number, number] | null, orient: number | null): [number, number] => {\n        if (!bounds || !layoutSnapshot || !size || orient == null) { return [0, 0]; }\n        const safeLayout: [number, number] = [\n            Math.max(layoutSnapshot?.[0] || 0, 1),\n            Math.max(layoutSnapshot?.[1] || 0, 1)\n        ];\n        const orientedSize: [number, number] = orient % 2 ? [size?.[1] || 1, size?.[0] || 1] : [size?.[0] || 1, size?.[1] || 1];\n        const cellSize: [number, number] = [\n            (orientedSize[0] || 1) / safeLayout[0],\n            (orientedSize[1] || 1) / safeLayout[1]\n        ];\n        const spanX = Math.max((bounds?.width || cellSize[0]) / (cellSize[0] || 1), 1);\n        const spanY = Math.max((bounds?.height || cellSize[1]) / (cellSize[1] || 1), 1);\n        return [(spanX - 1) / 2, (spanY - 1) / 2];\n    };\n\n    //\n    const computeCellFromBounds = (): { inset?: [number, number], cell?: [number, number] } | null => {\n        const gridSystem = newItem?.parentElement as HTMLElement | null;\n        if (!gridSystem) { return null; }\n\n        //\n        const orient = orientOf(gridSystem);\n        const cbox = getBoundingOrientRect(newItem, orient) ?? newItem?.getBoundingClientRect?.();\n        const pbox = getBoundingOrientRect(gridSystem, orient) ?? gridSystem?.getBoundingClientRect?.();\n        if (!cbox || !pbox) { return null; }\n\n        //\n        const layoutSnapshot = [...$updateLayout(newItem)] as [number, number];\n        const parentRect = gridSystem.getBoundingClientRect?.();\n        const gridSize: [number, number] = [\n            gridSystem?.clientWidth || gridSystem?.offsetWidth || parentRect?.width || 1,\n            gridSystem?.clientHeight || gridSystem?.offsetHeight || parentRect?.height || 1\n        ];\n        const inset: [number, number] = [\n            //(cbox.left - pbox.left),\n            //(cbox.top - pbox.top)\n            (((cbox.left + cbox.right) / 2) - pbox.left),\n            (((cbox.top + cbox.bottom) / 2) - pbox.top)\n        ];\n        const args = { item, items, list, layout: layoutSnapshot as [number, number], size: gridSize };\n        const spanOffset = getSpanOffset(cbox as unknown as DOMRect, layoutSnapshot as [number, number], gridSize, orient);\n        const projected = convertOrientPxToCX(inset, args, orient);\n        projected[0] -= spanOffset[0];\n        projected[1] -= spanOffset[1];\n        const flooredCell = floorCell(projected as [number, number]);\n        const redirectedCell = redirectCell([flooredCell.x.value, flooredCell.y.value], args);\n        const clampedCell = clampCell(redirectedCell, layoutSnapshot as [number, number]);\n        return {\n            inset: [inset[0] - dragging?.[0]?.value, inset[1] - dragging?.[1]?.value],\n            cell: [clampedCell.x.value, clampedCell.y.value] // Convert Vector2D back to array\n        } as { inset?: [number, number], cell?: [number, number] };\n    };\n\n    //\n    const setCellAxis = (cell: [number, number] | null, axis = 0): void => {\n        if (!cell) { return; }\n        if (currentCell?.[axis]?.value != cell?.[axis]) {\n            try { currentCell[axis].value = cell[axis]; } catch(e){};\n        };\n    };\n\n    //\n    const setCell = (cell: [number, number]): void => {\n        const args = {item, items, list, layout, size: [newItem?.clientWidth || 0, newItem?.clientHeight || 0] as [number, number]};\n        const redirectedCell = redirectCell(cell, args as GridArgsType);\n        const clampedCell = clampCell(redirectedCell, layout as [number, number]);\n        cell = [clampedCell.x.value, clampedCell.y.value]; // Convert Vector2D back to array\n        setCellAxis(cell, 0); setCellAxis(cell, 1);\n    };\n\n    //\n    const syncInsetVars = (inset?: [number, number]): void => {\n        if (!inset) { return; }\n        setStyleProperty(newItem, \"--cs-inset-x\", `${inset[0] || 0}px`);\n        setStyleProperty(newItem, \"--cs-inset-y\", `${inset[1] || 0}px`);\n    };\n\n    //\n    const correctOffset = (dragging: [any, any]): [number, number] => {\n        // compute correct cell with span awareness\n        const ctx = computeCellFromBounds() as { inset: [number, number], cell: [number, number] } | null;\n        const cell = ctx?.cell;\n\n        //\n        if (cell) {\n            syncInsetVars((ctx?.inset || [0, 0]) as [number, number]); setCell(cell);\n            setStyleProperty(newItem, \"--p-cell-x\", cell?.[0] ?? currentCell?.[0]?.value ?? item?.cell?.[0] ?? 0);\n            setStyleProperty(newItem, \"--p-cell-y\", cell?.[1] ?? currentCell?.[1]?.value ?? item?.cell?.[1] ?? 0);\n            setStyleProperty(newItem, \"--cell-x\", cell?.[0] ?? currentCell?.[0]?.value ?? item?.cell?.[0] ?? 0);\n            setStyleProperty(newItem, \"--cell-y\", cell?.[1] ?? currentCell?.[1]?.value ?? item?.cell?.[1] ?? 0);\n        }\n\n        // reset dragging offset\n        if (dragging && Array.isArray(dragging)) {\n            try { dragging[0].value = 0, dragging[1].value = 0; } catch (e) { };\n        }\n        syncDragStyles?.(true); newItem?.setAttribute?.(\"data-dragging\", \"\");\n        return [0, 0];\n    };\n\n    //\n    const resolveDragging = (dragging: [any, any]): [number, number] => {\n        // compute correct cell\n        const ctx = computeCellFromBounds() as { inset: [number, number], cell: [number, number] } | null;\n        const cell = ctx?.cell;\n\n        //\n        setStyleProperty(newItem, \"--p-cell-x\", currentCell?.[0]?.value ?? item?.cell?.[0] ?? cell?.[0]);\n        setStyleProperty(newItem, \"--p-cell-y\", currentCell?.[1]?.value ?? item?.cell?.[1] ?? cell?.[1]);\n        syncDragStyles?.(true);\n\n        //\n        if (cell) {\n            setCell(cell);\n            setStyleProperty(newItem, \"--cell-x\", cell?.[0] ?? currentCell?.[0]?.value ?? item?.cell?.[0] ?? 0);\n            setStyleProperty(newItem, \"--cell-y\", cell?.[1] ?? currentCell?.[1]?.value ?? item?.cell?.[1] ?? 0);\n        }\n\n        //\n        const animations = [\n            doAnimate(newItem, \"x\", true),\n            doAnimate(newItem, \"y\", true)\n        ];\n\n        //\n        Promise.allSettled(animations).finally(()=>{\n            if (dragging && Array.isArray(dragging)) {\n                try { dragging[0].value = 0, dragging[1].value = 0; } catch (e) { };\n            }\n\n            //\n            syncDragStyles?.(true);\n\n            //\n            if (cell) {\n                setStyleProperty(newItem, \"--p-cell-x\", cell?.[0] ?? currentCell?.[0]?.value ?? item?.cell?.[0] ?? 0);\n                setStyleProperty(newItem, \"--p-cell-y\", cell?.[1] ?? currentCell?.[1]?.value ?? item?.cell?.[1] ?? 0);\n                setStyleProperty(newItem, \"--cell-x\", cell?.[0] ?? currentCell?.[0]?.value ?? item?.cell?.[0] ?? 0);\n                setStyleProperty(newItem, \"--cell-y\", cell?.[1] ?? currentCell?.[1]?.value ?? item?.cell?.[1] ?? 0);\n            }\n\n            //\n            newItem?.removeAttribute?.(\"data-dragging\");\n            delete newItem?.dataset?.dragging;\n        });\n\n        //\n        return [0, 0];\n    };\n\n    //\n    const customTrigger = (doGrab: (ev: MouseEvent, newItem: HTMLElement) => void): LongPressHandler => new LongPressHandler(newItem, {\n        handler: \"*\",\n        anyPointer: true,\n        mouseImmediate: true,\n        minHoldTime: 60 * 3600,\n        maxHoldTime: 100\n    }, makeShiftTrigger((ev)=>{correctOffset(dragging); doGrab?.(ev, newItem)}));\n\n    //\n    return bindDraggable(customTrigger, resolveDragging, dragging);\n};\n\n// shifting - reactive basis\nexport const ROOT = typeof document != \"undefined\" ? document?.documentElement : null;\nexport const bindInteraction = (newItem: HTMLElement, pArgs: any): [any, any] => {\n    reflectCell(newItem, pArgs, true);\n\n    //\n    const { item, items, list } = pArgs, layout = [pArgs?.layout?.columns || pArgs?.layout?.[0] || 4, pArgs?.layout?.rows || pArgs?.layout?.[1] || 8];\n    const dragging: [any, any] = [ numberRef(0, RAFBehavior()), numberRef(0, RAFBehavior()) ], currentCell: [any, any] = [ numberRef(item?.cell?.[0] || 0), numberRef(item?.cell?.[1] || 0) ];\n\n    //\n    setStyleProperty(newItem, \"--cell-x\", currentCell?.[0]?.value || 0);\n    setStyleProperty(newItem, \"--cell-y\", currentCell?.[1]?.value || 0);\n\n    //\n    const applyDragStyles = (): void => {\n        if (dragging?.[0]?.value != null) setStyleProperty(newItem, \"--drag-x\", dragging?.[0]?.value || 0);\n        if (dragging?.[1]?.value != null) setStyleProperty(newItem, \"--drag-y\", dragging?.[1]?.value || 0);\n    };\n\n    //\n    let dragStyleRaf = 0, lastRaf: any = null;\n    const syncDragStyles = (flush = false): void => {\n        if (flush) {\n            applyDragStyles();\n            dragStyleRaf = 0;\n            if (lastRaf) { cancelAnimationFrame(lastRaf); }\n            lastRaf = null;\n        } else\n        if (!dragStyleRaf) {\n            dragStyleRaf = 1;\n            lastRaf = requestAnimationFrame(() => {\n                applyDragStyles();\n                dragStyleRaf = 0;\n                lastRaf = null;\n            });\n        }\n    };\n\n    //\n    affected([dragging?.[0], \"value\"], (val, prop) => { if (prop == \"value\") { syncDragStyles(); } });\n    affected([dragging?.[1], \"value\"], (val, prop) => { if (prop == \"value\") { syncDragStyles(); } });\n    syncDragStyles(true);\n\n    //\n    affected([currentCell?.[0], \"value\"], (val, prop) => {\n        if (prop == \"value\" && item.cell != null && val != null) {\n            setStyleProperty(newItem, \"--cell-x\", (item.cell[0] = val) || 0);\n        }\n    });\n\n    //\n    affected([currentCell?.[1], \"value\"], (val, prop) => {\n        if (prop == \"value\" && item.cell != null && val != null) {\n            setStyleProperty(newItem, \"--cell-y\", (item.cell[1] = val) || 0);\n        }\n    });\n\n    //\n    makeDragEvents(newItem, {layout: layout as [number, number], currentCell, dragging, syncDragStyles}, {item, items, list});\n    return currentCell as [any, any];\n}\n","import { E, elementPointerMap } from \"fest/lure\";\nimport { DOMMixin } from \"fest/dom\";\n\n//\nexport class UIGridBox extends DOMMixin {\n    constructor(name?) { super(name); }\n\n    // @ts-ignore\n    connect(ws) {\n        const self: any = ws?.deref?.();\n        E(self, {classList: new Set([\"ui-gridlayout\"])});\n\n        //\n        const size = [self.clientWidth, self.clientHeight];\n        const resizeObserver = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                if (entry?.contentBoxSize) {\n                    const contentBoxSize = entry?.contentBoxSize?.[0];\n                    size[0] = (contentBoxSize?.inlineSize || size[0] || 0);\n                    size[1] = (contentBoxSize?.blockSize || size[1] || 0);\n                }\n            }\n        });\n\n        //\n        Object.defineProperty(self, \"size\", { get: () => size });\n\n        //\n        resizeObserver.observe(self, {box: \"content-box\"});\n        elementPointerMap.set(self, {\n            pointerMap: new Map<number, any>(),\n            pointerCache: new Map<number, any>()\n        });\n    }\n}\n\n//\nnew UIGridBox(\"ui-gridbox\");\nexport default UIGridBox;\n","import { elementPointerMap } from \"fest/lure\";\nimport { DOMMixin, getCorrectOrientation, orientationNumberMap } from \"fest/dom\";\nimport { numberRef } from \"fest/object\";\nimport { Vector2D, vector2Ref } from \"fest/lure\";\n\n//\nexport class UIOrientBox extends DOMMixin {\n    constructor(name?) { super(name); }\n\n    // @ts-ignore\n    connect(ws) {\n        const self: any = ws?.deref?.() ?? ws;\n        self.classList.add(\"ui-orientbox\");\n\n        //\n        //const zoom = attrRef(self, \"zoom\", 1), orient = attrRef(self, \"orient\", 0);\n        const zoom = numberRef(1), orient = numberRef(orientationNumberMap?.[getCorrectOrientation()] || 0);\n        self.style.setProperty(\"--zoom\", zoom.value);\n        self.style.setProperty(\"--orient\", orient.value);\n\n        // TODO: broken, fix later\n        //bindWith(self, \"--zoom\", zoom, handleStyleChange, null);\n        //bindWith(self, \"--orient\", orient, handleStyleChange, null);\n\n        // settings size is illogical! and not implemented!\n        Object.defineProperty(self, \"size\", { get: () => size });\n\n        //\n        Object.defineProperty(self, \"zoom\", {\n            get: () => parseFloat(zoom.value) || 1,\n            set: (value) => { zoom.value = value; self.style.setProperty(\"--zoom\", value); }\n        });\n\n        //\n        Object.defineProperty(self, \"orient\", {\n            get: () => parseInt(orient.value) || 0,\n            set: (value) => { orient.value = value; self.style.setProperty(\"--orient\", value); }\n        });\n\n        //\n        const size = vector2Ref(self.clientWidth, self.clientHeight);\n        const resizeObserver = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                if (entry?.contentBoxSize) {\n                    const contentBoxSize = entry?.contentBoxSize?.[0];\n                    size.x.value = (contentBoxSize?.inlineSize || size.x.value || 0);\n                    size.y.value = (contentBoxSize?.blockSize || size.y.value || 0);\n                }\n            }\n        });\n\n        //\n        resizeObserver.observe(self, {box: \"content-box\"});\n        elementPointerMap.set(self, {\n            pointerMap: new Map<number, any>(),\n            pointerCache: new Map<number, any>()\n        });\n\n        //\n        return this;\n    }\n}\n\n//\nnew UIOrientBox(\"ui-orientbox\");\nexport default UIOrientBox;\n","import { addEvent, fixedClientZoom } from \"fest/dom\";\nimport { stringRef } from \"fest/object\";\n\n//\nexport const electronAPI = \"electronBridge\";\n\n//\nfunction extractAlpha(input) {\n    if (typeof input !== 'string') return null;\n    let color = input.trim().toLowerCase();\n\n    // 1)  \n    if (color === 'transparent') return 0;\n\n    // 2) Hex- (#rgb[a], #rrggbb[aa])     getComputedStyle,  \n    if (color.startsWith('#')) {\n        const hex = color;\n        if (hex.length === 4) return 1; // #rgb\n        if (hex.length === 7) return 1; // #rrggbb\n        if (hex.length === 5) { // #rgba\n            const a = hex[4];\n            const aa = a + a; // expand\n            return clamp(parseInt(aa, 16) / 255, 0, 1);\n        }\n        if (hex.length === 9) { // #rrggbbaa\n            const aa = hex.slice(7, 9);\n            return clamp(parseInt(aa, 16) / 255, 0, 1);\n        }\n        return null; //  \n    }\n\n    // 3)  : rgb(), rgba(), hsl()/hsla()  .., color()\n    const fnMatch = color.match(/^([a-z-]+)\\((.*)\\)$/i);\n    if (!fnMatch) {\n        // getComputedStyle   'inherit/initial/unset'   :\n        return null;\n    }\n\n    const name = fnMatch[1];\n    const body = fnMatch[2].trim();\n\n    // 3a)     :  / <alpha>\n    //   rgb(), hsl(), hwb(), lab(), lch(), oklab(), oklch(), color()\n    {\n        const slashIdx = body.lastIndexOf('/');\n        if (slashIdx !== -1) {\n            const aStr = body.slice(slashIdx + 1).trim();\n            const a = parseAlphaComponent(aStr);\n            if (a != null) return clamp(a, 0, 1);\n            return null;\n        }\n    }\n\n    // 3b)  -  4- : rgba(..., a), hsla(..., a)\n    //      rgba(r,g,b,a)\n    if (body.includes(',')) {\n        const parts = body.split(',').map(s => s.trim());\n        if (parts.length >= 4) {\n            const a = parseAlphaComponent(parts[3]);\n            if (a != null) return clamp(a, 0, 1);\n            return null;\n        }\n        // 3    \n        return 1;\n    }\n\n    // 3c)     => 1\n    return 1;\n}\n\nfunction parseAlphaComponent(str) {\n    if (!str) return null;\n    // : 30% => 0.3\n    if (str.endsWith('%')) {\n        const n = parseFloat(str);\n        if (Number.isNaN(n)) return null;\n        return n / 100;\n    }\n    //  0..1\n    const n = parseFloat(str);\n    if (Number.isNaN(n)) return null;\n    return n;\n}\n\nfunction clamp(v, min, max) {\n    return Math.min(max, Math.max(min, v));\n}\n\n\n\n//\nconst tacp = (color: string)=>{\n    if (!color || color == null) return 0;\n    return (extractAlpha?.(color) || 0) > 0.1;\n};\n\n//\nconst setIdleInterval = (cb, timeout = 1000, ...args)=>{\n    requestIdleCallback(async ()=>{\n        if (!cb || (typeof cb != \"function\")) return;\n        while (true) { // @ts-ignore\n            await Promise.try(cb, ...args);\n            await new Promise((r)=>setTimeout(r, timeout));\n            await new Promise((r)=>requestIdleCallback(r, {timeout: 100}));\n            await new Promise((r)=>requestAnimationFrame(r));\n        }\n    }, {timeout: 1000});\n}\n\n//\nexport const pickBgColor = (x, y, holder: HTMLElement | null = null)=>{\n    // exclude any non-reasonable\n    const opaque = Array.from(document.elementsFromPoint(x, y))?.filter?.((el: any)=>(\n        ((el instanceof HTMLElement) && el != holder) &&\n        (el?.dataset?.alpha != null ? parseFloat(el?.dataset?.alpha) > 0.01 : true) && // @ts-ignore\n         el?.checkVisibility?.({ contentVisibilityAuto: true, opacityProperty: true, visibilityProperty: true }) &&\n         el?.matches?.(\":not([data-hidden])\") &&\n        (el?.style?.getPropertyValue(\"display\") != \"none\")\n    ))\n    .map((element) => {\n        const computed = getComputedStyle?.(element);\n        return {\n            element,\n            zIndex: parseInt(computed?.zIndex || \"0\", 10) || 0,\n            color: (computed?.backgroundColor || \"transparent\")\n        }})\n    .sort((a, b) => Math.sign(b.zIndex - a.zIndex))\n    .filter(({ color })=>(tacp(color)));\n\n    //\n    if (opaque?.[0]?.element instanceof HTMLElement) {\n        return opaque?.[0]?.color || \"transparent\";\n    }\n\n    //\n    return \"transparent\";\n};\n\n//\nexport const pickFromCenter = (holder)=>{\n    // not able to using some mechanics\n    const box = holder?.getBoundingClientRect();//getBoundingOrientBox(holder);\n    if (box) {\n        const Z = 0.5 * (fixedClientZoom?.() || 1);\n        const xy: [number, number] = [(box.left + box.right) * Z, (box.top + box.bottom) * Z];\n        return pickBgColor(...xy, holder);\n    }\n}\n\n//\nexport const dynamicNativeFrame = (root = document.documentElement)=>{\n    let media = root?.querySelector?.('meta[data-theme-color]') ?? root?.querySelector?.('meta[name=\"theme-color\"]');\n\n    // Create meta element if it doesn't exist\n    if (!media && root == document.documentElement) {\n        media = document.createElement('meta');\n        media.setAttribute('name', 'theme-color');\n        media.setAttribute('data-theme-color', '');\n        media.setAttribute('content', 'transparent');\n        document.head.appendChild(media);\n    }\n\n    const color = pickBgColor(window.innerWidth - 64, 10);\n    if ((media || window?.[electronAPI]) && root == document.documentElement) {\n        media?.setAttribute?.(\"content\", color);\n    }\n}\n\n//\nexport const dynamicBgColors = (root = document.documentElement) => {\n    root.querySelectorAll(\"body, body > *, body > * > *\").forEach((target)=>{\n        if (target) { pickFromCenter(target); }\n    });\n};\n\n//\nexport const dynamicTheme = (ROOT = document.documentElement)=>{\n    matchMedia(\"(prefers-color-scheme: dark)\").addEventListener(\"change\", ({}) => dynamicBgColors(ROOT));\n\n    //\n    const updater = ()=>{\n        dynamicNativeFrame(ROOT);\n        dynamicBgColors(ROOT);\n    }\n\n    //\n    addEvent(ROOT, \"u2-appear\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(ROOT, \"u2-hidden\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(ROOT, \"u2-theme-change\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(window, \"load\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(document, \"visibilitychange\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    setIdleInterval(updater, 500);\n}\n\n//\nexport const currentColorFromPointRef = (x, y, ROOT = document.documentElement, timeout = 500)=>{\n    const color = pickBgColor(x, y, ROOT);\n    const rfc = stringRef(color);\n    const updater = ()=>{\n        const color = pickBgColor(x, y, ROOT);\n        rfc.value = color;\n    }\n\n    //\n    addEvent(ROOT, \"u2-appear\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(ROOT, \"u2-hidden\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(ROOT, \"u2-theme-change\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(window, \"load\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(document, \"visibilitychange\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    setIdleInterval(updater, timeout);\n    return rfc;\n}\n\n//\nexport const currentColorFromCenterRef = (element: HTMLElement, ROOT = document.documentElement, timeout = 500)=>{\n    const color = pickFromCenter(element);\n    const rfc = stringRef(color);\n    const updater = ()=>{\n        const color = pickFromCenter(element);\n        rfc.value = color;\n    }\n\n    //\n    addEvent(ROOT, \"u2-appear\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(ROOT, \"u2-hidden\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(ROOT, \"u2-theme-change\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(window, \"load\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    addEvent(document, \"visibilitychange\", ()=>requestIdleCallback(updater, {timeout: 100}));\n    setIdleInterval(updater, timeout);\n    return rfc;\n}\n\n//\nexport default dynamicTheme;\n","import { dynamicNativeFrame, dynamicBgColors, dynamicTheme } from \"./DynamicEngine.js\";\n\n//\nexport const colorScheme = async () => {\n    dynamicNativeFrame();\n    dynamicBgColors();\n};\n\n//\nexport default colorScheme;\n\n//\nif (typeof document != \"undefined\") {\n    requestAnimationFrame(()=>colorScheme?.());\n    dynamicTheme?.();\n}\n","import { numberRef, observe } from \"fest/object\";\n\nexport class Vector2D {\n    private _x: ReturnType<typeof numberRef>;\n    private _y: ReturnType<typeof numberRef>;\n\n    constructor(x: number | ReturnType<typeof numberRef> = 0, y: number | ReturnType<typeof numberRef> = 0) {\n        this._x = typeof x === 'number' ? numberRef(x) : x;\n        this._y = typeof y === 'number' ? numberRef(y) : y;\n    }\n\n    get x() { return this._x; }\n    set x(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') {\n            this._x.value = value;\n        } else {\n            this._x = value;\n        }\n    }\n\n    get y() { return this._y; }\n    set y(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') {\n            this._y.value = value;\n        } else {\n            this._y = value;\n        }\n    }\n\n    // Array-like access for compatibility\n    get 0() { return this._x; }\n    get 1() { return this._y; }\n\n    // Convert to plain array for operations\n    toArray() {\n        return [this._x, this._y];\n    }\n\n    // Clone the vector\n    clone() {\n        return new Vector2D(this._x.value, this._y.value);\n    }\n\n    // Set values\n    set(x: number, y: number) {\n        this._x.value = x;\n        this._y.value = y;\n        return this;\n    }\n\n    // Copy from another vector\n    copy(v: Vector2D) {\n        this._x.value = v.x.value;\n        this._y.value = v.y.value;\n        return this;\n    }\n\n    // Vector operations\n    add(v: Vector2D): Vector2D {\n        return new Vector2D(this._x.value + v.x.value, this._y.value + v.y.value);\n    }\n\n    subtract(v: Vector2D): Vector2D {\n        return new Vector2D(this._x.value - v.x.value, this._y.value - v.y.value);\n    }\n\n    multiply(scalar: number): Vector2D {\n        return new Vector2D(this._x.value * scalar, this._y.value * scalar);\n    }\n\n    divide(scalar: number): Vector2D {\n        if (scalar === 0) throw new Error(\"Division by zero\");\n        return new Vector2D(this._x.value / scalar, this._y.value / scalar);\n    }\n\n    // Dot product\n    dot(v: Vector2D): number {\n        return this._x.value * v.x.value + this._y.value * v.y.value;\n    }\n\n    // Cross product (returns scalar in 2D)\n    cross(v: Vector2D): number {\n        return this._x.value * v.y.value - this._y.value * v.x.value;\n    }\n\n    // Magnitude (length)\n    magnitude(): number {\n        return Math.sqrt(this._x.value * this._x.value + this._y.value * this._y.value);\n    }\n\n    // Squared magnitude (faster than magnitude for comparisons)\n    magnitudeSquared(): number {\n        return this._x.value * this._x.value + this._y.value * this._y.value;\n    }\n\n    // Distance to another vector\n    distanceTo(v: Vector2D): number {\n        const dx = this._x.value - v.x.value;\n        const dy = this._y.value - v.y.value;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n\n    // Squared distance (faster for comparisons)\n    distanceToSquared(v: Vector2D): number {\n        const dx = this._x.value - v.x.value;\n        const dy = this._y.value - v.y.value;\n        return dx * dx + dy * dy;\n    }\n\n    // Normalize (make unit length)\n    normalize(): Vector2D {\n        const mag = this.magnitude();\n        if (mag === 0) return new Vector2D(0, 0);\n        return new Vector2D(this._x.value / mag, this._y.value / mag);\n    }\n\n    // Check if vectors are equal\n    equals(v: Vector2D, tolerance: number = 1e-6): boolean {\n        return Math.abs(this._x.value - v.x.value) < tolerance &&\n               Math.abs(this._y.value - v.y.value) < tolerance;\n    }\n\n    // Linear interpolation\n    lerp(v: Vector2D, t: number): Vector2D {\n        const clampedT = Math.max(0, Math.min(1, t));\n        return new Vector2D(\n            this._x.value + (v.x.value - this._x.value) * clampedT,\n            this._y.value + (v.y.value - this._y.value) * clampedT\n        );\n    }\n\n    // Angle with another vector (in radians)\n    angleTo(v: Vector2D): number {\n        const dot = this.dot(v);\n        const det = this.cross(v);\n        return Math.atan2(det, dot);\n    }\n\n    // Rotate vector by angle (in radians)\n    rotate(angle: number): Vector2D {\n        const cos = Math.cos(angle);\n        const sin = Math.sin(angle);\n        return new Vector2D(\n            this._x.value * cos - this._y.value * sin,\n            this._x.value * sin + this._y.value * cos\n        );\n    }\n\n    // Project onto another vector\n    projectOnto(v: Vector2D): Vector2D {\n        const scalar = this.dot(v) / v.magnitudeSquared();\n        return v.multiply(scalar);\n    }\n\n    // Reflect across a normal vector\n    reflect(normal: Vector2D): Vector2D {\n        const normalizedNormal = normal.normalize();\n        const dotProduct = this.dot(normalizedNormal);\n        return this.subtract(normalizedNormal.multiply(2 * dotProduct));\n    }\n\n    // Clamp vector components\n    clamp(min: Vector2D, max: Vector2D): Vector2D {\n        return new Vector2D(\n            Math.max(min.x.value, Math.min(max.x.value, this._x.value)),\n            Math.max(min.y.value, Math.min(max.y.value, this._y.value))\n        );\n    }\n\n    // Get the minimum component\n    min(): number {\n        return Math.min(this._x.value, this._y.value);\n    }\n\n    // Get the maximum component\n    max(): number {\n        return Math.max(this._x.value, this._y.value);\n    }\n\n    // Static utility methods\n    static zero(): Vector2D {\n        return new Vector2D(0, 0);\n    }\n\n    static one(): Vector2D {\n        return new Vector2D(1, 1);\n    }\n\n    static unitX(): Vector2D {\n        return new Vector2D(1, 0);\n    }\n\n    static unitY(): Vector2D {\n        return new Vector2D(0, 1);\n    }\n\n    // Create vector from angle (in radians)\n    static fromAngle(angle: number, length: number = 1): Vector2D {\n        return new Vector2D(\n            Math.cos(angle) * length,\n            Math.sin(angle) * length\n        );\n    }\n\n    // Create vector from polar coordinates\n    static fromPolar(angle: number, radius: number): Vector2D {\n        return Vector2D.fromAngle(angle, radius);\n    }\n}\n\nexport const vector2Ref = (x: number | ReturnType<typeof numberRef> = 0, y: number | ReturnType<typeof numberRef> = 0) => {\n    return new Vector2D(x, y);\n}\n\nexport class Matrix2D {\n    private _elements: ReturnType<typeof numberRef>[];\n\n    constructor(\n        a: number | ReturnType<typeof numberRef> = 1, b: number | ReturnType<typeof numberRef> = 0,\n        c: number | ReturnType<typeof numberRef> = 0, d: number | ReturnType<typeof numberRef> = 1\n    ) {\n        this._elements = [\n            typeof a === 'number' ? numberRef(a) : a,\n            typeof b === 'number' ? numberRef(b) : b,\n            typeof c === 'number' ? numberRef(c) : c,\n            typeof d === 'number' ? numberRef(d) : d\n        ];\n    }\n\n    get elements() { return this._elements; }\n\n    // Matrix elements access\n    get m00() { return this._elements[0]; }\n    get m01() { return this._elements[1]; }\n    get m10() { return this._elements[2]; }\n    get m11() { return this._elements[3]; }\n\n    set m00(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') this._elements[0].value = value;\n        else this._elements[0] = value;\n    }\n    set m01(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') this._elements[1].value = value;\n        else this._elements[1] = value;\n    }\n    set m10(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') this._elements[2].value = value;\n        else this._elements[2] = value;\n    }\n    set m11(value: number | ReturnType<typeof numberRef>) {\n        if (typeof value === 'number') this._elements[3].value = value;\n        else this._elements[3] = value;\n    }\n\n    // Array-like access for compatibility\n    get 0() { return this._elements[0]; }\n    get 1() { return this._elements[1]; }\n    get 2() { return this._elements[2]; }\n    get 3() { return this._elements[3]; }\n\n    // Convert to plain array for operations\n    toArray() {\n        return [...this._elements];\n    }\n\n    // Clone the matrix\n    clone() {\n        return new Matrix2D(\n            this._elements[0].value, this._elements[1].value,\n            this._elements[2].value, this._elements[3].value\n        );\n    }\n\n    // Set values\n    set(a: number, b: number, c: number, d: number) {\n        this._elements[0].value = a;\n        this._elements[1].value = b;\n        this._elements[2].value = c;\n        this._elements[3].value = d;\n        return this;\n    }\n\n    // Identity matrix\n    identity() {\n        return this.set(1, 0, 0, 1);\n    }\n\n    // Copy from another matrix\n    copy(m: Matrix2D) {\n        this._elements[0].value = m.elements[0].value;\n        this._elements[1].value = m.elements[1].value;\n        this._elements[2].value = m.elements[2].value;\n        this._elements[3].value = m.elements[3].value;\n        return this;\n    }\n\n    // Matrix operations\n    multiply(m: Matrix2D): Matrix2D {\n        const a = this._elements[0].value, b = this._elements[1].value;\n        const c = this._elements[2].value, d = this._elements[3].value;\n        const e = m.elements[0].value, f = m.elements[1].value;\n        const g = m.elements[2].value, h = m.elements[3].value;\n\n        return new Matrix2D(\n            a * e + b * g, a * f + b * h,\n            c * e + d * g, c * f + d * h\n        );\n    }\n\n    multiplyScalar(s: number): Matrix2D {\n        return new Matrix2D(\n            this._elements[0].value * s, this._elements[1].value * s,\n            this._elements[2].value * s, this._elements[3].value * s\n        );\n    }\n\n    // Transform a vector\n    transformVector(v: Vector2D): Vector2D {\n        const x = this._elements[0].value * v.x.value + this._elements[1].value * v.y.value;\n        const y = this._elements[2].value * v.x.value + this._elements[3].value * v.y.value;\n        return new Vector2D(x, y);\n    }\n\n    // Determinant\n    determinant(): number {\n        return this._elements[0].value * this._elements[3].value -\n               this._elements[1].value * this._elements[2].value;\n    }\n\n    // Inverse matrix\n    inverse(): Matrix2D | null {\n        const det = this.determinant();\n        if (det === 0) return null; // Not invertible\n\n        const invDet = 1 / det;\n        return new Matrix2D(\n            this._elements[3].value * invDet, -this._elements[1].value * invDet,\n            -this._elements[2].value * invDet, this._elements[0].value * invDet\n        );\n    }\n\n    // Transpose\n    transpose(): Matrix2D {\n        return new Matrix2D(\n            this._elements[0].value, this._elements[2].value,\n            this._elements[1].value, this._elements[3].value\n        );\n    }\n\n    // Check if matrices are equal\n    equals(m: Matrix2D, tolerance: number = 1e-6): boolean {\n        for (let i = 0; i < 4; i++) {\n            if (Math.abs(this._elements[i].value - m.elements[i].value) > tolerance) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    // Create rotation matrix\n    static rotation(angle: number): Matrix2D {\n        const cos = Math.cos(angle);\n        const sin = Math.sin(angle);\n        return new Matrix2D(cos, -sin, sin, cos);\n    }\n\n    // Create scale matrix\n    static scale(sx: number, sy: number = sx): Matrix2D {\n        return new Matrix2D(sx, 0, 0, sy);\n    }\n\n    // Create shear matrix\n    static shear(sx: number, sy: number): Matrix2D {\n        return new Matrix2D(1, sx, sy, 1);\n    }\n}\n\nexport const matrix2x2Ref = (\n    a: number | ReturnType<typeof numberRef> = 1, b: number | ReturnType<typeof numberRef> = 0,\n    c: number | ReturnType<typeof numberRef> = 0, d: number | ReturnType<typeof numberRef> = 1\n) => {\n    return new Matrix2D(a, b, c, d);\n}\n","import { numberRef, computed, affected } from \"fest/object\";\nimport { Vector2D, vector2Ref } from \"./Point2D\";\nimport { Vector3D } from \"./Point3D\";\nimport { Vector4D } from \"./Point4D\";\n\n// Utility functions for component integration\nexport const vectorFromArray = (arr: ReturnType<typeof numberRef>[]): Vector2D | Vector3D | Vector4D => {\n    switch (arr.length) {\n        case 2: return new Vector2D(arr[0], arr[1]);\n        case 3: return new Vector3D(arr[0], arr[1], arr[2]);\n        case 4: return new Vector4D(arr[0], arr[1], arr[2], arr[3]);\n        default: throw new Error(`Unsupported vector dimension: ${arr.length}`);\n    }\n};\n\nexport const vectorToArray = (vec: Vector2D | Vector3D | Vector4D): ReturnType<typeof numberRef>[] => {\n    if (vec instanceof Vector2D) return [vec.x, vec.y];\n    if (vec instanceof Vector3D) return [vec.x, vec.y, vec.z];\n    if (vec instanceof Vector4D) return [vec.x, vec.y, vec.z, vec.w];\n    throw new Error(\"Unsupported vector type\");\n};\n\n// Transform utilities for layout components\nexport const translate2D = (vec: Vector2D, tx: ReturnType<typeof numberRef>, ty: ReturnType<typeof numberRef>) => {\n    return addVector2D(vec, new Vector2D(tx, ty));\n};\n\nexport const scale2D = (vec: Vector2D, sx: ReturnType<typeof numberRef>, sy: ReturnType<typeof numberRef> = sx) => {\n    return new Vector2D(\n        operated([vec.x, sx], () => vec.x.value * sx.value),\n        operated([vec.y, sy], () => vec.y.value * sy.value)\n    );\n};\n\nexport const rotate2D = (vec: Vector2D, angle: ReturnType<typeof numberRef>) => {\n    const cos = operated([angle], () => Math.cos(angle.value));\n    const sin = operated([angle], () => Math.sin(angle.value));\n    return new Vector2D(\n        operated([vec.x, vec.y, cos, sin], () => vec.x.value * cos.value - vec.y.value * sin.value),\n        operated([vec.x, vec.y, cos, sin], () => vec.x.value * sin.value + vec.y.value * cos.value)\n    );\n};\n\n// Rectangle/Bounding box operations\nexport interface Rect2D {\n    position: Vector2D; // x, y\n    size: Vector2D;     // width, height\n}\n\nexport const createRect2D = (x: number | ReturnType<typeof numberRef> = 0,\n                            y: number | ReturnType<typeof numberRef> = 0,\n                            width: number | ReturnType<typeof numberRef> = 0,\n                            height: number | ReturnType<typeof numberRef> = 0): Rect2D => ({\n    position: vector2Ref(x, y),\n    size: vector2Ref(width, height)\n});\n\n// Rectangle center point (reactive)\nexport const rectCenter = (rect: Rect2D): Vector2D => {\n    return addVector2D(rect.position, multiplyVector2D(rect.size, numberRef(0.5)));\n};\n\n// Point containment in rectangle (reactive)\nexport const rectContainsPoint = (rect: Rect2D, point: Vector2D): ReturnType<typeof numberRef> => {\n    return operated([rect.position.x, rect.position.y, rect.size.x, rect.size.y, point.x, point.y], () => {\n        const inX = point.x.value >= rect.position.x.value && point.x.value <= rect.position.x.value + rect.size.x.value;\n        const inY = point.y.value >= rect.position.y.value && point.y.value <= rect.position.y.value + rect.size.y.value;\n        return inX && inY;\n    });\n};\n\n// Rectangle intersection (reactive)\nexport const rectIntersects = (rectA: Rect2D, rectB: Rect2D): ReturnType<typeof numberRef> => {\n    return operated([\n        rectA.position.x, rectA.position.y, rectA.size.x, rectA.size.y,\n        rectB.position.x, rectB.position.y, rectB.size.x, rectB.size.y\n    ], () => {\n        const aRight = rectA.position.x.value + rectA.size.x.value;\n        const aBottom = rectA.position.y.value + rectA.size.y.value;\n        const bRight = rectB.position.x.value + rectB.size.x.value;\n        const bBottom = rectB.position.y.value + rectB.size.y.value;\n\n        return !(rectA.position.x.value > bRight ||\n                 aRight < rectB.position.x.value ||\n                 rectA.position.y.value > bBottom ||\n                 aBottom < rectB.position.y.value);\n    });\n};\n\n// Rectangle union (reactive)\nexport const rectUnion = (rectA: Rect2D, rectB: Rect2D): Rect2D => {\n    const minX = operated([rectA.position.x, rectB.position.x], () => Math.min(rectA.position.x.value, rectB.position.x.value));\n    const minY = operated([rectA.position.y, rectB.position.y], () => Math.min(rectA.position.y.value, rectB.position.y.value));\n    const maxX = operated([rectA.position.x, rectA.size.x, rectB.position.x, rectB.size.x], () =>\n        Math.max(rectA.position.x.value + rectA.size.x.value, rectB.position.x.value + rectB.size.x.value));\n    const maxY = operated([rectA.position.y, rectA.size.y, rectB.position.y, rectB.size.y], () =>\n        Math.max(rectA.position.y.value + rectA.size.y.value, rectB.position.y.value + rectB.size.y.value));\n\n    return {\n        position: new Vector2D(minX, minY),\n        size: new Vector2D(\n            operated([maxX, minX], () => maxX.value - minX.value),\n            operated([maxY, minY], () => maxY.value - minY.value)\n        )\n    };\n};\n\n// Clamp point to rectangle bounds (reactive)\nexport const clampPointToRect = (point: Vector2D, rect: Rect2D): Vector2D => {\n    return new Vector2D(\n        operated([point.x, rect.position.x, rect.size.x], () =>\n            Math.max(rect.position.x.value, Math.min(point.x.value, rect.position.x.value + rect.size.x.value))),\n        operated([point.y, rect.position.y, rect.size.y], () =>\n            Math.max(rect.position.y.value, Math.min(point.y.value, rect.position.y.value + rect.size.y.value)))\n    );\n};\n\n// Distance from point to rectangle edge (reactive)\nexport const pointToRectDistance = (point: Vector2D, rect: Rect2D): ReturnType<typeof numberRef> => {\n    const clamped = clampPointToRect(point, rect);\n    return magnitude2D(subtractVector2D(point, clamped));\n};\n\n// Rectangle area (reactive)\nexport const rectArea = (rect: Rect2D): ReturnType<typeof numberRef> => {\n    return operated([rect.size.x, rect.size.y], () => rect.size.x.value * rect.size.y.value);\n};\n\n// Scale rectangle around center (reactive)\nexport const scaleRectAroundCenter = (rect: Rect2D, scale: ReturnType<typeof numberRef>): Rect2D => {\n    const center = rectCenter(rect);\n    const newSize = multiplyVector2D(rect.size, scale);\n    const newPosition = subtractVector2D(center, multiplyVector2D(newSize, numberRef(0.5)));\n\n    return {\n        position: newPosition,\n        size: newSize\n    };\n};\n\n// Transform rectangle with matrix (reactive)\nexport const transformRect2D = (rect: Rect2D, transform: (point: Vector2D) => Vector2D): Rect2D => {\n    // Transform all four corners and create bounding box\n    const corners = [\n        rect.position, // top-left\n        addVector2D(rect.position, new Vector2D(rect.size.x, numberRef(0))), // top-right\n        addVector2D(rect.position, rect.size), // bottom-right\n        addVector2D(rect.position, new Vector2D(numberRef(0), rect.size.y))  // bottom-left\n    ];\n\n    const transformedCorners = corners.map(transform);\n    return rectUnion(\n        { position: transformedCorners[0], size: vector2Ref(0, 0) },\n        { position: transformedCorners[1], size: vector2Ref(0, 0) }\n    );\n};\n\n// Relative positioning within container\nexport const relativePosition = (child: Vector2D, parent: Rect2D): Vector2D => {\n    return new Vector2D(\n        operated([child.x, parent.position.x], () => child.x.value - parent.position.x.value),\n        operated([child.y, parent.position.y], () => child.y.value - parent.position.y.value)\n    );\n};\n\n// Convert relative position to absolute\nexport const absolutePosition = (relative: Vector2D, parent: Rect2D): Vector2D => {\n    return addVector2D(relative, parent.position);\n};\n\n// Aspect ratio constraint for rectangles\nexport const constrainRectAspectRatio = (rect: Rect2D, aspectRatio: ReturnType<typeof numberRef>, mode: 'fit' | 'fill' = 'fit'): Rect2D => {\n    return operated([rect.size.x, rect.size.y, aspectRatio], () => {\n        const currentRatio = rect.size.x.value / rect.size.y.value;\n        const targetRatio = aspectRatio.value;\n\n        let newWidth = rect.size.x.value;\n        let newHeight = rect.size.y.value;\n\n        if (mode === 'fit') {\n            if (currentRatio > targetRatio) {\n                // Too wide, constrain height\n                newHeight = newWidth / targetRatio;\n            } else {\n                // Too tall, constrain width\n                newWidth = newHeight * targetRatio;\n            }\n        } else { // fill\n            if (currentRatio > targetRatio) {\n                // Too wide, constrain width\n                newWidth = newHeight * targetRatio;\n            } else {\n                // Too tall, constrain height\n                newHeight = newWidth / targetRatio;\n            }\n        }\n\n        return {\n            position: rect.position,\n            size: vector2Ref(newWidth, newHeight)\n        };\n    });\n};\n\n// ============================================================================\n// Enhanced Input and UI Control Operations\n// ============================================================================\n\n// Smooth value interpolation for UI controls\nexport const smoothValueTransition = (\n    current: ReturnType<typeof numberRef>,\n    target: ReturnType<typeof numberRef>,\n    smoothing: ReturnType<typeof numberRef> = numberRef(0.1)\n): ReturnType<typeof numberRef> => {\n    return operated([current, target, smoothing], () => {\n        const diff = target.value - current.value;\n        return current.value + diff * smoothing.value;\n    });\n};\n\n// Calculate thumb position for slider/range controls\nexport const sliderThumbPosition = (\n    value: ReturnType<typeof numberRef>,\n    min: ReturnType<typeof numberRef>,\n    max: ReturnType<typeof numberRef>,\n    trackSize: ReturnType<typeof numberRef>\n): ReturnType<typeof numberRef> => {\n    return operated([value, min, max, trackSize], () => {\n        const normalizedValue = (value.value - min.value) / (max.value - min.value);\n        return normalizedValue * trackSize.value;\n    });\n};\n\n// Calculate scrollbar thumb size and position\nexport const scrollbarMetrics = (\n    contentSize: ReturnType<typeof numberRef>,\n    containerSize: ReturnType<typeof numberRef>,\n    scrollPosition: ReturnType<typeof numberRef>\n) => {\n    const thumbSize = operated([contentSize, containerSize], () => {\n        const ratio = containerSize.value / contentSize.value;\n        return Math.max(20, ratio * containerSize.value); // Minimum 20px\n    });\n\n    const thumbPosition = operated([scrollPosition, contentSize, containerSize, thumbSize], () => {\n        const maxScroll = contentSize.value - containerSize.value;\n        const scrollRatio = maxScroll > 0 ? scrollPosition.value / maxScroll : 0;\n        return scrollRatio * (containerSize.value - thumbSize.value);\n    });\n\n    return { thumbSize, thumbPosition };\n};\n\n// Convert screen coordinates to normalized control values\nexport const screenToControlValue = (\n    screenPos: ReturnType<typeof numberRef>,\n    controlRect: Rect2D,\n    axis: 'x' | 'y' = 'x'\n): ReturnType<typeof numberRef> => {\n    const controlStart = axis === 'x' ? controlRect.position.x : controlRect.position.y;\n    const controlSize = axis === 'x' ? controlRect.size.x : controlRect.size.y;\n\n    return operated([screenPos, controlStart, controlSize], () => {\n        const relativePos = screenPos.value - controlStart.value;\n        return Math.max(0, Math.min(1, relativePos / controlSize.value));\n    });\n};\n\n// Enhanced easing functions for UI animations\nexport const easeInOutCubic = (t: ReturnType<typeof numberRef>): ReturnType<typeof numberRef> => {\n    return operated([t], () => {\n        const x = t.value;\n        return x < 0.5 ? 4 * x * x * x : 1 - Math.pow(-2 * x + 2, 3) / 2;\n    });\n};\n\nexport const easeOutBounce = (t: ReturnType<typeof numberRef>): ReturnType<typeof numberRef> => {\n    return operated([t], () => {\n        let x = t.value;\n        const n1 = 7.5625;\n        const d1 = 2.75;\n\n        if (x < 1 / d1) {\n            return n1 * x * x;\n        } else if (x < 2 / d1) {\n            x -= 1.5 / d1;\n            return n1 * x * x + 0.75;\n        } else if (x < 2.5 / d1) {\n            x -= 2.25 / d1;\n            return n1 * x * x + 0.9375;\n        } else {\n            x -= 2.625 / d1;\n            return n1 * x * x + 0.984375;\n        }\n    });\n};\n\n// Momentum-based scrolling calculations\nexport const momentumScroll = (\n    velocity: ReturnType<typeof numberRef>,\n    deceleration: ReturnType<typeof numberRef> = numberRef(0.95),\n    minVelocity: ReturnType<typeof numberRef> = numberRef(0.01)\n): ReturnType<typeof numberRef> => {\n    return operated([velocity, deceleration, minVelocity], () => {\n        const newVelocity = velocity.value * deceleration.value;\n        return Math.abs(newVelocity) < minVelocity.value ? 0 : newVelocity;\n    });\n};\n\n// Calculate scroll bounds with bounce effects\nexport const scrollBoundsWithBounce = (\n    scrollPosition: ReturnType<typeof numberRef>,\n    contentSize: ReturnType<typeof numberRef>,\n    containerSize: ReturnType<typeof numberRef>,\n    bounceDistance: ReturnType<typeof numberRef> = numberRef(50)\n): ReturnType<typeof numberRef> => {\n    return operated([scrollPosition, contentSize, containerSize, bounceDistance], () => {\n        const maxScroll = contentSize.value - containerSize.value;\n\n        if (scrollPosition.value < 0) {\n            // Bouncing at start\n            const bounce = Math.min(bounceDistance.value, Math.abs(scrollPosition.value));\n            return -bounce * 0.3; // Reduce bounce effect\n        } else if (scrollPosition.value > maxScroll) {\n            // Bouncing at end\n            const overScroll = scrollPosition.value - maxScroll;\n            const bounce = Math.min(bounceDistance.value, overScroll);\n            return maxScroll + bounce * 0.3;\n        }\n\n        return scrollPosition.value;\n    });\n};\n\n//\nconst flattenRefs = (input: any): ReturnType<typeof numberRef>[] => {\n    const refs: ReturnType<typeof numberRef>[] = [];\n\n    const traverse = (item: any) => {\n        if (item && typeof item === 'object' && 'value' in item) {\n            // It's a reactive reference\n            refs.push(item);\n        } else if (Array.isArray(item)) {\n            // It's an array, traverse each element\n            item.forEach(traverse);\n        } else if (item && typeof item === 'object') {\n            // It's an object, traverse its properties\n            Object.values(item).forEach(traverse);\n        }\n    };\n\n    traverse(input);\n    return refs;\n};\n\n//\nexport const operated = (args: any[], fn: (...values: any[]) => any) => {\n    // Get initial values for the function\n    const getCurrentValues = () => args.map(arg => {\n        if (arg && typeof arg === 'object' && 'value' in arg) {\n            return arg.value;\n        }\n        return arg;\n    });\n\n    const initialResult = fn(...getCurrentValues());\n\n    // If the result is a number, return a reactive number reference\n    if (typeof initialResult === 'number') {\n        const result = numberRef(initialResult);\n\n        const updateResult = () => {\n            result.value = fn(...getCurrentValues());\n        };\n\n        // Flatten all reactive references from the arguments\n        const allRefs = flattenRefs(args);\n\n        // Subscribe to each reactive reference to update the result\n        allRefs.forEach(ref => affected(ref, updateResult));\n\n        return result;\n    }\n\n    // For non-number results (vectors, matrices, etc.), return the computed result\n    // The caller is responsible for ensuring the result has the right reactive structure\n    let currentResult = initialResult;\n\n    const updateResult = () => {\n        currentResult = fn(...getCurrentValues());\n    };\n\n    // Flatten all reactive references from the arguments\n    const allRefs = flattenRefs(args);\n\n    // Subscribe to each reactive reference to update the result\n    allRefs.forEach(ref => affected(ref, updateResult));\n\n    return currentResult;\n}\n\n\n\n\n// Scalar operations (1D)\nexport const addRef = (a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>) => {\n    return operated([a, b], () => a.value + b.value);\n}\n\nexport const subtractRef = (a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>) => {\n    return operated([a, b], () => a.value - b.value);\n}\n\nexport const multiplyRef = (a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>) => {\n    return operated([a, b], () => a.value * b.value);\n}\n\nexport const divideRef = (a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>) => {\n    return operated([a, b], () => a.value / b.value);\n}\n\nexport const modulusRef = (a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>) => {\n    return operated([a, b], () => a.value % b.value);\n}\n\nexport const powerRef = (a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>) => {\n    return operated([a, b], () => Math.pow(a.value, b.value));\n}\n\n// Trigonometric functions\nexport const sinRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.sin(a.value));\n}\n\nexport const cosRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.cos(a.value));\n}\n\nexport const tanRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.tan(a.value));\n}\n\nexport const asinRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.asin(a.value));\n}\n\nexport const acosRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.acos(a.value));\n}\n\nexport const atanRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.atan(a.value));\n}\n\nexport const atan2Ref = (a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>) => {\n    return operated([a, b], () => Math.atan2(a.value, b.value));\n}\n\nexport const hypotRef = (a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>) => {\n    return operated([a, b], () => Math.hypot(a.value, b.value));\n}\n\n// Other math functions\nexport const squareRootRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.sqrt(a.value));\n}\n\nexport const cubeRootRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.cbrt(a.value));\n}\n\nexport const absoluteRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.abs(a.value));\n}\n\nexport const signRef = (a: ReturnType<typeof numberRef>) => {\n    return operated(a, () => Math.sign(a.value));\n}\n\nexport const clampRef = (a: ReturnType<typeof numberRef>, min: ReturnType<typeof numberRef>, max: ReturnType<typeof numberRef>) => {\n    return operated([a, min, max], () => Math.min(Math.max(a.value, min.value), max.value));\n}\n\n// Vector operations (2D)\nexport const addVector2D = (a: Vector2D, b: Vector2D) => {\n    return new Vector2D(\n        operated([a.x, b.x], () => a.x.value + b.x.value),\n        operated([a.y, b.y], () => a.y.value + b.y.value)\n    );\n}\n\nexport const subtractVector2D = (a: Vector2D, b: Vector2D) => {\n    return new Vector2D(\n        operated([a.x, b.x], () => a.x.value - b.x.value),\n        operated([a.y, b.y], () => a.y.value - b.y.value)\n    );\n}\n\nexport const multiplyVector2D = (a: Vector2D, scalar: ReturnType<typeof numberRef>) => {\n    return new Vector2D(\n        operated([a.x, scalar], () => a.x.value * scalar.value),\n        operated([a.y, scalar], () => a.y.value * scalar.value)\n    );\n}\n\nexport const divideVector2D = (a: Vector2D, scalar: ReturnType<typeof numberRef>) => {\n    return new Vector2D(\n        operated([a.x, scalar], () => a.x.value / scalar.value),\n        operated([a.y, scalar], () => a.y.value / scalar.value)\n    );\n}\n\nexport const dotProduct2D = (a: Vector2D, b: Vector2D) => {\n    return operated([a.x, a.y, b.x, b.y], () => a.x.value * b.x.value + a.y.value * b.y.value);\n}\n\nexport const magnitude2D = (a: Vector2D) => {\n    return operated([a.x, a.y], () => Math.sqrt(a.x.value * a.x.value + a.y.value * a.y.value));\n}\n\nexport const normalize2D = (a: Vector2D) => {\n    const mag = magnitude2D(a);\n    return new Vector2D(\n        operated([a.x, mag], () => a.x.value / mag.value),\n        operated([a.y, mag], () => a.y.value / mag.value)\n    );\n}\n\n// Vector operations (3D)\nexport const addVector3D = (a: Vector3D, b: Vector3D) => {\n    return new Vector3D(\n        operated([a.x, b.x], () => a.x.value + b.x.value),\n        operated([a.y, b.y], () => a.y.value + b.y.value),\n        operated([a.z, b.z], () => a.z.value + b.z.value)\n    );\n}\n\nexport const subtractVector3D = (a: Vector3D, b: Vector3D) => {\n    return new Vector3D(\n        operated([a.x, b.x], () => a.x.value - b.x.value),\n        operated([a.y, b.y], () => a.y.value - b.y.value),\n        operated([a.z, b.z], () => a.z.value - b.z.value)\n    );\n}\n\nexport const multiplyVector3D = (a: Vector3D, scalar: ReturnType<typeof numberRef>) => {\n    return new Vector3D(\n        operated([a.x, scalar], () => a.x.value * scalar.value),\n        operated([a.y, scalar], () => a.y.value * scalar.value),\n        operated([a.z, scalar], () => a.z.value * scalar.value)\n    );\n}\n\nexport const divideVector3D = (a: Vector3D, scalar: ReturnType<typeof numberRef>) => {\n    return new Vector3D(\n        operated([a.x, scalar], () => a.x.value / scalar.value),\n        operated([a.y, scalar], () => a.y.value / scalar.value),\n        operated([a.z, scalar], () => a.z.value / scalar.value)\n    );\n}\n\nexport const dotProduct3D = (a: Vector3D, b: Vector3D) => {\n    return operated([a.x, a.y, a.z, b.x, b.y, b.z], () =>\n        a.x.value * b.x.value + a.y.value * b.y.value + a.z.value * b.z.value\n    );\n}\n\nexport const crossProduct3D = (a: Vector3D, b: Vector3D) => {\n    return new Vector3D(\n        operated([a.y, a.z, b.y, b.z], () => a.y.value * b.z.value - a.z.value * b.y.value),\n        operated([a.z, a.x, b.z, b.x], () => a.z.value * b.x.value - a.x.value * b.z.value),\n        operated([a.x, a.y, b.x, b.y], () => a.x.value * b.y.value - a.y.value * b.x.value)\n    );\n}\n\nexport const magnitude3D = (a: Vector3D) => {\n    return operated([a.x, a.y, a.z], () =>\n        Math.sqrt(a.x.value * a.x.value + a.y.value * a.y.value + a.z.value * a.z.value)\n    );\n}\n\nexport const normalize3D = (a: Vector3D) => {\n    const mag = magnitude3D(a);\n    return new Vector3D(\n        operated([a.x, mag], () => a.x.value / mag.value),\n        operated([a.y, mag], () => a.y.value / mag.value),\n        operated([a.z, mag], () => a.z.value / mag.value)\n    );\n}\n\n// Vector operations (4D)\nexport const addVector4D = (a: Vector4D, b: Vector4D) => {\n    return new Vector4D(\n        operated([a.x, b.x], () => a.x.value + b.x.value),\n        operated([a.y, b.y], () => a.y.value + b.y.value),\n        operated([a.z, b.z], () => a.z.value + b.z.value),\n        operated([a.w, b.w], () => a.w.value + b.w.value)\n    );\n}\n\nexport const subtractVector4D = (a: Vector4D, b: Vector4D) => {\n    return new Vector4D(\n        operated([a.x, b.x], () => a.x.value - b.x.value),\n        operated([a.y, b.y], () => a.y.value - b.y.value),\n        operated([a.z, b.z], () => a.z.value - b.z.value),\n        operated([a.w, b.w], () => a.w.value - b.w.value)\n    );\n}\n\nexport const multiplyVector4D = (a: Vector4D, scalar: ReturnType<typeof numberRef>) => {\n    return new Vector4D(\n        operated([a.x, scalar], () => a.x.value * scalar.value),\n        operated([a.y, scalar], () => a.y.value * scalar.value),\n        operated([a.z, scalar], () => a.z.value * scalar.value),\n        operated([a.w, scalar], () => a.w.value * scalar.value)\n    );\n}\n\nexport const divideVector4D = (a: Vector4D, scalar: ReturnType<typeof numberRef>) => {\n    return new Vector4D(\n        operated([a.x, scalar], () => a.x.value / scalar.value),\n        operated([a.y, scalar], () => a.y.value / scalar.value),\n        operated([a.z, scalar], () => a.z.value / scalar.value),\n        operated([a.w, scalar], () => a.w.value / scalar.value)\n    );\n}\n\nexport const dotProduct4D = (a: Vector4D, b: Vector4D) => {\n    return operated([a.x, a.y, a.z, a.w, b.x, b.y, b.z, b.w], () =>\n        a.x.value * b.x.value + a.y.value * b.y.value + a.z.value * b.z.value + a.w.value * b.w.value\n    );\n}\n\nexport const magnitude4D = (a: Vector4D) => {\n    return operated([a.x, a.y, a.z, a.w], () =>\n        Math.sqrt(a.x.value * a.x.value + a.y.value * a.y.value + a.z.value * a.z.value + a.w.value * a.w.value)\n    );\n}\n\nexport const normalize4D = (a: Vector4D) => {\n    const mag = magnitude4D(a);\n    return new Vector4D(\n        operated([a.x, mag], () => a.x.value / mag.value),\n        operated([a.y, mag], () => a.y.value / mag.value),\n        operated([a.z, mag], () => a.z.value / mag.value),\n        operated([a.w, mag], () => a.w.value / mag.value)\n    );\n}\n","import { numberRef } from \"fest/object\";\nimport { bindWith, bindAnimated, bindTransition, bindSpring, bindMorph } from \"fest/lure\";\nimport {\n    Vector2D, operated,\n    Matrix2D, Matrix4D\n} from \"../../math/index\";\nimport { handleStyleChange } from \"fest/dom\";\nimport { AnimationOptions, TransitionOptions } from \"./CSSAnimated\";\n\n// CSS Typed OM and Unit Conversion Utilities\nexport class CSSUnitConverter {\n    private static readonly unitPatterns = {\n        px: /(-?\\d*\\.?\\d+)px/g,\n        em: /(-?\\d*\\.?\\d+)em/g,\n        rem: /(-?\\d*\\.?\\d+)rem/g,\n        vh: /(-?\\d*\\.?\\d+)vh/g,\n        vw: /(-?\\d*\\.?\\d+)vw/g,\n        vmin: /(-?\\d*\\.?\\d+)vmin/g,\n        vmax: /(-?\\d*\\.?\\d+)vmax/g,\n        percent: /(-?\\d*\\.?\\d+)%/g\n    };\n\n    // Convert CSS value to pixels\n    static toPixels(value: string, element?: HTMLElement): number {\n        if (!value) return 0;\n\n        const testElement = element || document.body;\n        const testDiv = document.createElement('div');\n        testDiv.style.position = 'absolute';\n        testDiv.style.visibility = 'hidden';\n        testDiv.style.width = value;\n        testElement.appendChild(testDiv);\n\n        const pixels = testDiv.offsetWidth;\n        testElement.removeChild(testDiv);\n        return pixels;\n    }\n\n    // Convert pixels to CSS unit\n    static fromPixels(pixels: number, unit: 'px' | 'em' | 'rem' | '%' = 'px'): string {\n        switch (unit) {\n            case 'em':\n                const fontSize = parseFloat(getComputedStyle(document.body).fontSize);\n                return `${pixels / fontSize}em`;\n            case 'rem':\n                const rootFontSize = parseFloat(getComputedStyle(document.documentElement).fontSize);\n                return `${pixels / rootFontSize}rem`;\n            case '%':\n                return `${(pixels / window.innerWidth) * 100}%`;\n            default:\n                return `${pixels}px`;\n        }\n    }\n\n    // Parse CSS value with units\n    static parseValue(cssValue: string): { value: number, unit: string } {\n        const match = cssValue.match(/^(-?\\d*\\.?\\d+)([a-z%]+)?$/);\n        if (!match) return { value: 0, unit: 'px' };\n\n        return {\n            value: parseFloat(match[1]),\n            unit: match[2] || 'px'\n        };\n    }\n\n    // Convert between units\n    static convertUnits(value: number, fromUnit: string, toUnit: string, element?: HTMLElement): number {\n        if (fromUnit === toUnit) return value;\n\n        // Convert to pixels first\n        let pixels: number;\n        switch (fromUnit) {\n            case 'px':\n                pixels = value;\n                break;\n            case 'em':\n                const fontSize = parseFloat(getComputedStyle(element || document.body).fontSize);\n                pixels = value * fontSize;\n                break;\n            case 'rem':\n                const rootFontSize = parseFloat(getComputedStyle(document.documentElement).fontSize);\n                pixels = value * rootFontSize;\n                break;\n            case '%':\n                pixels = (value / 100) * window.innerWidth;\n                break;\n            case 'vw':\n                pixels = (value / 100) * window.innerWidth;\n                break;\n            case 'vh':\n                pixels = (value / 100) * window.innerHeight;\n                break;\n            default:\n                pixels = value;\n        }\n\n        // Convert from pixels to target unit\n        switch (toUnit) {\n            case 'px':\n                return pixels;\n            case 'em':\n                const fontSize = parseFloat(getComputedStyle(element || document.body).fontSize);\n                return pixels / fontSize;\n            case 'rem':\n                const rootFontSize = parseFloat(getComputedStyle(document.documentElement).fontSize);\n                return pixels / rootFontSize;\n            case '%':\n                return (pixels / window.innerWidth) * 100;\n            case 'vw':\n                return (pixels / window.innerWidth) * 100;\n            case 'vh':\n                return (pixels / window.innerHeight) * 100;\n            default:\n                return pixels;\n        }\n    }\n}\n\n// CSS Transform Utilities with Reactive Math\nexport class CSSTransform {\n    // Convert reactive Vector2D to CSS translate\n    static translate2D(vector: Vector2D): ReturnType<typeof numberRef> {\n        return operated([vector.x, vector.y], () =>\n            `translate(${vector.x.value}px, ${vector.y.value}px)`\n        );\n    }\n\n    // Convert reactive Vector2D to CSS translate3d\n    static translate3D(vector: Vector2D, z: ReturnType<typeof numberRef> = numberRef(0)): ReturnType<typeof numberRef> {\n        return operated([vector.x, vector.y, z], () =>\n            `translate3d(${vector.x.value}px, ${vector.y.value}px, ${z.value}px)`\n        );\n    }\n\n    // Convert reactive Vector2D to CSS scale\n    static scale2D(vector: Vector2D): ReturnType<typeof numberRef> {\n        return operated([vector.x, vector.y], () =>\n            `scale(${vector.x.value}, ${vector.y.value})`\n        );\n    }\n\n    // Convert reactive number to CSS rotate\n    static rotate(angle: ReturnType<typeof numberRef>): ReturnType<typeof numberRef> {\n        return operated([angle], () => `rotate(${angle.value}deg)`);\n    }\n\n    // Combine transforms into single CSS transform string\n    static combine(transforms: ReturnType<typeof numberRef>[]): ReturnType<typeof numberRef> {\n        return operated(transforms, () => transforms.map(t => t.value).join(' '));\n    }\n\n    // Create matrix transform from reactive Matrix2D\n    static matrix2D(matrix: Matrix2D): ReturnType<typeof numberRef> {\n        return operated(matrix.elements, () =>\n            `matrix(${matrix.elements.map(e => e.value).join(', ')})`\n        );\n    }\n\n    // Create matrix3d transform from reactive Matrix4D\n    static matrix3D(matrix: Matrix4D): ReturnType<typeof numberRef> {\n        return operated(matrix.elements, () =>\n            `matrix3d(${matrix.elements.map(e => e.value).join(', ')})`\n        );\n    }\n}\n\n// CSS Position and Size Utilities\nexport class CSSPosition {\n    // Convert reactive Vector2D to CSS position values\n    static leftTop(vector: Vector2D): { left: ReturnType<typeof numberRef>, top: ReturnType<typeof numberRef> } {\n        return {\n            left: operated([vector.x], () => `${vector.x.value}px`),\n            top: operated([vector.y], () => `${vector.y.value}px`)\n        };\n    }\n\n    // Convert reactive Vector2D to CSS inset values\n    static inset(vector: Vector2D): { inset: ReturnType<typeof numberRef> } {\n        return {\n            inset: operated([vector.x, vector.y], () => `${vector.y.value}px ${vector.x.value}px`)\n        };\n    }\n\n    // Convert reactive Vector2D to CSS size values\n    static size(vector: Vector2D): { width: ReturnType<typeof numberRef>, height: ReturnType<typeof numberRef> } {\n        return {\n            width: operated([vector.x], () => `${vector.x.value}px`),\n            height: operated([vector.y], () => `${vector.y.value}px`)\n        };\n    }\n}\n\n// CSS Reactive Binding Utilities\nexport class CSSBinder {\n    // Bind reactive Vector2D to CSS transform\n    static bindTransform(\n        element: HTMLElement,\n        vector: Vector2D,\n        animationType: 'instant' | 'animate' | 'transition' | 'spring' = 'instant',\n        options?: AnimationOptions | TransitionOptions\n    ): () => void {\n        const transformValue = CSSTransform.translate2D(vector);\n        const binder = animationType === 'instant' ? bindWith :\n                      animationType === 'animate' ? bindAnimated :\n                      animationType === 'transition' ? bindTransition : bindSpring;\n        return binder(element, 'transform', transformValue, options) ?? (() => {});\n    }\n\n    // Bind reactive Vector2D to CSS position\n    static bindPosition(\n        element: HTMLElement,\n        vector: Vector2D,\n        animationType: 'instant' | 'animate' | 'transition' | 'spring' = 'instant',\n        options?: AnimationOptions | TransitionOptions\n    ): () => void {\n        const position = CSSPosition.leftTop(vector);\n        const binder = animationType === 'instant' ? bindWith :\n                      animationType === 'animate' ? bindAnimated :\n                      animationType === 'transition' ? bindTransition : bindSpring;\n\n        const unsubLeft = binder(element, 'left', position.left, options) ?? (() => {});\n        const unsubTop = binder(element, 'top', position.top, options) ?? (() => {});\n        return () => { unsubLeft?.(); unsubTop?.(); };\n    }\n\n    // Bind reactive Vector2D to CSS size\n    static bindSize(\n        element: HTMLElement,\n        vector: Vector2D,\n        animationType: 'instant' | 'animate' | 'transition' | 'spring' = 'instant',\n        options?: AnimationOptions | TransitionOptions\n    ): () => void {\n        const size = CSSPosition.size(vector);\n        const binder = animationType === 'instant' ? bindWith :\n                      animationType === 'animate' ? bindAnimated :\n                      animationType === 'transition' ? bindTransition : bindSpring;\n\n        const unsubWidth = binder(element, 'width', size.width, options) ?? (() => {});\n        const unsubHeight = binder(element, 'height', size.height, options) ?? (() => {});\n        return () => { unsubWidth?.(); unsubHeight?.(); };\n    }\n\n    // Bind reactive value with unit conversion\n    static bindWithUnit(\n        element: HTMLElement,\n        property: string,\n        value: ReturnType<typeof numberRef>,\n        unit: string = 'px',\n        animationType: 'instant' | 'animate' | 'transition' | 'spring' = 'instant',\n        options?: AnimationOptions | TransitionOptions\n    ): () => void {\n        const cssValue = operated([value], () => `${value.value}${unit}`);\n        const binder = animationType === 'instant' ? bindWith :\n                      animationType === 'animate' ? bindAnimated :\n                      animationType === 'transition' ? bindTransition : bindSpring;\n        return binder(element, property, cssValue, options) ?? (() => {});\n    }\n\n    // Bind reactive vector with unit conversion\n    static bindVectorWithUnit(\n        element: HTMLElement,\n        vector: Vector2D,\n        unit: string = 'px',\n        animationType: 'instant' | 'animate' | 'transition' | 'spring' = 'instant',\n        options?: AnimationOptions | TransitionOptions\n    ): () => void {\n        const cssValue = operated([vector.x, vector.y], () =>\n            `${vector.x.value}${unit} ${vector.y.value}${unit}`\n        );\n        const binder = animationType === 'instant' ? bindWith :\n                      animationType === 'animate' ? bindAnimated :\n                      animationType === 'transition' ? bindTransition : bindSpring;\n\n        return binder(element, 'transform', cssValue, {\n            ...options,\n            handler: animationType === 'instant' ? undefined : (el: HTMLElement, val: any) => {\n                el.style.setProperty('transform', `translate(${val})`);\n            }\n        }) ?? (() => {});\n    }\n\n    // Enhanced animation methods with morphing support\n    static bindTransformMorph(\n        element: HTMLElement,\n        transformProps: {\n            translate?: Vector2D;\n            scale?: Vector2D | ReturnType<typeof numberRef>;\n            rotate?: ReturnType<typeof numberRef>;\n            skew?: Vector2D;\n        },\n        options: AnimationOptions = {}\n    ): () => void {\n        const transforms: Record<string, any> = {};\n\n        if (transformProps.translate) {\n            transforms.transform = operated(\n                [transformProps.translate.x, transformProps.translate.y],\n                () => `translate(${transformProps.translate!.x.value}px, ${transformProps.translate!.y.value}px)`\n            );\n        }\n\n        if (transformProps.scale) {\n            const scaleStr = transformProps.scale instanceof Vector2D ?\n                operated([transformProps.scale.x, transformProps.scale.y],\n                    () => `scale(${transformProps.scale!.x.value}, ${transformProps.scale!.y.value})`) :\n                operated([transformProps.scale],\n                    () => `scale(${transformProps.scale!.value})`);\n            transforms.transform = transforms.transform ?\n                operated([transforms.transform, scaleStr], (t, s) => `${t} ${s}`) : scaleStr;\n        }\n\n        if (transformProps.rotate) {\n            const rotateStr = operated([transformProps.rotate],\n                () => `rotate(${transformProps.rotate!.value}deg)`);\n            transforms.transform = transforms.transform ?\n                operated([transforms.transform, rotateStr], (t, r) => `${t} ${r}`) : rotateStr;\n        }\n\n        if (transformProps.skew) {\n            const skewStr = operated([transformProps.skew.x, transformProps.skew.y],\n                () => `skew(${transformProps.skew!.x.value}deg, ${transformProps.skew!.y.value}deg)`);\n            transforms.transform = transforms.transform ?\n                operated([transforms.transform, skewStr], (t, s) => `${t} ${s}`) : skewStr;\n        }\n\n        return bindMorph(element, transforms, options);\n    }\n\n    // Bind reactive color with smooth transitions\n    static bindColor(\n        element: HTMLElement,\n        property: string,\n        color: ReturnType<typeof numberRef> | string,\n        animationType: 'instant' | 'animate' | 'transition' = 'transition',\n        options: TransitionOptions = { duration: 300, easing: 'ease-in-out' }\n    ): () => void {\n        const binder = animationType === 'instant' ? bindWith :\n                      animationType === 'animate' ? bindAnimated : bindTransition;\n\n        const colorValue = typeof color === 'string' ? color :\n            operated([color], () => `hsl(${color.value}, 70%, 50%)`);\n\n        return binder(element, property, colorValue, options) ?? (() => {});\n    }\n\n    // Bind reactive opacity with fade effects\n    static bindOpacity(\n        element: HTMLElement,\n        opacity: ReturnType<typeof numberRef>,\n        animationType: 'instant' | 'animate' | 'transition' | 'spring' = 'transition',\n        options: AnimationOptions | TransitionOptions = { duration: 200, easing: 'ease-in-out' }\n    ): () => void {\n        const binder = animationType === 'instant' ? bindWith :\n                      animationType === 'animate' ? bindAnimated :\n                      animationType === 'transition' ? bindTransition : bindSpring;\n\n        return binder(element, 'opacity', opacity, options) ?? (() => {});\n    }\n\n    // Bind reactive border radius with morphing\n    static bindBorderRadius(\n        element: HTMLElement,\n        radius: Vector2D | ReturnType<typeof numberRef>,\n        animationType: 'instant' | 'animate' | 'transition' | 'spring' = 'animate',\n        options: AnimationOptions | TransitionOptions = { duration: 300, easing: 'ease-out' }\n    ): () => void {\n        const binder = animationType === 'instant' ? bindWith :\n                      animationType === 'animate' ? bindAnimated :\n                      animationType === 'transition' ? bindTransition : bindSpring;\n\n        const radiusValue = radius instanceof Vector2D ?\n            operated([radius.x, radius.y], () => `${radius.x.value}px ${radius.y.value}px`) :\n            operated([radius], () => `${radius.value}px`);\n\n        return binder(element, 'border-radius', radiusValue, options) ?? (() => {});\n    }\n}\n\n// CSS Calc/Math Operations\nexport class CSSCalc {\n    // Create CSS calc expression from reactive values\n    static add(a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>, unit: string = 'px'): ReturnType<typeof numberRef> {\n        return operated([a, b], () => `calc(${a.value}${unit} + ${b.value}${unit})`);\n    }\n\n    static subtract(a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>, unit: string = 'px'): ReturnType<typeof numberRef> {\n        return operated([a, b], () => `calc(${a.value}${unit} - ${b.value}${unit})`);\n    }\n\n    static multiply(a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>): ReturnType<typeof numberRef> {\n        return operated([a, b], () => `calc(${a.value} * ${b.value})`);\n    }\n\n    static divide(a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>): ReturnType<typeof numberRef> {\n        return operated([a, b], () => `calc(${a.value} / ${b.value})`);\n    }\n\n    // Clamp reactive value between min and max\n    static clamp(value: ReturnType<typeof numberRef>, min: ReturnType<typeof numberRef>, max: ReturnType<typeof numberRef>, unit: string = 'px'): ReturnType<typeof numberRef> {\n        return operated([value, min, max], () => `clamp(${min.value}${unit}, ${value.value}${unit}, ${max.value}${unit})`);\n    }\n\n    // Min/max operations\n    static min(a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>, unit: string = 'px'): ReturnType<typeof numberRef> {\n        return operated([a, b], () => `min(${a.value}${unit}, ${b.value}${unit})`);\n    }\n\n    static max(a: ReturnType<typeof numberRef>, b: ReturnType<typeof numberRef>, unit: string = 'px'): ReturnType<typeof numberRef> {\n        return operated([a, b], () => `max(${a.value}${unit}, ${b.value}${unit})`);\n    }\n}\n\n// DOM Matrix Integration\nexport class DOMMatrixAdapter {\n    // Convert reactive Matrix4D to DOMMatrix\n    static toDOMMatrix(matrix: Matrix4D): DOMMatrix {\n        return new DOMMatrix(matrix.elements.map(e => e.value));\n    }\n\n    // Convert DOMMatrix to reactive Matrix4D\n    static fromDOMMatrix(domMatrix: DOMMatrix): Matrix4D {\n        const elements = Array.from(domMatrix.toFloat32Array()).map(v => numberRef(v));\n        return new Matrix4D(\n            elements[0], elements[1], elements[2], elements[3],\n            elements[4], elements[5], elements[6], elements[7],\n            elements[8], elements[9], elements[10], elements[11],\n            elements[12], elements[13], elements[14], elements[15]\n        );\n    }\n\n    // Apply reactive transform to DOMMatrix\n    static applyTransform(domMatrix: DOMMatrix, transform: Matrix4D): DOMMatrix {\n        const reactiveMatrix = this.fromDOMMatrix(domMatrix);\n        // This would need matrix multiplication - simplified for now\n        return domMatrix.multiplySelf(this.toDOMMatrix(transform));\n    }\n}\n\n// CSS Custom Properties Integration\nexport class CSSCustomProps {\n    // Bind reactive value to CSS custom property\n    static bindProperty(element: HTMLElement, propName: string, value: ReturnType<typeof numberRef>, unit: string = ''): () => void {\n        return operated([value], () => {\n            element.style.setProperty(propName, `${value.value}${unit}`);\n            return () => {}; // Return cleanup function\n        });\n    }\n\n    // Bind reactive Vector2D to CSS custom properties\n    static bindVectorProperties(element: HTMLElement, baseName: string, vector: Vector2D, unit: string = 'px'): () => void {\n        const unsubX = this.bindProperty(element, `${baseName}-x`, vector.x, unit);\n        const unsubY = this.bindProperty(element, `${baseName}-y`, vector.y, unit);\n        return () => { unsubX(); unsubY(); };\n    }\n\n    // Get reactive value from CSS custom property\n    static getReactiveProperty(element: HTMLElement, propName: string): ReturnType<typeof numberRef> {\n        const initialValue = parseFloat(getComputedStyle(element).getPropertyValue(propName)) || 0;\n        const reactiveValue = numberRef(initialValue);\n\n        // Set up observer for CSS custom property changes\n        const observer = new MutationObserver(() => {\n            const newValue = parseFloat(getComputedStyle(element).getPropertyValue(propName)) || 0;\n            reactiveValue.value = newValue;\n        });\n\n        observer.observe(element, {\n            attributes: true,\n            attributeFilter: ['style']\n        });\n\n        return reactiveValue;\n    }\n}\n\n// ============================================================================\n// Unified Unit Conversion and CSS Utilities\n// ============================================================================\n\n// CSS Unit Conversion and Formatting Utilities\nexport class CSSUnitUtils {\n    // Convert reactive values to CSS pixel units\n    static asPx(value: number | string | ReturnType<typeof numberRef>): string | ReturnType<typeof numberRef> {\n        if (typeof value === 'number') {\n            return `${value || 0}px`;\n        }\n        if (typeof value === 'string') {\n            return value || '0px';\n        }\n        // Reactive value - return computed string\n        return operated([value], (v) => `${v || 0}px`);\n    }\n\n    // Convert reactive values to CSS percentage units\n    static asPercent(value: number | string | ReturnType<typeof numberRef>): string | ReturnType<typeof numberRef> {\n        if (typeof value === 'number') {\n            return `${value || 0}%`;\n        }\n        if (typeof value === 'string') {\n            return value || '0%';\n        }\n        // Reactive value - return computed string\n        return operated([value], (v) => `${v || 0}%`);\n    }\n\n    // Convert reactive values to CSS em units\n    static asEm(value: number | string | ReturnType<typeof numberRef>): string | ReturnType<typeof numberRef> {\n        if (typeof value === 'number') {\n            return `${value || 0}em`;\n        }\n        if (typeof value === 'string') {\n            return value || '0em';\n        }\n        // Reactive value - return computed string\n        return operated([value], (v) => `${v || 0}em`);\n    }\n\n    // Convert reactive values to CSS rem units\n    static asRem(value: number | string | ReturnType<typeof numberRef>): string | ReturnType<typeof numberRef> {\n        if (typeof value === 'number') {\n            return `${value || 0}rem`;\n        }\n        if (typeof value === 'string') {\n            return value || '0rem';\n        }\n        // Reactive value - return computed string\n        return operated([value], (v) => `${v || 0}rem`);\n    }\n\n    // Convert reactive values to CSS viewport units\n    static asVw(value: number | string | ReturnType<typeof numberRef>): string | ReturnType<typeof numberRef> {\n        if (typeof value === 'number') {\n            return `${value || 0}vw`;\n        }\n        if (typeof value === 'string') {\n            return value || '0vw';\n        }\n        return operated([value], (v) => `${v || 0}vw`);\n    }\n\n    static asVh(value: number | string | ReturnType<typeof numberRef>): string | ReturnType<typeof numberRef> {\n        if (typeof value === 'number') {\n            return `${value || 0}vh`;\n        }\n        if (typeof value === 'string') {\n            return value || '0vh';\n        }\n        return operated([value], (v) => `${v || 0}vh`);\n    }\n\n    // Generic unit converter with fallback\n    static asUnit(value: number | string | ReturnType<typeof numberRef>, unit: string, fallbackValue: number = 0): string | ReturnType<typeof numberRef> {\n        if (typeof value === 'number') {\n            return `${value || fallbackValue}${unit}`;\n        }\n        if (typeof value === 'string') {\n            return value || `${fallbackValue}${unit}`;\n        }\n        return operated([value], (v) => `${v || fallbackValue}${unit}`);\n    }\n\n    // Reactive CSS calc() expressions\n    static calc(expression: string): string {\n        return `calc(${expression})`;\n    }\n\n    // Create reactive calc expressions\n    static reactiveCalc(operands: Array<number | string | ReturnType<typeof numberRef>>, operator: string): ReturnType<typeof numberRef> {\n        return operated(operands, (...values) => {\n            const expression = values.join(` ${operator} `);\n            return `calc(${expression})`;\n        });\n    }\n\n    // Clamp reactive values with CSS clamp()\n    static clamp(min: number | string | ReturnType<typeof numberRef>,\n                 value: number | string | ReturnType<typeof numberRef>,\n                 max: number | string | ReturnType<typeof numberRef>): ReturnType<typeof numberRef> {\n        const minStr = typeof min === 'number' || typeof min === 'string' ? min : operated([min], v => v);\n        const valStr = typeof value === 'number' || typeof value === 'string' ? value : operated([value], v => v);\n        const maxStr = typeof max === 'number' || typeof max === 'string' ? max : operated([max], v => v);\n\n        return operated([minStr, valStr, maxStr].filter(v => typeof v !== 'string'), () => {\n            const minVal = typeof min === 'number' ? min : (typeof min === 'string' ? min : min.value);\n            const val = typeof value === 'number' ? value : (typeof value === 'string' ? value : value.value);\n            const maxVal = typeof max === 'number' ? max : (typeof max === 'string' ? max : max.value);\n            return `clamp(${minVal}, ${val}, ${maxVal})`;\n        });\n    }\n\n    // Reactive max/min functions\n    static max(values: Array<number | string | ReturnType<typeof numberRef>>): ReturnType<typeof numberRef> {\n        return operated(values.filter(v => typeof v !== 'string'), (...nums) => {\n            const cssValues = values.map(v =>\n                typeof v === 'number' ? v : (typeof v === 'string' ? v : v.value)\n            );\n            return `max(${cssValues.join(', ')})`;\n        });\n    }\n\n    static min(values: Array<number | string | ReturnType<typeof numberRef>>): ReturnType<typeof numberRef> {\n        return operated(values.filter(v => typeof v !== 'string'), (...nums) => {\n            const cssValues = values.map(v =>\n                typeof v === 'number' ? v : (typeof v === 'string' ? v : v.value)\n            );\n            return `min(${cssValues.join(', ')})`;\n        });\n    }\n}\n\n// ============================================================================\n// Enhanced UI Control CSS Integration\n// ============================================================================\n\n// Specialized CSS utilities for input controls\nexport class CSSInputControls {\n    // Bind slider thumb position reactively\n    static bindSliderThumb(\n        thumbElement: HTMLElement,\n        value: ReturnType<typeof numberRef>,\n        min: ReturnType<typeof numberRef>,\n        max: ReturnType<typeof numberRef>,\n        trackWidth: ReturnType<typeof numberRef>\n    ): () => void {\n        const position = operated([value, min, max, trackWidth], () => {\n            const percentage = ((value.value - min.value) / (max.value - min.value)) * 100;\n            return `translateX(${percentage}%)`;\n        });\n\n        return CSSBinder.bindTransform(thumbElement, position);\n    }\n\n    // Bind progress bar fill reactively\n    static bindProgressFill(\n        fillElement: HTMLElement,\n        progress: ReturnType<typeof numberRef>\n    ): () => void {\n        const width = operated([progress], () => `${progress.value * 100}%`);\n        return bindWith(fillElement, 'width', width, handleStyleChange) ?? (() => {});\n    }\n\n    // Bind checkbox/radio button state with animations\n    static bindToggleState(\n        element: HTMLElement,\n        checked: ReturnType<typeof numberRef>\n    ): () => void {\n        const scale = operated([checked], () => checked.value ? 'scale(1)' : 'scale(0)');\n        const opacity = operated([checked], () => checked.value ? '1' : '0');\n\n        const unsubScale = CSSBinder.bindTransform(element, scale);\n        const unsubOpacity = bindWith(element, 'opacity', opacity, handleStyleChange) ?? (() => {});\n\n        return () => { unsubScale?.(); unsubOpacity?.(); };\n    }\n}\n\n// Specialized CSS utilities for scrollbars\nexport class CSSScrollbarControls {\n    // Bind scrollbar thumb position and size reactively\n    static bindScrollbarThumb(\n        thumbElement: HTMLElement,\n        scrollPosition: ReturnType<typeof numberRef>,\n        contentSize: ReturnType<typeof numberRef>,\n        containerSize: ReturnType<typeof numberRef>,\n        axis: 'horizontal' | 'vertical' = 'vertical'\n    ): () => void {\n        // Calculate thumb size\n        const thumbSize = operated([contentSize, containerSize], () => {\n            const ratio = containerSize.value / contentSize.value;\n            return Math.max(20, ratio * containerSize.value);\n        });\n\n        // Calculate thumb position\n        const thumbPosition = operated([scrollPosition, contentSize, containerSize, thumbSize], () => {\n            const maxScroll = Math.max(0, contentSize.value - containerSize.value);\n            const scrollRatio = maxScroll > 0 ? scrollPosition.value / maxScroll : 0;\n            return scrollRatio * (containerSize.value - thumbSize.value);\n        });\n\n        // Create transform based on axis\n        const transform = axis === 'vertical'\n            ? operated([thumbPosition], () => `translateY(${thumbPosition.value}px)`)\n            : operated([thumbPosition], () => `translateX(${thumbPosition.value}px)`);\n\n        // Bind size and transform\n        const unsubSize = axis === 'vertical'\n            ? bindWith(thumbElement, 'height', operated([thumbSize], (s) => `${s}px`), handleStyleChange)\n            : bindWith(thumbElement, 'width', operated([thumbSize], (s) => `${s}px`), handleStyleChange);\n\n        const unsubTransform = CSSBinder.bindTransform(thumbElement, transform);\n\n        return () => { unsubSize?.(); unsubTransform?.(); };\n    }\n\n    // Bind scrollbar visibility with smooth transitions\n    static bindScrollbarVisibility(\n        scrollbarElement: HTMLElement,\n        isVisible: ReturnType<typeof numberRef>,\n        transitionDuration: number = 300\n    ): () => void {\n        const opacity = operated([isVisible], () => isVisible.value);\n        const visibility = operated([isVisible], () => isVisible.value > 0 ? 'visible' : 'hidden');\n        const pointerEvents = operated([isVisible], () => isVisible.value > 0 ? 'auto' : 'none');\n\n        const unsubOpacity = bindWith(scrollbarElement, 'opacity', opacity, handleStyleChange);\n        const unsubVisibility = bindWith(scrollbarElement, 'visibility', visibility, handleStyleChange);\n        const unsubPointerEvents = bindWith(scrollbarElement, 'pointer-events', pointerEvents, handleStyleChange);\n\n        // Add transition\n        scrollbarElement.style.transition = `opacity ${transitionDuration}ms ease-in-out`;\n\n        return () => {\n            unsubOpacity?.();\n            unsubVisibility?.();\n            unsubPointerEvents?.();\n        };\n    }\n\n    // Bind scrollbar theme properties reactively\n    static bindScrollbarTheme(\n        scrollbarElement: HTMLElement,\n        theme: {\n            trackColor?: ReturnType<typeof numberRef>;\n            thumbColor?: ReturnType<typeof numberRef>;\n            borderRadius?: ReturnType<typeof numberRef>;\n            thickness?: ReturnType<typeof numberRef>;\n        }\n    ): () => void {\n        const unbinders: (() => void)[] = [];\n\n        if (theme.trackColor) {\n            unbinders.push(bindWith(scrollbarElement, '--scrollbar-track-color',\n                operated([theme.trackColor], (c) => `rgba(${c.value}, ${c.value}, ${c.value}, 0.1)`), handleStyleChange) ?? (() => {}));\n        }\n\n        if (theme.thumbColor) {\n            unbinders.push(bindWith(scrollbarElement, '--scrollbar-thumb-color',\n                operated([theme.thumbColor], (c) => `rgba(${c.value}, ${c.value}, ${c.value}, 0.5)`), handleStyleChange) ?? (() => {}));\n        }\n\n        if (theme.borderRadius) {\n            unbinders.push(bindWith(scrollbarElement, '--scrollbar-border-radius',\n                operated([theme.borderRadius], (r) => `${r.value}px`), handleStyleChange) ?? (() => {}));\n        }\n\n        if (theme.thickness) {\n            unbinders.push(bindWith(scrollbarElement, '--scrollbar-thickness',\n                operated([theme.thickness], (t) => `${t.value}px`), handleStyleChange) ?? (() => {}));\n        }\n\n        return () => unbinders.forEach(unbind => unbind?.());\n    }\n}\n\n// Enhanced momentum scrolling utilities\nexport class CSSMomentumScrolling {\n    // Create smooth scroll animation with momentum\n    static createMomentumScroll(\n        element: HTMLElement,\n        velocity: ReturnType<typeof numberRef>,\n        deceleration: number = 0.92\n    ): Promise<void> {\n        return new Promise(resolve => {\n            let animationId: number;\n            const animate = () => {\n                velocity.value *= deceleration;\n\n                if (Math.abs(velocity.value) < 0.1) {\n                    velocity.value = 0;\n                    cancelAnimationFrame(animationId);\n                    resolve();\n                    return;\n                }\n\n                element.scrollBy({\n                    top: velocity.value,\n                    behavior: 'instant'\n                });\n\n                animationId = requestAnimationFrame(animate);\n            };\n\n            animate();\n        });\n    }\n\n    // Create bounce-back animation for scroll boundaries\n    static createBounceBack(\n        element: HTMLElement,\n        overScroll: ReturnType<typeof numberRef>,\n        duration: number = 300\n    ): Promise<void> {\n        return new Promise(resolve => {\n            const startTime = performance.now();\n            const startValue = overScroll.value;\n\n            const animate = (currentTime: number) => {\n                const elapsed = currentTime - startTime;\n                const progress = Math.min(elapsed / duration, 1);\n\n                // Ease out cubic\n                const eased = 1 - Math.pow(1 - progress, 3);\n\n                overScroll.value = startValue * (1 - eased);\n\n                if (progress < 1) {\n                    requestAnimationFrame(animate);\n                } else {\n                    overScroll.value = 0;\n                    resolve();\n                }\n            };\n\n            requestAnimationFrame(animate);\n        });\n    }\n}\n\n// Enhanced focus and interaction states\nexport class CSSInteractionStates {\n    // Bind focus ring with reactive visibility\n    static bindFocusRing(\n        element: HTMLElement,\n        isFocused: ReturnType<typeof numberRef>,\n        ringColor: string = 'rgba(59, 130, 246, 0.5)'\n    ): () => void {\n        const boxShadow = operated([isFocused], () =>\n            isFocused.value ? `0 0 0 2px ${ringColor}` : 'none'\n        );\n\n        return bindWith(element, 'box-shadow', boxShadow, handleStyleChange) ?? (() => {});\n    }\n\n    // Bind hover state with smooth transitions\n    static bindHoverState(\n        element: HTMLElement,\n        isHovered: ReturnType<typeof numberRef>,\n        hoverTransform: string = 'scale(1.05)'\n    ): () => void {\n        const transform = operated([isHovered], () =>\n            isHovered.value ? hoverTransform : 'none'\n        );\n\n        return CSSBinder.bindTransform(element, transform) ?? (() => {});\n    }\n\n    // Bind active/press state\n    static bindActiveState(\n        element: HTMLElement,\n        isActive: ReturnType<typeof numberRef>,\n        activeTransform: string = 'scale(0.95)'\n    ): () => void {\n        const transform = operated([isActive], () =>\n            isActive.value ? activeTransform : 'none'\n        );\n\n        return CSSBinder.bindTransform(element, transform) ?? (() => {});\n    }\n}\n\n/*\n// Export all enhanced CSS adapter utilities\nexport {\n    CSSUnitConverter,\n    CSSUnitUtils,\n    CSSTransform,\n    CSSPosition,\n    CSSBinder,\n    CSSCalc,\n    DOMMatrixAdapter,\n    CSSCustomProps,\n    CSSInputControls,\n    CSSScrollbarControls,\n    CSSMomentumScrolling,\n    CSSInteractionStates\n};*/\n","//\"use strict\";\n// jsox.js\n// JSOX JavaScript Object eXchange. Inherits human features of comments\n// and extended formatting from JSON6; adds macros, big number and date\n// support.  See README.md for details.\n//\n// This file is based off of https://github.com/JSON6/  ./lib/json6.js\n// which is based off of https://github.com/d3x0r/sack  ./src/netlib/html5.websocket/json6_parser.c\n//\n\n//const util = require('util'); // debug inspect.\n//import util from 'util'; \n\nconst _JSON=JSON; // in case someone does something like JSON=JSOX; we still need a primitive _JSON for internal stringification\n//if( \"undefined\" === typeof exports )\n//\tvar exports = {};\n\n/**\n * JSOX container for all JSOX methods.\n * @namespace\n */\nconst JSOX = {};\n//const JSOX = (function ( JSOX ) {\nJSOX.JSOX = JSOX;\nJSOX.version = \"1.2.125\";\n\n//const _DEBUG_LL = false;\n//const _DEBUG_PARSING = false;\n//const _DEBUG_STRINGIFY = false;\n//const _DEBUG_PARSING_STACK = false;\n//const _DEBUG_PARSING_NUMBERS = false;\n//const _DEBUG_PARSING_DETAILS = false;\n//const _DEBUG_PARSING_CONTEXT = false;\n//const _DEBUG_REFERENCES = false; // this tracks folling context stack when the components have not been completed.\n//const _DEBUG_WHITESPACE = false; \nconst hasBigInt = (typeof BigInt === \"function\");\nconst testNonIdentifierCharacters = false; // maybe an option to enable; references otherwise unused table.\nconst VALUE_UNDEFINED = -1\nconst VALUE_UNSET = 0\nconst VALUE_NULL = 1\nconst VALUE_TRUE = 2\nconst VALUE_FALSE = 3\nconst VALUE_STRING = 4\nconst VALUE_NUMBER = 5\nconst VALUE_OBJECT = 6\nconst VALUE_NEG_NAN = 7\nconst VALUE_NAN = 8\nconst VALUE_NEG_INFINITY = 9\nconst VALUE_INFINITY = 10\n//const VALUE_DATE = 11  // unused yet; this is actuall a subType of VALUE_NUMBER\nconst VALUE_EMPTY = 12 // [,] makes an array with 'empty item'\nconst VALUE_ARRAY = 13 //\n// internally arrayType = -1 is a normal array\n// arrayType = -2 is a reference array, which, which closed is resolved to\n//     the specified object.\n// arrayType = -3 is a normal array, that has already had this element pushed.\nconst knownArrayTypeNames = [\"ab\",\"u8\",\"cu8\",\"s8\",\"u16\",\"s16\",\"u32\",\"s32\",\"u64\",\"s64\",\"f32\",\"f64\"];\nlet arrayToJSOX = null;\nlet mapToJSOX = null;\nconst knownArrayTypes = [ArrayBuffer\n                        ,Uint8Array,Uint8ClampedArray,Int8Array\n                        ,Uint16Array,Int16Array\n                        ,Uint32Array,Int32Array\n                        ,null,null//,Uint64Array,Int64Array\n                        ,Float32Array,Float64Array];\n// somehow max isn't used... it would be the NEXT available VALUE_XXX value...\n//const VALUE_ARRAY_MAX = VALUE_ARRAY + knownArrayTypes.length + 1; // 1 type is not typed; just an array.\n\nconst WORD_POS_RESET = 0;\nconst WORD_POS_TRUE_1 = 1;\nconst WORD_POS_TRUE_2 = 2;\nconst WORD_POS_TRUE_3 = 3;\nconst WORD_POS_FALSE_1 = 5;\nconst WORD_POS_FALSE_2 = 6;\nconst WORD_POS_FALSE_3 = 7;\nconst WORD_POS_FALSE_4 = 8;\nconst WORD_POS_NULL_1 = 9;\nconst WORD_POS_NULL_2 = 10;\nconst WORD_POS_NULL_3 = 11;\nconst WORD_POS_UNDEFINED_1 = 12;\nconst WORD_POS_UNDEFINED_2 = 13;\nconst WORD_POS_UNDEFINED_3 = 14;\nconst WORD_POS_UNDEFINED_4 = 15;\nconst WORD_POS_UNDEFINED_5 = 16;\nconst WORD_POS_UNDEFINED_6 = 17;\nconst WORD_POS_UNDEFINED_7 = 18;\nconst WORD_POS_UNDEFINED_8 = 19;\nconst WORD_POS_NAN_1 = 20;\nconst WORD_POS_NAN_2 = 21;\nconst WORD_POS_INFINITY_1 = 22;\nconst WORD_POS_INFINITY_2 = 23;\nconst WORD_POS_INFINITY_3 = 24;\nconst WORD_POS_INFINITY_4 = 25;\nconst WORD_POS_INFINITY_5 = 26;\nconst WORD_POS_INFINITY_6 = 27;\nconst WORD_POS_INFINITY_7 = 28;\n\nconst WORD_POS_FIELD = 29;\nconst WORD_POS_AFTER_FIELD = 30;\nconst WORD_POS_END = 31;\nconst WORD_POS_AFTER_FIELD_VALUE = 32;\n//const WORD_POS_BINARY = 32;\n\nconst CONTEXT_UNKNOWN = 0\nconst CONTEXT_IN_ARRAY = 1\nconst CONTEXT_OBJECT_FIELD = 2\nconst CONTEXT_OBJECT_FIELD_VALUE = 3\nconst CONTEXT_CLASS_FIELD = 4\nconst CONTEXT_CLASS_VALUE = 5\nconst CONTEXT_CLASS_FIELD_VALUE = 6\nconst keywords = {\t[\"true\"]:true,[\"false\"]:false,[\"null\"]:null,[\"NaN\"]:NaN,[\"Infinity\"]:Infinity,[\"undefined\"]:undefined }\n\n/**\n * Extend Date type with a nanosecond field.\n * @constructor\n * @param {Date} original_date\n * @param {Number} nanoseconds in milli-seconds of Date ( 0 to 1_000_000 )\n */\nclass DateNS extends Date {\n\tconstructor(a,b ) {\n\t\tsuper(a);\n\t\tthis.ns = b||0;\n\t}\t\n}\n\nJSOX.DateNS = DateNS;\n\nconst contexts = [];\n/**\n * get a context from stack (reuse contexts)\n * @internal\n */\nfunction getContext() {\n\tlet ctx = contexts.pop();\n\tif( !ctx )\n\t\tctx = { context : CONTEXT_UNKNOWN\n\t\t      , current_proto : null\n\t\t      , current_class : null\n\t\t      , current_class_field : 0\n\t\t      , arrayType : -1\n\t\t      , valueType : VALUE_UNSET\n\t\t      , elements : null\n\t\t      };\n\treturn ctx;\n}\n/**\n * return a context to the stack (reuse contexts)\n * @internal\n */\nfunction dropContext(ctx) { \n\tcontexts.push( ctx ) \n}\n\n/**\n * SACK jsox compatibility; hands maps to internal C++ code in other case.\n * @internal\n */\nJSOX.updateContext = function() {\n    //if( toProtoTypes.get( Map.prototype ) ) return;\n    //console.log( \"Do init protoypes for new context objects...\" );\n    //initPrototypes();\n}\n\nconst buffers = [];\nfunction getBuffer() { let buf = buffers.pop(); if( !buf ) buf = { buf:null, n:0 }; else buf.n = 0; return buf; }\nfunction dropBuffer(buf) { buffers.push( buf ); }\n\n/**\n * Provide minimal escapes for a string to be encapsulated as a JSOX string in quotes.\n *\n * @param {string} string \n * @returns {string}\n */\nJSOX.escape = function(string) {\n\tlet n;\n\tlet output = '';\n\tif( !string ) return string;\n\tfor( n = 0; n < string.length; n++ ) {\n\t\tif( ( string[n] == '\"' ) || ( string[n] == '\\\\' ) || ( string[n] == '`' )|| ( string[n] == '\\'' )) {\n\t\t\toutput += '\\\\';\n\t\t}\n\t\toutput += string[n];\n\t}\n\treturn output;\n}\n\n\nlet toProtoTypes = new WeakMap();\nlet toObjectTypes = new Map();\nlet fromProtoTypes = new Map();\nlet commonClasses = [];\n\n/**\n * reset JSOX parser entirely; clears all type mappings\n *\n * @returns {void}\n */\nJSOX.reset = function() {\n\ttoProtoTypes = new WeakMap();\n\ttoObjectTypes = new Map();\n\tfromProtoTypes = new Map();\n\tcommonClasses = [];\t\n}\n\n/**\n * Create a streaming parser.  Add data with parser.write(data); values that\n * are found are dispatched to the callback.\n *\n * @param {(value:any) => void} [cb]\n * @param {(this: any, key: string, value: any) => any} [reviver] \n * @returns {JSOXParser}\n*/\nJSOX.begin = function( cb, reviver ) {\n\n\tconst val = { name : null,\t  // name of this value (if it's contained in an object)\n\t\t\tvalue_type: VALUE_UNSET, // value from above indiciating the type of this value\n\t\t\tstring : '',   // the string value of this value (strings and number types only)\n\t\t\tcontains : null,\n\t\t\tclassName : null,\n\t\t};\n\t\n\tconst pos = { line:1, col:1 };\n\tlet\tn = 0;\n\tlet     str;\n\tlet\tlocalFromProtoTypes = new Map();\n\tlet\tword = WORD_POS_RESET,\n\t\tstatus = true,\n\t\tredefineClass = false,\n\t\tnegative = false,\n\t\tresult = null,\n\t\trootObject = null,\n\t\telements = undefined,\n\t\tcontext_stack = {\n\t\t\tfirst : null,\n\t\t\tlast : null,\n\t\t\tsaved : null,\n\t\t\tpush(node) {\n\t\t\t\t//_DEBUG_PARSING_CONTEXT && console.log( \"pushing context:\", node );\n\t\t\t\tlet recover = this.saved;\n\t\t\t\tif( recover ) { this.saved = recover.next; \n\t\t\t\t\trecover.node = node; \n\t\t\t\t\trecover.next = null; \n\t\t\t\t\trecover.prior = this.last; }\n\t\t\t\telse { recover = { node : node, next : null, prior : this.last }; }\n\t\t\t\tif( !this.last ) this.first = recover;\n\t\t\t\telse this.last.next = recover;\n\t\t\t\tthis.last = recover;\n\t\t\t\tthis.length++;\n\t\t\t},\n\t\t\tpop() {\n\t\t\t\tlet result = this.last;\n\t\t\t\t// through normal usage this line can never be used.\n\t\t\t\t//if( !result ) return null;\n\t\t\t\tif( !(this.last = result.prior ) ) this.first = null;\n\t\t\t\tresult.next = this.saved;\n\t\t\t\tif( this.last ) this.last.next = null;\n\t\t\t\tif( !result.next ) result.first = null;\n\t\t\t\tthis.saved = result;\n\t\t\t\tthis.length--;\n\t\t\t\t//_DEBUG_PARSING_CONTEXT && console.log( \"popping context:\", result.node );\n\t\t\t\treturn result.node;\n\t\t\t},\n\t\t\tlength : 0,\n\t\t\t/*dump() {  // //_DEBUG_CONTEXT_STACK\n\t\t\t\tconsole.log( \"STACK LENGTH:\", this.length );\n\t\t\t\tlet cur= this.first;\n\t\t\t\tlet level = 0;\n\t\t\t\twhile( cur ) {\n\t\t\t\t\tconsole.log( \"Context:\", level, cur.node );\n\t\t\t\t\tlevel++;\n\t\t\t\t\tcur = cur.next;\n\t\t\t\t}\n\t\t\t}*/\n\t\t},\n\t\tclasses = [],  // class templates that have been defined.\n\t\tprotoTypes = {},\n\t\tcurrent_proto = null,  // the current class being defined or being referenced.\n\t\tcurrent_class = null,  // the current class being defined or being referenced.\n\t\tcurrent_class_field = 0,\n\t\tarrayType = -1,  // the current class being defined or being referenced.\n\t\tparse_context = CONTEXT_UNKNOWN,\n\t\tcomment = 0,\n\t\tfromHex = false,\n\t\tdecimal = false,\n\t\texponent = false,\n\t\texponent_sign = false,\n\t\texponent_digit = false,\n\t\tinQueue = {\n\t\t\tfirst : null,\n\t\t\tlast : null,\n\t\t\tsaved : null,\n\t\t\tpush(node) {\n\t\t\t\tlet recover = this.saved;\n\t\t\t\tif( recover ) { this.saved = recover.next; recover.node = node; recover.next = null; recover.prior = this.last; }\n\t\t\t\telse { recover = { node : node, next : null, prior : this.last }; }\n\t\t\t\tif( !this.last ) this.first = recover;\n\t\t\t\telse this.last.next = recover;\n\t\t\t\tthis.last = recover;\n\t\t\t},\n\t\t\tshift() {\n\t\t\t\tlet result = this.first;\n\t\t\t\tif( !result ) return null;\n\t\t\t\tif( !(this.first = result.next ) ) this.last = null;\n\t\t\t\tresult.next = this.saved; this.saved = result;\n\t\t\t\treturn result.node;\n\t\t\t},\n\t\t\tunshift(node) {\n\t\t\t\tlet recover = this.saved;\n\t\t\t\t// this is always true in this usage.\n\t\t\t\t//if( recover ) { \n\t\t\t\t\tthis.saved = recover.next; recover.node = node; recover.next = this.first; recover.prior = null; \n\t\t\t\t//}\n\t\t\t\t//else { recover = { node : node, next : this.first, prior : null }; }\n\t\t\t\tif( !this.first ) this.last = recover;\n\t\t\t\tthis.first = recover;\n\t\t\t}\n\t\t},\n\t\tgatheringStringFirstChar = null,\n\t\tgatheringString = false,\n\t\tgatheringNumber = false,\n\t\tstringEscape = false,\n\t\tcr_escaped = false,\n\t\tunicodeWide = false,\n\t\tstringUnicode = false,\n\t\tstringHex = false,\n\t\thex_char = 0,\n\t\thex_char_len = 0,\n\t\tcompleted = false,\n\t\tdate_format = false,\n\t\tisBigInt = false\n\t\t;\n\n\tfunction throwEndError( leader ) {\n\t\tthrow new Error( `${leader} at ${n} [${pos.line}:${pos.col}]`);\n\t}\n\n\treturn {\n\t\t/**\n\t\t * Define a class that can be used to deserialize objects of this type.\n\t\t * @param {string} prototypeName \n\t\t * @param {new ():any} o \n\t\t * @param {(any)=>any} f \n\t\t */\n\t\tfromJSOX( prototypeName, o, f ) {\n\t\t\tif( localFromProtoTypes.get(prototypeName) ) throw new Error( \"Existing fromJSOX has been registered for prototype\" );\n\t\t\tfunction privateProto() { }\n\t\t\tif( !o ) o = privateProto;\n\t\t\tif( o && !(\"constructor\" in o )){\n\t\t\t\tthrow new Error( \"Please pass a prototype like thing...\");\n\t\t\t}\n\t\t\tlocalFromProtoTypes.set( prototypeName, { protoCon:o.prototype.constructor, cb:f } );\n\t\t},\n\t\tregisterFromJSOX( prototypeName, o/*, f*/ ) {\n\t\t\tthrow new Error( \"registerFromJSOX is deprecated, please update to use fromJSOX instead:\" + prototypeName + o.toString() );\n\t\t},\n\t\tfinalError() {\n\t\t\tif( comment !== 0 ) { // most of the time everything's good.\n\t\t\t\tif( comment === 1 ) throwEndError( \"Comment began at end of document\" );\n\t\t\t\tif( comment === 2 ) /*console.log( \"Warning: '//' comment without end of line ended document\" )*/;\n\t\t\t\tif( comment === 3 ) throwEndError( \"Open comment '/*' is missing close at end of document\" );\n\t\t\t\tif( comment === 4 ) throwEndError( \"Incomplete '/* *' close at end of document\" );\n\t\t\t}\n\t\t\tif( gatheringString ) throwEndError( \"Incomplete string\" );\n\t\t},\n\t\tvalue() {\n\t\t\tthis.finalError();\n\t\t\tlet r = result;\n\t\t\tresult = undefined;\n\t\t\treturn r;\n\t\t},\n\t\t/**\n\t\t * Reset the parser to a blank state.\n\t\t */\n\t\treset() {\n\t\t\tword = WORD_POS_RESET;\n\t\t\tstatus = true;\n\t\t\tif( inQueue.last ) inQueue.last.next = inQueue.save;\n\t\t\tinQueue.save = inQueue.first;\n\t\t\tinQueue.first = inQueue.last = null;\n\t\t\tif( context_stack.last ) context_stack.last.next = context_stack.save;\n\t\t\tcontext_stack.length = 0;\n\t\t\tcontext_stack.save = inQueue.first;\n\t\t\tcontext_stack.first = context_stack.last = null;//= [];\n\t\t\telements = undefined;\n\t\t\tparse_context = CONTEXT_UNKNOWN;\n\t\t\tclasses = [];\n\t\t\tprotoTypes = {};\n\t\t\tcurrent_proto = null;\n\t\t\tcurrent_class = null;\n\t\t\tcurrent_class_field = 0;\n\t\t\tval.value_type = VALUE_UNSET;\n\t\t\tval.name = null;\n\t\t\tval.string = '';\n\t\t\tval.className = null;\n\t\t\tpos.line = 1;\n\t\t\tpos.col = 1;\n\t\t\tnegative = false;\n\t\t\tcomment = 0;\n\t\t\tcompleted = false;\n\t\t\tgatheringString = false;\n\t\t\tstringEscape = false;  // string stringEscape intro\n\t\t\tcr_escaped = false;   // carraige return escaped\n\t\t\tdate_format = false;\n\t\t\t//stringUnicode = false;  // reading \\u\n\t\t\t//unicodeWide = false;  // reading \\u{} in string\n\t\t\t//stringHex = false;  // reading \\x in string\n\t\t},\n\t\tusePrototype(className,protoType ) { protoTypes[className] = protoType; },\n\t\t/**\n\t\t * Add input to the parser to get parsed.\n\t\t * @param {string} msg \n\t\t */\n\t\twrite(msg) {\n\t\t\tlet retcode;\n\t\t\tif (typeof msg !== \"string\" && typeof msg !== \"undefined\") msg = String(msg);\n\t\t\tif( !status ) throw new Error( \"Parser is still in an error state, please reset before resuming\" );\n\t\t\tfor( retcode = this._write(msg,false); retcode > 0; retcode = this._write() ) {\n\t\t\t\tif( typeof reviver === 'function' ) (function walk(holder, key) {\n\t\t\t\t\tlet k, v, value = holder[key];\n\t\t\t\t\tif (value && typeof value === 'object') {\n\t\t\t\t\t\tfor (k in value) {\n\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(value, k)) {\n\t\t\t\t\t\t\t\tv = walk(value, k);\n\t\t\t\t\t\t\t\tif (v !== undefined) {\n\t\t\t\t\t\t\t\t\tvalue[k] = v;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdelete value[k];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn reviver.call(holder, key, value);\n\t\t\t\t}({'': result}, ''));\n\t\t\t\tresult = cb( result );\n\n\t\t\t\tif( retcode < 2 )\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Parse a string and return the result.\n\t\t * @template T\n\t\t * @param {string} msg\n\t\t * @param {(key:string,value:any)=>any} [reviver]\n\t\t * @returns {T}\n\t\t */\n\t\tparse(msg,reviver) {\n\t\t\tif (typeof msg !== \"string\") msg = String(msg);\n\t\t\tthis.reset();\n\t\t\tconst writeResult = this._write( msg, true );\n\t\t\tif( writeResult > 0 ) {\n\t\t\t\tif( writeResult > 1 ){\n\t\t\t\t\t// probably a carriage return.\n\t\t\t\t\t//console.log( \"Extra data at end of message\");\n\t\t\t\t}\n\t\t\t\tlet result = this.value();\n\t\t\t\tif( ( \"undefined\" === typeof result ) && writeResult > 1 ){\n\t\t\t\t\tthrow new Error( \"Pending value could not complete\");\n\t\t\t\t}\n\t                \n\t\t\t\tresult = typeof reviver === 'function' ? (function walk(holder, key) {\n\t\t\t\t\tlet k, v, value = holder[key];\n\t\t\t\t\tif (value && typeof value === 'object') {\n\t\t\t\t\t\tfor (k in value) {\n\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(value, k)) {\n\t\t\t\t\t\t\t\tv = walk(value, k);\n\t\t\t\t\t\t\t\tif (v !== undefined) {\n\t\t\t\t\t\t\t\t\tvalue[k] = v;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdelete value[k];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn reviver.call(holder, key, value);\n\t\t\t\t}({'': result}, '')) : result;\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tthis.finalError();\n\t\t\treturn undefined;\n\n\t\t\t\n\t\t\treturn this.write(msg );\n\t\t},\n\t\t_write(msg,complete_at_end) {\n\t\t\tlet cInt;\n\t\t\tlet input;\n\t\t\tlet buf;\n\t\t\tlet retval = 0;\n\t\t\tfunction throwError( leader, c ) {\n\t\t\t\tthrow new Error( `${leader} '${String.fromCodePoint( c )}' unexpected at ${n} (near '${buf.substr(n>4?(n-4):0,n>4?3:(n-1))}[${String.fromCodePoint( c )}]${buf.substr(n, 10)}') [${pos.line}:${pos.col}]`);\n\t\t\t}\n\n\t\t\tfunction RESET_VAL()  {\n\t\t\t\tval.value_type = VALUE_UNSET;\n\t\t\t\tval.string = '';\n\t\t\t\tval.contains = null;\n\t\t\t\t//val.className = null;\n\t\t\t}\n\n\t\t\tfunction convertValue() {\n\t\t\t\tlet fp = null;\n\t\t\t\t//_DEBUG_PARSING && console.log( \"CONVERT VAL:\", val );\n\t\t\t\tswitch( val.value_type ){\n\t\t\t\tcase VALUE_NUMBER:\n\t\t\t\t\t//1502678337047\n\t\t\t\t\tif( ( ( val.string.length > 13 ) || ( val.string.length == 13 && val[0]>'2' ) )\n\t\t\t\t\t    && !date_format && !exponent_digit && !exponent_sign && !decimal ) {\n\t\t\t\t\t\tisBigInt = true;\n\t\t\t\t\t}\n\t\t\t\t\tif( isBigInt ) { if( hasBigInt ) return BigInt(val.string); else throw new Error( \"no builtin BigInt()\", 0 ) }\n\t\t\t\t\tif( date_format ) { \n\t\t\t\t\t\tconst r = val.string.match(/\\.(\\d\\d\\d\\d*)/ );\n\t\t\t\t\t\tconst frac = ( r )?( r )[1]:null;\n\t\t\t\t\t\tif( !frac || (frac.length < 4) ) {\n\t\t\t\t\t\t\tconst r = new Date( val.string ); \n\t\t\t\t\t\t\tif(isNaN(r.getTime())) throwError( \"Bad Date format\", cInt ); return r;  \n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet ns = frac.substr( 3 );\n\t\t\t\t\t\t\twhile( ns.length < 6 ) ns = ns+'0';\n\t\t\t\t\t\t\tconst r = new DateNS( val.string, Number(ns ) ); \n\t\t\t\t\t\t\tif(isNaN(r.getTime())) throwError( \"Bad DateNS format\" + r+r.getTime(), cInt ); return r;  \n\t\t\t\t\t\t}\n\t\t\t\t\t\t//const r = new Date( val.string ); if(isNaN(r.getTime())) throwError( \"Bad number format\", cInt ); return r;  \n\t\t\t\t\t}\n\t\t\t\t\treturn  (negative?-1:1) * Number( val.string );\n\t\t\t\tcase VALUE_STRING:\n\t\t\t\t\tif( val.className ) {\n\t\t\t\t\t\tfp = localFromProtoTypes.get( val.className );\n\t\t\t\t\t\tif( !fp )\n\t\t\t\t\t\t\tfp = fromProtoTypes.get( val.className );\n\t\t\t\t\t\tif( fp && fp.cb ) {\n\t\t\t\t\t\t\tval.className = null;\n\t\t\t\t\t\t\treturn fp.cb.call( val.string );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// '[object Object]' throws this error.\n\t\t\t\t\t\t\tthrow new Error( \"Double string error, no constructor for: new \" + val.className + \"(\"+val.string+\")\" )\n\t\t\t\t\t\t}\t\n\t\t\t\t\t}\n\t\t\t\t\treturn val.string;\n\t\t\t\tcase VALUE_TRUE:\n\t\t\t\t\treturn true;\n\t\t\t\tcase VALUE_FALSE:\n\t\t\t\t\treturn false;\n\t\t\t\tcase VALUE_NEG_NAN:\n\t\t\t\t\treturn -NaN;\n\t\t\t\tcase VALUE_NAN:\n\t\t\t\t\treturn NaN;\n\t\t\t\tcase VALUE_NEG_INFINITY:\n\t\t\t\t\treturn -Infinity;\n\t\t\t\tcase VALUE_INFINITY:\n\t\t\t\t\treturn Infinity;\n\t\t\t\tcase VALUE_NULL:\n\t\t\t\t\treturn null;\n\t\t\t\tcase VALUE_UNDEFINED:\n\t\t\t\t\treturn undefined;\n\t\t\t\tcase VALUE_EMPTY:\n\t\t\t\t\treturn undefined;\n\t\t\t\tcase VALUE_OBJECT:\n\t\t\t\t\tif( val.className ) { \n\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"class reviver\" );\n\t\t\t\t\t\tfp = localFromProtoTypes.get( val.className );\n\t\t\t\t\t\tif( !fp )\n\t\t\t\t\t\t\tfp = fromProtoTypes.get( val.className );\n\t\t\t\t\t\tval.className = null;\n\t\t\t\t\t\tif( fp && fp.cb ) return val.contains = fp.cb.call( val.contains ); \n\t\t\t\t\t}\n\t\t\t\t\treturn val.contains;\n\t\t\t\tcase VALUE_ARRAY:\n\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"Array conversion:\", arrayType, val.contains );\n\t\t\t\t\tif( arrayType >= 0 ) {\n\t\t\t\t\t\tlet ab;\n\t\t\t\t\t\tif( val.contains.length )\n\t\t\t\t\t\t\tab = DecodeBase64( val.contains[0] )\n\t\t\t\t\t\telse ab = DecodeBase64( val.string );\n\t\t\t\t\t\tif( arrayType === 0 ) {\n\t\t\t\t\t\t\tarrayType = -1;\n\t\t\t\t\t\t\treturn ab;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst newab = new knownArrayTypes[arrayType]( ab );\n\t\t\t\t\t\t\tarrayType = -1;\n\t\t\t\t\t\t\treturn newab;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if( arrayType === -2 ) {\n\t\t\t\t\t\tlet obj = rootObject;\n\t\t\t\t\t\t//let ctx = context_stack.first;\n\t\t\t\t\t\tlet lvl;\n\t\t\t\t\t\t//console.log( \"Resolving Reference...\", context_stack.length );\n\t\t\t\t\t\t//console.log( \"--elements and array\", elements );\n\t\t\t\t\t\t\n\t\t\t\t\t\tconst pathlen = val.contains.length;\n\t\t\t\t\t\tfor( lvl = 0; lvl < pathlen; lvl++ ) {\n\t\t\t\t\t\t\tconst idx = val.contains[lvl];\n\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Looking up idx:\", idx, \"of\", val.contains, \"in\", obj );\n\t\t\t\t\t\t\tlet nextObj = obj[idx];\n\n\t\t\t\t\t\t\t//_DEBUG_REFERENCES  && console.log( \"Resolve path:\", lvl, idx,\"in\", obj, context_stack.length, val.contains.toString() );\n\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"NEXT OBJECT:\", nextObj );\n\t\t\t\t\t\t\tif( !nextObj ) {\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlet ctx = context_stack.first;\n\t\t\t\t\t\t\t\t\tlet p = 0;\n\t\t\t\t\t\t\t\t\t//_DEBUG_PARSING_CONTEXT && context_stack.dump();\n\t\t\t\t\t\t\t\t\twhile( ctx && p < pathlen && p < context_stack.length ) {\n\t\t\t\t\t\t\t\t\t\tconst thisKey = val.contains[p];\n\t\t\t\t\t\t\t\t\t\tif( !ctx.next || thisKey !== ctx.next.node.name ) {\n\t\t\t\t\t\t\t\t\t\t\tbreak;  // can't follow context stack any further.... \n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Checking context:\", obj, \"p=\",p, \"key=\",thisKey, \"ctx(and .next)=\",util.inspect(ctx));\n\t\t\t\t\t\t\t\t\t\t//console.dir(ctx, { depth: null })\n\t\t\t\t\t\t\t\t\t\tif( ctx.next ) {\n\t\t\t\t\t\t\t\t\t\t\tif( \"number\" === typeof thisKey ) {\n\t\t\t\t\t\t\t\t\t\t\t\tconst actualObject = ctx.next.node.elements;\n\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Number in index... tracing stack...\", obj, actualObject, ctx && ctx.next && ctx.next.next && ctx.next.next.node );\n\n\t\t\t\t\t\t\t\t\t\t\t\tif( actualObject && thisKey >= actualObject.length ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"AT \", p, actualObject.length, val.contains.length );\n\t\t\t\t\t\t\t\t\t\t\t\t\tif( p === (context_stack.length-1) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log( \"This is actually at the current object so use that\", p, val.contains, elements );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnextObj = elements;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tp++;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tctx = ctx.next;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"is next... \", thisKey, actualObject.length )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif( ctx.next.next && thisKey === actualObject.length ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"is next... \")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnextObj = ctx.next.next.node.elements;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tctx = ctx.next;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tp++;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobj = nextObj;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"FAILING HERE\", ctx.next, ctx.next.next, elements, obj );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Nothing after, so this is just THIS?\" );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnextObj = elements;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tp++; // make sure to exit.\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//obj = next\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"field AT index\", p,\"of\", val.contains.length );\n\t\t\t\t\t\t\t\t\t\t\t\tif( thisKey !== ctx.next.node.name ){\n\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Expect:\", thisKey, ctx.next.node.name, ctx.next.node.elements );\n\t\t\t\t\t\t\t\t\t\t\t\t\tnextObj = ( ctx.next.node.elements[thisKey] );\n\t\t\t\t\t\t\t\t\t\t\t\t\t//throw new Error( \"Unexpected path-context relationship\" );\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\tlvl = p;\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Updating next object(NEW) to\", ctx.next.node, elements, thisKey)\n\t\t\t\t\t\t\t\t\t\t\t\t\tif( ctx.next.next )\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnextObj = ctx.next.next.node.elements;\n\t\t\t\t\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Nothing after, so this is just THIS?\" );\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnextObj = elements;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"using named element from\", ctx.next.node.elements, \"=\", nextObj )\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t//if( //_DEBUG_REFERENCES )  {\n\t\t\t\t\t\t\t\t\t\t\t//\tconst a = ctx.next.node.elements;\n\t\t\t\t\t\t\t\t\t\t\t//\tconsole.log( \"Stack Dump:\"\n\t\t\t\t\t\t\t\t\t\t\t//\t\t, a?a.length:a\n\t\t\t\t\t\t\t\t\t\t\t//\t\t, ctx.next.node.name\n\t\t\t\t\t\t\t\t\t\t\t//\t\t, thisKey\n\t\t\t\t\t\t\t\t\t\t\t//\t\t);\n\t\t\t\t\t\t\t\t\t\t\t//}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tnextObj = nextObj[thisKey];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Doing next context??\", p, context_stack.length, val.contains.length );\n\t\t\t\t\t\t\t\t\t\tctx = ctx.next;\n\t\t\t\t\t\t\t\t\t\tp++;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"Done with context stack...level\", lvl, \"p\", p );\n\t\t\t\t\t\t\t\t\tif( p < pathlen )\n\t\t\t\t\t\t\t\t\t\tlvl = p-1;\n\t\t\t\t\t\t\t\t\telse lvl = p;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//_DEBUG_REFERENCES && console.log( \"End of processing level:\", lvl );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif( (\"object\" === typeof nextObj ) && !nextObj ) {\n\t\t\t\t\t\t\t\tthrow new Error( \"Path did not resolve properly:\" +  val.contains + \" at \" + idx + '(' + lvl + ')' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tobj = nextObj;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"Resulting resolved object:\", obj );\n\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"SETTING MODE TO -3 (resolved -2)\" );\n\t\t\t\t\t\tarrayType = -3;\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t}\n\t\t\t\t\tif( val.className ) { \n\t\t\t\t\t\tfp = localFromProtoTypes.get( val.className );\n\t\t\t\t\t\tif( !fp )\n\t\t\t\t\t\t\tfp = fromProtoTypes.get( val.className );\n\t\t\t\t\t\tval.className = null; \n\t\t\t\t\t\tif( fp && fp.cb ) return fp.cb.call( val.contains ); \n\t\t\t\t\t}\n\t\t\t\t\treturn val.contains;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log( \"Unhandled value conversion.\", val );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction arrayPush() {\n\t\t\t\t//_DEBUG_PARSING && console.log( \"PUSH TO ARRAY:\", val );\n\t\t\t\tif( arrayType == -3 )  {\n\t\t\t\t\t//_DEBUG_PARSING && console.log(\" Array type -3?\", val.value_type, elements );\n\t\t\t\t\tif( val.value_type === VALUE_OBJECT ) {\n\t\t\t\t\t\telements.push( val.contains );\n\t\t\t\t\t}\n\t\t\t\t\tarrayType = -1; // next one should be allowed?\n\t\t\t\t\treturn;\n\t\t\t\t} //else\n\t\t\t\t//\tconsole.log( \"Finally a push that's not already pushed!\", );\n\t\t\t\tswitch( val.value_type ){\n\t\t\t\tcase VALUE_EMPTY:\n\t\t\t\t\telements.push( undefined );\n\t\t\t\t\tdelete elements[elements.length-1];\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\telements.push( convertValue() );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tRESET_VAL();\n\t\t\t}\n\n\t\t\tfunction objectPush() {\n\t\t\t\tif( arrayType === -3 && val.value_type === VALUE_ARRAY ) {\n\t\t\t\t\t//console.log( \"Array has already been set in object.\" );\n\t\t\t\t\t//elements[val.name] = val.contains;\n\t\t\t\t\tRESET_VAL();\n\t\t\t\t\tarrayType = -1;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif( val.value_type === VALUE_EMPTY ) return;\n\t\t\t\tif( !val.name && current_class ) {\n\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"A Stepping current class field:\", current_class_field, val.name );\n\t\t\t\t\tval.name = current_class.fields[current_class_field++];\n\t\t\t\t}\n\t\t\t\tlet value = convertValue();\n\n\t\t\t\tif( current_proto && current_proto.protoDef && current_proto.protoDef.cb ) {\n\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"SOMETHING SHOULD AHVE BEEN REPLACED HERE??\", current_proto );\n\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"(need to do fromprototoypes here) object:\", val, value );\n\t\t\t\t\tvalue = current_proto.protoDef.cb.call( elements, val.name, value );\n\t\t\t\t\tif( value ) elements[val.name] = value;\n\t\t\t\t\t//elements = new current_proto.protoCon( elements );\n\t\t\t\t}else {\n\t\t\t\t        //_DEBUG_PARSING_DETAILS && console.log( \"Default no special class reviver\", val.name, value );\n\t\t\t\t\telements[val.name] = value;\n\t\t\t\t}\n\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"Updated value:\", current_class_field, val.name, elements[val.name] );\n\t\t\t\n\t\t\t\t//_DEBUG_PARSING && console.log( \"+++ Added object field:\", val.name, elements, elements[val.name], rootObject );\n\t\t\t\tRESET_VAL();\n\t\t\t}\n\n\t\t\tfunction recoverIdent(cInt) {\n\t\t\t\t//_DEBUG_PARSING&&console.log( \"Recover Ident char:\", cInt, val, String.fromCodePoint(cInt), \"word:\", word );\n\t\t\t\tif( word !== WORD_POS_RESET ) {\n\t\t\t\t\tif( negative ) { \n\t\t\t\t\t\t//val.string += \"-\"; negative = false; \n\t\t\t\t\t\tthrowError( \"Negative outside of quotes, being converted to a string (would lose count of leading '-' characters)\", cInt );\n\t\t\t\t\t}\n\t\t\t\t\tswitch( word ) {\n\t\t\t\t\tcase WORD_POS_END:\n\t\t\t\t\t\tswitch( val.value_type ) {\n\t\t\t\t\t\tcase VALUE_TRUE:  val.string += \"true\"; break\n\t\t\t\t\t\tcase VALUE_FALSE:  val.string += \"false\"; break\n\t\t\t\t\t\tcase VALUE_NULL:  val.string += \"null\"; break\n\t\t\t\t\t\tcase VALUE_INFINITY:  val.string += \"Infinity\"; break\n\t\t\t\t\t\tcase VALUE_NEG_INFINITY:  val.string += \"-Infinity\"; throwError( \"Negative outside of quotes, being converted to a string\", cInt ); break\n\t\t\t\t\t\tcase VALUE_NAN:  val.string += \"NaN\"; break\n\t\t\t\t\t\tcase VALUE_NEG_NAN:  val.string += \"-NaN\"; throwError( \"Negative outside of quotes, being converted to a string\", cInt ); break\n\t\t\t\t\t\tcase VALUE_UNDEFINED:  val.string += \"undefined\"; break\n\t\t\t\t\t\tcase VALUE_STRING: break;\n\t\t\t\t\t\tcase VALUE_UNSET: break;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.log( \"Value of type \" + val.value_type + \" is not restored...\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase WORD_POS_TRUE_1 :  val.string += \"t\"; break;\n\t\t\t\t\tcase WORD_POS_TRUE_2 :  val.string += \"tr\"; break;\n\t\t\t\t\tcase WORD_POS_TRUE_3 : val.string += \"tru\"; break;\n\t\t\t\t\tcase WORD_POS_FALSE_1 : val.string += \"f\"; break;\n\t\t\t\t\tcase WORD_POS_FALSE_2 : val.string += \"fa\"; break;\n\t\t\t\t\tcase WORD_POS_FALSE_3 : val.string += \"fal\"; break;\n\t\t\t\t\tcase WORD_POS_FALSE_4 : val.string += \"fals\"; break;\n\t\t\t\t\tcase WORD_POS_NULL_1 : val.string += \"n\"; break;\n\t\t\t\t\tcase WORD_POS_NULL_2 : val.string += \"nu\"; break;\n\t\t\t\t\tcase WORD_POS_NULL_3 : val.string += \"nul\"; break;\n\t\t\t\t\tcase WORD_POS_UNDEFINED_1 : val.string += \"u\"; break;\n\t\t\t\t\tcase WORD_POS_UNDEFINED_2 : val.string += \"un\"; break;\n\t\t\t\t\tcase WORD_POS_UNDEFINED_3 : val.string += \"und\"; break;\n\t\t\t\t\tcase WORD_POS_UNDEFINED_4 : val.string += \"unde\"; break;\n\t\t\t\t\tcase WORD_POS_UNDEFINED_5 : val.string += \"undef\"; break;\n\t\t\t\t\tcase WORD_POS_UNDEFINED_6 : val.string += \"undefi\"; break;\n\t\t\t\t\tcase WORD_POS_UNDEFINED_7 : val.string += \"undefin\"; break;\n\t\t\t\t\tcase WORD_POS_UNDEFINED_8 : val.string += \"undefine\"; break;\n\t\t\t\t\tcase WORD_POS_NAN_1 : val.string += \"N\"; break;\n\t\t\t\t\tcase WORD_POS_NAN_2 : val.string += \"Na\"; break;\n\t\t\t\t\tcase WORD_POS_INFINITY_1 : val.string += \"I\"; break;\n\t\t\t\t\tcase WORD_POS_INFINITY_2 : val.string += \"In\"; break;\n\t\t\t\t\tcase WORD_POS_INFINITY_3 : val.string += \"Inf\"; break;\n\t\t\t\t\tcase WORD_POS_INFINITY_4 : val.string += \"Infi\"; break;\n\t\t\t\t\tcase WORD_POS_INFINITY_5 : val.string += \"Infin\"; break;\n\t\t\t\t\tcase WORD_POS_INFINITY_6 : val.string += \"Infini\"; break;\n\t\t\t\t\tcase WORD_POS_INFINITY_7 : val.string += \"Infinit\"; break;\n\t\t\t\t\tcase WORD_POS_RESET : break;\n\t\t\t\t\tcase WORD_POS_FIELD : break;\n\t\t\t\t\tcase WORD_POS_AFTER_FIELD:\n\t\t\t\t\t    //throwError( \"String-keyword recovery fail (after whitespace)\", cInt);\n\t\t\t\t\t    break;\n\t\t\t\t\tcase WORD_POS_AFTER_FIELD_VALUE:\n\t\t\t\t\t    throwError( \"String-keyword recovery fail (after whitespace)\", cInt );\n\t\t\t\t\t    break;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t//console.log( \"Word context: \" + word + \" unhandled\" );\n\t\t\t\t\t}\n\t\t\t\t\tval.value_type = VALUE_STRING;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\tif( word < WORD_POS_FIELD)\n\t\t\t\t\t    word = WORD_POS_END;\n\t\t\t\t} else {\n\t\t\t\t\tword = WORD_POS_END;\n\t\t\t\t\t//if( val.value_type === VALUE_UNSET && val.string.length )\n\t\t\t\t\t\tval.value_type = VALUE_STRING\n\t\t\t\t}\n\t\t\t\tif( cInt == 123/*'{'*/ )\n\t\t\t\t\topenObject();\n\t\t\t\telse if( cInt == 91/*'['*/ )\n\t\t\t\t\topenArray();\n\t\t\t\telse if( cInt == 44/*','*/ ) {\n\t\t\t\t\t// comma separates the string, it gets consumed.\n\t\t\t\t} else {\n\t\t\t\t\t// ignore white space.\n\t\t\t\t\tif( cInt == 32/*' '*/ || cInt == 13 || cInt == 10 || cInt == 9 || cInt == 0xFEFF || cInt == 0x2028 || cInt == 0x2029 ) {\n\t\t\t\t\t\t//_DEBUG_WHITESPACE && console.log( \"IGNORE WHITESPACE\" );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif( cInt == 44/*','*/ || cInt == 125/*'}'*/ || cInt == 93/*']'*/ || cInt == 58/*':'*/ )\n\t\t\t\t\t\t;// just don't add these, they are the next token that caused a revive to happen\n\t\t\t\t\telse //if( typeof cInt === \"number\")\n\t\t\t\t\t\tval.string += str;\n\t\t\t\t}\n\t\t\t\t//console.log( \"VAL STRING IS:\", val.string, str );\n\t\t\t}\n\n\t\t\t// gather a string from an input stream; start_c is the opening quote to find a related close quote.\n\t\t\tfunction gatherString( start_c ) {\n\t\t\t\tlet retval = 0;\n\t\t\t\twhile( retval == 0 && ( n < buf.length ) ) {\n\t\t\t\t\tstr = buf.charAt(n);\n\t\t\t\t\tlet cInt = buf.codePointAt(n++);\n\t\t\t\t\tif( cInt >= 0x10000 ) { str += buf.charAt(n); n++; }\n\t\t\t\t\t//console.log( \"gathering....\", stringEscape, str, cInt, unicodeWide, stringHex, stringUnicode, hex_char_len );\n\t\t\t\t\tpos.col++;\n\t\t\t\t\tif( cInt == start_c ) { //( cInt == 34/*'\"'*/ ) || ( cInt == 39/*'\\''*/ ) || ( cInt == 96/*'`'*/ ) )\n\t\t\t\t\t\tif( stringEscape ) { \n\t\t\t\t\t\t\tif( stringHex )\n\t\t\t\t\t\t\t\tthrowError( \"Incomplete hexidecimal sequence\", cInt );\n\t\t\t\t\t\t\telse if( stringUnicode )\n\t\t\t\t\t\t\t\tthrowError( \"Incomplete long unicode sequence\", cInt );\n\t\t\t\t\t\t\telse if( unicodeWide )\n\t\t\t\t\t\t\t\tthrowError( \"Incomplete unicode sequence\", cInt );\n\t\t\t\t\t\t\tif( cr_escaped ) {\n\t\t\t\t\t\t\t\tcr_escaped = false;\n\t\t\t\t\t\t\t\tretval = 1; // complete string, escaped \\r\n\t\t\t\t\t\t\t} else val.string += str;\n\t\t\t\t\t\t\tstringEscape = false; }\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// quote matches, and is not processing an escape sequence.\n\t\t\t\t\t\t\tretval = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telse if( stringEscape ) {\n\t\t\t\t\t\tif( unicodeWide ) {\n\t\t\t\t\t\t\tif( cInt == 125/*'}'*/ ) {\n\t\t\t\t\t\t\t\tval.string += String.fromCodePoint( hex_char );\n\t\t\t\t\t\t\t\tunicodeWide = false;\n\t\t\t\t\t\t\t\tstringUnicode = false;\n\t\t\t\t\t\t\t\tstringEscape = false;\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thex_char *= 16;\n\t\t\t\t\t\t\tif( cInt >= 48/*'0'*/ && cInt <= 57/*'9'*/ )      hex_char += cInt - 0x30;\n\t\t\t\t\t\t\telse if( cInt >= 65/*'A'*/ && cInt <= 70/*'F'*/ ) hex_char += ( cInt - 65 ) + 10;\n\t\t\t\t\t\t\telse if( cInt >= 97/*'a'*/ && cInt <= 102/*'f'*/ ) hex_char += ( cInt - 97 ) + 10;\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tthrowError( \"(escaped character, parsing hex of \\\\u)\", cInt );\n\t\t\t\t\t\t\t\tretval = -1;\n\t\t\t\t\t\t\t\tunicodeWide = false;\n\t\t\t\t\t\t\t\tstringEscape = false;\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if( stringHex || stringUnicode ) {\n\t\t\t\t\t\t\tif( hex_char_len === 0 && cInt === 123/*'{'*/ ) {\n\t\t\t\t\t\t\t\tunicodeWide = true;\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif( hex_char_len < 2 || ( stringUnicode && hex_char_len < 4 ) ) {\n\t\t\t\t\t\t\t\thex_char *= 16;\n\t\t\t\t\t\t\t\tif( cInt >= 48/*'0'*/ && cInt <= 57/*'9'*/ )      hex_char += cInt - 0x30;\n\t\t\t\t\t\t\t\telse if( cInt >= 65/*'A'*/ && cInt <= 70/*'F'*/ ) hex_char += ( cInt - 65 ) + 10;\n\t\t\t\t\t\t\t\telse if( cInt >= 97/*'a'*/ && cInt <= 102/*'f'*/ ) hex_char += ( cInt - 97 ) + 10;\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tthrowError( stringUnicode?\"(escaped character, parsing hex of \\\\u)\":\"(escaped character, parsing hex of \\\\x)\", cInt );\n\t\t\t\t\t\t\t\t\tretval = -1;\n\t\t\t\t\t\t\t\t\tstringHex = false;\n\t\t\t\t\t\t\t\t\tstringEscape = false;\n\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\thex_char_len++;\n\t\t\t\t\t\t\t\tif( stringUnicode ) {\n\t\t\t\t\t\t\t\t\tif( hex_char_len == 4 ) {\n\t\t\t\t\t\t\t\t\t\tval.string += String.fromCodePoint( hex_char );\n\t\t\t\t\t\t\t\t\t\tstringUnicode = false;\n\t\t\t\t\t\t\t\t\t\tstringEscape = false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if( hex_char_len == 2 ) {\n\t\t\t\t\t\t\t\t\tval.string += String.fromCodePoint( hex_char );\n\t\t\t\t\t\t\t\t\tstringHex = false;\n\t\t\t\t\t\t\t\t\tstringEscape = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tswitch( cInt ) {\n\t\t\t\t\t\tcase 13/*'\\r'*/:\n\t\t\t\t\t\t\tcr_escaped = true;\n\t\t\t\t\t\t\tpos.col = 1;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\tcase 0x2028: // LS (Line separator)\n\t\t\t\t\t\tcase 0x2029: // PS (paragraph separate)\n\t\t\t\t\t\t\tpos.col = 1;\n\t\t\t\t\t\t\t// falls through\n\t\t\t\t\t\tcase 10/*'\\n'*/:\n\t\t\t\t\t\t\tif( !cr_escaped ) { // \\\\ \\n\n\t\t\t\t\t\t\t\tpos.col = 1;\n\t\t\t\t\t\t\t} else { // \\\\ \\r \\n\n\t\t\t\t\t\t\t\tcr_escaped = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpos.line++;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 116/*'t'*/:\n\t\t\t\t\t\t\tval.string += '\\t';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 98/*'b'*/:\n\t\t\t\t\t\t\tval.string += '\\b';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 110/*'n'*/:\n\t\t\t\t\t\t\tval.string += '\\n';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 114/*'r'*/:\n\t\t\t\t\t\t\tval.string += '\\r';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 102/*'f'*/:\n\t\t\t\t\t\t\tval.string += '\\f';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 118/*'v'*/:\n\t\t\t\t\t\t\tval.string += '\\v';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 48/*'0'*/: \n\t\t\t\t\t\t\tval.string += '\\0';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 120/*'x'*/:\n\t\t\t\t\t\t\tstringHex = true;\n\t\t\t\t\t\t\thex_char_len = 0;\n\t\t\t\t\t\t\thex_char = 0;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\tcase 117/*'u'*/:\n\t\t\t\t\t\t\tstringUnicode = true;\n\t\t\t\t\t\t\thex_char_len = 0;\n\t\t\t\t\t\t\thex_char = 0;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t//case 47/*'/'*/:\n\t\t\t\t\t\t//case 92/*'\\\\'*/:\n\t\t\t\t\t\t//case 34/*'\"'*/:\n\t\t\t\t\t\t//case 39/*\"'\"*/:\n\t\t\t\t\t\t//case 96/*'`'*/:\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//console.log( \"other...\" );\n\t\t\t\t\t\tstringEscape = false;\n\t\t\t\t\t}\n\t\t\t\t\telse if( cInt === 92/*'\\\\'*/ ) {\n\t\t\t\t\t\tif( stringEscape ) {\n\t\t\t\t\t\t\tval.string += '\\\\';\n\t\t\t\t\t\t\tstringEscape = false\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tstringEscape = true;\n\t\t\t\t\t\t\thex_char = 0;\n\t\t\t\t\t\t\thex_char_len = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse { /* any other character */\n\t\t\t\t\t\tif( cr_escaped ) {\n\t\t\t\t\t\t\t// \\\\ \\r <any char>\n\t\t\t\t\t\t\tcr_escaped = false;\n\t\t\t\t\t\t\tpos.line++;\n\t\t\t\t\t\t\tpos.col = 2; // this character is pos 1; and increment to be after it.\n\t\t\t\t\t\t}\n\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn retval;\n\t\t\t}\n\n\t\t\t// gather a number from the input stream.\n\t\t\tfunction collectNumber() {\n\t\t\t\tlet _n;\n\t\t\t\twhile( (_n = n) < buf.length ) {\n\t\t\t\t\tstr = buf.charAt(_n);\n\t\t\t\t\tlet cInt = buf.codePointAt(n++);\n\t\t\t\t\tif( cInt >= 256 ) { \n\t\t\t\t\t\t\tpos.col -= n - _n;\n\t\t\t\t\t\t\tn = _n; // put character back in queue to process.\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//_DEBUG_PARSING_NUMBERS  && console.log( \"in getting number:\", n, cInt, String.fromCodePoint(cInt) );\n\t\t\t\t\t\tif( cInt == 95 /*_*/ )\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\tpos.col++;\n\t\t\t\t\t\t// leading zeros should be forbidden.\n\t\t\t\t\t\tif( cInt >= 48/*'0'*/ && cInt <= 57/*'9'*/ ) {\n\t\t\t\t\t\t\tif( exponent ) {\n\t\t\t\t\t\t\t\texponent_digit = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t} else if( cInt == 45/*'-'*/ || cInt == 43/*'+'*/ ) {\n\t\t\t\t\t\t\tif( val.string.length == 0 || ( exponent && !exponent_sign && !exponent_digit ) ) {\n\t\t\t\t\t\t\t\tif( cInt == 45/*'-'*/ && !exponent ) negative = !negative;\n\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\texponent_sign = true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif( negative ) { val.string = '-' + val.string; negative = false; }\n\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\tdate_format = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if( cInt == 78/*'N'*/ ) {\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET ) {\n\t\t\t\t\t\t\t\tgatheringNumber = false;\n\t\t\t\t\t\t\t\tword = WORD_POS_NAN_1;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthrowError( \"fault while parsing number;\", cInt );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else if( cInt == 73/*'I'*/ ) {\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET ) {\n\t\t\t\t\t\t\t\tgatheringNumber = false;\n\t\t\t\t\t\t\t\tword = WORD_POS_INFINITY_1;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthrowError( \"fault while parsing number;\", cInt );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else if( cInt == 58/*':'*/ && date_format ) {\n\t\t\t\t\t\t\tif( negative ) { val.string = '-' + val.string; negative = false; }\n\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\tdate_format = true;\n\t\t\t\t\t\t} else if( cInt == 84/*'T'*/ && date_format ) {\n\t\t\t\t\t\t\tif( negative ) { val.string = '-' + val.string; negative = false; }\n\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\tdate_format = true;\n\t\t\t\t\t\t} else if( cInt == 90/*'Z'*/ && date_format ) {\n\t\t\t\t\t\t\tif( negative ) { val.string = '-' + val.string; negative = false; }\n\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\tdate_format = true;\n\t\t\t\t\t\t} else if( cInt == 46/*'.'*/ ) {\n\t\t\t\t\t\t\tif( !decimal && !fromHex && !exponent ) {\n\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\tdecimal = true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\t\tthrowError( \"fault while parsing number;\", cInt );\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if( cInt == 110/*'n'*/ ) {\n\t\t\t\t\t\t\tisBigInt = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else if( fromHex && ( ( ( cInt >= 95/*'a'*/ ) && ( cInt <= 102/*'f'*/ ) ) ||\n\t\t\t\t\t\t           ( ( cInt >= 65/*'A'*/ ) && ( cInt <= 70/*'F'*/ ) ) ) ) {\n\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t} else if( cInt == 120/*'x'*/ || cInt == 98/*'b'*/ || cInt == 111/*'o'*/\n\t\t\t\t\t\t\t\t|| cInt == 88/*'X'*/ || cInt == 66/*'B'*/ || cInt == 79/*'O'*/ ) {\n\t\t\t\t\t\t\t// hex conversion.\n\t\t\t\t\t\t\tif( !fromHex && val.string == '0' ) {\n\t\t\t\t\t\t\t\tfromHex = true;\n\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\t\tthrowError( \"fault while parsing number;\", cInt );\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if( ( cInt == 101/*'e'*/ ) || ( cInt == 69/*'E'*/ ) ) {\n\t\t\t\t\t\t\tif( !exponent ) {\n\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\texponent = true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\t\tthrowError( \"fault while parsing number;\", cInt );\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( cInt == 32/*' '*/ || cInt == 13 || cInt == 10 || cInt == 9 || cInt == 47/*'/'*/ || cInt ==  35/*'#'*/\n\t\t\t\t\t\t\t || cInt == 44/*','*/ || cInt == 125/*'}'*/ || cInt == 93/*']'*/\n\t\t\t\t\t\t\t || cInt == 123/*'{'*/ || cInt == 91/*'['*/ || cInt == 34/*'\"'*/ || cInt == 39/*'''*/ || cInt == 96/*'`'*/\n\t\t\t\t\t\t\t || cInt == 58/*':'*/ ) {\n\t\t\t\t\t\t\t\tpos.col -= n - _n;\n\t\t\t\t\t\t\t\tn = _n; // put character back in queue to process.\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tif( complete_at_end ) {\n\t\t\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\t\t\tthrowError( \"fault while parsing number;\", cInt );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( (!complete_at_end) && n == buf.length ) {\n\t\t\t\t\tgatheringNumber = true;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tgatheringNumber = false;\n\t\t\t\t\tval.value_type = VALUE_NUMBER;\n\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN ) {\n\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// begin parsing an object type\n\t\t\tfunction openObject() {\n\t\t\t\tlet nextMode = CONTEXT_OBJECT_FIELD;\n\t\t\t\tlet cls = null;\n\t\t\t\tlet tmpobj = {};\n\t\t\t\t//_DEBUG_PARSING && console.log( \"opening object:\", val.string, val.value_type, word, parse_context );\n\t\t\t\tif( word > WORD_POS_RESET && word < WORD_POS_FIELD )\n\t\t\t\t\trecoverIdent( 123 /* '{' */ );\n\t\t\t\tlet protoDef;\n\t\t\t\tprotoDef = getProto(); // lookup classname using val.string and get protodef(if any)\n\t\t\t\tif( parse_context == CONTEXT_UNKNOWN ) {\n\t\t\t\t\tif( word == WORD_POS_FIELD /*|| word == WORD_POS_AFTER_FIELD*/ \n\t\t\t\t\t   || word == WORD_POS_END\n\t\t\t\t\t     && ( protoDef || val.string.length ) ) {\n\t\t\t\t\t\t\tif( protoDef && protoDef.protoDef && protoDef.protoDef.protoCon ) {\n\t\t\t\t\t\t\t\ttmpobj = new protoDef.protoDef.protoCon();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tif( !protoDef || !protoDef.protoDef && val.string ) // class creation is redundant...\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcls = classes.find( cls=>cls.name===val.string );\n\t\t\t\t\t\t\t//console.log( \"Probably creating the Macro-Tag here?\", cls )\n\t\t\t\t\t\t\tif( !cls ) {\n\t\t\t\t\t\t\t\t/* eslint-disable no-inner-declarations */\n\t\t\t\t\t\t\t\tfunction privateProto() {} \n\t\t\t\t\t\t\t\t// this just uses the tmpobj {} container to store the values collected for this class...\n\t\t\t\t\t\t\t\t// this does not generate the instance of the class.\n\t\t\t\t\t\t\t\t// if this tag type is also a prototype, use that prototype, else create a unique proto\n\t\t\t\t\t\t\t\t// for this tagged class type.\n\t\t\t\t\t\t\t\tclasses.push( cls = { name : val.string\n\t\t\t\t\t\t\t\t, protoCon: (protoDef && protoDef.protoDef && protoDef.protoDef.protoCon) || privateProto.constructor\n\t\t\t\t\t\t\t\t , fields : [] } );\n\t\t\t\t\t\t\t\t nextMode = CONTEXT_CLASS_FIELD;\n\t\t\t\t\t\t\t} else if( redefineClass ) {\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"redefine class...\" );\n\t\t\t\t\t\t\t\t// redefine this class\n\t\t\t\t\t\t\t\tcls.fields.length = 0;\n\t\t\t\t\t\t\t\tnextMode = CONTEXT_CLASS_FIELD;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"found existing class, using it....\");\n\t\t\t\t\t\t\t\ttmpobj = new cls.protoCon();\n\t\t\t\t\t\t\t\t//tmpobj = Object.assign( tmpobj, cls.protoObject );\n\t\t\t\t\t\t\t\t//Object.setPrototypeOf( tmpobj, Object.getPrototypeOf( cls.protoObject ) );\n\t\t\t\t\t\t\t\tnextMode = CONTEXT_CLASS_VALUE;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tredefineClass = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcurrent_class = cls\n\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tword = WORD_POS_FIELD;\n\t\t\t\t\t}\n\t\t\t\t} else if( word == WORD_POS_FIELD /*|| word == WORD_POS_AFTER_FIELD*/ \n\t\t\t\t\t\t|| parse_context === CONTEXT_IN_ARRAY \n\t\t\t\t\t\t|| parse_context === CONTEXT_OBJECT_FIELD_VALUE \n\t\t\t\t\t\t|| parse_context == CONTEXT_CLASS_VALUE ) {\n\t\t\t\t\tif( word != WORD_POS_RESET || val.value_type == VALUE_STRING ) {\n\t\t\t\t\t\tif( protoDef && protoDef.protoDef ) {\n\t\t\t\t\t\t\t// need to collect the object,\n\t\t\t\t\t\t\ttmpobj = new protoDef.protoDef.protoCon();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// look for a class type (shorthand) to recover.\n\t\t\t\t\t\t\tcls = classes.find( cls=>cls.name === val.string );\n\t\t\t\t\t\t\tif( !cls )\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t/* eslint-disable no-inner-declarations */\n\t\t\t\t\t\t\t   function privateProto(){}\n\t\t\t\t\t\t\t\t//sconsole.log( \"privateProto has no proto?\", privateProto.prototype.constructor.name );\n\t\t\t\t\t\t\t\tlocalFromProtoTypes.set( val.string,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ protoCon:privateProto.prototype.constructor\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, cb: null }\n\t\t\t\t\t\t\t\t\t\t\t\t\t   );\n\t\t\t\t\t\t\t\ttmpobj = new privateProto();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tnextMode = CONTEXT_CLASS_VALUE;\n\t\t\t\t\t\t\t\ttmpobj = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//nextMode = CONTEXT_CLASS_VALUE;\n\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t}\n\t\t\t\t} else if( ( parse_context == CONTEXT_OBJECT_FIELD && word == WORD_POS_RESET ) ) {\n\t\t\t\t\tthrowError( \"fault while parsing; getting field name unexpected \", cInt );\n\t\t\t\t\tstatus = false;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// common code to push into next context\n\t\t\t\tlet old_context = getContext();\n\t\t\t\t//_DEBUG_PARSING && console.log( \"Begin a new object; previously pushed into elements; but wait until trailing comma or close previously \", val.value_type, val.className );\n\n\t\t\t\tval.value_type = VALUE_OBJECT;\n\t\t\t\tif( parse_context === CONTEXT_UNKNOWN ){\n\t\t\t\t\telements = tmpobj;\n\t\t\t\t} else if( parse_context == CONTEXT_IN_ARRAY ) {\n\t\t\t\t\tif( arrayType == -1 ) {\n\t\t\t\t\t\t// this is pushed later... \n\t\t\t\t\t\t//console.log( \"PUSHING OPEN OBJECT INTO EXISTING ARRAY - THIS SHOULD BE RE-SET?\", JSOX.stringify(context_stack.first.node) );\n\t\t\t\t\t\t//elements.push( tmpobj );\n\t\t\t\t\t}\n\t\t\t\t\tval.name = elements.length;\n\t\t\t\t\t//else if( //_DEBUG_PARSING && arrayType !== -3 )\n\t\t\t\t\t//\tconsole.log( \"This is an invalid parsing state, typed array with sub-object elements\" );\n\t\t\t\t} else if( parse_context == CONTEXT_OBJECT_FIELD_VALUE || parse_context == CONTEXT_CLASS_VALUE ) {\n\t\t\t\t\tif( !val.name && current_class ){\n\t\t\t\t\t\tval.name = current_class.fields[current_class_field++];\n\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"B Stepping current class field:\", val, current_class_field, val.name );\n\t\t\t\t\t}\n\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"Setting element:\", val.name, tmpobj );\n\t\t\t\t\telements[val.name] = tmpobj;\n\t\t\t\t}\n\n\t\t\t\told_context.context = parse_context;\n\t\t\t\told_context.elements = elements;\n\t\t\t\t//old_context.element_array = element_array;\n\t\t\t\told_context.name = val.name;\n\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"pushing val.name:\", val.name, arrayType );\n\t\t\t\told_context.current_proto = current_proto;\n\t\t\t\told_context.current_class = current_class;\n\t\t\t\told_context.current_class_field = current_class_field;\n\t\t\t\told_context.valueType = val.value_type;\n\t\t\t\told_context.arrayType = arrayType; // pop that we don't want to have this value re-pushed.\n\t\t\t\told_context.className = val.className;\n\t\t\t\t//arrayType = -3; // this doesn't matter, it's an object state, and a new array will reset to -1\n\t\t\t\tval.className = null;\n\t\t\t\tval.name = null;\n\t\t\t\tcurrent_proto = protoDef;\n\t\t\t\tcurrent_class = cls;\n\t\t\t\t//console.log( \"Setting current class:\", current_class.name );\n\t\t\t\tcurrent_class_field = 0;\n\t\t\t\telements = tmpobj;\n\t\t\t\tif( !rootObject ) rootObject = elements;\n\t\t\t\t//_DEBUG_PARSING_STACK && console.log( \"push context (open object): \", context_stack.length, \" new mode:\", nextMode );\n\t\t\t\tcontext_stack.push( old_context );\n\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"RESET OBJECT FIELD\", old_context, context_stack );\n\t\t\t\tRESET_VAL();\n\t\t\t\tparse_context = nextMode;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tfunction openArray() {\n\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"openArray()...\" );\n\t\t\t\tif( word > WORD_POS_RESET && word < WORD_POS_FIELD )\n\t\t\t\t\trecoverIdent( 91 );\n\n\t\t\t\tif( word == WORD_POS_END && val.string.length ) {\n\t\t\t\t\t//_DEBUG_PARSING && console.log( \"recover arrayType:\", arrayType, val.string );\n\t\t\t\t\tlet typeIndex = knownArrayTypeNames.findIndex( type=>(type === val.string) );\n\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\tif( typeIndex >= 0 ) {\n\t\t\t\t\t\tarrayType = typeIndex;\n\t\t\t\t\t\tval.className = val.string;\n\t\t\t\t\t\tval.string = null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif( val.string === \"ref\" ) {\n\t\t\t\t\t\t\tval.className = null;\n\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"This will be a reference recovery for key:\", val );\n\t\t\t\t\t\t\tarrayType = -2;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( localFromProtoTypes.get( val.string ) ) {\n\t\t\t\t\t\t\t\tval.className = val.string;\n\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\telse if( fromProtoTypes.get( val.string ) ) {\n\t\t\t\t\t\t\t\tval.className = val.string;\n\t\t\t\t\t\t\t} else\n\t\t\t\t\t\t\t\tthrowError( `Unknown type '${val.string}' specified for array`, cInt );\n\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \" !!!!!A Set Classname:\", val.className );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if( parse_context == CONTEXT_OBJECT_FIELD || word == WORD_POS_FIELD || word == WORD_POS_AFTER_FIELD ) {\n\t\t\t\t\tthrowError( \"Fault while parsing; while getting field name unexpected\", cInt );\n\t\t\t\t\tstatus = false;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tlet old_context = getContext();\n\t\t\t\t\t//_DEBUG_PARSING && console.log( \"Begin a new array; previously pushed into elements; but wait until trailing comma or close previously \", val.value_type );\n\n\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"Opening array:\", val, parse_context );\n\t\t\t\t\tval.value_type = VALUE_ARRAY;\n\t\t\t\t\tlet tmparr = [];\n\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN )\n\t\t\t\t\t\telements = tmparr;\n\t\t\t\t\telse if( parse_context == CONTEXT_IN_ARRAY ) {\n\t\t\t\t\t\tif( arrayType == -1 ){\n\t\t\t\t\t\t\t//console.log( \"Pushing new opening array into existing array already RE-SET\" );\n\t\t\t\t\t\t\telements.push( tmparr );\n\t\t\t\t\t\t} //else if( //_DEBUG_PARSING && arrayType !== -3 )\n\t\t\t\t\t\tval.name = elements.length;\n\t\t\t\t\t\t//\tconsole.log( \"This is an invalid parsing state, typed array with sub-array elements\" );\n\t\t\t\t\t} else if( parse_context == CONTEXT_OBJECT_FIELD_VALUE ) {\n\t\t\t\t\t\tif( !val.name ) {\n\t\t\t\t\t\t\tconsole.log( \"This says it's resolved.......\" );\n\t\t\t\t\t\t\tarrayType = -3;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif( current_proto && current_proto.protoDef ) {\n\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"SOMETHING SHOULD HAVE BEEN REPLACED HERE??\", current_proto );\n\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"(need to do fromprototoypes here) object:\", val, value );\n\t\t\t\t\t\t\tif( current_proto.protoDef.cb ){\n\t\t\t\t\t\t\t\tconst newarr = current_proto.protoDef.cb.call( elements, val.name, tmparr );\n\t\t\t\t\t\t\t\tif( newarr !== undefined ) tmparr = elements[val.name] = newarr;\n\t\t\t\t\t\t\t\t//else console.log( \"Warning: Received undefined for an array; keeping original array, not setting field\" );\n\t\t\t\t\t\t\t}else\n\t\t\t\t\t\t\t\telements[val.name] = tmparr;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\telements[val.name] = tmparr;\n\t\t\t\t\t}\n\t\t\t\t\told_context.context = parse_context;\n\t\t\t\t\told_context.elements = elements;\n\t\t\t\t\t//old_context.element_array = element_array;\n\t\t\t\t\told_context.name = val.name;\n\t\t\t\t\told_context.current_proto = current_proto;\n\t\t\t\t\told_context.current_class = current_class;\n\t\t\t\t\told_context.current_class_field = current_class_field;\n\t\t\t\t\t// already pushed?\n\t\t\t\t\told_context.valueType = val.value_type;\n\t\t\t\t\told_context.arrayType = (arrayType==-1)?-3:arrayType; // pop that we don't want to have this value re-pushed.\n\t\t\t\t\told_context.className = val.className;\n\t\t\t\t\tarrayType = -1;\n\t\t\t\t\tval.className = null;\n\n\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \" !!!!!B Clear Classname:\", old_context, val.className, old_context.className, old_context.name );\n\t\t\t\t\tval.name = null;\n\t\t\t\t\tcurrent_proto = null;\n\t\t\t\t\tcurrent_class = null;\n\t\t\t\t\tcurrent_class_field = 0;\n\t\t\t\t\t//element_array = tmparr;\n\t\t\t\t\telements = tmparr;\n\t\t\t\t\tif( !rootObject ) rootObject = tmparr;\n\t\t\t\t\t//_DEBUG_PARSING_STACK && console.log( \"push context (open array): \", context_stack.length );\n\t\t\t\t\tcontext_stack.push( old_context );\n\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"RESET ARRAY FIELD\", old_context, context_stack );\n\n\t\t\t\t\tRESET_VAL();\n\t\t\t\t\tparse_context = CONTEXT_IN_ARRAY;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tfunction getProto() {\n\t\t\t\tconst result = {protoDef:null,cls:null};\n\t\t\t\tif( ( result.protoDef = localFromProtoTypes.get( val.string ) ) ) {\n\t\t\t\t\tif( !val.className ){\n\t\t\t\t\t\tval.className = val.string;\n\t\t\t\t\t\tval.string = null;\n\t\t\t\t\t}\n\t\t\t\t\t// need to collect the object, \n\t\t\t\t}\n\t\t\t\telse if( ( result.protoDef = fromProtoTypes.get( val.string ) ) ) {\n\t\t\t\t\tif( !val.className ){\n\t\t\t\t\t\tval.className = val.string;\n\t\t\t\t\t\tval.string = null;\n\t\t\t\t\t}\n\t\t\t\t} \n\t\t\t\tif( val.string )\n\t\t\t\t{\n\t\t\t\t\tresult.cls = classes.find( cls=>cls.name === val.string );\n\t\t\t\t\tif( !result.protoDef && !result.cls ) {\n\t\t\t\t\t    // this will creaet a class def with a new proto to cover when we don't KNOW.\n\t\t\t\t\t    //throwError( \"Referenced class \" + val.string + \" has not been defined\", cInt );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn (result.protoDef||result.cls)?result:null;\n\t\t\t}\n\n\t\t\tif( !status )\n\t\t\t\treturn -1;\n\n\t\t\tif( msg && msg.length ) {\n\t\t\t\tinput = getBuffer();\n\t\t\t\tinput.buf = msg;\n\t\t\t\tinQueue.push( input );\n\t\t\t} else {\n\t\t\t\tif( gatheringNumber ) {\n\t\t\t\t\t//console.log( \"Force completed.\")\n\t\t\t\t\tgatheringNumber = false;\n\t\t\t\t\tval.value_type = VALUE_NUMBER;\n\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN ) {\n\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t}\n\t\t\t\t\tretval = 1;  // if returning buffers, then obviously there's more in this one.\n\t\t\t\t}\n\t\t\t\tif( parse_context !== CONTEXT_UNKNOWN )\n\t\t\t\t\tthrowError( \"Unclosed object at end of stream.\", cInt );\n\t\t\t}\n\n\t\t\twhile( status && ( input = inQueue.shift() ) ) {\n\t\t\t\tn = input.n;\n\t\t\t\tbuf = input.buf;\n\t\t\t\tif( gatheringString ) {\n\t\t\t\t\tlet string_status = gatherString( gatheringStringFirstChar );\n\t\t\t\t\tif( string_status < 0 )\n\t\t\t\t\t\tstatus = false;\n\t\t\t\t\telse if( string_status > 0 ) {\n\t\t\t\t\t\tgatheringString = false;\n\t\t\t\t\t\tif( status ) val.value_type = VALUE_STRING;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( gatheringNumber ) {\n\t\t\t\t\tcollectNumber();\n\t\t\t\t}\n\n\t\t\t\twhile( !completed && status && ( n < buf.length ) ) {\n\t\t\t\t\tstr = buf.charAt(n);\n\t\t\t\t\tcInt = buf.codePointAt(n++);\n\t\t\t\t\tif( cInt >= 0x10000 ) { str += buf.charAt(n); n++; }\n\t\t\t\t\t//_DEBUG_PARSING && console.log( \"parsing at \", cInt, str );\n\t\t\t\t\t//_DEBUG_LL && console.log( \"processing: \", cInt, n, str, pos, comment, parse_context, word );\n\t\t\t\t\tpos.col++;\n\t\t\t\t\tif( comment ) {\n\t\t\t\t\t\tif( comment == 1 ) {\n\t\t\t\t\t\t\tif( cInt == 42/*'*'*/ ) comment = 3;\n\t\t\t\t\t\t\telse if( cInt != 47/*'/'*/ ) return throwError( \"fault while parsing;\", cInt );\n\t\t\t\t\t\t\telse comment = 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if( comment == 2 ) {\n\t\t\t\t\t\t\tif( cInt == 10/*'\\n'*/ || cInt == 13/*'\\r'*/  ) comment = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if( comment == 3 ) {\n\t\t\t\t\t\t\tif( cInt == 42/*'*'*/ ) comment = 4;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif( cInt == 47/*'/'*/ ) comment = 0;\n\t\t\t\t\t\t\telse comment = 3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tswitch( cInt ) {\n\t\t\t\t\tcase 35/*'#'*/:\n\t\t\t\t\t\tcomment = 2; // pretend this is the second slash.\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 47/*'/'*/:\n\t\t\t\t\t\tcomment = 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 123/*'{'*/:\n\t\t\t\t\t\topenObject();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 91/*'['*/:\n\t\t\t\t\t\topenArray();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 58/*':'*/:\n\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"colon received...\")\n\t\t\t\t\t\tif( parse_context == CONTEXT_CLASS_VALUE ) {\n\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t\tval.name = val.string;\n\t\t\t\t\t\t\tval.string = '';\n\t\t\t\t\t\t\tval.value_type = VALUE_UNSET;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t} else if( parse_context == CONTEXT_OBJECT_FIELD\n\t\t\t\t\t\t\t|| parse_context == CONTEXT_CLASS_FIELD  ) {\n\t\t\t\t\t\t\tif( parse_context == CONTEXT_CLASS_FIELD ) {\n\t\t\t\t\t\t\t\tif( !Object.keys( elements).length ) {\n\t\t\t\t\t\t\t\t\t console.log( \"This is a full object, not a class def...\", val.className );\n\t\t\t\t\t\t\t\tconst privateProto = ()=>{} \n\t\t\t\t\t\t\t\tlocalFromProtoTypes.set( context_stack.last.node.current_class.name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ protoCon:privateProto.prototype.constructor\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, cb: null }\n\t\t\t\t\t\t\t\t\t\t\t\t\t   );\n\t\t\t\t\t\t\t\telements = new privateProto();\n\t\t\t\t\t\t\t\tparse_context = CONTEXT_OBJECT_FIELD_VALUE\n\t\t\t\t\t\t\t\tval.name = val.string;\n\t\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t\t\tval.string = ''\n\t\t\t\t\t\t\t\tval.value_type = VALUE_UNSET;\n\t\t\t\t\t\t\t\tconsole.log( \"don't do default;s do a revive...\" );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif( word != WORD_POS_RESET\n\t\t\t\t\t\t\t\t   && word != WORD_POS_END\n\t\t\t\t\t\t\t\t   && word != WORD_POS_FIELD\n\t\t\t\t\t\t\t\t   && word != WORD_POS_AFTER_FIELD ) {\n\t\t\t\t\t\t\t\t\trecoverIdent( 32 );\n\t\t\t\t\t\t\t\t\t// allow starting a new word\n\t\t\t\t\t\t\t\t\t//status = false;\n\t\t\t\t\t\t\t\t\t//throwError( `fault while parsing; unquoted keyword used as object field name (state:${word})`, cInt );\n\t\t\t\t\t\t\t\t\t//break;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t\t\tval.name = val.string;\n\t\t\t\t\t\t\t\tval.string = '';\n\t\t\t\t\t\t\t\tparse_context = (parse_context===CONTEXT_OBJECT_FIELD)?CONTEXT_OBJECT_FIELD_VALUE:CONTEXT_CLASS_FIELD_VALUE;\n\t\t\t\t\t\t\t\tval.value_type = VALUE_UNSET;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if( parse_context == CONTEXT_UNKNOWN ){\n\t\t\t\t\t\t\tconsole.log( \"Override colon found, allow class redefinition\", parse_context );\n\t\t\t\t\t\t\tredefineClass = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( parse_context == CONTEXT_IN_ARRAY )\n\t\t\t\t\t\t\t\tthrowError(  \"(in array, got colon out of string):parsing fault;\", cInt );\n\t\t\t\t\t\t\telse if( parse_context == CONTEXT_OBJECT_FIELD_VALUE ){\n\t\t\t\t\t\t\t\tthrowError( \"String unexpected\", cInt );\n\t\t\t\t\t\t\t} else\n\t\t\t\t\t\t\t\tthrowError( \"(outside any object, got colon out of string):parsing fault;\", cInt );\n\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 125/*'}'*/:\n\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"close bracket context:\", word, parse_context, val.value_type, val.string );\n\t\t\t\t\t\tif( word == WORD_POS_END ) {\n\t\t\t\t\t\t\t// allow starting a new word\n\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// coming back after pushing an array or sub-object will reset the contxt to FIELD, so an end with a field should still push value.\n\t\t\t\t\t\tif( parse_context == CONTEXT_CLASS_FIELD ) {\n\t\t\t\t\t\t\tif( current_class ) {\n\t\t\t\t\t\t\t\t// allow blank comma at end to not be a field\n\t\t\t\t\t\t\t\tif(val.string) { current_class.fields.push( val.string ); }\n\n\t\t\t\t\t\t\t\tRESET_VAL();\n\t\t\t\t\t\t\t\tlet old_context = context_stack.pop();\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"close object:\", old_context, context_stack );\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_STACK && console.log( \"object pop stack (close obj)\", context_stack.length, old_context );\n\t\t\t\t\t\t\t\tparse_context = CONTEXT_UNKNOWN; // this will restore as IN_ARRAY or OBJECT_FIELD\n\t\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t\t\tval.name = old_context.name;\n\t\t\t\t\t\t\t\telements = old_context.elements;\n\t\t\t\t\t\t\t\t//element_array = old_context.element_array;\n\t\t\t\t\t\t\t\tcurrent_class = old_context.current_class;\n\t\t\t\t\t\t\t\tcurrent_class_field = old_context.current_class_field;\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"A Pop old class field counter:\", current_class_field, val.name );\n\t\t\t\t\t\t\t\tarrayType = old_context.arrayType;\n\t\t\t\t\t\t\t\tval.value_type = old_context.valueType;\n\t\t\t\t\t\t\t\tval.className = old_context.className;\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \" !!!!!C Pop Classname:\", val.className );\n\t\t\t\t\t\t\t\trootObject = null;\n\n\t\t\t\t\t\t\t\tdropContext( old_context );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthrowError( \"State error; gathering class fields, and lost the class\", cInt );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if( ( parse_context == CONTEXT_OBJECT_FIELD ) || ( parse_context == CONTEXT_CLASS_VALUE ) ) {\n\t\t\t\t\t\t\tif( val.value_type != VALUE_UNSET ) {\n\t\t\t\t\t\t\t\tif( current_class ) {\n\t\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"C Stepping current class field:\", current_class_field, val.name, arrayType );\n\t\t\t\t\t\t\t\t\tval.name = current_class.fields[current_class_field++];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"Closing object; set value name, and push...\", current_class_field, val );\n\t\t\t\t\t\t\t\tobjectPush();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"close object; empty object\", val, elements );\n\n\t\t\t\t\t\t\t\tval.value_type = VALUE_OBJECT;\n\t\t\t\t\t\t\t\tif( current_proto && current_proto.protoDef ) {\n\t\t\t\t\t\t\t\t\tconsole.log( \"SOMETHING SHOULD AHVE BEEN REPLACED HERE??\", current_proto );\n\t\t\t\t\t\t\t\t\tconsole.log( \"The other version only revives on init\" );\n\t\t\t\t\t\t\t\t\telements = new current_proto.protoDef.cb( elements, undefined, undefined );\n\t\t\t\t\t\t\t\t\t//elements = new current_proto.protoCon( elements );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tval.contains = elements;\n\t\t\t\t\t\t\t\tval.string = \"\";\n\n\t\t\t\t\t\t\tlet old_context = context_stack.pop();\n\t\t\t\t\t\t\t//_DEBUG_PARSING_STACK && console.log( \"object pop stack (close obj)\", context_stack.length, old_context );\n\t\t\t\t\t\t\tparse_context = old_context.context; // this will restore as IN_ARRAY or OBJECT_FIELD\n\t\t\t\t\t\t\tval.name = old_context.name;\n\t\t\t\t\t\t\telements = old_context.elements;\n\t\t\t\t\t\t\t//element_array = old_context.element_array;\n\t\t\t\t\t\t\tcurrent_class = old_context.current_class;\n\t\t\t\t\t\t\tcurrent_proto = old_context.current_proto;\n\t\t\t\t\t\t\tcurrent_class_field = old_context.current_class_field;\n\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"B Pop old class field counter:\", context_stack, current_class_field, val.name );\n\t\t\t\t\t\t\tarrayType = old_context.arrayType;\n\t\t\t\t\t\t\tval.value_type = old_context.valueType;\n\t\t\t\t\t\t\tval.className = old_context.className;\n\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \" !!!!!D Pop Classname:\", val.className );\n\t\t\t\t\t\t\tdropContext( old_context );\n\n\t\t\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN ) {\n\t\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if( ( parse_context == CONTEXT_OBJECT_FIELD_VALUE ) ) {\n\t\t\t\t\t\t\t// first, add the last value\n\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"close object; push item '%s' %d\", val.name, val.value_type );\n\t\t\t\t\t\t\tif( val.value_type === VALUE_UNSET ) {\n\t\t\t\t\t\t\t\tif( word == WORD_POS_RESET )\n\t\t\t\t\t\t\t\t\tthrowError( \"Fault while parsing; unexpected\", cInt );\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\trecoverIdent(cInt);\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tobjectPush();\n\t\t\t\t\t\t\tval.value_type = VALUE_OBJECT;\n\t\t\t\t\t\t\tval.contains = elements;\n\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\n\t\t\t\t\t\t\t//let old_context = context_stack.pop();\n\t\t\t\t\t\t\tlet old_context = context_stack.pop();\n\t\t\t\t\t\t\t//_DEBUG_PARSING_STACK  && console.log( \"object pop stack (close object)\", context_stack.length, old_context );\n\t\t\t\t\t\t\tparse_context = old_context.context; // this will restore as IN_ARRAY or OBJECT_FIELD\n\t\t\t\t\t\t\tval.name = old_context.name;\n\t\t\t\t\t\t\telements = old_context.elements;\n\t\t\t\t\t\t\tcurrent_proto = old_context.current_proto;\n\t\t\t\t\t\t\tcurrent_class = old_context.current_class;\n\t\t\t\t\t\t\tcurrent_class_field = old_context.current_class_field;\n\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"C Pop old class field counter:\", context_stack, current_class_field, val.name );\n\t\t\t\t\t\t\tarrayType = old_context.arrayType;\n\t\t\t\t\t\t\tval.value_type = old_context.valueType;\n\t\t\t\t\t\t\tval.className = old_context.className;\n\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \" !!!!!E Pop Classname:\", val.className );\n\t\t\t\t\t\t\t//element_array = old_context.element_array;\n\t\t\t\t\t\t\tdropContext( old_context );\n\t\t\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN ) {\n\t\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthrowError( \"Fault while parsing; unexpected\", cInt );\n\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnegative = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 93/*']'*/:\n\t\t\t\t\t\tif( word >= WORD_POS_AFTER_FIELD ) {\n\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif( parse_context == CONTEXT_IN_ARRAY ) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//_DEBUG_PARSING  && console.log( \"close array, push last element: %d\", val.value_type );\n\t\t\t\t\t\t\tif( val.value_type != VALUE_UNSET ) {\n\t\t\t\t\t\t\t\t// name is set when saving a context.\n\t\t\t\t\t\t\t\t// a better sanity check would be val.name === elements.length;\n\t\t\t\t\t\t\t\t//if( val.name ) if( val.name !== elements.length ) console.log( \"Ya this should blow up\" );\n\t\t\t\t\t\t\t\tarrayPush();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif( word !== WORD_POS_RESET ) {\n\t\t\t\t\t\t\t\t\trecoverIdent(cInt);\n\t\t\t\t\t\t\t\t\tarrayPush();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tval.contains = elements;\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet old_context = context_stack.pop();\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_STACK  && console.log( \"object pop stack (close array)\", context_stack.length );\n\t\t\t\t\t\t\t\tval.name = old_context.name;\n\t\t\t\t\t\t\t\tval.className = old_context.className;\n\t\t\t\t\t\t\t\tparse_context = old_context.context;\n\t\t\t\t\t\t\t\telements = old_context.elements;\n\t\t\t\t\t\t\t\t//element_array = old_context.element_array;\n\t\t\t\t\t\t\t\tcurrent_proto = old_context.current_proto;\n\t\t\t\t\t\t\t\tcurrent_class = old_context.current_class;\n\t\t\t\t\t\t\t\tcurrent_class_field = old_context.current_class_field;\n\t\t\t\t\t\t\t\tarrayType = old_context.arrayType;\n\t\t\t\t\t\t\t\tval.value_type = old_context.valueType;\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"close array:\", old_context );\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"D Pop old class field counter:\", context_stack, current_class_field, val );\n\t\t\t\t\t\t\t\tdropContext( old_context );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tval.value_type = VALUE_ARRAY;\n\t\t\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN ) {\n\t\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthrowError( `bad context ${parse_context}; fault while parsing`, cInt );// fault\n\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnegative = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 44/*','*/:\n\t\t\t\t\t\tif( word < WORD_POS_AFTER_FIELD && word != WORD_POS_RESET ) {\n\t\t\t\t\t\t\trecoverIdent(cInt);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif( word == WORD_POS_END || word == WORD_POS_FIELD ) word = WORD_POS_RESET;  // allow collect new keyword\n\t\t\t\t\t\t//if(//_DEBUG_PARSING) \n\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"comma context:\", parse_context, val );\n\t\t\t\t\t\tif( parse_context == CONTEXT_CLASS_FIELD ) {\n\t\t\t\t\t\t\tif( current_class ) {\n\t\t\t\t\t\t\t\t//console.log( \"Saving field name(set word to IS A FIELD):\", val.string );\n\t\t\t\t\t\t\t\tcurrent_class.fields.push( val.string );\n\t\t\t\t\t\t\t\tval.string = '';\n\t\t\t\t\t\t\t\tword = WORD_POS_FIELD;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthrowError( \"State error; gathering class fields, and lost the class\", cInt );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if( parse_context == CONTEXT_OBJECT_FIELD ) {\n\t\t\t\t\t\t\tif( current_class ) {\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"D Stepping current class field:\", current_class_field, val.name );\n\t\t\t\t\t\t\t\tval.name = current_class.fields[current_class_field++];\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"should have a completed value at a comma.:\", current_class_field, val );\n\t\t\t\t\t\t\t\tif( val.value_type != VALUE_UNSET ) {\n\t\t\t\t\t\t\t\t\t//_DEBUG_PARSING  && console.log( \"pushing object field:\", val );\n\t\t\t\t\t\t\t\t\tobjectPush();\n\t\t\t\t\t\t\t\t\tRESET_VAL();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// this is an empty comma...\n\t\t\t\t\t\t\t\tif( val.string || val.value_type )\n\t\t\t\t\t\t\t\t\tthrowError( \"State error; comma in field name and/or lost the class\", cInt );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if( parse_context == CONTEXT_CLASS_VALUE ) {\n\t\t\t\t\t\t\tif( current_class ) {\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"reviving values in class...\", arrayType, current_class.fields[current_class_field ], val );\n\t\t\t\t\t\t\t\tif( arrayType != -3 && !val.name ) {\n\t\t\t\t\t\t\t\t\t// this should have still had a name....\n\t\t\t\t\t\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"E Stepping current class field:\", current_class_field, val, arrayType );\n\t\t\t\t\t\t\t\t\tval.name = current_class.fields[current_class_field++];\n\t\t\t\t\t\t\t\t\t//else val.name = current_class.fields[current_class_field++];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"should have a completed value at a comma.:\", current_class_field, val );\n\t\t\t\t\t\t\t\tif( val.value_type != VALUE_UNSET ) {\n\t\t\t\t\t\t\t\t\tif( arrayType != -3 )\n\t\t\t\t\t\t\t\t\t\tobjectPush();\n\t\t\t\t\t\t\t\t\tRESET_VAL();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif( val.value_type != VALUE_UNSET ) {\n\t\t\t\t\t\t\t\t\tobjectPush();\n\t\t\t\t\t\t\t\t\tRESET_VAL();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//throwError( \"State error; gathering class values, and lost the class\", cInt );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tval.name = null;\n\t\t\t\t\t\t} else if( parse_context == CONTEXT_IN_ARRAY ) {\n\t\t\t\t\t\t\tif( val.value_type == VALUE_UNSET )\n\t\t\t\t\t\t\t\tval.value_type = VALUE_EMPTY; // in an array, elements after a comma should init as undefined...\n\n\t\t\t\t\t\t\t//_DEBUG_PARSING  && console.log( \"back in array; push item %d\", val.value_type );\n\t\t\t\t\t\t\tarrayPush();\n\t\t\t\t\t\t\tRESET_VAL();\n\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t\t// undefined allows [,,,] to be 4 values and [1,2,3,] to be 4 values with an undefined at end.\n\t\t\t\t\t\t} else if( parse_context == CONTEXT_OBJECT_FIELD_VALUE && val.value_type != VALUE_UNSET ) {\n\t\t\t\t\t\t\t// after an array value, it will have returned to OBJECT_FIELD anyway\n\t\t\t\t\t\t\t//_DEBUG_PARSING  && console.log( \"comma after field value, push field to object: %s\", val.name, val.value_type );\n\t\t\t\t\t\t\tparse_context = CONTEXT_OBJECT_FIELD;\n\t\t\t\t\t\t\tif( val.value_type != VALUE_UNSET ) {\n\t\t\t\t\t\t\t\tobjectPush();\n\t\t\t\t\t\t\t\tRESET_VAL();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\tthrowError( \"bad context; excessive commas while parsing;\", cInt );// fault\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnegative = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tswitch( cInt ) {\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\tif( ( parse_context == CONTEXT_UNKNOWN )\n\t\t\t\t\t\t  || ( parse_context == CONTEXT_OBJECT_FIELD_VALUE && word == WORD_POS_FIELD )\n\t\t\t\t\t\t  || ( ( parse_context == CONTEXT_OBJECT_FIELD ) || word == WORD_POS_FIELD )\n\t\t\t\t\t\t  || ( parse_context == CONTEXT_CLASS_FIELD ) ) {\n\t\t\t\t\t\t\tswitch( cInt ) {\n\t\t\t\t\t\t\tcase 96://'`':\n\t\t\t\t\t\t\tcase 34://'\"':\n\t\t\t\t\t\t\tcase 39://'\\'':\n\t\t\t\t\t\t\t\tif( word == WORD_POS_RESET || word == WORD_POS_FIELD ) {\n\t\t\t\t\t\t\t\t\tif( val.string.length ) {\n\t\t\t\t\t\t\t\t\t\tconsole.log( \"IN ARRAY AND FIXING?\" );\n\t\t\t\t\t\t\t\t\t\tval.className = val.string;\n\t\t\t\t\t\t\t\t\t\tval.string = '';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tlet string_status = gatherString(cInt );\n\t\t\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"string gather for object field name :\", val.string, string_status );\n\t\t\t\t\t\t\t\t\tif( string_status ) {\n\t\t\t\t\t\t\t\t\t\tval.value_type = VALUE_STRING;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tgatheringStringFirstChar = cInt;\n\t\t\t\t\t\t\t\t\t\tgatheringString = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthrowError( \"fault while parsing; quote not at start of field name\", cInt );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 10://'\\n':\n\t\t\t\t\t\t\t\tpos.line++;\n\t\t\t\t\t\t\t\tpos.col = 1;\n\t\t\t\t\t\t\t\t// fall through to normal space handling - just updated line/col position\n\t\t\t\t\t\t\tcase 13://'\\r':\n\t\t\t\t\t\t\tcase 32://' ':\n\t\t\t\t\t\t\tcase 0x2028://' ':\n\t\t\t\t\t\t\tcase 0x2029://' ':\n\t\t\t\t\t\t\tcase 9://'\\t':\n\t\t\t\t\t\t\tcase 0xFEFF: // ZWNBS is WS though\n\t\t\t\t\t\t\t\t //_DEBUG_WHITESPACE  && console.log( \"THIS SPACE\", word, parse_context, val );\n\t\t\t\t\t\t\t\tif( parse_context === CONTEXT_UNKNOWN && word === WORD_POS_END ) { // allow collect new keyword\n\t\t\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t\t\t\tif( parse_context === CONTEXT_UNKNOWN ) {\n\t\t\t\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif( word === WORD_POS_RESET || word === WORD_POS_AFTER_FIELD ) { // ignore leading and trailing whitepsace\n\t\t\t\t\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN && val.value_type ) {\n\t\t\t\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if( word === WORD_POS_FIELD ) {\n\t\t\t\t\t\t\t\t\tif( parse_context === CONTEXT_UNKNOWN ) {\n\t\t\t\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif( val.string.length )\n\t\t\t\t\t\t\t\t\t\tconsole.log( \"STEP TO NEXT TOKEN.\" );\n\t\t\t\t\t\t\t\t\t\tword = WORD_POS_AFTER_FIELD;\n\t\t\t\t\t\t\t\t\t\t//val.className = val.string; val.string = '';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\t\t\tthrowError( \"fault while parsing; whitepsace unexpected\", cInt );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// skip whitespace\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t//if( /((\\n|\\r|\\t)|s|S|[ \\{\\}\\(\\)\\<\\>\\!\\+-\\*\\/\\.\\:\\, ])/.\n\t\t\t\t\t\t\t\tif( testNonIdentifierCharacters ) {\n\t\t\t\t\t\t\t\tlet identRow = nonIdent.find( row=>(row.firstChar >= cInt )&& (row.lastChar > cInt) )\n\t\t\t\t\t\t\t\tif( identRow && ( identRow.bits[(cInt - identRow.firstChar) / 24]\n\t\t\t\t\t\t\t\t    & (1 << ((cInt - identRow.firstChar) % 24)))) {\n\t\t\t\t\t\t\t\t//if( nonIdent[(cInt/(24*16))|0] && nonIdent[(cInt/(24*16))|0][(( cInt % (24*16) )/24)|0] & ( 1 << (cInt%24)) ) {\n\t\t\t\t\t\t\t\t\t// invalid start/continue\n\t\t\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\t\t\tthrowError( `fault while parsing object field name; \\\\u${cInt}`, cInt );\t// fault\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//console.log( \"TICK\" );\n\t\t\t\t\t\t\t\tif( word == WORD_POS_RESET && ( ( cInt >= 48/*'0'*/ && cInt <= 57/*'9'*/ ) || ( cInt == 43/*'+'*/ ) || ( cInt == 46/*'.'*/ ) || ( cInt == 45/*'-'*/ ) ) ) {\n\t\t\t\t\t\t\t\t\tfromHex = false;\n\t\t\t\t\t\t\t\t\texponent = false;\n\t\t\t\t\t\t\t\t\tdate_format = false;\n\t\t\t\t\t\t\t\t\tisBigInt = false;\n\n\t\t\t\t\t\t\t\t\texponent_sign = false;\n\t\t\t\t\t\t\t\t\texponent_digit = false;\n\t\t\t\t\t\t\t\t\tdecimal = false;\n\t\t\t\t\t\t\t\t\tval.string = str;\n\t\t\t\t\t\t\t\t\tinput.n = n;\n\t\t\t\t\t\t\t\t\tcollectNumber();\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif( word === WORD_POS_AFTER_FIELD ) {\n\t\t\t\t\t\t\t\t\tstatus = false;\n\t\t\t\t\t\t\t\t\tthrowError( \"fault while parsing; character unexpected\", cInt );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif( word === WORD_POS_RESET ) {\n\t\t\t\t\t\t\t\t\tword = WORD_POS_FIELD;\n\t\t\t\t\t\t\t\t\tval.value_type = VALUE_STRING;\n\t\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\t\t//_DEBUG_PARSING  && console.log( \"START/CONTINUE IDENTIFER\" );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}     \n\t\t\t\t\t\t\t\tif( val.value_type == VALUE_UNSET ) {\n\t\t\t\t\t\t\t\t\tif( word !== WORD_POS_RESET && word !== WORD_POS_END )\n\t\t\t\t\t\t\t\t\t\trecoverIdent( cInt );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif( word === WORD_POS_END || word === WORD_POS_FIELD ) {\n\t\t\t\t\t\t\t\t\t\t// final word of the line... \n\t\t\t\t\t\t\t\t\t\t// whispace changes the 'word' state to not 'end'\n\t\t\t\t\t\t\t\t\t\t// until the next character, which may restore it to\n\t\t\t\t\t\t\t\t\t\t// 'end' and this will resume collecting the same string.\n\t\t\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif( parse_context == CONTEXT_OBJECT_FIELD ) {\n\t\t\t\t\t\t\t\t\t\tif( word == WORD_POS_FIELD ) {\n\t\t\t\t\t\t\t\t\t\t\tval.string+=str;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tthrowError( \"Multiple values found in field name\", cInt );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif( parse_context == CONTEXT_OBJECT_FIELD_VALUE ) {\n\t\t\t\t\t\t\t\t\t\tthrowError( \"String unexpected\", cInt );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak; // default\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET && ( ( cInt >= 48/*'0'*/ && cInt <= 57/*'9'*/ ) || ( cInt == 43/*'+'*/ ) || ( cInt == 46/*'.'*/ ) || ( cInt == 45/*'-'*/ ) ) ) {\n\t\t\t\t\t\t\t\tfromHex = false;\n\t\t\t\t\t\t\t\texponent = false;\n\t\t\t\t\t\t\t\tdate_format = false;\n\t\t\t\t\t\t\t\tisBigInt = false;\n\n\t\t\t\t\t\t\t\texponent_sign = false;\n\t\t\t\t\t\t\t\texponent_digit = false;\n\t\t\t\t\t\t\t\tdecimal = false;\n\t\t\t\t\t\t\t\tval.string = str;\n\t\t\t\t\t\t\t\tinput.n = n;\n\t\t\t\t\t\t\t\tcollectNumber();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t//console.log( \"TICK\")\n\t\t\t\t\t\t\t\tif( val.value_type == VALUE_UNSET ) {\n\t\t\t\t\t\t\t\t\tif( word != WORD_POS_RESET ) {\n\t\t\t\t\t\t\t\t\t\trecoverIdent( cInt );\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tword = WORD_POS_END;\n\t\t\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\t\t\tval.value_type = VALUE_STRING;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif( parse_context == CONTEXT_OBJECT_FIELD ) {\n\t\t\t\t\t\t\t\t\t\tthrowError( \"Multiple values found in field name\", cInt );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if( parse_context == CONTEXT_OBJECT_FIELD_VALUE ) {\n\n\t\t\t\t\t\t\t\t\t\tif( val.value_type != VALUE_STRING ) {\n\t\t\t\t\t\t\t\t\t\t\tif( val.value_type == VALUE_OBJECT || val.value_type == VALUE_ARRAY ){\n\t\t\t\t\t\t\t\t\t\t\t\tthrowError( \"String unexpected\", cInt );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\trecoverIdent(cInt);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif( word == WORD_POS_AFTER_FIELD ){\n\t\t\t\t\t\t\t\t\t\t\tconst  protoDef = getProto();\n\t\t\t\t\t\t\t\t\t\t\tif( protoDef){\n\t\t\t\t\t\t\t\t\t\t\t\tword == WORD_POS_END; // last string.\n\t\t\t\t\t\t\t\t\t\t\t\tval.string = str;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\telse \n\t\t\t\t\t\t\t\t\t\t\t\tthrowError( \"String unexpected\", cInt );\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tif( word == WORD_POS_END ) {\n\t\t\t\t\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\t\t\t\t}else\n\t\t\t\t\t\t\t\t\t\t\t\tthrowError( \"String unexpected\", cInt );\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if( parse_context == CONTEXT_IN_ARRAY ) {\n\t\t\t\t\t\t\t\t\t\tif( word == WORD_POS_AFTER_FIELD ){\n\t\t\t\t\t\t\t\t\t\t\tif( !val.className ){\n\t\t\t\t\t\t\t\t\t\t\t\t//\tgetProto()\n\t\t\t\t\t\t\t\t\t\t\t\tval.className = val.string;\n\t\t\t\t\t\t\t\t\t\t\t\tval.string = '';\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tif( word == WORD_POS_END )\n\t\t\t\t\t\t\t\t\t\t\t\tval.string += str;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t//recoverIdent(cInt);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak; // default\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 96://'`':\n\t\t\t\t\t\tcase 34://'\"':\n\t\t\t\t\t\tcase 39://'\\'':\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif( val.string ) val.className = val.string; val.string = '';\n\t\t\t\t\t\t\tlet string_status = gatherString( cInt );\n\t\t\t\t\t\t\t//_DEBUG_PARSING && console.log( \"string gather for object field value :\", val.string, string_status, completed, input.n, buf.length );\n\t\t\t\t\t\t\tif( string_status ) {\n\t\t\t\t\t\t\t\tval.value_type = VALUE_STRING;\n\t\t\t\t\t\t\t\tword = WORD_POS_END;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tgatheringStringFirstChar = cInt;\n\t\t\t\t\t\t\t\tgatheringString = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 10://'\\n':\n\t\t\t\t\t\t\tpos.line++;\n\t\t\t\t\t\t\tpos.col = 1;\n\t\t\t\t\t\t\t//falls through\n\t\t\t\t\t\tcase 32://' ':\n\t\t\t\t\t\tcase 9://'\\t':\n\t\t\t\t\t\tcase 13://'\\r':\n\t\t\t\t\t\tcase 0x2028: // LS (Line separator)\n\t\t\t\t\t\tcase 0x2029: // PS (paragraph separate)\n\t\t\t\t\t\tcase 0xFEFF://'\\uFEFF':\n\t\t\t\t\t\t\t//_DEBUG_WHITESPACE && console.log( \"Whitespace...\", word, parse_context );\n\t\t\t\t\t\t\tif( word == WORD_POS_END ) {\n\t\t\t\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN ) {\n\t\t\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t} else if( parse_context == CONTEXT_OBJECT_FIELD_VALUE ) {\n\t\t\t\t\t\t\t\t\tword = WORD_POS_AFTER_FIELD_VALUE;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t} else if( parse_context == CONTEXT_OBJECT_FIELD ) {\n\t\t\t\t\t\t\t\t\tword = WORD_POS_AFTER_FIELD;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t} else if( parse_context == CONTEXT_IN_ARRAY ) {\n\t\t\t\t\t\t\t\t\tword = WORD_POS_AFTER_FIELD;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET || ( word == WORD_POS_AFTER_FIELD ))\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\telse if( word == WORD_POS_FIELD ) {\n\t\t\t\t\t\t\t\tif( val.string.length )\n\t\t\t\t\t\t\t\t\tword = WORD_POS_AFTER_FIELD;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tif( word < WORD_POS_END ) \n\t\t\t\t\t\t\t\t\trecoverIdent( cInt );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t//----------------------------------------------------------\n\t\t\t\t\t//  catch characters for true/false/null/undefined which are values outside of quotes\n\t\t\t\t\t\tcase 116://'t':\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET ) word = WORD_POS_TRUE_1;\n\t\t\t\t\t\t\telse if( word == WORD_POS_INFINITY_6 ) word = WORD_POS_INFINITY_7;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 114://'r':\n\t\t\t\t\t\t\tif( word == WORD_POS_TRUE_1 ) word = WORD_POS_TRUE_2;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 117://'u':\n\t\t\t\t\t\t\tif( word == WORD_POS_TRUE_2 ) word = WORD_POS_TRUE_3;\n\t\t\t\t\t\t\telse if( word == WORD_POS_NULL_1 ) word = WORD_POS_NULL_2;\n\t\t\t\t\t\t\telse if( word == WORD_POS_RESET ) word = WORD_POS_UNDEFINED_1;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 101://'e':\n\t\t\t\t\t\t\tif( word == WORD_POS_TRUE_3 ) {\n\t\t\t\t\t\t\t\tval.value_type = VALUE_TRUE;\n\t\t\t\t\t\t\t\tword = WORD_POS_END;\n\t\t\t\t\t\t\t} else if( word == WORD_POS_FALSE_4 ) {\n\t\t\t\t\t\t\t\tval.value_type = VALUE_FALSE;\n\t\t\t\t\t\t\t\tword = WORD_POS_END;\n\t\t\t\t\t\t\t} else if( word == WORD_POS_UNDEFINED_3 ) word = WORD_POS_UNDEFINED_4;\n\t\t\t\t\t\t\telse if( word == WORD_POS_UNDEFINED_7 ) word = WORD_POS_UNDEFINED_8;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 110://'n':\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET ) word = WORD_POS_NULL_1;\n\t\t\t\t\t\t\telse if( word == WORD_POS_UNDEFINED_1 ) word = WORD_POS_UNDEFINED_2;\n\t\t\t\t\t\t\telse if( word == WORD_POS_UNDEFINED_6 ) word = WORD_POS_UNDEFINED_7;\n\t\t\t\t\t\t\telse if( word == WORD_POS_INFINITY_1 ) word = WORD_POS_INFINITY_2;\n\t\t\t\t\t\t\telse if( word == WORD_POS_INFINITY_4 ) word = WORD_POS_INFINITY_5;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 100://'d':\n\t\t\t\t\t\t\tif( word == WORD_POS_UNDEFINED_2 ) word = WORD_POS_UNDEFINED_3;\n\t\t\t\t\t\t\telse if( word == WORD_POS_UNDEFINED_8 ) { val.value_type=VALUE_UNDEFINED; word = WORD_POS_END; }\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 105://'i':\n\t\t\t\t\t\t\tif( word == WORD_POS_UNDEFINED_5 ) word = WORD_POS_UNDEFINED_6;\n\t\t\t\t\t\t\telse if( word == WORD_POS_INFINITY_3 ) word = WORD_POS_INFINITY_4;\n\t\t\t\t\t\t\telse if( word == WORD_POS_INFINITY_5 ) word = WORD_POS_INFINITY_6;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 108://'l':\n\t\t\t\t\t\t\tif( word == WORD_POS_NULL_2 ) word = WORD_POS_NULL_3;\n\t\t\t\t\t\t\telse if( word == WORD_POS_NULL_3 ) {\n\t\t\t\t\t\t\t\tval.value_type = VALUE_NULL;\n\t\t\t\t\t\t\t\tword = WORD_POS_END;\n\t\t\t\t\t\t\t} else if( word == WORD_POS_FALSE_2 ) word = WORD_POS_FALSE_3;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 102://'f':\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET ) word = WORD_POS_FALSE_1;\n\t\t\t\t\t\t\telse if( word == WORD_POS_UNDEFINED_4 ) word = WORD_POS_UNDEFINED_5;\n\t\t\t\t\t\t\telse if( word == WORD_POS_INFINITY_2 ) word = WORD_POS_INFINITY_3;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 97://'a':\n\t\t\t\t\t\t\tif( word == WORD_POS_FALSE_1 ) word = WORD_POS_FALSE_2;\n\t\t\t\t\t\t\telse if( word == WORD_POS_NAN_1 ) word = WORD_POS_NAN_2;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 115://'s':\n\t\t\t\t\t\t\tif( word == WORD_POS_FALSE_3 ) word = WORD_POS_FALSE_4;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 73://'I':\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET ) word = WORD_POS_INFINITY_1;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 78://'N':\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET ) word = WORD_POS_NAN_1;\n\t\t\t\t\t\t\telse if( word == WORD_POS_NAN_2 ) { val.value_type = negative ? VALUE_NEG_NAN : VALUE_NAN; negative = false; word = WORD_POS_END; }\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 121://'y':\n\t\t\t\t\t\t\tif( word == WORD_POS_INFINITY_7 ) { val.value_type = negative ? VALUE_NEG_INFINITY : VALUE_INFINITY; negative = false; word = WORD_POS_END; }\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 45://'-':\n\t\t\t\t\t\t\tif( word == WORD_POS_RESET ) negative = !negative;\n\t\t\t\t\t\t\telse { recoverIdent(cInt); }// fault\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 43://'+':\n\t\t\t\t\t\t\tif( word !== WORD_POS_RESET ) { recoverIdent(cInt); }\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak; // default of high level switch\n\t\t\t\t\t//\n\t\t\t\t\t//----------------------------------------------------------\n\t\t\t\t\t}\n\t\t\t\t\tif( completed ) {\n\t\t\t\t\t\tif( word == WORD_POS_END ) {\n\t\t\t\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif( n == buf.length ) {\n\t\t\t\t\tdropBuffer( input );\n\t\t\t\t\tif( val.value_type == VALUE_UNSET && ( complete_at_end && word != WORD_POS_RESET ) ) {\n\t\t\t\t\t\trecoverIdent( 32 ); // whitespace isn't appended...\n\t\t\t\t\t}\n\t\t\t\t\tif( gatheringString || gatheringNumber || parse_context == CONTEXT_OBJECT_FIELD ) {\n\t\t\t\t\t\tretval = 0;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif( parse_context == CONTEXT_UNKNOWN && ( val.value_type != VALUE_UNSET || result ) ) {\n\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\tretval = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// put these back into the stack.\n\t\t\t\t\tinput.n = n;\n\t\t\t\t\tinQueue.unshift( input );\n\t\t\t\t\tretval = 2;  // if returning buffers, then obviously there's more in this one.\n\t\t\t\t}\n\t\t\t\tif( completed ) {\n\t\t\t\t\trootObject = null;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif( !status ) return -1;\n\t\t\tif( completed && val.value_type != VALUE_UNSET ) {\n\t\t\t\tword = WORD_POS_RESET;\n\t\t\t\tresult = convertValue();\n\t\t\t\t//_DEBUG_PARSING && console.log( \"Result(3):\", result );\n\t\t\t\tnegative = false;\n\t\t\t\tval.string = '';\n\t\t\t\tval.value_type = VALUE_UNSET;\n\t\t\t}\n\t\t\tcompleted = false;\n\t\t\treturn retval;\n\t\t}\n\t}\n}\n\n\n\nconst _parser = [Object.freeze( JSOX.begin() )];\nlet _parse_level = 0;\n/**\n * parse a string resulting with one value from it.\n *\n * @template T\n * @param {string} msg \n * @param {(this: any, key: string, value: any) => any} [reviver] \n * @returns {T}\n */\nJSOX.parse = function( msg, reviver ) {\n\tlet parse_level = _parse_level++;\n\tlet parser;\n\tif( _parser.length <= parse_level )\n\t\t_parser.push( Object.freeze( JSOX.begin() ) );\n\tparser = _parser[parse_level];\n\tif (typeof msg !== \"string\") msg = String(msg);\n\tparser.reset();\n\tconst writeResult = parser._write( msg, true );\n\tif( writeResult > 0 ) {\n\t\tif( writeResult > 1 ){\n\t\t\t// probably a carriage return.\n\t\t\t//console.log( \"Extra data at end of message\");\n\t\t}\n\t\tlet result = parser.value();\n\t\tif( ( \"undefined\" === typeof result ) && writeResult > 1 ){\n\t\t\tthrow new Error( \"Pending value could not complete\");\n\t\t}\n\n\t\tresult = typeof reviver === 'function' ? (function walk(holder, key) {\n\t\t\tlet k, v, value = holder[key];\n\t\t\tif (value && typeof value === 'object') {\n\t\t\t\tfor (k in value) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(value, k)) {\n\t\t\t\t\t\tv = walk(value, k);\n\t\t\t\t\t\tif (v !== undefined) {\n\t\t\t\t\t\t\tvalue[k] = v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdelete value[k];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn reviver.call(holder, key, value);\n\t\t}({'': result}, '')) : result;\n\t\t_parse_level--;\n\t\treturn result;\n\t}\n\tparser.finalError();\n\treturn undefined;\n}\n\n\nfunction this_value() {/*//_DEBUG_STRINGIFY&&console.log( \"this:\", this, \"valueof:\", this&&this.valueOf() );*/ \n\treturn this&&this.valueOf();\n}\n\n/**\n * Define a class to be used for serialization; the class allows emitting the class fields ahead of time, and just provide values later.\n * @param {string} name \n * @param {object} obj \n */\nJSOX.defineClass = function( name, obj ) {\n\tlet cls;\n\tlet denormKeys = Object.keys(obj);\n\tfor( let i = 1; i < denormKeys.length; i++ ) {\n\t\tlet a, b;\n\t\tif( ( a = denormKeys[i-1] ) > ( b = denormKeys[i] ) ) {\n\t\t\tdenormKeys[i-1] = b;\n\t\t\tdenormKeys[i] = a;\n\t\t\tif( i ) i-=2; // go back 2, this might need to go further pack.\n\t\t\telse i--; // only 1 to check.\n\t\t}\n\t}\n\t//console.log( \"normalized:\", denormKeys );\n\tcommonClasses.push( cls = { name : name\n\t\t   , tag:denormKeys.toString()\n\t\t   , proto : Object.getPrototypeOf(obj)\n\t\t   , fields : Object.keys(obj) } );\n\tfor(let n = 1; n < cls.fields.length; n++) {\n\t\tif( cls.fields[n] < cls.fields[n-1] ) {\n\t\t\tlet tmp = cls.fields[n-1];\n\t\t\tcls.fields[n-1] = cls.fields[n];\n\t\t\tcls.fields[n] = tmp;\n\t\t\tif( n > 1 )\n\t\t\t\tn-=2;\n\t\t}\n\t}\n\tif( cls.proto === Object.getPrototypeOf( {} ) ) cls.proto = null;\n}\n\n/**\n * deprecated; define a class to be used for serialization\n *\n * @param {string} named\n * @param {class} ptype\n * @param {(any)=>any} f\n */\nJSOX.registerToJSOX = function( name, ptype, f ) {\n\tthrow new Error( \"registerToJSOX deprecated; please use toJSOX:\" + prototypeName + prototype.toString() );\n}\n\n/**\n * define a class with special serialization rules.\n *\n * @param {string} named\n * @param {class} ptype\n * @param {(any)=>any} f\n */\nJSOX.toJSOX = function( name, ptype, f ) {\n\t//console.log( \"SET OBJECT TYPE:\", ptype, ptype.prototype, Object.prototype, ptype.constructor );\n\tif( !ptype.prototype || ptype.prototype !== Object.prototype ) {\n\t\tif( toProtoTypes.get(ptype.prototype) ) throw new Error( \"Existing toJSOX has been registered for prototype\" );\n\t\t//_DEBUG_PARSING && console.log( \"PUSH PROTOTYPE\" );\n\t\ttoProtoTypes.set( ptype.prototype, { external:true, name:name||f.constructor.name, cb:f } );\n\t} else {\n\t\tlet key = Object.keys( ptype ).toString();\n\t\tif( toObjectTypes.get(key) ) throw new Error( \"Existing toJSOX has been registered for object type\" );\n\t\t//console.log( \"TEST SET OBJECT TYPE:\", key );\n\t\ttoObjectTypes.set( key, { external:true, name:name, cb:f } );\n\t}\n}\n\n/**\n * define a class to be used for deserialization\n * @param {string} prototypeName \n * @param {class} o \n * @param {(any)=>any} f \n */\nJSOX.fromJSOX = function( prototypeName, o, f ) {\n\tfunction privateProto() { }\n\t\tif( !o ) o = privateProto.prototype;\n\t\tif( fromProtoTypes.get(prototypeName) ) throw new Error( \"Existing fromJSOX has been registered for prototype\" );\n\t\tif( o && !(\"constructor\" in o )){\n\t\t\tthrow new Error( \"Please pass a prototype like thing...\");\n\t}\n\tfromProtoTypes.set( prototypeName, {protoCon: o.prototype.constructor, cb:f } );\n\n}\n\n\n/**\n * deprecated; use fromJSOX instead\n */\nJSOX.registerFromJSOX = function( prototypeName, o /*, f*/ ) {\n\tthrow new Error( \"deprecated; please adjust code to use fromJSOX:\" + prototypeName + o.toString() );\n}\n\n/**\n * Define serialization and deserialization methods for a class.\n * This is the same as registering separately with toJSOX and fromJSOX methods.\n * \n * @param {string} name - Name used to prefix objects of this type encoded in JSOX\n * @param {class} prototype - prototype to match when serializing, and to create instaces of when deserializing.\n * @param {(stringifier:JSOXStringifier)=>{string}} to - `this` is the value to convert; function to call to encode JSOX from an object\n * @param {(field:string,val:any)=>{any}} from - handle storing revived value in class\n */\nJSOX.addType = function( prototypeName, prototype, to, from ) {\n\tJSOX.toJSOX( prototypeName, prototype, to );\n\tJSOX.fromJSOX( prototypeName, prototype, from );\n}\n\nJSOX.registerToFrom = function( prototypeName, prototype/*, to, from*/ ) {\n\tthrow new Error( \"registerToFrom deprecated; please use addType:\" + prototypeName + prototype.toString() );\n}\n\n/**\n * Create a stringifier to convert objects to JSOX text.  Allows defining custom serialization for objects.\n * @returns {JSOXStringifier}\n */\nJSOX.stringifier = function() {\n\tlet classes = [];\n\tlet useQuote = '\"';\n\n\tlet fieldMap = new WeakMap();\n\tconst path = [];\n\tlet encoding = [];\n\tconst localToProtoTypes = new WeakMap();\n\tconst localToObjectTypes = new Map();\n\tlet objectToJSOX = null;\n\tconst stringifying = []; // things that have been stringified through external toJSOX; allows second pass to skip this toJSOX pass and encode 'normally'\n\tlet ignoreNonEnumerable = false;\n\tfunction getIdentifier(s) {\n\t\n\t\tif( ( \"string\" === typeof s ) && s === '' ) return '\"\"';\n\t\tif( ( \"number\" === typeof s ) && !isNaN( s ) ) {\n\t\t\treturn [\"'\",s.toString(),\"'\"].join('');\n\t\t}\n\t\t// should check also for if any non ident in string...\n\t\tif( s.includes( \"\\u{FEFF}\" ) ) return (useQuote + JSOX.escape(s) +useQuote);\n\t\treturn ( ( s in keywords /* [ \"true\",\"false\",\"null\",\"NaN\",\"Infinity\",\"undefined\"].find( keyword=>keyword===s )*/\n\t\t\t|| /[0-9\\-]/.test(s[0])\n\t\t\t|| /[\\n\\r\\t #\\[\\]{}()<>\\~!+*/.:,\\-\"'`]/.test( s ) )?(useQuote + JSOX.escape(s) +useQuote):s )\n\t}\n\n\n\t/* init prototypes */\n\tif( !toProtoTypes.get( Object.prototype ) )\n\t{\n\t\ttoProtoTypes.set( Object.prototype, { external:false, name:Object.prototype.constructor.name, cb:null } );\n\t   \n\t\t// function https://stackoverflow.com/a/17415677/4619267\n\t\ttoProtoTypes.set( Date.prototype, { external:false,\n\t\t\tname : \"Date\",\n\t\t\tcb : function () {\n\t\t\t\t\tif( this.getTime()=== -62167219200000) \n\t\t\t\t\t{\n\t\t\t\t\t\treturn \"0000-01-01T00:00:00.000Z\";\n\t\t\t\t\t}\n\t\t\t\t\tlet tzo = -this.getTimezoneOffset(),\n\t\t\t\t\tdif = tzo >= 0 ? '+' : '-',\n\t\t\t\t\tpad = function(num) {\n\t\t\t\t\t\tlet norm = Math.floor(Math.abs(num));\n\t\t\t\t\t\treturn (norm < 10 ? '0' : '') + norm;\n\t\t\t\t\t},\n\t\t\t\t\tpad3 = function(num) {\n\t\t\t\t\t\tlet norm = Math.floor(Math.abs(num));\n\t\t\t\t\t\treturn (norm < 100 ? '0' : '') + (norm < 10 ? '0' : '') + norm;\n\t\t\t\t\t};\n\t\t\t\treturn [this.getFullYear() ,\n\t\t\t\t\t'-' , pad(this.getMonth() + 1) ,\n\t\t\t\t\t'-' , pad(this.getDate()) ,\n\t\t\t\t\t'T' , pad(this.getHours()) ,\n\t\t\t\t\t':' , pad(this.getMinutes()) ,\n\t\t\t\t\t':' , pad(this.getSeconds()) ,\n\t\t\t\t\t'.' + pad3(this.getMilliseconds()) +\n\t\t\t\t\tdif , pad(tzo / 60) ,\n\t\t\t\t\t':' , pad(tzo % 60)].join(\"\");\n\t\t\t} \n\t\t} );\n\t\ttoProtoTypes.set( DateNS.prototype, { external:false,\n\t\t\tname : \"DateNS\",\n\t\t\tcb : function () {\n\t\t\t\tlet tzo = -this.getTimezoneOffset(),\n\t\t\t\t\tdif = tzo >= 0 ? '+' : '-',\n\t\t\t\t\tpad = function(num) {\n\t\t\t\t\t\tlet norm = Math.floor(Math.abs(num));\n\t\t\t\t\t\treturn (norm < 10 ? '0' : '') + norm;\n\t\t\t\t\t},\n\t\t\t\t\tpad3 = function(num) {\n\t\t\t\t\t\tlet norm = Math.floor(Math.abs(num));\n\t\t\t\t\t\treturn (norm < 100 ? '0' : '') + (norm < 10 ? '0' : '') + norm;\n\t\t\t\t\t},\n\t\t\t\t\tpad6 = function(num) {\n\t\t\t\t\t\tlet norm = Math.floor(Math.abs(num));\n\t\t\t\t\t\treturn (norm < 100000 ? '0' : '') + (norm < 10000 ? '0' : '') + (norm < 1000 ? '0' : '') + (norm < 100 ? '0' : '') + (norm < 10 ? '0' : '') + norm;\n\t\t\t\t\t};\n\t\t\t\treturn [this.getFullYear() ,\n\t\t\t\t\t'-' , pad(this.getMonth() + 1) ,\n\t\t\t\t\t'-' , pad(this.getDate()) ,\n\t\t\t\t\t'T' , pad(this.getHours()) ,\n\t\t\t\t\t':' , pad(this.getMinutes()) ,\n\t\t\t\t\t':' , pad(this.getSeconds()) ,\n\t\t\t\t\t'.' + pad3(this.getMilliseconds()) + pad6(this.ns) +\n\t\t\t\t\tdif , pad(tzo / 60) ,\n\t\t\t\t\t':' , pad(tzo % 60)].join(\"\");\n\t\t\t} \n\t\t} );\n\t\ttoProtoTypes.set( Boolean.prototype, { external:false, name:\"Boolean\", cb:this_value  } );\n\t\ttoProtoTypes.set( Number.prototype, { external:false, name:\"Number\"\n\t\t    , cb:function(){ \n\t\t\t\tif( isNaN(this) )  return \"NaN\";\n\t\t\t\treturn (isFinite(this))\n\t\t\t\t\t? String(this)\n\t\t\t\t\t: (this<0)?\"-Infinity\":\"Infinity\";\n\t\t    }\n\t\t} );\n\t\ttoProtoTypes.set( String.prototype, { external:false\n\t\t    , name : \"String\"\n\t\t    , cb:function(){ return '\"' + JSOX.escape(this_value.apply(this)) + '\"' } } );\n\t\tif( typeof BigInt === \"function\" )\n\t\t\ttoProtoTypes.set( BigInt.prototype\n\t\t\t     , { external:false, name:\"BigInt\", cb:function() { return this + 'n' } } );\n\t   \n\t\ttoProtoTypes.set( ArrayBuffer.prototype, { external:true, name:\"ab\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this))+\"]\" }\n\t\t} );\n\t   \n\t\ttoProtoTypes.set( Uint8Array.prototype, { external:true, name:\"u8\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\ttoProtoTypes.set( Uint8ClampedArray.prototype, { external:true, name:\"uc8\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\ttoProtoTypes.set( Int8Array.prototype, { external:true, name:\"s8\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\ttoProtoTypes.set( Uint16Array.prototype, { external:true, name:\"u16\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\ttoProtoTypes.set( Int16Array.prototype, { external:true, name:\"s16\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\ttoProtoTypes.set( Uint32Array.prototype, { external:true, name:\"u32\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\ttoProtoTypes.set( Int32Array.prototype, { external:true, name:\"s32\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\t/*\n\t\tif( typeof Uint64Array != \"undefined\" )\n\t\t\ttoProtoTypes.set( Uint64Array.prototype, { external:true, name:\"u64\"\n\t\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t\t} );\n\t\tif( typeof Int64Array != \"undefined\" )\n\t\t\ttoProtoTypes.set( Int64Array.prototype, { external:true, name:\"s64\"\n\t\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t\t} );\n\t\t*/\n\t\ttoProtoTypes.set( Float32Array.prototype, { external:true, name:\"f32\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\ttoProtoTypes.set( Float64Array.prototype, { external:true, name:\"f64\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t\ttoProtoTypes.set( Float64Array.prototype, { external:true, name:\"f64\"\n\t\t    , cb:function() { return \"[\"+getIdentifier(base64ArrayBuffer(this.buffer))+\"]\" }\n\t\t} );\n\t   \n\t\ttoProtoTypes.set( RegExp.prototype, mapToJSOX = { external:true, name:\"regex\"\n\t\t    , cb:function(o,stringifier){\n\t\t\t\treturn \"'\"+escape(this.source)+\"'\";\n\t\t\t}\n\t\t} );\n\t\tfromProtoTypes.set( \"regex\", { protoCon:RegExp, cb:function (field,val){\n\t\t\treturn new RegExp( this );\n\t\t} } );\n\n\t\ttoProtoTypes.set( Map.prototype, mapToJSOX = { external:true, name:\"map\"\n\t\t    , cb:null\n\t\t} );\n\t\tfromProtoTypes.set( \"map\", { protoCon:Map, cb:function (field,val){\n\t\t\tif( field ) {\n\t\t\t\tthis.set( field, val );\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn this;\n\t\t} } );\n\t   \n\t\ttoProtoTypes.set( Array.prototype, arrayToJSOX = { external:false, name:Array.prototype.constructor.name\n\t\t    , cb: null\t\t    \n\t\t} );\n\n\t}\n\n\tconst stringifier = {\n\t\tdefineClass(name,obj) { \n\t\t\tlet cls; \n\t\t\tlet denormKeys = Object.keys(obj);\n\t\t\tfor( let i = 1; i < denormKeys.length; i++ ) {\n\t\t\t\t// normalize class key order\n\t\t\t\tlet a, b;\n\t\t\t\tif( ( a = denormKeys[i-1] ) > ( b = denormKeys[i] ) ) {\n\t\t\t\t\tdenormKeys[i-1] = b;\n\t\t\t\t\tdenormKeys[i] = a;\n\t\t\t\t\tif( i ) i-=2; // go back 2, this might need to go further pack.\n\t\t\t\t\telse i--; // only 1 to check.\n\t\t\t\t}\n\t\t\t}\n\t\t\tclasses.push( cls = { name : name\n\t\t\t       , tag:denormKeys.toString()\n\t\t\t       , proto : Object.getPrototypeOf(obj)\n\t\t\t       , fields : Object.keys(obj) } );\n\n\t\t\tfor(let n = 1; n < cls.fields.length; n++) {\n\t\t\t\tif( cls.fields[n] < cls.fields[n-1] ) {\n\t\t\t\t\tlet tmp = cls.fields[n-1];\n\t\t\t\t\tcls.fields[n-1] = cls.fields[n];\n\t\t\t\t\tcls.fields[n] = tmp;\n\t\t\t\t\tif( n > 1 )\n\t\t\t\t\t\tn-=2;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( cls.proto === Object.getPrototypeOf( {} ) ) cls.proto = null;\n\t\t},\n\t\tsetDefaultObjectToJSOX( cb ) { objectToJSOX = cb },\n\t\tisEncoding(o) {\n\t\t\t//console.log( \"is object encoding?\", encoding.length, o, encoding );\n\t\t\treturn !!encoding.find( (eo,i)=>eo===o && i < (encoding.length-1) )\n\t\t},\n\t\tencodeObject(o) {\n\t\t\tif( objectToJSOX ) \n\t\t\t\treturn objectToJSOX.apply(o, [this]);\n\t\t\treturn o;\n\t\t},\n\t\tstringify(o,r,s) { return stringify(o,r,s) },\n\t\tsetQuote(q) { useQuote = q; },\n\t\tregisterToJSOX(n,p,f) { return this.toJSOX( n,p,f ) },\n\t\ttoJSOX( name, ptype, f ) {\n\t\t\tif( ptype.prototype && ptype.prototype !== Object.prototype ) {\n\t\t\t\tif( localToProtoTypes.get(ptype.prototype) ) throw new Error( \"Existing toJSOX has been registered for prototype\" );\n\t\t\t\tlocalToProtoTypes.set( ptype.prototype, { external:true, name:name||f.constructor.name, cb:f } );\n\t\t\t} else {\n\t\t\t\tlet key = Object.keys( ptype ).toString();\n\t\t\t\tif( localToObjectTypes.get(key) ) throw new Error( \"Existing toJSOX has been registered for object type\" );\n\t\t\t\tlocalToObjectTypes.set( key, { external:true, name:name, cb:f } );\n\t\t\t}\n\t\t},\n\t\tget ignoreNonEnumerable() { return ignoreNonEnumerable; },\n\t\tset ignoreNonEnumerable(val) { ignoreNonEnumerable = val; },\n\t}\n\treturn stringifier;\n\n\t/**\n\t * get a reference to a previously seen object\n\t * @param {any} here \n\t * @returns reference to existing object, or undefined if not found.\n\t */\n\tfunction getReference( here ) {\n\t\tif( here === null ) return undefined;\n\t\tlet field = fieldMap.get( here );\n\t\t//_DEBUG_STRINGIFY && console.log( \"path:\", _JSON.stringify(path), field );\n\t\tif( !field ) {\n\t\t\tfieldMap.set( here, _JSON.stringify(path) );\n\t\t\treturn undefined;\n\t\t}\n\t\treturn \"ref\"+field;\n\t}\n\n\n\t/**\n\t * find the prototype definition for a class\n\t * @param {object} o \n\t * @param {map} useK \n\t * @returns object\n\t */\n\tfunction matchObject(o,useK) {\n\t\tlet k;\n\t\tlet cls;\n\t\tlet prt = Object.getPrototypeOf(o);\n\t\tcls = classes.find( cls=>{\n\t\t\tif( cls.proto && cls.proto === prt ) return true;\n\t\t} );\n\t\tif( cls ) return cls;\n\n\t\tif( classes.length || commonClasses.length ) {\n\t\t\tif( useK )  {\n\t\t\t\tuseK = useK.map( v=>{ if( typeof v === \"string\" ) return v; else return undefined; } );\n\t\t\t\tk = useK.toString();\n\t\t\t} else {\n\t\t\t\tlet denormKeys = Object.keys(o);\n\t\t\t\tfor( let i = 1; i < denormKeys.length; i++ ) {\n\t\t\t\t\tlet a, b;\n\t\t\t\t\tif( ( a = denormKeys[i-1] ) > ( b = denormKeys[i] ) ) {\n\t\t\t\t\t\tdenormKeys[i-1] = b;\n\t\t\t\t\t\tdenormKeys[i] = a;\n\t\t\t\t\t\tif( i ) i-=2; // go back 2, this might need to go further pack.\n\t\t\t\t\t\telse i--; // only 1 to check.\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tk = denormKeys.toString();\n\t\t\t}\n\t\t\tcls = classes.find( cls=>{\n\t\t\t\tif( cls.tag === k ) return true;\n\t\t\t} );\n\t\t\tif( !cls )\n\t\t\t\tcls = commonClasses.find( cls=>{\n\t\t\t\t\tif( cls.tag === k ) return true;\n\t\t\t\t} );\n\t\t}\n\t\treturn cls;\n\t}\n\n\t/**\n\t * Serialize an object to JSOX text.\n\t * @param {any} object \n\t * @param {(key:string,value:any)=>string} replacer \n\t * @param {string|number} space \n\t * @returns \n\t */\n\tfunction stringify( object, replacer, space ) {\n\t\tif( object === undefined ) return \"undefined\";\n\t\tif( object === null ) return;\n\t\tlet gap;\n\t\tlet indent;\n\t\tlet rep;\n\n\t\tlet i;\n\t\tconst spaceType = typeof space;\n\t\tconst repType = typeof replacer;\n\t\tgap = \"\";\n\t\tindent = \"\";\n\n\t\t// If the space parameter is a number, make an indent string containing that\n\t\t// many spaces.\n\n\t\tif (spaceType === \"number\") {\n\t\t\tfor (i = 0; i < space; i += 1) {\n\t\t\t\tindent += \" \";\n\t\t\t}\n\n\t\t// If the space parameter is a string, it will be used as the indent string.\n\t\t} else if (spaceType === \"string\") {\n\t\t\tindent = space;\n\t\t}\n\n\t\t// If there is a replacer, it must be a function or an array.\n\t\t// Otherwise, throw an error.\n\n\t\trep = replacer;\n\t\tif( replacer && repType !== \"function\"\n\t\t    && ( repType !== \"object\"\n\t\t       || typeof replacer.length !== \"number\"\n\t\t   )) {\n\t\t\tthrow new Error(\"JSOX.stringify\");\n\t\t}\n\n\t\tpath.length = 0;\n\t\tfieldMap = new WeakMap();\n\n\t\tconst finalResult = str( \"\", {\"\":object} );\n\t\tcommonClasses.length = 0;\n\t\treturn finalResult;\n\n\t\t// from https://github.com/douglascrockford/JSON-js/blob/master/json2.js#L181\n\t\tfunction str(key, holder) {\n\t\t\tvar mind = gap;\n\t\t\tconst doArrayToJSOX_ = arrayToJSOX.cb;\n\t\t\tconst mapToObject_ = mapToJSOX.cb;\t\t \n\t\t\tarrayToJSOX.cb = doArrayToJSOX;\n\t\t\tmapToJSOX.cb = mapToObject;\n\t\t\tconst v = str_(key,holder);\n\t\t\tarrayToJSOX.cb = doArrayToJSOX_;\n\t\t\tmapToJSOX.cb = mapToObject_;\n\t\t\treturn v;\n\n\t\t\tfunction doArrayToJSOX() {\n\t\t\t\tlet v;\n\t\t\t\tlet partial = [];\n\t\t\t\tlet thisNodeNameIndex = path.length;\n\n\t\t\t\t// The value is an array. Stringify every element. Use null as a placeholder\n\t\t\t\t// for non-JSOX values.\n\t\t\t\n\t\t\t\tfor (let i = 0; i < this.length; i += 1) {\n\t\t\t\t\tpath[thisNodeNameIndex] = i;\n\t\t\t\t\tpartial[i] = str(i, this) || \"null\";\n\t\t\t\t}\n\t\t\t\tpath.length = thisNodeNameIndex;\n\t\t\t\t//console.log( \"remove encoding item\", thisNodeNameIndex, encoding.length);\n\t\t\t\tencoding.length = thisNodeNameIndex;\n\t\t\t\n\t\t\t\t// Join all of the elements together, separated with commas, and wrap them in\n\t\t\t\t// brackets.\n\t\t\t\tv = ( partial.length === 0\n\t\t\t\t\t? \"[]\"\n\t\t\t\t\t: gap\n\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\"[\\n\"\n\t\t\t\t\t\t\t, gap\n\t\t\t\t\t\t\t, partial.join(\",\\n\" + gap)\n\t\t\t\t\t\t\t, \"\\n\"\n\t\t\t\t\t\t\t, mind\n\t\t\t\t\t\t\t, \"]\"\n\t\t\t\t\t\t].join(\"\")\n\t\t\t\t\t\t: \"[\" + partial.join(\",\") + \"]\" );\n\t\t\t\treturn v;\n\t\t\t} \n\t\t\tfunction mapToObject(){\n\t\t\t\t//_DEBUG_PARSING_DETAILS && console.log( \"---------- NEW MAP -------------\" );\n\t\t\t\tlet tmp = {tmp:null};\n\t\t\t\tlet out = '{'\n\t\t\t\tlet first = true;\n\t\t\t\t//console.log( \"CONVERT:\", map);\n\t\t\t\tfor (let [key, value] of this) {\n\t\t\t\t\t//console.log( \"er...\", key, value )\n\t\t\t\t\ttmp.tmp = value;\n\t\t\t\t\tlet thisNodeNameIndex = path.length;\n\t\t\t\t\tpath[thisNodeNameIndex] = key;\n\t\t\t\t\t\t\t\n\t\t\t\t\tout += (first?\"\":\",\") + getIdentifier(key) +':' + str(\"tmp\", tmp);\n\t\t\t\t\tpath.length = thisNodeNameIndex;\n\t\t\t\t\tfirst = false;\n\t\t\t\t}\n\t\t\t\tout += '}';\n\t\t\t\t//console.log( \"out is:\", out );\n\t\t\t\treturn out;\n\t\t\t}\n\n\t\t// Produce a string from holder[key].\n\t\tfunction str_(key, holder) {\n\n\t\t\tlet i;          // The loop counter.\n\t\t\tlet k;          // The member key.\n\t\t\tlet v;          // The member value.\n\t\t\tlet length;\n\t\t\tlet partialClass;\n\t\t\tlet partial;\n\t\t\tlet thisNodeNameIndex = path.length;\n\t\t\tlet isValue = true;\n\t\t\tlet value = holder[key];\n\t\t\tlet isObject = (typeof value === \"object\");\n\t\t\tlet c;\n\n\t\t\tif( isObject && ( value !== null ) ) {\n\t\t\t\tif( objectToJSOX ){\n\t\t\t\t\tif( !stringifying.find( val=>val===value ) ) {\n\t\t\t\t\t\tstringifying.push( value );\n\t\t\t\t\t\tencoding[thisNodeNameIndex] = value;\n\t\t\t\t\t\tisValue = false;\n\t\t\t\t\t\tvalue = objectToJSOX.apply(value, [stringifier]);\n\t\t\t\t\t\t//console.log( \"Converted by object lookup -it's now a different type\"\n\t\t\t\t\t\t//\t, protoConverter, objectConverter );\n\t\t\t\t\t\tisObject = ( typeof value === \"object\" );\n\t\t\t\t\t\tstringifying.pop();\n\t\t\t\t\t\tencoding.length = thisNodeNameIndex;\n\t\t\t\t\t\tisObject = (typeof value === \"object\");\n\t\t\t\t\t}\n\t\t\t\t\t//console.log( \"Value convereted to:\", key, value );\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst objType = (value !== undefined && value !== null) && Object.getPrototypeOf( value );\n\t\t\t\n\t\t\tlet protoConverter = objType\n\t\t\t\t&& ( localToProtoTypes.get( objType ) \n\t\t\t\t|| toProtoTypes.get( objType ) \n\t\t\t\t|| null )\n\t\t\tlet objectConverter = !protoConverter && (value !== undefined && value !== null) \n\t\t\t\t&& ( localToObjectTypes.get( Object.keys( value ).toString() ) \n\t\t\t\t|| toObjectTypes.get( Object.keys( value ).toString() ) \n\t\t\t\t|| null )\n\n\t\t\t// If we were called with a replacer function, then call the replacer to\n\t\t\t// obtain a replacement value.\n\n\t\t\tif (typeof rep === \"function\") {\n\t\t\t\tisValue = false;\n\t\t\t\tvalue = rep.call(holder, key, value);\n\t\t\t}\n\t\t\t\t//console.log( \"PROTOTYPE:\", Object.getPrototypeOf( value ) )\n\t\t\t\t//console.log( \"PROTOTYPE:\", toProtoTypes.get(Object.getPrototypeOf( value )) )\n\t\t\t\t//if( protoConverter )\n\t\t\t//_DEBUG_STRINGIFY && console.log( \"TEST()\", value, protoConverter, objectConverter );\n\n\t\t\tlet toJSOX = ( protoConverter && protoConverter.cb ) \n\t\t\t          || ( objectConverter && objectConverter.cb );\n\t\t\t// If the value has a toJSOX method, call it to obtain a replacement value.\n\t\t\t//_DEBUG_STRINGIFY && console.log( \"type:\", typeof value, protoConverter, !!toJSOX, path );\n\n\t\t\tif( value !== undefined\n\t\t\t    && value !== null\n\t\t\t\t&& typeof value === \"object\"\n\t\t\t    && typeof toJSOX === \"function\"\n\t\t\t) {\n\t\t\t\tif( !stringifying.find( val=>val===value ) ) {\n\t\t\t\t\tif( typeof value === \"object\" ) {\n\t\t\t\t\t\tv = getReference( value );\n\t\t\t\t\t\tif( v )\treturn v;\n\t\t\t\t\t}\n\n\t\t\t\t\tstringifying.push( value );\n\t\t\t\t\tencoding[thisNodeNameIndex] = value;\n\t\t\t\t\tvalue = toJSOX.call(value, stringifier);\n\t\t\t\t\tisValue = false;\n\t\t\t\t\tstringifying.pop();\n\t\t\t\t\tif( protoConverter && protoConverter.name ) {\n\t\t\t\t\t\t// stringify may return a unquoted string\n\t\t\t\t\t\t// which needs an extra space betwen its tag and value.\n\t\t\t\t\t\tif( \"string\" === typeof value \n\t\t\t\t\t\t\t&& value[0] !== '-'\n\t\t\t\t\t\t\t&& (value[0] < '0' || value[0] > '9' )\n\t\t\t\t\t\t\t&& value[0] !== '\"'\n\t\t\t\t\t\t\t&& value[0] !== '\\'' \n\t\t\t\t\t\t\t&& value[0] !== '`' \n\t\t\t\t\t\t\t&& value[0] !== '[' \n\t\t\t\t\t\t\t&& value[0] !== '{' \n\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\tvalue = ' ' + value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//console.log( \"Value converted:\", value );\n\t\t\t\t\tencoding.length = thisNodeNameIndex;\n\t\t\t\t} else {\n\t\t\t\t\tv = getReference( value );\n\t\t\t\t}\n\t\t} else \n\t\t\t\tif( typeof value === \"object\" ) {\n\t\t\t\t\tv = getReference( value );\n\t\t\t\t\tif( v ) return v;\n\t\t\t\t}\n\n\t\t\t// What happens next depends on the value's type.\n\t\t\tswitch (typeof value) {\n\t\t\tcase \"bigint\":\n\t\t\t\treturn value + 'n';\n\t\t\tcase \"string\":\n\t\t\t\t{\n\t\t\t\t\t//console.log( `Value was converted before?  [${value}]`);\n\t\t\t\t\tvalue = isValue?getIdentifier(value):value;\n\t\t\t\t\tlet c = '';\n\t\t\t\t\tif( key===\"\" )\n\t\t\t\t\t\tc = classes.map( cls=> cls.name+\"{\"+cls.fields.join(\",\")+\"}\" ).join(gap?\"\\n\":\"\")+\n\t\t\t\t\t\t    commonClasses.map( cls=> cls.name+\"{\"+cls.fields.join(\",\")+\"}\" ).join(gap?\"\\n\":\"\")\n\t\t\t\t\t\t\t\t+(gap?\"\\n\":\"\");\n\t\t\t\t\tif( protoConverter && protoConverter.external ) \n\t\t\t\t\t\treturn c + protoConverter.name + value;\n\t\t\t\t\tif( objectConverter && objectConverter.external ) \n\t\t\t\t\t\treturn c + objectConverter.name + value;\n\t\t\t\t\treturn c + value;//useQuote+JSOX.escape( value )+useQuote;\n\t\t\t\t}\n\t\t\tcase \"number\":\n\t\t\tcase \"boolean\":\n\t\t\tcase \"null\":\n\n\t\t\t\t// If the value is a boolean or null, convert it to a string. Note:\n\t\t\t\t// typeof null does not produce \"null\". The case is included here in\n\t\t\t\t// the remote chance that this gets fixed someday.\n\n\t\t\t\treturn String(value);\n\n\t\t\t\t// If the type is \"object\", we might be dealing with an object or an array or\n\t\t\t\t// null.\n\n\t\t\tcase \"object\":\n\t\t\t\t//_DEBUG_STRINGIFY && console.log( \"ENTERINT OBJECT EMISSION WITH:\", v );\n\t\t\t\tif( v ) return v;\n\n\t\t\t\t// Due to a specification blunder in ECMAScript, typeof null is \"object\",\n\t\t\t\t// so watch out for that case.\n\t\t\t\tif (!value) {\n\t\t\t\t\treturn \"null\";\n\t\t\t\t}\n\n\t\t\t\t// Make an array to hold the partial results of stringifying this object value.\n\t\t\t\tgap += indent;\n\t\t\t\tpartialClass = null;\n\t\t\t\tpartial = [];\n\n\t\t\t\t// If the replacer is an array, use it to select the members to be stringified.\n\t\t\t\tif (rep && typeof rep === \"object\") {\n\t\t\t\t\tlength = rep.length;\n\t\t\t\t\tpartialClass = matchObject( value, rep );\n\t\t\t\t\tfor (i = 0; i < length; i += 1) {\n\t\t\t\t\t\tif (typeof rep[i] === \"string\") {\n\t\t\t\t\t\t\tk = rep[i];\n\t\t\t\t\t\t\tpath[thisNodeNameIndex] = k;\n\t\t\t\t\t\t\tv = str(k, value);\n\n\t\t\t\t\t\t\tif (v !== undefined ) {\n\t\t\t\t\t\t\t\tif( partialClass ) {\n\t\t\t\t\t\t\t\t\tpartial.push(v);\n\t\t\t\t\t\t\t\t} else\n\t\t\t\t\t\t\t\t\tpartial.push( getIdentifier(k) \n\t\t\t\t\t\t\t\t\t+ (\n\t\t\t\t\t\t\t\t\t\t(gap)\n\t\t\t\t\t\t\t\t\t\t\t? \": \"\n\t\t\t\t\t\t\t\t\t\t\t: \":\"\n\t\t\t\t\t\t\t\t\t) + v);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpath.splice( thisNodeNameIndex, 1 );\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise, iterate through all of the keys in the object.\n\t\t\t\t\tpartialClass = matchObject( value );\n\t\t\t\t\tlet keys = [];\n\t\t\t\t\tfor (k in value) {\n\t\t\t\t\t\tif( ignoreNonEnumerable )\n\t\t\t\t\t\t\tif( !Object.prototype.propertyIsEnumerable.call( value, k ) ){\n\t\t\t\t\t\t\t\t//_DEBUG_STRINGIFY && console.log( \"skipping non-enuerable?\", k );\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(value, k)) {\n\t\t\t\t\t\t\tlet n;\n\t\t\t\t\t\t\tfor( n = 0; n < keys.length; n++ ) \n\t\t\t\t\t\t\t\tif( keys[n] > k ) {\t\n\t\t\t\t\t\t\t\t\tkeys.splice(n,0,k );\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif( n == keys.length )\n\t\t\t\t\t\t\t\tkeys.push(k);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor(let n = 0; n < keys.length; n++) {\n\t\t\t\t\t\tk = keys[n];\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(value, k)) {\n\t\t\t\t\t\t\tpath[thisNodeNameIndex] = k;\n\t\t\t\t\t\t\tv = str(k, value);\n\n\t\t\t\t\t\t\tif (v !== undefined ) {\n\t\t\t\t\t\t\t\tif( partialClass ) {\n\t\t\t\t\t\t\t\t\tpartial.push(v);\n\t\t\t\t\t\t\t\t} else\n\t\t\t\t\t\t\t\t\tpartial.push(getIdentifier(k) + (\n\t\t\t\t\t\t\t\t\t\t(gap)\n\t\t\t\t\t\t\t\t\t\t\t? \": \"\n\t\t\t\t\t\t\t\t\t\t\t: \":\"\n\t\t\t\t\t\t\t\t\t) + v);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpath.splice( thisNodeNameIndex, 1 );\n\t\t\t\t}\n\n\t\t\t\t// Join all of the member texts together, separated with commas,\n\t\t\t\t// and wrap them in braces.\n\t\t\t\t//_DEBUG_STRINGIFY && console.log( \"partial:\", partial )\n\n\t\t\t\t//let c;\n\t\t\t\tif( key===\"\" )\n\t\t\t\t\tc = ( classes.map( cls=> cls.name+\"{\"+cls.fields.join(\",\")+\"}\" ).join(gap?\"\\n\":\"\")\n\t\t\t\t\t\t|| commonClasses.map( cls=> cls.name+\"{\"+cls.fields.join(\",\")+\"}\" ).join(gap?\"\\n\":\"\"))+(gap?\"\\n\":\"\");\n\t\t\t\telse\n\t\t\t\t\tc = '';\n\n\t\t\t\tif( protoConverter && protoConverter.external ) \n\t\t\t\t\tc = c + getIdentifier(protoConverter.name);\n\n\t\t\t\t//_DEBUG_STRINGIFY && console.log( \"PREFIX FOR THIS FIELD:\", c );\n\t\t\t\tlet ident = null;\n\t\t\t\tif( partialClass )\n\t\t\t\t\tident = getIdentifier( partialClass.name ) ;\n\t\t\t\tv = c +\n\t\t\t\t\t( partial.length === 0\n\t\t\t\t\t? \"{}\"\n\t\t\t\t\t: gap\n\t\t\t\t\t\t\t? (partialClass?ident:\"\")+\"{\\n\" + gap + partial.join(\",\\n\" + gap) + \"\\n\" + mind + \"}\"\n\t\t\t\t\t\t\t: (partialClass?ident:\"\")+\"{\" + partial.join(\",\") + \"}\"\n\t\t\t\t\t);\n\n\t\t\t\tgap = mind;\n\t\t\t\treturn v;\n\t\t\t}\n\t\t}\n\t}\n\n\t}\n}\n\n\t// Converts an ArrayBuffer directly to base64, without any intermediate 'convert to string then\n\t// use window.btoa' step. According to my tests, this appears to be a faster approach:\n\t// http://jsperf.com/encoding-xhr-image-data/5\n\t// doesn't have to be reversable....\n\tconst encodings = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$_'\n\tconst decodings = { '~':-1\n\t\t,'=':-1\n\t\t,'$':62\n\t\t,'_':63\n\t\t,'+':62\n\t\t,'-':62\n\t\t,'.':62\n\t\t,'/':63\n\t\t,',':63\n\t};\n\t\n\tfor( let x = 0; x < encodings.length; x++ ) {\n\t\tdecodings[encodings[x]] = x;\n\t}\n\tObject.freeze( decodings );\n\t\n\tfunction base64ArrayBuffer(arrayBuffer) {\n\t\tlet base64    = ''\n\t\n\t\tlet bytes         = new Uint8Array(arrayBuffer)\n\t\tlet byteLength    = bytes.byteLength\n\t\tlet byteRemainder = byteLength % 3\n\t\tlet mainLength    = byteLength - byteRemainder\n\t\n\t\tlet a, b, c, d\n\t\tlet chunk\n\t\t//throw \"who's using this?\"\n\t\t//console.log( \"buffer..\", arrayBuffer )\n\t\t// Main loop deals with bytes in chunks of 3\n\t\tfor (let i = 0; i < mainLength; i = i + 3) {\n\t\t\t// Combine the three bytes into a single integer\n\t\t\tchunk = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2]\n\n\t\t\t// Use bitmasks to extract 6-bit segments from the triplet\n\t\t\ta = (chunk & 16515072) >> 18 // 16515072 = (2^6 - 1) << 18\n\t\t\tb = (chunk & 258048)   >> 12 // 258048   = (2^6 - 1) << 12\n\t\t\tc = (chunk & 4032)     >>  6 // 4032     = (2^6 - 1) << 6\n\t\t\td = chunk & 63               // 63       = 2^6 - 1\n\t\n\t\t\t// Convert the raw binary segments to the appropriate ASCII encoding\n\t\t\tbase64 += encodings[a] + encodings[b] + encodings[c] + encodings[d]\n\t\t}\n\t\n\t// Deal with the remaining bytes and padding\n\t\tif (byteRemainder == 1) {\n\t\t\tchunk = bytes[mainLength]\n\t\t\ta = (chunk & 252) >> 2 // 252 = (2^6 - 1) << 2\n\t\t\t// Set the 4 least significant bits to zero\n\t\t\tb = (chunk & 3)   << 4 // 3   = 2^2 - 1\n\t\t\tbase64 += encodings[a] + encodings[b] + '=='\n\t\t} else if (byteRemainder == 2) {\n\t\t\tchunk = (bytes[mainLength] << 8) | bytes[mainLength + 1]\n\t\t\ta = (chunk & 64512) >> 10 // 64512 = (2^6 - 1) << 10\n\t\t\tb = (chunk & 1008)  >>  4 // 1008  = (2^6 - 1) << 4\n\t\t\t// Set the 2 least significant bits to zero\n\t\t\tc = (chunk & 15)    <<  2 // 15    = 2^4 - 1\n\t\t\tbase64 += encodings[a] + encodings[b] + encodings[c] + '='\n\t\t}\n\t\t//console.log( \"dup?\", base64)\n\t\treturn base64\n\t}\n\t\n\t\n\tfunction DecodeBase64( buf ) {\t\n\t\tlet outsize;\n\t\tif( buf.length % 4 == 1 )\n\t\t\toutsize = ((((buf.length + 3) / 4)|0) * 3) - 3;\n\t\telse if( buf.length % 4 == 2 )\n\t\t\toutsize = ((((buf.length + 3) / 4)|0) * 3) - 2;\n\t\telse if( buf.length % 4 == 3 )\n\t\t\toutsize = ((((buf.length + 3) / 4)|0) * 3) - 1;\n\t\telse if( decodings[buf[buf.length - 3]] == -1 )\n\t\t\toutsize = ((((buf.length + 3) / 4)|0) * 3) - 3;\n\t\telse if( decodings[buf[buf.length - 2]] == -1 ) \n\t\t\toutsize = ((((buf.length + 3) / 4)|0) * 3) - 2;\n\t\telse if( decodings[buf[buf.length - 1]] == -1 ) \n\t\t\toutsize = ((((buf.length + 3) / 4)|0) * 3) - 1;\n\t\telse\n\t\t\toutsize = ((((buf.length + 3) / 4)|0) * 3);\n\t\tlet ab = new ArrayBuffer( outsize );\n\t\tlet out = new Uint8Array(ab);\n\n\t\tlet n;\n\t\tlet l = (buf.length+3)>>2;\n\t\tfor( n = 0; n < l; n++ ) {\n\t\t\tlet index0 = decodings[buf[n*4]];\n\t\t\tlet index1 = (n*4+1)<buf.length?decodings[buf[n*4+1]]:-1;\n\t\t\tlet index2 = (index1>=0) && (n*4+2)<buf.length?decodings[buf[n*4+2]]:-1 || -1;\n\t\t\tlet index3 = (index2>=0) && (n*4+3)<buf.length?decodings[buf[n*4+3]]:-1 || -1;\n\t\t\tif( index1 >= 0 )\n\t\t\t\tout[n*3+0] = (( index0 ) << 2 | ( index1 ) >> 4);\n\t\t\tif( index2 >= 0 )\n\t\t\t\tout[n*3+1] = (( index1 ) << 4 | ( ( ( index2 ) >> 2 ) & 0x0f ));\n\t\t\tif( index3 >= 0 )\n\t\t\t\tout[n*3+2] = (( index2 ) << 6 | ( ( index3 ) & 0x3F ));\n\t\t}\n\n\t\treturn ab;\n\t}\n\t\n/**\n * @param {unknown} object \n * @param {(this: unknown, key: string, value: unknown)} [replacer] \n * @param {string | number} [space] \n * @returns {string}\n */\t\nJSOX.stringify = function( object, replacer, space ) {\n\tlet stringifier = JSOX.stringifier();\n\treturn stringifier.stringify( object, replacer, space );\n}\n\nconst nonIdent = \n[ [ 0,256,[ 0xffd9ff,0xff6aff,0x1fc00,0x380000,0x0,0xfffff8,0xffffff,0x7fffff] ]\n].map( row=>{ return{ firstChar : row[0], lastChar: row[1], bits : row[2] }; } );\n//return JSOX;\n//})(exports || {})\nexport {JSOX}\nexport default JSOX;\n","export type FieldType = \"text\" | \"password\" | \"select\" | \"color-palette\" | \"shape-palette\" | \"number-select\" | \"textarea\";\n\nexport type FieldOption = {\n    value: string;\n    label: string;\n    color?: string;\n    shape?: string;\n};\n\nexport type FieldConfig = {\n    path: string;\n    label: string;\n    type: FieldType;\n    placeholder?: string;\n    helper?: string;\n    options?: FieldOption[];\n};\n\nexport type GroupConfig = {\n    key?: string;\n    label: string;\n    description?: string;\n    collapsible?: boolean;\n    startOpen?: boolean;\n    fields: FieldConfig[];\n};\n\nexport type SectionKey = \"runtime\" | \"core\" | \"app\" | \"ai\" | \"mcp\" | \"webdav\" | \"timeline\" | \"additional\";\n\nexport type SectionConfig = {\n    key: SectionKey;\n    title: string;\n    icon: string;\n    description: string;\n    groups: GroupConfig[];\n};\n\nexport type CoreMode = \"native\" | \"endpoint\";\n\nexport type RemoteTarget = {\n    id: string;\n    label?: string;\n    url: string;\n    method?: string;\n    headers?: Record<string, string>;\n    unencrypted?: boolean;\n};\n\nexport type MCPConfig = {\n    id: string;\n    serverLabel: string;\n    origin: string;\n    clientKey: string;\n    secretKey: string;\n};\n\nexport type GridShape =\n    | \"square\" | \"squircle\" | \"circle\" | \"rounded\" | \"blob\"     // Border-radius based\n    | \"hexagon\" | \"diamond\" | \"star\" | \"badge\" | \"heart\"        // Clip-path polygonal\n    | \"clover\" | \"flower\"                                        // Clip-path decorative\n    | \"egg\" | \"tear\" | \"wavy\";                                           // Asymmetric / procedural\n\nexport type CustomInstruction = {\n    id: string;\n    label: string;\n    instruction: string;\n    enabled?: boolean;\n    order?: number;\n};\n\nexport type ResponseLanguage = \"en\" | \"ru\" | \"auto\";\n\nexport type AppSettings = {\n    core?: {\n        mode?: CoreMode;\n        endpointUrl?: string;\n        userId?: string;\n        userKey?: string;\n        encrypt?: boolean;\n        preferBackendSync?: boolean;\n        ntpEnabled?: boolean;\n        ops?: {\n            allowUnencrypted?: boolean;\n            httpTargets?: RemoteTarget[];\n            wsTargets?: RemoteTarget[];\n            syncTargets?: RemoteTarget[];\n        };\n    };\n    ai?: {\n        apiKey?: string;\n        baseUrl?: string;\n        model?: string;\n        customModel?: string;\n        mcp?: MCPConfig[];\n        shareTargetMode?: \"analyze\" | \"recognize\";\n        /** When true (default), share-target / launch-queue will auto run AI and copy result to clipboard. */\n        autoProcessShared?: boolean;\n        customInstructions?: CustomInstruction[];\n        activeInstructionId?: string;\n        // Language and translation settings\n        responseLanguage?: ResponseLanguage;\n        translateResults?: boolean;\n        // Graphics generation settings\n        generateSvgGraphics?: boolean;\n        // Request timeout settings (in seconds)\n        requestTimeout?: {\n            low?: number;    // Default: 60\n            medium?: number; // Default: 300\n            high?: number;   // Default: 900\n        };\n        maxRetries?: number; // Default: 2\n    };\n    webdav?: {\n        url?: string;\n        username?: string;\n        password?: string;\n        token?: string;\n    };\n    timeline?: {\n        source?: string;\n    };\n    appearance?: {\n        theme?: \"light\" | \"dark\" | \"auto\";\n        fontSize?: \"small\" | \"medium\" | \"large\";\n        color?: string;\n    };\n    speech?: {\n        language?: string;\n    };\n    grid?: {\n        columns?: number;\n        rows?: number;\n        shape?: GridShape;\n    };\n};\n\nexport const DEFAULT_SETTINGS: AppSettings = {\n    core: {\n        mode: \"native\",\n        endpointUrl: \"http://localhost:6065\",\n        userId: \"\",\n        userKey: \"\",\n        encrypt: false,\n        preferBackendSync: true,\n        ntpEnabled: false,\n        ops: {\n            allowUnencrypted: false,\n            httpTargets: [],\n            wsTargets: [],\n            syncTargets: []\n        }\n    },\n    ai: {\n        apiKey: \"\",\n        baseUrl: \"\",\n        model: \"gpt-5.2\",\n        customModel: \"\",\n        mcp: [],\n        shareTargetMode: \"recognize\",\n        autoProcessShared: true,\n        customInstructions: [],\n        activeInstructionId: \"\",\n        responseLanguage: \"auto\",\n        translateResults: false,\n        generateSvgGraphics: false,\n        requestTimeout: {\n            low: 60,      // 1 minute\n            medium: 300,  // 5 minutes\n            high: 900     // 15 minutes\n        },\n        maxRetries: 2\n    },\n    webdav: {\n        url: \"http://localhost:6065\",\n        username: \"\",\n        password: \"\",\n        token: \"\"\n    },\n    timeline: {\n        source: \"\"\n    },\n    appearance: {\n        theme: \"auto\",\n        fontSize: \"medium\",\n        color: \"\"\n    },\n    speech: {\n        language: typeof navigator !== \"undefined\" ? navigator.language : \"en-US\"\n    },\n    grid: {\n        columns: 4,\n        rows: 8,\n        shape: \"square\"\n    }\n};\n","import { readFile, writeFile } from \"fest/lure\";\nimport { JSOX } from \"jsox\";\n\n//\nexport const sanitizeFileName = (name: string, fallbackExt = \"\") => {\n    const parts = String(name || \"\").split(\"/\").pop() || \"\";\n    const base = parts.replace(/\\s+/g, '-').replace(/[^a-zA-Z0-9_.\\-+#&]/g, '-');\n    if (fallbackExt && !base.includes('.')) return `${base || Date.now()}${fallbackExt.startsWith('.') ? '' : '.'}${fallbackExt}`;\n    return base || `${Date.now()}`;\n}\n\n\n\n//\n// Unified file/path helpers\n//\n\n// sanitize one path/token to safe slug\nconst toSlug = (input: string, toLower = true) => {\n    let s = String(input || \"\").trim();\n    if (toLower) s = s.toLowerCase();\n    // replace whitespace with '-'\n    s = s.replace(/\\s+/g, '-');\n    // keep only safe chars\n    s = s.replace(/[^a-z0-9_.\\-+#&]/g, '-');\n    // collapse repeats\n    s = s.replace(/-+/g, '-');\n    return s;\n};\n\n//\nconst inferExtFromMime = (mime = \"\") => {\n    if (!mime) return \"\";\n    if (mime.includes(\"json\")) return \"json\";\n    if (mime.includes(\"markdown\")) return \"md\";\n    if (mime.includes(\"plain\")) return \"txt\";\n    if (mime === \"image/jpeg\" || mime === \"image/jpg\") return \"jpg\";\n    if (mime === \"image/png\") return \"png\";\n    if (mime.startsWith(\"image/\")) return mime.split('/').pop() || \"\";\n    if (mime.includes(\"html\")) return \"html\";\n    return \"\";\n};\n\n//\nconst splitPath = (path: string) => String(path || \"\").split('/').filter(Boolean);\nconst ensureDir = (p: string) => (p.endsWith('/') ? p : p + '/');\nconst joinPath = (parts: string[], absolute = true) => (absolute ? '/' : '') + parts.filter(Boolean).join('/') + '';\n\n//\nconst sanitizePathSegments = (path: string) => {\n    const parts = splitPath(path);\n    return joinPath(parts.map((p) => toSlug(p)));\n};\n\ntype MergeArrayStrategy = 'union' | 'replace' | 'concat';\n\nexport interface WriteSmartOptions {\n    forceExt?: string;\n    ensureJson?: boolean;\n    toLower?: boolean;\n    sanitize?: boolean;\n    //  \n    mergeJson?: boolean;                  //  merge JSON (  true  .json)\n    arrayStrategy?: MergeArrayStrategy;   // 'union' ( ), 'replace', 'concat'\n    arrayKey?: string | string[];         // ()      ( 'id')\n    jsonSpace?: number | string;          //  JSON   ( 2)\n}\n\nconst DEFAULT_ARRAY_KEYS = ['id', '_id', 'key', 'slug', 'name'];\n\nconst isPlainObject = (v: any) => Object.prototype.toString.call(v) === '[object Object]';\n\nfunction dedupeArray(items: any[], opts: { arrayKey?: string | string[] }) {\n    const keys = Array.isArray(opts.arrayKey) ? opts.arrayKey : (opts.arrayKey ? [opts.arrayKey] : DEFAULT_ARRAY_KEYS);\n    const result: any[] = [];\n    const primitiveSet = new Set<any>();\n    const objMap = new Map<string, any>();\n    const stringifiedSet = new Set<string>();\n\n    for (const it of items) {\n        if (it == null) continue;\n\n        if (isPlainObject(it)) {\n            //   \n            let dedupeKey: string | undefined;\n            for (const k of keys) {\n                if (k in it && it[k] != null) {\n                    dedupeKey = String(it[k]);\n                    break;\n                }\n            }\n            if (dedupeKey != null) {\n                if (!objMap.has(dedupeKey)) {\n                    objMap.set(dedupeKey, it);\n                    result.push(it);\n                }\n            } else {\n                //    JSOX.stringify\n                const sig = safeStableStringify(it);\n                if (!stringifiedSet.has(sig)) {\n                    stringifiedSet.add(sig);\n                    result.push(it);\n                }\n            }\n        } else if (Array.isArray(it)) {\n            //        \n            const sig = safeStableStringify(it);\n            if (!stringifiedSet.has(sig)) {\n                stringifiedSet.add(sig);\n                result.push(it);\n            }\n        } else {\n            // \n            if (!primitiveSet.has(it)) {\n                primitiveSet.add(it);\n                result.push(it);\n            }\n        }\n    }\n\n    return result;\n}\n\nfunction mergeDeepUnique(a: any, b: any, opts: { arrayStrategy: MergeArrayStrategy; arrayKey?: string | string[] }): any {\n    if (Array.isArray(a) && Array.isArray(b)) {\n        switch (opts.arrayStrategy) {\n            case 'replace':\n                return b.slice();\n            case 'concat':\n                return a.concat(b);\n            case 'union':\n            default:\n                return dedupeArray(a.concat(b), { arrayKey: opts.arrayKey });\n        }\n    }\n\n    if (isPlainObject(a) && isPlainObject(b)) {\n        const out: any = { ...a };\n        for (const k of Object.keys(b)) {\n            if (k in a) {\n                out[k] = mergeDeepUnique(a[k], b[k], opts);\n            } else {\n                out[k] = b[k];\n            }\n        }\n        return out;\n    }\n\n    //     \n    return b;\n}\n\nfunction safeStableStringify(obj: any): string {\n    //    ( . )    \n    if (!isPlainObject(obj)) return JSON.stringify(obj);\n    const keys = Object.keys(obj).sort();\n    const o: any = {};\n    for (const k of keys) o[k] = obj[k];\n    return JSON.stringify(o);\n}\n\nasync function blobToText(blob: Blob): Promise<string> {\n    return await blob.text();\n}\n\nasync function readFileAsJson(root: any | null, fullPath: string): Promise<any | null> {\n    try {\n        // ,  readFile    Blob/File\n        const existing: any = await readFile(root, fullPath)?.catch?.(console.warn.bind(console));\n        if (!existing) return null;\n        const text = await blobToText(existing);\n        if (!text?.trim()) return null;\n        return JSOX.parse(text);\n    } catch {\n        return null;\n    }\n}\n\n// Always writes by full sanitized path. Accepts a directory or a full path.\nexport const writeFileSmart = async (\n    root: any | null,\n    dirOrPath: string,\n    file: File | Blob,\n    options: WriteSmartOptions = {}\n) => {\n    const {\n        forceExt,\n        ensureJson,\n        toLower = true,\n        sanitize = true,\n        mergeJson,\n        arrayStrategy = 'union',\n        arrayKey,\n        jsonSpace = 2,\n    } = options;\n\n    // Determine desired base name and directory\n    let raw = String(dirOrPath || \"\").trim();\n    const isDirHint = raw.endsWith('/');\n    const hasFileToken = !isDirHint && splitPath(raw).length > 0 && raw.includes('.');\n\n    let dirPath = isDirHint ? raw : (hasFileToken ? raw.split('/').slice(0, -1).join('/') : raw);\n    let desiredName = hasFileToken ? raw.split('/').pop() || '' : (file as any)?.name || '';\n\n    // Fallbacks\n    dirPath = dirPath || '/';\n    desiredName = desiredName || (Date.now() + '');\n\n    // Extract name/ext\n    const lastDot = desiredName.lastIndexOf('.');\n    let base = lastDot > 0 ? desiredName.slice(0, lastDot) : desiredName;\n    let ext = (forceExt || (ensureJson ? 'json' : (lastDot > 0 ? desiredName.slice(lastDot + 1) : inferExtFromMime((file as any)?.type || '')))) || '';\n\n    if (sanitize) {\n        dirPath = sanitizePathSegments(dirPath);\n        base = toSlug(base, toLower);\n    }\n\n    const finalName = ext ? `${base}.${ext}` : base;\n    const fullPath = ensureDir(dirPath) + finalName;\n\n    // Try JSON merge if applicable\n    const shouldMergeJson = (mergeJson !== false) && (ensureJson || ext.toLowerCase() === 'json' || ((file as any)?.type === 'application/json'));\n\n    if (shouldMergeJson) {\n        try {\n            //   ()\n            let incomingJson: any;\n            if (file instanceof File || file instanceof Blob) {\n                const txt = await blobToText(file);\n                incomingJson = txt?.trim() ? JSOX.parse(txt) : {};\n            } else {\n                incomingJson = file; // ,  \n            }\n\n            //  JSON ( )\n            const existingJson = await readFileAsJson(root, fullPath)?.catch?.(console.warn.bind(console));\n\n            let merged = existingJson != null\n                ? mergeDeepUnique(existingJson, incomingJson, { arrayStrategy, arrayKey })\n                : incomingJson;\n\n            //  undefined -> null/  (JSOX.stringify   undefined)\n            const jsonString = JSON.stringify(merged, undefined, jsonSpace);\n\n            //\n            const toWrite = new File([jsonString], finalName, { type: 'application/json' });\n            const rs = await writeFile(root, fullPath, toWrite)?.catch?.(console.warn.bind(console));\n            if (typeof document !== \"undefined\")\n                document?.dispatchEvent?.(new CustomEvent(\"rs-fs-changed\", {\n                    detail: rs,\n                    bubbles: true, composed: true, cancelable: true,\n                }));\n            return rs;\n        } catch (err) {\n            console.warn('writeFileSmart JSON merge failed, falling back to raw write:', err);\n            //    /     \n        }\n    }\n\n    // Ensure File object with correct name ( )\n    let toWrite: File;\n    if (file instanceof File) {\n        if (file.name === finalName) {\n            toWrite = file;\n        } else {\n            const type = (file as any).type || (ext ? `application/${ext}` : 'application/octet-stream');\n            const buf = await file.arrayBuffer();\n            toWrite = new File([buf], finalName, { type });\n        }\n    } else {\n        const type = (file as any).type || (ext ? `application/${ext}` : 'application/octet-stream');\n        const blob = file as Blob;\n        toWrite = new File([await blob.arrayBuffer()], finalName, { type });\n    }\n\n    const rs = await writeFile(root, fullPath, toWrite)?.catch?.(console.warn.bind(console));\n    if (typeof document !== \"undefined\")\n        document?.dispatchEvent?.(new CustomEvent(\"rs-fs-changed\", {\n            detail: rs,\n            bubbles: true, composed: true, cancelable: true,\n        }));\n    return rs;\n};\n","import { createClient, type FileStat } from \"webdav/web\"\nimport { getDirectoryHandle, readFile } from \"fest/lure\"\nimport { JSOX } from \"jsox\";\n\n//\nimport type { AppSettings } from \"@rs-com/config/SettingsTypes\";\nimport { DEFAULT_SETTINGS } from \"@rs-com/config/SettingsTypes\";\nimport { writeFileSmart } from \"@rs-core/storage/WriteFileSmart-v2\";\n\n//\nexport const SETTINGS_KEY = \"rs-settings\";\n\n//\nexport const splitPath = (path: string) => path.split(\".\");\nexport const getByPath = (source: any, path: string) => splitPath(path).reduce<any>((acc, key) => (acc == null ? acc : acc[key]), source);\nexport const slugify = (value: string) => value.replace(/[^a-z0-9]+/gi, \"-\").replace(/^-+|-+$/g, \"\").toLowerCase();\n\n//\nexport const DB_NAME = 'req-store';\nexport const STORE = 'settings';\n\n// Check if we're in a content script context (restricted storage access)\n// Content scripts are extension scripts injected into third-party pages\n// They have chrome.runtime but run on http/https pages (not chrome-extension://)\nconst isContentScriptContext = (): boolean => {\n    try {\n        // Must have chrome.runtime to be a content script (extensions only)\n        // Regular PWA/web apps don't have chrome.runtime\n        if (typeof chrome === \"undefined\" || !chrome?.runtime) return false;\n\n        // Content scripts run on http/https pages but have chrome.runtime\n        // Extension pages run on chrome-extension:// protocol\n        if (typeof window !== \"undefined\" && window.location?.protocol?.startsWith(\"http\")) {\n            // This is a content script - extension code running on a web page\n            return true;\n        }\n\n        return false;\n    } catch {\n        return false; // If we can't determine, assume NOT a content script (allow access)\n    }\n};\n\n//\nconst hasChromeStorage = () => typeof chrome !== \"undefined\" && chrome?.storage?.local;\n\n//\nasync function idbOpen(): Promise<IDBDatabase> {\n    // Check if indexedDB is available and accessible\n    if (typeof indexedDB === \"undefined\") {\n        throw new Error(\"IndexedDB not available\");\n    }\n\n    // In content scripts on some pages, indexedDB access throws DOMException\n    if (isContentScriptContext()) {\n        throw new Error(\"IndexedDB not accessible in content script context\");\n    }\n\n    return new Promise<IDBDatabase>((res, rej) => {\n        try {\n            const req = indexedDB.open(DB_NAME, 1);\n            req.onupgradeneeded = () => req.result.createObjectStore(STORE, { keyPath: 'key' });\n            req.onsuccess = () => res(req.result);\n            req.onerror = () => rej(req.error);\n        } catch (e) {\n            rej(e);\n        }\n    });\n}\n\n//\nexport const idbGetSettings = async (key: string = SETTINGS_KEY): Promise<any> => {\n    try {\n        if (hasChromeStorage()) {\n            console.log(\"[Settings] Using chrome.storage.local for get\");\n            return new Promise((res) => {\n                try {\n                    chrome.storage.local.get([key], (result) => {\n                        if (chrome.runtime.lastError) {\n                            console.warn(\"[Settings] chrome.storage.local.get error:\", chrome.runtime.lastError);\n                            res(null);\n                        } else {\n                            console.log(\"[Settings] chrome.storage.local.get success, has data:\", !!result[key]);\n                            res(result[key]);\n                        }\n                    });\n                } catch (e) {\n                    console.warn(\"[Settings] chrome.storage access failed:\", e);\n                    res(null);\n                }\n            });\n        }\n\n        // Check if indexedDB is available\n        if (typeof indexedDB === \"undefined\") {\n            console.warn(\"[Settings] IndexedDB not available\");\n            return null;\n        }\n\n        console.log(\"[Settings] Using IndexedDB for get\");\n        const db = await idbOpen();\n        return new Promise((res, rej) => {\n            const tx = db.transaction(STORE, 'readonly');\n            const req = tx.objectStore(STORE).get(key);\n            req.onsuccess = () => {\n                console.log(\"[Settings] IndexedDB get success, has data:\", !!req.result?.value);\n                res(req.result?.value);\n                db.close();\n            }\n            req.onerror = () => {\n                console.warn(\"[Settings] IndexedDB get error:\", req.error);\n                rej(req.error);\n                db.close();\n            };\n        });\n    } catch (e) {\n        console.warn(\"[Settings] Settings storage access failed:\", e);\n        return null;\n    }\n}\n\n//\nexport const idbPutSettings = async (value: any, key: string = SETTINGS_KEY): Promise<void> => {\n    try {\n        if (hasChromeStorage()) {\n            return new Promise((res, rej) => {\n                try {\n                    chrome.storage.local.set({ [key]: value }, () => {\n                        if (chrome.runtime.lastError) {\n                            rej(chrome.runtime.lastError);\n                        } else {\n                            res();\n                        }\n                    });\n                } catch (e) {\n                    console.warn(\"chrome.storage write failed:\", e);\n                    rej(e);\n                }\n            });\n        }\n\n        // Check if indexedDB is available\n        if (typeof indexedDB === \"undefined\") {\n            console.warn(\"IndexedDB not available\");\n            return;\n        }\n\n        const db = await idbOpen();\n        return new Promise((res, rej) => {\n            const tx = db.transaction(STORE, 'readwrite');\n            tx.objectStore(STORE).put({ key, value });\n            tx.oncomplete = () => { res(void 0); db.close(); };\n            tx.onerror = () => { rej(tx.error); db.close(); };\n        });\n    } catch (e) {\n        console.warn(\"Settings storage write failed:\", e);\n    }\n}\n\n//\nexport const loadSettings = async (): Promise<AppSettings> => {\n    try {\n        const raw = await idbGetSettings();\n        const stored = typeof raw === \"string\" ? JSOX.parse(raw) as any : raw;\n\n        console.log(\"[Settings] loadSettings - raw type:\", typeof raw, \"stored type:\", typeof stored);\n\n        if (stored && typeof stored === \"object\") {\n            const result = {\n                core: {\n                    ...DEFAULT_SETTINGS.core,\n                    ...(stored as any)?.core\n                },\n                ai: {\n                    ...DEFAULT_SETTINGS.ai, ...(stored as any)?.ai,\n                    mcp: (stored as any)?.ai?.mcp || [],\n                    customInstructions: (stored as any)?.ai?.customInstructions || [],\n                    activeInstructionId: (stored as any)?.ai?.activeInstructionId || \"\"\n                },\n                webdav: { ...DEFAULT_SETTINGS.webdav, ...(stored as any)?.webdav },\n                timeline: { ...DEFAULT_SETTINGS.timeline, ...(stored as any)?.timeline },\n                appearance: { ...DEFAULT_SETTINGS.appearance, ...(stored as any)?.appearance },\n                speech: { ...DEFAULT_SETTINGS.speech, ...(stored as any)?.speech },\n                grid: { ...DEFAULT_SETTINGS.grid, ...(stored as any)?.grid }\n            };\n\n            console.log(\"[Settings] loadSettings result:\", {\n                hasApiKey: !!result.ai?.apiKey,\n                instructionCount: result.ai?.customInstructions?.length || 0,\n                activeInstructionId: result.ai?.activeInstructionId || \"(none)\"\n            });\n\n            return result;\n        }\n\n        console.log(\"[Settings] loadSettings - no stored data, returning defaults\");\n    } catch (e) {\n        console.warn(\"[Settings] loadSettings error:\", e);\n    }\n    return JSOX.parse(JSOX.stringify(DEFAULT_SETTINGS as any) as string) as unknown as AppSettings;\n};\n\n//\nexport const saveSettings = async (settings: AppSettings) => {\n    const current = await loadSettings();\n\n    // For arrays and special fields, prefer explicit values from settings,\n    // then fall back to current, then to defaults.\n    // Use explicit undefined check (not nullish coalescing) to preserve empty arrays/strings\n    const getMcp = () => {\n        if (settings.ai?.mcp !== undefined) return settings.ai.mcp;\n        if (current.ai?.mcp !== undefined) return current.ai.mcp;\n        return [];\n    };\n\n    const getCustomInstructions = () => {\n        if (settings.ai?.customInstructions !== undefined) return settings.ai.customInstructions;\n        if (current.ai?.customInstructions !== undefined) return current.ai.customInstructions;\n        return [];\n    };\n\n    const getActiveInstructionId = () => {\n        // Check if activeInstructionId is explicitly set (including empty string)\n        if (Object.prototype.hasOwnProperty.call(settings.ai || {}, 'activeInstructionId')) {\n            return settings.ai?.activeInstructionId ?? \"\";\n        }\n        // Fall back to current value\n        if (current.ai?.activeInstructionId !== undefined) {\n            return current.ai.activeInstructionId;\n        }\n        return \"\";\n    };\n\n    const merged: AppSettings = {\n        core: {\n            ...(DEFAULT_SETTINGS.core || {}),\n            ...(current.core || {}),\n            ...(settings.core || {})\n        },\n        ai: {\n            ...(DEFAULT_SETTINGS.ai || {}),\n            ...(current.ai || {}),\n            ...(settings.ai || {}),\n            mcp: getMcp(),\n            customInstructions: getCustomInstructions(),\n            activeInstructionId: getActiveInstructionId()\n        },\n        webdav: {\n            ...(DEFAULT_SETTINGS.webdav || {}),\n            ...(current.webdav || {}),\n            ...(settings.webdav || {})\n        },\n        timeline: {\n            ...(DEFAULT_SETTINGS.timeline || {}),\n            ...(current.timeline || {}),\n            ...(settings.timeline || {})\n        },\n        appearance: {\n            ...(DEFAULT_SETTINGS.appearance || {}),\n            ...(current.appearance || {}),\n            ...(settings.appearance || {})\n        },\n        speech: {\n            ...(DEFAULT_SETTINGS.speech || {}),\n            ...(current.speech || {}),\n            ...(settings.speech || {})\n        },\n        grid: {\n            ...(DEFAULT_SETTINGS.grid || {}),\n            ...(current.grid || {}),\n            ...(settings.grid || {})\n        }\n    };\n    await idbPutSettings(merged);\n    updateWebDavSettings(merged)?.catch?.(console.warn.bind(console));\n    return merged;\n};\n\n//       \nconst joinPath = (base: string, name?: string, addTrailingSlash = false) => {\n    const b = (base || \"/\").replace(/\\/+$/g, \"\") || \"/\";\n    const n = (name || \"\").replace(/^\\/+/g, \"\");\n    let out = b === \"/\" ? `/${n}` : `${b}/${n}`;\n    if (addTrailingSlash) out = out.replace(/\\/?$/g, \"/\");\n    return out.replace(/\\/{2,}/g, \"/\");\n};\n\nconst isDirHandle = (h: any) => (h?.kind === 'directory');\nconst safeTime = (v: any) => {\n    const t = new Date(v as any).getTime();\n    return Number.isFinite(t) ? t : 0;\n};\n\ntype SyncOptions = {\n    //  download:   ,    \n    pruneLocal?: boolean;\n    //  upload:    ,   \n    pruneRemote?: boolean;\n};\n\n// DOWNLOAD:   path  filename   filename  \nconst downloadContentsToOPFS = async (\n    webDavClient,\n    path = \"/\",\n    opts: SyncOptions = {},\n    rootHandle: FileSystemDirectoryHandle | null = null\n) => {\n    const files = await webDavClient\n        ?.getDirectoryContents?.(path || \"/\")\n        ?.catch?.((e) => { console.warn(e); return []; }) as FileStat[];\n\n    //      ,    \n    if (opts.pruneLocal && files?.length > 0) {\n        try {\n            const dirHandle = await getDirectoryHandle(rootHandle, path)?.catch?.(() => null);\n            if (dirHandle?.entries) {\n                const localEntries = await Array.fromAsync(dirHandle.entries());\n                const remoteNames = new Set(files?.map?.((f) => f?.basename).filter(Boolean));\n                await Promise.all(\n                    (localEntries as [string, FileSystemDirectoryHandle | FileSystemFileHandle][])\n                        .filter(([name]) => !remoteNames.has(name))\n                        .map(([name]) =>\n                            dirHandle.removeEntry(name, { recursive: true })?.catch?.(console.warn.bind(console))\n                        )\n                );\n            }\n        } catch (e) {\n            console.warn(e);\n        }\n    }\n\n    return Promise.all(\n        files.map(async (file) => {\n            const isDir = file?.type === \"directory\";\n            // : filename       base-URL \n            const fullPath = isDir ? joinPath(file.filename, \"\", true) : file.filename;\n\n            if (isDir) {\n                return downloadContentsToOPFS(webDavClient, fullPath, opts, rootHandle);\n            }\n\n            if (file?.type === \"file\") {\n                const localMeta = await readFile(rootHandle, fullPath).catch(() => null);\n                const localMtime = safeTime(localMeta?.lastModified);\n                const remoteMtime = safeTime(file?.lastmod);\n\n                if (remoteMtime > localMtime) {\n                    const contents = await webDavClient\n                        .getFileContents(fullPath)\n                        .catch((e) => { console.warn(e); return null; });\n\n                    if (!contents || contents.byteLength === 0) return;\n\n                    // mime      \n                    const mime = (file as any)?.mime || \"application/octet-stream\";\n                    return writeFileSmart(rootHandle, fullPath, new File([contents], file.basename, { type: mime }));\n                }\n            }\n        })\n    );\n};\n\n// UPLOAD:   ;   \nconst uploadOPFSToWebDav = async (\n    webDavClient,\n    dirHandle: FileSystemDirectoryHandle | null = null,\n    path = \"/\",\n    opts: SyncOptions = {}\n) => {\n    const effectiveDirHandle = dirHandle ?? (await getDirectoryHandle(null, path, { create: true })?.catch?.(console.warn.bind(console)));\n    const entries = await Array.fromAsync(effectiveDirHandle?.entries?.() ?? []);\n\n    //\n    if (path != \"/\") {\n        //  :   entries  handle\n        //       ,      \n        if (opts.pruneRemote && entries?.length >= 0) {\n            const remoteItems = await webDavClient\n                .getDirectoryContents(path || '/')\n                .catch((e) => { console.warn(e); return []; }) as FileStat[];\n\n            //   (  )\n            const localSet = new Set(\n                (entries as [string, FileSystemDirectoryHandle | FileSystemFileHandle][])\n                    .map(([name]) => name.toLowerCase())\n            );\n\n            //   ,       ( includes)\n            const extra = remoteItems.filter((r) => {\n                const base = (r?.basename || '').toLowerCase();\n                return base && !localSet.has(base);\n            });\n\n            //  ,  \n            const filesFirst = [\n                ...extra.filter((x) => x.type !== 'directory'),\n                //...extra.filter((x) => x.type === 'directory'),\n            ];\n\n            for (const r of filesFirst) {\n                const remotePath = r.filename || joinPath(path, r.basename, r.type === 'directory');\n                try {\n                    await webDavClient.deleteFile(remotePath);\n                } catch (e) {\n                    console.warn('delete failed:', remotePath, e);\n                }\n            }\n        }\n    }\n\n    //\n    await Promise.all(\n        (entries as [string, FileSystemDirectoryHandle | FileSystemFileHandle][])\n            .map(async ([name, fileOrDir]) => {\n                const isDir = isDirHandle(fileOrDir);\n                const remotePath = joinPath(path, name, isDir);\n\n                if (isDir) {\n                    const dirPathNoSlash = joinPath(path, name, false);\n                    const exists = await webDavClient.exists(dirPathNoSlash).catch((_e) => { return false; });\n                    if (!exists) {\n                        await webDavClient.createDirectory(dirPathNoSlash, { recursive: true }).catch(console.warn);\n                    }\n                    return uploadOPFSToWebDav(webDavClient, fileOrDir as FileSystemDirectoryHandle, remotePath, opts);\n                }\n\n                // File\n                const fileHandle = fileOrDir as FileSystemFileHandle;\n                const fileContent = await fileHandle.getFile();\n                if (!fileContent || fileContent.size === 0) return;\n\n                //\n                const fullFilePath = joinPath(path, name, false);\n                const remoteStat = await webDavClient.stat(fullFilePath).catch(() => null);\n                const remoteMtime = safeTime(remoteStat?.lastmod);\n                const localMtime = safeTime(fileContent.lastModified);\n\n                //\n                if (!remoteStat || localMtime > remoteMtime) {\n                    await webDavClient.putFileContents(fullFilePath, await fileContent.arrayBuffer(), { overwrite: true })\n                        .catch((_e) => { return null; });\n                }\n            })\n    );\n\n};\n\n//\nconst getHostOnly = (address: string) => {\n    const url = new URL(address);\n    return url.protocol + url.hostname + \":\" + url.port;\n}\n\n//\nexport const WebDavSync = (address: string, options: any = {}) => {\n    const client = createClient(getHostOnly(address), options);\n    const status = currentWebDav?.sync?.getDAVCompliance?.()?.catch?.(console.warn.bind(console)) ?? null;\n    return {\n        status,\n        client,\n        upload(withPrune = false) { if (this.status != null) { return uploadOPFSToWebDav(client, null, \"/\", { pruneRemote: withPrune })?.catch?.((e) => { console.warn(e); return []; }) } },\n        download(withPrune = false) { if (this.status != null) { return downloadContentsToOPFS(client, \"/\", { pruneLocal: withPrune })?.catch?.((e) => { console.warn(e); return []; }) } },\n    }\n}\n\n//\nexport const currentWebDav: { sync: any } = { sync: null };\n\n// Only initialize WebDAV in extension contexts (not content scripts)\nif (!isContentScriptContext()) {\n    (async () => {\n        try {\n            const settings = await loadSettings();\n            if (settings?.core?.mode === \"endpoint\" && settings?.core?.preferBackendSync) {\n                return;\n            }\n            if (!settings?.webdav?.url) return;\n            const client = WebDavSync(settings.webdav.url, {\n                //authType: AuthType.Digest,\n                withCredentials: true,\n                username: settings.webdav.username,\n                password: settings.webdav.password,\n                token: settings.webdav.token\n            });\n            currentWebDav.sync = client ?? currentWebDav.sync;\n            await currentWebDav?.sync?.upload?.(true);\n            await currentWebDav?.sync?.download?.(true);\n        } catch (e) {\n            // Silently fail - storage may not be available in all contexts\n        }\n    })();\n}\n\n//\nexport const updateWebDavSettings = async (settings: any) => {\n    settings ||= await loadSettings();\n    if (settings?.core?.mode === \"endpoint\" && settings?.core?.preferBackendSync) {\n        currentWebDav.sync = null;\n        return;\n    }\n    if (!settings?.webdav?.url) return;\n    currentWebDav.sync = WebDavSync(settings.webdav.url, {\n        //authType: AuthType.Digest,\n        withCredentials: true,\n        username: settings.webdav.username,\n        password: settings.webdav.password,\n        token: settings.webdav.token\n    }) ?? currentWebDav.sync;\n    await currentWebDav?.sync?.upload?.();\n    await currentWebDav?.sync?.download?.(true);\n}\n\n// WebDAV sync on page lifecycle events (only in extension context, not content scripts)\nif (!isContentScriptContext()) {\n    try {\n        if (typeof window !== \"undefined\" && typeof addEventListener === \"function\") {\n            addEventListener(\"pagehide\", () => {\n                currentWebDav?.sync?.upload?.()?.catch?.(() => {});\n            });\n            addEventListener(\"beforeunload\", () => {\n                currentWebDav?.sync?.upload?.()?.catch?.(() => {});\n            });\n        }\n    } catch {\n        // Ignore - may not be in appropriate context\n    }\n\n    // Periodic WebDAV sync (only when sync is configured)\n    (async () => {\n        try {\n            while (true) {\n                await currentWebDav?.sync?.upload?.()?.catch?.(() => {});\n                await new Promise((resolve) => setTimeout(resolve, 3000));\n            }\n        } catch {\n            // Silently fail\n        }\n    })();\n}\n\n//\nexport default WebDavSync;\n"],"file":"Settings.js"}