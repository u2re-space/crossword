{"version":3,"file":"templates.js","sources":["../../src/com/service/instructions/core.ts","../../src/com/service/instructions/templates.ts"],"sourcesContent":["export const IMAGE_INSTRUCTION_JSON = `\nRecognize data from image, also preferred to orient by fonts in image.\n\nIn recognition result, do not include image itself.\n\nIn recognized from image data (what you seen in image), do:\n- If textual content, format as Markdown string (multiline).\n- If math (expression, equation, formula):\n  - For inline math, use SINGLE dollar signs: $x^2 + y^2 = z^2$\n  - For block/display math, use DOUBLE dollar signs: $$\\\\int_0^1 f(x) dx$$\n  - Do NOT add extra dollar signs - use exactly one $ for inline, exactly two $$ for block\n- If table (or looks alike table), format as | table |\n- If image reference, format as [$image$]($image$)\n- If code, format as \\`\\`\\`$code$\\`\\`\\` (multiline) or \\`$code$\\` (single-line)\n- If JSON, format as JSON string.\n- If phone number, format as correct phone number (in normalized format).\n  - If phone numbers (for example starts with +7, format as 8), replace to correct regional code.\n  - Trim spaces from phone numbers, emails, URLs, dates, times, codes, etc.\n  - Remove brackets, parentheses, spaces or other symbols from phone numbers.\n- If email, format as correct email (in normalized format).\n- If URL, format as correct URL (in normalized format), decode unicode to readable.\n- If date, format as correct date (ISO format preferred).\n- If time, format as correct time (24h format preferred).\n- If barcode/QR code, extract the encoded data.\n- If other, format as $text$.\n- If seen alike list, format as list (in markdown format).\n\nAdditional analysis:\n- Detect document type (receipt, business card, screenshot, etc.)\n- Extract structured data when possible (names, addresses, prices)\n- Identify any logos or branding\n- Note image quality issues that may affect recognition\n\nIf nothing found, return: {\"ok\": false, \"error\": \"No data recognized\"}\n\nCRITICAL OUTPUT FORMAT: Return ONLY valid JSON. No markdown code blocks, no explanations, no prose.\nYour response must start with { and end with }.\n\nExpected output structure:\n{\n    \"recognized_data\": [...],\n    \"keywords_and_tags\": [...],\n    \"verbose_data\": \"markdown description\",\n    \"document_type\": \"...\",\n    \"structured_extraction\": {...},\n    \"confidence\": 0.0-1.0,\n    \"quality_notes\": [...]\n}\n`;\n\nexport const DATA_CONVERSION_INSTRUCTION_JSON = `\nHere may be HTML, Regular Text, LaTeX, etc input formats.\n\nNeeds to convert or reformat presented data to target format (Markdown string).\n\n- If textual content, format as Markdown string (multiline).\n- If math (expression, equation, formula):\n  - For inline math, use SINGLE dollar signs: $x^2 + y^2 = z^2$\n  - For block/display math, use DOUBLE dollar signs: $$\\\\int_0^1 f(x) dx$$\n  - Do NOT add extra dollar signs - use exactly one $ for inline, exactly two $$ for block\n- If table (or looks alike table), format as | table |\n- If image, format as [$image$]($image$)\n- If code, format as \\`\\`\\`$code$\\`\\`\\` (multiline) or \\`$code$\\` (single-line)\n- If JSON, format as correct JSON string, and trim spaces from JSON string.\n- If phone number, format as correct phone number (in normalized format).\n  - If phone numbers (for example starts with +7, format as 8), replace to correct regional code.\n  - Trim spaces from phone numbers, emails, URLs, dates, times, codes, etc.\n  - Remove brackets, parentheses, spaces or other symbols from phone numbers.\n- If email, format as correct email (in normalized format).\n- If URL, format as correct URL (in normalized format).\n- If date, format as correct date (ISO format preferred).\n- If time, format as correct time (24h format).\n- If other, format as $text$.\n- If seen alike list, format as list (in markdown format).\n\nAdditional processing:\n- Detect the source format (HTML, LaTeX, plain text, etc.)\n- Preserve semantic structure during conversion\n- Extract metadata if present\n- Normalize encoding issues\n\nCRITICAL OUTPUT FORMAT: Return ONLY valid JSON. No markdown code blocks, no explanations, no prose.\nYour response must start with { and end with }.\n\nExpected output structure:\n{\n    \"recognized_data\": [...],\n    \"keywords_and_tags\": [...],\n    \"verbose_data\": \"markdown content\",\n    \"source_format\": \"...\",\n    \"confidence\": 0.0-1.0\n}\n`;\n\nexport const ENTITY_EXTRACTION_INSTRUCTION_JSON = `\nExtract structured entity data from the provided content.\n\nEntity types to detect:\n- task: jobs, actions, to-do items\n- event: meetings, appointments, occurrences\n- person: contacts, people mentions\n- place: locations, addresses, venues\n- service: products, offerings\n- item: goods, objects, inventory\n- factor: conditions, circumstances\n- bonus: promotions, discounts, codes\n\nFor each entity found, extract:\n- type: entity type from list above\n- id: suggested unique identifier\n- name: machine-readable name\n- title: human-readable title\n- kind: specific subtype\n- properties: relevant attributes\n- description: markdown description\n\nCRITICAL OUTPUT FORMAT: Return ONLY valid JSON. No markdown code blocks, no explanations, no prose.\nYour response must start with { and end with }.\n\nExpected output structure:\n{\n    \"entities\": [...],\n    \"keywords\": [...],\n    \"short_description\": \"markdown summary\",\n    \"extraction_confidence\": 0.0-1.0\n}\n`;\n\nexport const DATA_MODIFICATION_INSTRUCTION = `\nModify the provided entity based on user instructions.\n\nRules:\n1. Preserve original structure unless explicitly asked to change\n2. Preserve ID field unless explicitly asked to change\n3. Apply modifications carefully, one by one\n4. Return the complete modified entity\n\nReturn in JSON format:\n\\`\\`\\`json\n{\n    \"modified_entity\": {...},\n    \"changes_made\": [\"list of changes\"],\n    \"warnings\": []\n}\n\\`\\`\\`\n`;\n\nexport const IMAGE_INSTRUCTION = IMAGE_INSTRUCTION_JSON;\nexport const DATA_CONVERSION_INSTRUCTION = DATA_CONVERSION_INSTRUCTION_JSON;\nexport const ENTITY_EXTRACTION_INSTRUCTION = ENTITY_EXTRACTION_INSTRUCTION_JSON;\n\nexport const CORE_IMAGE_INSTRUCTION = IMAGE_INSTRUCTION_JSON;\nexport const CORE_DATA_CONVERSION_INSTRUCTION = DATA_CONVERSION_INSTRUCTION_JSON;\nexport const CORE_ENTITY_EXTRACTION_INSTRUCTION = ENTITY_EXTRACTION_INSTRUCTION_JSON;\n\nexport const AI_INSTRUCTIONS = {\n\tSOLVE_AND_ANSWER: `\nSolve equations, answer questions, and explain mathematical or logical problems from the provided content.\n\nFor equations and math problems:\n- Show step-by-step solutions\n- Provide final answers clearly marked\n- Explain reasoning for each step\n\nFor general questions:\n- Provide accurate, well-reasoned answers\n- Include relevant context and explanations\n- If multiple interpretations possible, address them\n\nFor quizzes and tests:\n- Show the correct answer with explanation\n- Explain why other options are incorrect\n\nAlways respond in the specified language and format results clearly.\n`,\n\n\tWRITE_CODE: `\nWrite clean, efficient, and well-documented code based on the provided description, requirements, or image.\n\nCode requirements:\n- Use appropriate programming language for the task\n- Follow language-specific best practices and conventions\n- Include proper error handling\n- Add meaningful comments and documentation\n- Make code readable and maintainable\n\nIf generating from an image or visual description:\n- Analyze the visual elements and requirements\n- Implement the described functionality\n- Ensure code compiles and runs correctly\n\nAlways respond in the specified language and provide complete, working code.\n`,\n\n\tEXTRACT_CSS: `\nExtract and generate clean, modern CSS from the provided content, image, or description.\n\nCSS requirements:\n- Use modern CSS features and best practices\n- Generate semantic, maintainable stylesheets\n- Include responsive design considerations\n- Use appropriate selectors and specificity\n- Follow CSS naming conventions\n- Optimize for performance and maintainability\n\nIf extracting from an image:\n- Analyze the visual design and layout\n- Generate corresponding CSS rules\n- Identify colors, fonts, spacing, and layout\n- Create reusable CSS classes and components\n\nAlways respond in the specified language and provide complete, working CSS.\n`,\n\n\tRECOGNIZE_CONTENT: `\nRecognize and extract information from images, documents, or other visual content.\n\nRecognition requirements:\n- Identify text content accurately\n- Extract structured information\n- Recognize tables, forms, and structured data\n- Preserve formatting where possible\n- Handle different languages and scripts\n- Provide confidence scores for extracted content\n\nFor document analysis:\n- Extract key information and metadata\n- Identify document type and structure\n- Recognize important sections and headings\n\nFor image analysis:\n- Describe visual content\n- Extract text from images (OCR)\n- Identify objects, scenes, and visual elements\n\nAlways respond in the specified language and format extracted information clearly.\n`,\n\n\tCONVERT_DATA: `\nConvert data between different formats while preserving structure and meaning.\n\nConversion requirements:\n- Maintain data integrity and relationships\n- Preserve formatting and structure where possible\n- Handle different data types appropriately\n- Provide clear mapping between source and target formats\n- Validate conversion accuracy\n\nSupported conversions:\n- CSV ↔ JSON ↔ XML\n- Markdown ↔ HTML\n- Text ↔ Structured data\n- Image data ↔ Text representations\n\nEnsure accurate, lossless conversion where possible.\n`,\n\n\tEXTRACT_ENTITIES: `\nExtract named entities, keywords, and structured information from content.\n\nEntity extraction requirements:\n- Identify people, organizations, locations\n- Extract dates, numbers, and measurements\n- Find keywords and important terms\n- Recognize relationships and connections\n- Provide confidence scores and context\n\nOutput structured data with:\n- Entity types and values\n- Position and context information\n- Confidence scores\n- Relationship mappings\n\nFocus on accuracy and comprehensive coverage.\n`,\n\n\tTRANSLATE_TO_LANGUAGE: `\nTranslate content to the specified target language while preserving meaning, tone, and formatting.\n\nTranslation requirements:\n- Maintain original meaning and intent\n- Preserve formatting, structure, and markdown syntax\n- Adapt cultural references appropriately\n- Use natural, fluent language in the target language\n- Handle technical terms, proper names, and brand names correctly\n- Maintain appropriate formality and tone\n- Preserve code blocks, mathematical expressions, and technical content\n\nFor content already in the target language:\n- Provide natural rephrasing or improvement\n- Enhance clarity and readability\n- Maintain professional quality\n\nSupported languages:\n- English (en)\n- Russian (ru)\n- Other languages as requested\n\nEnsure high-quality, natural translations that feel native to the target language.\n`,\n\n\tGENERAL_PROCESSING: `\nProcess and analyze content using appropriate AI capabilities.\n\nGeneral processing requirements:\n- Understand context and intent\n- Provide relevant analysis or transformation\n- Use appropriate tools and methods\n- Maintain content quality and accuracy\n- Adapt to different content types and requirements\n\nFocus on providing useful, accurate results that meet user needs.\n`,\n\n\tCRX_SOLVE_AND_ANSWER: `\nSolve the problem or answer the question presented in the content.\n\nAuto-detect the type of content:\n- Mathematical equation/expression → Solve step-by-step\n- Quiz/test question → Provide correct answer\n- Homework problem → Solve and explain\n- General question → Answer with explanation\n\nFormat output as:\n\n**Problem/Question:**\n<recognized content - use $KaTeX$ for math>\n\n**Solution/Answer:**\n<step-by-step solution or direct answer>\n\n**Explanation:**\n<clear explanation of the reasoning>\n\n---\n\nFor MATH problems:\n- Use single $ for inline math: $x = 5$\n- Use double $$ for display equations: $$\\\\int_0^1 f(x) dx$$\n- Show all intermediate steps\n- Simplify the final answer\n- For systems: solve all variables\n- For inequalities: use interval notation\n\nFor MULTIPLE CHOICE:\n- Identify correct option (A, B, C, D)\n- Explain why it's correct\n- Note why others are wrong\n\nFor TRUE/FALSE:\n- State True or False clearly\n- Provide justification\n\nFor SHORT ANSWER/ESSAY:\n- Provide concise, complete answer\n- Include key facts and reasoning\n\nFor CODING problems:\n- Write the solution code\n- Explain the logic\n\nIf multiple problems/questions present, solve each separately.\nIf unsolvable or unclear, explain why.\n`,\n\n\tCRX_WRITE_CODE: `\nYou are an expert software developer. Analyze the provided content and generate high-quality, working code.\n\nCode Generation Requirements:\n- Choose the best programming language for the task\n- Write clean, efficient, and well-documented code\n- Include proper error handling and input validation\n- Add meaningful comments explaining complex logic\n- Follow language-specific best practices and conventions\n- Ensure code is readable, maintainable, and follows standard patterns\n\nFor each code generation task:\n1. **Analyze Requirements**: Understand what the code needs to do\n2. **Choose Language**: Select appropriate programming language\n3. **Design Solution**: Plan the code structure and logic\n4. **Write Code**: Provide complete, working code with comments\n5. **Explain Logic**: Describe how the code works and key decisions\n\nProvide complete, runnable code that solves the described problem.\n`,\n\n\tCRX_EXTRACT_CSS: `\nYou are an expert CSS developer. Analyze the provided content and extract/generate the corresponding CSS styles.\n\nCSS Extraction Requirements:\n- Analyze visual elements, layout, and design patterns\n- Generate modern, clean CSS using current standards\n- Use semantic class names and proper CSS architecture\n- Include responsive design considerations\n- Optimize for performance and maintainability\n- Follow CSS best practices and conventions\n\nFor CSS extraction:\n1. **Analyze Design**: Identify colors, typography, spacing, layout\n2. **Generate Rules**: Create appropriate CSS rules and selectors\n3. **Organize Code**: Group related styles logically\n4. **Add Comments**: Explain complex or important style decisions\n5. **Ensure Compatibility**: Use widely supported CSS properties\n\nProvide complete, well-organized CSS that recreates the described design.\n`,\n};\n\nexport const SOLVE_AND_ANSWER_INSTRUCTION = AI_INSTRUCTIONS.SOLVE_AND_ANSWER;\nexport const WRITE_CODE_INSTRUCTION = AI_INSTRUCTIONS.WRITE_CODE;\nexport const EXTRACT_CSS_INSTRUCTION = AI_INSTRUCTIONS.EXTRACT_CSS;\nexport const RECOGNIZE_CONTENT_INSTRUCTION = AI_INSTRUCTIONS.RECOGNIZE_CONTENT;\nexport const CONVERT_DATA_INSTRUCTION = AI_INSTRUCTIONS.CONVERT_DATA;\nexport const EXTRACT_ENTITIES_INSTRUCTION = AI_INSTRUCTIONS.EXTRACT_ENTITIES;\nexport const TRANSLATE_TO_LANGUAGE_INSTRUCTION = AI_INSTRUCTIONS.TRANSLATE_TO_LANGUAGE;\nexport const GENERAL_PROCESSING_INSTRUCTION = AI_INSTRUCTIONS.GENERAL_PROCESSING;\n\nexport const CRX_SOLVE_AND_ANSWER_INSTRUCTION = AI_INSTRUCTIONS.CRX_SOLVE_AND_ANSWER;\nexport const CRX_WRITE_CODE_INSTRUCTION = AI_INSTRUCTIONS.CRX_WRITE_CODE;\nexport const CRX_EXTRACT_CSS_INSTRUCTION = AI_INSTRUCTIONS.CRX_EXTRACT_CSS;\n\nexport const EQUATION_SOLVE_INSTRUCTION = SOLVE_AND_ANSWER_INSTRUCTION;\nexport const ANSWER_QUESTION_INSTRUCTION = SOLVE_AND_ANSWER_INSTRUCTION;\n","import type { PromptTemplate } from \"@rs-core/modules/TemplateManager\";\nimport type { CustomInstruction } from \"@rs-com/config/SettingsTypes\";\nimport { AI_INSTRUCTIONS } from \"./core\";\n\nexport const DEFAULT_TEMPLATES: PromptTemplate[] = [\n\t{\n\t\tname: \"Recognize Content\",\n\t\tprompt: \"Recognize and extract information from the provided content\",\n\t\tcategory: \"Analysis\",\n\t\ttags: [\"recognition\", \"extraction\", \"analysis\"],\n\t},\n\t{\n\t\tname: \"Analyze Document\",\n\t\tprompt: \"Analyze this document and provide a summary with key insights\",\n\t\tcategory: \"Analysis\",\n\t\ttags: [\"analysis\", \"summary\", \"insights\"],\n\t},\n\t{\n\t\tname: \"Solve Problems\",\n\t\tprompt: \"Solve any equations, problems, or questions in the content\",\n\t\tcategory: \"Problem Solving\",\n\t\ttags: [\"math\", \"problems\", \"solutions\"],\n\t},\n\t{\n\t\tname: \"Generate Code\",\n\t\tprompt: \"Generate code based on the requirements or description provided\",\n\t\tcategory: \"Development\",\n\t\ttags: [\"code\", \"programming\", \"development\"],\n\t},\n\t{\n\t\tname: \"Extract CSS\",\n\t\tprompt: \"Extract or generate CSS from the content or images\",\n\t\tcategory: \"Design\",\n\t\ttags: [\"css\", \"styling\", \"design\"],\n\t},\n\t{\n\t\tname: \"Summarize Text\",\n\t\tprompt: \"Provide a concise summary of the following text\",\n\t\tcategory: \"Writing\",\n\t\ttags: [\"summary\", \"writing\", \"concise\"],\n\t},\n\t{\n\t\tname: \"Translate to Language\",\n\t\tprompt: \"Translate the following content to the selected language. Maintain the original formatting and structure where possible. If the content is already in the target language, provide a natural rephrasing or improvement instead.\",\n\t\tcategory: \"Translation\",\n\t\ttags: [\"translate\", \"language\", \"dynamic\"],\n\t},\n\t{\n\t\tname: \"Translate Content\",\n\t\tprompt: \"Translate the following content to English\",\n\t\tcategory: \"Translation\",\n\t\ttags: [\"translate\", \"language\", \"english\"],\n\t},\n\t{\n\t\tname: \"Generate Ideas\",\n\t\tprompt: \"Generate creative ideas based on the provided topic or content\",\n\t\tcategory: \"Creative\",\n\t\ttags: [\"ideas\", \"creative\", \"brainstorming\"],\n\t},\n];\n\nexport interface BuiltInAIAction {\n\tid: string;\n\ttitle: string;\n\tdescription: string;\n\tcategory: \"processing\" | \"analysis\" | \"creation\" | \"translation\";\n\tplatforms: (\"pwa\" | \"crx\" | \"workcenter\" | \"basic\")[];\n\tinstructionKey: keyof typeof AI_INSTRUCTIONS;\n\tsupportedContentTypes: string[];\n\tpriority: number;\n}\n\nexport const BUILT_IN_AI_ACTIONS: BuiltInAIAction[] = [\n\t{\n\t\tid: \"SOLVE_AND_ANSWER\",\n\t\ttitle: \"Solve / Answer (AI)\",\n\t\tdescription: \"Solve equations, answer questions, and explain mathematical or logical problems\",\n\t\tcategory: \"processing\",\n\t\tplatforms: [\"pwa\", \"crx\", \"workcenter\", \"basic\"],\n\t\tinstructionKey: \"SOLVE_AND_ANSWER\",\n\t\tsupportedContentTypes: [\"text\", \"markdown\", \"image\"],\n\t\tpriority: 10,\n\t},\n\t{\n\t\tid: \"WRITE_CODE\",\n\t\ttitle: \"Write Code (AI)\",\n\t\tdescription: \"Generate code based on requirements or descriptions\",\n\t\tcategory: \"creation\",\n\t\tplatforms: [\"pwa\", \"crx\", \"workcenter\", \"basic\"],\n\t\tinstructionKey: \"WRITE_CODE\",\n\t\tsupportedContentTypes: [\"text\", \"markdown\", \"image\"],\n\t\tpriority: 9,\n\t},\n\t{\n\t\tid: \"EXTRACT_CSS\",\n\t\ttitle: \"Extract CSS Styles (AI)\",\n\t\tdescription: \"Extract or generate CSS from content or images\",\n\t\tcategory: \"creation\",\n\t\tplatforms: [\"pwa\", \"crx\", \"workcenter\", \"basic\"],\n\t\tinstructionKey: \"EXTRACT_CSS\",\n\t\tsupportedContentTypes: [\"text\", \"markdown\", \"image\", \"html\"],\n\t\tpriority: 8,\n\t},\n\t{\n\t\tid: \"RECOGNIZE_CONTENT\",\n\t\ttitle: \"Recognize Content (AI)\",\n\t\tdescription: \"Extract information from images and documents\",\n\t\tcategory: \"analysis\",\n\t\tplatforms: [\"pwa\", \"crx\", \"workcenter\", \"basic\"],\n\t\tinstructionKey: \"RECOGNIZE_CONTENT\",\n\t\tsupportedContentTypes: [\"image\", \"pdf\", \"document\"],\n\t\tpriority: 7,\n\t},\n\t{\n\t\tid: \"TRANSLATE_TO_LANGUAGE\",\n\t\ttitle: \"Translate to Language (AI)\",\n\t\tdescription: \"Translate content to the selected language\",\n\t\tcategory: \"translation\",\n\t\tplatforms: [\"workcenter\", \"basic\"],\n\t\tinstructionKey: \"TRANSLATE_TO_LANGUAGE\",\n\t\tsupportedContentTypes: [\"text\", \"markdown\"],\n\t\tpriority: 6,\n\t},\n\t{\n\t\tid: \"CONVERT_DATA\",\n\t\ttitle: \"Convert Data (AI)\",\n\t\tdescription: \"Convert between different data formats\",\n\t\tcategory: \"processing\",\n\t\tplatforms: [\"workcenter\", \"basic\"],\n\t\tinstructionKey: \"CONVERT_DATA\",\n\t\tsupportedContentTypes: [\"csv\", \"json\", \"xml\", \"text\"],\n\t\tpriority: 5,\n\t},\n\t{\n\t\tid: \"EXTRACT_ENTITIES\",\n\t\ttitle: \"Extract Entities (AI)\",\n\t\tdescription: \"Extract named entities and structured information\",\n\t\tcategory: \"analysis\",\n\t\tplatforms: [\"workcenter\", \"basic\"],\n\t\tinstructionKey: \"EXTRACT_ENTITIES\",\n\t\tsupportedContentTypes: [\"text\", \"markdown\", \"document\"],\n\t\tpriority: 4,\n\t},\n\t{\n\t\tid: \"GENERAL_PROCESSING\",\n\t\ttitle: \"Process Content (AI)\",\n\t\tdescription: \"General AI processing and analysis\",\n\t\tcategory: \"processing\",\n\t\tplatforms: [\"pwa\", \"crx\", \"workcenter\", \"basic\"],\n\t\tinstructionKey: \"GENERAL_PROCESSING\",\n\t\tsupportedContentTypes: [\"*\"],\n\t\tpriority: 1,\n\t},\n];\n\nexport const DEFAULT_INSTRUCTION_TEMPLATES: Omit<CustomInstruction, \"id\">[] = [\n\t{\n\t\tlabel: \"Markdown & KaTeX\",\n\t\tinstruction: `Format the output as GitHub-compatible Markdown with KaTeX.\n\nStructure rules:\n- Use headings for structure:\n  - Main sections: start from ### (H3) minimum\n  - Subsections: #### / ##### when needed\n- Avoid long paragraphs: prefer lists and sub-lists.\n\nKaTeX / math rules:\n- Prefer inline formulas: $...$ (use this most of the time).\n- Avoid $$...$$ blocks; only use block math if strictly necessary.\n  - Prefer block math as \\\\[ ... \\\\] instead of $$...$$.\n- Inside KaTeX, write a vertical bar as \\\\| (example: $A \\\\| B$).\n\nTables:\n- Use strict GitHub Markdown table syntax.\n- Inside table cells:\n  - Use <br> for line breaks (no real newlines inside cells).\n  - If source data uses ';' as a separator, replace ';' with <br>.\n\nColon / key-value formatting:\n- For \"key: value\" style lines, make the part before ':' bold:\n  - **Key**: value\n\nGeneral:\n- Use bullet lists (-) or numbered steps (1., 2., 3.) where appropriate.\n- Keep formatting consistent and readable in dark themes.\n- Preserve meaning and math accuracy.`,\n\t\tenabled: true,\n\t\torder: 0,\n\t},\n\t{\n\t\tlabel: \"Solve & Answer\",\n\t\tinstruction: `Solve problems or answer questions. Auto-detect the type:\n• Math equations → Solve step-by-step with KaTeX\n• Quiz/test questions → Provide correct answer with explanation\n• Homework problems → Solve and explain reasoning\n\nFormat:\n**Problem/Question:** <content, use $KaTeX$ for math>\n**Solution/Answer:** <step-by-step or direct answer>\n**Explanation:** <clear reasoning>\n\nFor multiple choice: identify correct option + explain why.\nFor math: prefer $inline$; avoid $$block$$ and prefer \\\\[block\\\\] only if strictly necessary.\nShow all work and simplify the final answer.`,\n\t\tenabled: true,\n\t\torder: 1,\n\t},\n\t{\n\t\tlabel: \"Solve with Graphics\",\n\t\tinstruction: `Solve problems and generate visual representations when applicable.\n\nFor functions, graphs, diagrams, geometric shapes, or data visualizations:\nGenerate inline SVG code as a data URI: \\`![Graph](data:image/svg+xml,<encoded_svg>)\\`\n\nSVG Generation Rules:\n1. Use encodeURIComponent() encoding for the SVG content\n2. Keep SVG minimal but accurate (viewBox, paths, text labels)\n3. Use appropriate colors: #2563eb (blue) for main, #dc2626 (red) for secondary\n4. Include axis labels, grid lines, and legends where helpful\n5. Size: viewBox=\"0 0 400 300\" for standard graphs\n\nWhen to generate SVG:\n• Function plots: y = f(x), parametric curves, polar plots\n• Geometric diagrams: triangles, circles, angles, constructions\n• Data charts: bar, line, pie charts\n• Flowcharts and simple diagrams\n• Number lines and coordinate systems\n\nFormat:\n**Problem:** <description>\n**Solution:** <step-by-step with $KaTeX$>\n**Visualization:**\n![<title>](data:image/svg+xml,<encodeURIComponent_svg>)\n\nAlways provide both the mathematical solution AND the visual when graphics are suitable.`,\n\t\tenabled: true,\n\t\torder: 2,\n\t},\n\t{\n\t\tlabel: \"Write code\",\n\t\tinstruction: `Generate code based on the recognized request/description.\n\nFormat:\n**Request:** <what the code should do>\n**Language:** <programming language>\n**Code:**\n\\`\\`\\`<lang>\n<code>\n\\`\\`\\`\n\nWrite clean, functional code with meaningful names and brief comments.`,\n\t\tenabled: true,\n\t\torder: 3,\n\t},\n\t{\n\t\tlabel: \"Extract CSS\",\n\t\tinstruction: `Generate CSS that matches the visual appearance of the content.\n\nExtract:\n- Colors (oklch, hex, rgb)\n- Typography (font, size, weight)\n- Spacing (padding, margin, gap)\n- Layout (flex, grid)\n- Effects (shadow, radius, gradients)\n\nUse CSS custom properties and modern syntax.\nInclude responsive considerations.`,\n\t\tenabled: true,\n\t\torder: 4,\n\t},\n\t{\n\t\tlabel: \"Generate Diagram\",\n\t\tinstruction: `Generate SVG diagrams, charts, or visual representations from descriptions.\n\nOutput as inline data URI: ![<title>](data:image/svg+xml,<encoded_svg>)\n\nDiagram Types:\n• Flowcharts: processes, algorithms, decision trees\n• Charts: bar, line, pie, scatter plots\n• Diagrams: UML, ER, network, architecture\n• Graphs: mathematical functions, data visualization\n• Geometric: shapes, constructions, proofs\n\nSVG Requirements:\n1. Use encodeURIComponent() for the SVG string\n2. viewBox=\"0 0 600 400\" (adjust as needed)\n3. Clean, minimal SVG with proper structure\n4. Colors: #3b82f6 primary, #10b981 secondary, #f59e0b accent\n5. Include labels, arrows, and legends\n6. Use <text> for readable annotations\n\nExample output format:\n**Diagram:** <description>\n![<title>](data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20400%20300%22%3E...%3C%2Fsvg%3E)`,\n\t\tenabled: true,\n\t\torder: 5,\n\t},\n\t{\n\t\tlabel: \"Extract contacts\",\n\t\tinstruction:\n\t\t\t\"Focus on extracting contact information: phone numbers, emails, addresses, and names. Format phone numbers in E.164 format.\",\n\t\tenabled: true,\n\t\torder: 6,\n\t},\n\t{\n\t\tlabel: \"Summarize content\",\n\t\tinstruction: \"Provide a brief summary of the recognized content. Include key points and main takeaways.\",\n\t\tenabled: true,\n\t\torder: 7,\n\t},\n\t{\n\t\tlabel: \"Extract URLs and links\",\n\t\tinstruction: \"Focus on extracting all URLs, links, and web addresses. Validate and normalize them.\",\n\t\tenabled: true,\n\t\torder: 8,\n\t},\n\t{\n\t\tlabel: \"Code extraction\",\n\t\tinstruction:\n\t\t\t\"Focus on extracting code snippets. Detect the programming language and format appropriately with syntax highlighting markers.\",\n\t\tenabled: true,\n\t\torder: 9,\n\t},\n\t{\n\t\tlabel: \"Table extraction\",\n\t\tinstruction: \"Focus on extracting tabular data. Format as proper Markdown tables with headers.\",\n\t\tenabled: true,\n\t\torder: 10,\n\t},\n];\n"],"names":[],"mappings":"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"}