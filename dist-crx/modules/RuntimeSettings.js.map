{"version":3,"file":"RuntimeSettings.js","sources":["../../src/com/config/RuntimeSettings.ts"],"sourcesContent":["import { loadSettings } from \"./Settings\";\r\nimport type { AppSettings } from \"./SettingsTypes\";\r\nimport { DEFAULT_SETTINGS } from \"./SettingsTypes\";\r\n\r\nexport type RuntimeSettingsProvider = () => Promise<AppSettings> | AppSettings;\r\n\r\nlet provider: RuntimeSettingsProvider = loadSettings;//async () => DEFAULT_SETTINGS;\r\n\r\n/**\r\n * Allows non-browser runtimes (Node/Deno backend) to supply settings without IndexedDB/chrome storage.\r\n * Frontend apps can also set this to bridge to their existing settings storage.\r\n */\r\nexport const setRuntimeSettingsProvider = (next: RuntimeSettingsProvider) => {\r\n    provider = next;\r\n};\r\n\r\nexport const getRuntimeSettings = async (): Promise<AppSettings> => {\r\n    try {\r\n        const value = await provider();\r\n        return value || DEFAULT_SETTINGS;\r\n    } catch {\r\n        return DEFAULT_SETTINGS;\r\n    }\r\n};\r\n"],"names":[],"mappings":";;;;AAMA,IAAI,QAAA,GAAoC,YAAA;AAMjC,MAAM,0BAAA,GAA6B,CAAC,IAAA,KAAkC;AACzE,EAAA,QAAA,GAAW,IAAA;AACf;AAEO,MAAM,qBAAqB,YAAkC;AAChE,EAAA,IAAI;AACA,IAAA,MAAM,KAAA,GAAQ,MAAM,QAAA,EAAS;AAC7B,IAAA,OAAO,KAAA,IAAS,gBAAA;AAAA,EACpB,CAAA,CAAA,MAAQ;AACJ,IAAA,OAAO,gBAAA;AAAA,EACX;AACJ;;;;"}