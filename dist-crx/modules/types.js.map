{"version":3,"file":"types.js","sources":["../../src/frontend/views/types.ts"],"sourcesContent":["/**\n * View Component Types\n * \n * Common types used across all view components.\n */\n\nimport type { View, ViewOptions, ShellContext } from \"../shells/types\";\n\n// ============================================================================\n// VIEW BASE TYPES\n// ============================================================================\n\n/**\n * Base options for view creation\n */\nexport interface BaseViewOptions extends ViewOptions {\n    shellContext?: ShellContext;\n    params?: Record<string, string>;\n}\n\n/**\n * Markdown content for viewer/editor\n */\nexport interface MarkdownContent {\n    content: string;\n    filename?: string;\n    source?: string;\n    modified?: boolean;\n}\n\n/**\n * File content for file-based views\n */\nexport interface FileContent {\n    file: File;\n    filename: string;\n    mimeType: string;\n    path?: string;\n}\n\nexport type ViewReceiveSource = \"share-target\" | \"launch-queue\" | \"pending\" | \"clipboard\";\n\nexport interface ViewReceiveHint {\n    destination?: string;\n    action?: \"open\" | \"attach\" | \"save\" | \"process\";\n    filename?: string;\n    contentType?: string;\n}\n\nexport interface ViewReceivePayload {\n    source: ViewReceiveSource;\n    route: string;\n    title?: string;\n    text?: string;\n    url?: string;\n    files?: File[];\n    pending?: boolean;\n    hint?: ViewReceiveHint;\n    metadata?: Record<string, unknown>;\n}\n\n/**\n * View state persistence\n */\nexport interface ViewState<T = unknown> {\n    load(): T | null;\n    save(state: T): void;\n    clear(): void;\n}\n\n// ============================================================================\n// VIEW EVENT TYPES\n// ============================================================================\n\n/**\n * View content change event\n */\nexport interface ContentChangeEvent {\n    content: string;\n    source: string;\n    timestamp: number;\n}\n\n/**\n * View action event\n */\nexport interface ViewActionEvent {\n    action: string;\n    payload?: unknown;\n    timestamp: number;\n}\n\n// ============================================================================\n// VIEW UTILITIES\n// ============================================================================\n\n/**\n * Create a simple view state persistence helper\n */\nexport function createViewState<T>(key: string): ViewState<T> {\n    return {\n        load(): T | null {\n            try {\n                const stored = localStorage.getItem(key);\n                return stored ? JSON.parse(stored) : null;\n            } catch {\n                return null;\n            }\n        },\n        save(state: T): void {\n            try {\n                localStorage.setItem(key, JSON.stringify(state));\n            } catch {\n                // ignore\n            }\n        },\n        clear(): void {\n            try {\n                localStorage.removeItem(key);\n            } catch {\n                // ignore\n            }\n        }\n    };\n}\n\n/**\n * Create a loading placeholder element\n */\nexport function createLoadingElement(message = \"Loading...\"): HTMLElement {\n    const el = document.createElement(\"div\");\n    el.className = \"view-loading\";\n    el.innerHTML = `\n        <div class=\"view-loading__spinner\"></div>\n        <span class=\"view-loading__text\">${message}</span>\n    `;\n    return el;\n}\n\n/**\n * Create an error placeholder element\n */\nexport function createErrorElement(message: string, retryFn?: () => void): HTMLElement {\n    const el = document.createElement(\"div\");\n    el.className = \"view-error\";\n    el.innerHTML = `\n        <div class=\"view-error__icon\">⚠️</div>\n        <h3 class=\"view-error__title\">Error</h3>\n        <p class=\"view-error__message\">${message}</p>\n        ${retryFn ? '<button class=\"view-error__retry\" type=\"button\">Try Again</button>' : ''}\n    `;\n    \n    if (retryFn) {\n        const btn = el.querySelector(\".view-error__retry\");\n        btn?.addEventListener(\"click\", retryFn);\n    }\n    \n    return el;\n}\n"],"names":[],"mappings":"AAmGO,SAAS,gBAAmB,GAAA,EAA2B;AAC1D,EAAA,OAAO;AAAA,IACH,IAAA,GAAiB;AACb,MAAA,IAAI;AACA,QAAA,MAAM,MAAA,GAAS,YAAA,CAAa,OAAA,CAAQ,GAAG,CAAA;AACvC,QAAA,OAAO,MAAA,GAAS,IAAA,CAAK,KAAA,CAAM,MAAM,CAAA,GAAI,IAAA;AAAA,MACzC,CAAA,CAAA,MAAQ;AACJ,QAAA,OAAO,IAAA;AAAA,MACX;AAAA,IACJ,CAAA;AAAA,IACA,KAAK,KAAA,EAAgB;AACjB,MAAA,IAAI;AACA,QAAA,YAAA,CAAa,OAAA,CAAQ,GAAA,EAAK,IAAA,CAAK,SAAA,CAAU,KAAK,CAAC,CAAA;AAAA,MACnD,CAAA,CAAA,MAAQ;AAAA,MAER;AAAA,IACJ,CAAA;AAAA,IACA,KAAA,GAAc;AACV,MAAA,IAAI;AACA,QAAA,YAAA,CAAa,WAAW,GAAG,CAAA;AAAA,MAC/B,CAAA,CAAA,MAAQ;AAAA,MAER;AAAA,IACJ;AAAA,GACJ;AACJ;;;;"}