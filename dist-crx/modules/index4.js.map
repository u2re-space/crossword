{"version":3,"file":"index4.js","sources":["../../src/frontend/shells/faint/index.ts"],"sourcesContent":["/**\n * Faint Shell\n *\n * Experimental tabbed interface with sidebar navigation.\n * Features:\n * - Collapsible sidebar with icons\n * - Tabbed view management\n * - Speed dial home view\n * - Dynamic view creation\n * - Theme support with wallpapers\n */\n\nimport { ShellBase } from \"../shell\";\nimport { H } from \"fest/lure\";\nimport { ref, observe, affected } from \"fest/object\";\nimport { ViewRegistry } from \"../../shared/registry\";\nimport type { ShellId, ShellLayoutConfig, ViewId } from \"../types\";\n\n// @ts-ignore - SCSS import\nimport style from \"./faint.scss?inline\";\n\n// Side effect: register icon component\nimport \"fest/icon\";\n// Side effect: register fl-ui components\nimport \"fest/fl-ui\";\n\n// ============================================================================\n// FAINT SHELL IMPLEMENTATION\n// ============================================================================\n\nexport class FaintShell extends ShellBase {\n    id: ShellId = \"faint\";\n    name = \"Faint\";\n\n    layout: ShellLayoutConfig = {\n        hasSidebar: true,\n        hasToolbar: true,\n        hasTabs: true,\n        supportsMultiView: true,\n        supportsWindowing: false\n    };\n\n    // UI State\n    private sidebarCollapsed = ref(false);\n    private openTabs = observe(new Map<ViewId, { name: string; icon: string }>());\n    private activeTab = ref<ViewId>(\"home\");\n\n    // UI Elements (used for future extensions)\n    // @ts-expect-error - kept for future use\n    private sidebarElement: HTMLElement | null = null;\n    // @ts-expect-error - kept for future use\n    private tabBarElement: HTMLElement | null = null;\n\n    protected createLayout(): HTMLElement {\n        const root = H`\n            <div class=\"app-shell\" data-shell=\"faint\">\n                ${this.createSidebar()}\n                <div class=\"app-shell__main\">\n                    ${this.createTabBar()}\n                    <div class=\"app-shell__toolbar\" data-shell-toolbar>\n                        <!-- View-specific toolbar -->\n                    </div>\n                    <main class=\"app-shell__content\" data-shell-content role=\"main\">\n                        ${this.createHomeView()}\n                    </main>\n                </div>\n                <div class=\"app-shell__status\" data-shell-status hidden aria-live=\"polite\"></div>\n            </div>\n        ` as HTMLElement;\n\n        return root;\n    }\n\n    private createSidebar(): HTMLElement {\n        const mainViews: Array<{ id: ViewId; name: string; icon: string; category?: string }> = [\n            { id: \"home\", name: \"Home\", icon: \"house\" },\n            { id: \"viewer\", name: \"Viewer\", icon: \"eye\" },\n            { id: \"editor\", name: \"Editor\", icon: \"pencil\" },\n            { id: \"workcenter\", name: \"Work Center\", icon: \"lightning\" },\n            { id: \"explorer\", name: \"Explorer\", icon: \"folder\" },\n            { id: \"airpad\", name: \"Airpad\", icon: \"hand-pointing\" },\n            { id: \"settings\", name: \"Settings\", icon: \"gear\" },\n            { id: \"history\", name: \"History\", icon: \"clock-counter-clockwise\" }\n        ];\n\n        const sidebar = H`\n            <aside class=\"app-shell__sidebar\" data-collapsed=\"${this.sidebarCollapsed.value}\">\n                <div class=\"app-shell__sidebar-header\">\n                    <button\n                        class=\"app-shell__sidebar-toggle\"\n                        type=\"button\"\n                        title=\"Toggle sidebar\"\n                        aria-label=\"Toggle sidebar\"\n                    >\n                        <ui-icon icon=\"sidebar\" icon-style=\"duotone\"></ui-icon>\n                    </button>\n                </div>\n                <nav class=\"app-shell__sidebar-nav\" role=\"navigation\">\n                    ${mainViews.map(item => H`\n                        <button\n                            class=\"app-shell__sidebar-item\"\n                            data-view=\"${item.id}\"\n                            type=\"button\"\n                            title=\"${item.name}\"\n                        >\n                            <ui-icon icon=\"${item.icon}\" icon-style=\"duotone\"></ui-icon>\n                            <span class=\"app-shell__sidebar-label\">${item.name}</span>\n                        </button>\n                    `)}\n                </nav>\n            </aside>\n        ` as HTMLElement;\n\n        // Toggle sidebar\n        const toggleBtn = sidebar.querySelector(\".app-shell__sidebar-toggle\");\n        toggleBtn?.addEventListener(\"click\", () => {\n            this.sidebarCollapsed.value = !this.sidebarCollapsed.value;\n            sidebar.dataset.collapsed = String(this.sidebarCollapsed.value);\n        });\n\n        // Navigation click handler\n        sidebar.addEventListener(\"click\", (e) => {\n            const target = e.target as HTMLElement;\n            const button = target.closest(\"[data-view]\") as HTMLButtonElement | null;\n            if (!button) return;\n\n            const viewId = button.dataset.view as ViewId;\n            if (viewId) {\n                this.navigate(viewId);\n            }\n        });\n\n        // Update active state\n        affected(this.activeTab, (viewId) => {\n            const buttons = sidebar.querySelectorAll(\"[data-view]\");\n            buttons.forEach(btn => {\n                const isActive = (btn as HTMLElement).dataset.view === viewId;\n                btn.classList.toggle(\"active\", isActive);\n            });\n        });\n\n        this.sidebarElement = sidebar;\n        return sidebar;\n    }\n\n    private createTabBar(): HTMLElement {\n        const tabBar = H`\n            <div class=\"app-shell__tabs\" role=\"tablist\">\n                <div class=\"app-shell__tabs-list\" data-tabs-list>\n                    <!-- Tabs render here -->\n                </div>\n                <div class=\"app-shell__tabs-actions\">\n                    <button class=\"app-shell__tabs-add\" type=\"button\" title=\"New tab\" aria-label=\"New tab\">\n                        <ui-icon icon=\"plus\" icon-style=\"bold\"></ui-icon>\n                    </button>\n                </div>\n            </div>\n        ` as HTMLElement;\n\n        // Re-render tabs when openTabs changes\n        affected(this.openTabs as any, () => {\n            this.renderTabs(tabBar);\n        });\n\n        // Also re-render when active tab changes\n        affected(this.activeTab, () => {\n            this.renderTabs(tabBar);\n        });\n\n        this.tabBarElement = tabBar;\n        return tabBar;\n    }\n\n    private renderTabs(tabBar: HTMLElement): void {\n        const tabsList = tabBar.querySelector(\"[data-tabs-list]\");\n        if (!tabsList) return;\n\n        tabsList.replaceChildren();\n\n        // Always show home tab\n        const homeTab = this.createTabElement(\"home\", \"Home\", \"house\");\n        tabsList.appendChild(homeTab);\n\n        // Add open tabs\n        for (const [viewId, info] of this.openTabs) {\n            if (viewId === \"home\") continue;\n            const tab = this.createTabElement(viewId, info.name, info.icon);\n            tabsList.appendChild(tab);\n        }\n    }\n\n    private createTabElement(viewId: ViewId, name: string, icon: string): HTMLElement {\n        const isActive = this.activeTab.value === viewId;\n        const isCloseable = viewId !== \"home\";\n\n        const tab = H`\n            <div\n                class=\"app-shell__tab ${isActive ? \"active\" : \"\"}\"\n                data-tab=\"${viewId}\"\n                role=\"tab\"\n                aria-selected=\"${isActive}\"\n            >\n                <ui-icon icon=\"${icon}\" icon-style=\"duotone\"></ui-icon>\n                <span class=\"app-shell__tab-label\">${name}</span>\n                ${isCloseable ? H`\n                    <button\n                        class=\"app-shell__tab-close\"\n                        type=\"button\"\n                        title=\"Close tab\"\n                        data-close=\"${viewId}\"\n                    >\n                        <ui-icon icon=\"x\" icon-style=\"bold\" size=\"12\"></ui-icon>\n                    </button>\n                ` : \"\"}\n            </div>\n        ` as HTMLElement;\n\n        // Tab click handler\n        tab.addEventListener(\"click\", (e) => {\n            const target = e.target as HTMLElement;\n            const closeBtn = target.closest(\"[data-close]\");\n\n            if (closeBtn) {\n                // Close tab\n                const closeId = (closeBtn as HTMLElement).dataset.close as ViewId;\n                this.closeTab(closeId);\n            } else {\n                // Activate tab\n                this.navigate(viewId);\n            }\n        });\n\n        return tab;\n    }\n\n    private closeTab(viewId: ViewId): void {\n        if (viewId === \"home\") return;\n\n        // Remove from open tabs\n        this.openTabs.delete(viewId);\n\n        // If closing active tab, switch to another\n        if (this.activeTab.value === viewId) {\n            const remaining = Array.from(this.openTabs.keys());\n            const nextTab = remaining[remaining.length - 1] || \"home\";\n            this.navigate(nextTab);\n        }\n\n        // Unload view\n        ViewRegistry.unload(viewId);\n    }\n\n    private createHomeView(): HTMLElement {\n        // Simple home/speed dial view\n        const home = H`\n            <div class=\"app-shell__home\" data-view-id=\"home\">\n                <div class=\"app-shell__home-content\">\n                    <h1 class=\"app-shell__home-title\">CrossWord</h1>\n                    <p class=\"app-shell__home-subtitle\">Select a view from the sidebar to get started</p>\n                    <div class=\"app-shell__home-quick-actions\">\n                        <button class=\"app-shell__home-action\" data-view=\"viewer\" type=\"button\">\n                            <ui-icon icon=\"eye\" icon-style=\"duotone\" size=\"32\"></ui-icon>\n                            <span>Viewer</span>\n                        </button>\n                        <button class=\"app-shell__home-action\" data-view=\"workcenter\" type=\"button\">\n                            <ui-icon icon=\"lightning\" icon-style=\"duotone\" size=\"32\"></ui-icon>\n                            <span>Work Center</span>\n                        </button>\n                        <button class=\"app-shell__home-action\" data-view=\"explorer\" type=\"button\">\n                            <ui-icon icon=\"folder\" icon-style=\"duotone\" size=\"32\"></ui-icon>\n                            <span>Explorer</span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        ` as HTMLElement;\n\n        // Quick action clicks\n        home.addEventListener(\"click\", (e) => {\n            const target = e.target as HTMLElement;\n            const button = target.closest(\"[data-view]\") as HTMLButtonElement | null;\n            if (!button) return;\n\n            const viewId = button.dataset.view as ViewId;\n            if (viewId) {\n                this.navigate(viewId);\n            }\n        });\n\n        return home;\n    }\n\n    protected getStylesheet(): string | null {\n        return style;\n    }\n\n    async navigate(viewId: ViewId, params?: Record<string, string>): Promise<void> {\n        console.log(`[Faint] Navigating to: ${viewId}`);\n\n        // Update active tab\n        this.activeTab.value = viewId;\n\n        // Add to open tabs if not home\n        if (viewId !== \"home\" && !this.openTabs.has(viewId)) {\n            const registration = ViewRegistry.get(viewId);\n            this.openTabs.set(viewId, {\n                name: registration?.name || viewId,\n                icon: registration?.icon || \"circle\"\n            });\n        }\n\n        // Call parent navigation\n        await super.navigate(viewId, params);\n    }\n\n    async mount(container: HTMLElement): Promise<void> {\n        await super.mount(container);\n\n        // Setup path-based navigation\n        this.setupPopstateNavigation();\n\n        // Navigate based on pathname\n        const pathname = globalThis?.location?.pathname?.replace(/^\\//, \"\").toLowerCase();\n        if (pathname && pathname !== \"home\") {\n            await this.navigate(pathname as ViewId);\n        } else {\n            this.activeTab.value = \"home\";\n        }\n    }\n}\n\n// ============================================================================\n// FACTORY FUNCTION\n// ============================================================================\n\n/**\n * Create a faint shell instance\n */\nexport function createShell(_container: HTMLElement): FaintShell {\n    return new FaintShell();\n}\n\nexport default createShell;\n"],"names":[],"mappings":"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"}