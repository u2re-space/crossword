{"version":3,"mappings":"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","names":["renderTabName","stripMarkdown","file","content","index","__vite_import_meta_env__","storeShareTargetPayloadToCacheGateway","consumeCachedShareTargetPayloadFromGateway","withNativeBlob","withNativeArrayBuffer","isView","lookup","encode","decode","protocol","globalThis","DEFAULT_TRANSPORTS","Socket","RESERVED_EVENTS","Engine","sendKeyboardChar","io","lastTimestamp","lastMotionSentAt","resetMonteCarloSampling","onEnterAirMove","averageRateSampleCount","averageRateSampled","averageRateResolved","getCalibrationConfidence","addMonteCarloSample","gravityCorrection","gyroOnEnterAirMove","accelOnEnterAirMove","wsSendKeyboardChar"],"ignoreList":[19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47],"sources":["../../src/core/api/index.ts","../../src/core/text/index.ts","../../src/core/phone/index.ts","../../src/core/document/markdown.ts","../../src/core/document/Parser.ts","../../src/core/storage/file-utils.ts","../../src/core/modules/LazyLoader.ts","../../src/core/storage/FileHandling.ts","../../src/core/modules/VoiceInput.ts","../../src/core/modules/TemplateManager.ts","../../src/core/modules/HistoryManager.ts","../../src/core/utils/Utils.ts","../../src/core/utils/DebugTaskGenerator.ts","../../src/core/index.ts","../../src/frontend/pwa/pwa-copy.ts","../../src/frontend/pwa/sw-url.ts","../../src/com/core/ViewTransferRouting.ts","../../src/frontend/pwa/sw-handling.ts","../../src/frontend/views/airpad/utils/utils.ts","../../../../node_modules/engine.io-parser/build/esm/commons.js","../../../../node_modules/engine.io-parser/build/esm/encodePacket.browser.js","../../../../node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","../../../../node_modules/engine.io-parser/build/esm/decodePacket.browser.js","../../../../node_modules/engine.io-parser/build/esm/index.js","../../../../node_modules/@socket.io/component-emitter/lib/esm/index.js","../../../../node_modules/engine.io-client/build/esm/globals.js","../../../../node_modules/engine.io-client/build/esm/util.js","../../../../node_modules/engine.io-client/build/esm/contrib/parseqs.js","../../../../node_modules/engine.io-client/build/esm/transport.js","../../../../node_modules/engine.io-client/build/esm/transports/polling.js","../../../../node_modules/engine.io-client/build/esm/contrib/has-cors.js","../../../../node_modules/engine.io-client/build/esm/transports/polling-xhr.js","../../../../node_modules/engine.io-client/build/esm/transports/websocket.js","../../../../node_modules/engine.io-client/build/esm/transports/webtransport.js","../../../../node_modules/engine.io-client/build/esm/transports/index.js","../../../../node_modules/engine.io-client/build/esm/contrib/parseuri.js","../../../../node_modules/engine.io-client/build/esm/socket.js","../../../../node_modules/engine.io-client/build/esm/transports/polling-fetch.js","../../../../node_modules/engine.io-client/build/esm/index.js","../../../../node_modules/socket.io-client/build/esm/url.js","../../../../node_modules/socket.io-parser/build/esm/is-binary.js","../../../../node_modules/socket.io-parser/build/esm/binary.js","../../../../node_modules/socket.io-parser/build/esm/index.js","../../../../node_modules/socket.io-client/build/esm/on.js","../../../../node_modules/socket.io-client/build/esm/socket.js","../../../../node_modules/socket.io-client/build/esm/contrib/backo2.js","../../../../node_modules/socket.io-client/build/esm/manager.js","../../../../node_modules/socket.io-client/build/esm/index.js","../../src/frontend/views/airpad/config/config.ts","../../src/frontend/views/airpad/network/websocket.ts","../../src/frontend/views/airpad/input/speech.ts","../../src/frontend/views/airpad/config/motion-state.ts","../../src/frontend/views/airpad/utils/math.ts","../../src/frontend/views/airpad/input/unfinised/gravity-sensor.ts","../../src/frontend/views/airpad/input/unfinised/gyroscope.ts","../../src/frontend/views/airpad/input/unfinised/accelerometer.ts","../../src/frontend/views/airpad/ui/air-button.ts","../../src/frontend/views/airpad/input/sensor/relative-orientation.ts","../../src/frontend/views/airpad/input/keyboard/api.ts","../../src/frontend/views/airpad/input/keyboard/state.ts","../../src/frontend/views/airpad/input/keyboard/constants.ts","../../src/frontend/views/airpad/input/keyboard/message.ts","../../src/frontend/views/airpad/input/keyboard/ui.ts","../../src/frontend/views/airpad/input/keyboard/handlers.ts","../../src/frontend/views/airpad/input/virtual-keyboard.ts","../../src/frontend/views/airpad/ui/clipboard-toolbar.ts","../../src/frontend/views/airpad/ui/config-ui.ts","../../src/frontend/views/airpad/main.ts"],"sourcesContent":["/**\n * API Module\n *\n * Provides API client and service communication utilities.\n * Used for backend API calls and processing requests.\n */\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n/**\n * API response wrapper\n */\nexport interface ApiResponse<T = unknown> {\n    success: boolean;\n    data?: T;\n    error?: string;\n    metadata?: Record<string, unknown>;\n}\n\n/**\n * Processing request options\n */\nexport interface ProcessingOptions {\n    content: string | File | Blob;\n    contentType: \"text\" | \"file\" | \"blob\" | \"base64\";\n    processingType?: \"solve-and-answer\" | \"write-code\" | \"extract-css\" | \"recognize-content\";\n    options?: Record<string, unknown>;\n}\n\n/**\n * Analyze request options\n */\nexport interface AnalyzeOptions {\n    content: string;\n    contentType?: string;\n    options?: Record<string, unknown>;\n}\n\n// ============================================================================\n// API ENDPOINTS\n// ============================================================================\n\n/**\n * API endpoint paths\n */\nexport const API_PATHS = {\n    PROCESSING: \"/api/processing\",\n    ANALYZE: \"/api/analyze\",\n    HEALTH: \"/api/health\",\n    TEST: \"/api/test\",\n    PHOSPHOR_ICONS: \"/assets/icons/phosphor\"\n} as const;\n\nexport type ApiPath = typeof API_PATHS[keyof typeof API_PATHS];\n\n// ============================================================================\n// API CLIENT\n// ============================================================================\n\n/**\n * API client for frontend communication with backend services\n */\nexport const api = {\n    /**\n     * Send content for AI processing\n     */\n    async process(options: ProcessingOptions): Promise<ApiResponse> {\n        try {\n            const response = await fetch(API_PATHS.PROCESSING, {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify(options)\n            });\n            return response.json();\n        } catch (error) {\n            return { success: false, error: String(error) };\n        }\n    },\n\n    /**\n     * Analyze content (lighter processing)\n     */\n    async analyze(content: string, contentType = \"text\"): Promise<ApiResponse> {\n        try {\n            const response = await fetch(API_PATHS.ANALYZE, {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({ content, contentType })\n            });\n            return response.json();\n        } catch (error) {\n            return { success: false, error: String(error) };\n        }\n    },\n\n    /**\n     * Health check\n     */\n    async health(): Promise<{ ok: boolean; timestamp?: number }> {\n        try {\n            const response = await fetch(API_PATHS.HEALTH);\n            return response.json();\n        } catch {\n            return { ok: false };\n        }\n    },\n\n    /**\n     * Test API endpoint\n     */\n    async test(): Promise<ApiResponse> {\n        try {\n            const response = await fetch(API_PATHS.TEST);\n            return response.json();\n        } catch (error) {\n            return { success: false, error: String(error) };\n        }\n    },\n\n    /**\n     * Generic GET request\n     */\n    async get<T>(path: string): Promise<ApiResponse<T>> {\n        try {\n            const response = await fetch(path);\n            return response.json();\n        } catch (error) {\n            return { success: false, error: String(error) };\n        }\n    },\n\n    /**\n     * Generic POST request\n     */\n    async post<T>(path: string, data: unknown): Promise<ApiResponse<T>> {\n        try {\n            const response = await fetch(path, {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify(data)\n            });\n            return response.json();\n        } catch (error) {\n            return { success: false, error: String(error) };\n        }\n    }\n};\n\n// ============================================================================\n// FETCH UTILITIES\n// ============================================================================\n\n/**\n * Fetch with timeout\n */\nexport async function fetchWithTimeout(\n    url: string,\n    options: RequestInit = {},\n    timeoutMs = 30000\n): Promise<Response> {\n    const controller = new AbortController();\n    const timeout = setTimeout(() => controller.abort(), timeoutMs);\n\n    try {\n        return await fetch(url, {\n            ...options,\n            signal: controller.signal\n        });\n    } finally {\n        clearTimeout(timeout);\n    }\n}\n\n/**\n * Retry fetch with exponential backoff\n */\nexport async function fetchWithRetry(\n    url: string,\n    options: RequestInit = {},\n    maxRetries = 3,\n    baseDelayMs = 1000\n): Promise<Response> {\n    let lastError: Error | undefined;\n\n    for (let i = 0; i < maxRetries; i++) {\n        try {\n            return await fetch(url, options);\n        } catch (error) {\n            lastError = error as Error;\n            if (i < maxRetries - 1) {\n                await new Promise(resolve =>\n                    setTimeout(resolve, baseDelayMs * Math.pow(2, i))\n                );\n            }\n        }\n    }\n\n    throw lastError || new Error(\"Fetch failed\");\n}\n\n// Default export\nexport default api;\n","/**\n * Text Utilities\n *\n * Text formatting and manipulation utilities.\n */\n\nimport { writeText } from \"@rs-core/modules/Clipboard\";\nimport { parseDateCorrectly, getISOWeekNumber, getTimeZone, formatDateTime } from \"@rs-core/time\";\n\n// ============================================================================\n// STRING UTILITIES\n// ============================================================================\n\n/**\n * Check if fragment is not empty\n */\nexport const isNotEmpty = (frag: any): boolean => {\n    return !!(typeof frag == \"string\" ? frag?.trim?.() : frag);\n};\n\n/**\n * Convert to string safely\n */\nexport const toStringSafe = (value: unknown): string => {\n    return typeof value === \"string\" ? value : value == null ? \"\" : String(value);\n};\n\n/**\n * Collapse whitespace to single spaces\n */\nexport const collapseWhitespace = (value: string): string => {\n    return value.replace(/\\s+/g, \" \").trim();\n};\n\n/**\n * Convert label (capitalize first, replace _ with space)\n */\nexport const MAKE_LABEL = (label: string): string => {\n    return label?.charAt?.(0)?.toUpperCase?.() + label?.slice?.(1)?.replace?.(/_/g, \" \");\n};\n\n/**\n * Crop first letter (uppercase)\n */\nexport const cropFirstLetter = (text: string | any): string => {\n    return text?.charAt?.(0)?.toUpperCase?.() || \"C\";\n};\n\n/**\n * Convert to start case (Title Case)\n */\nexport const startCase = (value: string): string => {\n    return value\n        .replace(/[_\\-]+/g, \" \")\n        .replace(/([a-z0-9])([A-Z])/g, \"$1 $2\")\n        .replace(/\\s+/g, \" \")\n        .trim()\n        .replace(/^./, char => char.toUpperCase());\n};\n\n/**\n * Render tab name (capitalize, replace _ with space)\n */\nexport const renderTabName = (tabName: string): string => {\n    if (!tabName) return \"\";\n    tabName = tabName?.replace?.(/_/g, \" \") || tabName;\n    tabName = (tabName?.charAt?.(0)?.toUpperCase?.() + tabName?.slice?.(1)) || tabName;\n    return tabName;\n};\n\n// ============================================================================\n// MULTILINE UTILITIES\n// ============================================================================\n\n/**\n * Convert value to multiline string\n */\nexport const toMultiline = (value: unknown): string => {\n    if (!value) return \"\";\n    if (Array.isArray(value)) {\n        return value.map(item => (item ?? \"\").toString().trim()).filter(Boolean).join(\"\\n\");\n    }\n    return String(value ?? \"\");\n};\n\n/**\n * Convert multiline string to array\n */\nexport const fromMultiline = (value: string): string[] => {\n    if (!value) return [];\n    return value.split(/\\r?\\n/).map(line => line.trim()).filter(Boolean);\n};\n\n/**\n * Count lines in text\n */\nexport const countLines = (text: string | any): number => {\n    if (!text) return 0;\n    return Array.isArray(text) ? text.length : text?.split?.(/\\r\\n|\\r|\\n/)?.length;\n};\n\n/**\n * Wrap text in span\n */\nexport const wrapBySpan = (text: string | any): string => {\n    if (!text) return \"\";\n    return `<span>${Array.isArray(text) ? text?.join?.(\",\") : text}</span>`;\n};\n\n/**\n * Card render options\n */\nexport interface CardRenderOptions {\n    order?: number | null | undefined;\n}\n\n// ============================================================================\n// PATH UTILITIES\n// ============================================================================\n\n/**\n * Split path by dots\n */\nexport const splitPath = (path: string): string[] => path.split(\".\").filter(Boolean);\n\n/**\n * Get value by path\n */\nexport const getByPath = (source: any, path: string): any => {\n    return splitPath(path).reduce((acc, key) => (acc == null ? acc : acc[key]), source);\n};\n\n/**\n * Set value by path\n */\nexport const setByPath = (target: any, path: string, value: any): void => {\n    const keys = splitPath(path);\n    if (!keys.length) return;\n\n    let current = target;\n    for (let i = 0; i < keys.length - 1; i++) {\n        const key = keys[i];\n        if (typeof current[key] !== \"object\" || current[key] === null) {\n            current[key] = {};\n        }\n        current = current[key];\n    }\n    current[keys[keys.length - 1]] = value;\n};\n\n/**\n * Unset value by path\n */\nexport const unsetByPath = (target: any, path: string): void => {\n    const keys = splitPath(path);\n    if (!keys.length) return;\n\n    const parents: Array<[any, string]> = [];\n    let current = target;\n\n    for (let i = 0; i < keys.length - 1; i++) {\n        const key = keys[i];\n        if (current?.[key] === undefined) return;\n        parents.push([current, key]);\n        current = current[key];\n        if (typeof current !== \"object\" || current === null) return;\n    }\n\n    const lastKey = keys[keys.length - 1];\n    if (current && Object.prototype.hasOwnProperty.call(current, lastKey)) {\n        delete current[lastKey];\n        // Clean up empty parent objects\n        for (let i = parents.length - 1; i >= 0; i--) {\n            const [parent, key] = parents[i];\n            const value = parent[key];\n            if (value && typeof value === \"object\" && !Array.isArray(value) && !Object.keys(value).length) {\n                delete parent[key];\n            } else {\n                break;\n            }\n        }\n    }\n};\n\n/**\n * Make object entries\n */\nexport const makeObjectEntries = (object: any): [string, any][] => {\n    if (!object) return [];\n    if (typeof object == \"object\" || typeof object == \"function\") {\n        return [...Object.entries(object)];\n    }\n    return [];\n};\n\n// ============================================================================\n// MARKDOWN STRIPPING\n// ============================================================================\n\n/**\n * Strip markdown syntax from text\n */\nexport const stripMarkdown = (value: unknown): string => {\n    const input = toStringSafe(value);\n    if (!input) return \"\";\n\n    return input\n        .replace(/```[\\s\\S]*?```/g, \" \")           // code blocks\n        .replace(/`([^`]+)`/g, \"$1\")               // inline code\n        .replace(/!\\[[^\\]]*\\]\\([^\\)]+\\)/g, \" \")    // images\n        .replace(/\\[([^\\]]+)\\]\\([^\\)]+\\)/g, \"$1\")  // links\n        .replace(/(^|\\n)\\s{0,3}>\\s?/g, \"$1\")       // blockquotes\n        .replace(/(^|\\n)\\s{0,3}#{1,6}\\s+/g, \"$1\")  // headers\n        .replace(/(^|\\n)\\s{0,3}[-*+]\\s+/g, \"$1\")   // unordered lists\n        .replace(/(^|\\n)\\s{0,3}\\d+\\.\\s+/g, \"$1\")   // ordered lists\n        .replace(/(^|\\n)---[\\s\\S]*?---(?=\\n|$)/g, \"$1\") // front matter\n        .replace(/[\\\\*_~]/g, \"\")                   // emphasis chars\n        .replace(/`/g, \"\")                         // remaining backticks\n        .replace(/&nbsp;/gi, \" \")                  // nbsp entities\n        .replace(/<\\/?[^>]+>/g, \" \");              // HTML tags\n};\n\n/**\n * Sanitize document snippet\n */\nexport const sanitizeDocSnippet = (value: unknown): string => {\n    return collapseWhitespace(stripMarkdown(value));\n};\n\n/**\n * Truncate document snippet\n */\nexport const truncateDocSnippet = (value: string, limit = 260): string => {\n    const trimmed = value.trim();\n    if (!limit || trimmed.length <= limit) return trimmed;\n    return `${trimmed.slice(0, Math.max(1, limit - 1)).trimEnd()}`;\n};\n\n// ============================================================================\n// DATE TITLE BUILDERS\n// ============================================================================\n\n/**\n * Ensure date from various formats\n */\nexport const ensureDate = (value: any): Date | null => {\n    if (!value) return null;\n    const parsed = parseDateCorrectly(value);\n    if (!parsed) return null;\n    const time = parsed.getTime?.();\n    return Number.isFinite(time) ? parsed : null;\n};\n\n/**\n * Resolve begin date from day descriptor\n */\nexport const resolveBeginDate = (dayDesc: any): Date | null => {\n    return ensureDate(dayDesc?.begin_time ?? dayDesc?.properties?.begin_time ?? dayDesc?.start);\n};\n\n/**\n * Build primary day title\n */\nexport const buildPrimaryDayTitle = (dayDesc: any): string => {\n    const preset = dayDesc?.separatorTitle;\n    if (typeof preset === \"string\" && preset.trim()) return preset;\n\n    const date = resolveBeginDate(dayDesc);\n    if (!date) return dayDesc?.title || dayDesc?.id || \"Day\";\n\n    const formatted = date.toLocaleDateString(\"en-GB\", {\n        timeZone: getTimeZone(),\n        weekday: \"long\",\n        month: \"long\",\n        day: \"numeric\",\n        year: \"numeric\"\n    });\n\n    const week = dayDesc?.weekNumber ?? getISOWeekNumber(date);\n    if (week && formatted) return `${formatted}  Week ${week}`;\n    return formatted;\n};\n\n/**\n * Build secondary day title\n */\nexport const buildSecondaryDayTitle = (dayDesc: any, primary: string): string | null => {\n    const label = dayDesc?.title;\n    if (!label) return null;\n    if (!primary) return label;\n    return label.trim() === primary.trim() ? null : label;\n};\n\n// ============================================================================\n// DRAG & COPY HANDLERS\n// ============================================================================\n\n/**\n * Begin drag as text\n */\nexport const beginDragAsText = (ev: DragEvent): void => {\n    const text = (ev.currentTarget as HTMLElement)?.textContent?.trim?.();\n    if (text) {\n        ev.dataTransfer!.effectAllowed = \"copy\";\n        ev.dataTransfer?.clearData?.();\n        ev.dataTransfer?.setData?.(\"plain/text\", text);\n    }\n};\n\n/**\n * Copy phone on click\n */\nexport const copyPhoneClick = (ev: Event): void => {\n    const element = ev.currentTarget as HTMLElement;\n    const isPhoneElement = element?.matches?.('.phone') ? element : element?.querySelector?.('.phone');\n\n    if (isPhoneElement) {\n        ev?.preventDefault?.();\n        ev?.stopPropagation?.();\n        const phone = isPhoneElement?.textContent?.trim?.() ?? '';\n        if (phone) writeText(phone);\n    }\n};\n\n/**\n * Copy email on click\n */\nexport const copyEmailClick = (ev: Event): void => {\n    const element = ev.currentTarget as HTMLElement;\n    const isEmailElement = element?.matches?.('.email') ? element : element?.querySelector?.('.email');\n\n    if (isEmailElement) {\n        ev?.preventDefault?.();\n        ev?.stopPropagation?.();\n        const email = isEmailElement?.textContent?.trim?.() ?? '';\n        if (email) writeText(email);\n    }\n};\n\n// ============================================================================\n// RE-EXPORTS\n// ============================================================================\n\nexport { formatDateTime };\n","/**\n * Phone Utilities\n *\n * Phone number normalization and duplicate detection.\n * Primarily designed for Russian (RF) phone numbers.\n */\n\n// ============================================================================\n// CONSTANTS\n// ============================================================================\n\nexport const PHONE_CANDIDATE_RE = /\\+?\\d[\\d\\s().\\-]{4,}\\d/g;\nexport const EXT_CUT_RE = /(\\.?|\\.?|ext\\.?|extension)\\s*[:#\\-x]*\\s*\\d+.*/i;\n\n// ============================================================================\n// NORMALIZATION OPTIONS\n// ============================================================================\n\nexport interface NormalizeOptions {\n    defaultTrunk?: string;\n    countryCode?: string;\n    cityCode?: string | null;\n    stripExtensions?: boolean;\n    minLocal?: number;\n    maxLocal?: number;\n}\n\nconst DEFAULT_OPTIONS: Required<NormalizeOptions> = {\n    defaultTrunk: '8',\n    countryCode: '7',\n    cityCode: null,\n    stripExtensions: true,\n    minLocal: 5,\n    maxLocal: 7\n};\n\n// ============================================================================\n// NORMALIZATION\n// ============================================================================\n\n/**\n * Normalize a single phone number\n * Returns null if cannot be normalized to valid format\n */\nexport const normalizeOne = (input: string, options: NormalizeOptions = {}): string | null => {\n    if (input == null) return null;\n    const opts = { ...DEFAULT_OPTIONS, ...options };\n\n    let s = String(input).trim();\n    if (!s) return null;\n\n    // Strip extensions\n    if (opts.stripExtensions) {\n        s = s.replace(EXT_CUT_RE, '');\n    }\n\n    // Flag for leading plus (important for +7  8)\n    const hasPlusInStart = /^\\+/.test(s);\n\n    // Remove all non-digit characters\n    let digits = s.replace(/\\D/g, '');\n    if (!digits) return null;\n\n    // Normalization for Russia (RF)\n    if (hasPlusInStart && digits.startsWith(opts.countryCode)) {\n        // +7xxxxxxxxxx  8xxxxxxxxxx\n        digits = opts.defaultTrunk + digits.slice(opts.countryCode.length);\n    } else if (digits.length === 11 && digits.startsWith(opts.countryCode)) {\n        // 7xxxxxxxxxx (11 digits)  8xxxxxxxxxx\n        digits = opts.defaultTrunk + digits.slice(1);\n    } else if (digits.length === 10) {\n        // 10 digits (mobile/local with area code)  prepend defaultTrunk\n        digits = opts.defaultTrunk + digits;\n    } else if (opts.cityCode && digits.length >= opts.minLocal && digits.length <= opts.maxLocal) {\n        // 57 digits (local city numbers)  prepend defaultTrunk + cityCode\n        digits = opts.defaultTrunk + opts.cityCode + digits;\n    } else if (digits.length === 11 && digits.startsWith(opts.defaultTrunk)) {\n        // Already 11 digits starting with defaultTrunk (8)  leave as is\n    } else if (opts.cityCode && digits.length === opts.cityCode.length + 7) {\n        // cityCode + local (no leading 8)  prepend defaultTrunk\n        digits = opts.defaultTrunk + digits;\n    } else {\n        // Could not normalize to 11-digit RF format\n        return null;\n    }\n\n    // Expect 11 digits starting with defaultTrunk (8)\n    return /^\\d{11}$/.test(digits) ? digits : null;\n};\n\n/**\n * Split string into phone candidates\n */\nexport const splitCandidates = (value: string): string[] => {\n    if (value == null) return [];\n    const s = String(value);\n    const matches = s.match(PHONE_CANDIDATE_RE);\n    if (matches?.length) return matches;\n    // Fallback: split by common delimiters\n    return s.split(/[;,/|]+/).map(x => x.trim()).filter(Boolean);\n};\n\n/**\n * Normalize multiple phone numbers\n */\nexport const normalizePhones = (value: string | string[], options: NormalizeOptions = {}): string[] => {\n    const out = new Set<string>();\n\n    if (Array.isArray(value)) {\n        for (const v of value) {\n            if (typeof v === 'string') {\n                for (const cand of splitCandidates(v)) {\n                    const n = normalizeOne(cand, options);\n                    if (n) out.add(n);\n                }\n            } else {\n                const n = normalizeOne(v, options);\n                if (n) out.add(n);\n            }\n        }\n    } else if (typeof value === 'string') {\n        for (const c of splitCandidates(value)) {\n            const n = normalizeOne(c, options);\n            if (n) out.add(n);\n        }\n    } else {\n        const n = normalizeOne(value, options);\n        if (n) out.add(n);\n    }\n\n    return [...out];\n};\n\n// ============================================================================\n// ROW HELPERS\n// ============================================================================\n\n/**\n * Get index for row\n */\nexport const getIndexForRow = (row: any, pos: number): number => {\n    if (Array.isArray(row) && typeof row[1] === 'number') return row[1];\n    if (row && typeof row === 'object' && typeof row.index === 'number') return row.index;\n    return pos;\n};\n\n/**\n * Get phones from row\n */\nexport const getPhonesFromRow = (row: any): any => {\n    if (Array.isArray(row)) return row[0];\n    if (row && typeof row === 'object') {\n        if ('phones' in row) return row.phones;\n        if ('phone' in row) return row.phone;\n    }\n    return row;\n};\n\n// ============================================================================\n// DUPLICATE DETECTION\n// ============================================================================\n\nexport interface DuplicateResult {\n    duplicatesByNumber: Record<string, number[]>;\n    pairs: [number, string[]][];\n    duplicatesByIndex: Record<string, string[]>;\n    normalize: (s: string) => string | null;\n}\n\n/**\n * Find duplicate phone numbers in rows\n */\nexport function findDuplicatePhones(rows: any[], userOptions: NormalizeOptions = {}): DuplicateResult {\n    const options = { ...DEFAULT_OPTIONS, ...userOptions };\n\n    const numberToIndices = new Map<string, Set<number>>();\n    const indexToNumbersAll = new Map<number, Set<string>>();\n\n    rows.forEach((row: any, pos: number) => {\n        const idx = getIndexForRow(row, pos);\n        const phonesRaw = getPhonesFromRow(row);\n        const phones = normalizePhones(phonesRaw, options);\n\n        if (!indexToNumbersAll.has(idx)) indexToNumbersAll.set(idx, new Set());\n        const setForIndex = indexToNumbersAll.get(idx)!;\n\n        for (const p of phones) {\n            setForIndex.add(p);\n            if (!numberToIndices.has(p)) numberToIndices.set(p, new Set());\n            numberToIndices.get(p)!.add(idx);\n        }\n    });\n\n    // Keep only duplicates\n    const duplicatesByNumber: Record<string, number[]> = {};\n    for (const [num, set] of numberToIndices.entries()) {\n        if (set.size > 1) {\n            duplicatesByNumber[num] = [...set].sort((a, b) => a - b);\n        }\n    }\n\n    // For each index  which numbers intersect\n    const duplicatesByIndex: Record<string, string[]> = {};\n    for (const [idx, set] of indexToNumbersAll.entries()) {\n        const dups = [...set].filter(n => duplicatesByNumber[n]);\n        if (dups.length) duplicatesByIndex[idx] = dups.sort();\n    }\n\n    // Pairs [index, phone[]] only where there are intersections\n    const pairs = Object.entries(duplicatesByIndex)\n        .map(([idx, nums]) => [Number(idx), nums] as [number, string[]])\n        .sort((a, b) => a[0] - b[0]);\n\n    return {\n        duplicatesByNumber,\n        pairs,\n        duplicatesByIndex,\n        normalize: (s: string) => normalizeOne(s, options)\n    };\n}\n","/**\n * Markdown Renderer\n *\n * Shared markdown rendering utility.\n * Uses marked for parsing and optionally highlight.js for code highlighting.\n */\n\nimport { H } from \"fest/lure\";\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface RenderOptions {\n    /** Enable syntax highlighting for code blocks */\n    syntaxHighlight?: boolean;\n    /** Enable GitHub Flavored Markdown */\n    gfm?: boolean;\n    /** Sanitize HTML output */\n    sanitize?: boolean;\n    /** Base URL for relative links */\n    baseUrl?: string;\n}\n\nexport interface MarkdownResult {\n    html: string;\n    element?: HTMLElement;\n}\n\n// ============================================================================\n// SIMPLE MARKDOWN PARSER\n// ============================================================================\n\n/**\n * Simple markdown to HTML converter\n * Handles common markdown syntax without external dependencies\n */\nfunction parseMarkdown(markdown: string): string {\n    let html = markdown;\n\n    // Escape HTML entities for code content\n    const escapeHtml = (text: string) => text\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;');\n\n    // Process code blocks first (before other transformations)\n    html = html.replace(/```(\\w*)\\n([\\s\\S]*?)```/g, (_, lang, code) => {\n        const escapedCode = escapeHtml(code.trim());\n        return `<pre><code class=\"language-${lang || 'text'}\">${escapedCode}</code></pre>`;\n    });\n\n    // Inline code\n    html = html.replace(/`([^`]+)`/g, '<code>$1</code>');\n\n    // Headers (must be at start of line)\n    html = html.replace(/^######\\s+(.+)$/gm, '<h6>$1</h6>');\n    html = html.replace(/^#####\\s+(.+)$/gm, '<h5>$1</h5>');\n    html = html.replace(/^####\\s+(.+)$/gm, '<h4>$1</h4>');\n    html = html.replace(/^###\\s+(.+)$/gm, '<h3>$1</h3>');\n    html = html.replace(/^##\\s+(.+)$/gm, '<h2>$1</h2>');\n    html = html.replace(/^#\\s+(.+)$/gm, '<h1>$1</h1>');\n\n    // Bold and italic\n    html = html.replace(/\\*\\*\\*(.+?)\\*\\*\\*/g, '<strong><em>$1</em></strong>');\n    html = html.replace(/\\*\\*(.+?)\\*\\*/g, '<strong>$1</strong>');\n    html = html.replace(/\\*(.+?)\\*/g, '<em>$1</em>');\n    html = html.replace(/___(.+?)___/g, '<strong><em>$1</em></strong>');\n    html = html.replace(/__(.+?)__/g, '<strong>$1</strong>');\n    html = html.replace(/_(.+?)_/g, '<em>$1</em>');\n\n    // Strikethrough\n    html = html.replace(/~~(.+?)~~/g, '<del>$1</del>');\n\n    // Blockquotes\n    html = html.replace(/^>\\s+(.+)$/gm, '<blockquote>$1</blockquote>');\n\n    // Horizontal rules\n    html = html.replace(/^(-{3,}|_{3,}|\\*{3,})$/gm, '<hr>');\n\n    // Unordered lists\n    html = html.replace(/^[\\*\\-]\\s+(.+)$/gm, '<li>$1</li>');\n    html = html.replace(/(<li>.*<\\/li>\\n?)+/g, '<ul>$&</ul>');\n\n    // Ordered lists\n    html = html.replace(/^\\d+\\.\\s+(.+)$/gm, '<li>$1</li>');\n\n    // Links [text](url)\n    html = html.replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, '<a href=\"$2\" target=\"_blank\" rel=\"noopener\">$1</a>');\n\n    // Images ![alt](url)\n    html = html.replace(/!\\[([^\\]]*)\\]\\(([^)]+)\\)/g, '<img src=\"$2\" alt=\"$1\" loading=\"lazy\">');\n\n    // Paragraphs (double newlines)\n    html = html.replace(/\\n\\n+/g, '</p><p>');\n\n    // Single newlines to <br>\n    html = html.replace(/\\n/g, '<br>');\n\n    // Wrap in paragraph if not already\n    if (!html.startsWith('<')) {\n        html = `<p>${html}</p>`;\n    }\n\n    // Clean up empty paragraphs\n    html = html.replace(/<p>\\s*<\\/p>/g, '');\n    html = html.replace(/<p><br><\\/p>/g, '');\n\n    return html;\n}\n\n// ============================================================================\n// MARKDOWN RENDERING\n// ============================================================================\n\n/**\n * Render markdown to HTML string\n */\nexport async function renderMarkdown(\n    markdown: string,\n    options: RenderOptions = {}\n): Promise<string> {\n    const { gfm = true } = options;\n\n    // Try to use marked library if available\n    try {\n        const { marked } = await import(\"marked\");\n        return await marked.parse(markdown, { gfm, breaks: true });\n    } catch {\n        // Fallback to simple parser\n        return parseMarkdown(markdown);\n    }\n}\n\n/**\n * Render markdown to DOM element\n */\nexport async function renderMarkdownToElement(\n    markdown: string,\n    options: RenderOptions = {}\n): Promise<HTMLElement> {\n    const html = await renderMarkdown(markdown, options);\n    return H`<div class=\"markdown-body\">${html}</div>` as HTMLElement;\n}\n\n/**\n * Render markdown synchronously (simple parser only)\n */\nexport function renderMarkdownSync(markdown: string): string {\n    return parseMarkdown(markdown);\n}\n\n/**\n * Extract plain text from markdown\n */\nexport function stripMarkdown(markdown: string): string {\n    return markdown\n        // Remove code blocks\n        .replace(/```[\\s\\S]*?```/g, '')\n        .replace(/`[^`]+`/g, '')\n        // Remove headers\n        .replace(/^#+\\s+/gm, '')\n        // Remove emphasis\n        .replace(/[*_]{1,3}([^*_]+)[*_]{1,3}/g, '$1')\n        // Remove links but keep text\n        .replace(/\\[([^\\]]+)\\]\\([^)]+\\)/g, '$1')\n        // Remove images\n        .replace(/!\\[[^\\]]*\\]\\([^)]+\\)/g, '')\n        // Remove blockquotes\n        .replace(/^>\\s+/gm, '')\n        // Remove horizontal rules\n        .replace(/^[-_*]{3,}$/gm, '')\n        // Trim whitespace\n        .trim();\n}\n\n/**\n * Extract title from markdown (first h1 or first line)\n */\nexport function extractTitle(markdown: string): string {\n    const h1Match = markdown.match(/^#\\s+(.+)$/m);\n    if (h1Match) return h1Match[1].trim();\n\n    const firstLine = markdown.split('\\n')[0];\n    return stripMarkdown(firstLine).slice(0, 100);\n}\n\n/**\n * Check if content is likely markdown\n */\nexport function isLikelyMarkdown(content: string): boolean {\n    const mdPatterns = [\n        /^#+ /m,           // Headers\n        /\\*\\*[^*]+\\*\\*/,   // Bold\n        /\\[[^\\]]+\\]\\([^)]+\\)/, // Links\n        /```[\\s\\S]*?```/,  // Code blocks\n        /^[-*] /m,         // Lists\n        /^>\\s/m            // Blockquotes\n    ];\n\n    return mdPatterns.some(pattern => pattern.test(content));\n}\n","import { H } from \"fest/lure\";\nimport type { DocCollection, DocEntry, DocParser } from \"../utils/Types\";\nimport { formatDateTime, sanitizeDocSnippet, truncateDocSnippet } from \"@rs-core/text\";\n\n//\nexport const parseMarkdownEntry: DocParser = async ({ collection, file, filePath }) => {\n    const text = await file.text();\n    const rawTitleLine = text.trim().split(/\\r?\\n/).find((line) => line.trim().length) || \"\";\n    const sanitizedTitle = sanitizeDocSnippet(rawTitleLine);\n    const fallbackTitle = sanitizeDocSnippet(file.name.replace(/\\.[^.]+$/, \"\")) || file.name;\n    const title = sanitizedTitle || fallbackTitle;\n    const summarySource = text.trim().split(/\\r?\\n/).slice(0, 6).join(\" \");\n    const summary = truncateDocSnippet(sanitizeDocSnippet(summarySource));\n    const sanitizedBody = sanitizeDocSnippet(text);\n\n    //\n    const blob = new Blob([text], { type: \"text/markdown\" });\n    const url = URL.createObjectURL(blob);\n    const wordCount = text.split(/\\s+/).filter(Boolean).length;\n\n    const $setter = (el) => {\n        el?.renderMarkdown?.(text);\n    }\n\n    const entry: DocEntry = {\n        id: `${collection.id}:${filePath}`,\n        title,\n        subtitle: formatDateTime(file.lastModified),\n        summary: summary || undefined,\n        path: filePath,\n        fileName: file.name,\n        collectionId: collection.id,\n        modifiedAt: file.lastModified,\n        wordCount,\n        searchText: [title, summary, truncateDocSnippet(sanitizedBody, 20000)].filter(Boolean).join(\" \\n\").toLowerCase(),\n        renderPreview: (container) => {\n            container.replaceChildren(\n                H`<div class=\"doc-preview-frame\">\n                    <header class=\"doc-preview-header\">\n                        <div>\n                            <h2>${title || file.name}</h2>\n                            <p class=\"doc-subtitle\">Updated ${formatDateTime(file.lastModified)}</p>\n                        </div>\n                        ${wordCount ? H`<span class=\"doc-meta-tag\">${wordCount} words</span>` : null}\n                    </header>\n                    <md-view ref=${$setter} src=${url}></md-view>\n                </div>`\n            );\n        },\n        //dispose: () => URL.revokeObjectURL(url),\n        raw: text\n    };\n\n    return entry;\n};\n\n//\nexport const unique = <T,>(values: T[]) => Array.from(new Set(values));\nexport const normalizeCollections = (collections: DocCollection[]): DocCollection[] => {\n    return collections.map((collection) => {\n        const dirs = collection.dirs?.length\n            ? collection.dirs.slice()\n            : collection.dir\n                ? [collection.dir]\n                : [];\n        const normalized = { ...collection, dirs };\n        if (!normalized.emptyState && collection.description) {\n            normalized.emptyState = collection.description;\n        }\n        return normalized;\n    });\n};\n\n//\nexport const ensureCollections = async (COLLECTIONS) => {\n    for (const collection of COLLECTIONS) {\n        const dirs = collection.dirs ?? (collection.dir ? [collection.dir] : []);\n        for (const dir of dirs) {\n            try {\n                await getDirectoryHandle(null, dir, { create: true } as any);\n            } catch (error) {\n                console.warn(\"Failed to ensure directory\", dir, error);\n            }\n        }\n    }\n};\n","/**\n * File Utilities\n *\n * Common file handling utilities used across views.\n */\n\n// ============================================================================\n// FILE TYPE DETECTION\n// ============================================================================\n\n/**\n * Check if a file is a markdown file\n */\nexport function isMarkdownFile(file: File | string): boolean {\n    const name = typeof file === \"string\" ? file : file.name;\n    const type = typeof file === \"string\" ? \"\" : file.type;\n\n    const mdExtensions = /\\.(md|markdown|mdown|mkd|mkdn|mdtxt|mdtext)$/i;\n    return mdExtensions.test(name) || type === \"text/markdown\";\n}\n\n/**\n * Check if a file is a text file\n */\nexport function isTextFile(file: File | string): boolean {\n    const name = typeof file === \"string\" ? file : file.name;\n    const type = typeof file === \"string\" ? \"\" : file.type;\n\n    if (type.startsWith(\"text/\")) return true;\n\n    const textExtensions = /\\.(txt|text|log|json|xml|yaml|yml|toml|ini|cfg|conf)$/i;\n    return textExtensions.test(name);\n}\n\n/**\n * Check if a file is an image\n */\nexport function isImageFile(file: File | string): boolean {\n    const name = typeof file === \"string\" ? file : file.name;\n    const type = typeof file === \"string\" ? \"\" : file.type;\n\n    if (type.startsWith(\"image/\")) return true;\n\n    const imageExtensions = /\\.(jpg|jpeg|png|gif|webp|svg|bmp|ico|avif)$/i;\n    return imageExtensions.test(name);\n}\n\n/**\n * Check if a file is a code file\n */\nexport function isCodeFile(file: File | string): boolean {\n    const name = typeof file === \"string\" ? file : file.name;\n\n    const codeExtensions = /\\.(js|ts|jsx|tsx|py|rb|go|rs|c|cpp|h|hpp|java|kt|swift|php|cs|css|scss|sass|less|html|vue|svelte)$/i;\n    return codeExtensions.test(name);\n}\n\n// ============================================================================\n// FILE READING\n// ============================================================================\n\n/**\n * Read a file as text\n */\nexport async function readFileAsText(file: File): Promise<string> {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result as string);\n        reader.onerror = () => reject(new Error(\"Failed to read file\"));\n        reader.readAsText(file);\n    });\n}\n\n/**\n * Read a file as data URL\n */\nexport async function readFileAsDataURL(file: File): Promise<string> {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result as string);\n        reader.onerror = () => reject(new Error(\"Failed to read file\"));\n        reader.readAsDataURL(file);\n    });\n}\n\n/**\n * Read a file as array buffer\n */\nexport async function readFileAsArrayBuffer(file: File): Promise<ArrayBuffer> {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result as ArrayBuffer);\n        reader.onerror = () => reject(new Error(\"Failed to read file\"));\n        reader.readAsArrayBuffer(file);\n    });\n}\n\n// ============================================================================\n// FILE CREATION\n// ============================================================================\n\n/**\n * Create a text file\n */\nexport function createTextFile(content: string, filename: string, mimeType = \"text/plain\"): File {\n    return new File([content], filename, { type: mimeType });\n}\n\n/**\n * Create a markdown file\n */\nexport function createMarkdownFile(content: string, filename = \"document.md\"): File {\n    return new File([content], filename, { type: \"text/markdown\" });\n}\n\n/**\n * Create a JSON file\n */\nexport function createJsonFile(data: unknown, filename = \"data.json\"): File {\n    const content = JSON.stringify(data, null, 2);\n    return new File([content], filename, { type: \"application/json\" });\n}\n\n// ============================================================================\n// FILE DOWNLOAD\n// ============================================================================\n\n/**\n * Trigger a file download\n */\nexport function downloadFile(file: File | Blob, filename?: string): void {\n    const url = URL.createObjectURL(file);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = filename || (file instanceof File ? file.name : \"download\");\n    a.click();\n    setTimeout(() => URL.revokeObjectURL(url), 250);\n}\n\n/**\n * Download text content as a file\n */\nexport function downloadTextFile(content: string, filename: string, mimeType = \"text/plain\"): void {\n    const blob = new Blob([content], { type: mimeType });\n    downloadFile(blob, filename);\n}\n\n/**\n * Download markdown content\n */\nexport function downloadMarkdown(content: string, filename = \"document.md\"): void {\n    downloadTextFile(content, filename, \"text/markdown\");\n}\n\n// ============================================================================\n// FILE PICKING\n// ============================================================================\n\n/**\n * Open a file picker dialog\n */\nexport async function pickFile(accept = \"*\"): Promise<File | null> {\n    return new Promise((resolve) => {\n        const input = document.createElement(\"input\");\n        input.type = \"file\";\n        input.accept = accept;\n        input.onchange = () => {\n            resolve(input.files?.[0] || null);\n        };\n        input.oncancel = () => resolve(null);\n        input.click();\n    });\n}\n\n/**\n * Open a file picker for multiple files\n */\nexport async function pickFiles(accept = \"*\"): Promise<File[]> {\n    return new Promise((resolve) => {\n        const input = document.createElement(\"input\");\n        input.type = \"file\";\n        input.accept = accept;\n        input.multiple = true;\n        input.onchange = () => {\n            resolve(Array.from(input.files || []));\n        };\n        input.oncancel = () => resolve([]);\n        input.click();\n    });\n}\n\n/**\n * Open a markdown file picker\n */\nexport async function pickMarkdownFile(): Promise<File | null> {\n    return pickFile(\".md,.markdown,.txt,text/markdown,text/plain\");\n}\n\n// ============================================================================\n// FILE SYSTEM ACCESS API\n// ============================================================================\n\n/**\n * Save file using File System Access API (with fallback)\n */\nexport async function saveFile(\n    content: string,\n    suggestedName = \"document.md\",\n    types = [{ description: \"Markdown\", accept: { \"text/markdown\": [\".md\"] } }]\n): Promise<boolean> {\n    try {\n        if (\"showSaveFilePicker\" in window) {\n            const handle = await (window as any).showSaveFilePicker({\n                suggestedName,\n                types\n            });\n            const writable = await handle.createWritable();\n            await writable.write(content);\n            await writable.close();\n            return true;\n        }\n    } catch (error) {\n        if ((error as Error).name === \"AbortError\") {\n            return false;\n        }\n    }\n\n    // Fallback to download\n    downloadTextFile(content, suggestedName);\n    return true;\n}\n\n/**\n * Open file using File System Access API (with fallback)\n */\nexport async function openFile(\n    types = [{ description: \"Markdown\", accept: { \"text/markdown\": [\".md\", \".markdown\"] } }]\n): Promise<{ content: string; filename: string } | null> {\n    try {\n        if (\"showOpenFilePicker\" in window) {\n            const [handle] = await (window as any).showOpenFilePicker({ types });\n            const file = await handle.getFile();\n            const content = await file.text();\n            return { content, filename: file.name };\n        }\n    } catch (error) {\n        if ((error as Error).name === \"AbortError\") {\n            return null;\n        }\n    }\n\n    // Fallback to file input\n    const file = await pickFile();\n    if (!file) return null;\n\n    const content = await readFileAsText(file);\n    return { content, filename: file.name };\n}\n","/**\n * Lazy loading utility for components and their styles\n */\n\nexport interface LazyComponent<T> {\n    component: T;\n    dispose?: () => void;\n}\n\nexport interface LazyLoaderOptions {\n    cssPath?: string;\n    componentName: string;\n}\n\n/**\n * Lazy load a component and its CSS\n */\nexport async function lazyLoadComponent<T>(\n    importFn: () => Promise<T>,\n    options: LazyLoaderOptions\n): Promise<LazyComponent<T>> {\n    const { cssPath, componentName } = options;\n\n    console.log(`[LazyLoader] Loading component: ${componentName}`);\n\n    // Load CSS first if specified\n    if (cssPath) {\n        try {\n            await loadCSS(cssPath);\n        } catch (error) {\n            console.warn(`[LazyLoader] Failed to load CSS for ${componentName}:`, error);\n        }\n    }\n\n    // Load the component\n    try {\n        const component = await importFn();\n        console.log(`[LazyLoader] Successfully loaded component: ${componentName}`);\n        return { component };\n    } catch (error) {\n        console.error(`[LazyLoader] Failed to load component ${componentName}:`, error);\n        throw error;\n    }\n}\n\n/**\n * Load CSS dynamically\n */\nasync function loadCSS(href: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n        // Check if already loaded\n        const existingLinks = document.querySelectorAll(`link[href=\"${href}\"]`);\n        if (existingLinks.length > 0) {\n            resolve();\n            return;\n        }\n\n        const link = document.createElement('link');\n        link.rel = 'stylesheet';\n        link.href = href;\n        link.onload = () => resolve();\n        link.onerror = () => reject(new Error(`Failed to load CSS: ${href}`));\n\n        document.head.appendChild(link);\n    });\n}\n\n/**\n * Cache for loaded components to avoid re-loading\n */\nconst componentCache = new Map<string, LazyComponent<any>>();\n\n/**\n * Get or load a cached component\n */\nexport async function getCachedComponent<T>(\n    cacheKey: string,\n    importFn: () => Promise<T>,\n    options: LazyLoaderOptions\n): Promise<LazyComponent<T>> {\n    if (componentCache.has(cacheKey)) {\n        return componentCache.get(cacheKey)!;\n    }\n\n    const lazyComponent = await lazyLoadComponent(importFn, options);\n    componentCache.set(cacheKey, lazyComponent);\n    return lazyComponent;\n}\n\n/**\n * Clear component cache (useful for development/testing)\n */\nexport function clearComponentCache(): void {\n    componentCache.clear();\n}\n\n/**\n * Dispose of cached components\n */\nexport function disposeCachedComponents(): void {\n    for (const [, lazyComponent] of componentCache) {\n        if (lazyComponent.dispose) {\n            lazyComponent.dispose();\n        }\n    }\n    componentCache.clear();\n}","export interface FileHandlingOptions {\n    onFilesAdded: (files: File[]) => void | Promise<void>;\n    onError?: (error: string) => void;\n    onProgress?: (file: File, loaded: number, total: number) => void;\n}\n\nexport class FileHandler {\n    private options: FileHandlingOptions;\n    private dragOverElements: Set<HTMLElement> = new Set();\n\n    constructor(options: FileHandlingOptions) {\n        this.options = { ...options }; // Clone to avoid mutations\n    }\n\n    /**\n     * Programmatically add files into the same pipeline as UI selection / DnD / paste.\n     * Used by PWA share-target and launchQueue ingestion.\n     */\n    addFiles(files: File[]): void | Promise<void> {\n        if (!Array.isArray(files) || files.length === 0) return;\n        return this.options.onFilesAdded(files);\n    }\n\n    /**\n     * Set up file input element with file selection\n     */\n    setupFileInput(container: HTMLElement, accept: string = \"*\"): HTMLInputElement {\n        const fileInput = document.createElement('input');\n        fileInput.type = 'file';\n        fileInput.multiple = true;\n        fileInput.accept = accept;\n        fileInput.style.display = 'none';\n\n        fileInput.addEventListener('change', (e) => {\n            const files = Array.from((e.target as HTMLInputElement).files || []);\n            if (files.length > 0) {\n                this.options.onFilesAdded(files);\n            }\n            // Reset input value to allow selecting the same file again\n            fileInput.value = '';\n        });\n\n        container.append(fileInput);\n        return fileInput;\n    }\n\n    /**\n     * Set up drag and drop handling for an element\n     */\n    setupDragAndDrop(element: HTMLElement): void {\n        element.addEventListener('dragover', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            this.addDragOver(element);\n        });\n\n        element.addEventListener('dragleave', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            this.removeDragOver(element);\n        });\n\n        element.addEventListener('drop', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            this.removeDragOver(element);\n\n            const files = Array.from(e.dataTransfer?.files || []);\n            if (files.length > 0) {\n                this.options.onFilesAdded(files);\n            }\n        });\n    }\n\n    /**\n     * Set up paste handling for an element\n     */\n    setupPasteHandling(element: HTMLElement): void {\n        element.addEventListener('paste', (e) => {\n            const files = Array.from(e.clipboardData?.files || []);\n            if (files.length > 0) {\n                e.preventDefault();\n                this.options.onFilesAdded(files);\n            }\n        });\n    }\n\n    /**\n     * Set up all file handling for a container (file input button, drag & drop, paste)\n     */\n    setupCompleteFileHandling(\n        container: HTMLElement,\n        fileSelectButton: HTMLElement,\n        dropZone?: HTMLElement,\n        accept: string = \"*\"\n    ): void {\n        // Setup file input\n        const fileInput = this.setupFileInput(container, accept);\n\n        // Connect file select button\n        fileSelectButton.addEventListener('click', () => {\n            fileInput.click();\n        });\n\n        // Setup drag and drop if drop zone provided\n        if (dropZone) {\n            this.setupDragAndDrop(dropZone);\n        }\n\n        // Setup paste handling\n        this.setupPasteHandling(container);\n    }\n\n    /**\n     * Validate file types and sizes\n     */\n    validateFiles(files: File[], options: {\n        maxSize?: number; // in bytes\n        allowedTypes?: string[];\n        maxFiles?: number;\n    } = {}): { valid: File[], invalid: { file: File, reason: string }[] } {\n        const { maxSize, allowedTypes, maxFiles } = options;\n        const valid: File[] = [];\n        const invalid: { file: File, reason: string }[] = [];\n\n        // Check max files limit\n        if (maxFiles && files.length > maxFiles) {\n            invalid.push(...files.slice(maxFiles).map(file => ({\n                file,\n                reason: `Too many files. Maximum ${maxFiles} files allowed.`\n            })));\n            files = files.slice(0, maxFiles);\n        }\n\n        for (const file of files) {\n            let isValid = true;\n            let reason = '';\n\n            // Check file size\n            if (maxSize && file.size > maxSize) {\n                isValid = false;\n                reason = `File too large. Maximum size is ${this.formatFileSize(maxSize)}.`;\n            }\n\n            // Check file type\n            if (allowedTypes && allowedTypes.length > 0) {\n                const isAllowed = allowedTypes.some(type => {\n                    if (type.includes('*')) {\n                        // Wildcard matching (e.g., \"image/*\")\n                        return file.type.startsWith(type.replace('/*', '/'));\n                    }\n                    return file.type === type;\n                });\n\n                if (!isAllowed) {\n                    isValid = false;\n                    reason = reason || `File type not allowed. Allowed types: ${allowedTypes.join(', ')}.`;\n                }\n            }\n\n            if (isValid) {\n                valid.push(file);\n            } else {\n                invalid.push({ file, reason });\n            }\n        }\n\n        return { valid, invalid };\n    }\n\n    /**\n     * Read file content as text\n     */\n    async readFileAsText(file: File, onProgress?: (loaded: number, total: number) => void): Promise<string> {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onload = () => resolve(reader.result as string);\n            reader.onerror = () => reject(new Error(`Failed to read file: ${file.name}`));\n            if (onProgress) {\n                reader.onprogress = (e) => {\n                    if (e.lengthComputable) {\n                        onProgress(e.loaded, e.total);\n                    }\n                };\n            }\n            reader.readAsText(file);\n        });\n    }\n\n    /**\n     * Read file content as ArrayBuffer\n     */\n    async readFileAsArrayBuffer(file: File): Promise<ArrayBuffer> {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onload = () => resolve(reader.result as ArrayBuffer);\n            reader.onerror = () => reject(new Error(`Failed to read file: ${file.name}`));\n            reader.readAsArrayBuffer(file);\n        });\n    }\n\n    /**\n     * Read file content as Data URL\n     */\n    async readFileAsDataURL(file: File): Promise<string> {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onload = () => resolve(reader.result as string);\n            reader.onerror = () => reject(new Error(`Failed to read file: ${file.name}`));\n            reader.readAsDataURL(file);\n        });\n    }\n\n    /**\n     * Read multiple files as text\n     */\n    async readFilesAsText(\n        files: File[],\n        onProgress?: (file: File, loaded: number, total: number) => void\n    ): Promise<{ file: File, content: string }[]> {\n        const results: { file: File, content: string }[] = [];\n\n        for (const file of files) {\n            try {\n                const content = await this.readFileAsText(file, (loaded, total) => {\n                    onProgress?.(file, loaded, total);\n                });\n                results.push({ file, content });\n            } catch (error) {\n                console.warn(`Failed to read file ${file.name}:`, error);\n                // Continue with other files\n            }\n        }\n\n        return results;\n    }\n\n    /**\n     * Get file icon based on MIME type\n     */\n    getFileIcon(mimeType: string): string {\n        if (mimeType.startsWith('image/')) return '';\n        if (mimeType === 'application/pdf') return '';\n        if (mimeType.includes('json')) return '';\n        if (mimeType.includes('text') || mimeType.includes('markdown')) return '';\n        if (mimeType.includes('javascript') || mimeType.includes('typescript')) return '';\n        if (mimeType.includes('css')) return '';\n        if (mimeType.includes('html')) return '';\n        if (mimeType.startsWith('video/')) return '';\n        if (mimeType.startsWith('audio/')) return '';\n        if (mimeType.includes('zip') || mimeType.includes('rar')) return '';\n        return '';\n    }\n\n    /**\n     * Format file size for display\n     */\n    formatFileSize(bytes: number): string {\n        if (bytes < 1024) return `${bytes} B`;\n        if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n        if (bytes < 1024 * 1024 * 1024) return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n        return `${(bytes / (1024 * 1024 * 1024)).toFixed(1)} GB`;\n    }\n\n    /**\n     * Check if a file is likely a markdown file\n     */\n    isMarkdownFile(file: File): boolean {\n        const name = file.name.toLowerCase();\n        const type = file.type.toLowerCase();\n\n        return name.endsWith('.md') ||\n            name.endsWith('.markdown') ||\n            name.endsWith('.mdown') ||\n            name.endsWith('.mkd') ||\n            name.endsWith('.mkdn') ||\n            name.endsWith('.mdtxt') ||\n            name.endsWith('.mdtext') ||\n            type.includes('markdown') ||\n            type.includes('text');\n    }\n\n    /**\n     * Check if a file is an image\n     */\n    isImageFile(file: File): boolean {\n        return file.type.startsWith('image/');\n    }\n\n    /**\n     * Check if a file is a text file\n     */\n    isTextFile(file: File): boolean {\n        return file.type.startsWith('text/') ||\n            this.isMarkdownFile(file) ||\n            file.type.includes('javascript') ||\n            file.type.includes('typescript') ||\n            file.type.includes('css') ||\n            file.type.includes('html') ||\n            file.type.includes('json') ||\n            file.type.includes('xml');\n    }\n\n    /**\n     * Check if a file is a binary file\n     */\n    isBinaryFile(file: File): boolean {\n        return !this.isTextFile(file) && !this.isImageFile(file);\n    }\n\n    /**\n     * Get file metadata\n     */\n    getFileMetadata(file: File): {\n        name: string;\n        extension: string;\n        size: number;\n        type: string;\n        lastModified: number;\n        isText: boolean;\n        isImage: boolean;\n        isBinary: boolean;\n        formattedSize: string;\n        icon: string;\n    } {\n        const extension = file.name.split('.').pop()?.toLowerCase() || '';\n        const isText = this.isTextFile(file);\n        const isImage = this.isImageFile(file);\n        const isBinary = this.isBinaryFile(file);\n\n        return {\n            name: file.name,\n            extension,\n            size: file.size,\n            type: file.type,\n            lastModified: file.lastModified,\n            isText,\n            isImage,\n            isBinary,\n            formattedSize: this.formatFileSize(file.size),\n            icon: this.getFileIcon(file.type)\n        };\n    }\n\n    /**\n     * Get files metadata for multiple files\n     */\n    getFilesMetadata(files: File[]): Array<ReturnType<FileHandler['getFileMetadata']>> {\n        return files.map(file => this.getFileMetadata(file));\n    }\n\n    private addDragOver(element: HTMLElement): void {\n        if (!this.dragOverElements.has(element)) {\n            this.dragOverElements.add(element);\n            element.classList.add('drag-over');\n        }\n    }\n\n    private removeDragOver(element: HTMLElement): void {\n        if (this.dragOverElements.has(element)) {\n            this.dragOverElements.delete(element);\n            element.classList.remove('drag-over');\n        }\n    }\n\n    /**\n     * Manually trigger file processing with the provided files\n     */\n    processFiles(files: File[]): void {\n        this.options.onFilesAdded(files);\n    }\n\n    /**\n     * Create a downloadable file from content\n     */\n    createDownloadableFile(content: string | Blob | ArrayBuffer, filename: string, mimeType?: string): void {\n        let blob: Blob;\n\n        if (content instanceof Blob) {\n            blob = content;\n        } else if (content instanceof ArrayBuffer) {\n            blob = new Blob([content], { type: mimeType || 'application/octet-stream' });\n        } else {\n            blob = new Blob([content], { type: mimeType || 'text/plain;charset=utf-8' });\n        }\n\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = filename;\n        a.style.display = 'none';\n\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n\n        // Clean up the URL object\n        setTimeout(() => URL.revokeObjectURL(url), 100);\n    }\n\n    /**\n     * Create a shareable file URL\n     */\n    createFileURL(file: File): string {\n        return URL.createObjectURL(file);\n    }\n\n    /**\n     * Revoke a file URL to free memory\n     */\n    revokeFileURL(url: string): void {\n        URL.revokeObjectURL(url);\n    }\n\n    /**\n     * Clean up event listeners and references\n     */\n    destroy(): void {\n        this.dragOverElements.clear();\n    }\n}\n\n/**\n * Utility function to create a file handler with default options\n */\nexport function createFileHandler(options: FileHandlingOptions): FileHandler {\n    return new FileHandler(options);\n}\n\n/**\n * Utility function to read markdown file from URL\n */\nexport async function readMarkdownFromUrl(url: string): Promise<string | null> {\n    try {\n        const response = await fetch(url, { credentials: 'include', cache: 'no-store' });\n        if (!response.ok) return null;\n\n        const contentType = response.headers.get('content-type') || '';\n        if (!contentType.includes('text') && !contentType.includes('markdown')) {\n            return null;\n        }\n\n        return await response.text();\n    } catch {\n        return null;\n    }\n}\n\n/**\n * Extract text from DataTransfer (for paste/drop operations)\n */\nexport async function extractTextFromDataTransfer(dt: DataTransfer): Promise<string | null> {\n    try {\n        const uriList = dt.getData(\"text/uri-list\");\n        if (uriList?.trim()) return uriList.trim();\n    } catch {\n        // ignore\n    }\n\n    try {\n        const text = dt.getData(\"text/plain\");\n        if (text?.trim()) return text;\n    } catch {\n        // ignore\n    }\n\n    return null;\n}","export interface VoiceInputOptions {\n    language?: string;\n    continuous?: boolean;\n    interimResults?: boolean;\n    maxAlternatives?: number;\n}\n\nexport class VoiceInputManager {\n    private recognition: any = null;\n    private isListening: boolean = false;\n    private options: VoiceInputOptions;\n\n    constructor(options: VoiceInputOptions = {}) {\n        this.options = {\n            language: 'en-US',\n            continuous: false,\n            interimResults: false,\n            maxAlternatives: 1,\n            ...options\n        };\n\n        this.initializeRecognition();\n    }\n\n    /**\n     * Initialize speech recognition if supported\n     */\n    private initializeRecognition(): void {\n        // Check for browser support\n        const SpeechRecognition = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition;\n\n        if (!SpeechRecognition) {\n            console.warn('Speech recognition not supported in this browser');\n            return;\n        }\n\n        this.recognition = new SpeechRecognition();\n        this.recognition.lang = this.options.language;\n        this.recognition.continuous = this.options.continuous;\n        this.recognition.interimResults = this.options.interimResults;\n        this.recognition.maxAlternatives = this.options.maxAlternatives;\n    }\n\n    /**\n     * Check if speech recognition is supported\n     */\n    isSupported(): boolean {\n        return this.recognition !== null;\n    }\n\n    /**\n     * Start listening for speech input\n     */\n    startListening(): Promise<string> {\n        return new Promise((resolve, reject) => {\n            if (!this.recognition) {\n                reject(new Error('Speech recognition not supported'));\n                return;\n            }\n\n            if (this.isListening) {\n                reject(new Error('Already listening'));\n                return;\n            }\n\n            let done = false;\n            const finish = (value: string | null) => {\n                if (done) return;\n                done = true;\n                this.isListening = false;\n                try {\n                    this.recognition.stop();\n                } catch {\n                    // ignore\n                }\n                if (value) {\n                    resolve(value);\n                } else {\n                    reject(new Error('No speech detected'));\n                }\n            };\n\n            // Set up event handlers\n            this.recognition.onresult = (e: any) => {\n                const text = String(e?.results?.[0]?.[0]?.transcript || \"\").trim();\n                finish(text || null);\n            };\n\n            this.recognition.onerror = () => finish(null);\n            this.recognition.onend = () => finish(null);\n\n            // Start recognition\n            try {\n                this.isListening = true;\n                this.recognition.start();\n            } catch (error) {\n                this.isListening = false;\n                reject(error);\n            }\n        });\n    }\n\n    /**\n     * Stop listening\n     */\n    stopListening(): void {\n        if (this.recognition && this.isListening) {\n            try {\n                this.recognition.stop();\n            } catch {\n                // ignore\n            }\n            this.isListening = false;\n        }\n    }\n\n    /**\n     * Check if currently listening\n     */\n    getIsListening(): boolean {\n        return this.isListening;\n    }\n\n    /**\n     * Set recognition language\n     */\n    setLanguage(language: string): void {\n        this.options.language = language;\n        if (this.recognition) {\n            this.recognition.lang = language;\n        }\n    }\n\n    /**\n     * Get available languages (limited support in browsers)\n     */\n    getAvailableLanguages(): string[] {\n        // Most browsers don't expose available languages\n        // This is a common set supported by Chrome\n        return [\n            'en-US', 'en-GB', 'en-AU', 'en-CA', 'en-IN', 'en-IE',\n            'es-ES', 'es-US', 'es-MX', 'es-AR', 'es-CO', 'es-CL',\n            'fr-FR', 'fr-CA', 'de-DE', 'it-IT', 'pt-BR', 'pt-PT',\n            'ru-RU', 'ja-JP', 'ko-KR', 'zh-CN', 'zh-TW', 'ar-SA',\n            'hi-IN', 'nl-NL', 'sv-SE', 'no-NO', 'da-DK', 'fi-FI'\n        ];\n    }\n\n    /**\n     * Clean up resources\n     */\n    destroy(): void {\n        this.stopListening();\n        this.recognition = null;\n    }\n}\n\n/**\n * Get speech prompt with timeout\n */\nexport async function getSpeechPrompt(\n    options: VoiceInputOptions & { timeout?: number } = {}\n): Promise<string | null> {\n    const { timeout = 10000, ...voiceOptions } = options;\n\n    const voiceManager = new VoiceInputManager(voiceOptions);\n\n    if (!voiceManager.isSupported()) {\n        console.warn('Speech recognition not supported');\n        return null;\n    }\n\n    try {\n        // Create a promise that resolves when speech is detected or times out\n        const speechPromise = voiceManager.startListening();\n\n        // Create a timeout promise\n        const timeoutPromise = new Promise<string>((_, reject) => {\n            setTimeout(() => {\n                voiceManager.stopListening();\n                reject(new Error('Speech recognition timeout'));\n            }, timeout);\n        });\n\n        // Race between speech detection and timeout\n        return await Promise.race([speechPromise, timeoutPromise]);\n\n    } catch (error) {\n        console.warn('Speech recognition failed:', error);\n        return null;\n    } finally {\n        voiceManager.destroy();\n    }\n}\n\n/**\n * Check if speech recognition is available\n */\nexport function isSpeechRecognitionAvailable(): boolean {\n    return !!(window as any).SpeechRecognition || !!(window as any).webkitSpeechRecognition;\n}\n\n/**\n * Get user media permission for microphone (if needed)\n */\nexport async function requestMicrophonePermission(): Promise<boolean> {\n    try {\n        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n        // Stop the stream immediately after getting permission\n        stream.getTracks().forEach(track => track.stop());\n        return true;\n    } catch {\n        return false;\n    }\n}","import { H } from \"fest/lure\";\n\n// Import built-in templates\nimport { DEFAULT_TEMPLATES } from \"@rs-com/core/BuiltInAI\";\n\nexport interface PromptTemplate {\n    id?: string;\n    name: string;\n    prompt: string;\n    category?: string;\n    tags?: string[];\n    createdAt?: number;\n    updatedAt?: number;\n    usageCount?: number;\n}\n\nexport interface TemplateManagerOptions {\n    storageKey?: string;\n    defaultTemplates?: PromptTemplate[];\n}\n\nexport class TemplateManager {\n    private storageKey: string;\n    private templates: PromptTemplate[] = [];\n    private defaultTemplates: PromptTemplate[];\n\n    constructor(options: TemplateManagerOptions = {}) {\n        this.storageKey = options.storageKey || 'rs-prompt-templates';\n        this.defaultTemplates = options.defaultTemplates || this.getDefaultTemplates();\n        this.loadTemplates();\n    }\n\n    /**\n     * Get all templates\n     */\n    getAllTemplates(): PromptTemplate[] {\n        return [...this.templates];\n    }\n\n    /**\n     * Get template by ID\n     */\n    getTemplateById(id: string): PromptTemplate | undefined {\n        return this.templates.find(t => t.id === id);\n    }\n\n    /**\n     * Add a new template\n     */\n    addTemplate(template: Omit<PromptTemplate, 'id' | 'createdAt' | 'updatedAt'>): PromptTemplate {\n        const newTemplate: PromptTemplate = {\n            ...template,\n            id: this.generateId(),\n            createdAt: Date.now(),\n            updatedAt: Date.now(),\n            usageCount: 0\n        };\n\n        this.templates.push(newTemplate);\n        this.saveTemplates();\n        return newTemplate;\n    }\n\n    /**\n     * Update an existing template\n     */\n    updateTemplate(id: string, updates: Partial<PromptTemplate>): boolean {\n        const index = this.templates.findIndex(t => t.id === id);\n        if (index === -1) return false;\n\n        this.templates[index] = {\n            ...this.templates[index],\n            ...updates,\n            updatedAt: Date.now()\n        };\n\n        this.saveTemplates();\n        return true;\n    }\n\n    /**\n     * Remove a template\n     */\n    removeTemplate(id: string): boolean {\n        const index = this.templates.findIndex(t => t.id === id);\n        if (index === -1) return false;\n\n        this.templates.splice(index, 1);\n        this.saveTemplates();\n        return true;\n    }\n\n    /**\n     * Increment usage count for a template\n     */\n    incrementUsageCount(id: string): void {\n        const template = this.templates.find(t => t.id === id);\n        if (template) {\n            template.usageCount = (template.usageCount || 0) + 1;\n            this.saveTemplates();\n        }\n    }\n\n    /**\n     * Search templates by name or content\n     */\n    searchTemplates(query: string): PromptTemplate[] {\n        const lowercaseQuery = query.toLowerCase();\n        return this.templates.filter(template =>\n            template.name.toLowerCase().includes(lowercaseQuery) ||\n            template.prompt.toLowerCase().includes(lowercaseQuery) ||\n            template.tags?.some(tag => tag.toLowerCase().includes(lowercaseQuery))\n        );\n    }\n\n    /**\n     * Get templates by category\n     */\n    getTemplatesByCategory(category: string): PromptTemplate[] {\n        return this.templates.filter(template => template.category === category);\n    }\n\n    /**\n     * Get most used templates\n     */\n    getMostUsedTemplates(limit: number = 5): PromptTemplate[] {\n        return this.templates\n            .sort((a, b) => (b.usageCount || 0) - (a.usageCount || 0))\n            .slice(0, limit);\n    }\n\n    /**\n     * Export templates as JSON\n     */\n    exportTemplates(): string {\n        return JSON.stringify(this.templates, null, 2);\n    }\n\n    /**\n     * Import templates from JSON\n     */\n    importTemplates(jsonData: string): boolean {\n        try {\n            const importedTemplates = JSON.parse(jsonData) as PromptTemplate[];\n\n            // Validate structure\n            if (!Array.isArray(importedTemplates)) {\n                throw new Error('Invalid template data: not an array');\n            }\n\n            for (const template of importedTemplates) {\n                if (!template.name || !template.prompt) {\n                    throw new Error('Invalid template: missing name or prompt');\n                }\n            }\n\n            // Assign new IDs to avoid conflicts\n            const templatesWithIds = importedTemplates.map(template => ({\n                ...template,\n                id: this.generateId(),\n                createdAt: template.createdAt || Date.now(),\n                updatedAt: Date.now()\n            }));\n\n            this.templates.push(...templatesWithIds);\n            this.saveTemplates();\n            return true;\n        } catch (error) {\n            console.error('Failed to import templates:', error);\n            return false;\n        }\n    }\n\n    /**\n     * Reset to default templates\n     */\n    resetToDefaults(): void {\n        this.templates = this.defaultTemplates.map(template => ({\n            ...template,\n            id: this.generateId(),\n            createdAt: Date.now(),\n            updatedAt: Date.now(),\n            usageCount: 0\n        }));\n        this.saveTemplates();\n    }\n\n    /**\n     * Create template editor modal\n     */\n    createTemplateEditor(container: HTMLElement, onSave?: () => void): void {\n        const modal = H`<div class=\"template-editor-modal\">\n      <div class=\"modal-overlay\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h3>Prompt Templates</h3>\n          </div>\n\n          <div class=\"template-list\">\n            ${this.templates.map((template, index) =>\n            H`<div class=\"template-item\">\n                <div class=\"template-header\">\n                  <input type=\"text\" class=\"template-name\" value=\"${template.name}\" data-index=\"${index}\" placeholder=\"Template name\">\n                  <button class=\"btn small remove-template\" data-index=\"${index}\" title=\"Remove template\"></button>\n                </div>\n                <textarea class=\"template-prompt\" data-index=\"${index}\" placeholder=\"Enter your prompt template...\">${template.prompt}</textarea>\n                <div class=\"template-meta\">\n                  ${template.usageCount ? H`<span class=\"usage-count\">Used ${template.usageCount} times</span>` : ''}\n                  ${template.category ? H`<span class=\"category\">${template.category}</span>` : ''}\n                </div>\n              </div>`\n        )}\n          </div>\n\n          <div class=\"modal-actions\">\n            <button class=\"btn\" data-action=\"add-template\">Add Template</button>\n            <button class=\"btn\" data-action=\"reset-defaults\">Reset to Defaults</button>\n            <button class=\"btn primary\" data-action=\"save-templates\">Save Changes</button>\n            <button class=\"btn\" data-action=\"close-editor\">Close</button>\n          </div>\n        </div>\n      </div>\n    </div>` as HTMLElement;\n\n        // Template editor events\n        modal.addEventListener('click', (e) => {\n            const target = e.target as HTMLElement;\n            const action = target.getAttribute('data-action');\n            const index = target.getAttribute('data-index');\n\n            if (action === 'add-template') {\n                this.addTemplate({\n                    name: 'New Template',\n                    prompt: 'Enter your prompt template here...',\n                    category: 'Custom'\n                });\n                modal.remove();\n                this.createTemplateEditor(container, onSave);\n\n            } else if (action === 'reset-defaults') {\n                if (confirm('Are you sure you want to reset all templates to defaults? This will remove all custom templates.')) {\n                    this.resetToDefaults();\n                    modal.remove();\n                    this.createTemplateEditor(container, onSave);\n                }\n\n            } else if (action === 'save-templates') {\n                // Update templates from inputs\n                const nameInputs = modal.querySelectorAll('.template-name') as NodeListOf<HTMLInputElement>;\n                const promptInputs = modal.querySelectorAll('.template-prompt') as NodeListOf<HTMLTextAreaElement>;\n\n                this.templates = Array.from(nameInputs).map((input, i) => {\n                    const index = parseInt(input.getAttribute('data-index') || '0');\n                    const originalTemplate = this.templates[index];\n\n                    return {\n                        ...originalTemplate,\n                        name: input.value.trim() || 'Untitled Template',\n                        prompt: promptInputs[i].value.trim() || 'Enter your prompt...',\n                        updatedAt: Date.now()\n                    };\n                });\n\n                this.saveTemplates();\n                modal.remove();\n                onSave?.();\n\n            } else if (action === 'close-editor') {\n                modal.remove();\n\n            } else if (target.classList.contains('remove-template') && index !== null) {\n                const templateIndex = parseInt(index);\n                const template = this.templates[templateIndex];\n                if (confirm(`Remove template \"${template.name}\"?`)) {\n                    this.removeTemplate(template.id!);\n                    modal.remove();\n                    this.createTemplateEditor(container, onSave);\n                }\n            }\n        });\n\n        container.append(modal);\n    }\n\n    /**\n     * Create template selector dropdown\n     */\n    createTemplateSelect(selectedPrompt?: string): HTMLSelectElement {\n        const select = document.createElement('select');\n        select.className = 'template-select';\n\n        // Add default option\n        const defaultOption = document.createElement('option');\n        defaultOption.value = '';\n        defaultOption.textContent = 'Select Template...';\n        select.append(defaultOption);\n\n        // Add template options\n        this.templates.forEach(template => {\n            const option = document.createElement('option');\n            option.value = template.prompt;\n            option.textContent = template.name;\n            if (template.category) {\n                option.textContent += ` (${template.category})`;\n            }\n            select.append(option);\n        });\n\n        // Set selected value if provided\n        if (selectedPrompt) {\n            select.value = selectedPrompt;\n        }\n\n        return select;\n    }\n\n    private getDefaultTemplates(): PromptTemplate[] {\n        return DEFAULT_TEMPLATES.map(template => ({\n            ...template,\n            id: this.generateId(),\n            createdAt: Date.now(),\n            updatedAt: Date.now(),\n            usageCount: 0\n        }));\n    }\n\n    private generateId(): string {\n        return `template_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    }\n\n    private loadTemplates(): void {\n        try {\n            const stored = localStorage.getItem(this.storageKey);\n            if (stored) {\n                const parsedTemplates = JSON.parse(stored) as PromptTemplate[];\n\n                // Validate and migrate old format\n                this.templates = parsedTemplates.map(template => ({\n                    ...template,\n                    id: template.id || this.generateId(),\n                    createdAt: template.createdAt || Date.now(),\n                    updatedAt: template.updatedAt || Date.now(),\n                    usageCount: template.usageCount || 0\n                }));\n            } else {\n                // Initialize with defaults\n                this.resetToDefaults();\n            }\n        } catch (error) {\n            console.warn('Failed to load templates from storage:', error);\n            this.resetToDefaults();\n        }\n    }\n\n    private saveTemplates(): void {\n        try {\n            localStorage.setItem(this.storageKey, JSON.stringify(this.templates));\n        } catch (error) {\n            console.warn('Failed to save templates to storage:', error);\n        }\n    }\n}\n\n/**\n * Utility function to create a template manager\n */\nexport function createTemplateManager(options?: TemplateManagerOptions): TemplateManager {\n    return new TemplateManager(options);\n}","import { H } from \"fest/lure\";\n\nexport interface HistoryEntry {\n    id?: string;\n    ts: number;\n    prompt: string;\n    before: string; // Input content (file names or text)\n    after: string;  // Output content\n    ok: boolean;\n    error?: string;\n    duration?: number; // Processing time in ms\n    model?: string;    // AI model used\n    tokens?: number;   // Token usage\n}\n\nexport interface HistoryManagerOptions {\n    storageKey?: string;\n    maxEntries?: number;\n    autoSave?: boolean;\n}\n\nexport class HistoryManager {\n    private storageKey: string;\n    private maxEntries: number;\n    private autoSave: boolean;\n    private entries: HistoryEntry[] = [];\n\n    constructor(options: HistoryManagerOptions = {}) {\n        this.storageKey = options.storageKey || 'rs-basic-history';\n        this.maxEntries = options.maxEntries || 100;\n        this.autoSave = options.autoSave !== false;\n        this.loadHistory();\n    }\n\n    /**\n     * Add a new history entry\n     */\n    addEntry(entry: Omit<HistoryEntry, 'id' | 'ts'>): HistoryEntry {\n        const fullEntry: HistoryEntry = {\n            ...entry,\n            id: this.generateId(),\n            ts: Date.now()\n        };\n\n        this.entries.unshift(fullEntry); // Add to beginning\n\n        // Trim to max entries\n        if (this.entries.length > this.maxEntries) {\n            this.entries = this.entries.slice(0, this.maxEntries);\n        }\n\n        if (this.autoSave) {\n            this.saveHistory();\n        }\n\n        return fullEntry;\n    }\n\n    /**\n     * Get all history entries\n     */\n    getAllEntries(): HistoryEntry[] {\n        return [...this.entries];\n    }\n\n    /**\n     * Get recent entries (last N)\n     */\n    getRecentEntries(limit: number = 10): HistoryEntry[] {\n        return this.entries.slice(0, limit);\n    }\n\n    /**\n     * Get entry by ID\n     */\n    getEntryById(id: string): HistoryEntry | undefined {\n        return this.entries.find(entry => entry.id === id);\n    }\n\n    /**\n     * Remove entry by ID\n     */\n    removeEntry(id: string): boolean {\n        const index = this.entries.findIndex(entry => entry.id === id);\n        if (index === -1) return false;\n\n        this.entries.splice(index, 1);\n        if (this.autoSave) {\n            this.saveHistory();\n        }\n        return true;\n    }\n\n    /**\n     * Clear all history\n     */\n    clearHistory(): void {\n        this.entries = [];\n        if (this.autoSave) {\n            this.saveHistory();\n        }\n    }\n\n    /**\n     * Search history entries\n     */\n    searchEntries(query: string): HistoryEntry[] {\n        const lowercaseQuery = query.toLowerCase();\n        return this.entries.filter(entry =>\n            entry.prompt.toLowerCase().includes(lowercaseQuery) ||\n            entry.before.toLowerCase().includes(lowercaseQuery) ||\n            entry.after.toLowerCase().includes(lowercaseQuery)\n        );\n    }\n\n    /**\n     * Get successful entries only\n     */\n    getSuccessfulEntries(): HistoryEntry[] {\n        return this.entries.filter(entry => entry.ok);\n    }\n\n    /**\n     * Get failed entries only\n     */\n    getFailedEntries(): HistoryEntry[] {\n        return this.entries.filter(entry => !entry.ok);\n    }\n\n    /**\n     * Get statistics\n     */\n    getStatistics() {\n        const total = this.entries.length;\n        const successful = this.entries.filter(e => e.ok).length;\n        const failed = total - successful;\n        const avgDuration = this.entries\n            .filter(e => e.duration)\n            .reduce((sum, e) => sum + (e.duration || 0), 0) / Math.max(1, this.entries.filter(e => e.duration).length);\n\n        return {\n            total,\n            successful,\n            failed,\n            successRate: total > 0 ? (successful / total) * 100 : 0,\n            averageDuration: avgDuration || 0\n        };\n    }\n\n    /**\n     * Export history as JSON\n     */\n    exportHistory(): string {\n        return JSON.stringify(this.entries, null, 2);\n    }\n\n    /**\n     * Import history from JSON\n     */\n    importHistory(jsonData: string): boolean {\n        try {\n            const importedEntries = JSON.parse(jsonData) as HistoryEntry[];\n\n            if (!Array.isArray(importedEntries)) {\n                throw new Error('Invalid history data: not an array');\n            }\n\n            // Validate entries\n            for (const entry of importedEntries) {\n                if (typeof entry.ts !== 'number' || typeof entry.prompt !== 'string') {\n                    throw new Error('Invalid history entry: missing required fields');\n                }\n            }\n\n            // Assign new IDs to avoid conflicts\n            const entriesWithIds = importedEntries.map(entry => ({\n                ...entry,\n                id: entry.id || this.generateId()\n            }));\n\n            // Merge with existing entries, avoiding duplicates\n            const existingIds = new Set(this.entries.map(e => e.id));\n            const newEntries = entriesWithIds.filter(e => !existingIds.has(e.id));\n\n            this.entries.unshift(...newEntries);\n\n            // Trim to max entries\n            if (this.entries.length > this.maxEntries) {\n                this.entries = this.entries.slice(0, this.maxEntries);\n            }\n\n            if (this.autoSave) {\n                this.saveHistory();\n            }\n\n            return true;\n        } catch (error) {\n            console.error('Failed to import history:', error);\n            return false;\n        }\n    }\n\n    /**\n     * Create history view component\n     */\n    createHistoryView(onEntrySelect?: (entry: HistoryEntry) => void): HTMLElement {\n        const container = H`<div class=\"history-view\">\n      <div class=\"history-header\">\n        <h3>Processing History</h3>\n        <div class=\"history-actions\">\n          <button class=\"btn small\" data-action=\"clear-history\">Clear All</button>\n          <button class=\"btn small\" data-action=\"export-history\">Export</button>\n        </div>\n      </div>\n\n      <div class=\"history-stats\">\n        ${this.createStatsDisplay()}\n      </div>\n\n      <div class=\"history-list\">\n        ${this.entries.length === 0\n                ? H`<div class=\"empty-history\">No history yet. Start processing some content!</div>`\n                : this.entries.map(entry => this.createHistoryItem(entry, onEntrySelect))\n            }\n      </div>\n    </div>` as HTMLElement;\n\n        // Set up event listeners\n        container.addEventListener('click', (e) => {\n            const target = e.target as HTMLElement;\n            const action = target.getAttribute('data-action');\n            const entryId = target.getAttribute('data-entry-id');\n\n            if (action === 'clear-history') {\n                if (confirm('Are you sure you want to clear all history?')) {\n                    this.clearHistory();\n                    // Refresh the view\n                    const newContainer = this.createHistoryView(onEntrySelect);\n                    container.replaceWith(newContainer);\n                }\n            } else if (action === 'export-history') {\n                this.exportHistoryToFile();\n            } else if (action === 'use-entry' && entryId) {\n                const entry = this.getEntryById(entryId);\n                if (entry) {\n                    onEntrySelect?.(entry);\n                }\n            }\n        });\n\n        return container;\n    }\n\n    /**\n     * Create compact history display (for recent activity)\n     */\n    createRecentHistoryView(limit: number = 3, onEntrySelect?: (entry: HistoryEntry) => void): HTMLElement {\n        const recentEntries = this.getRecentEntries(limit);\n\n        const container = H`<div class=\"recent-history\">\n      <div class=\"recent-header\">\n        <h4>Recent Activity</h4>\n        <button class=\"btn small\" data-action=\"view-full-history\">View All</button>\n      </div>\n\n      ${recentEntries.length === 0\n                ? H`<div class=\"no-recent\">No recent activity</div>`\n                : recentEntries.map(entry => this.createCompactHistoryItem(entry, onEntrySelect))\n            }\n    </div>` as HTMLElement;\n\n        // Set up event listeners\n        container.addEventListener('click', (e) => {\n            const target = e.target as HTMLElement;\n            const action = target.getAttribute('data-action');\n            const entryId = target.getAttribute('data-entry-id');\n\n            if (action === 'view-full-history') {\n                // This would typically trigger a view change\n                console.log('View full history requested');\n            } else if (action === 'use-entry' && entryId) {\n                const entry = this.getEntryById(entryId);\n                if (entry) {\n                    onEntrySelect?.(entry);\n                }\n            }\n        });\n\n        return container;\n    }\n\n    private createStatsDisplay(): HTMLElement {\n        const stats = this.getStatistics();\n\n        return H`<div class=\"stats-grid\">\n      <div class=\"stat-item\">\n        <span class=\"stat-value\">${stats.total}</span>\n        <span class=\"stat-label\">Total</span>\n      </div>\n      <div class=\"stat-item\">\n        <span class=\"stat-value success\">${stats.successful}</span>\n        <span class=\"stat-label\">Success</span>\n      </div>\n      <div class=\"stat-item\">\n        <span class=\"stat-value error\">${stats.failed}</span>\n        <span class=\"stat-label\">Failed</span>\n      </div>\n      <div class=\"stat-item\">\n        <span class=\"stat-value\">${stats.successRate.toFixed(1)}%</span>\n        <span class=\"stat-label\">Success Rate</span>\n      </div>\n    </div>` as HTMLElement;\n    }\n\n    private createHistoryItem(entry: HistoryEntry, onEntrySelect?: (entry: HistoryEntry) => void): HTMLElement {\n        const time = new Date(entry.ts).toLocaleString();\n        const duration = entry.duration ? ` (${(entry.duration / 1000).toFixed(1)}s)` : '';\n\n        return H`<div class=\"history-item ${entry.ok ? 'success' : 'error'}\">\n      <div class=\"history-meta\">\n        <span class=\"history-status ${entry.ok ? 'success' : 'error'}\">\n          ${entry.ok ? '' : ''}\n        </span>\n        <span class=\"history-time\">${time}${duration}</span>\n        ${entry.model ? H`<span class=\"history-model\">${entry.model}</span>` : ''}\n      </div>\n\n      <div class=\"history-content\">\n        <div class=\"history-prompt\">${entry.prompt}</div>\n        <div class=\"history-input\">Input: ${entry.before}</div>\n        ${entry.error ? H`<div class=\"history-error\">Error: ${entry.error}</div>` : ''}\n      </div>\n\n      <div class=\"history-actions\">\n        <button class=\"btn small\" data-action=\"use-entry\" data-entry-id=\"${entry.id}\">Use Prompt</button>\n        ${entry.ok ? H`<button class=\"btn small\" data-action=\"view-result\" data-entry-id=\"${entry.id}\">View Result</button>` : ''}\n      </div>\n    </div>` as HTMLElement;\n    }\n\n    private createCompactHistoryItem(entry: HistoryEntry, onEntrySelect?: (entry: HistoryEntry) => void): HTMLElement {\n        const time = new Date(entry.ts).toLocaleString();\n        const shortPrompt = entry.prompt.length > 40 ? entry.prompt.substring(0, 40) + '...' : entry.prompt;\n\n        return H`<div class=\"history-item-compact ${entry.ok ? 'success' : 'error'}\">\n      <div class=\"history-meta\">\n        <span class=\"history-status ${entry.ok ? 'success' : 'error'}\">${entry.ok ? '' : ''}</span>\n        <span class=\"history-prompt\">${shortPrompt}</span>\n      </div>\n      <div class=\"history-time\">${time}</div>\n      <button class=\"btn small\" data-action=\"use-entry\" data-entry-id=\"${entry.id}\">Use</button>\n    </div>` as HTMLElement;\n    }\n\n    private exportHistoryToFile(): void {\n        const data = this.exportHistory();\n        const blob = new Blob([data], { type: 'application/json' });\n        const url = URL.createObjectURL(blob);\n\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `ai-history-${new Date().toISOString().split('T')[0]}.json`;\n        document.body.append(link);\n        link.click();\n        link.remove();\n\n        URL.revokeObjectURL(url);\n    }\n\n    private generateId(): string {\n        return `history_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    }\n\n    private loadHistory(): void {\n        try {\n            if (typeof localStorage === \"undefined\") return;\n            const stored = localStorage.getItem(this.storageKey);\n            if (stored) {\n                const parsedEntries = JSON.parse(stored) as HistoryEntry[];\n\n                // Validate and migrate old format\n                this.entries = parsedEntries.map(entry => ({\n                    ...entry,\n                    id: entry.id || this.generateId()\n                }));\n            }\n        } catch (error) {\n            console.warn('Failed to load history from storage:', error);\n            this.entries = [];\n        }\n    }\n\n    private saveHistory(): void {\n        try {\n            if (typeof localStorage === \"undefined\") return;\n            localStorage.setItem(this.storageKey, JSON.stringify(this.entries));\n        } catch (error) {\n            console.warn('Failed to save history to storage:', error);\n        }\n    }\n}\n\n/**\n * Utility function to create a history manager\n */\nexport function createHistoryManager(options?: HistoryManagerOptions): HistoryManager {\n    return new HistoryManager(options);\n}","import { createDayDescriptor, insideOfDay, parseDateCorrectly } from \"@rs-core/time\";\nimport type { ChapterDescriptor, DayDescriptor } from \"@rs-core/utils/Types\";\nimport type { EntityInterface } from \"@rs-com/template/EntityInterface\";\nimport { JSOX } from \"jsox\";\n\n//\nexport const $unfiltered = <\n    E extends EntityInterface<any, any> = EntityInterface<any, any>,\n    C extends ChapterDescriptor = ChapterDescriptor\n    >(obj: E, desc: C): boolean => {\n    return true;\n}\n\n//\nexport const $byKind = <\n    E extends EntityInterface<any, any> = EntityInterface<any, any>,\n    C extends ChapterDescriptor = ChapterDescriptor\n    >(obj: E, desc: C): boolean => {\n    const kind = typeof desc == \"string\" ? desc : (desc as any)?.kind;\n    return (obj.kind === kind || !kind || kind == \"all\" || !obj.kind);\n}\n\n//\nexport const $insideOfDay = <\n    E extends EntityInterface<any, any> = EntityInterface<any, any>,\n    C extends DayDescriptor = DayDescriptor\n    >(obj: E, desc: C): boolean => {\n    const kind = typeof desc == \"string\" ? desc : (desc as any)?.kind;\n    const status = typeof desc == \"string\" ? desc : desc?.status;\n    const begin_time = (typeof desc == \"string\" ? desc : (desc?.begin_time ?? desc)) as any;\n    const end_time = (typeof desc == \"string\" ? desc : (desc?.end_time ?? desc)) as any;\n    return insideOfDay(obj, { begin_time, end_time, status }) ||\n        (status == obj?.properties?.status || status == \"all\" || !status) ||\n        (kind == obj?.kind || kind == \"all\" || !obj.kind);\n}\n\n//\nexport const renderTabName = (tabName: string) => {\n    if (!tabName) return \"\";\n\n    // split _ as spaces\n    tabName = tabName?.replace?.(/_/g, \" \") || tabName;\n\n    // capitalize first word letter\n    tabName = (tabName?.charAt?.(0)?.toUpperCase?.() + tabName?.slice?.(1)) || tabName;\n\n    //\n    return tabName;\n}\n\n\n\n// more smarter and stronger version of REMOVE_IF_HAS\nexport const REMOVE_IF_HAS_SIMILAR = (array: any[], old: any, idx: number = -1, srcObj: any = null) => {\n    if (array?.indexOf?.(old) >= 0) { array.splice(array.indexOf(old), 1); } else\n        if (idx >= 0 && idx < array?.length) { array.splice(idx, 1); } else {\n            // TODO: other mechanisms of finding index\n        }\n}\n\n\n\n//\nexport const REMOVE_IF_HAS = (array: any[], item: any) => {\n    if (array?.indexOf?.(item) >= 0) { array.splice(array.indexOf(item), 1); };\n};\n\n//\nexport const PUSH_ONCE = (array: any[], item: any) => {\n    if (array?.indexOf?.(item) < 0) { array.push(item); };\n};\n\n//\nexport const SPLICE_INTO_ONCE = (array: any[], item: any, index: number | string | symbol = -1) => {\n    if (typeof index != \"number\" || index < 0 || index >= array?.length) { PUSH_ONCE(array, item); } else\n        if (typeof index == \"number\" && array?.indexOf?.(item) < 0) { array.splice(index, 0, item); };\n};\n\n//\nexport const cachedPerFile = new WeakMap<File | Blob, any>();\nexport const cachedPerFileName = new Map<string, any>();\n\n//\nexport const GET_OR_CACHE = async (file: File | Blob | Promise<File | Blob> | null) => {\n    try { file = await file; } catch (e) { file = null; console.warn(e); }; if (file == null) return null;\n    if (cachedPerFile.has(file)) return cachedPerFile.get(file);\n    if (file?.type != \"application/json\") { return cachedPerFile.get(file); };\n\n    //\n    const raw = await file?.text?.()?.catch?.(console.warn.bind(console)) || \"{}\";\n    let obj = {} as any; try { obj = JSOX.parse(raw) as any; } catch (_) { try { obj = JSON.parse(raw) as any; } catch (e) { console.warn(e); } }\n    if (file) { cachedPerFile.set(file, obj); }\n    return obj;\n};\n\n// if any other argument isn't working, such as File object (for example, while exclusion)\nexport const GET_OR_CACHE_BY_NAME = async (fileName: string, file?: File | Blob | Promise<File | Blob> | null) => {\n    try { file = await file; } catch (e) { file = null; console.warn(e); }; if (fileName == null) return null;\n    if (cachedPerFileName.has(fileName)) return cachedPerFileName.get(fileName);\n    const obj = file != null ? await GET_OR_CACHE(file) : cachedPerFileName?.get(fileName);\n    if (fileName) { cachedPerFileName.set(fileName, obj); }\n    return obj;\n};\n\n\n//\nexport const cleanToDay = (item: EntityInterface<any, any>) => {\n    return createDayDescriptor(parseDateCorrectly(item?.properties?.begin_time));\n};\n\n//\nexport const closestOfDay = (item: EntityInterface<any, any>, days: any[]) => {\n    return days?.find((d) => insideOfDay(item, d));\n};\n\n//\nexport const closestOfKind = (item: EntityInterface<any, any>, subgroups: any[]) => {\n    return subgroups?.find((d) => d?.kind == item?.kind);\n};\n\n\n//\nexport const mergeByExists = <T extends { name: string }>(dataRef: T[], refs: T[]) => {\n    // Build index maps for O(1) lookups\n    const dataMap = new Map<string, { item: T; index: number }>();\n    dataRef.forEach((item, index) => {\n        if (item?.name) dataMap.set(item.name, { item, index });\n    });\n\n    const refsMap = new Map<string, T>();\n    refs.forEach(ref => {\n        if (ref?.name) refsMap.set(ref.name, ref);\n    });\n\n    // Update existing items\n    for (const [name, { index }] of dataMap) {\n        const ref = refsMap.get(name);\n        if (ref) {\n            dataRef[index] = ref;\n        }\n    }\n\n    // Add new items\n    for (const [name, ref] of refsMap) {\n        if (!dataMap.has(name)) {\n            dataRef.push(ref);\n        }\n    }\n\n    // Remove deleted items (iterated backwards to maintain indices)\n    for (let i = dataRef.length - 1; i >= 0; i--) {\n        const item = dataRef[i];\n        if (item?.name && !refsMap.has(item.name)) {\n            dataRef.splice(i, 1);\n        }\n    }\n\n    // sort by name\n    dataRef.sort((a: T, b: T) => a?.name?.localeCompare?.(b?.name ?? \"\"));\n\n    // return sorted data\n    return dataRef;\n}\n","import { writeTimelineTask } from \"../storage/FileSystem.js\";\nimport { fixEntityId } from \"@rs-com/template/EntityId.js\";\n\n// Debug configuration\nconst DEBUG_IMMITATE = 10 * 1000; // 10 seconds\nconst DEBUG_ENABLED = true; // Set to false to disable debug mode\n\n// Sample task templates for different kinds\nconst TASK_TEMPLATES = [\n    {\n        kind: \"job\",\n        name: \"Debug Job Task\",\n        description: \"This is a debug job task generated for testing purposes. It includes all necessary properties and follows the entity structure.\",\n        status: \"pending\",\n        icon: \"briefcase\",\n        variant: \"blue\"\n    },\n    {\n        kind: \"action\",\n        name: \"Debug Action Task\",\n        description: \"This is a debug action task generated for testing. It simulates a typical action that might be part of a daily routine.\",\n        status: \"in_progress\",\n        icon: \"play-circle\",\n        variant: \"green\"\n    },\n    {\n        kind: \"other\",\n        name: \"Debug Other Task\",\n        description: \"This is a debug task of 'other' kind. It represents miscellaneous tasks that don't fit into specific categories.\",\n        status: \"under_consideration\",\n        icon: \"play-circle\",//\"question-mark-circle\",\n        variant: \"orange\"\n    }\n];\n\n// Sample locations for tasks\nconst SAMPLE_LOCATIONS = [\n    \"Office\",\n    \"Home\",\n    \"Gym\",\n    \"Coffee Shop\",\n    \"Library\",\n    \"Park\",\n    \"Shopping Mall\",\n    \"Restaurant\"\n];\n\n// Sample contacts\nconst SAMPLE_CONTACTS = [\n    {\n        email: [\"debug@example.com\"],\n        phone: [\"+1234567890\"],\n        links: [\"https://example.com\"]\n    },\n    {\n        email: [\"test@example.com\"],\n        phone: [\"+0987654321\"]\n    }\n];\n\n/**\n * Generates a random debug task with realistic properties\n */\nexport const generateDebugTask = (): any => {\n    const now = new Date();\n    const template = TASK_TEMPLATES[Math.floor(Math.random() * TASK_TEMPLATES.length)];\n\n    // Generate random time for the task (within next 7 days)\n    const daysOffset = Math.floor(Math.random() * 7);\n    const hoursOffset = Math.floor(Math.random() * 24);\n    const minutesOffset = Math.floor(Math.random() * 60);\n\n    const beginTime = new Date(now);\n    beginTime.setDate(beginTime.getDate() + daysOffset);\n    beginTime.setHours(beginTime.getHours() + hoursOffset);\n    beginTime.setMinutes(beginTime.getMinutes() + minutesOffset);\n\n    // End time is 1-4 hours after begin time\n    const durationHours = 1 + Math.floor(Math.random() * 3);\n    const endTime = new Date(beginTime);\n    endTime.setHours(endTime.getHours() + durationHours);\n\n    const location = SAMPLE_LOCATIONS[Math.floor(Math.random() * SAMPLE_LOCATIONS.length)];\n    const contacts = SAMPLE_CONTACTS[Math.floor(Math.random() * SAMPLE_CONTACTS.length)];\n\n    const task = {\n        type: \"task\",\n        kind: template.kind,\n        name: `${template.name} ${Date.now()}`,\n        title: template.name,\n        description: template.description,\n        icon: template.icon,\n        variant: template.variant,\n        properties: {\n            status: template.status,\n            begin_time: {\n                timestamp: beginTime.getTime(),\n                iso_date: beginTime.toISOString()\n            },\n            end_time: {\n                timestamp: endTime.getTime(),\n                iso_date: endTime.toISOString()\n            },\n            location: location,\n            contacts: contacts,\n            members: [],\n            events: []\n        }\n    };\n\n    // Fix the entity ID to follow the naming convention\n    fixEntityId(task as any, { mutate: true });\n\n    return task;\n};\n\n/**\n * Generates multiple debug tasks\n */\nexport const generateDebugTasks = (count: number = 3): any[] => {\n    const tasks: any[] = [];\n    for (let i = 0; i < count; i++) {\n        tasks.push(generateDebugTask());\n    }\n    return tasks;\n};\n\n/**\n * Writes debug tasks to the timeline\n */\nexport const writeDebugTasks = async (taskCount: number = 1): Promise<any[]> => {\n    if (!DEBUG_ENABLED) {\n        console.log(\"Debug task generation is disabled\");\n        return [];\n    }\n\n    const tasks = generateDebugTasks(taskCount);\n    const results: any[] = [];\n\n    for (const task of tasks) {\n        try {\n            const result = await writeTimelineTask(task);\n            results.push(result);\n            console.log(\"Debug task written:\", task.name, task.id);\n        } catch (error) {\n            console.warn(\"Failed to write debug task:\", error);\n        }\n    }\n\n    return results;\n};\n\n/**\n * Auto-generates debug tasks on page refresh and via setTimeout\n */\nexport const startDebugTaskGeneration = (): void => {\n    if (!DEBUG_ENABLED) {\n        console.log(\"Debug task generation is disabled\");\n        return;\n    }\n\n    console.log(\"Starting debug task generation...\");\n\n    // Generate initial task on page load\n    //writeDebugTasks(1).catch(console.warn);\n\n    // Set up periodic generation\n    const generatePeriodically = () => {\n        setTimeout(async () => {\n            if (DEBUG_ENABLED) {\n                await writeDebugTasks(1);\n                generatePeriodically(); // Schedule next generation\n            }\n        }, DEBUG_IMMITATE);\n    };\n\n    //generatePeriodically();\n};\n\n/**\n * Manual trigger for debug task generation\n */\nexport const triggerDebugTaskGeneration = (count: number = 1): Promise<any[]> => {\n    if (!DEBUG_ENABLED) {\n        console.log(\"Debug task generation is disabled\");\n        return Promise.resolve([]);\n    }\n\n    return writeDebugTasks(count);\n};\n\n/**\n * Enable or disable debug mode\n */\nexport const setDebugMode = (enabled: boolean): void => {\n    (globalThis as any).DEBUG_ENABLED = enabled;\n    console.log(`Debug mode ${enabled ? 'enabled' : 'disabled'}`);\n};\n\n/**\n * Get current debug mode status\n */\nexport const isDebugModeEnabled = (): boolean => {\n    return DEBUG_ENABLED;\n};\n\n// Expose debug functions to global scope for easy testing\nif (typeof globalThis !== 'undefined') {\n    (globalThis as any).debugTaskGenerator = {\n        generate: triggerDebugTaskGeneration,\n        setMode: setDebugMode,\n        isEnabled: isDebugModeEnabled\n    };\n}\n","/**\n * Core Module\n *\n * Central module providing core utilities for the CrossWord application.\n *\n * Structure:\n * - api/      : API client and service communication\n * - storage/  : localStorage, sessionStorage, IndexedDB utilities\n * - document/ : Markdown rendering, DOCX export, document tools\n * - time/     : Time/date utilities\n * - text/     : Text formatting utilities\n * - phone/    : Phone number utilities\n * - modules/  : Feature modules (clipboard, history, etc.)\n * - utils/    : General utilities (types, theme, etc.)\n */\n\n// ============================================================================\n// API\n// ============================================================================\n\nexport {\n    api,\n    API_PATHS,\n    fetchWithTimeout,\n    fetchWithRetry,\n    type ApiResponse,\n    type ProcessingOptions,\n    type AnalyzeOptions,\n    type ApiPath\n} from \"./api\";\n\n// ============================================================================\n// STORAGE\n// ============================================================================\n\nexport {\n    // Keys\n    StorageKeys,\n    type StorageKey,\n\n    // LocalStorage\n    getItem,\n    setItem,\n    removeItem,\n    getString,\n    setString,\n    isLocalStorageAvailable,\n\n    // SessionStorage\n    getSessionItem,\n    setSessionItem,\n    removeSessionItem,\n\n    // IndexedDB\n    getIDBItem,\n    setIDBItem,\n    removeIDBItem,\n    IDBStorage,\n\n    // Pre-configured instances\n    workCenterStorage,\n    historyStorage,\n    settingsStorage\n} from \"./storage\";\n\n// ============================================================================\n// TIME UTILITIES\n// ============================================================================\n\nexport {\n    // Timezone\n    getTimeZone,\n\n    // Parsing\n    isPureHHMM,\n    parseDateCorrectly,\n    parseAndGetCorrectTime,\n    getComparableTimeValue,\n    isDate,\n\n    // Range checks\n    checkInTimeRange,\n    checkRemainsTime,\n\n    // Day descriptors\n    getISOWeekNumber,\n    createDayDescriptor,\n    insideOfDay,\n    notInPast,\n\n    // Timeline\n    SplitTimelinesByDays,\n    computeTimelineOrderInGeneral,\n    computeTimelineOrderInsideOfDay,\n\n    // Formatting\n    normalizeSchedule,\n    formatAsTime,\n    formatAsDate,\n    formatDateTime\n} from \"./time\";\n\n// ============================================================================\n// TEXT UTILITIES\n// ============================================================================\n\nexport {\n    // String utilities\n    isNotEmpty,\n    toStringSafe,\n    collapseWhitespace,\n    MAKE_LABEL,\n    cropFirstLetter,\n    startCase,\n    renderTabName,\n\n    // Multiline\n    toMultiline,\n    fromMultiline,\n    countLines,\n    wrapBySpan,\n\n    // Path utilities\n    splitPath,\n    getByPath,\n    setByPath,\n    unsetByPath,\n    makeObjectEntries,\n\n    // Markdown stripping\n    stripMarkdown,\n    sanitizeDocSnippet,\n    truncateDocSnippet,\n\n    // Date titles\n    ensureDate,\n    resolveBeginDate,\n    buildPrimaryDayTitle,\n    buildSecondaryDayTitle,\n\n    // Drag & copy handlers\n    beginDragAsText,\n    copyPhoneClick,\n    copyEmailClick\n} from \"./text\";\n\n// ============================================================================\n// PHONE UTILITIES\n// ============================================================================\n\nexport {\n    // Constants\n    PHONE_CANDIDATE_RE,\n    EXT_CUT_RE,\n\n    // Normalization\n    normalizeOne,\n    splitCandidates,\n    normalizePhones,\n\n    // Row helpers\n    getIndexForRow,\n    getPhonesFromRow,\n\n    // Duplicate detection\n    findDuplicatePhones,\n\n    // Types\n    type NormalizeOptions,\n    type DuplicateResult\n} from \"./phone\";\n\n// ============================================================================\n// DOCUMENT (Markdown & DOCX)\n// ============================================================================\n\nexport {\n    // Markdown\n    renderMarkdown,\n    renderMarkdownToElement,\n    renderMarkdownSync,\n    extractTitle,\n    isLikelyMarkdown,\n    type RenderOptions,\n    type MarkdownResult,\n\n    // DOCX\n    downloadMarkdownAsDocx,\n    downloadHtmlAsDocx,\n    createDocxBlobFromHtml,\n    createDocxBlobFromMarkdown,\n    type DocxExportOptions,\n\n    // Conversion\n    convertToHtml,\n    convertToMarkdown,\n    copyAsMarkdown,\n    copyAsHTML,\n    copyAsTeX,\n    copyAsMathML,\n    type CopyOptions,\n\n    // Parsing\n    parseMarkdownEntry,\n    unique,\n    normalizeCollections,\n    ensureCollections\n} from \"./document\";\n\n// ============================================================================\n// CLIPBOARD\n// ============================================================================\n\nexport {\n    copy,\n    writeText,\n    writeHTML,\n    writeImage,\n    readText,\n    toText,\n    requestCopy,\n    listenForClipboardRequests,\n    initClipboardReceiver,\n    requestCopyViaCRX,\n    isChromeExtension,\n    isClipboardAvailable,\n    isClipboardWriteAvailable,\n    COPY_HACK,\n    copyWithResult,\n    type ClipboardDataType,\n    type ClipboardWriteOptions,\n    type ClipboardResult,\n    type CRXCopyOptions\n} from \"./modules/Clipboard\";\n\n// Legacy aliases\nexport { copy as copyToClipboard } from \"./modules/Clipboard\";\nexport { readText as readFromClipboard } from \"./modules/Clipboard\";\n\n// ============================================================================\n// FILE UTILITIES\n// ============================================================================\n\nexport {\n    // Type detection\n    isMarkdownFile,\n    isTextFile,\n    isImageFile,\n    isCodeFile,\n\n    // Reading\n    readFileAsText,\n    readFileAsDataURL,\n    readFileAsArrayBuffer,\n\n    // Creation\n    createTextFile,\n    createMarkdownFile,\n    createJsonFile,\n\n    // Download\n    downloadFile,\n    downloadTextFile,\n    downloadMarkdown,\n\n    // Picking\n    pickFile,\n    pickFiles,\n    pickMarkdownFile,\n\n    // File System Access API\n    saveFile,\n    openFile\n} from \"./storage/file-utils\";\n\n// ============================================================================\n// MODULES (Feature modules)\n// ============================================================================\n\nexport { getCachedComponent, clearComponentCache, disposeCachedComponents } from \"./modules/LazyLoader\";\nexport { createFileHandler } from \"./storage/FileHandling\";\nexport { getSpeechPrompt } from \"./modules/VoiceInput\";\nexport { createTemplateManager } from \"./modules/TemplateManager\";\nexport { HistoryManager, createHistoryManager } from \"./modules/HistoryManager\";\n\n// ============================================================================\n// GENERAL UTILITIES\n// ============================================================================\n\nexport * from \"./utils\";\n\n// ============================================================================\n// COMMON HELPER FUNCTIONS\n// ============================================================================\n\n/**\n * Create a debounced function\n */\nexport function debounce<T extends (...args: any[]) => any>(\n    fn: T,\n    delay: number\n): (...args: Parameters<T>) => void {\n    let timeoutId: ReturnType<typeof setTimeout>;\n    return (...args: Parameters<T>) => {\n        clearTimeout(timeoutId);\n        timeoutId = setTimeout(() => fn(...args), delay);\n    };\n}\n\n/**\n * Create a throttled function\n */\nexport function throttle<T extends (...args: any[]) => any>(\n    fn: T,\n    limit: number\n): (...args: Parameters<T>) => void {\n    let inThrottle = false;\n    return (...args: Parameters<T>) => {\n        if (!inThrottle) {\n            fn(...args);\n            inThrottle = true;\n            setTimeout(() => (inThrottle = false), limit);\n        }\n    };\n}\n\n/**\n * Wait for a specific duration\n */\nexport function sleep(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n/**\n * Generate a unique ID\n */\nexport function uniqueId(prefix = \"\"): string {\n    return `${prefix}${Date.now().toString(36)}_${Math.random().toString(36).slice(2, 9)}`;\n}\n\n/**\n * Deep clone an object\n */\nexport function deepClone<T>(obj: T): T {\n    if (obj === null || typeof obj !== \"object\") return obj;\n    if (obj instanceof Date) return new Date(obj.getTime()) as T;\n    if (obj instanceof Array) return obj.map(item => deepClone(item)) as T;\n    if (obj instanceof Object) {\n        const cloned = {} as T;\n        for (const key in obj) {\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                (cloned as any)[key] = deepClone((obj as any)[key]);\n            }\n        }\n        return cloned;\n    }\n    return obj;\n}\n\n/**\n * Check if value is empty (null, undefined, empty string, empty array/object)\n */\nexport function isEmpty(value: unknown): boolean {\n    if (value === null || value === undefined) return true;\n    if (typeof value === \"string\") return value.trim().length === 0;\n    if (Array.isArray(value)) return value.length === 0;\n    if (typeof value === \"object\") return Object.keys(value).length === 0;\n    return false;\n}\n\n/**\n * Clamp a number between min and max\n */\nexport function clamp(value: number, min: number, max: number): number {\n    return Math.min(Math.max(value, min), max);\n}\n\n/**\n * Check if we're in a browser environment\n */\nexport function isBrowser(): boolean {\n    return typeof window !== \"undefined\" && typeof document !== \"undefined\";\n}\n\n/**\n * Check if we're in a worker environment\n */\nexport function isWorker(): boolean {\n    return typeof self !== \"undefined\" && typeof window === \"undefined\";\n}\n","/**\n * PWA Clipboard Handler\n * Connects PWA frontend with service worker clipboard operations\n * Listens for clipboard requests from service worker via BroadcastChannel\n */\n\nimport { initClipboardReceiver, listenForClipboardRequests, requestCopy } from \"../../core\";\nimport { initToastReceiver } from \"../items/Toast\";\nimport { unifiedMessaging } from \"@rs-com/core/UnifiedMessaging\";\n\n// Track initialization\nlet _pwaClipboardInitialized = false;\nlet _cleanupFns: (() => void)[] = [];\n\nconst sendShareTargetResultToWorkcenter = async (data: Record<string, unknown>, priority: \"high\" | \"normal\" = \"high\"): Promise<void> => {\n    await unifiedMessaging.sendMessage({\n        type: \"share-target-result\",\n        destination: \"workcenter\",\n        data,\n        metadata: { priority }\n    });\n};\n\n// Helper function to extract recognized content from AI responses\nconst tryParseJSON = (data: unknown): unknown => {\n    if (typeof data !== 'string') return null;\n    try {\n        return JSON.parse(data);\n    } catch {\n        return null;\n    }\n};\n\nconst extractRecognizedContent = (data: unknown): unknown => {\n    // If it's already a string that's not JSON, return as-is\n    if (typeof data === 'string') {\n        const parsed = tryParseJSON(data);\n        if (parsed && typeof parsed === 'object') {\n            // Extract content from recognized_data field\n            const obj = parsed as Record<string, unknown>;\n\n            // Priority: recognized_data > verbose_data > data itself\n            if (obj.recognized_data != null) {\n                const rd = obj.recognized_data;\n                // If it's an array, join the elements\n                if (Array.isArray(rd)) {\n                    return rd.map(item =>\n                        typeof item === 'string' ? item : JSON.stringify(item)\n                    ).join('\\n');\n                }\n                return typeof rd === 'string' ? rd : JSON.stringify(rd);\n            }\n\n            if (typeof obj.verbose_data === 'string' && obj.verbose_data.trim()) {\n                return obj.verbose_data;\n            }\n\n            // Common shape: { type: \"markdown\"|\"text\"|..., content: \"...\" }\n            if (typeof (obj as any).content === 'string' && (obj as any).content.trim()) {\n                return (obj as any).content;\n            }\n\n            // OpenAI Chat Completions style\n            const choices = (obj as any).choices;\n            if (Array.isArray(choices) && choices.length > 0) {\n                const first = choices[0];\n                const msgContent = first?.message?.content;\n                if (typeof msgContent === 'string' && msgContent.trim()) return msgContent;\n                const txt = first?.text;\n                if (typeof txt === 'string' && txt.trim()) return txt;\n            }\n\n            // Other common shapes\n            const outText = (obj as any).output_text;\n            if (typeof outText === 'string' && outText.trim()) return outText;\n            const output = (obj as any).output;\n            if (Array.isArray(output) && output.length > 0) {\n                const firstOut = output[0];\n                const text0 = firstOut?.content?.[0]?.text;\n                if (typeof text0 === 'string' && text0.trim()) return text0;\n            }\n\n            // No recognized_data, return original data\n            return data;\n        }\n        // Not JSON, return as-is\n        return data;\n    }\n\n    // If it's an object, try to extract recognized_data\n    if (data && typeof data === 'object') {\n        const obj = data as Record<string, unknown>;\n        if (obj.recognized_data != null) {\n            const rd = obj.recognized_data;\n            if (Array.isArray(rd)) {\n                return rd.map(item =>\n                    typeof item === 'string' ? item : JSON.stringify(item)\n                ).join('\\n');\n            }\n            return typeof rd === 'string' ? rd : JSON.stringify(rd);\n        }\n        if (typeof obj.verbose_data === 'string' && obj.verbose_data.trim()) {\n            return obj.verbose_data;\n        }\n\n        // Common shape: { type: \"markdown\"|\"text\"|..., content: \"...\" }\n        if (typeof (obj as any).content === 'string' && (obj as any).content.trim()) {\n            return (obj as any).content;\n        }\n\n        // OpenAI Chat Completions style\n        const choices = (obj as any).choices;\n        if (Array.isArray(choices) && choices.length > 0) {\n            const first = choices[0];\n            const msgContent = first?.message?.content;\n            if (typeof msgContent === 'string' && msgContent.trim()) return msgContent;\n            const txt = first?.text;\n            if (typeof txt === 'string' && txt.trim()) return txt;\n        }\n\n        // Other common shapes\n        const outText = (obj as any).output_text;\n        if (typeof outText === 'string' && outText.trim()) return outText;\n        const output = (obj as any).output;\n        if (Array.isArray(output) && output.length > 0) {\n            const firstOut = output[0];\n            const text0 = firstOut?.content?.[0]?.text;\n            if (typeof text0 === 'string' && text0.trim()) return text0;\n        }\n    }\n\n    return data;\n};\n\n/**\n * Check for pending clipboard operations from service worker\n */\nconst checkPendingClipboardOperations = async (): Promise<void> => {\n    try {\n        // Wait for service worker to be ready and controlling the page\n        if (!navigator.serviceWorker) {\n            console.log('[PWA-Copy] Service workers not supported');\n            return;\n        }\n\n        // Wait for service worker to be controlling the page\n        if (!navigator.serviceWorker.controller) {\n            console.log('[PWA-Copy] Waiting for service worker to control page...');\n\n            // Wait for service worker to become active\n            const registration = await navigator.serviceWorker.ready;\n            if (!registration.active) {\n                console.log('[PWA-Copy] Service worker not active yet');\n                return;\n            }\n\n            // Give it a moment to start controlling\n            await new Promise(resolve => setTimeout(resolve, 100));\n        }\n\n        console.log('[PWA-Copy] Checking for pending clipboard operations...');\n        const response = await fetch('/clipboard/pending');\n        const data = await response.json();\n\n        if (data.operations && Array.isArray(data.operations) && data.operations.length > 0) {\n            console.log('[PWA-Copy] Found', data.operations.length, 'pending clipboard operations');\n\n            for (const operation of data.operations) {\n                if (operation.type === 'ai-result' && operation.data) {\n                    console.log('[PWA-Copy] Processing pending AI result:', operation.id);\n                    const text = extractRecognizedContent(operation.data);\n                    const { copy } = await import(\"../../core/modules/Clipboard\");\n                    await copy(text, { showFeedback: true });\n\n                    await sendShareTargetResultToWorkcenter({\n                        content: typeof text === \"string\" ? text : JSON.stringify(text),\n                        rawData: operation.data,\n                        timestamp: Date.now(),\n                        source: \"share-target\",\n                        action: \"AI Processing (Pending)\",\n                        metadata: {\n                            operationId: operation.id,\n                            fromPendingQueue: true\n                        }\n                    });\n                    console.log(\"[PWA-Copy] Delivered pending share target result to work center\");\n\n                    // Remove the processed operation from the queue\n                    try {\n                        await fetch(`/clipboard/remove/${operation.id}`, { method: 'DELETE' });\n                    } catch (error) {\n                        console.warn('[PWA-Copy] Failed to remove processed operation:', error);\n                    }\n                }\n            }\n        }\n    } catch (error) {\n        console.warn('[PWA-Copy] Failed to check pending operations:', error);\n    }\n};\n\n/**\n * Initialize PWA clipboard listeners\n * Call this early in the PWA lifecycle to receive clipboard requests from service worker\n */\nexport const initPWAClipboard = (): (() => void) => {\n    if (_pwaClipboardInitialized) {\n        return () => cleanupPWAClipboard();\n    }\n    _pwaClipboardInitialized = true;\n\n    console.log('[PWA-Copy] Initializing clipboard and toast receivers...');\n\n    // Check for any pending clipboard operations that completed while page was closed\n    checkPendingClipboardOperations().catch(console.warn);\n\n    // Listen for clipboard requests from service worker\n    _cleanupFns.push(initClipboardReceiver());\n\n    // Listen for toast messages from service worker\n    _cleanupFns.push(initToastReceiver());\n\n    // Listen for various clipboard and share target operations\n    if (typeof BroadcastChannel !== \"undefined\") {\n        // Listen for direct clipboard requests from service worker\n        const clipboardChannel = new BroadcastChannel(\"rs-clipboard\");\n\n        const clipboardHandler = async (event: MessageEvent) => {\n            const { type, data, options, operations } = event.data || {};\n            console.log('[PWA-Copy] Clipboard channel message:', type, data);\n\n            // Handle direct clipboard copy requests\n            if (type === \"copy\" && data !== undefined) {\n                const { copy } = await import(\"../../core/modules/Clipboard\");\n                await copy(data, { showFeedback: true, ...options });\n            }\n\n            // Handle pending operations sent directly from service worker\n            if (type === \"pending-operations\" && operations && Array.isArray(operations)) {\n                console.log('[PWA-Copy] Received', operations.length, 'pending operations via broadcast');\n                for (const operation of operations) {\n                    if (operation.type === 'ai-result' && operation.data) {\n                        console.log('[PWA-Copy] Processing broadcasted AI result:', operation.id);\n                        const text = typeof operation.data === 'string' ? operation.data : JSON.stringify(operation.data);\n                        const { copy } = await import(\"../../core/modules/Clipboard\");\n                        await copy(text, { showFeedback: true });\n\n                        await sendShareTargetResultToWorkcenter({\n                            content: text,\n                            rawData: operation.data,\n                            timestamp: Date.now(),\n                            source: \"share-target\",\n                            action: \"AI Processing (Broadcasted)\",\n                            metadata: {\n                                operationId: operation.id,\n                                fromBroadcast: true\n                            }\n                        });\n                        console.log(\"[PWA-Copy] Delivered broadcasted share target result to work center\");\n\n                        // Remove the processed operation from the queue\n                        try {\n                            await fetch(`/clipboard/remove/${operation.id}`, { method: 'DELETE' });\n                        } catch (error) {\n                            console.warn('[PWA-Copy] Failed to remove processed operation:', error);\n                        }\n                    }\n                }\n            }\n        };\n\n        clipboardChannel.addEventListener(\"message\", clipboardHandler);\n        _cleanupFns.push(() => {\n            clipboardChannel.removeEventListener(\"message\", clipboardHandler);\n            clipboardChannel.close();\n        });\n\n        // Listen for share target clipboard operations\n        const shareChannel = new BroadcastChannel(\"rs-share-target\");\n\n        const shareHandler = async (event: MessageEvent) => {\n            const { type, data } = event.data || {};\n            console.log('[PWA-Copy] Share channel message:', type, data);\n\n            // Handle share-target copy request\n            if (type === \"copy-shared\" && data) {\n                const { copy } = await import(\"../../core/modules/Clipboard\");\n                await copy(data, { showFeedback: true });\n            }\n\n            // Handle share-received notification\n            if (type === \"share-received\" && data) {\n                console.log('[PWA-Copy] Share received from SW:', data);\n            }\n\n            // Handle AI result from service worker\n            if (type === \"ai-result\" && data) {\n                console.log('[PWA-Copy] AI result from SW:', data);\n                if (data.success && data.data) {\n                    const text = extractRecognizedContent(data.data);\n                    const { copy } = await import(\"../../core/modules/Clipboard\");\n                    await copy(text, { showFeedback: true });\n\n                    // Also broadcast to work center for visibility\n                    await unifiedMessaging.sendMessage({\n                        type: 'share-target-result',\n                        destination: 'workcenter',\n                        data: {\n                            content: typeof text === 'string' ? text : JSON.stringify(text),\n                            rawData: data.data,\n                            timestamp: Date.now(),\n                            source: 'share-target',\n                            action: 'AI Processing',\n                            metadata: {\n                                fromServiceWorker: true,\n                                shareTargetId: data.id || 'unknown'\n                            }\n                        },\n                        metadata: { priority: 'high' }\n                    });\n                } else {\n                    const { showToast } = await import(\"../items/Toast\");\n                    showToast({ message: data.error || \"Processing failed\", kind: \"error\" });\n                }\n            }\n\n            // Handle share target input attachment (when files/text/URLs come in)\n            if (type === \"share-received\" && data) {\n                console.log('[PWA-Copy] Share received, broadcasting input to work center:', data);\n                await unifiedMessaging.sendMessage({\n                    type: 'share-target-input',\n                    destination: 'workcenter',\n                    data: {\n                        ...data,\n                        timestamp: Date.now(),\n                        metadata: {\n                            fromServiceWorker: true,\n                            ...data.metadata\n                        }\n                    },\n                    metadata: { priority: 'high' }\n                });\n            }\n        };\n\n        shareChannel.addEventListener(\"message\", shareHandler);\n        _cleanupFns.push(() => {\n            shareChannel.removeEventListener(\"message\", shareHandler);\n            shareChannel.close();\n        });\n\n        // Listen for legacy commit-to-clipboard messages from service worker\n        const swChannel = new BroadcastChannel(\"rs-sw\");\n\n        const swHandler = async (event: MessageEvent) => {\n            const { type, results } = event.data || {};\n            console.log('[PWA-Copy] SW channel message:', type, results);\n\n            // Handle commit-to-clipboard messages\n            if (type === \"commit-to-clipboard\" && results && Array.isArray(results)) {\n                for (const result of results) {\n                    if (result?.status === 'queued' && result?.data) {\n                        console.log('[PWA-Copy] Copying result data:', result.data);\n                        // Use the extractRecognizedContent function to get the right data\n                        const extractedContent = extractRecognizedContent(result.data);\n                        const { copy } = await import(\"../../core/modules/Clipboard\");\n                        await copy(extractedContent, { showFeedback: true });\n\n                        // Also broadcast to work center for visibility\n                        await unifiedMessaging.sendMessage({\n                            type: 'share-target-result',\n                            destination: 'workcenter',\n                            data: {\n                                content: typeof extractedContent === 'string' ? extractedContent : JSON.stringify(extractedContent),\n                                rawData: result.data,\n                                timestamp: Date.now(),\n                                source: 'share-target',\n                                action: 'Legacy AI Processing',\n                                metadata: {\n                                    legacyCommit: true,\n                                    resultStatus: result.status\n                                }\n                            },\n                            metadata: { priority: 'normal' }\n                        });\n\n                        break; // Only copy the first successful result\n                    }\n                }\n            }\n        };\n\n        swChannel.addEventListener(\"message\", swHandler);\n        _cleanupFns.push(() => {\n            swChannel.removeEventListener(\"message\", swHandler);\n            swChannel.close();\n        });\n    }\n\n    console.log('[PWA-Copy] Receivers initialized');\n    return () => cleanupPWAClipboard();\n};\n\n/**\n * Cleanup all PWA clipboard listeners\n */\nexport const cleanupPWAClipboard = (): void => {\n    _cleanupFns.forEach(fn => fn?.());\n    _cleanupFns = [];\n    _pwaClipboardInitialized = false;\n};\n\n/**\n * Request copy operation via service worker\n * Useful when clipboard access is restricted in current context\n */\nexport const requestCopyViaServiceWorker = (data: unknown): void => {\n    requestCopy(data, { showFeedback: true });\n};\n\n// Re-export for convenience\nexport { requestCopy, listenForClipboardRequests, initClipboardReceiver };\n\n// Default export\nexport default {\n    init: initPWAClipboard,\n    cleanup: cleanupPWAClipboard,\n    requestCopy: requestCopyViaServiceWorker\n};\n","type ProbeResult = {\n    ok: boolean;\n    url: string;\n    contentType?: string | null;\n    status?: number;\n};\n\nconst isLikelyJavaScriptContentType = (contentType: string | null | undefined): boolean => {\n    const ct = (contentType || \"\").toLowerCase();\n    return ct.includes(\"javascript\") || ct.includes(\"ecmascript\") || ct.includes(\"module\");\n};\n\nconst probeScriptUrl = async (url: string): Promise<ProbeResult> => {\n    try {\n        const res = await fetch(url, {\n            method: \"GET\",\n            cache: \"no-store\",\n            credentials: \"same-origin\",\n        });\n        const contentType = res.headers.get(\"content-type\");\n        return { ok: res.ok && isLikelyJavaScriptContentType(contentType), url, contentType, status: res.status };\n    } catch {\n        return { ok: false, url };\n    }\n};\n\nexport const getServiceWorkerCandidates = (): string[] => {\n    const env = (import.meta as any)?.env;\n    const isDev = Boolean(env?.DEV);\n\n    // Dev: VitePWA injectManifest serves /sw.js.\n    if (isDev) return [\"/sw.js\"];\n\n    // Prod: support both root and /apps/cw/ (Fastify may expose one or both).\n    return [\"/sw.js\", \"/apps/cw/sw.js\"];\n};\n\nexport const ensureServiceWorkerRegistered = async (): Promise<ServiceWorkerRegistration | null> => {\n    if (typeof window === \"undefined\") return null;\n    if (!(\"serviceWorker\" in navigator)) return null;\n\n    // Prefer existing registration.\n    try {\n        const existing = await navigator.serviceWorker.getRegistration(\"/\");\n        if (existing) return existing;\n    } catch {\n        // ignore\n    }\n\n    const candidates = getServiceWorkerCandidates();\n    const scope = \"/\";\n\n    for (const url of candidates) {\n        const probe = await probeScriptUrl(url);\n        if (!probe.ok) continue;\n\n        try {\n            return await navigator.serviceWorker.register(url, {\n                scope,\n                type: \"module\",\n                updateViaCache: \"none\",\n            });\n        } catch (e) {\n            // Try next candidate.\n            console.warn(\"[SW] Registration attempt failed for\", url, e);\n        }\n    }\n\n    // Best-effort diagnostics.\n    try {\n        const probes = await Promise.all(candidates.map(probeScriptUrl));\n        console.warn(\"[SW] No valid service worker script found. Probes:\", probes);\n    } catch {\n        // ignore\n    }\n\n    return null;\n};\n\n","import { sendMessage, type UnifiedMessage } from \"@rs-com/core/UnifiedMessaging\";\n\nexport type ViewTransferSource = \"share-target\" | \"launch-queue\" | \"pending\" | \"clipboard\";\n\nexport type ViewTransferDestination =\n    | \"viewer\"\n    | \"workcenter\"\n    | \"explorer\"\n    | \"editor\"\n    | \"history\"\n    | \"settings\"\n    | \"home\"\n    | \"airpad\"\n    | \"print\";\n\nexport type ViewTransferActionHint = \"open\" | \"attach\" | \"save\" | \"process\";\n\nexport interface ViewTransferHint {\n    destination?: ViewTransferDestination;\n    action?: ViewTransferActionHint;\n    contentType?: string;\n    filename?: string;\n}\n\nexport interface ViewTransferPayload {\n    source: ViewTransferSource;\n    route: \"share-target\" | \"launch-queue\" | \"clipboard\";\n    title?: string;\n    text?: string;\n    url?: string;\n    files?: File[];\n    pending?: boolean;\n    hint?: ViewTransferHint;\n    metadata?: Record<string, unknown>;\n}\n\nexport interface ViewTransferResolved {\n    destination: ViewTransferDestination;\n    routePath: `/${ViewTransferDestination}`;\n    messageType: string;\n    contentType: string;\n    data: Record<string, unknown>;\n    metadata: Record<string, unknown>;\n}\n\nconst getContentType = (payload: ViewTransferPayload): string => {\n    if (payload.hint?.contentType) return String(payload.hint.contentType);\n    const files = Array.isArray(payload.files) ? payload.files : [];\n    const text = String(payload.text || \"\").trim();\n    const url = String(payload.url || \"\").trim();\n\n    if (files.length > 0) {\n        const file = files[0];\n        const name = String(file?.name || \"\").toLowerCase();\n        const mime = String(file?.type || \"\").toLowerCase();\n        if (mime.startsWith(\"image/\")) return \"image\";\n        if (mime === \"text/markdown\" || name.endsWith(\".md\") || name.endsWith(\".markdown\")) return \"markdown\";\n        if (mime.startsWith(\"text/\")) return \"text\";\n        return \"file\";\n    }\n\n    if (url) return \"url\";\n    if (text) return \"text\";\n    return \"other\";\n};\n\nconst pickDestination = (payload: ViewTransferPayload, contentType: string): ViewTransferDestination => {\n    if (payload.hint?.destination) return payload.hint.destination;\n    if (payload.hint?.action === \"save\") return \"explorer\";\n    if (payload.hint?.action === \"process\" || payload.hint?.action === \"attach\") return \"workcenter\";\n    if (payload.hint?.action === \"open\") return \"viewer\";\n\n    if (contentType === \"markdown\" || contentType === \"text\") return \"viewer\";\n    if (contentType === \"url\") return \"workcenter\";\n    if (contentType === \"image\" || contentType === \"file\") return \"workcenter\";\n    return \"workcenter\";\n};\n\nconst toMessageType = (destination: ViewTransferDestination, hint?: ViewTransferHint): string => {\n    if (destination === \"viewer\") return hint?.action === \"open\" ? \"content-load\" : \"content-view\";\n    if (destination === \"explorer\") return \"file-save\";\n    if (destination === \"workcenter\") return \"content-attach\";\n    if (destination === \"editor\") return \"content-load\";\n    return \"content-share\";\n};\n\nexport const resolveViewTransfer = (payload: ViewTransferPayload): ViewTransferResolved => {\n    const contentType = getContentType(payload);\n    const destination = pickDestination(payload, contentType);\n    const messageType = toMessageType(destination, payload.hint);\n    const files = Array.isArray(payload.files) ? payload.files : [];\n\n    const data: Record<string, unknown> = {\n        title: payload.title,\n        text: payload.text,\n        content: payload.text,\n        url: payload.url,\n        files,\n        filename: payload.hint?.filename || files[0]?.name,\n        source: payload.source,\n        route: payload.route,\n        hint: payload.hint\n    };\n\n    return {\n        destination,\n        routePath: `/${destination}`,\n        messageType,\n        contentType,\n        data,\n        metadata: {\n            source: payload.source,\n            route: payload.route,\n            pending: Boolean(payload.pending),\n            hint: payload.hint,\n            ...(payload.metadata || {})\n        }\n    };\n};\n\nexport const dispatchViewTransfer = async (\n    payload: ViewTransferPayload\n): Promise<{ delivered: boolean; resolved: ViewTransferResolved }> => {\n    const resolved = resolveViewTransfer(payload);\n    const message: Omit<UnifiedMessage, \"id\" | \"source\"> & { source?: string } = {\n        type: resolved.messageType,\n        destination: resolved.destination,\n        contentType: resolved.contentType,\n        data: resolved.data,\n        metadata: resolved.metadata,\n        source: `view-transfer:${payload.source}`\n    };\n\n    const delivered = await sendMessage(message);\n    return { delivered, resolved };\n};\n","// PWA clipboard and service worker communication\nimport { initPWAClipboard } from \"./pwa-copy\";\nimport { showToast } from \"../items/Toast\";\nimport { ensureServiceWorkerRegistered } from \"./sw-url\";\nimport { dispatchViewTransfer, type ViewTransferHint } from \"@rs-com/core/ViewTransferRouting\";\nimport { BROADCAST_CHANNELS } from \"@rs-com/config/Names\";\nimport {\n    consumeCachedShareTargetPayload as consumeCachedShareTargetPayloadFromGateway,\n    storeShareTargetPayloadToCache as storeShareTargetPayloadToCacheGateway,\n    type CachedShareTargetPayload\n} from \"@rs-com/core/ShareTargetGateway\";\n\n// ============================================================================\n// CSS INJECTION\n// ============================================================================\n\nexport const ensureAppCss = () => {\n    // App is built as a JS module; make sure extracted CSS is loaded in production.\n    // Skip extension pages: they have their own HTML entrypoints and CSS injection.\n    const viteEnv = (import.meta as any)?.env;\n    if (viteEnv?.DEV) return;\n    if (typeof window === \"undefined\") return;\n    if (globalThis?.location?.protocol === \"chrome-extension:\") return;\n\n    const id = \"rs-crossword-css\";\n    if (document.getElementById(id)) return;\n\n    const link = document.createElement(\"link\");\n    link.id = id;\n    link.rel = \"stylesheet\";\n\n    // Resolve CSS relative to module location (handles /apps/cw/ mounting)\n    // Module is at .../modules/index.js, CSS is at .../assets/crossword.css\n    try {\n        // Go up from modules/ to app root, then into assets/\n        const cssUrl = new URL(\"../assets/crossword.css\", import.meta.url);\n        link.href = cssUrl.toString();\n    } catch {\n        // Fallback: try document-relative path\n        link.href = \"assets/crossword.css\";\n    }\n\n    // Handle load errors by trying alternative paths\n    let altIndex = 0;\n    link.onerror = () => {\n        const altPaths = [\n            // Relative to app root (if main entry, not in modules/)\n            new URL(\"./assets/crossword.css\", import.meta.url).toString(),\n            // Absolute from document root\n            \"/assets/crossword.css\",\n            // Common app mounting paths\n            \"/apps/cw/assets/crossword.css\",\n        ];\n\n        if (altIndex < altPaths.length) {\n            const nextPath = altPaths[altIndex++];\n            if (link.href !== nextPath) {\n                console.warn(`[CSS] Trying path: ${nextPath}`);\n                link.href = nextPath;\n                return;\n            }\n        }\n        link.onerror = null;\n    };\n\n    document.head.append(link);\n};\n\n// ============================================================================\n// SERVICE WORKER INITIALIZATION\n// ============================================================================\n\nlet _swRegistration: ServiceWorkerRegistration | null = null;\nlet _swInitPromise: Promise<ServiceWorkerRegistration | null> | null = null;\nlet _swOptions: { immediate?: boolean, onRegistered?: () => void, onRegisterError?: (error: any) => void } = {\n    immediate: false,\n    onRegistered: () => {\n        console.log('[PWA] Service worker registered successfully');\n    },\n    onRegisterError: (error) => {\n        console.error('[PWA] Service worker registration failed:', error);\n    }\n};\n\n/**\n * Initialize PWA service worker early in the page lifecycle\n * This ensures share target and other PWA features work correctly\n */\nexport const initServiceWorker = async (_options: { immediate?: boolean, onRegistered?: () => void, onRegisterError?: (error: any) => void } = _swOptions): Promise<ServiceWorkerRegistration | null> => {\n    // Return cached promise if already initializing\n    if (_swInitPromise) return _swInitPromise;\n\n    _swInitPromise = (async () => {\n        // Skip in extension context\n        if (typeof globalThis === 'undefined') return null;\n        if (globalThis?.location?.protocol === 'chrome-extension:') return null;\n        if (!('serviceWorker' in navigator)) {\n            console.warn('[PWA] Service workers not supported');\n            return null;\n        }\n\n        try {\n            const registration = await ensureServiceWorkerRegistered();\n            if (!registration) {\n                console.error('[PWA] Service worker registration failed: no valid sw.js found');\n                return null;\n            }\n\n            _swRegistration = registration;\n            const viteEnv = (import.meta as any)?.env;\n\n            // In dev, aggressively activate updated SW to avoid stale Workbox routes breaking Vite module fetches.\n            // This prevents \"Failed to fetch dynamically imported module: /src/...\" when an old SW is still controlling the page.\n            try {\n                if (viteEnv?.DEV && registration.waiting) {\n                    registration.waiting.postMessage({ type: 'SKIP_WAITING' });\n                }\n            } catch (e) {\n                console.warn('[PWA] Failed to auto-skip-waiting in dev:', e);\n            }\n\n            // Handle updates\n            registration?.addEventListener?.('updatefound', () => {\n                const newWorker = registration?.installing;\n                if (newWorker) {\n                    newWorker?.addEventListener?.('statechange', () => {\n                        if (newWorker?.state === 'installed' && navigator.serviceWorker.controller) {\n                            console.log('[PWA] New service worker available');\n                            showToast({ message: 'App update available', kind: 'info' });\n                            try {\n                                if (viteEnv?.DEV && registration.waiting) {\n                                    registration.waiting.postMessage({ type: 'SKIP_WAITING' });\n                                }\n                            } catch (e) {\n                                console.warn('[PWA] Failed to auto-skip-waiting on updatefound:', e);\n                            }\n                        }\n                    });\n                }\n            });\n\n            // Check for updates periodically (every 30 minutes)\n            setInterval(() => {\n                registration?.update?.().catch?.(console.warn);\n            }, 30 * 60 * 1000);\n\n            console.log('[PWA] Service worker registered successfully');\n            return registration;\n        } catch (error) {\n            console.error('[PWA] Service worker registration failed:', error);\n            return null;\n        }\n    })();\n\n    return _swInitPromise;\n};\n\n/**\n * Get current service worker registration\n */\nexport const getServiceWorkerRegistration = () => _swRegistration;\n\n/**\n * Wait for service worker to be ready\n */\nexport const waitForServiceWorker = async (): Promise<ServiceWorkerRegistration | null> => {\n    if (_swRegistration) return _swRegistration;\n    return _swInitPromise || initServiceWorker();\n};\n\n// ============================================================================\n// BROADCAST RECEIVERS\n// ============================================================================\n\nlet _receiversCleanup: (() => void) | null = null;\n\nexport const initReceivers = () => {\n    if (_receiversCleanup) return;\n    _receiversCleanup = initPWAClipboard();\n};\n\n// ============================================================================\n// SHARE TARGET PROCESSING\n// ============================================================================\n\ninterface ShareDataInput {\n    title?: string;\n    text?: string;\n    url?: string;\n    sharedUrl?: string;\n    files?: File[] | any[];\n    fileCount?: number;\n    imageCount?: number;\n    timestamp?: number;\n    aiProcessed?: boolean;\n    results?: any[];\n    source?: string;\n}\n\nconst routeToTransferView = async (\n    shareData: ShareDataInput,\n    source: \"share-target\" | \"launch-queue\" | \"pending\",\n    hint?: ViewTransferHint,\n    pending = false\n): Promise<boolean> => {\n    const files = Array.isArray(shareData.files)\n        ? shareData.files.filter((file): file is File => file instanceof File)\n        : [];\n\n    const { delivered, resolved } = await dispatchViewTransfer({\n        source,\n        route: source === \"launch-queue\" ? \"launch-queue\" : \"share-target\",\n        title: shareData.title,\n        text: shareData.text,\n        url: shareData.url || shareData.sharedUrl,\n        files,\n        hint,\n        pending,\n        metadata: {\n            timestamp: shareData.timestamp || Date.now(),\n            fileCount: shareData.fileCount ?? files.length,\n            imageCount: shareData.imageCount ?? files.filter((f) => f.type.startsWith(\"image/\")).length\n        }\n    });\n\n    const currentPath = (globalThis?.location?.pathname || \"\").replace(/\\/+$/, \"\") || \"/\";\n    if (currentPath !== resolved.routePath) {\n        const nextUrl = new URL(globalThis?.location?.href);\n        nextUrl.pathname = resolved.routePath;\n        nextUrl.search = \"\";\n        nextUrl.hash = \"\";\n        globalThis.location.href = nextUrl.toString();\n    }\n\n    return delivered;\n};\n\n/**\n * Extract processable content from share data\n * Handles various formats from SW, server, or direct input\n */\nconst extractShareContent = (shareData: ShareDataInput): { content: string | null; type: 'text' | 'url' | 'file' | null } => {\n    // Check for text content first\n    const text = shareData.text?.trim();\n    if (text) {\n        return { content: text, type: 'text' };\n    }\n\n    // Check for URL (handle both 'url' and 'sharedUrl' from server)\n    const url = (shareData.url || shareData.sharedUrl)?.trim();\n    if (url) {\n        return { content: url, type: 'url' };\n    }\n\n    // Check for title as fallback\n    const title = shareData.title?.trim();\n    if (title) {\n        return { content: title, type: 'text' };\n    }\n\n    // Check for actual file objects\n    if (Array.isArray(shareData.files) && shareData.files.length > 0) {\n        const firstFile = shareData.files[0];\n        if (firstFile instanceof File || firstFile instanceof Blob) {\n            return { content: null, type: 'file' };\n        }\n    }\n\n    return { content: null, type: null };\n};\n\n/**\n * Process share target data with AI - broadcasts results to PWA clipboard handlers\n * This is called when SW didn't process (or failed), or for server-side fallback\n */\nexport const processShareTargetData = async (shareData: ShareDataInput, skipIfEmpty = false): Promise<boolean> => {\n    console.log(\"[ShareTarget] Processing shared data:\", {\n        hasText: !!shareData.text,\n        hasUrl: !!shareData.url,\n        fileCount: shareData.files?.length || shareData.fileCount || 0,\n        imageCount: shareData.imageCount || 0,\n        source: shareData.source || 'unknown',\n        aiProcessed: shareData.aiProcessed\n    });\n\n    // If AI already processed in SW, just show result info\n    if (shareData.aiProcessed && shareData.results?.length) {\n        console.log(\"[ShareTarget] AI already processed in SW, showing result\");\n        showToast({ message: \"Content processed by service worker\", kind: \"success\" });\n        return true;\n    }\n\n    const { content, type } = extractShareContent(shareData);\n\n    console.log(\"[ShareTarget] Extracted content:\", { content: content?.substring(0, 50), type });\n\n    if (!content && type !== 'file') {\n        if (skipIfEmpty) {\n            console.log(\"[ShareTarget] No content to process (skipping)\");\n            return false;\n        }\n\n        // Check if there's file metadata but no actual files\n        if (shareData.fileCount && shareData.fileCount > 0) {\n            // Files were processed in SW, this is just metadata notification\n            console.log(\"[ShareTarget] Files processed in service worker\");\n            showToast({ message: \"Files received and being processed\", kind: \"info\" });\n            return true;\n        }\n\n        console.warn(\"[ShareTarget] No content to process\");\n        showToast({ message: \"No content received to process\", kind: \"warning\" });\n        return false;\n    }\n\n    try {\n        console.log(\"[ShareTarget] Starting AI processing for type:\", type);\n        showToast({ message: \"Processing shared content...\", kind: \"info\" });\n\n        // Utility function to convert file to base64\n        const fileToBase64 = (file: File): Promise<string> => {\n            return new Promise((resolve, reject) => {\n                const reader = new FileReader();\n                reader.onload = () => resolve(reader.result as string);\n                reader.onerror = reject;\n                reader.readAsDataURL(file);\n            });\n        };\n\n        // Use unified processing endpoint\n        console.log(\"[ShareTarget] Using unified processing endpoint\");\n\n        let processingContent: any;\n        let contentType: string;\n\n        if (type === 'file' && shareData.files?.[0]) {\n            const file = shareData.files[0] as File;\n            console.log(\"[ShareTarget] Processing file:\", { name: file.name, type: file.type, size: file.size });\n\n            // Convert file to base64 for API transport\n            const base64 = await fileToBase64(file);\n            processingContent = base64;\n            contentType = 'base64';\n        } else if (content) {\n            processingContent = content;\n            contentType = 'text';\n            console.log(\"[ShareTarget] Processing text content, length:\", content.length);\n        } else {\n            throw new Error(\"No processable content found\");\n        }\n\n        // Call unified processing endpoint\n        console.log(\"[ShareTarget] Calling unified processing API\");\n        const response = await fetch('/api/processing', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                content: processingContent,\n                contentType,\n                processingType: 'general-processing',\n                metadata: {\n                    source: 'share-target',\n                    title: shareData.title || 'Shared Content',\n                    timestamp: Date.now()\n                }\n            })\n        });\n\n        if (!response.ok) {\n            throw new Error(`Processing API failed: ${response.status}`);\n        }\n\n        const result = await response.json();\n        console.log(\"[ShareTarget] Unified processing completed:\", { success: result.success });\n\n        if (result.success && result.data) {\n            console.log(\"[ShareTarget] Processing result via unified messaging\");\n\n            // Send to clipboard if configured\n            const clipboardChannel = new BroadcastChannel(CHANNELS.CLIPBOARD);\n            clipboardChannel.postMessage({\n                type: 'copy',\n                data: result.data\n            });\n            clipboardChannel.close();\n\n            // Send to workcenter for display (destination-aware)\n            try {\n                const { unifiedMessaging } = await import(\"@rs-com/core/UnifiedMessaging\");\n                await unifiedMessaging.sendMessage({\n                    type: 'share-target-result',\n                    source: 'share-target',\n                    destination: 'workcenter',\n                    data: {\n                        content: typeof result.data === 'string' ? result.data : JSON.stringify(result.data, null, 2),\n                        rawData: result.data,\n                        timestamp: Date.now(),\n                        source: 'share-target',\n                        action: 'Processing (/api/processing)',\n                        metadata: result.metadata\n                    },\n                    metadata: { priority: 'high' }\n                } as any);\n            } catch (e) {\n                // Fallback to legacy broadcast (best-effort)\n                const workCenterChannel = new BroadcastChannel(BROADCAST_CHANNELS.WORK_CENTER);\n                workCenterChannel.postMessage({\n                    type: 'share-target-result',\n                    data: {\n                        content: result.data,\n                        rawData: result.data,\n                        timestamp: Date.now(),\n                        source: 'share-target',\n                        action: 'Processing (/api/processing)',\n                        metadata: result.metadata\n                    }\n                });\n                workCenterChannel.close();\n            }\n\n            return true;\n        } else {\n            const errorMsg = result?.error || \"AI processing returned no data\";\n            console.warn(\"[ShareTarget] AI processing failed:\", errorMsg);\n\n            // Broadcast error to clipboard handlers\n            const shareChannel = new BroadcastChannel(CHANNELS.SHARE_TARGET);\n            shareChannel.postMessage({\n                type: 'ai-result',\n                data: { success: false, error: errorMsg }\n            });\n            shareChannel.close();\n\n            showToast({ message: `Processing failed: ${errorMsg}`, kind: \"warning\" });\n            return false;\n        }\n    } catch (error: any) {\n        console.error(\"[ShareTarget] Processing error:\", error);\n\n        // Try fallback to server-side AI processing\n        console.log(\"[ShareTarget] Attempting server-side fallback\");\n        const fallbackResult = await tryServerSideProcessing(shareData);\n        if (fallbackResult) {\n            console.log(\"[ShareTarget] Server-side fallback succeeded\");\n            return true;\n        }\n\n        console.warn(\"[ShareTarget] All processing methods failed\");\n\n        // Broadcast error to clipboard handlers\n        const shareChannel = new BroadcastChannel(CHANNELS.SHARE_TARGET);\n        shareChannel.postMessage({\n            type: 'ai-result',\n            data: { success: false, error: error?.message || String(error) }\n        });\n        shareChannel.close();\n\n        showToast({ message: `Processing failed: ${error?.message || 'Unknown error'}`, kind: \"error\" });\n        return false;\n    }\n};\n\n// BroadcastChannel names (using centralized naming system)\nexport const CHANNELS = {\n    SHARE_TARGET: BROADCAST_CHANNELS.SHARE_TARGET,\n    TOAST: BROADCAST_CHANNELS.TOAST,\n    CLIPBOARD: BROADCAST_CHANNELS.CLIPBOARD,\n    MINIMAL_APP: BROADCAST_CHANNELS.MINIMAL_APP,\n    MAIN_APP: BROADCAST_CHANNELS.MAIN_APP,\n    FILE_EXPLORER: BROADCAST_CHANNELS.FILE_EXPLORER,\n    PRINT_VIEWER: BROADCAST_CHANNELS.PRINT_VIEWER\n} as const;\n\n// ============================================================================\n// SHARE TARGET CACHE CONSUMPTION (FILES)\n// ============================================================================\n\nexport const storeShareTargetPayloadToCache = async (payload: { files: File[]; meta?: any }): Promise<boolean> =>\n    storeShareTargetPayloadToCacheGateway(payload);\n\n/**\n * Read and (optionally) clear share-target cached payload, including real files.\n * This is used by Basic edition to attach incoming files to WorkCenter or open markdown.\n */\nexport const consumeCachedShareTargetPayload = async (opts: { clear?: boolean } = {}): Promise<CachedShareTargetPayload | null> =>\n    consumeCachedShareTargetPayloadFromGateway(opts);\n\n/**\n * Fallback to server-side AI processing when client-side fails\n * Broadcasts results to PWA clipboard handlers instead of copying directly\n */\nconst tryServerSideProcessing = async (shareData: ShareDataInput): Promise<boolean> => {\n    try {\n        const { content, type } = extractShareContent(shareData);\n        if (!content) return false;\n\n        console.log(\"[ShareTarget] Attempting server-side AI fallback\");\n\n        // Get API settings\n        const { getRuntimeSettings } = await import(\"@rs-com/config/RuntimeSettings\");\n        const settings = await getRuntimeSettings().catch(() => null);\n        const apiKey = settings?.ai?.apiKey;\n\n        if (!apiKey) {\n            console.log(\"[ShareTarget] No API key for server fallback\");\n            return false;\n        }\n\n        // Call server-side AI endpoint\n        const response = await fetch('/api/share/process', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                text: type === 'text' ? content : undefined,\n                url: type === 'url' ? content : undefined,\n                title: shareData.title,\n                apiKey,\n                baseUrl: settings?.ai?.baseUrl,\n                model: settings?.ai?.customModel || settings?.ai?.model\n            })\n        });\n\n        if (!response.ok) {\n            console.warn(\"[ShareTarget] Server fallback failed:\", response.status);\n            return false;\n        }\n\n        const result = await response.json();\n        if (result?.ok && result?.data) {\n            // Broadcast result to PWA clipboard handlers\n            console.log(\"[ShareTarget] Broadcasting server-side result to clipboard handlers\");\n            const shareChannel = new BroadcastChannel(CHANNELS.SHARE_TARGET);\n            shareChannel.postMessage({\n                type: 'ai-result',\n                data: { success: true, data: String(result.data) }\n            });\n            shareChannel.close();\n            return true;\n        }\n\n        return false;\n    } catch (error) {\n        console.warn(\"[ShareTarget] Server fallback error:\", error);\n        return false;\n    }\n};\n\n/**\n * Handle share target data from various sources\n */\nexport const handleShareTarget = () => {\n    const params = new URLSearchParams(globalThis?.location?.search);\n    const shared = params.get(\"shared\");\n\n    // Handle URL params from server-side share handler\n    if (shared === \"1\" || shared === \"true\") {\n        console.log(\"[ShareTarget] Detected shared=1 URL param, processing server-side share\");\n\n        // Extract share data from URL params (server-side handler)\n        const shareFromParams: ShareDataInput = {\n            title: params.get(\"title\") || undefined,\n            text: params.get(\"text\") || undefined,\n            url: params.get(\"url\") || undefined,\n            sharedUrl: params.get(\"sharedUrl\") || undefined,\n            timestamp: Date.now(),\n            source: 'url-params'\n        };\n\n        console.log(\"[ShareTarget] Share data from URL params:\", {\n            title: shareFromParams.title,\n            text: shareFromParams.text,\n            url: shareFromParams.url,\n            sharedUrl: shareFromParams.sharedUrl\n        });\n\n        // Clean up URL\n        const cleanUrl = new URL(globalThis?.location?.href);\n        ['shared', 'action', 'title', 'text', 'url', 'sharedUrl'].forEach(p => cleanUrl.searchParams.delete(p));\n        globalThis?.history?.replaceState?.({}, \"\", cleanUrl.pathname + cleanUrl.hash);\n\n        // Check if we have content from params\n        const { content, type } = extractShareContent(shareFromParams);\n        console.log(\"[ShareTarget] Extracted from URL params:\", { content: content?.substring(0, 50), type });\n\n        if (content || type === 'file') {\n            console.log(\"[ShareTarget] Processing from URL params\");\n            routeToTransferView(shareFromParams, \"share-target\").catch((error) => {\n                console.warn(\"[ShareTarget] Route transfer failed, falling back to processing:\", error);\n                processShareTargetData(shareFromParams, true);\n            });\n            return; // Don't also check cache\n        } else {\n            console.log(\"[ShareTarget] No processable content in URL params, checking cache\");\n        }\n\n        // No content in params, try cache\n        if ('caches' in globalThis) {\n            caches.open(\"share-target-data\")\n                .then(cache => cache?.match?.(\"/share-target-data\"))\n                .then(response => response?.json?.())\n                .then(async (data: ShareDataInput | undefined) => {\n                    if (data) {\n                        console.log(\"[ShareTarget] Retrieved cached data:\", data);\n                        const delivered = await routeToTransferView(data, \"share-target\", undefined, true);\n                        if (!delivered) {\n                            await processShareTargetData(data, true);\n                        }\n                    } else {\n                        console.log(\"[ShareTarget] No cached share data found\");\n                    }\n                })\n                .catch(e => console.warn(\"[ShareTarget] Cache retrieval failed:\", e));\n        }\n    } else if (shared === \"test\") {\n        // Test mode - just show confirmation\n        showToast({ message: \"Share target route working\", kind: \"info\" });\n\n        const cleanUrl = new URL(globalThis?.location?.href);\n        cleanUrl.searchParams.delete(\"shared\");\n        globalThis?.history?.replaceState?.({}, \"\", cleanUrl.pathname + cleanUrl.hash);\n    }\n\n    // Check for pending share data from sessionStorage (server-side handler fallback)\n    try {\n        const pendingData = sessionStorage.getItem(\"rs-pending-share\");\n        if (pendingData) {\n            sessionStorage.removeItem(\"rs-pending-share\");\n            const shareData = JSON.parse(pendingData) as ShareDataInput;\n            console.log(\"[ShareTarget] Found pending share in sessionStorage:\", shareData);\n            routeToTransferView(shareData, \"pending\", undefined, true).catch((error) => {\n                console.warn(\"[ShareTarget] Pending transfer routing failed:\", error);\n            });\n        }\n    } catch (e) {\n        // Ignore sessionStorage errors\n    }\n\n    // Listen for real-time share target broadcasts from service worker\n    // Note: AI results are handled by PWA clipboard receivers, this handles share notifications\n    if (typeof BroadcastChannel !== \"undefined\") {\n        const shareChannel = new BroadcastChannel(CHANNELS.SHARE_TARGET);\n        shareChannel.addEventListener(\"message\", async (event) => {\n            const msgType = event.data?.type;\n            const msgData = event.data?.data;\n\n            console.log(\"[ShareTarget] Broadcast received:\", { type: msgType, hasData: !!msgData });\n\n            if (msgType === \"share-received\" && msgData) {\n                console.log(\"[ShareTarget] Share notification received:\", {\n                    hasText: !!msgData.text,\n                    hasUrl: !!msgData.url,\n                    fileCount: msgData.fileCount || 0,\n                    aiEnabled: msgData.aiEnabled,\n                    source: msgData.source\n                });\n\n                // Check if this is just a notification (files processed in SW)\n                // vs actual data we need to process\n                if (msgData.fileCount > 0 && !msgData.files?.length) {\n                    // This is a notification - files were handled in SW\n                    showToast({ message: `Processing ${msgData.fileCount} file(s)...`, kind: \"info\" });\n                } else if (msgData.text || msgData.url || msgData.title) {\n                    // We have text content to potentially process\n                    console.log(\"[ShareTarget] Processing broadcasted share data\");\n                    const delivered = await routeToTransferView(msgData, \"share-target\", undefined, true);\n                    if (!delivered) {\n                        await processShareTargetData(msgData, true);\n                    }\n                }\n            } else if (msgType === \"ai-result\") {\n                console.log(\"[ShareTarget] AI result broadcast received (handled by PWA clipboard)\");\n            }\n        });\n\n        console.log(\"[ShareTarget] Broadcast channel listener set up\");\n    } else {\n        console.warn(\"[ShareTarget] BroadcastChannel not available\");\n    }\n};\n\n// ============================================================================\n// LAUNCH QUEUE TYPES AND HANDLING\n// ============================================================================\n\n// Type definitions for Launch Queue API\ninterface LaunchParams {\n    files: FileSystemFileHandle[];\n    targetURL?: string;\n}\n\ninterface LaunchQueue {\n    setConsumer(callback: (launchParams: LaunchParams) => void): void;\n}\n\ndeclare global {\n    interface Window {\n        launchQueue?: LaunchQueue;\n    }\n}\n\n/**\n * Set up launchQueue consumer for PWA file launches and share-target\n * This handles direct file launches when the PWA is opened with files\n */\nexport const setupLaunchQueueConsumer = async () => {\n    if (!('launchQueue' in globalThis)) {\n        console.log('[LaunchQueue] launchQueue API not available');\n        return;\n    }\n\n    try {\n        // Set up the consumer for launch queue\n        globalThis?.launchQueue?.setConsumer?.((launchParams: LaunchParams) => {\n            console.log('[LaunchQueue] Launch params received:', launchParams);\n            const $files = [...launchParams.files];\n\n            // Handle files from launch queue\n            if (!$files || $files.length === 0) {\n                console.log('[LaunchQueue] No files in launch params - this may indicate:');\n                console.log('  - File opener was used but no files were selected');\n                console.log('  - Launch queue consumer called with empty payload');\n                console.log('  - Permission issues preventing file access');\n                console.log('  - Browser compatibility issues');\n                return;\n            }\n\n            //\n            console.log(`[LaunchQueue] Processing ${$files.length} file handle(s)`);\n\n            // Convert FileSystemHandle objects to actual File objects\n            const files: File[] = [];\n            const failedHandles: any[] = [];\n            let hasMarkdownFile = false;\n\n            //\n            (async () => {\n                for (const fileHandle of $files) {\n                    try {\n                        console.log('[LaunchQueue] Processing file handle:', {\n                            name: fileHandle.name || 'unknown',\n                            type: fileHandle.constructor.name,\n                            hasGetFile: typeof fileHandle.getFile === 'function',\n                            isFile: fileHandle instanceof File\n                        });\n\n                        // For file handles, get the actual file\n                        if (fileHandle.getFile) {\n                            try {\n                                // Check if we have permission to access the file\n                                if ('queryPermission' in fileHandle) {\n                                    const permission = await (fileHandle as any).queryPermission();\n                                    console.log('[LaunchQueue] File handle permission:', permission);\n                                    if (permission !== 'granted') {\n                                        console.warn('[LaunchQueue] No permission to access file:', fileHandle.name);\n                                        failedHandles.push(fileHandle);\n                                        continue;\n                                    }\n                                }\n\n                                const file = await fileHandle.getFile();\n                                console.log('[LaunchQueue] Got file from handle:', file.name, file.type, file.size);\n                                files.push(file);\n                                // Check if this is a markdown file\n                                if (file.type === 'text/markdown' || file.name.toLowerCase().endsWith('.md')) {\n                                    hasMarkdownFile = true;\n                                }\n                            } catch (permError) {\n                                console.warn('[LaunchQueue] Permission or access error for file handle:', permError, fileHandle);\n                                failedHandles.push(fileHandle);\n                            }\n                        } else if (fileHandle instanceof File) {\n                            // Already a File object\n                            console.log('[LaunchQueue] File handle is already a File object:', fileHandle.name, fileHandle.type);\n                            files.push(fileHandle);\n                            // Check if this is a markdown file\n                            if (fileHandle.type === 'text/markdown' || fileHandle.name.toLowerCase().endsWith('.md')) {\n                                hasMarkdownFile = true;\n                            }\n                        } else {\n                            console.warn('[LaunchQueue] Unknown file handle type:', fileHandle.constructor.name);\n                            failedHandles.push(fileHandle);\n                        }\n                    } catch (error) {\n                        console.warn('[LaunchQueue] Failed to get file from handle:', error, fileHandle);\n                        failedHandles.push(fileHandle);\n                    }\n                }\n\n                console.log(`[LaunchQueue] Successfully processed ${files.length} files, ${failedHandles.length} failed`);\n\n                // Check if we have any successfully processed files\n                if (files.length === 0) {\n                    if (failedHandles.length > 0) {\n                        console.error('[LaunchQueue] All file handles failed to process');\n                        showToast({\n                            message: `Failed to process ${failedHandles.length} launched file(s)`,\n                            kind: 'error'\n                        });\n                    } else {\n                        console.log('[LaunchQueue] No files to process after filtering');\n                    }\n                    return;\n                }\n\n                if (files.length > 0) {\n                    // Create share data object compatible with existing processing\n                    const shareData = {\n                        files,\n                        fileCount: files.length,\n                        timestamp: Date.now(),\n                        // Determine if there are images for AI processing\n                        imageCount: files?.filter?.(f => f.type.startsWith('image/')).length,\n                        // Check for markdown files\n                        markdownCount: files?.filter?.(f => f.type === 'text/markdown' || f.name.toLowerCase().endsWith('.md')).length,\n                        // Mark as launch queue origin for debugging\n                        source: 'launch-queue'\n                    };\n\n                    console.log('[LaunchQueue] Created share data:', {\n                        fileCount: shareData.fileCount,\n                        imageCount: shareData.imageCount,\n                        fileTypes: files?.map?.(f => ({ name: f.name, type: f.type, size: f.size })),\n                        source: shareData.source\n                    });\n\n                    const hint: ViewTransferHint | undefined = (hasMarkdownFile && files.length === 1)\n                        ? { destination: \"viewer\", action: \"open\", filename: files[0]?.name }\n                        : undefined;\n\n                    // Show immediate feedback that files were received\n                    showToast({\n                        message: `Received ${files.length} file(s)`,\n                        kind: 'info'\n                    });\n\n                    try {\n                        const delivered = await routeToTransferView(shareData, \"launch-queue\", hint, true);\n                        if (!delivered) {\n                            console.warn('[LaunchQueue] Share target processing returned false');\n                            showToast({\n                                message: `Received ${files.length} file(s); delivery is pending`,\n                                kind: 'warning'\n                            });\n                        } else {\n                            console.log('[LaunchQueue] Transfer routed successfully');\n                        }\n                    } catch (error) {\n                        console.error('[LaunchQueue] Failed to route launch queue files:', error);\n                        const stored = await storeShareTargetPayloadToCache({\n                            files,\n                            meta: { timestamp: Date.now(), source: 'launch-queue' }\n                        });\n                        if (stored) {\n                            const url = new URL(globalThis?.location?.href);\n                            url.pathname = '/share-target';\n                            url.searchParams.set('shared', '1');\n                            url.hash = '';\n                            globalThis.location.href = url.toString();\n                        } else {\n                            showToast({\n                                message: `Failed to process ${files.length} launched file(s)`,\n                                kind: 'error'\n                            });\n                        }\n                    }\n                }\n\n                // Handle any target URL if present (for custom protocol launches)\n                if (launchParams.targetURL) {\n                    console.log('[LaunchQueue] Target URL:', launchParams.targetURL);\n                    // Could handle URL-based launches here if needed\n                }\n            })();\n        });\n\n        console.log('[LaunchQueue] Consumer set up successfully');\n    } catch (error) {\n        console.error('[LaunchQueue] Failed to set up consumer:', error);\n    }\n};\n\n// ============================================================================\n// PENDING SHARE DATA HANDLING\n// ============================================================================\n\n/**\n * Check for pending share data from server-side share target handler\n * This handles cases where the service worker wasn't active during share\n */\nexport const checkPendingShareData = async () => {\n    try {\n        const pendingData = globalThis?.sessionStorage?.getItem?.(\"rs-pending-share\");\n        if (!pendingData) return null;\n\n        // Clear immediately to prevent duplicate processing\n        globalThis?.sessionStorage?.removeItem?.(\"rs-pending-share\");\n\n        const shareData = JSON.parse(pendingData);\n        console.log(\"[ShareTarget] Found pending share data:\", shareData);\n\n        // Store in cache for the normal share target flow to pick up\n        if ('caches' in window) {\n            const cache = await globalThis?.caches?.open?.('share-target-data');\n            await cache?.put?.('/share-target-data', new Response(JSON.stringify({\n                ...shareData,\n                files: [],\n                timestamp: shareData.timestamp || Date.now()\n            }), {\n                headers: { 'Content-Type': 'application/json' }\n            }));\n        }\n\n        return shareData;\n    } catch (error) {\n        console.warn(\"[ShareTarget] Failed to process pending share data:\", error);\n        return null;\n    }\n};","// =========================\r\n//   DOM \r\n// =========================\r\n\r\n// Lazy getters for DOM elements (since HTML is created dynamically)\r\nexport const getWsStatusEl = () => document.getElementById('wsStatus');\r\nexport const getAirStatusEl = () => document.getElementById('airStatus');\r\nexport const getAiStatusEl = () => document.getElementById('aiStatus');\r\nexport const getLogEl = () => document.getElementById('logContainer'); // Changed to logContainer\r\nexport const getVoiceTextEl = () => document.getElementById('voiceText');\r\n\r\nexport const getBtnConnect = () => document.getElementById('btnConnect');\r\nexport const getAirButton = () => document.getElementById('airButton');\r\nexport const getAiButton = () => document.getElementById('aiButton');\r\n\r\nexport const getBtnCut = () => document.getElementById('btnCut') as HTMLButtonElement | null;\r\nexport const getBtnCopy = () => document.getElementById('btnCopy') as HTMLButtonElement | null;\r\nexport const getBtnPaste = () => document.getElementById('btnPaste') as HTMLButtonElement | null;\r\nexport const getClipboardPreviewEl = () => document.getElementById('clipboardPreview');\r\n\r\n// Backward compatibility - return current values or null\r\nexport const wsStatusEl = null; // Will be accessed via getter\r\nexport const airStatusEl = null;\r\nexport const aiStatusEl = null;\r\nexport const logEl = null; // Will be accessed via getLogEl()\r\nexport const voiceTextEl = null;\r\n\r\nexport const btnConnect = null; // Will be accessed via getBtnConnect()\r\nexport const airButton = null;\r\nexport const aiButton = null;\r\n\r\nexport const btnCut = null;\r\nexport const btnCopy = null;\r\nexport const btnPaste = null;\r\nexport const clipboardPreviewEl = null;\r\n\r\nexport function log(msg: string) {\r\n    const line = document.createElement('div');\r\n    line.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;\r\n    const logContainer = getLogEl();\r\n    if (logContainer) {\r\n        logContainer.appendChild(line);\r\n        // Auto-scroll to bottom\r\n        logContainer.scrollTop = logContainer.scrollHeight;\r\n    }\r\n    console.log('[LOG]', msg);\r\n}\r\n\r\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach((key) => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data.arrayBuffer().then(toArray).then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, (encoded) => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n","// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE, } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType),\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType),\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1),\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type],\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            if (data instanceof Blob) {\n                // from WebSocket + binaryType \"blob\"\n                return data;\n            }\n            else {\n                // from HTTP long-polling or WebTransport\n                return new Blob([data]);\n            }\n        case \"arraybuffer\":\n        default:\n            if (data instanceof ArrayBuffer) {\n                // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n                return data;\n            }\n            else {\n                // from WebTransport (Uint8Array)\n                return data.buffer;\n            }\n    }\n};\n","import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nimport { ERROR_PACKET, } from \"./commons.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, (encodedPacket) => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport function createPacketEncoderStream() {\n    return new TransformStream({\n        transform(packet, controller) {\n            encodePacketToBinary(packet, (encodedPacket) => {\n                const payloadLength = encodedPacket.length;\n                let header;\n                // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n                if (payloadLength < 126) {\n                    header = new Uint8Array(1);\n                    new DataView(header.buffer).setUint8(0, payloadLength);\n                }\n                else if (payloadLength < 65536) {\n                    header = new Uint8Array(3);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 126);\n                    view.setUint16(1, payloadLength);\n                }\n                else {\n                    header = new Uint8Array(9);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 127);\n                    view.setBigUint64(1, BigInt(payloadLength));\n                }\n                // first bit indicates whether the payload is plain text (0) or binary (1)\n                if (packet.data && typeof packet.data !== \"string\") {\n                    header[0] |= 0x80;\n                }\n                controller.enqueue(header);\n                controller.enqueue(encodedPacket);\n            });\n        },\n    });\n}\nlet TEXT_DECODER;\nfunction totalLength(chunks) {\n    return chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n}\nfunction concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n        return chunks.shift();\n    }\n    const buffer = new Uint8Array(size);\n    let j = 0;\n    for (let i = 0; i < size; i++) {\n        buffer[i] = chunks[0][j++];\n        if (j === chunks[0].length) {\n            chunks.shift();\n            j = 0;\n        }\n    }\n    if (chunks.length && j < chunks[0].length) {\n        chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n}\nexport function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n        TEXT_DECODER = new TextDecoder();\n    }\n    const chunks = [];\n    let state = 0 /* State.READ_HEADER */;\n    let expectedLength = -1;\n    let isBinary = false;\n    return new TransformStream({\n        transform(chunk, controller) {\n            chunks.push(chunk);\n            while (true) {\n                if (state === 0 /* State.READ_HEADER */) {\n                    if (totalLength(chunks) < 1) {\n                        break;\n                    }\n                    const header = concatChunks(chunks, 1);\n                    isBinary = (header[0] & 0x80) === 0x80;\n                    expectedLength = header[0] & 0x7f;\n                    if (expectedLength < 126) {\n                        state = 3 /* State.READ_PAYLOAD */;\n                    }\n                    else if (expectedLength === 126) {\n                        state = 1 /* State.READ_EXTENDED_LENGTH_16 */;\n                    }\n                    else {\n                        state = 2 /* State.READ_EXTENDED_LENGTH_64 */;\n                    }\n                }\n                else if (state === 1 /* State.READ_EXTENDED_LENGTH_16 */) {\n                    if (totalLength(chunks) < 2) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 2);\n                    expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else if (state === 2 /* State.READ_EXTENDED_LENGTH_64 */) {\n                    if (totalLength(chunks) < 8) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 8);\n                    const view = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length);\n                    const n = view.getUint32(0);\n                    if (n > Math.pow(2, 53 - 32) - 1) {\n                        // the maximum safe integer in JavaScript is 2^53 - 1\n                        controller.enqueue(ERROR_PACKET);\n                        break;\n                    }\n                    expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else {\n                    if (totalLength(chunks) < expectedLength) {\n                        break;\n                    }\n                    const data = concatChunks(chunks, expectedLength);\n                    controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n                    state = 0 /* State.READ_HEADER */;\n                }\n                if (expectedLength === 0 || expectedLength > maxPayload) {\n                    controller.enqueue(ERROR_PACKET);\n                    break;\n                }\n            }\n        },\n    });\n}\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload, };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\nexport const defaultBinaryType = \"arraybuffer\";\nexport function createCookieJar() { }\n","import { globalThisShim as globalThis } from \"./globals.node.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n/**\n * Generates a random 8-characters string.\n */\nexport function randomString() {\n    return (Date.now().toString(36).substring(3) +\n        Math.random().toString(36).substring(2, 5));\n}\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nexport class TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n        this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n    createUri(schema, query = {}) {\n        return (schema +\n            \"://\" +\n            this._hostname() +\n            this._port() +\n            this.opts.path +\n            this._query(query));\n    }\n    _hostname() {\n        const hostname = this.opts.hostname;\n        return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n        if (this.opts.port &&\n            ((this.opts.secure && Number(this.opts.port) !== 443) ||\n                (!this.opts.secure && Number(this.opts.port) !== 80))) {\n            return \":\" + this.opts.port;\n        }\n        else {\n            return \"\";\n        }\n    }\n    _query(query) {\n        const encodedQuery = encode(query);\n        return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { randomString } from \"../util.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nexport class Polling extends Transport {\n    constructor() {\n        super(...arguments);\n        this._polling = false;\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this._poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this._polling || !this.writable) {\n            let total = 0;\n            if (this._polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    _poll() {\n        this._polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this._polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this._poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        const query = this.query || {};\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","import { Polling } from \"./polling.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globals.node.js\";\nimport { hasCORS } from \"../contrib/has-cors.js\";\nfunction empty() { }\nexport class BaseXHR extends Polling {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n        }\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(createRequest, uri, opts) {\n        super();\n        this.createRequest = createRequest;\n        installTimerFunctions(this, opts);\n        this._opts = opts;\n        this._method = opts.method || \"GET\";\n        this._uri = uri;\n        this._data = undefined !== opts.data ? opts.data : null;\n        this._create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    _create() {\n        var _a;\n        const opts = pick(this._opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this._opts.xd;\n        const xhr = (this._xhr = this.createRequest(opts));\n        try {\n            xhr.open(this._method, this._uri, true);\n            try {\n                if (this._opts.extraHeaders) {\n                    // @ts-ignore\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this._opts.extraHeaders) {\n                        if (this._opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this._opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this._method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this._opts.withCredentials;\n            }\n            if (this._opts.requestTimeout) {\n                xhr.timeout = this._opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                var _a;\n                if (xhr.readyState === 3) {\n                    (_a = this._opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(\n                    // @ts-ignore\n                    xhr.getResponseHeader(\"set-cookie\"));\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this._onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this._onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this._data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this._onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this._index = Request.requestsCount++;\n            Request.requests[this._index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    _onError(err) {\n        this.emitReserved(\"error\", err, this._xhr);\n        this._cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    _cleanup(fromError) {\n        if (\"undefined\" === typeof this._xhr || null === this._xhr) {\n            return;\n        }\n        this._xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this._xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this._index];\n        }\n        this._xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    _onLoad() {\n        const data = this._xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this._cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this._cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\nconst hasXHR2 = (function () {\n    const xhr = newRequest({\n        xdomain: false,\n    });\n    return xhr && xhr.responseType !== null;\n})();\n/**\n * HTTP long-polling based on the built-in `XMLHttpRequest` object.\n *\n * Usage: browser\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n */\nexport class XHR extends BaseXHR {\n    constructor(opts) {\n        super(opts);\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd }, this.opts);\n        return new Request(newRequest, this.uri(), opts);\n    }\n}\nfunction newRequest(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { pick, randomString } from \"../util.js\";\nimport { encodePacket } from \"engine.io-parser\";\nimport { globalThisShim as globalThis, nextTick } from \"../globals.node.js\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class BaseWS extends Transport {\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws = this.createSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    this.doWrite(packet, data);\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.onerror = () => { };\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        const query = this.query || {};\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = randomString();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n}\nconst WebSocketCtor = globalThis.WebSocket || globalThis.MozWebSocket;\n/**\n * WebSocket transport based on the built-in `WebSocket` object.\n *\n * Usage: browser, Node.js (since v21), Deno, Bun\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n * @see https://caniuse.com/mdn-api_websocket\n * @see https://nodejs.org/api/globals.html#websocket\n */\nexport class WS extends BaseWS {\n    createSocket(uri, protocols, opts) {\n        return !isReactNative\n            ? protocols\n                ? new WebSocketCtor(uri, protocols)\n                : new WebSocketCtor(uri)\n            : new WebSocketCtor(uri, protocols, opts);\n    }\n    doWrite(_packet, data) {\n        this.ws.send(data);\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { nextTick } from \"../globals.node.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream, } from \"engine.io-parser\";\n/**\n * WebTransport transport based on the built-in `WebTransport` object.\n *\n * Usage: browser, Node.js (with the `@fails-components/webtransport` package)\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebTransport\n * @see https://caniuse.com/webtransport\n */\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        try {\n            // @ts-ignore\n            this._transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this._transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this._transport.ready.then(() => {\n            this._transport.createBidirectionalStream().then((stream) => {\n                const decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType);\n                const reader = stream.readable.pipeThrough(decoderStream).getReader();\n                const encoderStream = createPacketEncoderStream();\n                encoderStream.readable.pipeTo(stream.writable);\n                this._writer = encoderStream.writable.getWriter();\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        this.onPacket(value);\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const packet = { type: \"open\" };\n                if (this.query.sid) {\n                    packet.data = `{\"sid\":\"${this.query.sid}\"}`;\n                }\n                this._writer.write(packet).then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            this._writer.write(packet).then(() => {\n                if (lastPacket) {\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this._transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n","import { XHR } from \"./polling-xhr.node.js\";\nimport { WS } from \"./websocket.node.js\";\nimport { WT } from \"./webtransport.js\";\nexport const transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: XHR,\n};\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    if (str.length > 8000) {\n        throw \"URI too long\";\n    }\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports as DEFAULT_TRANSPORTS } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nimport { createCookieJar, defaultBinaryType, nextTick, } from \"./globals.node.js\";\nconst withEventListeners = typeof addEventListener === \"function\" &&\n    typeof removeEventListener === \"function\";\nconst OFFLINE_EVENT_LISTENERS = [];\nif (withEventListeners) {\n    // within a ServiceWorker, any event handler for the 'offline' event must be added on the initial evaluation of the\n    // script, so we create one single event listener here which will forward the event to the socket instances\n    addEventListener(\"offline\", () => {\n        OFFLINE_EVENT_LISTENERS.forEach((listener) => listener());\n    }, false);\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes without upgrade mechanism, which means that it will keep the first low-level transport that\n * successfully establishes the connection.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithoutUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithoutUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithUpgrade\n * @see Socket\n */\nexport class SocketWithoutUpgrade extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts) {\n        super();\n        this.binaryType = defaultBinaryType;\n        this.writeBuffer = [];\n        this._prevBufferLen = 0;\n        this._pingInterval = -1;\n        this._pingTimeout = -1;\n        this._maxPayload = -1;\n        /**\n         * The expiration timestamp of the {@link _pingTimeoutTimer} object is tracked, in case the timer is throttled and the\n         * callback is not fired on time. This can happen for example when a laptop is suspended or when a phone is locked.\n         */\n        this._pingTimeoutTime = Infinity;\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            const parsedUri = parse(uri);\n            opts.hostname = parsedUri.host;\n            opts.secure =\n                parsedUri.protocol === \"https\" || parsedUri.protocol === \"wss\";\n            opts.port = parsedUri.port;\n            if (parsedUri.query)\n                opts.query = parsedUri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = [];\n        this._transportsByName = {};\n        opts.transports.forEach((t) => {\n            const transportName = t.prototype.name;\n            this.transports.push(transportName);\n            this._transportsByName[transportName] = t;\n        });\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: false,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        if (withEventListeners) {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this._beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this._offlineEventListener = () => {\n                    this._onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                OFFLINE_EVENT_LISTENERS.push(this._offlineEventListener);\n            }\n        }\n        if (this.opts.withCredentials) {\n            this._cookieJar = createCookieJar();\n        }\n        this._open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        }, this.opts.transportOptions[name]);\n        return new this._transportsByName[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    _open() {\n        if (this.transports.length === 0) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        const transportName = this.opts.rememberUpgrade &&\n            SocketWithoutUpgrade.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1\n            ? \"websocket\"\n            : this.transports[0];\n        this.readyState = \"opening\";\n        const transport = this.createTransport(transportName);\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this._onDrain.bind(this))\n            .on(\"packet\", this._onPacket.bind(this))\n            .on(\"error\", this._onError.bind(this))\n            .on(\"close\", (reason) => this._onClose(\"transport close\", reason));\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        SocketWithoutUpgrade.priorWebsocketSuccess =\n            \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    _onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this._sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    this._resetPingTimeout();\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this._onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this._pingInterval = data.pingInterval;\n        this._pingTimeout = data.pingTimeout;\n        this._maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this._resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    _resetPingTimeout() {\n        this.clearTimeoutFn(this._pingTimeoutTimer);\n        const delay = this._pingInterval + this._pingTimeout;\n        this._pingTimeoutTime = Date.now() + delay;\n        this._pingTimeoutTimer = this.setTimeoutFn(() => {\n            this._onClose(\"ping timeout\");\n        }, delay);\n        if (this.opts.autoUnref) {\n            this._pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    _onDrain() {\n        this.writeBuffer.splice(0, this._prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this._prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this._getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this._prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    _getWritablePackets() {\n        const shouldCheckPayloadSize = this._maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this._maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Checks whether the heartbeat timer has expired but the socket has not yet been notified.\n     *\n     * Note: this method is private for now because it does not really fit the WebSocket API, but if we put it in the\n     * `write()` method then the message would not be buffered by the Socket.IO client.\n     *\n     * @return {boolean}\n     * @private\n     */\n    /* private */ _hasPingExpired() {\n        if (!this._pingTimeoutTime)\n            return true;\n        const hasExpired = Date.now() > this._pingTimeoutTime;\n        if (hasExpired) {\n            this._pingTimeoutTime = 0;\n            nextTick(() => {\n                this._onClose(\"ping timeout\");\n            }, this.setTimeoutFn);\n        }\n        return hasExpired;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a message. Alias of {@link Socket#write}.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @return {Socket} for chaining.\n     */\n    send(msg, options, fn) {\n        this._sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    _sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this._onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    _onError(err) {\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        if (this.opts.tryAllTransports &&\n            this.transports.length > 1 &&\n            this.readyState === \"opening\") {\n            this.transports.shift();\n            return this._open();\n        }\n        this.emitReserved(\"error\", err);\n        this._onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    _onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this._pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (withEventListeners) {\n                if (this._beforeunloadEventListener) {\n                    removeEventListener(\"beforeunload\", this._beforeunloadEventListener, false);\n                }\n                if (this._offlineEventListener) {\n                    const i = OFFLINE_EVENT_LISTENERS.indexOf(this._offlineEventListener);\n                    if (i !== -1) {\n                        OFFLINE_EVENT_LISTENERS.splice(i, 1);\n                    }\n                }\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this._prevBufferLen = 0;\n        }\n    }\n}\nSocketWithoutUpgrade.protocol = protocol;\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * In order to allow tree-shaking, there are no transports included, that's why the `transports` option is mandatory.\n *\n * @example\n * import { SocketWithUpgrade, WebSocket } from \"engine.io-client\";\n *\n * const socket = new SocketWithUpgrade({\n *   transports: [WebSocket]\n * });\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see Socket\n */\nexport class SocketWithUpgrade extends SocketWithoutUpgrade {\n    constructor() {\n        super(...arguments);\n        this._upgrades = [];\n    }\n    onOpen() {\n        super.onOpen();\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            for (let i = 0; i < this._upgrades.length; i++) {\n                this._probe(this._upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    _probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        SocketWithoutUpgrade.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    SocketWithoutUpgrade.priorWebsocketSuccess =\n                        \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        if (this._upgrades.indexOf(\"webtransport\") !== -1 &&\n            name !== \"webtransport\") {\n            // favor WebTransport\n            this.setTimeoutFn(() => {\n                if (!failed) {\n                    transport.open();\n                }\n            }, 200);\n        }\n        else {\n            transport.open();\n        }\n    }\n    onHandshake(data) {\n        this._upgrades = this._filterUpgrades(data.upgrades);\n        super.onHandshake(data);\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    _filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        for (let i = 0; i < upgrades.length; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\n/**\n * This class provides a WebSocket-like interface to connect to an Engine.IO server. The connection will be established\n * with one of the available low-level transports, like HTTP long-polling, WebSocket or WebTransport.\n *\n * This class comes with an upgrade mechanism, which means that once the connection is established with the first\n * low-level transport, it will try to upgrade to a better transport.\n *\n * @example\n * import { Socket } from \"engine.io-client\";\n *\n * const socket = new Socket();\n *\n * socket.on(\"open\", () => {\n *   socket.send(\"hello\");\n * });\n *\n * @see SocketWithoutUpgrade\n * @see SocketWithUpgrade\n */\nexport class Socket extends SocketWithUpgrade {\n    constructor(uri, opts = {}) {\n        const o = typeof uri === \"object\" ? uri : opts;\n        if (!o.transports ||\n            (o.transports && typeof o.transports[0] === \"string\")) {\n            o.transports = (o.transports || [\"polling\", \"websocket\", \"webtransport\"])\n                .map((transportName) => DEFAULT_TRANSPORTS[transportName])\n                .filter((t) => !!t);\n        }\n        super(uri, o);\n    }\n}\n","import { Polling } from \"./polling.js\";\n/**\n * HTTP long-polling based on the built-in `fetch()` method.\n *\n * Usage: browser, Node.js (since v18), Deno, Bun\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/fetch\n * @see https://caniuse.com/fetch\n * @see https://nodejs.org/api/globals.html#fetch\n */\nexport class Fetch extends Polling {\n    doPoll() {\n        this._fetch()\n            .then((res) => {\n            if (!res.ok) {\n                return this.onError(\"fetch read error\", res.status, res);\n            }\n            res.text().then((data) => this.onData(data));\n        })\n            .catch((err) => {\n            this.onError(\"fetch read error\", err);\n        });\n    }\n    doWrite(data, callback) {\n        this._fetch(data)\n            .then((res) => {\n            if (!res.ok) {\n                return this.onError(\"fetch write error\", res.status, res);\n            }\n            callback();\n        })\n            .catch((err) => {\n            this.onError(\"fetch write error\", err);\n        });\n    }\n    _fetch(data) {\n        var _a;\n        const isPost = data !== undefined;\n        const headers = new Headers(this.opts.extraHeaders);\n        if (isPost) {\n            headers.set(\"content-type\", \"text/plain;charset=UTF-8\");\n        }\n        (_a = this.socket._cookieJar) === null || _a === void 0 ? void 0 : _a.appendCookies(headers);\n        return fetch(this.uri(), {\n            method: isPost ? \"POST\" : \"GET\",\n            body: isPost ? data : null,\n            headers,\n            credentials: this.opts.withCredentials ? \"include\" : \"omit\",\n        }).then((res) => {\n            var _a;\n            // @ts-ignore getSetCookie() was added in Node.js v19.7.0\n            (_a = this.socket._cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(res.headers.getSetCookie());\n            return res;\n        });\n    }\n}\n","import { Socket } from \"./socket.js\";\nexport { Socket };\nexport { SocketWithoutUpgrade, SocketWithUpgrade, } from \"./socket.js\";\nexport const protocol = Socket.protocol;\nexport { Transport, TransportError } from \"./transport.js\";\nexport { transports } from \"./transports/index.js\";\nexport { installTimerFunctions } from \"./util.js\";\nexport { parse } from \"./contrib/parseuri.js\";\nexport { nextTick } from \"./globals.node.js\";\nexport { Fetch } from \"./transports/polling-fetch.js\";\nexport { XHR as NodeXHR } from \"./transports/polling-xhr.node.js\";\nexport { XHR } from \"./transports/polling-xhr.js\";\nexport { WS as NodeWebSocket } from \"./transports/websocket.node.js\";\nexport { WS as WebSocket } from \"./transports/websocket.js\";\nexport { WT as WebTransport } from \"./transports/webtransport.js\";\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\nconst RESERVED_EVENTS = [\n    \"connect\", // used on the client side\n    \"connect_error\", // used on the client side\n    \"disconnect\", // used on both sides\n    \"disconnecting\", // used on the server side\n    \"newListener\", // used by the Node.js EventEmitter\n    \"removeListener\", // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                return this.encodeAsBinary({\n                    type: obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK,\n                    nsp: obj.nsp,\n                    data: obj.data,\n                    id: obj.id,\n                });\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            const isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n            if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n                packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return isObject(payload);\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || isObject(payload);\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return (Array.isArray(payload) &&\n                    (typeof payload[0] === \"number\" ||\n                        (typeof payload[0] === \"string\" &&\n                            RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n            this.reconstructor = null;\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\nfunction isNamespaceValid(nsp) {\n    return typeof nsp === \"string\";\n}\n// see https://caniuse.com/mdn-javascript_builtins_number_isinteger\nconst isInteger = Number.isInteger ||\n    function (value) {\n        return (typeof value === \"number\" &&\n            isFinite(value) &&\n            Math.floor(value) === value);\n    };\nfunction isAckIdValid(id) {\n    return id === undefined || isInteger(id);\n}\n// see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\nfunction isDataValid(type, payload) {\n    switch (type) {\n        case PacketType.CONNECT:\n            return payload === undefined || isObject(payload);\n        case PacketType.DISCONNECT:\n            return payload === undefined;\n        case PacketType.EVENT:\n            return (Array.isArray(payload) &&\n                (typeof payload[0] === \"number\" ||\n                    (typeof payload[0] === \"string\" &&\n                        RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n        case PacketType.ACK:\n            return Array.isArray(payload);\n        case PacketType.CONNECT_ERROR:\n            return typeof payload === \"string\" || isObject(payload);\n        default:\n            return false;\n    }\n}\nexport function isPacketValid(packet) {\n    return (isNamespaceValid(packet.nsp) &&\n        isAckIdValid(packet.id) &&\n        isDataValid(packet.type, packet.data));\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        /**\n         * A sequence to generate the ID of the {@link QueuedPacket}.\n         * @private\n         */\n        this._queueSeq = 0;\n        this.ids = 0;\n        /**\n         * A map containing acknowledgement handlers.\n         *\n         * The `withError` attribute is used to differentiate handlers that accept an error as first argument:\n         *\n         * - `socket.emit(\"test\", (err, value) => { ... })` with `ackTimeout` option\n         * - `socket.timeout(5000).emit(\"test\", (err, value) => { ... })`\n         * - `const value = await socket.emitWithAck(\"test\")`\n         *\n         * From those that don't:\n         *\n         * - `socket.emit(\"test\", (value) => { ... });`\n         *\n         * In the first case, the handlers will be called with an error when:\n         *\n         * - the timeout is reached\n         * - the socket gets disconnected\n         *\n         * In the second case, the handlers will be simply discarded upon disconnection, since the client will never receive\n         * an acknowledgement from the server.\n         *\n         * @private\n         */\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        var _a, _b, _c;\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = (_b = (_a = this.io.engine) === null || _a === void 0 ? void 0 : _a.transport) === null || _b === void 0 ? void 0 : _b.writable;\n        const isConnected = this.connected && !((_c = this.io.engine) === null || _c === void 0 ? void 0 : _c._hasPingExpired());\n        const discardPacket = this.flags.volatile && !isTransportWritable;\n        if (discardPacket) {\n        }\n        else if (isConnected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        const fn = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, args);\n        };\n        fn.withError = true;\n        this.acks[id] = fn;\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        return new Promise((resolve, reject) => {\n            const fn = (arg1, arg2) => {\n                return arg1 ? reject(arg1) : resolve(arg2);\n            };\n            fn.withError = true;\n            args.push(fn);\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this._queueSeq++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n    _drainQueue(force = false) {\n        if (!this.connected || this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending && !force) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n        this._clearAcks();\n    }\n    /**\n     * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from\n     * the server.\n     *\n     * @private\n     */\n    _clearAcks() {\n        Object.keys(this.acks).forEach((id) => {\n            const isBuffered = this.sendBuffer.some((packet) => String(packet.id) === id);\n            if (!isBuffered) {\n                // note: handlers that do not accept an error as first argument are ignored here\n                const ack = this.acks[id];\n                delete this.acks[id];\n                if (ack.withError) {\n                    ack.call(this, new Error(\"socket has been disconnected\"));\n                }\n            }\n        });\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowledgement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (typeof ack !== \"function\") {\n            return;\n        }\n        delete this.acks[packet.id];\n        // @ts-ignore FIXME ack is incorrectly inferred as 'never'\n        if (ack.withError) {\n            packet.data.unshift(null);\n        }\n        // @ts-ignore\n        ack.apply(this, packet.data);\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this._drainQueue(true);\n        this.emitReserved(\"connect\");\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions, nextTick, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        if (!v) {\n            this.skipReconnect = true;\n        }\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        const onError = (err) => {\n            this.cleanup();\n            this._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                this.maybeReconnectOnOpen();\n            }\n        };\n        // emit `error`\n        const errorSub = on(socket, \"error\", onError);\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                onError(new Error(\"timeout\"));\n                socket.close();\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), \n        // @ts-ignore\n        on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        else if (this._autoConnect && !socket.active) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called when:\n     *\n     * - the low-level engine is closed\n     * - the parser encountered a badly formatted packet\n     * - all sockets are disconnected\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        var _a;\n        this.cleanup();\n        (_a = this.engine) === null || _a === void 0 ? void 0 : _a.close();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\nexport { Fetch, NodeXHR, XHR, NodeWebSocket, WebSocket, WebTransport, } from \"engine.io-client\";\n","// =========================\r\n// \r\n// =========================\r\n\r\n// Remote connection settings\r\nexport let remoteHost = location.hostname;\r\nexport let remotePort = location.port || (location.protocol === 'https:' ? '8443' : '8080');\r\n\r\n// Configuration getters and setters\r\nexport function getRemoteHost(): string {\r\n    return remoteHost;\r\n}\r\n\r\nexport function setRemoteHost(host: string): void {\r\n    remoteHost = host;\r\n}\r\n\r\nexport function getRemotePort(): string {\r\n    return remotePort;\r\n}\r\n\r\nexport function setRemotePort(port: string): void {\r\n    remotePort = port;\r\n}\r\n\r\n//     (  )\r\nexport let gyroDirX = -1;\r\nexport let gyroDirY = -1;\r\nexport let gyroDirZ = -1;\r\n\r\n//\r\nexport let gyroSrcForMouseX = 'az';\r\nexport let gyroSrcForMouseY = 'ax';\r\nexport let gyroSrcForMouseZ = 'ay';\r\n\r\n//\r\nexport let accelDirX = -1;\r\nexport let accelDirY = -1;\r\nexport let accelDirZ = 1;\r\n\r\n//\r\nexport let accelSrcForMouseX = 'ay';\r\nexport let accelSrcForMouseY = 'ax';\r\nexport let accelSrcForMouseZ = 'az';\r\n\r\n\r\n//      \r\n//let dirX = +1;  //  -1\r\n//let dirY = -1;  //  +1\r\n//let srcForMouseX = 'ax'; //   'ax'  \"  X\"\r\n//let srcForMouseY = 'ay'; //  'ay'  \"  Y\"\r\n\r\n//  \r\nexport const HOLD_DELAY = 100;\r\nexport const TAP_THRESHOLD = 200;\r\nexport const MOVE_TAP_THRESHOLD = 6;\r\nexport const SWIPE_THRESHOLD = 40;\r\n\r\n//   ( Gyroscope)\r\nexport const GYRO_DEADZONE = 0.001;     //    (/)\r\nexport const GYRO_GAIN = 600.0;        //  ( )\r\nexport const GYRO_SMOOTH = 0.3;       //  [0..1]\r\nexport const GYRO_MAX_STEP = 25;       //    \r\nexport const GYRO_MAX_SAMPLE_COUNT = 1000; //    Monte Carlo \r\nexport const GYRO_ROTATION_GAIN = 0.9; //    (Z axis)\r\nexport const MOTION_SEND_INTERVAL = 7; //    (~144 fps)\r\nexport const MOTION_JITTER_EPS = 0.001; //   (),     \r\n\r\n//   (  )\r\nexport const ANGLE_DEADZONE = 0.001;      //     ()\r\nexport const ANGLE_GAIN = 600.0;         //     \r\nexport const ANGLE_SMOOTH = 0.3;        //  [0..1]\r\nexport const ANGLE_MAX_STEP = 30;        //    \r\n\r\n//\r\nexport const ACCELEROMETER_DEADZONE = 0.1; //    (/^2)\r\nexport const ACCELEROMETER_GAIN = 40.0;    //     /^2\r\nexport const ACCELEROMETER_SMOOTH = 0.2;    //  [0..1]\r\nexport const ACCELEROMETER_MAX_STEP = 30;    //    \r\nexport const ACCELEROMETER_MAX_SAMPLE_COUNT = 1000; //    Monte Carlo \r\n\r\n//  Gravity Sensor\r\nexport const GRAVITY_SMOOTH = 0.1;           //    [0..1]\r\nexport const GRAVITY_CORRECTION_STRENGTH = 0.1; //     [0..1]\r\n\r\n//  RelativeOrientationSensor\r\nexport const REL_ORIENT_DEADZONE = 0.001;   //     ()\r\nexport const REL_ORIENT_GAIN = 600.0;       //  (/)     \r\nexport const REL_ORIENT_SMOOTH = 0.8;       //  [0..1]\r\nexport const REL_ORIENT_MAX_STEP = 60;      //    \r\nexport const REL_ORIENT_MAX_STEP_MAX = 800; //     \r\nexport const REL_ORIENT_MAX_STEP_UP_RATE = 6;    // 1/s,   \r\nexport const REL_ORIENT_MAX_STEP_DOWN_RATE = 14; // 1/s,   \r\nexport const REL_ORIENT_SMOOTH_RATE_LOW = 6;   // 1/s,     \r\nexport const REL_ORIENT_SMOOTH_RATE_HIGH = 24; // 1/s,     \r\n\r\n//\r\nexport let relDirX = -1;\r\nexport let relDirY = -1;\r\nexport let relDirZ = -1;\r\nexport let relSrcForMouseX = 'az';\r\nexport let relSrcForMouseY = 'ay';\r\nexport let relSrcForMouseZ = 'ax';\r\n","// =========================\r\n// Socket.IO with Binary Messages\r\n// =========================\r\n\r\nimport { io, Socket } from 'socket.io-client';\r\nimport { log, getWsStatusEl, getVoiceTextEl } from '../utils/utils';\r\nimport { remoteHost, remotePort } from '../config/config';\r\n\r\nlet socket: Socket | null = null;\r\nlet wsConnected = false;\r\nlet isConnecting = false;\r\nlet btnEl: HTMLElement | null = null;\r\n\r\n// Clipboard state + listeners (PC clipboard as seen by backend)\r\nlet lastServerClipboardText = '';\r\ntype ClipboardUpdateHandler = (text: string, meta?: { source?: string }) => void;\r\nconst clipboardHandlers = new Set<ClipboardUpdateHandler>();\r\n\r\n// Binary message format constants\r\nexport const MSG_TYPE_MOVE = 0;\r\nexport const MSG_TYPE_CLICK = 1;\r\nexport const MSG_TYPE_SCROLL = 2;\r\nexport const MSG_TYPE_MOUSE_DOWN = 3;\r\nexport const MSG_TYPE_MOUSE_UP = 4;\r\nexport const MSG_TYPE_VOICE_COMMAND = 5;\r\nexport const MSG_TYPE_KEYBOARD = 6;\r\n\r\nconst BUTTON_LEFT = 0;\r\nconst BUTTON_RIGHT = 1;\r\nconst BUTTON_MIDDLE = 2;\r\nconst FLAG_DOUBLE = 0x80;\r\n\r\nexport function getWS(): Socket | null {\r\n    return socket;\r\n}\r\n\r\nexport function isWSConnected(): boolean {\r\n    return wsConnected;\r\n}\r\n\r\nexport function getLastServerClipboard(): string {\r\n    return lastServerClipboardText;\r\n}\r\n\r\nexport function onServerClipboardUpdate(handler: ClipboardUpdateHandler): () => void {\r\n    clipboardHandlers.add(handler);\r\n    return () => clipboardHandlers.delete(handler);\r\n}\r\n\r\nfunction notifyClipboardHandlers(text: string, meta?: { source?: string }) {\r\n    for (const h of clipboardHandlers) {\r\n        try {\r\n            h(text, meta);\r\n        } catch {\r\n            // ignore UI handler errors\r\n        }\r\n    }\r\n}\r\n\r\nexport function requestClipboardGet(): Promise<{ ok: boolean; text?: string; error?: string }> {\r\n    return new Promise((resolve) => {\r\n        if (!socket || !socket.connected) return resolve({ ok: false, error: 'WS not connected' });\r\n        socket.emit('clipboard:get', (res: any) => resolve(res || { ok: false }));\r\n    });\r\n}\r\n\r\nexport function requestClipboardCopy(): Promise<{ ok: boolean; text?: string; error?: string }> {\r\n    return new Promise((resolve) => {\r\n        if (!socket || !socket.connected) return resolve({ ok: false, error: 'WS not connected' });\r\n        socket.emit('clipboard:copy', (res: any) => resolve(res || { ok: false }));\r\n    });\r\n}\r\n\r\nexport function requestClipboardCut(): Promise<{ ok: boolean; text?: string; error?: string }> {\r\n    return new Promise((resolve) => {\r\n        if (!socket || !socket.connected) return resolve({ ok: false, error: 'WS not connected' });\r\n        socket.emit('clipboard:cut', (res: any) => resolve(res || { ok: false }));\r\n    });\r\n}\r\n\r\nexport function requestClipboardPaste(text: string): Promise<{ ok: boolean; error?: string }> {\r\n    return new Promise((resolve) => {\r\n        if (!socket || !socket.connected) return resolve({ ok: false, error: 'WS not connected' });\r\n        socket.emit('clipboard:paste', { text }, (res: any) => resolve(res || { ok: false }));\r\n    });\r\n}\r\n\r\nfunction updateButtonLabel() {\r\n    if (!btnEl) return;\r\n    if (isConnecting || (socket && socket.connected === false)) {\r\n        btnEl.textContent = '...';\r\n        return;\r\n    }\r\n    if (wsConnected || (socket && socket.connected)) {\r\n        btnEl.textContent = ' WS';\r\n    } else {\r\n        btnEl.textContent = ' WS';\r\n    }\r\n}\r\n\r\nfunction setWsStatus(connected: boolean) {\r\n    wsConnected = connected;\r\n    const wsStatusEl = getWsStatusEl();\r\n    if (wsStatusEl) {\r\n        if (connected) {\r\n            wsStatusEl.textContent = 'connected';\r\n            wsStatusEl.classList.remove('ws-status-bad');\r\n            wsStatusEl.classList.add('ws-status-ok');\r\n        } else {\r\n            wsStatusEl.textContent = 'disconnected';\r\n            wsStatusEl.classList.remove('ws-status-ok');\r\n            wsStatusEl.classList.add('ws-status-bad');\r\n        }\r\n    }\r\n    updateButtonLabel();\r\n}\r\n\r\n// Create binary message buffer for mouse/scroll (8 bytes)\r\n// Format: [dx: 2][dy: 2][type: 1][flags: 1][reserved: 2]\r\nfunction createMouseMessage(type: number, dx: number = 0, dy: number = 0, flags: number = 0): ArrayBuffer {\r\n    const buffer = new ArrayBuffer(8);\r\n    const view = new DataView(buffer);\r\n\r\n    view.setInt16(0, Math.round(dx), true);   // dx (signed int16, little-endian)\r\n    view.setInt16(2, Math.round(dy), true);   // dy (signed int16, little-endian)\r\n    view.setUint8(4, type);                   // message type\r\n    view.setUint8(5, flags);                  // flags/button\r\n    view.setUint16(6, 0, true);               // reserved\r\n\r\n    return buffer;\r\n}\r\n\r\n// Create binary message for keyboard (8 bytes)\r\n// Format: [codePoint: 4][type: 1][flags: 1][reserved: 2]\r\nexport function createKeyboardMessage(codePoint: number, flags: number = 0): ArrayBuffer {\r\n    const buffer = new ArrayBuffer(8);\r\n    const view = new DataView(buffer);\r\n\r\n    view.setUint32(0, codePoint, true);       // Full Unicode codePoint (little-endian)\r\n    view.setUint8(4, MSG_TYPE_KEYBOARD);      // message type\r\n    view.setUint8(5, flags);                  // flags\r\n    view.setUint16(6, 0, true);               // reserved\r\n\r\n    return buffer;\r\n}\r\n\r\n// Helper to determine keyboard flags from character\r\nfunction getKeyboardFlags(char: string): number {\r\n    if (char === '\\b' || char === '\\u007F') return 1;  // backspace\r\n    if (char === '\\n' || char === '\\r') return 2;       // enter\r\n    if (char === ' ') return 3;                         // space\r\n    if (char === '\\t') return 4;                        // tab\r\n    return 0;                                           // normal character\r\n}\r\n\r\n// Send keyboard character (exported for use by other modules)\r\nexport function sendKeyboardChar(char: string) {\r\n    if (!socket || !socket.connected) return;\r\n\r\n    const codePoint = char.codePointAt(0) || 0;\r\n    const flags = getKeyboardFlags(char);\r\n    const buffer = createKeyboardMessage(codePoint, flags);\r\n\r\n    socket.emit('message', new Uint8Array(buffer));\r\n}\r\n\r\n// Send raw binary message (for direct use)\r\nexport function sendBinaryMessage(buffer: ArrayBuffer | Uint8Array) {\r\n    if (!socket || !socket.connected) return;\r\n\r\n    const data = buffer instanceof ArrayBuffer ? new Uint8Array(buffer) : buffer;\r\n    socket.emit('message', data);\r\n}\r\n\r\nexport function sendWS(obj: any) {\r\n    if (!socket || !socket.connected) return;\r\n\r\n    let buffer: ArrayBuffer;\r\n\r\n    switch (obj.type) {\r\n        case 'move': {\r\n            const dx = obj.dx || 0;\r\n            const dy = obj.dy || 0;\r\n            buffer = createMouseMessage(MSG_TYPE_MOVE, dx, dy);\r\n            socket.emit('message', new Uint8Array(buffer));\r\n            break;\r\n        }\r\n        case 'click': {\r\n            let flags = BUTTON_LEFT;\r\n            if (obj.button === 'right') flags = BUTTON_RIGHT;\r\n            else if (obj.button === 'middle') flags = BUTTON_MIDDLE;\r\n            if (obj.double || obj.count === 2) flags |= FLAG_DOUBLE;\r\n            buffer = createMouseMessage(MSG_TYPE_CLICK, 0, 0, flags);\r\n            socket.emit('message', new Uint8Array(buffer));\r\n            break;\r\n        }\r\n        case 'scroll': {\r\n            const dx = obj.dx || 0;\r\n            const dy = obj.dy || 0;\r\n            buffer = createMouseMessage(MSG_TYPE_SCROLL, dx, dy);\r\n            socket.emit('message', new Uint8Array(buffer));\r\n            break;\r\n        }\r\n        case 'mouse_down': {\r\n            let flags = BUTTON_LEFT;\r\n            if (obj.button === 'right') flags = BUTTON_RIGHT;\r\n            else if (obj.button === 'middle') flags = BUTTON_MIDDLE;\r\n            buffer = createMouseMessage(MSG_TYPE_MOUSE_DOWN, 0, 0, flags);\r\n            socket.emit('message', new Uint8Array(buffer));\r\n            break;\r\n        }\r\n        case 'mouse_up': {\r\n            let flags = BUTTON_LEFT;\r\n            if (obj.button === 'right') flags = BUTTON_RIGHT;\r\n            else if (obj.button === 'middle') flags = BUTTON_MIDDLE;\r\n            buffer = createMouseMessage(MSG_TYPE_MOUSE_UP, 0, 0, flags);\r\n            socket.emit('message', new Uint8Array(buffer));\r\n            break;\r\n        }\r\n        case 'voice_command': {\r\n            // Voice commands still need text, so send as JSON\r\n            socket.emit('message', JSON.stringify(obj));\r\n            break;\r\n        }\r\n        case 'keyboard': {\r\n            // Use the proper keyboard message format with full Unicode support\r\n            const char = obj.char || '';\r\n            const codePoint = obj.codePoint || char.codePointAt(0) || 0;\r\n            const flags = obj.flags ?? getKeyboardFlags(char);\r\n            buffer = createKeyboardMessage(codePoint, flags);\r\n            socket.emit('message', new Uint8Array(buffer));\r\n            break;\r\n        }\r\n        default:\r\n            // Fallback to JSON for unknown types\r\n            socket.emit('message', JSON.stringify(obj));\r\n    }\r\n}\r\n\r\nfunction handleServerMessage(msg: any) {\r\n    if (msg.type === 'voice_result') {\r\n        const text =\r\n            msg.message ||\r\n            ('Actions: ' + JSON.stringify(msg.actions || []));\r\n        const voiceTextEl = getVoiceTextEl();\r\n        if (voiceTextEl) {\r\n            voiceTextEl.textContent = text;\r\n        }\r\n        log('Voice result: ' + text);\r\n    }\r\n}\r\n\r\nexport function connectWS() {\r\n    if (socket && (socket.connected || (socket as any).connecting)) return;\r\n\r\n    const protocol = location.protocol === 'https:' ? 'https' : 'http';\r\n    const port = remotePort || (protocol === 'https' ? '8443' : '8080');\r\n    const url = `${protocol}://${remoteHost}:${port}`;\r\n    log('Connecting Socket.IO: ' + url);\r\n\r\n    isConnecting = true;\r\n    updateButtonLabel();\r\n\r\n    socket = io(url, {\r\n        transports: ['websocket', 'polling'],\r\n        reconnection: true,\r\n        reconnectionDelay: 1000,\r\n        reconnectionAttempts: 5,\r\n    });\r\n\r\n    socket.on('connect', () => {\r\n        log('Socket.IO connected');\r\n        isConnecting = false;\r\n        setWsStatus(true);\r\n    });\r\n\r\n    socket.on('disconnect', () => {\r\n        log('Socket.IO disconnected');\r\n        isConnecting = false;\r\n        setWsStatus(false);\r\n        updateButtonLabel();\r\n    });\r\n\r\n    socket.on('connect_error', (error) => {\r\n        log('Socket.IO error: ' + (error.message || ''));\r\n        isConnecting = false;\r\n        updateButtonLabel();\r\n    });\r\n\r\n    socket.on('voice_result', (msg) => {\r\n        handleServerMessage(msg);\r\n    });\r\n\r\n    socket.on('clipboard:update', (msg: any) => {\r\n        const text = typeof msg?.text === 'string' ? msg.text : '';\r\n        lastServerClipboardText = text;\r\n        notifyClipboardHandlers(text, { source: msg?.source });\r\n    });\r\n\r\n    // Expose socket for virtual keyboard\r\n    (window as any).__socket = socket;\r\n}\r\n\r\nexport function disconnectWS() {\r\n    if (!socket) {\r\n        setWsStatus(false);\r\n        return;\r\n    }\r\n    log('Disconnecting Socket.IO...');\r\n    socket.disconnect();\r\n    socket = null;\r\n    (window as any).__socket = null;\r\n    setWsStatus(false);\r\n}\r\n\r\nexport function initWebSocket(btnConnect: HTMLElement | null) {\r\n    btnEl = btnConnect;\r\n    updateButtonLabel();\r\n    if (!btnConnect) return;\r\n\r\n    btnConnect.addEventListener('click', () => {\r\n        if (wsConnected || (socket && socket.connected) || (socket as any)?.connecting) {\r\n            disconnectWS();\r\n        } else {\r\n            connectWS();\r\n        }\r\n    });\r\n}\r\n","// =========================\r\n// SpeechRecognition (AI-)\r\n// =========================\r\n\r\nimport { log, aiButton, aiStatusEl, voiceTextEl } from '../utils/utils';\r\nimport { sendWS, connectWS, isWSConnected } from '../network/websocket';\r\n\r\nlet recognition: any = null;\r\nlet aiListening = false;\r\nexport let aiModeActive = false;\r\n\r\nexport const checkIsAiModeActive = () => {\r\n    return aiListening || aiModeActive;\r\n}\r\n\r\nfunction setAiStatus(text: string) {\r\n    if (aiStatusEl) {\r\n        aiStatusEl.textContent = text;\r\n    }\r\n}\r\n\r\nfunction setupSpeechRecognition() {\r\n    const SR = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition;\r\n    if (!SR) {\r\n        log('SpeechRecognition API  .');\r\n        return null;\r\n    }\r\n    const recog = new SR();\r\n    recog.lang = 'ru-RU';\r\n    recog.interimResults = false;\r\n    recog.maxAlternatives = 1;\r\n    return recog;\r\n}\r\n\r\nexport function initSpeechRecognition() {\r\n    recognition = setupSpeechRecognition();\r\n\r\n    if (recognition) {\r\n        recognition.onstart = () => {\r\n            aiListening = true;\r\n            aiModeActive = true;\r\n            if (aiButton) {\r\n                aiButton.classList.add('listening');\r\n            }\r\n            setAiStatus('listening');\r\n            if (voiceTextEl) {\r\n                voiceTextEl.textContent = '...';\r\n            }\r\n            log('Speech: start');\r\n        };\r\n\r\n        recognition.onend = () => {\r\n            aiListening = false;\r\n            aiModeActive = false;\r\n            if (aiButton) {\r\n                aiButton.classList.remove('listening');\r\n            }\r\n            setAiStatus('idle');\r\n            log('Speech: end');\r\n        };\r\n\r\n        recognition.onerror = (event: any) => {\r\n            if (voiceTextEl) {\r\n                voiceTextEl.textContent = ' : ' + event.error;\r\n            }\r\n            log('Speech error: ' + event.error);\r\n        };\r\n\r\n        recognition.onresult = (event: any) => {\r\n            const transcript = event.results[0][0].transcript;\r\n            const normalized = (transcript || '').trim();\r\n            const words = normalized.split(/\\s+/).filter(Boolean);\r\n\r\n            if (voiceTextEl) {\r\n                voiceTextEl.textContent = normalized\r\n                    ? ': ' + normalized\r\n                    : '  ';\r\n            }\r\n            log('Speech result: ' + normalized);\r\n\r\n            if (words.length < 2) {\r\n                log('Speech:   ( >= 2)       WS');\r\n                return;\r\n            }\r\n\r\n            const payload = {\r\n                type: 'voice_command',\r\n                text: normalized,\r\n            };\r\n\r\n            const trySend = (deadline: number) => {\r\n                if (isWSConnected()) {\r\n                    sendWS(payload);\r\n                    return;\r\n                }\r\n                if (Date.now() > deadline) {\r\n                    log('Speech:    WS,   ');\r\n                    return;\r\n                }\r\n                setTimeout(() => trySend(deadline), 120);\r\n            };\r\n\r\n            if (!isWSConnected()) {\r\n                log('Speech:  WS   ');\r\n                connectWS();\r\n                trySend(Date.now() + 2000);\r\n            } else {\r\n                sendWS(payload);\r\n            }\r\n        };\r\n    }\r\n}\r\n\r\n// =========================\r\n// AI-: pointer\r\n// =========================\r\nexport function initAiButton() {\r\n    if (!aiButton) return;\r\n\r\n    let pointerActive = false;\r\n    let pointerId: number | null = null;\r\n\r\n    aiButton.addEventListener('pointerdown', (e) => {\r\n        e.preventDefault();\r\n        if (pointerActive) return;\r\n        pointerActive = true;\r\n        pointerId = e.pointerId;\r\n        aiButton.setPointerCapture(pointerId);\r\n\r\n        if (!recognition) {\r\n            log('SpeechRecognition ');\r\n            return;\r\n        }\r\n        try {\r\n            recognition.start();\r\n        } catch (err: any) {\r\n            log('Recognition start error: ' + err.message);\r\n        }\r\n    });\r\n\r\n    aiButton.addEventListener('pointerup', (e) => {\r\n        if (!pointerActive || e.pointerId !== pointerId) return;\r\n        e.preventDefault();\r\n        pointerActive = false;\r\n        aiButton.releasePointerCapture(pointerId);\r\n        pointerId = null;\r\n\r\n        if (!recognition) return;\r\n        try {\r\n            recognition.stop();\r\n        } catch (err: any) {\r\n            log('Recognition stop error: ' + err.message);\r\n        }\r\n    });\r\n\r\n    aiButton.addEventListener('pointercancel', () => {\r\n        if (!pointerActive) return;\r\n        pointerActive = false;\r\n        pointerId = null;\r\n        if (recognition) {\r\n            try { recognition.stop(); } catch { /* ignore */ }\r\n        }\r\n    });\r\n}\r\n\r\n","// =========================\r\n// Unified motion accumulator and debounced sender\r\n// =========================\r\n\r\nimport { MOTION_SEND_INTERVAL, MOTION_JITTER_EPS } from './config';\r\nimport { sendWS } from '../network/websocket';\r\n\r\ntype MotionAccum = { dx: number; dy: number; dz: number };\r\n\r\nconst accum: MotionAccum = { dx: 0, dy: 0, dz: 0 };\r\n\r\nlet flushTimer: number | null = null;\r\n\r\nfunction clearAccum() {\r\n    accum.dx = 0;\r\n    accum.dy = 0;\r\n    accum.dz = 0;\r\n}\r\n\r\nfunction scheduleFlush() {\r\n    if (flushTimer !== null) return;\r\n    flushTimer = globalThis?.setTimeout?.(() => {\r\n        flushTimer = null;\r\n        if (accum.dx === 0 && accum.dy === 0 && accum.dz === 0) return;\r\n        sendWS({\r\n            type: 'move',\r\n            dx: accum.dx,\r\n            dy: accum.dy,\r\n            dz: accum.dz,\r\n        });\r\n        clearAccum();\r\n    }, MOTION_SEND_INTERVAL) as any;\r\n}\r\n\r\n// Public API: accumulate motion deltas; they will be sent debounced\r\nexport function enqueueMotion(dx: number, dy: number, dz: number = 0) {\r\n    // Jitter suppression: ignore near-zero noise\r\n    if (Math.abs(dx) < MOTION_JITTER_EPS) dx = 0;\r\n    if (Math.abs(dy) < MOTION_JITTER_EPS) dy = 0;\r\n    if (Math.abs(dz) < MOTION_JITTER_EPS) dz = 0;\r\n    if (dx === 0 && dy === 0 && dz === 0) return;\r\n\r\n    accum.dx += dx;\r\n    accum.dy += dy;\r\n    accum.dz += dz;\r\n    scheduleFlush();\r\n}\r\n\r\n// For tests / manual resets\r\nexport function resetMotionAccum() {\r\n    clearAccum();\r\n    if (flushTimer !== null) {\r\n        clearTimeout(flushTimer);\r\n        flushTimer = null;\r\n    }\r\n}\r\n\r\n","// =========================\r\n// Vector Math Utilities\r\n// =========================\r\n\r\n// Vector3 type\r\nexport interface Vector3 {\r\n    x: number;\r\n    y: number;\r\n    z: number;\r\n}\r\n\r\nfunction n0(v: number | undefined | null): number {\r\n    return Number.isFinite(v as number) ? (v as number) : 0;\r\n}\r\n\r\n// =========================\r\n// Scalar helpers\r\n// =========================\r\n\r\nexport function clamp01(v: number): number {\r\n    const x = n0(v);\r\n    return x < 0 ? 0 : x > 1 ? 1 : x;\r\n}\r\n\r\nexport function lerp(a: number, b: number, t: number): number {\r\n    return n0(a) + (n0(b) - n0(a)) * clamp01(t);\r\n}\r\n\r\n// Exponential smoothing factor in [0..1] for given dt (seconds) and rate (1/seconds).\r\nexport function expSmoothing(dtSeconds: number, ratePerSecond: number): number {\r\n    const dt = Math.max(0, n0(dtSeconds));\r\n    const rate = Math.abs(n0(ratePerSecond));\r\n    return 1 - Math.exp(-rate * dt);\r\n}\r\n\r\n// Create a vector from components\r\nexport function vec3(x: number, y: number, z: number): Vector3 {\r\n    return { x: n0(x), y: n0(y), z: n0(z) };\r\n}\r\n\r\n// Create a zero vector\r\nexport function vec3Zero(): Vector3 {\r\n    return { x: 0, y: 0, z: 0 };\r\n}\r\n\r\n//\r\nexport function vec3Mix(a: Vector3, b: Vector3, f: number = 0.5): Vector3 {\r\n    const ax = n0(a.x);\r\n    const ay = n0(a.y);\r\n    const az = n0(a.z);\r\n    const bx = n0(b.x);\r\n    const by = n0(b.y);\r\n    const bz = n0(b.z);\r\n    const ff = n0(f);\r\n    return {\r\n        x: ax + (bx - ax) * ff,\r\n        y: ay + (by - ay) * ff,\r\n        z: az + (bz - az) * ff,\r\n    };\r\n}\r\n\r\n// Is near vector\r\nexport function vec3IsNear(v: Vector3, other: Vector3, epsilon: number = 0.01): boolean {\r\n    const e = n0(epsilon) || 0.01;\r\n    return Math.abs(n0(v.x) - n0(other.x)) < e && Math.abs(n0(v.y) - n0(other.y)) < e && Math.abs(n0(v.z) - n0(other.z)) < e;\r\n}\r\n\r\n// Is far vector\r\nexport function vec3IsFar(v: Vector3, other: Vector3, epsilon: number = 0.01): boolean {\r\n    const e = n0(epsilon) || 0.01;\r\n    return Math.abs(n0(v.x) - n0(other.x)) > e && Math.abs(n0(v.y) - n0(other.y)) > e && Math.abs(n0(v.z) - n0(other.z)) > e;\r\n}\r\n\r\n// Create a vector from sensor reading\r\nexport function vec3FromSensor(sensor: { x?: number; y?: number; z?: number }): Vector3 {\r\n    return {\r\n        x: n0(sensor.x),\r\n        y: n0(sensor.y),\r\n        z: n0(sensor.z),\r\n    };\r\n}\r\n\r\n// Vector subtraction: a - b\r\nexport function vec3Sub(a: Vector3, b: Vector3): Vector3 {\r\n    return {\r\n        x: n0(a.x) - n0(b.x),\r\n        y: n0(a.y) - n0(b.y),\r\n        z: n0(a.z) - n0(b.z),\r\n    };\r\n}\r\n\r\n// Vector addition: a + b\r\nexport function vec3Add(a: Vector3, b: Vector3): Vector3 {\r\n    return {\r\n        x: n0(a.x) + n0(b.x),\r\n        y: n0(a.y) + n0(b.y),\r\n        z: n0(a.z) + n0(b.z),\r\n    };\r\n}\r\n\r\n// Scale vector by scalar: v * s\r\nexport function vec3Scale(v: Vector3, scalar: number): Vector3 {\r\n    const s = n0(scalar);\r\n    return {\r\n        x: n0(v.x) * s,\r\n        y: n0(v.y) * s,\r\n        z: n0(v.z) * s,\r\n    };\r\n}\r\n\r\n// Component-wise multiplication: a * b\r\nexport function vec3Mul(a: Vector3, b: Vector3): Vector3 {\r\n    return {\r\n        x: n0(a.x) * n0(b.x),\r\n        y: n0(a.y) * n0(b.y),\r\n        z: n0(a.z) * n0(b.z),\r\n    };\r\n}\r\n\r\n// Clamp vector length to max (radial clamp): keeps direction, limits magnitude.\r\nexport function vec3Clamp(v: Vector3, max: number): Vector3 {\r\n    const m = Math.abs(n0(max));\r\n    if (m === 0) return vec3Zero();\r\n\r\n    const x = n0(v.x);\r\n    const y = n0(v.y);\r\n    const z = n0(v.z);\r\n    const length = Math.hypot(x, y, z);\r\n\r\n    // If already within limit (or zero), return the sanitized vector unchanged.\r\n    if (length === 0 || length <= m) return { x, y, z };\r\n\r\n    const s = m / length;\r\n    return { x: x * s, y: y * s, z: z * s };\r\n}\r\n\r\n// Apply dead zone: if |component| < threshold, set to 0\r\nexport function vec3DeadZone(v: Vector3, threshold: number): Vector3 {\r\n    const t = Math.abs(n0(threshold));\r\n    return {\r\n        x: Math.abs(n0(v.x)) < t ? 0 : n0(v.x),\r\n        y: Math.abs(n0(v.y)) < t ? 0 : n0(v.y),\r\n        z: Math.abs(n0(v.z)) < t ? 0 : n0(v.z),\r\n    };\r\n}\r\n\r\n// Check if vector is near zero (all components < epsilon)\r\nexport function vec3IsNearZero(v: Vector3, epsilon: number = 0.01): boolean {\r\n    const e = Math.abs(n0(epsilon) || 0.01);\r\n    return Math.abs(n0(v.x)) < e && Math.abs(n0(v.y)) < e && Math.abs(n0(v.z)) < e;\r\n}\r\n\r\n// Exponential smoothing: result = current + (target - current) * factor\r\nexport function vec3Smooth(current: Vector3, target: Vector3, factor: number = 0.25): Vector3 {\r\n    return vec3Mix(current, target, factor);\r\n}\r\n\r\n//\r\nexport function vec3Normalize(v: Vector3, dt: number = 0.1): Vector3 {\r\n    const denom = Math.max(0.000001, Math.abs(n0(dt)) || 0.000001);\r\n    return { x: n0(v.x) / denom, y: n0(v.y) / denom, z: n0(v.z) / denom };\r\n}\r\n\r\n// Select components for 2D mouse movement\r\n// axisMapping: 'ax', 'ay', 'az' for x, y, z components\r\nexport function vec3Select2D(v: Vector3, axisX: 'ax' | 'ay' | 'az', axisY: 'ax' | 'ay' | 'az'): { x: number; y: number } {\r\n    const componentMap = {\r\n        ax: v.x || 0,\r\n        ay: v.y || 0,\r\n        az: v.z || 0,\r\n    };\r\n    return {\r\n        x: componentMap[axisX],\r\n        y: componentMap[axisY],\r\n    };\r\n}\r\n\r\n// Select components for 3D mouse movement\r\nexport function vec3Select(v: Vector3, axisX: 'ax' | 'ay' | 'az', axisY: 'ax' | 'ay' | 'az', axisZ: 'ax' | 'ay' | 'az'): { x: number; y: number; z: number } {\r\n    const componentMap = {\r\n        ax: n0(v.x),\r\n        ay: n0(v.y),\r\n        az: n0(v.z),\r\n    };\r\n    return {\r\n        x: componentMap[axisX],\r\n        y: componentMap[axisY],\r\n        z: componentMap[axisZ],\r\n    };\r\n}\r\n\r\n// Apply direction multipliers to 2D vector\r\nexport function vec2ApplyDirection(v: { x: number; y: number }, dirX: number = 1, dirY: number = 1): { x: number; y: number } {\r\n    return {\r\n        x: n0(v.x) * (n0(dirX) || 1),\r\n        y: n0(v.y) * (n0(dirY) || 1),\r\n    };\r\n}\r\n\r\n// Scale 2D vector by scalar\r\nexport function vec2Scale(v: { x: number; y: number }, scalar: number = 1): { x: number; y: number } {\r\n    const s = n0(scalar);\r\n    return {\r\n        x: n0(v.x) * s,\r\n        y: n0(v.y) * s,\r\n    };\r\n}\r\n\r\n// Rotate X/Y by Z angle (radians). Optionally override output Z (useful when Z is repurposed).\r\nexport function vec3RotateXYByAngle(v: Vector3, angleRad: number, zOverride?: number): Vector3 {\r\n    const a = n0(angleRad);\r\n    const cosA = Math.cos(a);\r\n    const sinA = Math.sin(a);\r\n    const x = n0(v.x);\r\n    const y = n0(v.y);\r\n    return {\r\n        x: x * cosA - y * sinA,\r\n        y: x * sinA + y * cosA,\r\n        z: zOverride !== undefined ? n0(zOverride) : n0(v.z),\r\n    };\r\n}\r\n\r\n// =========================\r\n// Angle Math\r\n// =========================\r\n\r\n//    [-PI, PI]\r\nexport function normalizeAngle(angle: number): number {\r\n    const twoPi = Math.PI * 2;\r\n    angle = angle % twoPi;\r\n    if (angle < -Math.PI) {\r\n        angle += twoPi;\r\n    } else if (angle > Math.PI) {\r\n        angle -= twoPi;\r\n    }\r\n    return angle;\r\n}\r\n\r\n//      \r\nexport function angleDelta(a: number, b: number): number {\r\n    return normalizeAngle(a - b);\r\n}\r\n\r\n// Normalize all angles in a vector\r\nexport function vec3NormalizeAngles(v: Vector3): Vector3 {\r\n    return {\r\n        x: normalizeAngle(n0(v.x)),\r\n        y: normalizeAngle(n0(v.y)),\r\n        z: normalizeAngle(n0(v.z)),\r\n    };\r\n}\r\n\r\n// Calculate angle deltas between two angle vectors\r\nexport function vec3AngleDelta(current: Vector3, base: Vector3): Vector3 {\r\n    return {\r\n        x: angleDelta(n0(current.x), n0(base.x)),\r\n        y: angleDelta(n0(current.y), n0(base.y)),\r\n        z: angleDelta(n0(current.z), n0(base.z)),\r\n    };\r\n}\r\n","// =========================\r\n// Gravity Sensor\r\n// =========================\r\n\r\nimport { log } from '../../utils/utils';\r\nimport { vec3Zero, vec3FromSensor, vec3Smooth, vec3NormalizeAngles, type Vector3, vec3Normalize } from '../../utils/math';\r\nimport { GRAVITY_SMOOTH } from '../../config/config';\r\n\r\nlet gravitySensor: any = null;\r\n\r\n// Smoothed gravity vector (normalized)\r\nlet gravityVector: Vector3 = vec3Zero();\r\nlet gravityMagnitude: number = 0;\r\n\r\n// Get current gravity vector (normalized)\r\nexport function getGravityVector(): Vector3 {\r\n    return gravityVector;\r\n}\r\n\r\n// Get gravity magnitude\r\nexport function getGravityMagnitude(): number {\r\n    return gravityMagnitude;\r\n}\r\n\r\n// Check if gravity sensor is available\r\nexport function isGravityAvailable(): boolean {\r\n    return gravitySensor !== null;\r\n}\r\n\r\n// Reset gravity sensor state\r\nexport function resetGravitySensor() {\r\n    gravityVector = vec3Zero();\r\n    gravityMagnitude = 0;\r\n}\r\n\r\n// Calculate orientation correction matrix from gravity vector\r\n// Returns rotation angles to align with gravity\r\nexport function getOrientationCorrection(): Vector3 {\r\n    if (gravityMagnitude < 0.1) {\r\n        return vec3Zero(); // Not enough gravity data\r\n    }\r\n\r\n    // Calculate pitch and roll from gravity vector\r\n    // Pitch: rotation around X axis (forward/backward tilt)\r\n    // Roll: rotation around Y axis (left/right tilt)\r\n    const gx = gravityVector.x;\r\n    const gy = gravityVector.y;\r\n    const gz = gravityVector.z;\r\n\r\n    const pitch = Math.atan2(-gx, Math.sqrt(gy * gy + gz * gz));\r\n    const roll = Math.atan2(gy, gz);\r\n\r\n    return {\r\n        x: pitch,  // pitch correction\r\n        y: roll,   // roll correction\r\n        z: 0       // yaw not determined from gravity alone\r\n    };\r\n}\r\n\r\n// Apply dimensional correction to a vector using gravity reference\r\nexport function applyDimensionalCorrection(vector: Vector3, useGravity: boolean = true): Vector3 {\r\n    if (!useGravity || !isGravityAvailable() || gravityMagnitude < 0.1) {\r\n        return vector; // No correction if gravity not available\r\n    }\r\n\r\n    const correction = getOrientationCorrection();\r\n\r\n    // Apply pitch and roll corrections\r\n    // This compensates for device orientation relative to gravity\r\n    return {\r\n        x: vector.x - correction.x * 0.1, // Subtle correction\r\n        y: vector.y - correction.y * 0.1,\r\n        z: vector.z\r\n    };\r\n}\r\n\r\n// Initialize gravity sensor\r\nexport function initGravitySensor() {\r\n    if (!('GravitySensor' in window)) {\r\n        log('GravitySensor API is not supported.');\r\n        return;\r\n    }\r\n\r\n    try {\r\n        gravitySensor = new (window as any).GravitySensor({ frequency: 60 });\r\n    } catch (err: any) {\r\n        log('Cannot create GravitySensor: ' + (err.message || err));\r\n        return;\r\n    }\r\n\r\n    gravitySensor.addEventListener('reading', () => {\r\n        const rawGravity = vec3FromSensor(gravitySensor!);\r\n\r\n        // Smooth the gravity vector\r\n        gravityVector = vec3Smooth(gravityVector, rawGravity, GRAVITY_SMOOTH);\r\n\r\n        // Calculate magnitude\r\n        gravityMagnitude = Math.hypot(gravityVector.x, gravityVector.y, gravityVector.z);\r\n\r\n        // Normalize gravity vector\r\n        if (gravityMagnitude > 0.1) {\r\n            const invMag = 1.0 / gravityMagnitude;\r\n            gravityVector = {\r\n                x: gravityVector.x * invMag,\r\n                y: gravityVector.y * invMag,\r\n                z: gravityVector.z * invMag\r\n            };\r\n        }\r\n    });\r\n\r\n    gravitySensor.addEventListener('error', (event: any) => {\r\n        log('GravitySensor error: ' + ((event?.error?.message) || event?.message || event));\r\n    });\r\n\r\n    gravitySensor.start();\r\n    log('GravitySensor started (60 Hz)');\r\n}\r\n\r\n","// =========================\r\n// Gyroscope\r\n// =========================\r\n\r\nimport { log } from '../../utils/utils';\r\nimport { sendWS, isWSConnected } from '../../network/websocket';\r\nimport { enqueueMotion } from '../../config/motion-state';\r\nimport { aiModeActive } from '../speech';\r\nimport { getAirState, isMotionCalibrated, setMotionCalibrated, resetMotionBaseline } from '../../ui/air-button';\r\nimport { ANGLE_DEADZONE, ANGLE_GAIN, ANGLE_SMOOTH, ANGLE_MAX_STEP, MOTION_SEND_INTERVAL, gyroDirX, gyroDirY, gyroDirZ, gyroSrcForMouseX, gyroSrcForMouseY, gyroSrcForMouseZ, GYRO_DEADZONE, GYRO_GAIN, GYRO_SMOOTH, GYRO_MAX_SAMPLE_COUNT, GYRO_ROTATION_GAIN, GRAVITY_CORRECTION_STRENGTH } from '../../config/config';\r\nimport {\r\n    vec3Zero,\r\n    vec3FromSensor,\r\n    vec3NormalizeAngles,\r\n    vec3AngleDelta,\r\n    vec3DeadZone,\r\n    vec3Select2D,\r\n    vec2ApplyDirection,\r\n    vec2Scale,\r\n    vec3Smooth,\r\n    vec3Clamp,\r\n    vec3IsNearZero,\r\n    type Vector3,\r\n    vec3Scale,\r\n    vec3Mix,\r\n    vec3Add,\r\n    vec3Sub,\r\n    vec3Select,\r\n    normalizeAngle,\r\n    vec3RotateXYByAngle,\r\n} from '../../utils/math';\r\nimport { applyDimensionalCorrection, getOrientationCorrection, isGravityAvailable } from './gravity-sensor';\r\n\r\n//\r\nlet gyroscope: any = null;\r\n\r\n// smoothed values of \"movement\" for cursor\r\nlet filteredMovement = { x: 0, y: 0 };\r\nlet lastTimestamp: number = performance.now();\r\nlet lastMotionSentAt: number = 0;\r\n\r\n// reset IMU state (e.g. when exiting AIR_MOVE)\r\nfunction resetGyroState() {\r\n    setMotionCalibrated(false);\r\n    filteredMovement = { x: 0, y: 0 };\r\n    lastTimestamp = performance.now();\r\n    lastMotionSentAt = 0;\r\n    resetMonteCarloSampling();\r\n    gyroscopeSmoothed = vec3Zero();\r\n    integratedAngles = vec3Zero();\r\n    lastGyroMovement = vec3Zero();\r\n}\r\n\r\nexport function resetGyroscopeState() {\r\n    resetGyroState();\r\n    resetMotionBaseline();\r\n}\r\n\r\n// Called when entering AIR_MOVE mode\r\nexport function onEnterAirMove() {\r\n    resetGyroState();\r\n}\r\n\r\n// Monte Carlo sampling for real-time calibration\r\nlet gyroscopeSmoothed: Vector3 = vec3Zero();\r\nlet gyroscopeResolved: Vector3 = vec3Zero(); // calibrated baseline (bias)\r\nlet integratedAngles: Vector3 = vec3Zero(); // accumulated angles\r\n\r\n// Sliding window for Monte Carlo sampling\r\nlet gyroscopeSampleWindow: Vector3[] = [];\r\nlet gyroscopeSampleWeights: number[] = []; // weights for each sample\r\nlet gyroscopeTotalWeight = 0;\r\nlet gyroscopeWeightedSum: Vector3 = vec3Zero(); // cached weighted sum for efficiency\r\n\r\n//\r\nlet averageRateSampleCount = 0;\r\nlet averageRateSampled = 0;\r\nlet averageRateResolved = 0;\r\n\r\n// Reset Monte Carlo sampling window\r\nfunction resetMonteCarloSampling() {\r\n    gyroscopeSampleWindow = [];\r\n    gyroscopeSampleWeights = [];\r\n    gyroscopeTotalWeight = 0;\r\n    gyroscopeWeightedSum = vec3Zero();\r\n    gyroscopeResolved = vec3Zero();\r\n}\r\n\r\n// Get calibration confidence (0-1): higher when window is full\r\nfunction getCalibrationConfidence(): number {\r\n    return Math.pow(Math.min(1, gyroscopeSampleWindow.length / GYRO_MAX_SAMPLE_COUNT), 2);\r\n}\r\n\r\n// Add sample to sliding window Monte Carlo sampler (optimized incremental update)\r\nfunction addMonteCarloSample(sample: Vector3, weight: number = 1, smoothForDiff: Vector3 = vec3Zero()): void {\r\n    if ((Math.abs(sample.x) + Math.abs(sample.y) + Math.abs(sample.z)) < 0.0001) return;\r\n\r\n    // too large difference from resolved - skip sample\r\n    if (Math.hypot(smoothForDiff.x - gyroscopeResolved.x, smoothForDiff.y - gyroscopeResolved.y, smoothForDiff.z - gyroscopeResolved.z) > (1 - getCalibrationConfidence())) {\r\n        return;\r\n    }\r\n\r\n    // Normalize the sample (angles)\r\n    const normalizedSample = vec3NormalizeAngles(sample);\r\n    const weightedSample = vec3Scale(normalizedSample, 1 / Math.max(0.001, weight));\r\n\r\n    // Check if we need to remove oldest sample\r\n    let removedWeightedSample: Vector3 | null = null;\r\n    if (gyroscopeSampleWindow.length >= GYRO_MAX_SAMPLE_COUNT) {\r\n        // Remove oldest sample (FIFO) - store for incremental update\r\n        const removedWeight = gyroscopeSampleWeights.shift()!;\r\n        removedWeightedSample = vec3Scale(gyroscopeSampleWindow.shift()!, removedWeight);\r\n        gyroscopeTotalWeight -= removedWeight;\r\n    }\r\n\r\n    // Add new sample to window\r\n    gyroscopeSampleWindow.push(weightedSample);\r\n    gyroscopeSampleWeights.push(weight);\r\n    gyroscopeTotalWeight += 1;\r\n\r\n    // Incremental update of weighted sum (more efficient than recalculating)\r\n    if (removedWeightedSample) {\r\n        // Remove old contribution\r\n        gyroscopeWeightedSum = vec3Sub(gyroscopeWeightedSum, removedWeightedSample);\r\n    }\r\n    // Add new contribution\r\n    gyroscopeWeightedSum = vec3Add(gyroscopeWeightedSum, weightedSample);\r\n\r\n    // Calculate weighted average (calibrated baseline)\r\n    if (gyroscopeTotalWeight > 0) {\r\n        gyroscopeResolved = vec3Scale(gyroscopeWeightedSum, 1 / gyroscopeTotalWeight);\r\n    }\r\n}\r\n\r\n//\r\nexport const gravityCorrection = (gyro: Vector3) => {\r\n    if (isGravityAvailable()) {\r\n        const orientationCorrection = getOrientationCorrection();\r\n        return {\r\n            x: gyro.x - orientationCorrection.x * GRAVITY_CORRECTION_STRENGTH,\r\n            y: gyro.y - orientationCorrection.y * GRAVITY_CORRECTION_STRENGTH,\r\n            z: gyro.z\r\n        };\r\n    }\r\n    return gyro;\r\n}\r\n\r\n//\r\nfunction gyroscopeSmooth(currentAngles: Vector3, dt: number = 0.1, sampleFactor: number = 1): Vector3 {\r\n    const smoothFactor = Math.max(0.1, Math.min(dt * 10, GYRO_SMOOTH, 1));\r\n\r\n    // Normalize accumulated angles\r\n    const normAngles = (currentAngles);\r\n\r\n    // Monte Carlo base sampling (real-time calibration/bias correction)\r\n    addMonteCarloSample(vec3NormalizeAngles(normAngles), sampleFactor, gyroscopeSmoothed);\r\n\r\n    // Remove bias using calibrated baseline, then smooth\r\n    const unbiasedAngles = vec3Sub(normAngles, gyroscopeResolved);\r\n    gyroscopeSmoothed = vec3Smooth(gyroscopeSmoothed, normAngles, smoothFactor);\r\n    let smoothGyro = gyroscopeSmoothed;\r\n\r\n    // Apply dead-zone after corrections\r\n    return vec3NormalizeAngles(smoothGyro);\r\n}\r\n\r\n//\r\nexport const getRotatedGyro = (gyro: Vector3) => {\r\n\r\n    //\r\n    let selectedAxes = vec3Select(\r\n        gyro,\r\n        gyroSrcForMouseX as 'ax' | 'ay' | 'az',\r\n        gyroSrcForMouseY as 'ax' | 'ay' | 'az',\r\n        gyroSrcForMouseZ as 'ax' | 'ay' | 'az'\r\n    );\r\n\r\n    // Extract Z axis rotation (rotation around Z axis)\r\n    const rotationZ = normalizeAngle(selectedAxes.z * gyroDirZ);\r\n    return vec3RotateXYByAngle(selectedAxes, rotationZ, 1);\r\n}\r\n\r\n\r\n//\r\nlet lastGyroMovement: Vector3 = vec3Zero();\r\nlet forSendingGyroMovement: Vector3 = vec3Zero();\r\nlet lastSendingTime: number = 0;\r\n\r\n//\r\nlet deltaGyroMovement: Vector3 = vec3Zero();\r\n\r\n//\r\nconst calculateDeltaGyroMovement = (gyro: Vector3) => {\r\n    const result = vec3Sub(gyro, lastGyroMovement);\r\n    lastGyroMovement = gyro;\r\n    return (deltaGyroMovement = result);\r\n}\r\n\r\n//\r\nlet sendWSGyroMovement = (movement: Vector3) => {\r\n    forSendingGyroMovement = vec3Add(forSendingGyroMovement, movement);\r\n\r\n    const baseMovement = {\r\n        x: forSendingGyroMovement.x * gyroDirX * GYRO_GAIN,\r\n        y: forSendingGyroMovement.y * gyroDirY * GYRO_GAIN,\r\n        z: forSendingGyroMovement.z * GYRO_GAIN * GYRO_ROTATION_GAIN\r\n    }; forSendingGyroMovement = vec3Zero();\r\n\r\n    const clampedMovement: Vector3 = vec3Clamp(baseMovement, ANGLE_MAX_STEP);\r\n    // Jitter suppression using gyro deadzone\r\n    const jx = Math.abs(clampedMovement.x) < GYRO_DEADZONE ? 0 : clampedMovement.x;\r\n    const jy = Math.abs(clampedMovement.y) < GYRO_DEADZONE ? 0 : clampedMovement.y;\r\n    const jz = Math.abs(clampedMovement.z) < GYRO_DEADZONE ? 0 : clampedMovement.z;\r\n    if (jx === 0 && jy === 0 && jz === 0) return;\r\n    enqueueMotion(jx, jy, jz);\r\n}\r\n\r\n//  \r\nexport function initGyro() {\r\n    if (!('Gyroscope' in window)) {\r\n        log('Gyroscope API  .');\r\n        return;\r\n    }\r\n\r\n    try {\r\n        gyroscope = new (window as any).Gyroscope({ frequency: 60 });\r\n    } catch (err: any) {\r\n        log('  Gyroscope: ' + (err.message || err));\r\n        return;\r\n    }\r\n\r\n    //\r\n    gyroscope.addEventListener('reading', () => {\r\n        //\r\n        const now = performance.now();\r\n        const dtMs = now - (lastTimestamp || now); // to avoid huge dt on first entry\r\n        const dt = dtMs / 1000; lastTimestamp = now; // in seconds\r\n\r\n        //\r\n        averageRateSampled += dt; averageRateSampleCount++;\r\n        averageRateResolved = averageRateSampled / averageRateSampleCount;\r\n\r\n        // for lag/overshoot correction\r\n        const averageRateFactor = (dt / averageRateResolved); // if dt > 1 has lag, dt < 1 has overshoot\r\n\r\n        // integrate raw gyro to angles\r\n        const rawGyro = vec3FromSensor(gyroscope!);\r\n        integratedAngles = vec3NormalizeAngles(vec3Add(integratedAngles, vec3Scale(rawGyro, dt)));\r\n\r\n        // smoothing & calibration on accumulated angles\r\n        const filteredGyro = getRotatedGyro(gyroscopeSmooth(integratedAngles, dt, averageRateFactor));\r\n\r\n        // track delta between current and previous angles\r\n        const delta = vec3DeadZone(calculateDeltaGyroMovement(filteredGyro), GYRO_DEADZONE);\r\n\r\n        // small values after smoothing are not sent\r\n        if (vec3IsNearZero(delta)) { return; }\r\n\r\n        //  \r\n        if (getAirState() !== 'AIR_MOVE') { return; }\r\n        if (!isWSConnected()) return;\r\n        if (aiModeActive) return;\r\n\r\n        // selection of axes for mouse (as you previously selected axes of accelerometer)\r\n        sendWSGyroMovement(delta);\r\n    });\r\n\r\n    gyroscope.addEventListener('error', (event: any) => {\r\n        log('Gyroscope error: ' + ((event.error && event.error.message) || event.message || event));\r\n    });\r\n\r\n    gyroscope.start();\r\n    log('Gyroscope started (60 Hz, angle integration)');\r\n}\r\n","// =========================\r\n// Accelerometer\r\n// =========================\r\n\r\nimport { log } from '../../utils/utils';\r\nimport { isWSConnected } from '../../network/websocket';\r\nimport { enqueueMotion } from '../../config/motion-state';\r\nimport { getAirState, setMotionCalibrated } from '../../ui/air-button';\r\nimport { ACCELEROMETER_DEADZONE, ACCELEROMETER_GAIN, ACCELEROMETER_SMOOTH, ACCELEROMETER_MAX_SAMPLE_COUNT, GRAVITY_CORRECTION_STRENGTH, accelSrcForMouseX, accelSrcForMouseY, accelSrcForMouseZ, accelDirX, accelDirY, accelDirZ } from '../../config/config';\r\nimport { vec3Zero, vec3FromSensor, vec3Sub, vec3Scale, type Vector3, vec3Mix, vec3Smooth, vec3Add, vec3DeadZone, vec3IsNearZero, vec3Select } from '../../utils/math';\r\nimport { aiModeActive } from '../speech';\r\nimport { getGravityVector, isGravityAvailable, getGravityMagnitude, getOrientationCorrection } from './gravity-sensor';\r\n\r\n//\r\nlet accelerometer: any = null;\r\n\r\n// smoothed values of \"movement\" for cursor\r\nlet lastTimestamp: number = performance.now();\r\nlet lastMotionSentAt: number = 0;\r\n\r\n// reset accelerometer state (e.g. when exiting AIR_MOVE)\r\nfunction resetAccelState() {\r\n    setMotionCalibrated(false);\r\n    lastTimestamp = performance.now();\r\n    lastMotionSentAt = 0;\r\n    resetMonteCarloSampling();\r\n    accelerometerSmoothed = vec3Zero();\r\n    accelerometerResolved = vec3Zero();\r\n    forSendingMovement = vec3Zero();\r\n}\r\n\r\nexport function resetAccelerometerState() {\r\n    resetAccelState();\r\n}\r\n\r\n// Called when entering AIR_MOVE mode\r\nexport function onEnterAirMove() {\r\n    resetAccelState();\r\n}\r\n\r\n// Monte Carlo sampling for real-time calibration\r\nlet accelerometerSmoothed: Vector3 = vec3Zero();\r\nlet accelerometerResolved: Vector3 = vec3Zero(); // calibrated baseline (bias)\r\n\r\n// Sliding window for Monte Carlo sampling\r\nlet accelerometerSampleWindow: Vector3[] = [];\r\nlet accelerometerSampleWeights: number[] = []; // weights for each sample\r\nlet accelerometerTotalWeight = 0;\r\nlet accelerometerWeightedSum: Vector3 = vec3Zero(); // cached weighted sum for efficiency\r\n\r\n//\r\nlet averageRateSampleCount = 0;\r\nlet averageRateSampled = 0;\r\nlet averageRateResolved = 0;\r\n\r\n// Reset Monte Carlo sampling window\r\nfunction resetMonteCarloSampling() {\r\n    accelerometerSampleWindow = [];\r\n    accelerometerSampleWeights = [];\r\n    accelerometerTotalWeight = 0;\r\n    accelerometerWeightedSum = vec3Zero();\r\n    accelerometerResolved = vec3Zero();\r\n}\r\n\r\n// Add sample to sliding window Monte Carlo sampler (optimized incremental update)\r\nfunction addMonteCarloSample(sample: Vector3, weight: number = 1, smoothForDiff: Vector3 = vec3Zero()): void {\r\n    if ((Math.abs(sample.x) + Math.abs(sample.y) + Math.abs(sample.z)) < 0.0001) return;\r\n\r\n    // too large difference from resolved - skip sample\r\n    if (Math.hypot(smoothForDiff.x - accelerometerResolved.x, smoothForDiff.y - accelerometerResolved.y, smoothForDiff.z - accelerometerResolved.z) > 2.0) {\r\n        return;\r\n    }\r\n\r\n    const weightedSample = vec3Scale(sample, 1 / Math.max(0.001, weight));\r\n\r\n    // Check if we need to remove oldest sample\r\n    let removedWeightedSample: Vector3 | null = null;\r\n    if (accelerometerSampleWindow.length >= ACCELEROMETER_MAX_SAMPLE_COUNT) {\r\n        // Remove oldest sample (FIFO) - store for incremental update\r\n        const removedWeight = accelerometerSampleWeights.shift()!;\r\n        removedWeightedSample = vec3Scale(accelerometerSampleWindow.shift()!, removedWeight);\r\n        accelerometerTotalWeight -= removedWeight;\r\n    }\r\n\r\n    // Add new sample to window\r\n    accelerometerSampleWindow.push(weightedSample);\r\n    accelerometerSampleWeights.push(weight);\r\n    accelerometerTotalWeight += 1;\r\n\r\n    // Incremental update of weighted sum (more efficient than recalculating)\r\n    if (removedWeightedSample) {\r\n        // Remove old contribution\r\n        accelerometerWeightedSum = vec3Sub(accelerometerWeightedSum, removedWeightedSample);\r\n    }\r\n    // Add new contribution\r\n    accelerometerWeightedSum = vec3Add(accelerometerWeightedSum, weightedSample);\r\n\r\n    // Calculate weighted average (calibrated baseline)\r\n    if (accelerometerTotalWeight > 0) {\r\n        accelerometerResolved = vec3Scale(accelerometerWeightedSum, 1 / accelerometerTotalWeight);\r\n    }\r\n}\r\n\r\n// Get calibration confidence (0-1): higher when window is full\r\nfunction getCalibrationConfidence(): number {\r\n    return Math.min(1, accelerometerSampleWindow.length / ACCELEROMETER_MAX_SAMPLE_COUNT);\r\n}\r\n\r\n\r\n//\r\nexport const gravityCorrection = (gyro: Vector3) => {\r\n    if (isGravityAvailable()) {\r\n        const orientationCorrection = getOrientationCorrection();\r\n        return {\r\n            x: gyro.x - orientationCorrection.x * GRAVITY_CORRECTION_STRENGTH,\r\n            y: gyro.y - orientationCorrection.y * GRAVITY_CORRECTION_STRENGTH,\r\n            z: gyro.z\r\n        };\r\n    }\r\n    return gyro;\r\n}\r\n\r\n\r\n//\r\nfunction accelerometerSmooth(accel: Vector3, dt: number = 0.1, sampleFactor: number = 1): Vector3 {\r\n    const smoothFactor = Math.max(0.05, Math.min(dt * 1, ACCELEROMETER_SMOOTH, 1));\r\n\r\n    // Dead-zone, smoothing and normalization\r\n    accelerometerSmoothed = vec3Smooth(accelerometerSmoothed, accel, smoothFactor);\r\n\r\n    // Monte Carlo base sampling (real-time calibration/bias correction)\r\n    // Use sampleFactor as weight to account for timing variations\r\n    addMonteCarloSample(accel, sampleFactor, accelerometerSmoothed);\r\n\r\n    // Remove gravity component if gravity sensor is available\r\n    //let linearAccel = vec3Sub(accelerometerSmoothed, accelerometerResolved);\r\n\r\n    let linearAccel = (accelerometerSmoothed);\r\n\r\n    // Apply dead-zone to final result\r\n    return linearAccel;\r\n}\r\n\r\n//\r\nlet lastMovement = vec3Zero();\r\nconst computeMovementDelta = (movement: Vector3) => {\r\n    const result = vec3Sub(movement, lastMovement);\r\n    lastMovement = movement;\r\n    return result;\r\n}\r\n\r\n//\r\nlet forSendingMovement: Vector3 = vec3Zero();\r\nlet sendWSMovement = (movement: Vector3) => {\r\n    forSendingMovement = vec3Add(forSendingMovement, movement);\r\n\r\n    const mappedMovement = {\r\n        x: forSendingMovement.x * accelDirX * ACCELEROMETER_GAIN,\r\n        y: forSendingMovement.y * accelDirY * ACCELEROMETER_GAIN,\r\n        z: forSendingMovement.z * accelDirZ * ACCELEROMETER_GAIN\r\n    };\r\n    forSendingMovement = vec3Zero();\r\n\r\n    // Jitter suppression before enqueue\r\n    if (Math.abs(mappedMovement.x) < ACCELEROMETER_DEADZONE) mappedMovement.x = 0;\r\n    if (Math.abs(mappedMovement.y) < ACCELEROMETER_DEADZONE) mappedMovement.y = 0;\r\n    if (Math.abs(mappedMovement.z) < ACCELEROMETER_DEADZONE) mappedMovement.z = 0;\r\n    if (mappedMovement.x === 0 && mappedMovement.y === 0 && mappedMovement.z === 0) return;\r\n\r\n    enqueueMotion(mappedMovement.x, mappedMovement.y, mappedMovement.z);\r\n}\r\n\r\n//\r\nconst gravityBasedCorrection = (accel: Vector3) => {\r\n    if (isGravityAvailable() && getGravityMagnitude() > 0.1) {\r\n        const gravity = getGravityVector();\r\n        const gravityMagnitude = getGravityMagnitude();\r\n        return {\r\n            x: accel.x - gravity.x * gravityMagnitude,\r\n            y: accel.y - gravity.y * gravityMagnitude,\r\n            z: accel.z - gravity.z * gravityMagnitude\r\n        };\r\n    }\r\n    return accel;\r\n}\r\n\r\n// initialize accelerometer\r\nexport function initAccelerometer() {\r\n    if (!('Accelerometer' in window)) {\r\n        log('Accelerometer API is not supported.');\r\n        return;\r\n    }\r\n\r\n    try {\r\n        accelerometer = new (window as any).Accelerometer({ frequency: 60 });\r\n    } catch (err: any) {\r\n        log('Cannot create Accelerometer: ' + (err.message || err));\r\n        return;\r\n    }\r\n\r\n    //\r\n    accelerometer.addEventListener('reading', () => {\r\n        //\r\n        const now = performance.now();\r\n        const dtMs = now - (lastTimestamp || now); // to avoid huge dt on first entry\r\n        const dt = dtMs / 1000; lastTimestamp = now; // in seconds\r\n\r\n        //\r\n        averageRateSampled += dt; averageRateSampleCount++;\r\n        averageRateResolved = averageRateSampled / averageRateSampleCount;\r\n\r\n        // for lag/overshoot correction\r\n        const averageRateFactor = (dt / averageRateResolved); // if dt > 1 has lag, dt < 1 has overshoot\r\n\r\n        // smoothing\r\n        const filteredAccel = accelerometerSmooth(vec3FromSensor(accelerometer!), dt, averageRateFactor);\r\n        const corrected = gravityBasedCorrection(filteredAccel);\r\n        const delta = vec3DeadZone(computeMovementDelta(corrected), ACCELEROMETER_DEADZONE);\r\n\r\n        // small values after smoothing are not sent\r\n        if (vec3IsNearZero(filteredAccel)) { return; }\r\n\r\n        //  \r\n        if (getAirState() !== 'AIR_MOVE') { return; }\r\n        if (!isWSConnected()) return;\r\n        if (aiModeActive) return;\r\n\r\n        // selection of axes for mouse\r\n        sendWSMovement(delta);\r\n    });\r\n\r\n    accelerometer.addEventListener('error', (event: any) => {\r\n        log('Accelerometer error: ' + ((event?.error?.message) || event?.message || event));\r\n    });\r\n\r\n    accelerometer.start(); log('Accelerometer started (60 Hz)');\r\n}\r\n","// =========================\r\n// Air-: pointer +  + AirMove (Trackball/Touchpad)\r\n// =========================\r\n\r\nimport { log, airButton, airStatusEl } from '../utils/utils';\r\nimport { sendWS, connectWS } from '../network/websocket';\r\nimport { checkIsAiModeActive } from '../input/speech';\r\nimport { HOLD_DELAY, TAP_THRESHOLD, MOVE_TAP_THRESHOLD, SWIPE_THRESHOLD } from '../config/config';\r\nimport { onEnterAirMove as gyroOnEnterAirMove } from '../input/unfinised/gyroscope';\r\nimport { onEnterAirMove as accelOnEnterAirMove } from '../input/unfinised/accelerometer';\r\n\r\nexport type AirState = 'IDLE' | 'WAIT_TAP_OR_HOLD' | 'AIR_MOVE' | 'GESTURE_SWIPE';\r\n\r\nlet airState: AirState = 'IDLE';\r\nlet airDownTime = 0;\r\nlet airDownPos: { x: number; y: number } | null = null;\r\nlet airMoveTimer: number | null = null;\r\nlet dragActive = false;\r\nlet lastSwipePos: { x: number; y: number } | null = null;\r\nlet swipeDirection: 'vertical' | 'horizontal' | null = null;\r\n\r\n//  ()    \r\nlet baseGx = 0, baseGy = 0, baseGz = 0;\r\nlet motionCalibrated = false;\r\nlet filteredDx = 0;\r\nlet filteredDy = 0;\r\nlet lastMotionSentAt = 0;\r\n\r\n// =====   DRAG =====\r\n//    tap-tap-hold \r\nlet lastTapEndTime = 0;           //    tap\r\nlet lastTapWasClean = false;      //    tap \"\" (,  )\r\nlet pendingDragOnHold = false;    // :  hold   drag\r\n\r\nconst DOUBLE_TAP_WINDOW = 300;    //   tap   down  drag\r\nconst DRAG_HOLD_DELAY = 150;      //  hold  drag (  HOLD_DELAY)\r\n\r\n// ========== Getters / Setters ==========\r\n\r\nexport function getAirState(): AirState {\r\n    return airState;\r\n}\r\n\r\nexport function isDragActive(): boolean {\r\n    return dragActive;\r\n}\r\n\r\nexport function isMotionCalibrated(): boolean {\r\n    return motionCalibrated;\r\n}\r\n\r\nexport function setMotionCalibrated(value: boolean) {\r\n    motionCalibrated = value;\r\n}\r\n\r\nexport function getMotionBaseline() {\r\n    return { baseGx, baseGy, baseGz };\r\n}\r\n\r\nexport function setMotionBaseline(gx: number, gy: number, gz: number) {\r\n    baseGx = gx;\r\n    baseGy = gy;\r\n    baseGz = gz;\r\n    motionCalibrated = true;\r\n}\r\n\r\nexport function resetMotionBaseline() {\r\n    baseGx = baseGy = baseGz = 0;\r\n    motionCalibrated = false;\r\n    filteredDx = filteredDy = 0;\r\n    lastMotionSentAt = 0;\r\n}\r\n\r\nexport function getFilteredMotion() {\r\n    return { filteredDx, filteredDy };\r\n}\r\n\r\nexport function setFilteredMotion(dx: number, dy: number) {\r\n    filteredDx = dx;\r\n    filteredDy = dy;\r\n}\r\n\r\nexport function getLastMotionSentAt(): number {\r\n    return lastMotionSentAt;\r\n}\r\n\r\nexport function setLastMotionSentAt(time: number) {\r\n    lastMotionSentAt = time;\r\n}\r\n\r\n// ========== State Management ==========\r\n\r\nfunction setAirStatus(state: AirState) {\r\n    airState = state;\r\n    if (airStatusEl) {\r\n        airStatusEl.textContent = state + (dragActive ? ' [DRAG]' : '');\r\n    }\r\n    if (airButton) {\r\n        airButton.classList.toggle('air-move', state === 'AIR_MOVE');\r\n        airButton.classList.toggle('active', state !== 'IDLE');\r\n        airButton.classList.toggle('drag-active', dragActive);\r\n    }\r\n}\r\n\r\nexport function resetAirState() {\r\n    const wasDragging = dragActive;\r\n\r\n    setAirStatus('IDLE');\r\n    airDownPos = null;\r\n    lastSwipePos = null;\r\n    swipeDirection = null;\r\n    pendingDragOnHold = false;\r\n\r\n    if (airMoveTimer !== null) {\r\n        clearTimeout(airMoveTimer);\r\n        airMoveTimer = null;\r\n    }\r\n\r\n    //   lastTapEndTime  lastTapWasClean !\r\n    //     double-tap   \r\n\r\n    resetMotionBaseline();\r\n}\r\n\r\n// ========== Air Move (Cursor Control via Sensors) ==========\r\n\r\n/**\r\n *    AIR_MOVE     /.\r\n * @param startDrag -  true,   drag- ( )\r\n */\r\nexport function enterAirMove(startDrag: boolean = false) {\r\n    setAirStatus('AIR_MOVE');\r\n    resetMotionBaseline();\r\n\r\n    //     \r\n    gyroOnEnterAirMove();\r\n    accelOnEnterAirMove();\r\n\r\n    //  drag  \r\n    if (startDrag && !dragActive) {\r\n        dragActive = true;\r\n        sendWS({ type: 'mouse_down', button: 'left' });\r\n        log('Air: AIR_MOVE + DRAG started (mouse down)');\r\n\r\n        //     [DRAG]\r\n        setAirStatus('AIR_MOVE');\r\n    } else {\r\n        log('Air: AIR_MOVE started (cursor control via sensors)');\r\n    }\r\n}\r\n\r\n/**\r\n *   AIR_MOVE \r\n */\r\nfunction exitAirMove() {\r\n    if (airState !== 'AIR_MOVE') return;\r\n\r\n    //   drag-,   \r\n    if (dragActive) {\r\n        sendWS({ type: 'mouse_up', button: 'left' });\r\n        log('Air: DRAG ended (mouse up)');\r\n        dragActive = false;\r\n    } else {\r\n        log('Air: AIR_MOVE ended');\r\n    }\r\n}\r\n\r\n// ========== Pointer Handlers ==========\r\n\r\nfunction airOnDown(e: PointerEvent) {\r\n    //    air-   WS\r\n    connectWS();\r\n\r\n    if (checkIsAiModeActive()) return;\r\n\r\n    const now = Date.now();\r\n\r\n    // ===== :   DRAG? =====\r\n    // Drag  :\r\n    // 1.  tap  \"\" (,  )\r\n    // 2.    DOUBLE_TAP_WINDOW     tap\r\n    const timeSinceLastTap = now - lastTapEndTime;\r\n    const shouldPrepareForDrag = lastTapWasClean && (timeSinceLastTap < DOUBLE_TAP_WINDOW);\r\n\r\n    if (shouldPrepareForDrag) {\r\n        pendingDragOnHold = true;\r\n        log(`Air: double-tap detected (${timeSinceLastTap}ms since last tap), preparing for drag...`);\r\n    } else {\r\n        pendingDragOnHold = false;\r\n    }\r\n\r\n    //    tap\r\n    lastTapWasClean = false;\r\n\r\n    // Clear any existing hold timer\r\n    if (airMoveTimer !== null) {\r\n        clearTimeout(airMoveTimer);\r\n        airMoveTimer = null;\r\n    }\r\n\r\n    airDownTime = now;\r\n    airDownPos = { x: e.clientX, y: e.clientY };\r\n    setAirStatus('WAIT_TAP_OR_HOLD');\r\n\r\n    // =====   =====\r\n    //    drag    \r\n    //    HOLD_DELAY\r\n\r\n    const holdDelay = pendingDragOnHold ? DRAG_HOLD_DELAY : HOLD_DELAY;\r\n\r\n    airMoveTimer = globalThis?.setTimeout?.(() => {\r\n        if (airState === 'WAIT_TAP_OR_HOLD') {\r\n            enterAirMove(pendingDragOnHold);\r\n        }\r\n    }, holdDelay) as any;\r\n}\r\n\r\nfunction airOnUp(e: PointerEvent | null) {\r\n    if (checkIsAiModeActive()) {\r\n        resetAirState();\r\n        return;\r\n    }\r\n\r\n    const now = Date.now();\r\n    const dt = now - airDownTime;\r\n\r\n    //     \"\" tap\r\n    let wasCleanTap = false;\r\n\r\n    //    AIR_MOVE\r\n    if (airState === 'AIR_MOVE') {\r\n        exitAirMove();\r\n    }\r\n\r\n    //  -\r\n    if (airState === 'GESTURE_SWIPE') {\r\n        log('Air: swipe gesture ended');\r\n    }\r\n\r\n    //   (    = )\r\n    if (airState === 'WAIT_TAP_OR_HOLD') {\r\n        if (airDownPos && dt < TAP_THRESHOLD) {\r\n            const clientX = e ? e.clientX : airDownPos.x;\r\n            const clientY = e ? e.clientY : airDownPos.y;\r\n            const dx = clientX - airDownPos.x;\r\n            const dy = clientY - airDownPos.y;\r\n            const dist = Math.hypot(dx, dy);\r\n\r\n            if (dist < MOVE_TAP_THRESHOLD) {\r\n                //   tap!\r\n                wasCleanTap = true;\r\n\r\n                //    \" tap\"  drag,     \r\n                //    \r\n                if (!pendingDragOnHold) {\r\n                    sendWS({ type: 'click', button: 'left' });\r\n                    log('Air: tap  click');\r\n                } else {\r\n                    //   tap-tap ( hold)   double-click\r\n                    sendWS({ type: 'click', button: 'left', count: 2 });\r\n                    log('Air: tap-tap  double-click');\r\n                    wasCleanTap = false; //       drag-sequence\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    //    tap   \r\n    lastTapEndTime = now;\r\n    lastTapWasClean = wasCleanTap;\r\n\r\n    if (wasCleanTap) {\r\n        log(`Air: clean tap recorded, next tap+hold within ${DOUBLE_TAP_WINDOW}ms will start drag`);\r\n    }\r\n\r\n    dragActive = false;\r\n    resetAirState();\r\n}\r\n\r\n// ========== Swipe Gestures (Scroll) ==========\r\n\r\nfunction handleAirSurfaceMove(x: number, y: number) {\r\n    if (!airDownPos) return;\r\n\r\n    const dxSurf = x - airDownPos.x;\r\n    const dySurf = y - airDownPos.y;\r\n\r\n    if (airState === 'WAIT_TAP_OR_HOLD') {\r\n        const dist = Math.hypot(dxSurf, dySurf);\r\n\r\n        //       \r\n        if (dist > SWIPE_THRESHOLD) {\r\n            //     AIR_MOVE\r\n            if (airMoveTimer !== null) {\r\n                clearTimeout(airMoveTimer);\r\n                airMoveTimer = null;\r\n            }\r\n\r\n            //   \" tap\"     tap-tap-hold  drag\r\n            pendingDragOnHold = false;\r\n            lastTapWasClean = false;\r\n\r\n            setAirStatus('GESTURE_SWIPE');\r\n            startSwipeGesture(dxSurf, dySurf);\r\n        }\r\n    } else if (airState === 'GESTURE_SWIPE') {\r\n        continueSwipeGesture(x, y);\r\n    }\r\n}\r\n\r\nfunction startSwipeGesture(dxSurf: number, dySurf: number) {\r\n    const absX = Math.abs(dxSurf);\r\n    const absY = Math.abs(dySurf);\r\n\r\n    if (absY > absX) {\r\n        //    \r\n        swipeDirection = 'vertical';\r\n        lastSwipePos = { x: airDownPos!.x, y: airDownPos!.y };\r\n\r\n        const initialDelta = Math.round(dySurf * 0.8);\r\n        sendWS({ type: 'scroll', dx: 0, dy: initialDelta });\r\n        log(`Air: swipe ${dySurf > 0 ? 'down' : 'up'}  scroll`);\r\n    } else {\r\n        //    \r\n        swipeDirection = 'horizontal';\r\n        const direction = dxSurf > 0 ? 'right' : 'left';\r\n\r\n        log(`Air: swipe ${direction}`);\r\n        sendWS({ type: 'gesture_swipe', direction });\r\n\r\n        resetAirState();\r\n    }\r\n}\r\n\r\nfunction continueSwipeGesture(x: number, y: number) {\r\n    if (!lastSwipePos || !airDownPos || swipeDirection !== 'vertical') return;\r\n\r\n    const dy = y - lastSwipePos.y;\r\n\r\n    if (Math.abs(dy) > 2) {\r\n        const delta = Math.round(dy * 0.8);\r\n        sendWS({ type: 'scroll', dx: 0, dy: delta });\r\n        lastSwipePos = { x, y };\r\n    }\r\n}\r\n\r\n\r\n// ========== Context Menu & Middle-Click Scroll (Neighbor Button) ==========\r\n\r\nlet neighborState: 'IDLE' | 'WAIT_TAP_OR_HOLD' | 'MIDDLE_SCROLL' = 'IDLE';\r\nlet neighborDownTime = 0;\r\nlet neighborDownPos: { x: number; y: number } | null = null;\r\nlet neighborHoldTimer: number | null = null;\r\nlet neighborPointerId: number | null = null;\r\n\r\nconst NEIGHBOR_HOLD_DELAY = 250; // ms   middle-scroll\r\nconst NEIGHBOR_TAP_THRESHOLD = 200; // ms\r\nconst NEIGHBOR_MOVE_THRESHOLD = 15; // px\r\n\r\nfunction enterMiddleScrollMode() {\r\n    neighborState = 'MIDDLE_SCROLL';\r\n\r\n    //     \r\n    resetAirState();\r\n\r\n    // Middle mouse down\r\n    sendWS({ type: 'mouse_down', button: 'middle' });\r\n    log('Neighbor: MIDDLE_SCROLL started (sensors active)');\r\n\r\n    //  \r\n    const neighborButton = document.getElementById('airNeighborButton');\r\n    neighborButton?.classList.add('middle-scroll-active', 'active');\r\n\r\n    //\r\n    enterAirMove();\r\n}\r\n\r\nfunction exitMiddleScrollMode() {\r\n    if (neighborState !== 'MIDDLE_SCROLL') return;\r\n\r\n    // Middle mouse up\r\n    sendWS({ type: 'mouse_up', button: 'middle' });\r\n    log('Neighbor: MIDDLE_SCROLL ended');\r\n\r\n    //\r\n    neighborState = 'IDLE';\r\n    resetAirState();\r\n\r\n    //   \r\n    const neighborButton = document.getElementById('airNeighborButton');\r\n    neighborButton?.classList.remove('middle-scroll-active', 'active');\r\n}\r\n\r\nfunction resetNeighborState() {\r\n    if (neighborHoldTimer !== null) {\r\n        clearTimeout(neighborHoldTimer);\r\n        neighborHoldTimer = null;\r\n    }\r\n    neighborDownPos = null;\r\n    neighborState = 'IDLE';\r\n\r\n    const neighborButton = document.getElementById('airNeighborButton');\r\n    neighborButton?.classList.remove('middle-scroll-active', 'active');\r\n\r\n    resetAirState();\r\n}\r\n\r\nfunction initNeighborButton() {\r\n    const neighborButton = document.getElementById('airNeighborButton');\r\n    if (!neighborButton) return;\r\n\r\n    neighborButton.addEventListener('pointerdown', (e) => {\r\n        e.preventDefault();\r\n        if (neighborPointerId !== null && neighborPointerId !== e.pointerId) return;\r\n\r\n        connectWS();\r\n        if (checkIsAiModeActive()) return;\r\n\r\n        neighborPointerId = e.pointerId;\r\n        neighborButton.setPointerCapture(neighborPointerId);\r\n        neighborDownTime = Date.now();\r\n        neighborDownPos = { x: e.clientX, y: e.clientY };\r\n        neighborState = 'WAIT_TAP_OR_HOLD';\r\n\r\n        neighborButton.classList.add('active');\r\n\r\n        //    middle-scroll \r\n        neighborHoldTimer = globalThis?.setTimeout?.(() => {\r\n            neighborHoldTimer = null;\r\n            if (neighborState === 'WAIT_TAP_OR_HOLD') {\r\n                enterMiddleScrollMode();\r\n            }\r\n        }, NEIGHBOR_HOLD_DELAY) as any;\r\n    });\r\n\r\n    neighborButton.addEventListener('pointermove', (e) => {\r\n        if (e.pointerId !== neighborPointerId || !neighborDownPos) return;\r\n        e.preventDefault();\r\n\r\n        //      hold   (   )\r\n        if (neighborState === 'WAIT_TAP_OR_HOLD') {\r\n            const dx = e.clientX - neighborDownPos.x;\r\n            const dy = e.clientY - neighborDownPos.y;\r\n            const dist = Math.hypot(dx, dy);\r\n\r\n            if (dist > NEIGHBOR_MOVE_THRESHOLD) {\r\n                //      hold\r\n                if (neighborHoldTimer !== null) {\r\n                    clearTimeout(neighborHoldTimer);\r\n                    neighborHoldTimer = null;\r\n                }\r\n                //     ,  swipe\r\n            }\r\n        }\r\n\r\n        //   MIDDLE_SCROLL     ,\r\n        //    pointermove     \r\n    });\r\n\r\n    neighborButton.addEventListener('pointerup', (e) => {\r\n        if (e.pointerId !== neighborPointerId) return;\r\n        e.preventDefault();\r\n\r\n        const dt = Date.now() - neighborDownTime;\r\n\r\n        //   middle-scroll \r\n        if (neighborState === 'MIDDLE_SCROLL') {\r\n            exitMiddleScrollMode();\r\n        }\r\n        //  tap  context menu (right click)\r\n        else if (neighborState === 'WAIT_TAP_OR_HOLD' && dt < NEIGHBOR_TAP_THRESHOLD) {\r\n            if (neighborDownPos) {\r\n                const dx = e.clientX - neighborDownPos.x;\r\n                const dy = e.clientY - neighborDownPos.y;\r\n                const dist = Math.hypot(dx, dy);\r\n\r\n                if (dist < NEIGHBOR_MOVE_THRESHOLD) {\r\n                    sendWS({ type: 'click', button: 'right' });\r\n                    log('Neighbor: tap  right-click (context menu)');\r\n                }\r\n            }\r\n        }\r\n\r\n        if (neighborPointerId !== null) {\r\n            neighborButton.releasePointerCapture(neighborPointerId);\r\n            neighborPointerId = null;\r\n        }\r\n        resetNeighborState();\r\n    });\r\n\r\n    neighborButton.addEventListener('pointercancel', (e) => {\r\n        if (e?.pointerId === neighborPointerId || e?.pointerId == null) {\r\n            if (neighborState === 'MIDDLE_SCROLL') {\r\n                sendWS({ type: 'mouse_up', button: 'middle' });\r\n                log('Neighbor: middle-scroll cancelled');\r\n            }\r\n\r\n            if (neighborPointerId !== null) {\r\n                neighborButton.releasePointerCapture(neighborPointerId);\r\n                neighborPointerId = null;\r\n            }\r\n            resetNeighborState();\r\n        }\r\n    });\r\n\r\n    //     \r\n    neighborButton.addEventListener('contextmenu', (e) => {\r\n        e.preventDefault();\r\n    });\r\n\r\n    log('Neighbor button initialized (tap: right-click, hold: middle-scroll via sensors)');\r\n}\r\n\r\n// ==========    gyroscope.ts / accelerometer.ts ==========\r\n\r\nexport function isMiddleScrollActive(): boolean {\r\n    return neighborState === 'MIDDLE_SCROLL';\r\n}\r\n\r\n// ========== Initialization ==========\r\n\r\nexport function initAirButton() {\r\n    if (!airButton) return;\r\n\r\n    initNeighborButton();\r\n\r\n    let pointerId: number | null = null;\r\n\r\n    airButton.addEventListener('pointerdown', (e) => {\r\n        e.preventDefault();\r\n        if (pointerId !== null && pointerId !== e.pointerId) return;\r\n\r\n        pointerId = e.pointerId;\r\n        airButton?.setPointerCapture(pointerId);\r\n        airOnDown(e);\r\n    });\r\n\r\n    document.addEventListener('pointermove', (e) => {\r\n        if (e.pointerId !== pointerId) return;\r\n        e.preventDefault();\r\n\r\n        if (!airDownPos) return;\r\n        if (checkIsAiModeActive()) return;\r\n\r\n        handleAirSurfaceMove(e.clientX, e.clientY);\r\n    });\r\n\r\n    document.addEventListener('pointerup', (e) => {\r\n        if (e.pointerId !== pointerId) return;\r\n        e.preventDefault();\r\n\r\n        if (pointerId !== null) {\r\n            airButton?.releasePointerCapture(pointerId);\r\n        }\r\n        pointerId = null;\r\n        airOnUp(e);\r\n    });\r\n\r\n    document.addEventListener('pointercancel', (e) => {\r\n        if (e?.pointerId === pointerId || e?.pointerId == null) {\r\n            if (pointerId !== null) {\r\n                airButton?.releasePointerCapture(pointerId);\r\n            }\r\n            pointerId = null;\r\n\r\n            if (dragActive) {\r\n                sendWS({ type: 'mouse_up', button: 'left' });\r\n                dragActive = false;\r\n                log('Air: drag cancelled (mouse up)');\r\n            }\r\n\r\n            resetAirState();\r\n        }\r\n    });\r\n\r\n    log('Air button initialized');\r\n}\r\n","import { log } from '../../utils/utils';\r\nimport { enqueueMotion } from '../../config/motion-state';\r\nimport { aiModeActive } from '../speech';\r\nimport { getAirState } from '../../ui/air-button';\r\nimport {\r\n    REL_ORIENT_DEADZONE,\r\n    REL_ORIENT_GAIN,\r\n    REL_ORIENT_SMOOTH,\r\n    REL_ORIENT_MAX_STEP,\r\n    REL_ORIENT_MAX_STEP_MAX,\r\n    REL_ORIENT_MAX_STEP_UP_RATE,\r\n    REL_ORIENT_MAX_STEP_DOWN_RATE,\r\n    REL_ORIENT_SMOOTH_RATE_LOW,\r\n    REL_ORIENT_SMOOTH_RATE_HIGH,\r\n    relDirX,\r\n    relDirY,\r\n    relDirZ,\r\n    relSrcForMouseX,\r\n    relSrcForMouseY,\r\n    relSrcForMouseZ,\r\n    MOTION_JITTER_EPS,\r\n} from '../../config/config';\r\nimport {\r\n    vec3Zero,\r\n    vec3Clamp,\r\n    vec3Smooth,\r\n    vec3IsNearZero,\r\n    vec3Select,\r\n    type Vector3,\r\n    vec3RotateXYByAngle,\r\n    expSmoothing,\r\n    lerp,\r\n    clamp01,\r\n} from '../../utils/math';\r\nimport { isWSConnected } from '../../network/websocket';\r\n\r\n\r\nlet relSensor: any = null;\r\n\r\n// Orientation state\r\nlet lastQuat: [number, number, number, number] | null = null;\r\nlet smoothedDelta: Vector3 = vec3Zero(); // smoothed small-angle delta\r\nlet dynamicMaxStepPx: number = REL_ORIENT_MAX_STEP; // adaptive clamp radius in pixels/tick\r\n\r\n// Quaternion helpers\r\ntype Quat = [number, number, number, number];\r\n\r\n// Normalize with stability: keep sign consistent with previous to avoid hemisphere flips\r\nconst quatNormalizeStable = (q: Quat, prev: Quat | null): Quat => {\r\n    const [x, y, z, w] = q;\r\n    const len = Math.hypot(x, y, z, w) || 1;\r\n    let nx = x / len, ny = y / len, nz = z / len, nw = w / len;\r\n    if (prev) {\r\n        const dot = nx * prev[0] + ny * prev[1] + nz * prev[2] + nw * prev[3];\r\n        if (dot < 0) {\r\n            nx = -nx; ny = -ny; nz = -nz; nw = -nw;\r\n        }\r\n    }\r\n    return [nx, ny, nz, nw];\r\n};\r\n\r\nconst quatConj = (q: Quat): Quat => {\r\n    const [x, y, z, w] = q;\r\n    return [-x, -y, -z, w];\r\n};\r\n\r\nconst quatMul = (a: Quat, b: Quat): Quat => {\r\n    const [ax, ay, az, aw] = a;\r\n    const [bx, by, bz, bw] = b;\r\n    return [\r\n        aw * bx + ax * bw + ay * bz - az * by,\r\n        aw * by - ax * bz + ay * bw + az * bx,\r\n        aw * bz + ax * by - ay * bx + az * bw,\r\n        aw * bw - ax * bx - ay * by - az * bz,\r\n    ];\r\n};\r\n\r\n// Quaternion delta  small-angle vector (axis * angle)\r\nconst quatDeltaToAxisAngle = (dq: Quat): Vector3 => {\r\n    const [x, y, z, w] = dq;\r\n    const sinHalf = Math.hypot(x, y, z);\r\n    const angle = 2 * Math.atan2(sinHalf, w || 1);\r\n    if (sinHalf < 1e-6) {\r\n        return { x: 0, y: 0, z: 0 };\r\n    }\r\n    const inv = 1 / sinHalf;\r\n    return { x: x * inv * angle, y: y * inv * angle, z: z * inv * angle };\r\n};\r\n\r\nfunction mapToPixelsRaw(movement: Vector3): Vector3 {\r\n    const selected = vec3Select(\r\n        movement,\r\n        relSrcForMouseX as 'ax' | 'ay' | 'az',\r\n        relSrcForMouseY as 'ax' | 'ay' | 'az',\r\n        relSrcForMouseZ as 'ax' | 'ay' | 'az'\r\n    );\r\n\r\n    const rotationZ = selected.z * relDirZ;\r\n    const projected = vec3RotateXYByAngle(selected, rotationZ, 1);\r\n    return {\r\n        x: projected.x * relDirX * REL_ORIENT_GAIN,\r\n        y: projected.y * relDirY * REL_ORIENT_GAIN,\r\n        z: projected.z * relDirZ * REL_ORIENT_GAIN,\r\n    };\r\n}\r\n\r\nfunction clampPxRadiusFromDeltaVec(deltaVec: Vector3, dt: number): number {\r\n    // Convert deltaVec (rad axis-angle vector) into \"desired pixel movement\" magnitude.\r\n    // This makes the clamp depend on current motion intensity, and shrink when motion shrinks.\r\n    const rawMapped = mapToPixelsRaw(deltaVec);\r\n    const magPx = Math.hypot(rawMapped.x, rawMapped.y, rawMapped.z);\r\n    const desired = Math.max(REL_ORIENT_MAX_STEP, Math.min(REL_ORIENT_MAX_STEP_MAX, magPx));\r\n\r\n    // \"Incremental\" update: grow slower, shrink faster (feels responsive but stable).\r\n    const t = desired > dynamicMaxStepPx ? expSmoothing(dt, REL_ORIENT_MAX_STEP_UP_RATE) : expSmoothing(dt, REL_ORIENT_MAX_STEP_DOWN_RATE);\r\n    dynamicMaxStepPx = lerp(dynamicMaxStepPx, desired, t);\r\n\r\n    if (!Number.isFinite(dynamicMaxStepPx)) dynamicMaxStepPx = REL_ORIENT_MAX_STEP;\r\n    dynamicMaxStepPx = Math.max(REL_ORIENT_MAX_STEP, Math.min(REL_ORIENT_MAX_STEP_MAX, dynamicMaxStepPx));\r\n    return dynamicMaxStepPx;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n//\r\nfunction mapAndScale(movement: Vector3, maxStepPx: number): Vector3 {\r\n    const mapped = mapToPixelsRaw(movement);\r\n    return vec3Clamp(mapped, maxStepPx);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n//vec3NormalizeAngles\r\n\r\nfunction handleReading(quat: number[], dt: number): Vector3 {\r\n    if (!quat || quat.length < 4) return vec3Zero();\r\n\r\n    //\r\n    const curQuat = quatNormalizeStable([quat[0], quat[1], quat[2], quat[3]], lastQuat);\r\n    if (!lastQuat) { lastQuat = curQuat; };\r\n\r\n    // deltaQuat = q_curr * conj(q_prev)\r\n    const deltaQuat = quatMul(curQuat, quatConj(lastQuat)); lastQuat = curQuat;\r\n\r\n    // small-angle vector from delta quaternion\r\n    const deltaVec = quatDeltaToAxisAngle(deltaQuat);\r\n\r\n    // Update adaptive clamp from current (unsmoothed) deltaVec.\r\n    const maxStepPx = clampPxRadiusFromDeltaVec(deltaVec, dt);\r\n\r\n    // Smooth delta directly in quaternion space (axis-angle vector)\r\n    const deltaPx = mapToPixelsRaw(deltaVec);\r\n    const deltaMagPx = Math.hypot(deltaPx.x, deltaPx.y, deltaPx.z);\r\n    const magT = clamp01((deltaMagPx - REL_ORIENT_MAX_STEP) / Math.max(1, (REL_ORIENT_MAX_STEP_MAX - REL_ORIENT_MAX_STEP)));\r\n    const smoothRate = lerp(REL_ORIENT_SMOOTH_RATE_LOW, REL_ORIENT_SMOOTH_RATE_HIGH, magT);\r\n    const smoothFactor = clamp01(expSmoothing(dt, smoothRate) * clamp01(REL_ORIENT_SMOOTH));\r\n    smoothedDelta = vec3Smooth(smoothedDelta, deltaVec, smoothFactor * 0.9);\r\n\r\n    // clamp delta\r\n    // Convert pixel clamp to axis-angle clamp (rad) for stability before mapping.\r\n    const maxStepRad = maxStepPx / Math.max(1e-6, Math.abs(REL_ORIENT_GAIN));\r\n    smoothedDelta = vec3Clamp(smoothedDelta, Math.max(REL_ORIENT_DEADZONE, maxStepRad));\r\n\r\n    // Dead-zone / jitter suppression\r\n    const dz = {\r\n        x: Math.abs(smoothedDelta.x) < REL_ORIENT_DEADZONE ? 0 : smoothedDelta.x,\r\n        y: Math.abs(smoothedDelta.y) < REL_ORIENT_DEADZONE ? 0 : smoothedDelta.y,\r\n        z: Math.abs(smoothedDelta.z) < REL_ORIENT_DEADZONE ? 0 : smoothedDelta.z,\r\n    };\r\n\r\n    //\r\n    if (Math.abs(dz.x) < MOTION_JITTER_EPS && Math.abs(dz.y) < MOTION_JITTER_EPS && Math.abs(dz.z) < MOTION_JITTER_EPS) {\r\n        return vec3Zero();\r\n    }\r\n\r\n    // Map axes, apply gain, clamp\r\n    const mapped = mapAndScale(dz, maxStepPx);\r\n\r\n    // Ignore near-zero after mapping\r\n    if (vec3IsNearZero(mapped, MOTION_JITTER_EPS)) return vec3Zero();\r\n    return mapped;\r\n}\r\n\r\nexport function initRelativeOrientation() {\r\n    if (!(window as any).RelativeOrientationSensor ) {\r\n        log('RelativeOrientationSensor API is not supported.');\r\n        return;\r\n    }\r\n\r\n    try {\r\n        relSensor = new (window as any).RelativeOrientationSensor({ frequency: 120, referenceFrame: 'device' });\r\n    } catch (err: any) {\r\n        log('Cannot create RelativeOrientationSensor: ' + (err?.message || err));\r\n        relSensor = null;\r\n        return;\r\n    }\r\n\r\n    let lastTs = performance.now();\r\n\r\n    relSensor.addEventListener('reading', () => {\r\n        const now = performance.now();\r\n        const dt = Math.max(0.00001, (now - lastTs) / 1000);\r\n        lastTs = now;\r\n\r\n        const mapped = handleReading(relSensor.quaternion, dt);\r\n\r\n        //\r\n        if (getAirState && getAirState() !== 'AIR_MOVE') return;\r\n        if (!isWSConnected()) return;\r\n        if (aiModeActive) return;\r\n\r\n        // Accumulate into unified motion queue\r\n        enqueueMotion(mapped.x, mapped.y, mapped.z);\r\n    });\r\n\r\n    relSensor.addEventListener('error', (event: any) => {\r\n        log('RelativeOrientationSensor error: ' + ((event?.error?.message) || event?.message || event));\r\n    });\r\n\r\n    try {\r\n        relSensor.start();\r\n        log('RelativeOrientationSensor started (120 Hz)');\r\n    } catch (err: any) {\r\n        log('RelativeOrientationSensor start failed: ' + (err?.message || err));\r\n    }\r\n}\r\n","// =========================\r\n// VirtualKeyboard API Management\r\n// =========================\r\n\r\nimport { log } from '../../utils/utils';\r\n\r\nlet virtualKeyboardAPI: any = null;\r\n\r\n// Check for VirtualKeyboard API support\r\nexport function initVirtualKeyboardAPI(): boolean {\r\n    if ('virtualKeyboard' in navigator && (navigator as any).virtualKeyboard) {\r\n        virtualKeyboardAPI = (navigator as any).virtualKeyboard;\r\n        virtualKeyboardAPI.overlaysContent = true;\r\n        log('VirtualKeyboard API available');\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\n// Get the VirtualKeyboard API instance\r\nexport function getVirtualKeyboardAPI(): any {\r\n    return virtualKeyboardAPI;\r\n}\r\n\r\n// Check if VirtualKeyboard API is available\r\nexport function hasVirtualKeyboardAPI(): boolean {\r\n    return virtualKeyboardAPI !== null;\r\n}\r\n\r\n","// =========================\r\n// Keyboard State Management\r\n// =========================\r\n\r\nlet keyboardVisible = false;\r\nlet keyboardElement: HTMLElement | null = null;\r\nlet toggleButton: HTMLElement | null = null;\r\n\r\nexport function setKeyboardVisible(visible: boolean) {\r\n    keyboardVisible = visible;\r\n}\r\n\r\nexport function isKeyboardVisible(): boolean {\r\n    return keyboardVisible;\r\n}\r\n\r\nexport function setKeyboardElement(element: HTMLElement | null) {\r\n    keyboardElement = element;\r\n}\r\n\r\nexport function getKeyboardElement(): HTMLElement | null {\r\n    return keyboardElement;\r\n}\r\n\r\nexport function setToggleButton(button: HTMLElement | null) {\r\n    toggleButton = button;\r\n}\r\n\r\nexport function getToggleButton(): HTMLElement | null {\r\n    return toggleButton;\r\n}\r\n\r\nif ('visualViewport' in globalThis) {\r\n    const VIEWPORT_VS_CLIENT_HEIGHT_RATIO = 0.75;\r\n    globalThis?.visualViewport?.addEventListener?.('resize', function (event) {\r\n        if (\r\n            (event.target.height * event.target.scale) / globalThis?.screen?.height <\r\n            VIEWPORT_VS_CLIENT_HEIGHT_RATIO\r\n        ) keyboardVisible = true;\r\n        else keyboardVisible = false;\r\n    });\r\n}\r\n\r\nif ('virtualKeyboard' in globalThis?.navigator) {\r\n    // Tell the browser you are taking care of virtual keyboard occlusions yourself.\r\n    navigator.virtualKeyboard.overlaysContent = true;\r\n    navigator.virtualKeyboard.addEventListener('geometrychange', (event) => {\r\n        const { x, y, width, height } = event.target.boundingRect;\r\n        if (height > 0) keyboardVisible = true;\r\n        else keyboardVisible = false;\r\n    });\r\n}\r\n","// =========================\r\n// Keyboard Constants\r\n// =========================\r\n\r\n// Emoji categories\r\nexport const EMOJI_CATEGORIES = {\r\n    'smileys': ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''],\r\n    'gestures': ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''],\r\n    'symbols': ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''],\r\n    'objects': ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''],\r\n    'arrows': ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''],\r\n};\r\n\r\n// Standard keyboard layout (lowercase)\r\nexport const KEYBOARD_LAYOUT = [\r\n    ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'],\r\n    ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p'],\r\n    ['a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l'],\r\n    ['z', 'x', 'c', 'v', 'b', 'n', 'm'],\r\n];\r\n\r\n// Standard keyboard layout (uppercase)\r\nexport const KEYBOARD_LAYOUT_UPPER = [\r\n    ['!', '@', '#', '$', '%', '^', '&', '*', '(', ')'],\r\n    ['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P'],\r\n    ['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L'],\r\n    ['Z', 'X', 'C', 'V', 'B', 'N', 'M'],\r\n];\r\n\r\n","// =========================\r\n// Keyboard Message Sending\r\n// =========================\r\n\r\nimport {\r\n    isWSConnected,\r\n    connectWS,\r\n    sendKeyboardChar as wsSendKeyboardChar,\r\n    createKeyboardMessage,\r\n    sendBinaryMessage\r\n} from '../../network/websocket';\r\n\r\n// Re-export for backward compatibility and direct binary sending\r\nexport function sendKeyboardChar(char: string) {\r\n    // Try to connect if not connected (non-blocking)\r\n    if (!isWSConnected()) {\r\n        connectWS();\r\n    }\r\n\r\n    // Use the websocket module's function\r\n    wsSendKeyboardChar(char);\r\n}\r\n\r\n// For sending pre-built binary messages (optimization)\r\nexport function sendKeyboardBinary(codePoint: number, flags: number) {\r\n    if (!isWSConnected()) {\r\n        connectWS();\r\n    }\r\n\r\n    const buffer = createKeyboardMessage(codePoint, flags);\r\n    sendBinaryMessage(buffer);\r\n}\r\n","// =========================\r\n// Keyboard UI Rendering\r\n// =========================\r\n\r\nimport { H } from 'fest/lure';\r\nimport { EMOJI_CATEGORIES, KEYBOARD_LAYOUT, KEYBOARD_LAYOUT_UPPER } from './constants';\r\nimport { sendKeyboardChar } from './message';\r\nimport { getToggleButton } from './state';\r\n\r\n// Create keyboard HTML structure - hidden by default\r\nexport function createKeyboardHTML(): string {\r\n    return H`\r\n        <div class=\"virtual-keyboard-container\" data-hidden=\"true\" aria-hidden=\"true\" style=\"display: none;\"></div>\r\n            <div class=\"keyboard-header\">\r\n                <button class=\"keyboard-close\" aria-label=\"Close keyboard\"></button>\r\n                <div class=\"keyboard-tabs\">\r\n                    <button class=\"keyboard-tab active\" data-tab=\"letters\">ABC</button>\r\n                    <button class=\"keyboard-tab\" data-tab=\"emoji\"></button>\r\n                </div>\r\n            </div>\r\n            <div class=\"keyboard-content\">\r\n                <div class=\"keyboard-panel active\" data-panel=\"letters\">\r\n                    <div class=\"keyboard-shift-container\">\r\n                        <button class=\"keyboard-shift\" data-shift=\"lower\"></button>\r\n                    </div>\r\n                    <div class=\"keyboard-rows\" id=\"keyboardRows\"></div>\r\n                    <div class=\"keyboard-special\">\r\n                        <button class=\"keyboard-key special space\" data-key=\" \">Space</button>\r\n                        <button class=\"keyboard-key special backspace\" data-key=\"backspace\"></button>\r\n                        <button class=\"keyboard-key special enter\" data-key=\"enter\"></button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"keyboard-panel\" data-panel=\"emoji\">\r\n                    <div class=\"emoji-categories\">\r\n                        ${Object.keys(EMOJI_CATEGORIES).map(cat =>\r\n                            `<button class=\"emoji-category-btn\" data-category=\"${cat}\">${cat}</button>`\r\n                        ).join('')}\r\n                    </div>\r\n                    <div class=\"emoji-grid\" id=\"emojiGrid\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `;\r\n}\r\n\r\n// Render keyboard layout\r\nexport function renderKeyboard(isUpper: boolean = false) {\r\n    const rowsEl = document.getElementById('keyboardRows');\r\n    if (!rowsEl) return;\r\n\r\n    rowsEl.innerHTML = '';\r\n    const layout = isUpper ? KEYBOARD_LAYOUT_UPPER : KEYBOARD_LAYOUT;\r\n\r\n    layout.forEach((row) => {\r\n        const rowEl = document.createElement('div');\r\n        rowEl.className = 'keyboard-row';\r\n        row.forEach(key => {\r\n            const keyEl = document.createElement('button');\r\n            keyEl.className = 'keyboard-key';\r\n            keyEl.textContent = key;\r\n            keyEl.setAttribute('data-key', key);\r\n            keyEl.addEventListener('click', () => handleKeyPress(key));\r\n            rowEl.appendChild(keyEl);\r\n        });\r\n        rowsEl.appendChild(rowEl);\r\n    });\r\n}\r\n\r\n// Render emoji grid\r\nexport function renderEmoji(category: string) {\r\n    const gridEl = document.getElementById('emojiGrid');\r\n    if (!gridEl) return;\r\n\r\n    const emojis = EMOJI_CATEGORIES[category as keyof typeof EMOJI_CATEGORIES] || [];\r\n    gridEl.innerHTML = '';\r\n\r\n    emojis.forEach(emoji => {\r\n        const emojiEl = document.createElement('button');\r\n        emojiEl.className = 'emoji-key';\r\n        emojiEl.textContent = emoji;\r\n        emojiEl.setAttribute('data-emoji', emoji);\r\n        emojiEl.addEventListener('click', () => handleKeyPress(emoji));\r\n        gridEl.appendChild(emojiEl);\r\n    });\r\n}\r\n\r\n// Handle key press\r\nfunction handleKeyPress(key: string) {\r\n    if (key === 'backspace') {\r\n        sendKeyboardChar('\\b');\r\n    } else if (key === 'enter') {\r\n        sendKeyboardChar('\\n');\r\n    } else {\r\n        sendKeyboardChar(key);\r\n    }\r\n    // Reduced logging for better performance\r\n    // log(`Keyboard: ${key === ' ' ? 'Space' : key === '\\b' ? 'Backspace' : key === '\\n' ? 'Enter' : key}`);\r\n}\r\n\r\n// Restore button icon\r\nexport function restoreButtonIcon() {\r\n    const toggleButton = getToggleButton();\r\n    if (!toggleButton) return;\r\n    // Clear any text content and restore icon immediately (no delay)\r\n    toggleButton.textContent = '';\r\n    // Move cursor to end to prevent visible selection\r\n    const range = document.createRange();\r\n    const sel = globalThis?.getSelection?.();\r\n    if (sel && toggleButton.firstChild) {\r\n        try {\r\n            range.setStart(toggleButton.firstChild, Math.min(1, toggleButton.textContent.length));\r\n            range.collapse(true);\r\n            sel.removeAllRanges();\r\n            sel.addRange(range);\r\n        } catch (e) {\r\n            // Ignore selection errors\r\n        }\r\n    }\r\n}\r\n\r\n","// =========================\r\n// Keyboard Event Handlers\r\n// =========================\r\n\r\nimport { log } from '../../utils/utils';\r\nimport { sendKeyboardChar } from './message';\r\nimport { getVirtualKeyboardAPI, hasVirtualKeyboardAPI } from './api';\r\nimport {\r\n    isKeyboardVisible,\r\n    setKeyboardVisible,\r\n    getKeyboardElement,\r\n    getToggleButton\r\n} from './state';\r\nimport { renderKeyboard, renderEmoji, restoreButtonIcon } from './ui';\r\n\r\nconst DEBUG_KEYBOARD_INPUT = false;\r\n\r\n// Show keyboard\r\nexport function showKeyboard() {\r\n    // Don't show keyboard if config dialog is open\r\n    const configOverlay = document.querySelector('.config-overlay');\r\n    if (configOverlay && configOverlay.classList.contains('flex')) {\r\n        return;\r\n    }\r\n\r\n    const keyboardElement = getKeyboardElement();\r\n    //if (!keyboardElement) return;\r\n\r\n    const virtualKeyboardAPI = getVirtualKeyboardAPI();\r\n    const toggleButton = getToggleButton();\r\n\r\n    if (virtualKeyboardAPI) {\r\n        toggleButton!.contentEditable = 'true';\r\n        restoreButtonIcon();\r\n        toggleButton?.focus();\r\n        virtualKeyboardAPI.show();\r\n    } else {\r\n        setKeyboardVisible(true);\r\n        keyboardElement?.classList?.add?.('visible');\r\n    }\r\n\r\n    renderKeyboard(false);\r\n    renderEmoji('smileys');\r\n}\r\n\r\n// Flag to prevent recursive hideKeyboard calls\r\nlet isHidingKeyboard = false;\r\n\r\n// Hide keyboard\r\nexport function hideKeyboard() {\r\n    // Prevent recursive calls\r\n    if (isHidingKeyboard) return;\r\n    isHidingKeyboard = true;\r\n\r\n    try {\r\n        const keyboardElement = getKeyboardElement();\r\n        //if (!keyboardElement) return;\r\n\r\n        const virtualKeyboardAPI = getVirtualKeyboardAPI();\r\n        const toggleButton = getToggleButton();\r\n        //toggleButton?.focus?.();\r\n\r\n        setKeyboardVisible(false);\r\n        keyboardElement?.classList?.remove?.('visible');\r\n\r\n        if (virtualKeyboardAPI) {\r\n            restoreButtonIcon();\r\n            virtualKeyboardAPI.hide();\r\n            toggleButton?.blur();\r\n        }\r\n\r\n        (document.activeElement as HTMLElement)?.blur?.();\r\n    } finally {\r\n        isHidingKeyboard = false;\r\n    }\r\n}\r\n\r\n// Toggle keyboard visibility\r\nexport function toggleKeyboard() {\r\n    if (isKeyboardVisible()) {\r\n        hideKeyboard();\r\n    } else {\r\n        showKeyboard();\r\n    }\r\n}\r\n\r\n// Setup toggle button click handler\r\nexport function setupToggleButtonHandler() {\r\n    const toggleButton = getToggleButton();\r\n    const virtualKeyboardAPI = getVirtualKeyboardAPI();\r\n\r\n    if (!toggleButton) return;\r\n\r\n    toggleButton.addEventListener('click', (e) => {\r\n        // Don't allow keyboard toggle if config dialog is open\r\n        const configOverlay = document.querySelector('.config-overlay');\r\n        if (configOverlay && configOverlay.classList.contains('flex')) {\r\n            return;\r\n        }\r\n\r\n        if (virtualKeyboardAPI) {\r\n            e.preventDefault();\r\n        }\r\n        toggleKeyboard();\r\n    });\r\n}\r\n\r\n// Setup VirtualKeyboard API input handlers\r\nexport function setupVirtualKeyboardAPIHandlers() {\r\n    const virtualKeyboardAPI = getVirtualKeyboardAPI();\r\n    const toggleButton = getToggleButton();\r\n\r\n    if (!virtualKeyboardAPI || !toggleButton) return;\r\n\r\n    const ICON = '';\r\n    let pendingRestore: number | null = null;\r\n\r\n    // Track what was handled to prevent duplicates\r\n    let lastHandledKey: string | null = null;\r\n    let lastHandledTime: number = 0;\r\n    const DEDUP_WINDOW_MS = 80;\r\n\r\n    // Track if we're waiting for input event after Unidentified keydown\r\n    let waitingForInput = false;\r\n\r\n    // Track last known content for diff-based input detection\r\n    let lastKnownContent = ICON;\r\n\r\n    // Track if beforeinput fired (to know if input is fallback)\r\n    let beforeInputFired = false;\r\n\r\n    // ==================\r\n    // COMPOSITION STATE - Track incremental composition\r\n    // ==================\r\n    let isComposing = false;\r\n    let lastCompositionText = ''; // Track what we've already sent during composition\r\n    let compositionTimeout: number | null = null;\r\n    const COMPOSITION_TIMEOUT_MS = 600;\r\n\r\n    // Reset composition state\r\n    const resetCompositionState = (immediate: boolean = false) => {\r\n        if (compositionTimeout !== null) {\r\n            clearTimeout(compositionTimeout);\r\n            compositionTimeout = null;\r\n        }\r\n\r\n        if (immediate) {\r\n            isComposing = false;\r\n            lastCompositionText = '';\r\n        } else {\r\n            compositionTimeout = globalThis.setTimeout(() => {\r\n                isComposing = false;\r\n                lastCompositionText = '';\r\n                compositionTimeout = null;\r\n            }, COMPOSITION_TIMEOUT_MS) as unknown as number;\r\n        }\r\n    };\r\n\r\n    // Helper to check if we should skip (already handled recently)\r\n    const shouldSkipDuplicate = (key: string): boolean => {\r\n        const now = Date.now();\r\n        if (lastHandledKey === key && (now - lastHandledTime) < DEDUP_WINDOW_MS) {\r\n            return true;\r\n        }\r\n        lastHandledKey = key;\r\n        lastHandledTime = now;\r\n        return false;\r\n    };\r\n\r\n    // Helper to schedule icon restore with debounce\r\n    const scheduleRestore = () => {\r\n        queueMicrotask(() => {\r\n            pendingRestore = null;\r\n            restoreButtonIcon();\r\n            lastKnownContent = ICON;\r\n        /*if (pendingRestore !== null) {\r\n            clearTimeout(pendingRestore);\r\n        }\r\n        pendingRestore = globalThis?.setTimeout(() => {\r\n            pendingRestore = null;\r\n            restoreButtonIcon();\r\n            lastKnownContent = ICON;\r\n        }, 1);*/\r\n        });\r\n    };\r\n\r\n    // Helper to send char and restore\r\n    const sendAndRestore = (char: string) => {\r\n        sendKeyboardChar(char);\r\n        scheduleRestore();\r\n    };\r\n\r\n    // Helper to extract clean text (without icon)\r\n    const getCleanText = (text: string): string => {\r\n        return text\r\n            .replace(//g, '')\r\n            .replace(/\\uFE0F?/g, '')\r\n            .replace(/\\uFE0F/g, '');\r\n    };\r\n\r\n    // Helper to find new characters by comparing strings\r\n    const findNewCharacters = (currentText: string, previousText: string): string => {\r\n        const cleanCurrent = getCleanText(currentText);\r\n        const cleanPrevious = getCleanText(previousText);\r\n\r\n        // If current starts with previous, return the new part\r\n        if (cleanCurrent.startsWith(cleanPrevious)) {\r\n            return cleanCurrent.slice(cleanPrevious.length);\r\n        }\r\n\r\n        // If previous starts with current, characters were deleted\r\n        if (cleanPrevious.startsWith(cleanCurrent)) {\r\n            return ''; // Deletion, not addition\r\n        }\r\n\r\n        // Complete change - return all new text\r\n        return cleanCurrent;\r\n    };\r\n\r\n    // ==================\r\n    // KEYDOWN - Special keys + detect Unidentified for mobile\r\n    // ==================\r\n    toggleButton.addEventListener('keydown', (e) => {\r\n        // Check native isComposing flag\r\n        if (e.isComposing) {\r\n            if (compositionTimeout !== null) {\r\n                clearTimeout(compositionTimeout);\r\n                compositionTimeout = null;\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Trust event's isComposing over our flag\r\n        if (isComposing && !e.isComposing) {\r\n            resetCompositionState(true);\r\n        }\r\n\r\n        beforeInputFired = false;\r\n\r\n        // Backspace / Delete\r\n        if (e.key === 'Backspace' || e.key === 'Delete') {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            waitingForInput = false;\r\n            if (!shouldSkipDuplicate('backspace')) {\r\n                sendAndRestore('\\b');\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Enter\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            waitingForInput = false;\r\n            resetCompositionState(true);\r\n            if (!shouldSkipDuplicate('enter')) {\r\n                sendAndRestore('\\n');\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Tab\r\n        if (e.key === 'Tab') {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            waitingForInput = false;\r\n            if (!shouldSkipDuplicate('tab')) {\r\n                sendAndRestore('\\t');\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Unidentified / Process - mobile virtual keyboards\r\n        if (e.key === 'Unidentified' || e.key === 'Process' || e.key === '') {\r\n            waitingForInput = true;\r\n            lastKnownContent = toggleButton.textContent || ICON;\r\n            return;\r\n        }\r\n\r\n        // Space\r\n        if (e.key === ' ') {\r\n            e.preventDefault();\r\n            waitingForInput = false;\r\n            resetCompositionState(true);\r\n            return;\r\n        }\r\n\r\n        // Printable characters\r\n        if (e.key.length === 1 && !e.ctrlKey && !e.metaKey && !e.altKey) {\r\n            e.preventDefault();\r\n            waitingForInput = false;\r\n            return;\r\n        }\r\n\r\n        waitingForInput = false;\r\n    });\r\n\r\n    // ==================\r\n    // BEFOREINPUT - Main handler for text input\r\n    // ==================\r\n    toggleButton.addEventListener('beforeinput', (e) => {\r\n        const inputEvent = e as InputEvent;\r\n        lastKnownContent = toggleButton.textContent || ICON;\r\n        beforeInputFired = true;\r\n\r\n        // Let composition input through - we handle it in compositionupdate\r\n        if (inputEvent.inputType === 'insertCompositionText') {\r\n            if (compositionTimeout !== null) {\r\n                clearTimeout(compositionTimeout);\r\n                compositionTimeout = null;\r\n            }\r\n            return;\r\n        }\r\n\r\n        // insertText while composing means composition ended naturally\r\n        if (inputEvent.inputType === 'insertText' && isComposing) {\r\n            resetCompositionState(true);\r\n        }\r\n\r\n        // Handle Unidentified key\r\n        if (waitingForInput && inputEvent.inputType === 'insertText' && inputEvent.data) {\r\n            e.preventDefault();\r\n            waitingForInput = false;\r\n\r\n            if (!shouldSkipDuplicate(`text:${inputEvent.data}`)) {\r\n                for (const char of inputEvent.data) {\r\n                    sendKeyboardChar(char);\r\n                }\r\n                scheduleRestore();\r\n            }\r\n            return;\r\n        }\r\n\r\n        // insertText - regular character input\r\n        if (inputEvent.inputType === 'insertText') {\r\n            e.preventDefault();\r\n            const data = inputEvent.data;\r\n            if (data && !shouldSkipDuplicate(`text:${data}`)) {\r\n                for (const char of data) {\r\n                    sendKeyboardChar(char);\r\n                }\r\n                scheduleRestore();\r\n            }\r\n            return;\r\n        }\r\n\r\n        // insertReplacementText - autocomplete/suggestions\r\n        if (inputEvent.inputType === 'insertReplacementText') {\r\n            e.preventDefault();\r\n            resetCompositionState(true);\r\n            const data = inputEvent.data || (inputEvent as any).dataTransfer?.getData('text');\r\n            if (data && !shouldSkipDuplicate(`replace:${data}`)) {\r\n                for (const char of data) {\r\n                    sendKeyboardChar(char);\r\n                }\r\n                scheduleRestore();\r\n            }\r\n            return;\r\n        }\r\n\r\n        // insertLineBreak / insertParagraph\r\n        if (inputEvent.inputType === 'insertLineBreak' || inputEvent.inputType === 'insertParagraph') {\r\n            e.preventDefault();\r\n            resetCompositionState(true);\r\n            if (!shouldSkipDuplicate('linebreak')) {\r\n                sendAndRestore('\\n');\r\n            }\r\n            return;\r\n        }\r\n\r\n        // deleteContentBackward / deleteContentForward\r\n        if (inputEvent.inputType === 'deleteContentBackward' || inputEvent.inputType === 'deleteContentForward') {\r\n            e.preventDefault();\r\n            if (!shouldSkipDuplicate('deleteback')) {\r\n                sendAndRestore('\\b');\r\n            }\r\n            return;\r\n        }\r\n\r\n        // insertFromPaste\r\n        if (inputEvent.inputType === 'insertFromPaste') {\r\n            e.preventDefault();\r\n            resetCompositionState(true);\r\n            const data = inputEvent.data || (inputEvent as any).dataTransfer?.getData('text/plain');\r\n            if (data) {\r\n                for (const char of data) {\r\n                    sendKeyboardChar(char);\r\n                }\r\n                scheduleRestore();\r\n            }\r\n            return;\r\n        }\r\n    });\r\n\r\n    // ==================\r\n    // COMPOSITION - Send characters incrementally during compositionupdate\r\n    // ==================\r\n    toggleButton.addEventListener('compositionstart', () => {\r\n        if (compositionTimeout !== null) {\r\n            clearTimeout(compositionTimeout);\r\n            compositionTimeout = null;\r\n        }\r\n        isComposing = true;\r\n        lastCompositionText = '';\r\n        waitingForInput = false;\r\n        if (DEBUG_KEYBOARD_INPUT) console.log('[Composition] start');\r\n    });\r\n\r\n    toggleButton.addEventListener('compositionupdate', (e) => {\r\n        if (compositionTimeout !== null) {\r\n            clearTimeout(compositionTimeout);\r\n            compositionTimeout = null;\r\n        }\r\n\r\n        const currentText = e.data || '';\r\n        if (DEBUG_KEYBOARD_INPUT) console.log('[Composition] update:', currentText, 'last:', lastCompositionText);\r\n\r\n        // Find what's new since last update\r\n        if (currentText.startsWith(lastCompositionText)) {\r\n            // Characters were added\r\n            const newChars = currentText.slice(lastCompositionText.length);\r\n            if (newChars.length > 0) {\r\n                if (DEBUG_KEYBOARD_INPUT) console.log('[Composition] sending new chars:', newChars);\r\n                for (const char of newChars) {\r\n                    sendKeyboardChar(char);\r\n                }\r\n            }\r\n        } else if (lastCompositionText.startsWith(currentText)) {\r\n            // Characters were deleted (backspace during composition)\r\n            const deletedCount = lastCompositionText.length - currentText.length;\r\n            if (DEBUG_KEYBOARD_INPUT) console.log('[Composition] deleted chars:', deletedCount);\r\n            for (let i = 0; i < deletedCount; i++) {\r\n                sendKeyboardChar('\\b');\r\n            }\r\n        } else {\r\n            // Complete replacement (autocorrect, word selection)\r\n            // Delete old text and send new\r\n            if (DEBUG_KEYBOARD_INPUT) console.log('[Composition] replacement detected');\r\n            for (let i = 0; i < lastCompositionText.length; i++) {\r\n                sendKeyboardChar('\\b');\r\n            }\r\n            for (const char of currentText) {\r\n                sendKeyboardChar(char);\r\n            }\r\n        }\r\n\r\n        // Update tracking\r\n        lastCompositionText = currentText;\r\n        scheduleRestore();\r\n    });\r\n\r\n    toggleButton.addEventListener('compositionend', (e) => {\r\n        if (DEBUG_KEYBOARD_INPUT) console.log('[Composition] end:', e.data, 'lastSent:', lastCompositionText);\r\n\r\n        if (compositionTimeout !== null) {\r\n            clearTimeout(compositionTimeout);\r\n            compositionTimeout = null;\r\n        }\r\n\r\n        const finalText = e.data || '';\r\n\r\n        // Check if compositionend brings new data not sent via update\r\n        // This happens when user selects from autocomplete suggestions\r\n        if (finalText !== lastCompositionText) {\r\n            // Delete what we sent during composition\r\n            for (let i = 0; i < lastCompositionText.length; i++) {\r\n                sendKeyboardChar('\\b');\r\n            }\r\n            // Send the final text\r\n            for (const char of finalText) {\r\n                sendKeyboardChar(char);\r\n            }\r\n        }\r\n\r\n        // Reset composition state\r\n        isComposing = false;\r\n        lastCompositionText = '';\r\n        scheduleRestore();\r\n    });\r\n\r\n    // ==================\r\n    // INPUT - Fallback handler\r\n    // ==================\r\n    toggleButton.addEventListener('input', (e) => {\r\n        const inputEvent = e as InputEvent;\r\n\r\n        // Skip composition-related input - handled by composition events\r\n        if (inputEvent.inputType === 'insertCompositionText' ||\r\n            inputEvent.inputType?.includes('Composition')) {\r\n            return;\r\n        }\r\n\r\n        // If we're composing, let composition events handle it\r\n        if (isComposing) {\r\n            return;\r\n        }\r\n\r\n        const target = e.target as HTMLElement;\r\n        const currentText = target.textContent || '';\r\n\r\n        // Case 1: Waiting for input after Unidentified keydown\r\n        if (waitingForInput) {\r\n            waitingForInput = false;\r\n\r\n            const newChars = findNewCharacters(currentText, lastKnownContent);\r\n            if (DEBUG_KEYBOARD_INPUT) console.log('[Input] Unidentified key chars:', newChars);\r\n\r\n            if (newChars.length > 0 && !shouldSkipDuplicate(`unidentified:${newChars}`)) {\r\n                for (const char of newChars) {\r\n                    sendKeyboardChar(char);\r\n                }\r\n            }\r\n\r\n            scheduleRestore();\r\n            return;\r\n        }\r\n\r\n        // Case 2: beforeinput didn't fire\r\n        if (!beforeInputFired) {\r\n            const newChars = findNewCharacters(currentText, lastKnownContent);\r\n\r\n            if (newChars.length > 0 && !shouldSkipDuplicate(`input:${newChars}`)) {\r\n                for (const char of newChars) {\r\n                    sendKeyboardChar(char);\r\n                }\r\n            }\r\n\r\n            scheduleRestore();\r\n            return;\r\n        }\r\n\r\n        // Case 3: Normal case - just restore\r\n        scheduleRestore();\r\n        beforeInputFired = false;\r\n    });\r\n\r\n    // ==================\r\n    // PASTE\r\n    // ==================\r\n    toggleButton.addEventListener('paste', (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        waitingForInput = false;\r\n        resetCompositionState(true);\r\n\r\n        const pastedText = e.clipboardData?.getData('text') || '';\r\n        if (pastedText) {\r\n            for (const char of pastedText) {\r\n                sendKeyboardChar(char);\r\n            }\r\n            scheduleRestore();\r\n        }\r\n    });\r\n\r\n    // ==================\r\n    // DROP\r\n    // ==================\r\n    toggleButton.addEventListener('drop', (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        waitingForInput = false;\r\n        resetCompositionState(true);\r\n\r\n        const droppedText = e.dataTransfer?.getData('text') || '';\r\n        if (droppedText) {\r\n            for (const char of droppedText) {\r\n                sendKeyboardChar(char);\r\n            }\r\n        }\r\n        scheduleRestore();\r\n    });\r\n\r\n    // ==================\r\n    // FOCUS/BLUR\r\n    // ==================\r\n    toggleButton.addEventListener('blur', () => {\r\n        if (pendingRestore !== null) {\r\n            clearTimeout(pendingRestore);\r\n            pendingRestore = null;\r\n        }\r\n        if (compositionTimeout !== null) {\r\n            clearTimeout(compositionTimeout);\r\n            compositionTimeout = null;\r\n        }\r\n        isComposing = false;\r\n        lastCompositionText = '';\r\n        waitingForInput = false;\r\n        lastHandledKey = null;\r\n        beforeInputFired = false;\r\n        lastKnownContent = ICON;\r\n        restoreButtonIcon();\r\n    });\r\n\r\n    toggleButton.addEventListener('focus', () => {\r\n        lastHandledKey = null;\r\n        lastHandledTime = 0;\r\n        waitingForInput = false;\r\n        beforeInputFired = false;\r\n        isComposing = false;\r\n        lastCompositionText = '';\r\n        if (compositionTimeout !== null) {\r\n            clearTimeout(compositionTimeout);\r\n            compositionTimeout = null;\r\n        }\r\n        lastKnownContent = ICON;\r\n        restoreButtonIcon();\r\n    });\r\n}\r\n\r\n// Setup keyboard UI event handlers\r\nexport function setupKeyboardUIHandlers() {\r\n    const keyboardElement = getKeyboardElement();\r\n    if (!keyboardElement) return;\r\n\r\n    const closeBtn = keyboardElement.querySelector('.keyboard-close');\r\n    closeBtn?.addEventListener('click', hideKeyboard);\r\n\r\n    const tabs = keyboardElement.querySelectorAll('.keyboard-tab');\r\n    tabs.forEach(tab => {\r\n        tab.addEventListener('click', () => {\r\n            const targetTab = tab.getAttribute('data-tab');\r\n            tabs.forEach(t => t.classList.remove('active'));\r\n            tab.classList.add('active');\r\n\r\n            const panels = keyboardElement?.querySelectorAll('.keyboard-panel');\r\n            panels?.forEach(panel => {\r\n                panel.classList.remove('active');\r\n                if (panel.getAttribute('data-panel') === targetTab) {\r\n                    panel.classList.add('active');\r\n                }\r\n            });\r\n        });\r\n    });\r\n\r\n    const shiftBtn = keyboardElement.querySelector('.keyboard-shift');\r\n    let isUpper = false;\r\n    shiftBtn?.addEventListener('click', () => {\r\n        isUpper = !isUpper;\r\n        renderKeyboard(isUpper);\r\n        shiftBtn.classList.toggle('active', isUpper);\r\n    });\r\n\r\n    const categoryBtns = keyboardElement.querySelectorAll('.emoji-category-btn');\r\n    if (categoryBtns.length > 0) {\r\n        const firstBtn = categoryBtns[0] as HTMLElement;\r\n        firstBtn.classList.add('active');\r\n        const firstCategory = firstBtn.getAttribute('data-category');\r\n        if (firstCategory) {\r\n            renderEmoji(firstCategory);\r\n        }\r\n\r\n        categoryBtns.forEach(btn => {\r\n            btn.addEventListener('click', () => {\r\n                const category = btn.getAttribute('data-category');\r\n                if (category) {\r\n                    categoryBtns.forEach(b => b.classList.remove('active'));\r\n                    btn.classList.add('active');\r\n                    renderEmoji(category);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    keyboardElement.addEventListener('click', (e) => {\r\n        if (e.target === keyboardElement) {\r\n            hideKeyboard();\r\n        }\r\n    });\r\n\r\n    document.addEventListener('focusout', (e) => {\r\n        const target = e?.target as HTMLElement;\r\n        const relatedTarget = e?.relatedTarget as HTMLElement;\r\n\r\n        // Don't hide keyboard if focus is moving within config overlay\r\n        if (!(target?.closest?.('.config-overlay') || relatedTarget?.closest?.('.config-overlay'))) {\r\n            hideKeyboard();\r\n        }\r\n    });\r\n\r\n    document.addEventListener('click', (e) => {\r\n        const target = e?.target as HTMLElement;\r\n        if (!(target?.matches?.(\"input,textarea,select,button,[contenteditable=\\\"true\\\"]\") ||\r\n              target?.closest?.('.config-overlay'))) {\r\n            hideKeyboard();\r\n        }\r\n    });\r\n\r\n    document.addEventListener('pointerdown', (e) => {\r\n        const target = e?.target as HTMLElement;\r\n        if (!(target?.matches?.(\"input,textarea,select,button,[contenteditable=\\\"true\\\"]\") ||\r\n              target?.closest?.('.config-overlay'))) {\r\n            hideKeyboard();\r\n        }\r\n    });\r\n}\r\n","// =========================\r\n// Virtual Keyboard Component\r\n// =========================\r\n\r\nimport { log } from '../utils/utils';\r\nimport { initVirtualKeyboardAPI, hasVirtualKeyboardAPI } from './keyboard/api';\r\nimport { setKeyboardElement, setToggleButton } from './keyboard/state';\r\nimport { createKeyboardHTML } from './keyboard/ui';\r\nimport {\r\n    setupToggleButtonHandler,\r\n    setupVirtualKeyboardAPIHandlers,\r\n    setupKeyboardUIHandlers,\r\n} from './keyboard/handlers';\r\n\r\nexport function initVirtualKeyboard() {\r\n    // Initialize VirtualKeyboard API if available\r\n    initVirtualKeyboardAPI();\r\n    const hasAPI = hasVirtualKeyboardAPI();\r\n\r\n    // Create keyboard element\r\n    const container = document.querySelector('#app') ?? document.body;\r\n    const keyboardHTML = createKeyboardHTML();\r\n    container.insertAdjacentHTML('beforeend', keyboardHTML);\r\n    const keyboardElement = document.querySelector('.virtual-keyboard-container') as HTMLElement;\r\n\r\n    if (!keyboardElement) {\r\n        log('Failed to create keyboard element');\r\n        return;\r\n    }\r\n\r\n    // Ensure keyboard is hidden by default\r\n    keyboardElement.classList.remove('visible');\r\n\r\n    setKeyboardElement(keyboardElement);\r\n\r\n    // Create toggle button in corner\r\n    const toggleHTML = hasAPI\r\n        ? '<button type=\"button\" tabindex=\"-1\" contenteditable=\"true\" virtualkeyboardpolicy=\"manual\" class=\"keyboard-toggle keyboard-toggle-editable\" aria-label=\"Toggle keyboard\"></button>'\r\n        : '<button type=\"button\" tabindex=\"-1\" class=\"keyboard-toggle\" aria-label=\"Toggle keyboard\"></button>';\r\n    container.insertAdjacentHTML('beforeend', toggleHTML);\r\n    const toggleButton = document.querySelector('.keyboard-toggle') as HTMLElement;\r\n\r\n    if (!toggleButton) {\r\n        log('Failed to create toggle button');\r\n        return;\r\n    }\r\n\r\n    toggleButton.autofocus = false;\r\n    toggleButton.removeAttribute('autofocus');\r\n    setToggleButton(toggleButton);\r\n\r\n    // Setup event handlers\r\n    setupToggleButtonHandler();\r\n    setupVirtualKeyboardAPIHandlers();\r\n    setupKeyboardUIHandlers();\r\n\r\n    log('Virtual keyboard initialized');\r\n}\r\n","// =========================\r\n// Clipboard toolbar (Cut / Copy / Paste)\r\n// =========================\r\n\r\nimport { log, btnCut, btnCopy, btnPaste, clipboardPreviewEl } from '../utils/utils';\r\nimport {\r\n    onServerClipboardUpdate,\r\n    requestClipboardCopy,\r\n    requestClipboardCut,\r\n    requestClipboardPaste,\r\n    requestClipboardGet,\r\n} from '../network/websocket';\r\n\r\nfunction setPreview(text: string, meta?: { source?: string }) {\r\n    if (!clipboardPreviewEl || typeof clipboardPreviewEl === 'undefined') return;\r\n\r\n    const source = meta?.source ? String(meta.source) : 'pc';\r\n    const safeText = String(text ?? '');\r\n\r\n    if (!safeText) {\r\n        clipboardPreviewEl.classList.remove('visible');\r\n        clipboardPreviewEl.innerHTML = '';\r\n        return;\r\n    }\r\n\r\n    clipboardPreviewEl.innerHTML = `\r\n        <div class=\"meta\">Clipboard (${source})</div>\r\n        <div class=\"text\"></div>\r\n    `;\r\n    const textEl = clipboardPreviewEl.querySelector('.text') as HTMLElement | null;\r\n    if (textEl) textEl.textContent = safeText;\r\n    clipboardPreviewEl.classList.add('visible');\r\n}\r\n\r\nasync function readPhoneClipboardText(): Promise<string> {\r\n    // Requires HTTPS (or localhost) + user gesture in most browsers.\r\n    const nav: any = navigator as any;\r\n    if (nav?.clipboard?.readText) {\r\n        return await nav.clipboard.readText();\r\n    }\r\n    // Fallback\r\n    return globalThis?.prompt?.('    (clipboard readText ):', '') || '';\r\n}\r\n\r\nasync function tryWritePhoneClipboardText(text: string): Promise<boolean> {\r\n    const nav: any = navigator as any;\r\n    if (nav?.clipboard?.writeText) {\r\n        try {\r\n            await nav.clipboard.writeText(text);\r\n            return true;\r\n        } catch {\r\n            return false;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function initClipboardToolbar() {\r\n    // Keep preview in sync with backend clipboard events\r\n    onServerClipboardUpdate((text, meta) => setPreview(text, meta));\r\n\r\n    // Best-effort initial fetch (so UI isn't empty)\r\n    requestClipboardGet().then((res) => {\r\n        if (res?.ok && typeof res.text === 'string') setPreview(res.text, { source: 'pc' });\r\n    });\r\n\r\n    btnCopy?.addEventListener('click', async () => {\r\n        const res = await requestClipboardCopy();\r\n        if (!res?.ok) {\r\n            log('Copy failed: ' + (res?.error || 'unknown'));\r\n            return;\r\n        }\r\n\r\n        const text = String(res.text || '');\r\n        setPreview(text, { source: 'pc' });\r\n\r\n        // Best-effort: try to write to phone clipboard (may be blocked by browser policies).\r\n        const ok = await tryWritePhoneClipboardText(text);\r\n        if (!ok) {\r\n            log('PC clipboard received. If phone clipboard write is blocked, copy from the preview line.');\r\n        }\r\n    });\r\n\r\n    btnCut?.addEventListener('click', async () => {\r\n        const res = await requestClipboardCut();\r\n        if (!res?.ok) {\r\n            log('Cut failed: ' + (res?.error || 'unknown'));\r\n            return;\r\n        }\r\n\r\n        const text = String(res.text || '');\r\n        setPreview(text, { source: 'pc' });\r\n\r\n        const ok = await tryWritePhoneClipboardText(text);\r\n        if (!ok) {\r\n            log('PC clipboard received (after cut). If phone clipboard write is blocked, copy from the preview line.');\r\n        }\r\n    });\r\n\r\n    btnPaste?.addEventListener('click', async () => {\r\n        const text = await readPhoneClipboardText();\r\n        if (!text) {\r\n            log('Paste: phone clipboard is empty (or permission denied).');\r\n            return;\r\n        }\r\n\r\n        const res = await requestClipboardPaste(text);\r\n        if (!res?.ok) {\r\n            log('Paste failed: ' + (res?.error || 'unknown'));\r\n            return;\r\n        }\r\n\r\n        // Show what we just pasted (useful confirmation)\r\n        setPreview(text, { source: 'phone' });\r\n    });\r\n}\r\n\r\n\r\n","// =========================\n// Configuration UI for Airpad\n// =========================\n\nimport { H } from \"fest/lure\";\nimport { getRemoteHost, setRemoteHost, getRemotePort, setRemotePort } from '../config/config';\nimport { disconnectWS, connectWS, isWSConnected } from '../network/websocket';\nimport { hideKeyboard } from '../input/keyboard/handlers';\n\n// Create configuration overlay\nexport function createConfigUI(): HTMLElement {\n    const overlay = H`<div class=\"config-overlay\">\n        <div class=\"config-panel\">\n            <h3>Airpad Configuration</h3>\n\n            <div class=\"config-group\">\n                <label for=\"remoteHost\">Remote Host/IP:</label>\n                <input type=\"text\" id=\"remoteHost\" value=\"${getRemoteHost()}\" />\n            </div>\n\n            <div class=\"config-group\">\n                <label for=\"remotePort\">Remote Port:</label>\n                <input type=\"text\" id=\"remotePort\" value=\"${getRemotePort()}\" />\n            </div>\n\n            <div class=\"config-actions\">\n                <button id=\"saveConfig\">Save & Reconnect</button>\n                <button id=\"cancelConfig\">Cancel</button>\n            </div>\n        </div>\n    </div>` as HTMLElement;\n\n    // Add event listeners\n    const hostInput = overlay.querySelector('#remoteHost') as HTMLInputElement;\n    const portInput = overlay.querySelector('#remotePort') as HTMLInputElement;\n    const saveButton = overlay.querySelector('#saveConfig') as HTMLButtonElement;\n    const cancelButton = overlay.querySelector('#cancelConfig') as HTMLButtonElement;\n\n    saveButton.addEventListener('click', () => {\n        setRemoteHost(hostInput.value);\n        setRemotePort(portInput.value);\n\n        // Disconnect and reconnect with new settings\n        if (isWSConnected()) {\n            disconnectWS();\n        }\n        setTimeout(() => connectWS(), 100);\n\n        // Hide overlay\n        overlay.style.display = 'none';\n    });\n\n    cancelButton.addEventListener('click', () => {\n        overlay.style.display = 'none';\n    });\n\n    // Click outside to close\n    overlay.addEventListener('click', (e) => {\n        if (e.target === overlay) {\n            overlay.style.display = 'none';\n        }\n    });\n\n    return overlay;\n}\n\n// Show configuration overlay\nexport function showConfigUI(): void {\n    // Hide virtual keyboard when opening config dialog\n    hideKeyboard();\n\n    let overlay = document.querySelector('.config-overlay') as HTMLElement;\n    if (!overlay) {\n        overlay = createConfigUI();\n        (document.querySelector('#app') ?? document.body).appendChild(overlay);\n    }\n    overlay.style.display = 'flex';\n}","// =========================\r\n// Main entry point\r\n// =========================\r\n\r\n//\r\nimport stylesheet from './main.scss?inline';\r\nimport { initServiceWorker } from '@rs-frontend/pwa/sw-handling';\r\n\r\n//\r\nimport { log, getBtnConnect } from './utils/utils';\r\nimport { initWebSocket } from './network/websocket';\r\nimport { initSpeechRecognition, initAiButton } from './input/speech';\r\nimport { initAirButton } from './ui/air-button';\r\nimport { initRelativeOrientation } from './input/sensor/relative-orientation';\r\nimport { initVirtualKeyboard } from './input/virtual-keyboard';\r\nimport { initClipboardToolbar } from './ui/clipboard-toolbar';\r\nimport { showConfigUI } from './ui/config-ui';\r\nimport { loadAsAdopted } from 'fest/dom';\r\nimport { H } from 'fest/lure';\r\n\r\n// =========================\r\n// Mount function for routing system\r\n// =========================\r\n\r\nexport default async function mountAirpad(mountElement: HTMLElement): Promise<void> {\r\n    console.log('[Airpad] Mounting airpad app...');\r\n\r\n    loadAsAdopted(stylesheet);\r\n\r\n    // Find or create #app container\r\n    let appContainer = mountElement ?? document.body.querySelector('#app') ?? document.body as HTMLElement;\r\n    if (!appContainer) {\r\n        appContainer = document.createElement('div');\r\n        appContainer.id = 'app';\r\n    }\r\n\r\n    // Set up complete HTML structure inside the #app container (based on need-to-port-into-ts.html)\r\n    appContainer.append(H`\r\n        <div class=\"container\">\r\n            <header class=\"hero\">\r\n                <h1>Air Trackpad + AI Assistant</h1>\r\n                <div class=\"subtitle\">\r\n                        : Air  , AI   .\r\n                </div>\r\n\r\n                <div class=\"status-container\">\r\n                    <div class=\"status-bar\">\r\n                        <div class=\"status-item\">\r\n                            WS:\r\n                            <span id=\"wsStatus\" class=\"value ws-status-bad\">disconnected</span>\r\n                        </div>\r\n                        <div class=\"status-item\">\r\n                            Air:\r\n                            <span id=\"airStatus\" class=\"value\">IDLE</span>\r\n                        </div>\r\n                        <div class=\"status-item\">\r\n                            AI:\r\n                            <span id=\"aiStatus\" class=\"value\">idle</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button contenteditable=\"false\" virtualkeyboardpolicy=\"manual\" type=\"button\" id=\"btnConnect\"\r\n                        class=\"primary-btn\">\r\n                         WS\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            <div class=\"stage\">\r\n                <div class=\"ai-block\">\r\n                    <div contenteditable=\"false\" virtualkeyboardpolicy=\"manual\" id=\"aiButton\" class=\"big-button ai\">\r\n                        AI\r\n                    </div>\r\n                    <div class=\"label\">  (  )</div>\r\n                </div>\r\n\r\n                <div class=\"air-block\">\r\n                    <div class=\"air-row\">\r\n                    <button contenteditable=\"false\" virtualkeyboardpolicy=\"manual\" type=\"button\" id=\"airButton\" class=\"big-button air\">\r\n                        Air\r\n                    </button>\r\n                    <button contenteditable=\"false\" virtualkeyboardpolicy=\"manual\" type=\"button\" id=\"airNeighborButton\"\r\n                        class=\"neighbor-button\">Act</button>\r\n                    </div>\r\n                    <div class=\"label\">Air/  </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div id=\"voiceText\" class=\"voice-line\"></div>\r\n\r\n            <div class=\"hint\">\r\n                 Air:\r\n                <ul>\r\n                    <li>   .</li>\r\n                    <li> &gt; 100ms   air (  ).</li>\r\n                    <li> /     .</li>\r\n                    <li> /   (    ).</li>\r\n                </ul>\r\n                AI:\r\n                <ul>\r\n                    <li>      .</li>\r\n                    <li>       <code>voice_command</code>.</li>\r\n                </ul>\r\n                 :\r\n                <ul>\r\n                    <li>         .</li>\r\n                    <li>  ,    .</li>\r\n                    <li>     .</li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n\r\n        <button contenteditable=\"false\" virtualkeyboardpolicy=\"manual\" type=\"button\" id=\"logToggle\" class=\"side-log-toggle\"\r\n            aria-controls=\"logOverlay\" aria-expanded=\"false\">\r\n            \r\n        </button>\r\n\r\n        <div id=\"logOverlay\" class=\"log-overlay\" aria-hidden=\"true\">\r\n            <div class=\"log-panel\">\r\n                <div class=\"log-overlay-header\">\r\n                    <span> </span>\r\n                    <button contenteditable=\"false\" virtualkeyboardpolicy=\"manual\" type=\"button\" id=\"logClose\"\r\n                        class=\"ghost-btn\" aria-label=\" \"></button>\r\n                </div>\r\n                <div id=\"logContainer\" class=\"log-container\"></div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Bottom clipboard toolbar (phone <-> PC) -->\r\n        <div class=\"bottom-toolbar\" id=\"clipboardToolbar\" aria-label=\"Clipboard actions\">\r\n            <button contenteditable=\"false\" virtualkeyboardpolicy=\"manual\" type=\"button\" id=\"btnCut\"\r\n                class=\"toolbar-btn\" aria-label=\"Cut (Ctrl+X)\"></button>\r\n            <button contenteditable=\"false\" virtualkeyboardpolicy=\"manual\" type=\"button\" id=\"btnCopy\"\r\n                class=\"toolbar-btn\" aria-label=\"Copy (Ctrl+C)\"></button>\r\n            <button contenteditable=\"false\" virtualkeyboardpolicy=\"manual\" type=\"button\" id=\"btnPaste\"\r\n                class=\"toolbar-btn\" aria-label=\"Paste (Ctrl+V)\"></button>\r\n        </div>\r\n        <div id=\"clipboardPreview\" class=\"clipboard-preview\" aria-live=\"polite\"></div>\r\n    `);\r\n\r\n    // Initialize the airpad functionality\r\n    await initAirpadApp();\r\n}\r\n\r\n// =========================\r\n// Internal initialization\r\n// =========================\r\n\r\nasync function initAirpadApp(): Promise<void> {\r\n    function initConfigButton() {\r\n    const configButton = document.createElement('button');\r\n    configButton.className = 'toolbar-btn';\r\n    configButton.textContent = '';\r\n    configButton.title = 'Configuration';\r\n    configButton.addEventListener('click', showConfigUI);\r\n\r\n    const bottomToolbar = document.querySelector('.bottom-toolbar');\r\n    if (bottomToolbar) {\r\n        bottomToolbar.appendChild(configButton);\r\n    }\r\n}\r\n\r\n// =========================\r\n// Init\r\n// =========================\r\nfunction initLogOverlay() {\r\n    const overlay = document.getElementById('logOverlay');\r\n    const toggle = document.getElementById('logToggle');\r\n    const close = document.getElementById('logClose');\r\n\r\n    if (!overlay || !toggle) {\r\n        return;\r\n    }\r\n\r\n    const openOverlay = () => {\r\n        overlay.classList.add('open');\r\n        overlay.setAttribute('aria-hidden', 'false');\r\n        toggle.setAttribute('aria-expanded', 'true');\r\n    };\r\n\r\n    const closeOverlay = () => {\r\n        overlay.classList.remove('open');\r\n        overlay.setAttribute('aria-hidden', 'true');\r\n        toggle.setAttribute('aria-expanded', 'false');\r\n    };\r\n\r\n    toggle.addEventListener('click', openOverlay);\r\n    close?.addEventListener('click', closeOverlay);\r\n    overlay.addEventListener('click', (e) => {\r\n        if (e.target === overlay) {\r\n            closeOverlay();\r\n        }\r\n    });\r\n    document.addEventListener('keydown', (e) => {\r\n        if (e.key === 'Escape' && overlay.classList.contains('open')) {\r\n            closeOverlay();\r\n        }\r\n    });\r\n    }\r\n\r\n    requestIdleCallback(async () => {\r\n    // PWA: register Service Worker (auto-update)\r\n    try {\r\n        initServiceWorker({\r\n            immediate: true,\r\n            onRegistered() {\r\n                log('PWA: service worker registered');\r\n            },\r\n            onRegisterError(error) {\r\n                log('PWA: service worker register error: ' + ((error as any)?.message ?? String(error)));\r\n            },\r\n        });\r\n    } catch (err: any) {\r\n        log('PWA: service worker disabled: ' + (err?.message || err));\r\n    }\r\n\r\n    log('.  \" WS\",   Air/AI .');\r\n    log('     Gyroscope API ( ).');\r\n\r\n    initLogOverlay();\r\n    initWebSocket(getBtnConnect());\r\n    initSpeechRecognition();\r\n    initAiButton();\r\n    initAirButton();\r\n    initVirtualKeyboard();\r\n    initClipboardToolbar();\r\n    initConfigButton();\r\n    //  RelativeOrientationSensor   \r\n    initRelativeOrientation();\r\n    //     \r\n    //initGravitySensor();\r\n    //initGyro();\r\n    //initAccelerometer();\r\n    });\r\n}\r\n"],"file":"main.js"}