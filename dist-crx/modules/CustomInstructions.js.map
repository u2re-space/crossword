{"version":3,"file":"CustomInstructions.js","sources":["../../src/com/service/instructions/utils.ts","../../src/com/service/misc/CustomInstructions.ts"],"sourcesContent":["import type { ResponseLanguage } from \"@rs-com/config/SettingsTypes\";\nimport type { CustomInstruction } from \"@rs-com/config/SettingsTypes\";\nimport type { OutputFormat } from \"../shared/types\";\n\nexport type { CustomInstruction };\n\nexport const buildInstructionPrompt = (baseInstruction: string, customInstruction: string): string => {\n\tif (!customInstruction?.trim()) return baseInstruction;\n\n\treturn `${baseInstruction}\n\n---\n\nUSER CUSTOM INSTRUCTIONS:\n${customInstruction.trim()}\n\n---\n\nApply the user's custom instructions above when processing the data. Prioritize user instructions when they conflict with default behavior.\n`;\n};\n\nexport const SVG_GRAPHICS_ADDON = `\n---\n\nGRAPHICS GENERATION (when applicable):\nWhen the problem involves functions, graphs, geometric shapes, diagrams, or data that can be visualized:\n\nGenerate inline SVG as Markdown image with data URI:\n![<title>](data:image/svg+xml,<encodeURIComponent_encoded_svg>)\n\nSVG Requirements:\n- Use encodeURIComponent() encoding for the entire SVG string\n- viewBox=\"0 0 400 300\" (or appropriate dimensions)\n- Colors: #3b82f6 (blue), #10b981 (green), #f59e0b (orange), #ef4444 (red)\n- Include axis labels, tick marks, and legends\n- Use <text> elements for annotations\n- Keep SVG minimal but informative\n\nApply to:\n• Function graphs: f(x), parametric, polar\n• Geometric constructions and proofs\n• Data visualizations and charts\n• Diagrams and flowcharts\n• Coordinate systems and number lines\n\nAlways include both the mathematical solution AND the visualization.\n`;\n\nexport const buildInstructionWithGraphics = (\n\tbaseInstruction: string,\n\tcustomInstruction: string,\n\tincludeSvgGraphics: boolean,\n): string => {\n\tlet result = buildInstructionPrompt(baseInstruction, customInstruction);\n\n\tif (includeSvgGraphics) {\n\t\tresult += SVG_GRAPHICS_ADDON;\n\t}\n\n\treturn result;\n};\n\nexport const generateInstructionId = (): string => {\n\treturn `ci_${Date.now()}_${Math.random().toString(36).slice(2, 8)}`;\n};\n\nexport const LANGUAGE_INSTRUCTIONS: Record<ResponseLanguage, string> = {\n\tauto: \"\",\n\ten: \"\\n\\nIMPORTANT: Respond in English. All explanations, answers, and comments must be in English.\",\n\tru: \"\\n\\nВАЖНО: Отвечай на русском языке. Все объяснения, ответы и комментарии должны быть на русском языке.\",\n};\n\nexport const TRANSLATE_INSTRUCTION =\n\t\"\\n\\nAdditionally, translate the recognized content to the response language if it differs from the source.\";\n\nexport function getOutputFormatInstruction(format: OutputFormat): string {\n\tif (format === \"auto\" || format === undefined) return \"\";\n\n\tconst instructions: Record<OutputFormat, string> = {\n\t\tauto: \"\",\n\t\tmarkdown: `\\n\\nOutput the result in GitHub-compatible Markdown.\n\nMarkdown structure:\n- Use headings for structure:\n  - Main sections: start from ### (H3) minimum\n  - Subsections: #### / ##### when needed\n- Avoid long paragraphs: prefer lists and sub-lists.\n\nKaTeX / math:\n- Prefer inline formulas: $...$\n- Avoid $$...$$ blocks; only use block math if strictly necessary.\n  - Prefer block math as \\\\[ ... \\\\] instead of $$...$$.\n- Inside KaTeX, write a vertical bar as \\\\| (example: $A \\\\| B$).\n\nTables:\n- Use strict GitHub Markdown table syntax.\n- Inside table cells:\n  - Use <br> for line breaks (no real newlines inside cells).\n  - If source data uses ';' as a separator, replace ';' with <br>.\n\nColon formatting:\n- For \"key: value\" style lines, make the part before ':' bold:\n  - **Key**: value`,\n\t\thtml: \"\\n\\nOutput the result in HTML format.\",\n\t\tjson: \"\\n\\nOutput the result as valid JSON.\",\n\t\ttext: \"\\n\\nOutput the result as plain text.\",\n\t\ttypescript: \"\\n\\nOutput the result as TypeScript code.\",\n\t\tjavascript: \"\\n\\nOutput the result as JavaScript code.\",\n\t\tpython: \"\\n\\nOutput the result as Python code.\",\n\t\tjava: \"\\n\\nOutput the result as Java code.\",\n\t\tcpp: \"\\n\\nOutput the result as C++ code.\",\n\t\tcsharp: \"\\n\\nOutput the result as C# code.\",\n\t\tphp: \"\\n\\nOutput the result as PHP code.\",\n\t\truby: \"\\n\\nOutput the result as Ruby code.\",\n\t\tgo: \"\\n\\nOutput the result as Go code.\",\n\t\trust: \"\\n\\nOutput the result as Rust code.\",\n\t\txml: \"\\n\\nOutput the result as XML.\",\n\t\tyaml: \"\\n\\nOutput the result as YAML.\",\n\t\tcss: \"\\n\\nOutput the result as CSS.\",\n\t\tscss: \"\\n\\nOutput the result as SCSS.\",\n\t\t\"most-suitable\": \"\\n\\nChoose the most suitable output format for the content and task.\",\n\t\t\"most-optimized\": \"\\n\\nChoose the most optimized output format for clarity and usability.\",\n\t\t\"most-legibility\": \"\\n\\nChoose the most legible output format for human readability.\",\n\t};\n\n\treturn instructions[format] || \"\";\n}\n\nexport function getIntermediateRecognitionInstruction(format: OutputFormat): string {\n\tconst baseInstruction =\n\t\t\"Extract all readable text, equations, and data from this image. Focus on accuracy and completeness.\";\n\n\tif (format === \"markdown\") {\n\t\treturn baseInstruction + \" Format the extracted content as clean Markdown.\";\n\t} else if (format === \"html\") {\n\t\treturn baseInstruction + \" Format the extracted content as semantic HTML.\";\n\t} else if (format === \"text\") {\n\t\treturn baseInstruction + \" Extract as plain text only.\";\n\t} else if (format === \"most-suitable\") {\n\t\treturn \"Analyze this image and extract all readable content in the most appropriate format for further processing.\";\n\t} else if (format === \"most-optimized\") {\n\t\treturn \"Extract content from this image in the most efficient format for token usage and processing.\";\n\t} else if (format === \"most-legibility\") {\n\t\treturn \"Extract content from this image with maximum legibility and human readability.\";\n\t}\n\n\treturn baseInstruction + \" Format appropriately for the content type.\";\n}\n","/*\n * Custom Instructions Service\n * Manages user-defined instructions for AI recognition operations\n */\n\nimport { loadSettings, saveSettings } from \"@rs-com/config/Settings\";\nimport type { AppSettings } from \"@rs-com/config/SettingsTypes\";\nimport {\n    generateInstructionId,\n    buildInstructionPrompt,\n    DEFAULT_INSTRUCTION_TEMPLATES,\n    type CustomInstruction\n} from \"./InstructionUtils\";\n\nexport type { CustomInstruction };\nexport { buildInstructionPrompt, DEFAULT_INSTRUCTION_TEMPLATES };\n\nconst generateId = generateInstructionId;\n\nexport const getCustomInstructions = async (): Promise<CustomInstruction[]> => {\n    const settings = await loadSettings();\n    return settings?.ai?.customInstructions || [];\n};\n\nexport const getActiveInstruction = async (): Promise<CustomInstruction | null> => {\n    try {\n        const settings = await loadSettings();\n        const instructions = settings?.ai?.customInstructions || [];\n        const activeId = settings?.ai?.activeInstructionId;\n\n        if (!activeId) return null;\n\n        const active = instructions.find(i => i.id === activeId);\n        if (!active) {\n            console.warn(\"[CustomInstructions] activeInstructionId not found:\", activeId);\n        }\n\n        return active || null;\n    } catch (e) {\n        console.error(\"[CustomInstructions] Error in getActiveInstruction:\", e);\n        return null;\n    }\n};\n\nexport const getActiveInstructionText = async (): Promise<string> => {\n    const instruction = await getActiveInstruction();\n    return instruction?.instruction || \"\";\n};\n\nexport const setActiveInstruction = async (id: string | null): Promise<void> => {\n    const settings = await loadSettings();\n    const updated: AppSettings = {\n        ...settings,\n        ai: {\n            ...settings.ai,\n            activeInstructionId: id || \"\"\n        }\n    };\n    await saveSettings(updated);\n};\n\nexport const addInstruction = async (label: string, instruction: string): Promise<CustomInstruction> => {\n    const settings = await loadSettings();\n    const instructions = settings?.ai?.customInstructions || [];\n\n    const newInstruction: CustomInstruction = {\n        id: generateId(),\n        label: label.trim() || \"Untitled\",\n        instruction: instruction.trim(),\n        enabled: true,\n        order: instructions.length\n    };\n\n    const updated: AppSettings = {\n        ...settings,\n        ai: {\n            ...settings.ai,\n            customInstructions: [...instructions, newInstruction]\n        }\n    };\n\n    await saveSettings(updated);\n    return newInstruction;\n};\n\n/**\n * Add multiple instructions at once (avoids race conditions from parallel saves)\n */\nexport const addInstructions = async (\n    items: { label: string; instruction: string; enabled?: boolean }[]\n): Promise<CustomInstruction[]> => {\n    if (!items.length) return [];\n\n    const settings = await loadSettings();\n    const instructions = settings?.ai?.customInstructions || [];\n\n    const newInstructions: CustomInstruction[] = items.map((item, index) => ({\n        id: generateId(),\n        label: item.label.trim() || \"Untitled\",\n        instruction: item.instruction.trim(),\n        enabled: item.enabled ?? true,\n        order: instructions.length + index\n    }));\n\n    const updated: AppSettings = {\n        ...settings,\n        ai: {\n            ...settings.ai,\n            customInstructions: [...instructions, ...newInstructions]\n        }\n    };\n\n    await saveSettings(updated);\n    return newInstructions;\n};\n\nexport const updateInstruction = async (id: string, updates: Partial<Omit<CustomInstruction, \"id\">>): Promise<boolean> => {\n    const settings = await loadSettings();\n    const instructions = settings?.ai?.customInstructions || [];\n    const index = instructions.findIndex(i => i.id === id);\n\n    if (index === -1) return false;\n\n    instructions[index] = { ...instructions[index], ...updates };\n\n    const updated: AppSettings = {\n        ...settings,\n        ai: {\n            ...settings.ai,\n            customInstructions: instructions\n        }\n    };\n\n    await saveSettings(updated);\n    return true;\n};\n\nexport const deleteInstruction = async (id: string): Promise<boolean> => {\n    const settings = await loadSettings();\n    const instructions = settings?.ai?.customInstructions || [];\n    const filtered = instructions.filter(i => i.id !== id);\n\n    if (filtered.length === instructions.length) return false;\n\n    // If deleting the active instruction, clear activeInstructionId\n    const newActiveId = settings.ai?.activeInstructionId === id ? \"\" : (settings.ai?.activeInstructionId || \"\");\n\n    const updated: AppSettings = {\n        ...settings,\n        ai: {\n            ...settings.ai,\n            customInstructions: filtered,\n            activeInstructionId: newActiveId\n        }\n    };\n\n    await saveSettings(updated);\n    return true;\n};\n\nexport const reorderInstructions = async (orderedIds: string[]): Promise<void> => {\n    const settings = await loadSettings();\n    const instructions = settings?.ai?.customInstructions || [];\n\n    const reordered = orderedIds\n        .map((id, index) => {\n            const instr = instructions.find(i => i.id === id);\n            return instr ? { ...instr, order: index } : null;\n        })\n        .filter((i): i is CustomInstruction => i !== null && i !== undefined);\n\n    const updated: AppSettings = {\n        ...settings,\n        ai: {\n            ...settings.ai,\n            customInstructions: reordered\n        }\n    };\n\n    await saveSettings(updated);\n};\n\nexport const addDefaultTemplates = async (): Promise<CustomInstruction[]> => {\n    const settings = await loadSettings();\n    const existing = settings?.ai?.customInstructions || [];\n\n    if (existing.length > 0) return existing;\n\n    const newInstructions: CustomInstruction[] = DEFAULT_INSTRUCTION_TEMPLATES.map((template, index) => ({\n        ...template,\n        id: generateId(),\n        order: index\n    }));\n\n    const updated: AppSettings = {\n        ...settings,\n        ai: {\n            ...settings.ai,\n            customInstructions: newInstructions\n        }\n    };\n\n    await saveSettings(updated);\n    return newInstructions;\n};\n"],"names":[],"mappings":"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"}